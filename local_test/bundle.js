/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={4572:(t,e,r)=>{"use strict";r(2419),r(8128),r(5777),r(2681),r(5240),r(1368),r(6073),r(7739),r(4897),r(4925),r(1243),r(8978),r(3415),r(7452)},2419:(t,e,r)=>{r(9650),r(935),r(6064),r(7067),r(2642),r(3e3),r(8647),r(1895),r(8236),r(3822),r(5572),r(9318),r(5032),r(9073),r(1430),r(8451),r(8132),r(7482),r(5049),r(489),r(5502),r(571),r(6108),r(4509),r(7727),r(6701),r(4419),r(1933),r(3157),r(9497),r(4104),r(210),r(6576),r(4437),r(8050),r(6648),r(5771),r(2392),r(2335),r(4896),r(4521),r(9147),r(1318),r(4352),r(5327),r(7509),r(5909),r(9584),r(345),r(9134),r(7901),r(6592),r(2220),r(3483),r(957),r(2975),r(2405),r(7224),r(8872),r(4894),r(177),r(7360),r(9011),r(4591),r(7334),r(7083),r(9213),r(8437),r(9839),r(6549),r(2818),r(8543),r(3559),r(4153),r(3292),r(2346),r(9429),r(7849),r(8951),r(7899),r(3863),r(4570),r(6511),r(5853),r(7075),r(3504),r(4913),r(9813),r(8892),r(8888),r(1449),r(7874),r(4609),r(3706),r(9620),r(7762),r(5144),r(5369),r(6209),r(5165),r(8301),r(4116),r(8604),r(9638),r(4040),r(8305),r(4701),r(341),r(6517),r(3386),r(1632),r(9397),r(8163),r(5706),r(660),r(8699),r(4702),r(333),r(1220),r(2087),r(8066),r(8537),r(7925),r(2490),r(7103),r(2586),r(2552),r(4376),r(5153),r(1879),r(2650),r(1104),r(1883),r(5433),r(5e3),r(5932),r(5443),r(6316),t.exports=r(6094)},5777:(t,e,r)=>{r(9766),t.exports=r(6094).Array.flatMap},8128:(t,e,r)=>{r(9087),t.exports=r(6094).Array.includes},1243:(t,e,r)=>{r(7146),t.exports=r(6094).Object.entries},4897:(t,e,r)=>{r(4614),t.exports=r(6094).Object.getOwnPropertyDescriptors},4925:(t,e,r)=>{r(7594),t.exports=r(6094).Object.values},8978:(t,e,r)=>{"use strict";r(6517),r(8583),t.exports=r(6094).Promise.finally},5240:(t,e,r)=>{r(5693),t.exports=r(6094).String.padEnd},2681:(t,e,r)=>{r(5380),t.exports=r(6094).String.padStart},6073:(t,e,r)=>{r(521),t.exports=r(6094).String.trimRight},1368:(t,e,r)=>{r(62),t.exports=r(6094).String.trimLeft},7739:(t,e,r)=>{r(2820),t.exports=r(7960).f("asyncIterator")},5104:(t,e,r)=>{r(1124),t.exports=r(6438).global},5219:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},812:(t,e,r)=>{var i=r(4401);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},6438:t=>{var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},8852:(t,e,r)=>{var i=r(5219);t.exports=function(t,e,r){if(i(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,i){return t.call(e,r,i)};case 3:return function(r,i,n){return t.call(e,r,i,n)}}return function(){return t.apply(e,arguments)}}},8219:(t,e,r)=>{t.exports=!r(1984)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},3802:(t,e,r)=>{var i=r(4401),n=r(6670).document,o=i(n)&&i(n.createElement);t.exports=function(t){return o?n.createElement(t):{}}},8535:(t,e,r)=>{var i=r(6670),n=r(6438),o=r(8852),s=r(2677),a=r(5509),h="prototype",u=function(t,e,r){var c,l,f,p=t&u.F,d=t&u.G,v=t&u.S,y=t&u.P,g=t&u.B,m=t&u.W,x=d?n:n[e]||(n[e]={}),b=x[h],w=d?i:v?i[e]:(i[e]||{})[h];for(c in d&&(r=e),r)(l=!p&&w&&void 0!==w[c])&&a(x,c)||(f=l?w[c]:r[c],x[c]=d&&"function"!=typeof w[c]?r[c]:g&&l?o(f,i):m&&w[c]==f?function(t){var e=function(e,r,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,i)}return t.apply(this,arguments)};return e[h]=t[h],e}(f):y&&"function"==typeof f?o(Function.call,f):f,y&&((x.virtual||(x.virtual={}))[c]=f,t&u.R&&b&&!b[c]&&s(b,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},1984:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},6670:t=>{var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},5509:t=>{var e={}.hasOwnProperty;t.exports=function(t,r){return e.call(t,r)}},2677:(t,e,r)=>{var i=r(8423),n=r(6260);t.exports=r(8219)?function(t,e,r){return i.f(t,e,n(1,r))}:function(t,e,r){return t[e]=r,t}},2484:(t,e,r)=>{t.exports=!r(8219)&&!r(1984)((function(){return 7!=Object.defineProperty(r(3802)("div"),"a",{get:function(){return 7}}).a}))},4401:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},8423:(t,e,r)=>{var i=r(812),n=r(2484),o=r(752),s=Object.defineProperty;e.f=r(8219)?Object.defineProperty:function(t,e,r){if(i(t),e=o(e,!0),i(r),n)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},6260:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},752:(t,e,r)=>{var i=r(4401);t.exports=function(t,e){if(!i(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!i(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},1124:(t,e,r)=>{var i=r(8535);i(i.G,{global:r(6670)})},3387:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},5122:(t,e,r)=>{var i=r(5089);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=i(t))throw TypeError(e);return+t}},8184:(t,e,r)=>{var i=r(7574)("unscopables"),n=Array.prototype;null==n[i]&&r(3341)(n,i,{}),t.exports=function(t){n[i][t]=!0}},8828:(t,e,r)=>{"use strict";var i=r(1212)(!0);t.exports=function(t,e,r){return e+(r?i(t,e).length:1)}},6440:t=>{t.exports=function(t,e,r,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(r+": incorrect invocation!");return t}},4228:(t,e,r)=>{var i=r(3305);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},4438:(t,e,r)=>{"use strict";var i=r(8270),n=r(157),o=r(1485);t.exports=[].copyWithin||function(t,e){var r=i(this),s=o(r.length),a=n(t,s),h=n(e,s),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?s:n(u,s))-h,s-a),l=1;for(h<a&&a<h+c&&(l=-1,h+=c-1,a+=c-1);c-- >0;)h in r?r[a]=r[h]:delete r[a],a+=l,h+=l;return r}},5564:(t,e,r)=>{"use strict";var i=r(8270),n=r(157),o=r(1485);t.exports=function(t){for(var e=i(this),r=o(e.length),s=arguments.length,a=n(s>1?arguments[1]:void 0,r),h=s>2?arguments[2]:void 0,u=void 0===h?r:n(h,r);u>a;)e[a++]=t;return e}},1464:(t,e,r)=>{var i=r(7221),n=r(1485),o=r(157);t.exports=function(t){return function(e,r,s){var a,h=i(e),u=n(h.length),c=o(s,u);if(t&&r!=r){for(;u>c;)if((a=h[c++])!=a)return!0}else for(;u>c;c++)if((t||c in h)&&h[c]===r)return t||c||0;return!t&&-1}}},6179:(t,e,r)=>{var i=r(5052),n=r(1249),o=r(8270),s=r(1485),a=r(3191);t.exports=function(t,e){var r=1==t,h=2==t,u=3==t,c=4==t,l=6==t,f=5==t||l,p=e||a;return function(e,a,d){for(var v,y,g=o(e),m=n(g),x=i(a,d,3),b=s(m.length),w=0,E=r?p(e,b):h?p(e,0):void 0;b>w;w++)if((f||w in m)&&(y=x(v=m[w],w,g),t))if(r)E[w]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:E.push(v)}else if(c)return!1;return l?-1:u||c?c:E}}},6543:(t,e,r)=>{var i=r(3387),n=r(8270),o=r(1249),s=r(1485);t.exports=function(t,e,r,a,h){i(e);var u=n(t),c=o(u),l=s(u.length),f=h?l-1:0,p=h?-1:1;if(r<2)for(;;){if(f in c){a=c[f],f+=p;break}if(f+=p,h?f<0:l<=f)throw TypeError("Reduce of empty array with no initial value")}for(;h?f>=0:l>f;f+=p)f in c&&(a=e(a,c[f],f,u));return a}},3606:(t,e,r)=>{var i=r(3305),n=r(7981),o=r(7574)("species");t.exports=function(t){var e;return n(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!n(e.prototype)||(e=void 0),i(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},3191:(t,e,r)=>{var i=r(3606);t.exports=function(t,e){return new(i(t))(e)}},5538:(t,e,r)=>{"use strict";var i=r(3387),n=r(3305),o=r(4877),s=[].slice,a={};t.exports=Function.bind||function(t){var e=i(this),r=s.call(arguments,1),h=function(){var i=r.concat(s.call(arguments));return this instanceof h?function(t,e,r){if(!(e in a)){for(var i=[],n=0;n<e;n++)i[n]="a["+n+"]";a[e]=Function("F,a","return new F("+i.join(",")+")")}return a[e](t,r)}(e,i.length,i):o(e,i,t)};return n(e.prototype)&&(h.prototype=e.prototype),h}},4848:(t,e,r)=>{var i=r(5089),n=r(7574)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),n))?r:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},5089:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},6197:(t,e,r)=>{"use strict";var i=r(7967).f,n=r(4719),o=r(6065),s=r(5052),a=r(6440),h=r(8790),u=r(8175),c=r(4970),l=r(5762),f=r(1763),p=r(2988).fastKey,d=r(2888),v=f?"_s":"size",y=function(t,e){var r,i=p(e);if("F"!==i)return t._i[i];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,u){var c=t((function(t,i){a(t,c,e,"_i"),t._t=e,t._i=n(null),t._f=void 0,t._l=void 0,t[v]=0,null!=i&&h(i,r,t[u],t)}));return o(c.prototype,{clear:function(){for(var t=d(this,e),r=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete r[i.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var r=d(this,e),i=y(r,t);if(i){var n=i.n,o=i.p;delete r._i[i.i],i.r=!0,o&&(o.n=n),n&&(n.p=o),r._f==i&&(r._f=n),r._l==i&&(r._l=o),r[v]--}return!!i},forEach:function(t){d(this,e);for(var r,i=s(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(i(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!y(d(this,e),t)}}),f&&i(c.prototype,"size",{get:function(){return d(this,e)[v]}}),c},def:function(t,e,r){var i,n,o=y(t,e);return o?o.v=r:(t._l=o={i:n=p(e,!0),k:e,v:r,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[v]++,"F"!==n&&(t._i[n]=o)),t},getEntry:y,setStrong:function(t,e,r){u(t,e,(function(t,r){this._t=d(t,e),this._k=r,this._l=void 0}),(function(){for(var t=this,e=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?c(0,"keys"==e?r.k:"values"==e?r.v:[r.k,r.v]):(t._t=void 0,c(1))}),r?"entries":"values",!r,!0),l(e)}}},9882:(t,e,r)=>{"use strict";var i=r(6065),n=r(2988).getWeak,o=r(4228),s=r(3305),a=r(6440),h=r(8790),u=r(6179),c=r(7917),l=r(2888),f=u(5),p=u(6),d=0,v=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,e){return f(t.a,(function(t){return t[0]===e}))};y.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var r=g(this,t);r?r[1]=e:this.a.push([t,e])},delete:function(t){var e=p(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,r,o){var u=t((function(t,i){a(t,u,e,"_i"),t._t=e,t._i=d++,t._l=void 0,null!=i&&h(i,r,t[o],t)}));return i(u.prototype,{delete:function(t){if(!s(t))return!1;var r=n(t);return!0===r?v(l(this,e)).delete(t):r&&c(r,this._i)&&delete r[this._i]},has:function(t){if(!s(t))return!1;var r=n(t);return!0===r?v(l(this,e)).has(t):r&&c(r,this._i)}}),u},def:function(t,e,r){var i=n(o(e),!0);return!0===i?v(t).set(e,r):i[t._i]=r,t},ufstore:v}},8933:(t,e,r)=>{"use strict";var i=r(7526),n=r(2127),o=r(8859),s=r(6065),a=r(2988),h=r(8790),u=r(6440),c=r(3305),l=r(9448),f=r(8931),p=r(3844),d=r(8880);t.exports=function(t,e,r,v,y,g){var m=i[t],x=m,b=y?"set":"add",w=x&&x.prototype,E={},T=function(t){var e=w[t];o(w,t,"delete"==t||"has"==t?function(t){return!(g&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,r){return e.call(this,0===t?0:t,r),this})};if("function"==typeof x&&(g||w.forEach&&!l((function(){(new x).entries().next()})))){var S=new x,_=S[b](g?{}:-0,1)!=S,O=l((function(){S.has(1)})),P=f((function(t){new x(t)})),M=!g&&l((function(){for(var t=new x,e=5;e--;)t[b](e,e);return!t.has(-0)}));P||((x=e((function(e,r){u(e,x,t);var i=d(new m,e,x);return null!=r&&h(r,y,i[b],i),i}))).prototype=w,w.constructor=x),(O||M)&&(T("delete"),T("has"),y&&T("get")),(M||_)&&T(b),g&&w.clear&&delete w.clear}else x=v.getConstructor(e,t,y,b),s(x.prototype,r),a.NEED=!0;return p(x,t),E[t]=x,n(n.G+n.W+n.F*(x!=m),E),g||v.setStrong(x,t,y),x}},6094:t=>{var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},7227:(t,e,r)=>{"use strict";var i=r(7967),n=r(1996);t.exports=function(t,e,r){e in t?i.f(t,e,n(0,r)):t[e]=r}},5052:(t,e,r)=>{var i=r(3387);t.exports=function(t,e,r){if(i(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,i){return t.call(e,r,i)};case 3:return function(r,i,n){return t.call(e,r,i,n)}}return function(){return t.apply(e,arguments)}}},5385:(t,e,r)=>{"use strict";var i=r(9448),n=Date.prototype.getTime,o=Date.prototype.toISOString,s=function(t){return t>9?t:"0"+t};t.exports=i((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!i((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(n.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),r=t.getUTCMilliseconds(),i=e<0?"-":e>9999?"+":"";return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+s(t.getUTCMonth()+1)+"-"+s(t.getUTCDate())+"T"+s(t.getUTCHours())+":"+s(t.getUTCMinutes())+":"+s(t.getUTCSeconds())+"."+(r>99?r:"0"+s(r))+"Z"}:o},107:(t,e,r)=>{"use strict";var i=r(4228),n=r(3048),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return n(i(this),t!=o)}},3344:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},1763:(t,e,r)=>{t.exports=!r(9448)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},6034:(t,e,r)=>{var i=r(3305),n=r(7526).document,o=i(n)&&i(n.createElement);t.exports=function(t){return o?n.createElement(t):{}}},6140:t=>{t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},5969:(t,e,r)=>{var i=r(1311),n=r(1060),o=r(8449);t.exports=function(t){var e=i(t),r=n.f;if(r)for(var s,a=r(t),h=o.f,u=0;a.length>u;)h.call(t,s=a[u++])&&e.push(s);return e}},2127:(t,e,r)=>{var i=r(7526),n=r(6094),o=r(3341),s=r(8859),a=r(5052),h="prototype",u=function(t,e,r){var c,l,f,p,d=t&u.F,v=t&u.G,y=t&u.S,g=t&u.P,m=t&u.B,x=v?i:y?i[e]||(i[e]={}):(i[e]||{})[h],b=v?n:n[e]||(n[e]={}),w=b[h]||(b[h]={});for(c in v&&(r=e),r)f=((l=!d&&x&&void 0!==x[c])?x:r)[c],p=m&&l?a(f,i):g&&"function"==typeof f?a(Function.call,f):f,x&&s(x,c,f,t&u.U),b[c]!=f&&o(b,c,p),g&&w[c]!=f&&(w[c]=f)};i.core=n,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},5203:(t,e,r)=>{var i=r(7574)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[i]=!1,!"/./"[t](e)}catch(t){}}return!0}},9448:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},9228:(t,e,r)=>{"use strict";r(4116);var i=r(8859),n=r(3341),o=r(9448),s=r(3344),a=r(7574),h=r(9600),u=a("species"),c=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(t,e,r){var f=a(t),p=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),d=p?!o((function(){var e=!1,r=/a/;return r.exec=function(){return e=!0,null},"split"===t&&(r.constructor={},r.constructor[u]=function(){return r}),r[f](""),!e})):void 0;if(!p||!d||"replace"===t&&!c||"split"===t&&!l){var v=/./[f],y=r(s,f,""[t],(function(t,e,r,i,n){return e.exec===h?p&&!n?{done:!0,value:v.call(e,r,i)}:{done:!0,value:t.call(r,e,i)}:{done:!1}})),g=y[0],m=y[1];i(String.prototype,t,g),n(RegExp.prototype,f,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},1158:(t,e,r)=>{"use strict";var i=r(4228);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},2322:(t,e,r)=>{"use strict";var i=r(7981),n=r(3305),o=r(1485),s=r(5052),a=r(7574)("isConcatSpreadable");t.exports=function t(e,r,h,u,c,l,f,p){for(var d,v,y=c,g=0,m=!!f&&s(f,p,3);g<u;){if(g in h){if(d=m?m(h[g],g,r):h[g],v=!1,n(d)&&(v=void 0!==(v=d[a])?!!v:i(d)),v&&l>0)y=t(e,r,d,o(d.length),y,l-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=d}y++}g++}return y}},8790:(t,e,r)=>{var i=r(5052),n=r(7368),o=r(1508),s=r(4228),a=r(1485),h=r(762),u={},c={},l=t.exports=function(t,e,r,l,f){var p,d,v,y,g=f?function(){return t}:h(t),m=i(r,l,e?2:1),x=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(p=a(t.length);p>x;x++)if((y=e?m(s(d=t[x])[0],d[1]):m(t[x]))===u||y===c)return y}else for(v=g.call(t);!(d=v.next()).done;)if((y=n(v,m,d.value,e))===u||y===c)return y};l.BREAK=u,l.RETURN=c},9461:(t,e,r)=>{t.exports=r(4556)("native-function-to-string",Function.toString)},7526:t=>{var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},7917:t=>{var e={}.hasOwnProperty;t.exports=function(t,r){return e.call(t,r)}},3341:(t,e,r)=>{var i=r(7967),n=r(1996);t.exports=r(1763)?function(t,e,r){return i.f(t,e,n(1,r))}:function(t,e,r){return t[e]=r,t}},1308:(t,e,r)=>{var i=r(7526).document;t.exports=i&&i.documentElement},2956:(t,e,r)=>{t.exports=!r(1763)&&!r(9448)((function(){return 7!=Object.defineProperty(r(6034)("div"),"a",{get:function(){return 7}}).a}))},8880:(t,e,r)=>{var i=r(3305),n=r(5170).set;t.exports=function(t,e,r){var o,s=e.constructor;return s!==r&&"function"==typeof s&&(o=s.prototype)!==r.prototype&&i(o)&&n&&n(t,o),t}},4877:t=>{t.exports=function(t,e,r){var i=void 0===r;switch(e.length){case 0:return i?t():t.call(r);case 1:return i?t(e[0]):t.call(r,e[0]);case 2:return i?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},1249:(t,e,r)=>{var i=r(5089);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},1508:(t,e,r)=>{var i=r(906),n=r(7574)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[n]===t)}},7981:(t,e,r)=>{var i=r(5089);t.exports=Array.isArray||function(t){return"Array"==i(t)}},3842:(t,e,r)=>{var i=r(3305),n=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&n(t)===t}},3305:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},5411:(t,e,r)=>{var i=r(3305),n=r(5089),o=r(7574)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==n(t))}},7368:(t,e,r)=>{var i=r(4228);t.exports=function(t,e,r,n){try{return n?e(i(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},6032:(t,e,r)=>{"use strict";var i=r(4719),n=r(1996),o=r(3844),s={};r(3341)(s,r(7574)("iterator"),(function(){return this})),t.exports=function(t,e,r){t.prototype=i(s,{next:n(1,r)}),o(t,e+" Iterator")}},8175:(t,e,r)=>{"use strict";var i=r(2750),n=r(2127),o=r(8859),s=r(3341),a=r(906),h=r(6032),u=r(3844),c=r(627),l=r(7574)("iterator"),f=!([].keys&&"next"in[].keys()),p="keys",d="values",v=function(){return this};t.exports=function(t,e,r,y,g,m,x){h(r,e,y);var b,w,E,T=function(t){if(!f&&t in P)return P[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},S=e+" Iterator",_=g==d,O=!1,P=t.prototype,M=P[l]||P["@@iterator"]||g&&P[g],A=M||T(g),L=g?_?T("entries"):A:void 0,C="Array"==e&&P.entries||M;if(C&&(E=c(C.call(new t)))!==Object.prototype&&E.next&&(u(E,S,!0),i||"function"==typeof E[l]||s(E,l,v)),_&&M&&M.name!==d&&(O=!0,A=function(){return M.call(this)}),i&&!x||!f&&!O&&P[l]||s(P,l,A),a[e]=A,a[S]=v,g)if(b={values:_?A:T(d),keys:m?A:T(p),entries:L},x)for(w in b)w in P||o(P,w,b[w]);else n(n.P+n.F*(f||O),e,b);return b}},8931:(t,e,r)=>{var i=r(7574)("iterator"),n=!1;try{var o=[7][i]();o.return=function(){n=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!n)return!1;var r=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:r=!0}},o[i]=function(){return s},t(o)}catch(t){}return r}},4970:t=>{t.exports=function(t,e){return{value:e,done:!!t}}},906:t=>{t.exports={}},2750:t=>{t.exports=!1},5551:t=>{var e=Math.expm1;t.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:e},2122:(t,e,r)=>{var i=r(3733),n=Math.pow,o=n(2,-52),s=n(2,-23),a=n(2,127)*(2-s),h=n(2,-126);t.exports=Math.fround||function(t){var e,r,n=Math.abs(t),u=i(t);return n<h?u*(n/h/s+1/o-1/o)*h*s:(r=(e=(1+s/o)*n)-(e-n))>a||r!=r?u*(1/0):u*r}},1473:t=>{t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},3733:t=>{t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},2988:(t,e,r)=>{var i=r(4415)("meta"),n=r(3305),o=r(7917),s=r(7967).f,a=0,h=Object.isExtensible||function(){return!0},u=!r(9448)((function(){return h(Object.preventExtensions({}))})),c=function(t){s(t,i,{value:{i:"O"+ ++a,w:{}}})},l=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!h(t))return"F";if(!e)return"E";c(t)}return t[i].i},getWeak:function(t,e){if(!o(t,i)){if(!h(t))return!0;if(!e)return!1;c(t)}return t[i].w},onFreeze:function(t){return u&&l.NEED&&h(t)&&!o(t,i)&&c(t),t}}},1384:(t,e,r)=>{var i=r(7526),n=r(2780).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,h="process"==r(5089)(s);t.exports=function(){var t,e,r,u=function(){var i,n;for(h&&(i=s.domain)&&i.exit();t;){n=t.fn,t=t.next;try{n()}catch(i){throw t?r():e=void 0,i}}e=void 0,i&&i.enter()};if(h)r=function(){s.nextTick(u)};else if(!o||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var c=a.resolve(void 0);r=function(){c.then(u)}}else r=function(){n.call(i,u)};else{var l=!0,f=document.createTextNode("");new o(u).observe(f,{characterData:!0}),r=function(){f.data=l=!l}}return function(i){var n={fn:i,next:void 0};e&&(e.next=n),t||(t=n,r()),e=n}}},4258:(t,e,r)=>{"use strict";var i=r(3387);function n(t){var e,r;this.promise=new t((function(t,i){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=i})),this.resolve=i(e),this.reject=i(r)}t.exports.f=function(t){return new n(t)}},8206:(t,e,r)=>{"use strict";var i=r(1763),n=r(1311),o=r(1060),s=r(8449),a=r(8270),h=r(1249),u=Object.assign;t.exports=!u||r(9448)((function(){var t={},e={},r=Symbol(),i="abcdefghijklmnopqrst";return t[r]=7,i.split("").forEach((function(t){e[t]=t})),7!=u({},t)[r]||Object.keys(u({},e)).join("")!=i}))?function(t,e){for(var r=a(t),u=arguments.length,c=1,l=o.f,f=s.f;u>c;)for(var p,d=h(arguments[c++]),v=l?n(d).concat(l(d)):n(d),y=v.length,g=0;y>g;)p=v[g++],i&&!f.call(d,p)||(r[p]=d[p]);return r}:u},4719:(t,e,r)=>{var i=r(4228),n=r(1626),o=r(6140),s=r(766)("IE_PROTO"),a=function(){},h="prototype",u=function(){var t,e=r(6034)("iframe"),i=o.length;for(e.style.display="none",r(1308).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u[h][o[i]];return u()};t.exports=Object.create||function(t,e){var r;return null!==t?(a[h]=i(t),r=new a,a[h]=null,r[s]=t):r=u(),void 0===e?r:n(r,e)}},7967:(t,e,r)=>{var i=r(4228),n=r(2956),o=r(3048),s=Object.defineProperty;e.f=r(1763)?Object.defineProperty:function(t,e,r){if(i(t),e=o(e,!0),i(r),n)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},1626:(t,e,r)=>{var i=r(7967),n=r(4228),o=r(1311);t.exports=r(1763)?Object.defineProperties:function(t,e){n(t);for(var r,s=o(e),a=s.length,h=0;a>h;)i.f(t,r=s[h++],e[r]);return t}},8641:(t,e,r)=>{var i=r(8449),n=r(1996),o=r(7221),s=r(3048),a=r(7917),h=r(2956),u=Object.getOwnPropertyDescriptor;e.f=r(1763)?u:function(t,e){if(t=o(t),e=s(e,!0),h)try{return u(t,e)}catch(t){}if(a(t,e))return n(!i.f.call(t,e),t[e])}},4765:(t,e,r)=>{var i=r(7221),n=r(9415).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return n(t)}catch(t){return s.slice()}}(t):n(i(t))}},9415:(t,e,r)=>{var i=r(4561),n=r(6140).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,n)}},1060:(t,e)=>{e.f=Object.getOwnPropertySymbols},627:(t,e,r)=>{var i=r(7917),n=r(8270),o=r(766)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},4561:(t,e,r)=>{var i=r(7917),n=r(7221),o=r(1464)(!1),s=r(766)("IE_PROTO");t.exports=function(t,e){var r,a=n(t),h=0,u=[];for(r in a)r!=s&&i(a,r)&&u.push(r);for(;e.length>h;)i(a,r=e[h++])&&(~o(u,r)||u.push(r));return u}},1311:(t,e,r)=>{var i=r(4561),n=r(6140);t.exports=Object.keys||function(t){return i(t,n)}},8449:(t,e)=>{e.f={}.propertyIsEnumerable},923:(t,e,r)=>{var i=r(2127),n=r(6094),o=r(9448);t.exports=function(t,e){var r=(n.Object||{})[t]||Object[t],s={};s[t]=e(r),i(i.S+i.F*o((function(){r(1)})),"Object",s)}},3854:(t,e,r)=>{var i=r(1763),n=r(1311),o=r(7221),s=r(8449).f;t.exports=function(t){return function(e){for(var r,a=o(e),h=n(a),u=h.length,c=0,l=[];u>c;)r=h[c++],i&&!s.call(a,r)||l.push(t?[r,a[r]]:a[r]);return l}}},6222:(t,e,r)=>{var i=r(9415),n=r(1060),o=r(4228),s=r(7526).Reflect;t.exports=s&&s.ownKeys||function(t){var e=i.f(o(t)),r=n.f;return r?e.concat(r(t)):e}},3589:(t,e,r)=>{var i=r(7526).parseFloat,n=r(629).trim;t.exports=1/i(r(832)+"-0")!=-1/0?function(t){var e=n(String(t),3),r=i(e);return 0===r&&"-"==e.charAt(0)?-0:r}:i},2738:(t,e,r)=>{var i=r(7526).parseInt,n=r(629).trim,o=r(832),s=/^[-+]?0[xX]/;t.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(t,e){var r=n(String(t),3);return i(r,e>>>0||(s.test(r)?16:10))}:i},128:t=>{t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},5957:(t,e,r)=>{var i=r(4228),n=r(3305),o=r(4258);t.exports=function(t,e){if(i(t),n(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},1996:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6065:(t,e,r)=>{var i=r(8859);t.exports=function(t,e,r){for(var n in e)i(t,n,e[n],r);return t}},8859:(t,e,r)=>{var i=r(7526),n=r(3341),o=r(7917),s=r(4415)("src"),a=r(9461),h="toString",u=(""+a).split(h);r(6094).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,r,a){var h="function"==typeof r;h&&(o(r,"name")||n(r,"name",e)),t[e]!==r&&(h&&(o(r,s)||n(r,s,t[e]?""+t[e]:u.join(String(e)))),t===i?t[e]=r:a?t[e]?t[e]=r:n(t,e,r):(delete t[e],n(t,e,r)))})(Function.prototype,h,(function(){return"function"==typeof this&&this[s]||a.call(this)}))},2535:(t,e,r)=>{"use strict";var i=r(4848),n=RegExp.prototype.exec;t.exports=function(t,e){var r=t.exec;if("function"==typeof r){var o=r.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},9600:(t,e,r)=>{"use strict";var i,n,o=r(1158),s=RegExp.prototype.exec,a=String.prototype.replace,h=s,u="lastIndex",c=(i=/a/,n=/b*/g,s.call(i,"a"),s.call(n,"a"),0!==i[u]||0!==n[u]),l=void 0!==/()??/.exec("")[1];(c||l)&&(h=function(t){var e,r,i,n,h=this;return l&&(r=new RegExp("^"+h.source+"$(?!\\s)",o.call(h))),c&&(e=h[u]),i=s.call(h,t),c&&i&&(h[u]=h.global?i.index+i[0].length:e),l&&i&&i.length>1&&a.call(i[0],r,(function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(i[n]=void 0)})),i}),t.exports=h},7359:t=>{t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},5170:(t,e,r)=>{var i=r(3305),n=r(4228),o=function(t,e){if(n(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=r(5052)(Function.call,r(8641).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return o(t,r),e?t.__proto__=r:i(t,r),t}}({},!1):void 0),check:o}},5762:(t,e,r)=>{"use strict";var i=r(7526),n=r(7967),o=r(1763),s=r(7574)("species");t.exports=function(t){var e=i[t];o&&e&&!e[s]&&n.f(e,s,{configurable:!0,get:function(){return this}})}},3844:(t,e,r)=>{var i=r(7967).f,n=r(7917),o=r(7574)("toStringTag");t.exports=function(t,e,r){t&&!n(t=r?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},766:(t,e,r)=>{var i=r(4556)("keys"),n=r(4415);t.exports=function(t){return i[t]||(i[t]=n(t))}},4556:(t,e,r)=>{var i=r(6094),n=r(7526),o="__core-js_shared__",s=n[o]||(n[o]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:r(2750)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},9190:(t,e,r)=>{var i=r(4228),n=r(3387),o=r(7574)("species");t.exports=function(t,e){var r,s=i(t).constructor;return void 0===s||null==(r=i(s)[o])?e:n(r)}},6884:(t,e,r)=>{"use strict";var i=r(9448);t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},1212:(t,e,r)=>{var i=r(7087),n=r(3344);t.exports=function(t){return function(e,r){var o,s,a=String(n(e)),h=i(r),u=a.length;return h<0||h>=u?t?"":void 0:(o=a.charCodeAt(h))<55296||o>56319||h+1===u||(s=a.charCodeAt(h+1))<56320||s>57343?t?a.charAt(h):o:t?a.slice(h,h+2):s-56320+(o-55296<<10)+65536}}},8942:(t,e,r)=>{var i=r(5411),n=r(3344);t.exports=function(t,e,r){if(i(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(n(t))}},2468:(t,e,r)=>{var i=r(2127),n=r(9448),o=r(3344),s=/"/g,a=function(t,e,r,i){var n=String(o(t)),a="<"+e;return""!==r&&(a+=" "+r+'="'+String(i).replace(s,"&quot;")+'"'),a+">"+n+"</"+e+">"};t.exports=function(t,e){var r={};r[t]=e(a),i(i.P+i.F*n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",r)}},4472:(t,e,r)=>{var i=r(1485),n=r(7926),o=r(3344);t.exports=function(t,e,r,s){var a=String(o(t)),h=a.length,u=void 0===r?" ":String(r),c=i(e);if(c<=h||""==u)return a;var l=c-h,f=n.call(u,Math.ceil(l/u.length));return f.length>l&&(f=f.slice(0,l)),s?f+a:a+f}},7926:(t,e,r)=>{"use strict";var i=r(7087),n=r(3344);t.exports=function(t){var e=String(n(this)),r="",o=i(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(r+=e);return r}},629:(t,e,r)=>{var i=r(2127),n=r(3344),o=r(9448),s=r(832),a="["+s+"]",h=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),c=function(t,e,r){var n={},a=o((function(){return!!s[t]()||"​"!="​"[t]()})),h=n[t]=a?e(l):s[t];r&&(n[r]=h),i(i.P+i.F*a,"String",n)},l=c.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(h,"")),2&e&&(t=t.replace(u,"")),t};t.exports=c},832:t=>{t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},2780:(t,e,r)=>{var i,n,o,s=r(5052),a=r(4877),h=r(1308),u=r(6034),c=r(7526),l=c.process,f=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,v=c.Dispatch,y=0,g={},m="onreadystatechange",x=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){x.call(t.data)};f&&p||(f=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return g[++y]=function(){a("function"==typeof t?t:Function(t),e)},i(y),y},p=function(t){delete g[t]},"process"==r(5089)(l)?i=function(t){l.nextTick(s(x,t,1))}:v&&v.now?i=function(t){v.now(s(x,t,1))}:d?(o=(n=new d).port2,n.port1.onmessage=b,i=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",b,!1)):i=m in u("script")?function(t){h.appendChild(u("script"))[m]=function(){h.removeChild(this),x.call(t)}}:function(t){setTimeout(s(x,t,1),0)}),t.exports={set:f,clear:p}},157:(t,e,r)=>{var i=r(7087),n=Math.max,o=Math.min;t.exports=function(t,e){return(t=i(t))<0?n(t+e,0):o(t,e)}},3133:(t,e,r)=>{var i=r(7087),n=r(1485);t.exports=function(t){if(void 0===t)return 0;var e=i(t),r=n(e);if(e!==r)throw RangeError("Wrong length!");return r}},7087:t=>{var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},7221:(t,e,r)=>{var i=r(1249),n=r(3344);t.exports=function(t){return i(n(t))}},1485:(t,e,r)=>{var i=r(7087),n=Math.min;t.exports=function(t){return t>0?n(i(t),9007199254740991):0}},8270:(t,e,r)=>{var i=r(3344);t.exports=function(t){return Object(i(t))}},3048:(t,e,r)=>{var i=r(3305);t.exports=function(t,e){if(!i(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!i(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},7209:(t,e,r)=>{"use strict";if(r(1763)){var i=r(2750),n=r(7526),o=r(9448),s=r(2127),a=r(237),h=r(8032),u=r(5052),c=r(6440),l=r(1996),f=r(3341),p=r(6065),d=r(7087),v=r(1485),y=r(3133),g=r(157),m=r(3048),x=r(7917),b=r(4848),w=r(3305),E=r(8270),T=r(1508),S=r(4719),_=r(627),O=r(9415).f,P=r(762),M=r(4415),A=r(7574),L=r(6179),C=r(1464),R=r(9190),k=r(5165),F=r(906),I=r(8931),D=r(5762),j=r(5564),B=r(4438),N=r(7967),G=r(8641),U=N.f,Y=G.f,z=n.RangeError,X=n.TypeError,V=n.Uint8Array,W="ArrayBuffer",H="Shared"+W,q="BYTES_PER_ELEMENT",K="prototype",Z=Array[K],J=h.ArrayBuffer,Q=h.DataView,$=L(0),tt=L(2),et=L(3),rt=L(4),it=L(5),nt=L(6),ot=C(!0),st=C(!1),at=k.values,ht=k.keys,ut=k.entries,ct=Z.lastIndexOf,lt=Z.reduce,ft=Z.reduceRight,pt=Z.join,dt=Z.sort,vt=Z.slice,yt=Z.toString,gt=Z.toLocaleString,mt=A("iterator"),xt=A("toStringTag"),bt=M("typed_constructor"),wt=M("def_constructor"),Et=a.CONSTR,Tt=a.TYPED,St=a.VIEW,_t="Wrong length!",Ot=L(1,(function(t,e){return Ct(R(t,t[wt]),e)})),Pt=o((function(){return 1===new V(new Uint16Array([1]).buffer)[0]})),Mt=!!V&&!!V[K].set&&o((function(){new V(1).set({})})),At=function(t,e){var r=d(t);if(r<0||r%e)throw z("Wrong offset!");return r},Lt=function(t){if(w(t)&&Tt in t)return t;throw X(t+" is not a typed array!")},Ct=function(t,e){if(!w(t)||!(bt in t))throw X("It is not a typed array constructor!");return new t(e)},Rt=function(t,e){return kt(R(t,t[wt]),e)},kt=function(t,e){for(var r=0,i=e.length,n=Ct(t,i);i>r;)n[r]=e[r++];return n},Ft=function(t,e,r){U(t,e,{get:function(){return this._d[r]}})},It=function(t){var e,r,i,n,o,s,a=E(t),h=arguments.length,c=h>1?arguments[1]:void 0,l=void 0!==c,f=P(a);if(null!=f&&!T(f)){for(s=f.call(a),i=[],e=0;!(o=s.next()).done;e++)i.push(o.value);a=i}for(l&&h>2&&(c=u(c,arguments[2],2)),e=0,r=v(a.length),n=Ct(this,r);r>e;e++)n[e]=l?c(a[e],e):a[e];return n},Dt=function(){for(var t=0,e=arguments.length,r=Ct(this,e);e>t;)r[t]=arguments[t++];return r},jt=!!V&&o((function(){gt.call(new V(1))})),Bt=function(){return gt.apply(jt?vt.call(Lt(this)):Lt(this),arguments)},Nt={copyWithin:function(t,e){return B.call(Lt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return rt(Lt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return j.apply(Lt(this),arguments)},filter:function(t){return Rt(this,tt(Lt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return it(Lt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return nt(Lt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){$(Lt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return st(Lt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Lt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return pt.apply(Lt(this),arguments)},lastIndexOf:function(t){return ct.apply(Lt(this),arguments)},map:function(t){return Ot(Lt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Lt(this),arguments)},reduceRight:function(t){return ft.apply(Lt(this),arguments)},reverse:function(){for(var t,e=this,r=Lt(e).length,i=Math.floor(r/2),n=0;n<i;)t=e[n],e[n++]=e[--r],e[r]=t;return e},some:function(t){return et(Lt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return dt.call(Lt(this),t)},subarray:function(t,e){var r=Lt(this),i=r.length,n=g(t,i);return new(R(r,r[wt]))(r.buffer,r.byteOffset+n*r.BYTES_PER_ELEMENT,v((void 0===e?i:g(e,i))-n))}},Gt=function(t,e){return Rt(this,vt.call(Lt(this),t,e))},Ut=function(t){Lt(this);var e=At(arguments[1],1),r=this.length,i=E(t),n=v(i.length),o=0;if(n+e>r)throw z(_t);for(;o<n;)this[e+o]=i[o++]},Yt={entries:function(){return ut.call(Lt(this))},keys:function(){return ht.call(Lt(this))},values:function(){return at.call(Lt(this))}},zt=function(t,e){return w(t)&&t[Tt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Xt=function(t,e){return zt(t,e=m(e,!0))?l(2,t[e]):Y(t,e)},Vt=function(t,e,r){return!(zt(t,e=m(e,!0))&&w(r)&&x(r,"value"))||x(r,"get")||x(r,"set")||r.configurable||x(r,"writable")&&!r.writable||x(r,"enumerable")&&!r.enumerable?U(t,e,r):(t[e]=r.value,t)};Et||(G.f=Xt,N.f=Vt),s(s.S+s.F*!Et,"Object",{getOwnPropertyDescriptor:Xt,defineProperty:Vt}),o((function(){yt.call({})}))&&(yt=gt=function(){return pt.call(this)});var Wt=p({},Nt);p(Wt,Yt),f(Wt,mt,Yt.values),p(Wt,{slice:Gt,set:Ut,constructor:function(){},toString:yt,toLocaleString:Bt}),Ft(Wt,"buffer","b"),Ft(Wt,"byteOffset","o"),Ft(Wt,"byteLength","l"),Ft(Wt,"length","e"),U(Wt,xt,{get:function(){return this[Tt]}}),t.exports=function(t,e,r,h){var u=t+((h=!!h)?"Clamped":"")+"Array",l="get"+t,p="set"+t,d=n[u],g=d||{},m=d&&_(d),x=!d||!a.ABV,E={},T=d&&d[K],P=function(t,r){U(t,r,{get:function(){return function(t,r){var i=t._d;return i.v[l](r*e+i.o,Pt)}(this,r)},set:function(t){return function(t,r,i){var n=t._d;h&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),n.v[p](r*e+n.o,i,Pt)}(this,r,t)},enumerable:!0})};x?(d=r((function(t,r,i,n){c(t,d,u,"_d");var o,s,a,h,l=0,p=0;if(w(r)){if(!(r instanceof J||(h=b(r))==W||h==H))return Tt in r?kt(d,r):It.call(d,r);o=r,p=At(i,e);var g=r.byteLength;if(void 0===n){if(g%e)throw z(_t);if((s=g-p)<0)throw z(_t)}else if((s=v(n)*e)+p>g)throw z(_t);a=s/e}else a=y(r),o=new J(s=a*e);for(f(t,"_d",{b:o,o:p,l:s,e:a,v:new Q(o)});l<a;)P(t,l++)})),T=d[K]=S(Wt),f(T,"constructor",d)):o((function(){d(1)}))&&o((function(){new d(-1)}))&&I((function(t){new d,new d(null),new d(1.5),new d(t)}),!0)||(d=r((function(t,r,i,n){var o;return c(t,d,u),w(r)?r instanceof J||(o=b(r))==W||o==H?void 0!==n?new g(r,At(i,e),n):void 0!==i?new g(r,At(i,e)):new g(r):Tt in r?kt(d,r):It.call(d,r):new g(y(r))})),$(m!==Function.prototype?O(g).concat(O(m)):O(g),(function(t){t in d||f(d,t,g[t])})),d[K]=T,i||(T.constructor=d));var M=T[mt],A=!!M&&("values"==M.name||null==M.name),L=Yt.values;f(d,bt,!0),f(T,Tt,u),f(T,St,!0),f(T,wt,d),(h?new d(1)[xt]==u:xt in T)||U(T,xt,{get:function(){return u}}),E[u]=d,s(s.G+s.W+s.F*(d!=g),E),s(s.S,u,{BYTES_PER_ELEMENT:e}),s(s.S+s.F*o((function(){g.of.call(d,1)})),u,{from:It,of:Dt}),q in T||f(T,q,e),s(s.P,u,Nt),D(u),s(s.P+s.F*Mt,u,{set:Ut}),s(s.P+s.F*!A,u,Yt),i||T.toString==yt||(T.toString=yt),s(s.P+s.F*o((function(){new d(1).slice()})),u,{slice:Gt}),s(s.P+s.F*(o((function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()}))||!o((function(){T.toLocaleString.call([1,2])}))),u,{toLocaleString:Bt}),F[u]=A?M:L,i||A||f(T,mt,L)}}else t.exports=function(){}},8032:(t,e,r)=>{"use strict";var i=r(7526),n=r(1763),o=r(2750),s=r(237),a=r(3341),h=r(6065),u=r(9448),c=r(6440),l=r(7087),f=r(1485),p=r(3133),d=r(9415).f,v=r(7967).f,y=r(5564),g=r(3844),m="ArrayBuffer",x="DataView",b="prototype",w="Wrong index!",E=i[m],T=i[x],S=i.Math,_=i.RangeError,O=i.Infinity,P=E,M=S.abs,A=S.pow,L=S.floor,C=S.log,R=S.LN2,k="buffer",F="byteLength",I="byteOffset",D=n?"_b":k,j=n?"_l":F,B=n?"_o":I;function N(t,e,r){var i,n,o,s=new Array(r),a=8*r-e-1,h=(1<<a)-1,u=h>>1,c=23===e?A(2,-24)-A(2,-77):0,l=0,f=t<0||0===t&&1/t<0?1:0;for((t=M(t))!=t||t===O?(n=t!=t?1:0,i=h):(i=L(C(t)/R),t*(o=A(2,-i))<1&&(i--,o*=2),(t+=i+u>=1?c/o:c*A(2,1-u))*o>=2&&(i++,o/=2),i+u>=h?(n=0,i=h):i+u>=1?(n=(t*o-1)*A(2,e),i+=u):(n=t*A(2,u-1)*A(2,e),i=0));e>=8;s[l++]=255&n,n/=256,e-=8);for(i=i<<e|n,a+=e;a>0;s[l++]=255&i,i/=256,a-=8);return s[--l]|=128*f,s}function G(t,e,r){var i,n=8*r-e-1,o=(1<<n)-1,s=o>>1,a=n-7,h=r-1,u=t[h--],c=127&u;for(u>>=7;a>0;c=256*c+t[h],h--,a-=8);for(i=c&(1<<-a)-1,c>>=-a,a+=e;a>0;i=256*i+t[h],h--,a-=8);if(0===c)c=1-s;else{if(c===o)return i?NaN:u?-O:O;i+=A(2,e),c-=s}return(u?-1:1)*i*A(2,c-e)}function U(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function Y(t){return[255&t]}function z(t){return[255&t,t>>8&255]}function X(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function V(t){return N(t,52,8)}function W(t){return N(t,23,4)}function H(t,e,r){v(t[b],e,{get:function(){return this[r]}})}function q(t,e,r,i){var n=p(+r);if(n+e>t[j])throw _(w);var o=t[D]._b,s=n+t[B],a=o.slice(s,s+e);return i?a:a.reverse()}function K(t,e,r,i,n,o){var s=p(+r);if(s+e>t[j])throw _(w);for(var a=t[D]._b,h=s+t[B],u=i(+n),c=0;c<e;c++)a[h+c]=u[o?c:e-c-1]}if(s.ABV){if(!u((function(){E(1)}))||!u((function(){new E(-1)}))||u((function(){return new E,new E(1.5),new E(NaN),E.name!=m}))){for(var Z,J=(E=function(t){return c(this,E),new P(p(t))})[b]=P[b],Q=d(P),$=0;Q.length>$;)(Z=Q[$++])in E||a(E,Z,P[Z]);o||(J.constructor=E)}var tt=new T(new E(2)),et=T[b].setInt8;tt.setInt8(0,2147483648),tt.setInt8(1,2147483649),!tt.getInt8(0)&&tt.getInt8(1)||h(T[b],{setInt8:function(t,e){et.call(this,t,e<<24>>24)},setUint8:function(t,e){et.call(this,t,e<<24>>24)}},!0)}else E=function(t){c(this,E,m);var e=p(t);this._b=y.call(new Array(e),0),this[j]=e},T=function(t,e,r){c(this,T,x),c(t,E,x);var i=t[j],n=l(e);if(n<0||n>i)throw _("Wrong offset!");if(n+(r=void 0===r?i-n:f(r))>i)throw _("Wrong length!");this[D]=t,this[B]=n,this[j]=r},n&&(H(E,F,"_l"),H(T,k,"_b"),H(T,F,"_l"),H(T,I,"_o")),h(T[b],{getInt8:function(t){return q(this,1,t)[0]<<24>>24},getUint8:function(t){return q(this,1,t)[0]},getInt16:function(t){var e=q(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=q(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return U(q(this,4,t,arguments[1]))},getUint32:function(t){return U(q(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return G(q(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return G(q(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){K(this,1,t,Y,e)},setUint8:function(t,e){K(this,1,t,Y,e)},setInt16:function(t,e){K(this,2,t,z,e,arguments[2])},setUint16:function(t,e){K(this,2,t,z,e,arguments[2])},setInt32:function(t,e){K(this,4,t,X,e,arguments[2])},setUint32:function(t,e){K(this,4,t,X,e,arguments[2])},setFloat32:function(t,e){K(this,4,t,W,e,arguments[2])},setFloat64:function(t,e){K(this,8,t,V,e,arguments[2])}});g(E,m),g(T,x),a(T[b],s.VIEW,!0),e[m]=E,e[x]=T},237:(t,e,r)=>{for(var i,n=r(7526),o=r(3341),s=r(4415),a=s("typed_array"),h=s("view"),u=!(!n.ArrayBuffer||!n.DataView),c=u,l=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(i=n[f[l++]])?(o(i.prototype,a,!0),o(i.prototype,h,!0)):c=!1;t.exports={ABV:u,CONSTR:c,TYPED:a,VIEW:h}},4415:t=>{var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},4514:(t,e,r)=>{var i=r(7526).navigator;t.exports=i&&i.userAgent||""},2888:(t,e,r)=>{var i=r(3305);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},5392:(t,e,r)=>{var i=r(7526),n=r(6094),o=r(2750),s=r(7960),a=r(7967).f;t.exports=function(t){var e=n.Symbol||(n.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},7960:(t,e,r)=>{e.f=r(7574)},7574:(t,e,r)=>{var i=r(4556)("wks"),n=r(4415),o=r(7526).Symbol,s="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:n)("Symbol."+t))}).store=i},762:(t,e,r)=>{var i=r(4848),n=r(7574)("iterator"),o=r(906);t.exports=r(6094).getIteratorMethod=function(t){if(null!=t)return t[n]||t["@@iterator"]||o[i(t)]}},9620:(t,e,r)=>{var i=r(2127);i(i.P,"Array",{copyWithin:r(4438)}),r(8184)("copyWithin")},8888:(t,e,r)=>{"use strict";var i=r(2127),n=r(6179)(4);i(i.P+i.F*!r(6884)([].every,!0),"Array",{every:function(t){return n(this,t,arguments[1])}})},7762:(t,e,r)=>{var i=r(2127);i(i.P,"Array",{fill:r(5564)}),r(8184)("fill")},9813:(t,e,r)=>{"use strict";var i=r(2127),n=r(6179)(2);i(i.P+i.F*!r(6884)([].filter,!0),"Array",{filter:function(t){return n(this,t,arguments[1])}})},5369:(t,e,r)=>{"use strict";var i=r(2127),n=r(6179)(6),o="findIndex",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),i(i.P+i.F*s,"Array",{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r(8184)(o)},5144:(t,e,r)=>{"use strict";var i=r(2127),n=r(6179)(5),o="find",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),i(i.P+i.F*s,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r(8184)(o)},3504:(t,e,r)=>{"use strict";var i=r(2127),n=r(6179)(0),o=r(6884)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(t){return n(this,t,arguments[1])}})},3863:(t,e,r)=>{"use strict";var i=r(5052),n=r(2127),o=r(8270),s=r(7368),a=r(1508),h=r(1485),u=r(7227),c=r(762);n(n.S+n.F*!r(8931)((function(t){Array.from(t)})),"Array",{from:function(t){var e,r,n,l,f=o(t),p="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,y=void 0!==v,g=0,m=c(f);if(y&&(v=i(v,d>2?arguments[2]:void 0,2)),null==m||p==Array&&a(m))for(r=new p(e=h(f.length));e>g;g++)u(r,g,y?v(f[g],g):f[g]);else for(l=m.call(f),r=new p;!(n=l.next()).done;g++)u(r,g,y?s(l,v,[n.value,g],!0):n.value);return r.length=g,r}})},4609:(t,e,r)=>{"use strict";var i=r(2127),n=r(1464)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(s||!r(6884)(o)),"Array",{indexOf:function(t){return s?o.apply(this,arguments)||0:n(this,t,arguments[1])}})},7899:(t,e,r)=>{var i=r(2127);i(i.S,"Array",{isArray:r(7981)})},5165:(t,e,r)=>{"use strict";var i=r(8184),n=r(4970),o=r(906),s=r(7221);t.exports=r(8175)(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,n(1)):n(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},6511:(t,e,r)=>{"use strict";var i=r(2127),n=r(7221),o=[].join;i(i.P+i.F*(r(1249)!=Object||!r(6884)(o)),"Array",{join:function(t){return o.call(n(this),void 0===t?",":t)}})},3706:(t,e,r)=>{"use strict";var i=r(2127),n=r(7221),o=r(7087),s=r(1485),a=[].lastIndexOf,h=!!a&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(h||!r(6884)(a)),"Array",{lastIndexOf:function(t){if(h)return a.apply(this,arguments)||0;var e=n(this),r=s(e.length),i=r-1;for(arguments.length>1&&(i=Math.min(i,o(arguments[1]))),i<0&&(i=r+i);i>=0;i--)if(i in e&&e[i]===t)return i||0;return-1}})},4913:(t,e,r)=>{"use strict";var i=r(2127),n=r(6179)(1);i(i.P+i.F*!r(6884)([].map,!0),"Array",{map:function(t){return n(this,t,arguments[1])}})},4570:(t,e,r)=>{"use strict";var i=r(2127),n=r(7227);i(i.S+i.F*r(9448)((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,r=new("function"==typeof this?this:Array)(e);e>t;)n(r,t,arguments[t++]);return r.length=e,r}})},7874:(t,e,r)=>{"use strict";var i=r(2127),n=r(6543);i(i.P+i.F*!r(6884)([].reduceRight,!0),"Array",{reduceRight:function(t){return n(this,t,arguments.length,arguments[1],!0)}})},1449:(t,e,r)=>{"use strict";var i=r(2127),n=r(6543);i(i.P+i.F*!r(6884)([].reduce,!0),"Array",{reduce:function(t){return n(this,t,arguments.length,arguments[1],!1)}})},5853:(t,e,r)=>{"use strict";var i=r(2127),n=r(1308),o=r(5089),s=r(157),a=r(1485),h=[].slice;i(i.P+i.F*r(9448)((function(){n&&h.call(n)})),"Array",{slice:function(t,e){var r=a(this.length),i=o(this);if(e=void 0===e?r:e,"Array"==i)return h.call(this,t,e);for(var n=s(t,r),u=s(e,r),c=a(u-n),l=new Array(c),f=0;f<c;f++)l[f]="String"==i?this.charAt(n+f):this[n+f];return l}})},8892:(t,e,r)=>{"use strict";var i=r(2127),n=r(6179)(3);i(i.P+i.F*!r(6884)([].some,!0),"Array",{some:function(t){return n(this,t,arguments[1])}})},7075:(t,e,r)=>{"use strict";var i=r(2127),n=r(3387),o=r(8270),s=r(9448),a=[].sort,h=[1,2,3];i(i.P+i.F*(s((function(){h.sort(void 0)}))||!s((function(){h.sort(null)}))||!r(6884)(a)),"Array",{sort:function(t){return void 0===t?a.call(o(this)):a.call(o(this),n(t))}})},6209:(t,e,r)=>{r(5762)("Array")},3292:(t,e,r)=>{var i=r(2127);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},9429:(t,e,r)=>{var i=r(2127),n=r(5385);i(i.P+i.F*(Date.prototype.toISOString!==n),"Date",{toISOString:n})},2346:(t,e,r)=>{"use strict";var i=r(2127),n=r(8270),o=r(3048);i(i.P+i.F*r(9448)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=n(this),r=o(e);return"number"!=typeof r||isFinite(r)?e.toISOString():null}})},8951:(t,e,r)=>{var i=r(7574)("toPrimitive"),n=Date.prototype;i in n||r(3341)(n,i,r(107))},7849:(t,e,r)=>{var i=Date.prototype,n="Invalid Date",o="toString",s=i[o],a=i.getTime;new Date(NaN)+""!=n&&r(8859)(i,o,(function(){var t=a.call(this);return t==t?s.call(this):n}))},5049:(t,e,r)=>{var i=r(2127);i(i.P,"Function",{bind:r(5538)})},5502:(t,e,r)=>{"use strict";var i=r(3305),n=r(627),o=r(7574)("hasInstance"),s=Function.prototype;o in s||r(7967).f(s,o,{value:function(t){if("function"!=typeof this||!i(t))return!1;if(!i(this.prototype))return t instanceof this;for(;t=n(t);)if(this.prototype===t)return!0;return!1}})},489:(t,e,r)=>{var i=r(7967).f,n=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in n||r(1763)&&i(n,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},3386:(t,e,r)=>{"use strict";var i=r(6197),n=r(2888),o="Map";t.exports=r(8933)(o,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=i.getEntry(n(this,o),t);return e&&e.v},set:function(t,e){return i.def(n(this,o),0===t?0:t,e)}},i,!0)},6648:(t,e,r)=>{var i=r(2127),n=r(1473),o=Math.sqrt,s=Math.acosh;i(i.S+i.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:n(t-1+o(t-1)*o(t+1))}})},5771:(t,e,r)=>{var i=r(2127),n=Math.asinh;i(i.S+i.F*!(n&&1/n(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},2392:(t,e,r)=>{var i=r(2127),n=Math.atanh;i(i.S+i.F*!(n&&1/n(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},2335:(t,e,r)=>{var i=r(2127),n=r(3733);i(i.S,"Math",{cbrt:function(t){return n(t=+t)*Math.pow(Math.abs(t),1/3)}})},4896:(t,e,r)=>{var i=r(2127);i(i.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},4521:(t,e,r)=>{var i=r(2127),n=Math.exp;i(i.S,"Math",{cosh:function(t){return(n(t=+t)+n(-t))/2}})},9147:(t,e,r)=>{var i=r(2127),n=r(5551);i(i.S+i.F*(n!=Math.expm1),"Math",{expm1:n})},1318:(t,e,r)=>{var i=r(2127);i(i.S,"Math",{fround:r(2122)})},4352:(t,e,r)=>{var i=r(2127),n=Math.abs;i(i.S,"Math",{hypot:function(t,e){for(var r,i,o=0,s=0,a=arguments.length,h=0;s<a;)h<(r=n(arguments[s++]))?(o=o*(i=h/r)*i+1,h=r):o+=r>0?(i=r/h)*i:r;return h===1/0?1/0:h*Math.sqrt(o)}})},5327:(t,e,r)=>{var i=r(2127),n=Math.imul;i(i.S+i.F*r(9448)((function(){return-5!=n(4294967295,5)||2!=n.length})),"Math",{imul:function(t,e){var r=65535,i=+t,n=+e,o=r&i,s=r&n;return 0|o*s+((r&i>>>16)*s+o*(r&n>>>16)<<16>>>0)}})},7509:(t,e,r)=>{var i=r(2127);i(i.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},5909:(t,e,r)=>{var i=r(2127);i(i.S,"Math",{log1p:r(1473)})},9584:(t,e,r)=>{var i=r(2127);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},345:(t,e,r)=>{var i=r(2127);i(i.S,"Math",{sign:r(3733)})},9134:(t,e,r)=>{var i=r(2127),n=r(5551),o=Math.exp;i(i.S+i.F*r(9448)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(n(t)-n(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},7901:(t,e,r)=>{var i=r(2127),n=r(5551),o=Math.exp;i(i.S,"Math",{tanh:function(t){var e=n(t=+t),r=n(-t);return e==1/0?1:r==1/0?-1:(e-r)/(o(t)+o(-t))}})},6592:(t,e,r)=>{var i=r(2127);i(i.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},4509:(t,e,r)=>{"use strict";var i=r(7526),n=r(7917),o=r(5089),s=r(8880),a=r(3048),h=r(9448),u=r(9415).f,c=r(8641).f,l=r(7967).f,f=r(629).trim,p="Number",d=i[p],v=d,y=d.prototype,g=o(r(4719)(y))==p,m="trim"in String.prototype,x=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var r,i,n,o=(e=m?e.trim():f(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+e}for(var s,h=e.slice(2),u=0,c=h.length;u<c;u++)if((s=h.charCodeAt(u))<48||s>n)return NaN;return parseInt(h,i)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof d&&(g?h((function(){y.valueOf.call(r)})):o(r)!=p)?s(new v(x(e)),r,d):x(e)};for(var b,w=r(1763)?u(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;w.length>E;E++)n(v,b=w[E])&&!n(d,b)&&l(d,b,c(v,b));d.prototype=y,y.constructor=d,r(8859)(i,p,d)}},4419:(t,e,r)=>{var i=r(2127);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},1933:(t,e,r)=>{var i=r(2127),n=r(7526).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&n(t)}})},3157:(t,e,r)=>{var i=r(2127);i(i.S,"Number",{isInteger:r(3842)})},9497:(t,e,r)=>{var i=r(2127);i(i.S,"Number",{isNaN:function(t){return t!=t}})},4104:(t,e,r)=>{var i=r(2127),n=r(3842),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return n(t)&&o(t)<=9007199254740991}})},210:(t,e,r)=>{var i=r(2127);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},6576:(t,e,r)=>{var i=r(2127);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},4437:(t,e,r)=>{var i=r(2127),n=r(3589);i(i.S+i.F*(Number.parseFloat!=n),"Number",{parseFloat:n})},8050:(t,e,r)=>{var i=r(2127),n=r(2738);i(i.S+i.F*(Number.parseInt!=n),"Number",{parseInt:n})},7727:(t,e,r)=>{"use strict";var i=r(2127),n=r(7087),o=r(5122),s=r(7926),a=1..toFixed,h=Math.floor,u=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",l="0",f=function(t,e){for(var r=-1,i=e;++r<6;)i+=t*u[r],u[r]=i%1e7,i=h(i/1e7)},p=function(t){for(var e=6,r=0;--e>=0;)r+=u[e],u[e]=h(r/t),r=r%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==u[t]){var r=String(u[t]);e=""===e?r:e+s.call(l,7-r.length)+r}return e},v=function(t,e,r){return 0===e?r:e%2==1?v(t,e-1,r*t):v(t*t,e/2,r)};i(i.P+i.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(9448)((function(){a.call({})}))),"Number",{toFixed:function(t){var e,r,i,a,h=o(this,c),u=n(t),y="",g=l;if(u<0||u>20)throw RangeError(c);if(h!=h)return"NaN";if(h<=-1e21||h>=1e21)return String(h);if(h<0&&(y="-",h=-h),h>1e-21)if(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(h*v(2,69,1))-69,r=e<0?h*v(2,-e,1):h/v(2,e,1),r*=4503599627370496,(e=52-e)>0){for(f(0,r),i=u;i>=7;)f(1e7,0),i-=7;for(f(v(10,i,1),0),i=e-1;i>=23;)p(1<<23),i-=23;p(1<<i),f(1,1),p(2),g=d()}else f(0,r),f(1<<-e,0),g=d()+s.call(l,u);return u>0?y+((a=g.length)<=u?"0."+s.call(l,u-a)+g:g.slice(0,a-u)+"."+g.slice(a-u)):y+g}})},6701:(t,e,r)=>{"use strict";var i=r(2127),n=r(9448),o=r(5122),s=1..toPrecision;i(i.P+i.F*(n((function(){return"1"!==s.call(1,void 0)}))||!n((function(){s.call({})}))),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?s.call(e):s.call(e,t)}})},1430:(t,e,r)=>{var i=r(2127);i(i.S+i.F,"Object",{assign:r(8206)})},935:(t,e,r)=>{var i=r(2127);i(i.S,"Object",{create:r(4719)})},7067:(t,e,r)=>{var i=r(2127);i(i.S+i.F*!r(1763),"Object",{defineProperties:r(1626)})},6064:(t,e,r)=>{var i=r(2127);i(i.S+i.F*!r(1763),"Object",{defineProperty:r(7967).f})},8236:(t,e,r)=>{var i=r(3305),n=r(2988).onFreeze;r(923)("freeze",(function(t){return function(e){return t&&i(e)?t(n(e)):e}}))},2642:(t,e,r)=>{var i=r(7221),n=r(8641).f;r(923)("getOwnPropertyDescriptor",(function(){return function(t,e){return n(i(t),e)}}))},1895:(t,e,r)=>{r(923)("getOwnPropertyNames",(function(){return r(4765).f}))},3e3:(t,e,r)=>{var i=r(8270),n=r(627);r(923)("getPrototypeOf",(function(){return function(t){return n(i(t))}}))},9073:(t,e,r)=>{var i=r(3305);r(923)("isExtensible",(function(t){return function(e){return!!i(e)&&(!t||t(e))}}))},9318:(t,e,r)=>{var i=r(3305);r(923)("isFrozen",(function(t){return function(e){return!i(e)||!!t&&t(e)}}))},5032:(t,e,r)=>{var i=r(3305);r(923)("isSealed",(function(t){return function(e){return!i(e)||!!t&&t(e)}}))},8451:(t,e,r)=>{var i=r(2127);i(i.S,"Object",{is:r(7359)})},8647:(t,e,r)=>{var i=r(8270),n=r(1311);r(923)("keys",(function(){return function(t){return n(i(t))}}))},5572:(t,e,r)=>{var i=r(3305),n=r(2988).onFreeze;r(923)("preventExtensions",(function(t){return function(e){return t&&i(e)?t(n(e)):e}}))},3822:(t,e,r)=>{var i=r(3305),n=r(2988).onFreeze;r(923)("seal",(function(t){return function(e){return t&&i(e)?t(n(e)):e}}))},8132:(t,e,r)=>{var i=r(2127);i(i.S,"Object",{setPrototypeOf:r(5170).set})},7482:(t,e,r)=>{"use strict";var i=r(4848),n={};n[r(7574)("toStringTag")]="z",n+""!="[object z]"&&r(8859)(Object.prototype,"toString",(function(){return"[object "+i(this)+"]"}),!0)},6108:(t,e,r)=>{var i=r(2127),n=r(3589);i(i.G+i.F*(parseFloat!=n),{parseFloat:n})},571:(t,e,r)=>{var i=r(2127),n=r(2738);i(i.G+i.F*(parseInt!=n),{parseInt:n})},6517:(t,e,r)=>{"use strict";var i,n,o,s,a=r(2750),h=r(7526),u=r(5052),c=r(4848),l=r(2127),f=r(3305),p=r(3387),d=r(6440),v=r(8790),y=r(9190),g=r(2780).set,m=r(1384)(),x=r(4258),b=r(128),w=r(4514),E=r(5957),T="Promise",S=h.TypeError,_=h.process,O=_&&_.versions,P=O&&O.v8||"",M=h[T],A="process"==c(_),L=function(){},C=n=x.f,R=!!function(){try{var t=M.resolve(1),e=(t.constructor={})[r(7574)("species")]=function(t){t(L,L)};return(A||"function"==typeof PromiseRejectionEvent)&&t.then(L)instanceof e&&0!==P.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),k=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},F=function(t,e){if(!t._n){t._n=!0;var r=t._c;m((function(){for(var i=t._v,n=1==t._s,o=0,s=function(e){var r,o,s,a=n?e.ok:e.fail,h=e.resolve,u=e.reject,c=e.domain;try{a?(n||(2==t._h&&j(t),t._h=1),!0===a?r=i:(c&&c.enter(),r=a(i),c&&(c.exit(),s=!0)),r===e.promise?u(S("Promise-chain cycle")):(o=k(r))?o.call(r,h,u):h(r)):u(i)}catch(t){c&&!s&&c.exit(),u(t)}};r.length>o;)s(r[o++]);t._c=[],t._n=!1,e&&!t._h&&I(t)}))}},I=function(t){g.call(h,(function(){var e,r,i,n=t._v,o=D(t);if(o&&(e=b((function(){A?_.emit("unhandledRejection",n,t):(r=h.onunhandledrejection)?r({promise:t,reason:n}):(i=h.console)&&i.error&&i.error("Unhandled promise rejection",n)})),t._h=A||D(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},j=function(t){g.call(h,(function(){var e;A?_.emit("rejectionHandled",t):(e=h.onrejectionhandled)&&e({promise:t,reason:t._v})}))},B=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),F(e,!0))},N=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw S("Promise can't be resolved itself");(e=k(t))?m((function(){var i={_w:r,_d:!1};try{e.call(t,u(N,i,1),u(B,i,1))}catch(t){B.call(i,t)}})):(r._v=t,r._s=1,F(r,!1))}catch(t){B.call({_w:r,_d:!1},t)}}};R||(M=function(t){d(this,M,T,"_h"),p(t),i.call(this);try{t(u(N,this,1),u(B,this,1))}catch(t){B.call(this,t)}},(i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(6065)(M.prototype,{then:function(t,e){var r=C(y(this,M));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=A?_.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&F(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=u(N,t,1),this.reject=u(B,t,1)},x.f=C=function(t){return t===M||t===s?new o(t):n(t)}),l(l.G+l.W+l.F*!R,{Promise:M}),r(3844)(M,T),r(5762)(T),s=r(6094)[T],l(l.S+l.F*!R,T,{reject:function(t){var e=C(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(a||!R),T,{resolve:function(t){return E(a&&this===s?M:this,t)}}),l(l.S+l.F*!(R&&r(8931)((function(t){M.all(t).catch(L)}))),T,{all:function(t){var e=this,r=C(e),i=r.resolve,n=r.reject,o=b((function(){var r=[],o=0,s=1;v(t,!1,(function(t){var a=o++,h=!1;r.push(void 0),s++,e.resolve(t).then((function(t){h||(h=!0,r[a]=t,--s||i(r))}),n)})),--s||i(r)}));return o.e&&n(o.v),r.promise},race:function(t){var e=this,r=C(e),i=r.reject,n=b((function(){v(t,!1,(function(t){e.resolve(t).then(r.resolve,i)}))}));return n.e&&i(n.v),r.promise}})},7103:(t,e,r)=>{var i=r(2127),n=r(3387),o=r(4228),s=(r(7526).Reflect||{}).apply,a=Function.apply;i(i.S+i.F*!r(9448)((function(){s((function(){}))})),"Reflect",{apply:function(t,e,r){var i=n(t),h=o(r);return s?s(i,e,h):a.call(i,e,h)}})},2586:(t,e,r)=>{var i=r(2127),n=r(4719),o=r(3387),s=r(4228),a=r(3305),h=r(9448),u=r(5538),c=(r(7526).Reflect||{}).construct,l=h((function(){function t(){}return!(c((function(){}),[],t)instanceof t)})),f=!h((function(){c((function(){}))}));i(i.S+i.F*(l||f),"Reflect",{construct:function(t,e){o(t),s(e);var r=arguments.length<3?t:o(arguments[2]);if(f&&!l)return c(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(u.apply(t,i))}var h=r.prototype,p=n(a(h)?h:Object.prototype),d=Function.apply.call(t,p,e);return a(d)?d:p}})},2552:(t,e,r)=>{var i=r(7967),n=r(2127),o=r(4228),s=r(3048);n(n.S+n.F*r(9448)((function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,r){o(t),e=s(e,!0),o(r);try{return i.f(t,e,r),!0}catch(t){return!1}}})},4376:(t,e,r)=>{var i=r(2127),n=r(8641).f,o=r(4228);i(i.S,"Reflect",{deleteProperty:function(t,e){var r=n(o(t),e);return!(r&&!r.configurable)&&delete t[e]}})},5153:(t,e,r)=>{"use strict";var i=r(2127),n=r(4228),o=function(t){this._t=n(t),this._i=0;var e,r=this._k=[];for(e in t)r.push(e)};r(6032)(o,"Object",(function(){var t,e=this,r=e._k;do{if(e._i>=r.length)return{value:void 0,done:!0}}while(!((t=r[e._i++])in e._t));return{value:t,done:!1}})),i(i.S,"Reflect",{enumerate:function(t){return new o(t)}})},2650:(t,e,r)=>{var i=r(8641),n=r(2127),o=r(4228);n(n.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return i.f(o(t),e)}})},1104:(t,e,r)=>{var i=r(2127),n=r(627),o=r(4228);i(i.S,"Reflect",{getPrototypeOf:function(t){return n(o(t))}})},1879:(t,e,r)=>{var i=r(8641),n=r(627),o=r(7917),s=r(2127),a=r(3305),h=r(4228);s(s.S,"Reflect",{get:function t(e,r){var s,u,c=arguments.length<3?e:arguments[2];return h(e)===c?e[r]:(s=i.f(e,r))?o(s,"value")?s.value:void 0!==s.get?s.get.call(c):void 0:a(u=n(e))?t(u,r,c):void 0}})},1883:(t,e,r)=>{var i=r(2127);i(i.S,"Reflect",{has:function(t,e){return e in t}})},5433:(t,e,r)=>{var i=r(2127),n=r(4228),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(t){return n(t),!o||o(t)}})},5e3:(t,e,r)=>{var i=r(2127);i(i.S,"Reflect",{ownKeys:r(6222)})},5932:(t,e,r)=>{var i=r(2127),n=r(4228),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(t){n(t);try{return o&&o(t),!0}catch(t){return!1}}})},6316:(t,e,r)=>{var i=r(2127),n=r(5170);n&&i(i.S,"Reflect",{setPrototypeOf:function(t,e){n.check(t,e);try{return n.set(t,e),!0}catch(t){return!1}}})},5443:(t,e,r)=>{var i=r(7967),n=r(8641),o=r(627),s=r(7917),a=r(2127),h=r(1996),u=r(4228),c=r(3305);a(a.S,"Reflect",{set:function t(e,r,a){var l,f,p=arguments.length<4?e:arguments[3],d=n.f(u(e),r);if(!d){if(c(f=o(e)))return t(f,r,a,p);d=h(0)}if(s(d,"value")){if(!1===d.writable||!c(p))return!1;if(l=n.f(p,r)){if(l.get||l.set||!1===l.writable)return!1;l.value=a,i.f(p,r,l)}else i.f(p,r,h(0,a));return!0}return void 0!==d.set&&(d.set.call(p,a),!0)}})},8301:(t,e,r)=>{var i=r(7526),n=r(8880),o=r(7967).f,s=r(9415).f,a=r(5411),h=r(1158),u=i.RegExp,c=u,l=u.prototype,f=/a/g,p=/a/g,d=new u(f)!==f;if(r(1763)&&(!d||r(9448)((function(){return p[r(7574)("match")]=!1,u(f)!=f||u(p)==p||"/a/i"!=u(f,"i")})))){u=function(t,e){var r=this instanceof u,i=a(t),o=void 0===e;return!r&&i&&t.constructor===u&&o?t:n(d?new c(i&&!o?t.source:t,e):c((i=t instanceof u)?t.source:t,i&&o?h.call(t):e),r?this:l,u)};for(var v=function(t){t in u||o(u,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})},y=s(c),g=0;y.length>g;)v(y[g++]);l.constructor=u,u.prototype=l,r(8859)(i,"RegExp",u)}r(5762)("RegExp")},4116:(t,e,r)=>{"use strict";var i=r(9600);r(2127)({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},9638:(t,e,r)=>{r(1763)&&"g"!=/./g.flags&&r(7967).f(RegExp.prototype,"flags",{configurable:!0,get:r(1158)})},4040:(t,e,r)=>{"use strict";var i=r(4228),n=r(1485),o=r(8828),s=r(2535);r(9228)("match",1,(function(t,e,r,a){return[function(r){var i=t(this),n=null==r?void 0:r[e];return void 0!==n?n.call(r,i):new RegExp(r)[e](String(i))},function(t){var e=a(r,t,this);if(e.done)return e.value;var h=i(t),u=String(this);if(!h.global)return s(h,u);var c=h.unicode;h.lastIndex=0;for(var l,f=[],p=0;null!==(l=s(h,u));){var d=String(l[0]);f[p]=d,""===d&&(h.lastIndex=o(u,n(h.lastIndex),c)),p++}return 0===p?null:f}]}))},8305:(t,e,r)=>{"use strict";var i=r(4228),n=r(8270),o=r(1485),s=r(7087),a=r(8828),h=r(2535),u=Math.max,c=Math.min,l=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;r(9228)("replace",2,(function(t,e,r,d){return[function(i,n){var o=t(this),s=null==i?void 0:i[e];return void 0!==s?s.call(i,o,n):r.call(String(o),i,n)},function(t,e){var n=d(r,t,this,e);if(n.done)return n.value;var l=i(t),f=String(this),p="function"==typeof e;p||(e=String(e));var y=l.global;if(y){var g=l.unicode;l.lastIndex=0}for(var m=[];;){var x=h(l,f);if(null===x)break;if(m.push(x),!y)break;""===String(x[0])&&(l.lastIndex=a(f,o(l.lastIndex),g))}for(var b,w="",E=0,T=0;T<m.length;T++){x=m[T];for(var S=String(x[0]),_=u(c(s(x.index),f.length),0),O=[],P=1;P<x.length;P++)O.push(void 0===(b=x[P])?b:String(b));var M=x.groups;if(p){var A=[S].concat(O,_,f);void 0!==M&&A.push(M);var L=String(e.apply(void 0,A))}else L=v(S,f,_,O,M,e);_>=E&&(w+=f.slice(E,_)+L,E=_+S.length)}return w+f.slice(E)}];function v(t,e,i,o,s,a){var h=i+t.length,u=o.length,c=p;return void 0!==s&&(s=n(s),c=f),r.call(a,c,(function(r,n){var a;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(h);case"<":a=s[n.slice(1,-1)];break;default:var c=+n;if(0===c)return r;if(c>u){var f=l(c/10);return 0===f?r:f<=u?void 0===o[f-1]?n.charAt(1):o[f-1]+n.charAt(1):r}a=o[c-1]}return void 0===a?"":a}))}}))},4701:(t,e,r)=>{"use strict";var i=r(4228),n=r(7359),o=r(2535);r(9228)("search",1,(function(t,e,r,s){return[function(r){var i=t(this),n=null==r?void 0:r[e];return void 0!==n?n.call(r,i):new RegExp(r)[e](String(i))},function(t){var e=s(r,t,this);if(e.done)return e.value;var a=i(t),h=String(this),u=a.lastIndex;n(u,0)||(a.lastIndex=0);var c=o(a,h);return n(a.lastIndex,u)||(a.lastIndex=u),null===c?-1:c.index}]}))},341:(t,e,r)=>{"use strict";var i=r(5411),n=r(4228),o=r(9190),s=r(8828),a=r(1485),h=r(2535),u=r(9600),c=r(9448),l=Math.min,f=[].push,p="split",d="length",v="lastIndex",y=4294967295,g=!c((function(){RegExp(y,"y")}));r(9228)("split",2,(function(t,e,r,c){var m;return m="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[d]||2!="ab"[p](/(?:ab)*/)[d]||4!="."[p](/(.?)(.?)/)[d]||"."[p](/()()/)[d]>1||""[p](/.?/)[d]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return r.call(n,t,e);for(var o,s,a,h=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,p=void 0===e?y:e>>>0,g=new RegExp(t.source,c+"g");(o=u.call(g,n))&&!((s=g[v])>l&&(h.push(n.slice(l,o.index)),o[d]>1&&o.index<n[d]&&f.apply(h,o.slice(1)),a=o[0][d],l=s,h[d]>=p));)g[v]===o.index&&g[v]++;return l===n[d]?!a&&g.test("")||h.push(""):h.push(n.slice(l)),h[d]>p?h.slice(0,p):h}:"0"[p](void 0,0)[d]?function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)}:r,[function(r,i){var n=t(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,n,i):m.call(String(n),r,i)},function(t,e){var i=c(m,t,this,e,m!==r);if(i.done)return i.value;var u=n(t),f=String(this),p=o(u,RegExp),d=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),x=new p(g?u:"^(?:"+u.source+")",v),b=void 0===e?y:e>>>0;if(0===b)return[];if(0===f.length)return null===h(x,f)?[f]:[];for(var w=0,E=0,T=[];E<f.length;){x.lastIndex=g?E:0;var S,_=h(x,g?f:f.slice(E));if(null===_||(S=l(a(x.lastIndex+(g?0:E)),f.length))===w)E=s(f,E,d);else{if(T.push(f.slice(w,E)),T.length===b)return T;for(var O=1;O<=_.length-1;O++)if(T.push(_[O]),T.length===b)return T;E=w=S}}return T.push(f.slice(w)),T}]}))},8604:(t,e,r)=>{"use strict";r(9638);var i=r(4228),n=r(1158),o=r(1763),s="toString",a=/./[s],h=function(t){r(8859)(RegExp.prototype,s,t,!0)};r(9448)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?h((function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?n.call(t):void 0)})):a.name!=s&&h((function(){return a.call(this)}))},1632:(t,e,r)=>{"use strict";var i=r(6197),n=r(2888);t.exports=r(8933)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return i.def(n(this,"Set"),t=0===t?0:t,t)}},i)},7360:(t,e,r)=>{"use strict";r(2468)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},9011:(t,e,r)=>{"use strict";r(2468)("big",(function(t){return function(){return t(this,"big","","")}}))},4591:(t,e,r)=>{"use strict";r(2468)("blink",(function(t){return function(){return t(this,"blink","","")}}))},7334:(t,e,r)=>{"use strict";r(2468)("bold",(function(t){return function(){return t(this,"b","","")}}))},2405:(t,e,r)=>{"use strict";var i=r(2127),n=r(1212)(!1);i(i.P,"String",{codePointAt:function(t){return n(this,t)}})},7224:(t,e,r)=>{"use strict";var i=r(2127),n=r(1485),o=r(8942),s="endsWith",a=""[s];i(i.P+i.F*r(5203)(s),"String",{endsWith:function(t){var e=o(this,t,s),r=arguments.length>1?arguments[1]:void 0,i=n(e.length),h=void 0===r?i:Math.min(n(r),i),u=String(t);return a?a.call(e,u,h):e.slice(h-u.length,h)===u}})},7083:(t,e,r)=>{"use strict";r(2468)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},9213:(t,e,r)=>{"use strict";r(2468)("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}}))},8437:(t,e,r)=>{"use strict";r(2468)("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},2220:(t,e,r)=>{var i=r(2127),n=r(157),o=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,r=[],i=arguments.length,s=0;i>s;){if(e=+arguments[s++],n(e,1114111)!==e)throw RangeError(e+" is not a valid code point");r.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return r.join("")}})},8872:(t,e,r)=>{"use strict";var i=r(2127),n=r(8942),o="includes";i(i.P+i.F*r(5203)(o),"String",{includes:function(t){return!!~n(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},9839:(t,e,r)=>{"use strict";r(2468)("italics",(function(t){return function(){return t(this,"i","","")}}))},2975:(t,e,r)=>{"use strict";var i=r(1212)(!0);r(8175)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=i(e,r),this._i+=t.length,{value:t,done:!1})}))},6549:(t,e,r)=>{"use strict";r(2468)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},3483:(t,e,r)=>{var i=r(2127),n=r(7221),o=r(1485);i(i.S,"String",{raw:function(t){for(var e=n(t.raw),r=o(e.length),i=arguments.length,s=[],a=0;r>a;)s.push(String(e[a++])),a<i&&s.push(String(arguments[a]));return s.join("")}})},4894:(t,e,r)=>{var i=r(2127);i(i.P,"String",{repeat:r(7926)})},2818:(t,e,r)=>{"use strict";r(2468)("small",(function(t){return function(){return t(this,"small","","")}}))},177:(t,e,r)=>{"use strict";var i=r(2127),n=r(1485),o=r(8942),s="startsWith",a=""[s];i(i.P+i.F*r(5203)(s),"String",{startsWith:function(t){var e=o(this,t,s),r=n(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return a?a.call(e,i,r):e.slice(r,r+i.length)===i}})},8543:(t,e,r)=>{"use strict";r(2468)("strike",(function(t){return function(){return t(this,"strike","","")}}))},3559:(t,e,r)=>{"use strict";r(2468)("sub",(function(t){return function(){return t(this,"sub","","")}}))},4153:(t,e,r)=>{"use strict";r(2468)("sup",(function(t){return function(){return t(this,"sup","","")}}))},957:(t,e,r)=>{"use strict";r(629)("trim",(function(t){return function(){return t(this,3)}}))},9650:(t,e,r)=>{"use strict";var i=r(7526),n=r(7917),o=r(1763),s=r(2127),a=r(8859),h=r(2988).KEY,u=r(9448),c=r(4556),l=r(3844),f=r(4415),p=r(7574),d=r(7960),v=r(5392),y=r(5969),g=r(7981),m=r(4228),x=r(3305),b=r(8270),w=r(7221),E=r(3048),T=r(1996),S=r(4719),_=r(4765),O=r(8641),P=r(1060),M=r(7967),A=r(1311),L=O.f,C=M.f,R=_.f,k=i.Symbol,F=i.JSON,I=F&&F.stringify,D="prototype",j=p("_hidden"),B=p("toPrimitive"),N={}.propertyIsEnumerable,G=c("symbol-registry"),U=c("symbols"),Y=c("op-symbols"),z=Object[D],X="function"==typeof k&&!!P.f,V=i.QObject,W=!V||!V[D]||!V[D].findChild,H=o&&u((function(){return 7!=S(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a}))?function(t,e,r){var i=L(z,e);i&&delete z[e],C(t,e,r),i&&t!==z&&C(z,e,i)}:C,q=function(t){var e=U[t]=S(k[D]);return e._k=t,e},K=X&&"symbol"==typeof k.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof k},Z=function(t,e,r){return t===z&&Z(Y,e,r),m(t),e=E(e,!0),m(r),n(U,e)?(r.enumerable?(n(t,j)&&t[j][e]&&(t[j][e]=!1),r=S(r,{enumerable:T(0,!1)})):(n(t,j)||C(t,j,T(1,{})),t[j][e]=!0),H(t,e,r)):C(t,e,r)},J=function(t,e){m(t);for(var r,i=y(e=w(e)),n=0,o=i.length;o>n;)Z(t,r=i[n++],e[r]);return t},Q=function(t){var e=N.call(this,t=E(t,!0));return!(this===z&&n(U,t)&&!n(Y,t))&&(!(e||!n(this,t)||!n(U,t)||n(this,j)&&this[j][t])||e)},$=function(t,e){if(t=w(t),e=E(e,!0),t!==z||!n(U,e)||n(Y,e)){var r=L(t,e);return!r||!n(U,e)||n(t,j)&&t[j][e]||(r.enumerable=!0),r}},tt=function(t){for(var e,r=R(w(t)),i=[],o=0;r.length>o;)n(U,e=r[o++])||e==j||e==h||i.push(e);return i},et=function(t){for(var e,r=t===z,i=R(r?Y:w(t)),o=[],s=0;i.length>s;)!n(U,e=i[s++])||r&&!n(z,e)||o.push(U[e]);return o};X||(a((k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(r){this===z&&e.call(Y,r),n(this,j)&&n(this[j],t)&&(this[j][t]=!1),H(this,t,T(1,r))};return o&&W&&H(z,t,{configurable:!0,set:e}),q(t)})[D],"toString",(function(){return this._k})),O.f=$,M.f=Z,r(9415).f=_.f=tt,r(8449).f=Q,P.f=et,o&&!r(2750)&&a(z,"propertyIsEnumerable",Q,!0),d.f=function(t){return q(p(t))}),s(s.G+s.W+s.F*!X,{Symbol:k});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;rt.length>it;)p(rt[it++]);for(var nt=A(p.store),ot=0;nt.length>ot;)v(nt[ot++]);s(s.S+s.F*!X,"Symbol",{for:function(t){return n(G,t+="")?G[t]:G[t]=k(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in G)if(G[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!X,"Object",{create:function(t,e){return void 0===e?S(t):J(S(t),e)},defineProperty:Z,defineProperties:J,getOwnPropertyDescriptor:$,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var st=u((function(){P.f(1)}));s(s.S+s.F*st,"Object",{getOwnPropertySymbols:function(t){return P.f(b(t))}}),F&&s(s.S+s.F*(!X||u((function(){var t=k();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))}))),"JSON",{stringify:function(t){for(var e,r,i=[t],n=1;arguments.length>n;)i.push(arguments[n++]);if(r=e=i[1],(x(e)||void 0!==t)&&!K(t))return g(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!K(e))return e}),i[1]=e,I.apply(F,i)}}),k[D][B]||r(3341)(k[D],B,k[D].valueOf),l(k,"Symbol"),l(Math,"Math",!0),l(i.JSON,"JSON",!0)},5706:(t,e,r)=>{"use strict";var i=r(2127),n=r(237),o=r(8032),s=r(4228),a=r(157),h=r(1485),u=r(3305),c=r(7526).ArrayBuffer,l=r(9190),f=o.ArrayBuffer,p=o.DataView,d=n.ABV&&c.isView,v=f.prototype.slice,y=n.VIEW,g="ArrayBuffer";i(i.G+i.W+i.F*(c!==f),{ArrayBuffer:f}),i(i.S+i.F*!n.CONSTR,g,{isView:function(t){return d&&d(t)||u(t)&&y in t}}),i(i.P+i.U+i.F*r(9448)((function(){return!new f(2).slice(1,void 0).byteLength})),g,{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(s(this),t);for(var r=s(this).byteLength,i=a(t,r),n=a(void 0===e?r:e,r),o=new(l(this,f))(h(n-i)),u=new p(this),c=new p(o),d=0;i<n;)c.setUint8(d++,u.getUint8(i++));return o}}),r(5762)(g)},660:(t,e,r)=>{var i=r(2127);i(i.G+i.W+i.F*!r(237).ABV,{DataView:r(8032).DataView})},7925:(t,e,r)=>{r(7209)("Float32",4,(function(t){return function(e,r,i){return t(this,e,r,i)}}))},2490:(t,e,r)=>{r(7209)("Float64",8,(function(t){return function(e,r,i){return t(this,e,r,i)}}))},1220:(t,e,r)=>{r(7209)("Int16",2,(function(t){return function(e,r,i){return t(this,e,r,i)}}))},8066:(t,e,r)=>{r(7209)("Int32",4,(function(t){return function(e,r,i){return t(this,e,r,i)}}))},8699:(t,e,r)=>{r(7209)("Int8",1,(function(t){return function(e,r,i){return t(this,e,r,i)}}))},2087:(t,e,r)=>{r(7209)("Uint16",2,(function(t){return function(e,r,i){return t(this,e,r,i)}}))},8537:(t,e,r)=>{r(7209)("Uint32",4,(function(t){return function(e,r,i){return t(this,e,r,i)}}))},4702:(t,e,r)=>{r(7209)("Uint8",1,(function(t){return function(e,r,i){return t(this,e,r,i)}}))},333:(t,e,r)=>{r(7209)("Uint8",1,(function(t){return function(e,r,i){return t(this,e,r,i)}}),!0)},9397:(t,e,r)=>{"use strict";var i,n=r(7526),o=r(6179)(0),s=r(8859),a=r(2988),h=r(8206),u=r(9882),c=r(3305),l=r(2888),f=r(2888),p=!n.ActiveXObject&&"ActiveXObject"in n,d="WeakMap",v=a.getWeak,y=Object.isExtensible,g=u.ufstore,m=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},x={get:function(t){if(c(t)){var e=v(t);return!0===e?g(l(this,d)).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(l(this,d),t,e)}},b=t.exports=r(8933)(d,m,x,u,!0,!0);f&&p&&(h((i=u.getConstructor(m,d)).prototype,x),a.NEED=!0,o(["delete","has","get","set"],(function(t){var e=b.prototype,r=e[t];s(e,t,(function(e,n){if(c(e)&&!y(e)){this._f||(this._f=new i);var o=this._f[t](e,n);return"set"==t?this:o}return r.call(this,e,n)}))})))},8163:(t,e,r)=>{"use strict";var i=r(9882),n=r(2888),o="WeakSet";r(8933)(o,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return i.def(n(this,o),t,!0)}},i,!1,!0)},9766:(t,e,r)=>{"use strict";var i=r(2127),n=r(2322),o=r(8270),s=r(1485),a=r(3387),h=r(3191);i(i.P,"Array",{flatMap:function(t){var e,r,i=o(this);return a(t),e=s(i.length),r=h(i,0),n(r,i,i,e,0,1,t,arguments[1]),r}}),r(8184)("flatMap")},9087:(t,e,r)=>{"use strict";var i=r(2127),n=r(1464)(!0);i(i.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r(8184)("includes")},7146:(t,e,r)=>{var i=r(2127),n=r(3854)(!0);i(i.S,"Object",{entries:function(t){return n(t)}})},4614:(t,e,r)=>{var i=r(2127),n=r(6222),o=r(7221),s=r(8641),a=r(7227);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,r,i=o(t),h=s.f,u=n(i),c={},l=0;u.length>l;)void 0!==(r=h(i,e=u[l++]))&&a(c,e,r);return c}})},7594:(t,e,r)=>{var i=r(2127),n=r(3854)(!1);i(i.S,"Object",{values:function(t){return n(t)}})},8583:(t,e,r)=>{"use strict";var i=r(2127),n=r(6094),o=r(7526),s=r(9190),a=r(5957);i(i.P+i.R,"Promise",{finally:function(t){var e=s(this,n.Promise||o.Promise),r="function"==typeof t;return this.then(r?function(r){return a(e,t()).then((function(){return r}))}:t,r?function(r){return a(e,t()).then((function(){throw r}))}:t)}})},5693:(t,e,r)=>{"use strict";var i=r(2127),n=r(4472),o=r(4514),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*s,"String",{padEnd:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},5380:(t,e,r)=>{"use strict";var i=r(2127),n=r(4472),o=r(4514),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*s,"String",{padStart:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},62:(t,e,r)=>{"use strict";r(629)("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},521:(t,e,r)=>{"use strict";r(629)("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd")},2820:(t,e,r)=>{r(5392)("asyncIterator")},5890:(t,e,r)=>{for(var i=r(5165),n=r(1311),o=r(8859),s=r(7526),a=r(3341),h=r(906),u=r(7574),c=u("iterator"),l=u("toStringTag"),f=h.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=n(p),v=0;v<d.length;v++){var y,g=d[v],m=p[g],x=s[g],b=x&&x.prototype;if(b&&(b[c]||a(b,c,f),b[l]||a(b,l,g),h[g]=f,m))for(y in i)b[y]||o(b,y,i[y],!0)}},5417:(t,e,r)=>{var i=r(2127),n=r(2780);i(i.G+i.B,{setImmediate:n.set,clearImmediate:n.clear})},8772:(t,e,r)=>{var i=r(7526),n=r(2127),o=r(4514),s=[].slice,a=/MSIE .\./.test(o),h=function(t){return function(e,r){var i=arguments.length>2,n=!!i&&s.call(arguments,2);return t(i?function(){("function"==typeof e?e:Function(e)).apply(this,n)}:e,r)}};n(n.G+n.B+n.F*a,{setTimeout:h(i.setTimeout),setInterval:h(i.setInterval)})},3415:(t,e,r)=>{r(8772),r(5417),r(5890),t.exports=r(6094)},4440:function(t){var e;e=()=>(()=>{var t={50792:t=>{"use strict";var e=Object.prototype.hasOwnProperty,r="~";function i(){}function n(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new n(i,o||t,s),h=r?r+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)e.call(t,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,o=i.length,s=new Array(o);n<o;n++)s[n]=i[n].fn;return s},a.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,n,o,s){var a=r?r+t:t;if(!this._events[a])return!1;var h,u,c=this._events[a],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,n),!0;case 5:return c.fn.call(c.context,e,i,n,o),!0;case 6:return c.fn.call(c.context,e,i,n,o,s),!0}for(u=1,h=new Array(l-1);u<l;u++)h[u-1]=arguments[u];c.fn.apply(c.context,h)}else{var f,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),l){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,i);break;case 4:c[u].fn.call(c[u].context,e,i,n);break;default:if(!h)for(f=1,h=new Array(l-1);f<l;f++)h[f-1]=arguments[f];c[u].fn.apply(c[u].context,h)}}return!0},a.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,i,n){var o=r?r+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||n&&!a.once||i&&a.context!==i||s(this,o);else{for(var h=0,u=[],c=a.length;h<c;h++)(a[h].fn!==e||n&&!a[h].once||i&&a[h].context!==i)&&u.push(a[h]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a},11517:(t,e,r)=>{var i=r(38829);t.exports=function(t,e,r,n){for(var o=t[0],s=1;s<t.length;s++){var a=t[s];i(a,o,e,r,n),o=a}return t}},80318:(t,e,r)=>{var i=r(66979);t.exports=function(t,e,r,n,o){return i(t,"angle",e,r,n,o)}},60757:t=>{t.exports=function(t,e,r){for(var i=0;i<t.length;i++){var n=t[i];e.call(r,n)}return t}},69927:t=>{t.exports=function(t,e,r){void 0===r&&(r=0);for(var i=r;i<t.length;i++){var n=t[i],o=!0;for(var s in e)n[s]!==e[s]&&(o=!1);if(o)return n}return null}},32265:t=>{t.exports=function(t,e,r){void 0===r&&(r=0);for(var i=t.length-1;i>=r;i--){var n=t[i],o=!0;for(var s in e)n[s]!==e[s]&&(o=!1);if(o)return n}return null}},94420:(t,e,r)=>{var i=r(11879),n=r(60461),o=r(95540),s=r(29747),a=new(r(41481))({sys:{queueDepthSort:s,events:{once:s}}},0,0,1,1).setOrigin(0,0);t.exports=function(t,e){void 0===e&&(e={});var r=e.hasOwnProperty("width"),s=e.hasOwnProperty("height"),h=o(e,"width",-1),u=o(e,"height",-1),c=o(e,"cellWidth",1),l=o(e,"cellHeight",c),f=o(e,"position",n.TOP_LEFT),p=o(e,"x",0),d=o(e,"y",0),v=0,y=0,g=h*c,m=u*l;a.setPosition(p,d),a.setSize(c,l);for(var x=0;x<t.length;x++)if(i(t[x],a,f),r&&-1===h)a.x+=c;else if(s&&-1===u)a.y+=l;else if(s&&!r){if(y+=l,a.y+=l,y===m&&(y=0,v+=c,a.y=d,a.x+=c,v===g))break}else if(v+=c,a.x+=c,v===g&&(v=0,y+=l,a.x=p,a.y+=l,y===m))break;return t}},41721:(t,e,r)=>{var i=r(66979);t.exports=function(t,e,r,n,o){return i(t,"alpha",e,r,n,o)}},67285:(t,e,r)=>{var i=r(66979);t.exports=function(t,e,r,n,o){return i(t,"x",e,r,n,o)}},9074:(t,e,r)=>{var i=r(66979);t.exports=function(t,e,r,n,o,s,a){return null==r&&(r=e),i(t,"x",e,n,s,a),i(t,"y",r,o,s,a)}},75222:(t,e,r)=>{var i=r(66979);t.exports=function(t,e,r,n,o){return i(t,"y",e,r,n,o)}},22983:t=>{t.exports=function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=6.28);for(var n=r,o=(i-r)/t.length,s=e.x,a=e.y,h=e.radius,u=0;u<t.length;u++)t[u].x=s+h*Math.cos(n),t[u].y=a+h*Math.sin(n),n+=o;return t}},95253:t=>{t.exports=function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=6.28);for(var n=r,o=(i-r)/t.length,s=e.width/2,a=e.height/2,h=0;h<t.length;h++)t[h].x=e.x+s*Math.cos(n),t[h].y=e.y+a*Math.sin(n),n+=o;return t}},88505:(t,e,r)=>{var i=r(15258),n=r(26708);t.exports=function(t,e,r){var o;o=r?n(e,r,t.length):i(e,t.length);for(var s=0;s<t.length;s++){var a=t[s],h=o[s];a.x=h.x,a.y=h.y}return t}},41346:(t,e,r)=>{var i=r(14649),n=r(86003),o=r(49498);t.exports=function(t,e,r){void 0===r&&(r=0);var s=i(e,!1,t.length);r>0?n(s,r):r<0&&o(s,Math.abs(r));for(var a=0;a<t.length;a++)t[a].x=s[a].x,t[a].y=s[a].y;return t}},11575:(t,e,r)=>{var i=r(84993);t.exports=function(t,e,r){var n=i({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},r),o=i({x1:e.x2,y1:e.y2,x2:e.x3,y2:e.y3},r),s=i({x1:e.x3,y1:e.y3,x2:e.x1,y2:e.y1},r);n.pop(),o.pop(),s.pop();for(var a=(n=n.concat(o,s)).length/t.length,h=0,u=0;u<t.length;u++){var c=t[u],l=n[Math.floor(h)];c.x=l.x,c.y=l.y,h+=a}return t}},29953:t=>{t.exports=function(t,e,r){for(var i=0;i<t.length;i++){var n=t[i];n.anims&&n.anims.play(e,r)}return t}},66979:t=>{t.exports=function(t,e,r,i,n,o){var s;void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=1);var a=0,h=t.length;if(1===o)for(s=n;s<h;s++)t[s][e]+=r+a*i,a++;else for(s=n;s>=0;s--)t[s][e]+=r+a*i,a++;return t}},43967:t=>{t.exports=function(t,e,r,i,n,o){var s;void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=1);var a=0,h=t.length;if(1===o)for(s=n;s<h;s++)t[s][e]=r+a*i,a++;else for(s=n;s>=0;s--)t[s][e]=r+a*i,a++;return t}},88926:(t,e,r)=>{var i=r(28176);t.exports=function(t,e){for(var r=0;r<t.length;r++)i(e,t[r]);return t}},33286:(t,e,r)=>{var i=r(24820);t.exports=function(t,e){for(var r=0;r<t.length;r++)i(e,t[r]);return t}},96e3:(t,e,r)=>{var i=r(65822);t.exports=function(t,e){for(var r=0;r<t.length;r++)i(e,t[r]);return t}},28789:(t,e,r)=>{var i=r(26597);t.exports=function(t,e){for(var r=0;r<t.length;r++)i(e,t[r]);return t}},97154:(t,e,r)=>{var i=r(90260);t.exports=function(t,e){for(var r=0;r<t.length;r++)i(e,t[r]);return t}},20510:(t,e,r)=>{var i=r(66979);t.exports=function(t,e,r,n,o){return i(t,"rotation",e,r,n,o)}},91051:(t,e,r)=>{var i=r(1163),n=r(20339);t.exports=function(t,e,r){for(var o=e.x,s=e.y,a=0;a<t.length;a++){var h=t[a];i(h,o,s,r,Math.max(1,n(h.x,h.y,o,s)))}return t}},76332:(t,e,r)=>{var i=r(1163);t.exports=function(t,e,r,n){var o=e.x,s=e.y;if(0===n)return t;for(var a=0;a<t.length;a++)i(t[a],o,s,r,n);return t}},61619:(t,e,r)=>{var i=r(66979);t.exports=function(t,e,r,n,o){return i(t,"scaleX",e,r,n,o)}},94868:(t,e,r)=>{var i=r(66979);t.exports=function(t,e,r,n,o,s,a){return null==r&&(r=e),i(t,"scaleX",e,n,s,a),i(t,"scaleY",r,o,s,a)}},95532:(t,e,r)=>{var i=r(66979);t.exports=function(t,e,r,n,o){return i(t,"scaleY",e,r,n,o)}},8689:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n,o){return i(t,"alpha",e,r,n,o)}},2645:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n){return i(t,"blendMode",e,0,r,n)}},32372:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n,o){return i(t,"depth",e,r,n,o)}},85373:t=>{t.exports=function(t,e,r){for(var i=0;i<t.length;i++)t[i].setInteractive(e,r);return t}},81583:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n,o,s,a){return null==r&&(r=e),i(t,"originX",e,n,s,a),i(t,"originY",r,o,s,a),t.forEach((function(t){t.updateDisplayOrigin()})),t}},79939:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n,o){return i(t,"rotation",e,r,n,o)}},2699:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n,o,s,a){return null==r&&(r=e),i(t,"scaleX",e,n,s,a),i(t,"scaleY",r,o,s,a)}},98739:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n,o){return i(t,"scaleX",e,r,n,o)}},98476:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n,o){return i(t,"scaleY",e,r,n,o)}},6207:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n,o,s,a){return null==r&&(r=e),i(t,"scrollFactorX",e,n,s,a),i(t,"scrollFactorY",r,o,s,a)}},6607:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n,o){return i(t,"scrollFactorX",e,r,n,o)}},72248:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n,o){return i(t,"scrollFactorY",e,r,n,o)}},14036:t=>{t.exports=function(t,e,r,i,n){for(var o=0;o<t.length;o++)t[o].setTint(e,r,i,n);return t}},50159:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n){return i(t,"visible",e,0,r,n)}},77597:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n,o){return i(t,"x",e,r,n,o)}},83194:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n,o,s,a){return null==r&&(r=e),i(t,"x",e,n,s,a),i(t,"y",r,o,s,a)}},67678:(t,e,r)=>{var i=r(43967);t.exports=function(t,e,r,n,o){return i(t,"y",e,r,n,o)}},35850:(t,e,r)=>{var i=r(26099);t.exports=function(t,e,r,n,o){var s,a;void 0===n&&(n=0),void 0===o&&(o=new i);var h=t.length;if(1===h)s=t[0].x,a=t[0].y,t[0].x=e,t[0].y=r;else{var u=1,c=0;0===n&&(c=h-1,u=h-2),s=t[c].x,a=t[c].y,t[c].x=e,t[c].y=r;for(var l=0;l<h;l++)if(!(u>=h||-1===u)){var f=t[u],p=f.x,d=f.y;f.x=s,f.y=a,s=p,a=d,0===n?u--:u++}}return o.x=s,o.y=a,o}},8628:(t,e,r)=>{var i=r(33680);t.exports=function(t){return i(t)}},21837:(t,e,r)=>{var i=r(7602);t.exports=function(t,e,r,n,o){void 0===o&&(o=!1);var s,a=Math.abs(n-r)/t.length;if(o)for(s=0;s<t.length;s++)t[s][e]+=i(s*a,r,n);else for(s=0;s<t.length;s++)t[s][e]=i(s*a,r,n);return t}},21910:(t,e,r)=>{var i=r(54261);t.exports=function(t,e,r,n,o){void 0===o&&(o=!1);var s,a=Math.abs(n-r)/t.length;if(o)for(s=0;s<t.length;s++)t[s][e]+=i(s*a,r,n);else for(s=0;s<t.length;s++)t[s][e]=i(s*a,r,n);return t}},62054:t=>{t.exports=function(t,e,r,i,n){if(void 0===n&&(n=!1),0===t.length)return t;if(1===t.length)return n?t[0][e]+=(i+r)/2:t[0][e]=(i+r)/2,t;var o,s=Math.abs(i-r)/(t.length-1);if(n)for(o=0;o<t.length;o++)t[o][e]+=o*s+r;else for(o=0;o<t.length;o++)t[o][e]=o*s+r;return t}},79815:t=>{t.exports=function(t){for(var e=0;e<t.length;e++)t[e].visible=!t[e].visible;return t}},39665:(t,e,r)=>{var i=r(15994);t.exports=function(t,e,r){void 0===r&&(r=0);for(var n=0;n<t.length;n++){var o=t[n];o.x=i(o.x,e.left-r,e.right+r),o.y=i(o.y,e.top-r,e.bottom+r)}return t}},61061:(t,e,r)=>{t.exports={AlignTo:r(11517),Angle:r(80318),Call:r(60757),GetFirst:r(69927),GetLast:r(32265),GridAlign:r(94420),IncAlpha:r(41721),IncX:r(67285),IncXY:r(9074),IncY:r(75222),PlaceOnCircle:r(22983),PlaceOnEllipse:r(95253),PlaceOnLine:r(88505),PlaceOnRectangle:r(41346),PlaceOnTriangle:r(11575),PlayAnimation:r(29953),PropertyValueInc:r(66979),PropertyValueSet:r(43967),RandomCircle:r(88926),RandomEllipse:r(33286),RandomLine:r(96e3),RandomRectangle:r(28789),RandomTriangle:r(97154),Rotate:r(20510),RotateAround:r(91051),RotateAroundDistance:r(76332),ScaleX:r(61619),ScaleXY:r(94868),ScaleY:r(95532),SetAlpha:r(8689),SetBlendMode:r(2645),SetDepth:r(32372),SetHitArea:r(85373),SetOrigin:r(81583),SetRotation:r(79939),SetScale:r(2699),SetScaleX:r(98739),SetScaleY:r(98476),SetScrollFactor:r(6207),SetScrollFactorX:r(6607),SetScrollFactorY:r(72248),SetTint:r(14036),SetVisible:r(50159),SetX:r(77597),SetXY:r(83194),SetY:r(67678),ShiftPosition:r(35850),Shuffle:r(8628),SmootherStep:r(21910),SmoothStep:r(21837),Spread:r(62054),ToggleVisible:r(79815),WrapInRectangle:r(39665)}},42099:(t,e,r)=>{var i=r(45319),n=r(83419),o=r(74943),s=r(81957),a=r(41138),h=r(35154),u=r(90126),c=new n({initialize:function(t,e,r){this.manager=t,this.key=e,this.type="frame",this.frames=this.getFrames(t.textureManager,h(r,"frames",[]),h(r,"defaultTextureKey",null),h(r,"sortFrames",!0)),this.frameRate=h(r,"frameRate",null),this.duration=h(r,"duration",null),this.msPerFrame,this.skipMissedFrames=h(r,"skipMissedFrames",!0),this.delay=h(r,"delay",0),this.repeat=h(r,"repeat",0),this.repeatDelay=h(r,"repeatDelay",0),this.yoyo=h(r,"yoyo",!1),this.showBeforeDelay=h(r,"showBeforeDelay",!1),this.showOnStart=h(r,"showOnStart",!1),this.hideOnComplete=h(r,"hideOnComplete",!1),this.randomFrame=h(r,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(o.PAUSE_ALL,this.pause,this),this.manager.on(o.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(t,e,r,i){null===r&&null===i?(t.frameRate=24,t.duration=24/e*1e3):r&&null===i?(t.duration=r,t.frameRate=e/(r/1e3)):(t.frameRate=i,t.duration=e/i*1e3),t.msPerFrame=1e3/t.frameRate},addFrame:function(t){return this.addFrameAt(this.frames.length,t)},addFrameAt:function(t,e){var r=this.getFrames(this.manager.textureManager,e);if(r.length>0){if(0===t)this.frames=r.concat(this.frames);else if(t===this.frames.length)this.frames=this.frames.concat(r);else{var i=this.frames.slice(0,t),n=this.frames.slice(t);this.frames=i.concat(r,n)}this.updateFrameSequence()}return this},checkFrame:function(t){return t>=0&&t<this.frames.length},getFirstTick:function(t){t.accumulator=0,t.nextTick=t.currentFrame.duration?t.currentFrame.duration:t.msPerFrame},getFrameAt:function(t){return this.frames[t]},getFrames:function(t,e,r,i){void 0===i&&(i=!0);var n,o,s,c,l=[],f=1;if("string"==typeof e){if(c=e,!t.exists(c))return console.warn('Texture "%s" not found',c),l;var p=t.get(c).getFrameNames();i&&u(p),e=[],p.forEach((function(t){e.push({key:c,frame:t})}))}if(!Array.isArray(e)||0===e.length)return l;for(s=0;s<e.length;s++){var d=e[s],v=h(d,"key",r);if(v){var y=h(d,"frame",0),g=t.getFrame(v,y);g?((o=new a(v,y,f,g)).duration=h(d,"duration",0),o.isFirst=!n,n&&(n.nextFrame=o,o.prevFrame=n),l.push(o),n=o,f++):console.warn('Texture "%s" not found',v)}}if(l.length>0){o.isLast=!0,o.nextFrame=l[0],l[0].prevFrame=o;var m=1/(l.length-1);for(s=0;s<l.length;s++)l[s].progress=s*m}return l},getNextTick:function(t){t.accumulator-=t.nextTick,t.nextTick=t.currentFrame.duration?t.currentFrame.duration:t.msPerFrame},getFrameByProgress:function(t){return t=i(t,0,1),s(t,this.frames,"progress")},nextFrame:function(t){var e=t.currentFrame;e.isLast?t.yoyo?this.handleYoyoFrame(t,!1):t.repeatCounter>0?t.inReverse&&t.forward?t.forward=!1:this.repeatAnimation(t):t.complete():this.updateAndGetNextTick(t,e.nextFrame)},handleYoyoFrame:function(t,e){if(e||(e=!1),t.inReverse===!e&&t.repeatCounter>0)return(0===t.repeatDelay||t.pendingRepeat)&&(t.forward=e),void this.repeatAnimation(t);if(t.inReverse===e||0!==t.repeatCounter){t.forward=e;var r=e?t.currentFrame.nextFrame:t.currentFrame.prevFrame;this.updateAndGetNextTick(t,r)}else t.complete()},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(t){var e=t.currentFrame;e.isFirst?t.yoyo?this.handleYoyoFrame(t,!0):t.repeatCounter>0?(t.inReverse&&!t.forward||(t.forward=!0),this.repeatAnimation(t)):t.complete():this.updateAndGetNextTick(t,e.prevFrame)},updateAndGetNextTick:function(t,e){t.setCurrentFrame(e),this.getNextTick(t)},removeFrame:function(t){var e=this.frames.indexOf(t);return-1!==e&&this.removeFrameAt(e),this},removeFrameAt:function(t){return this.frames.splice(t,1),this.updateFrameSequence(),this},repeatAnimation:function(t){if(2===t._pendingStop){if(0===t._pendingStopValue)return t.stop();t._pendingStopValue--}t.repeatDelay>0&&!t.pendingRepeat?(t.pendingRepeat=!0,t.accumulator-=t.nextTick,t.nextTick+=t.repeatDelay):(t.repeatCounter--,t.forward?t.setCurrentFrame(t.currentFrame.nextFrame):t.setCurrentFrame(t.currentFrame.prevFrame),t.isPlaying&&(this.getNextTick(t),t.handleRepeat()))},toJSON:function(){var t={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach((function(e){t.frames.push(e.toJSON())})),t},updateFrameSequence:function(){for(var t,e=this.frames.length,r=1/(e-1),i=0;i<e;i++)(t=this.frames[i]).index=i+1,t.isFirst=!1,t.isLast=!1,t.progress=i*r,0===i?(t.isFirst=!0,1===e?(t.isLast=!0,t.nextFrame=t,t.prevFrame=t):(t.isLast=!1,t.prevFrame=this.frames[e-1],t.nextFrame=this.frames[i+1])):i===e-1&&e>1?(t.isLast=!0,t.prevFrame=this.frames[e-2],t.nextFrame=this.frames[0]):e>1&&(t.prevFrame=this.frames[i-1],t.nextFrame=this.frames[i+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(o.PAUSE_ALL,this.pause,this),this.manager.off(o.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var t=0;t<this.frames.length;t++)this.frames[t].destroy();this.frames=[],this.manager=null}});t.exports=c},41138:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e,r,i,n){void 0===n&&(n=!1),this.textureKey=t,this.textureFrame=e,this.index=r,this.frame=i,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=n},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});t.exports=i},60848:(t,e,r)=>{var i=r(42099),n=r(83419),o=r(90330),s=r(50792),a=r(74943),h=r(8443),u=r(95540),c=r(35154),l=r(36383),f=r(20283),p=r(41836),d=new n({Extends:s,initialize:function(t){s.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new o,this.mixes=new o,this.paused=!1,this.name="AnimationManager",t.events.once(h.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(h.DESTROY,this.destroy,this)},addMix:function(t,e,r){var i=this.anims,n=this.mixes,o="string"==typeof t?t:t.key,s="string"==typeof e?e:e.key;if(i.has(o)&&i.has(s)){var a=n.get(o);a||(a={}),a[s]=r,n.set(o,a)}return this},removeMix:function(t,e){var r=this.mixes,i="string"==typeof t?t:t.key,n=r.get(i);if(n)if(e){var o="string"==typeof e?e:e.key;n.hasOwnProperty(o)&&delete n[o]}else e||r.delete(i);return this},getMix:function(t,e){var r=this.mixes,i="string"==typeof t?t:t.key,n="string"==typeof e?e:e.key,o=r.get(i);return o&&o.hasOwnProperty(n)?o[n]:0},add:function(t,e){return this.anims.has(t)?(console.warn("Animation key exists: "+t),this):(e.key=t,this.anims.set(t,e),this.emit(a.ADD_ANIMATION,t,e),this)},exists:function(t){return this.anims.has(t)},createFromAseprite:function(t,e,r){var i=[],n=this.game.cache.json.get(t);if(!n)return console.warn("No Aseprite data found for: "+t),i;var o=this,s=c(n,"meta",null),a=c(n,"frames",null);return s&&a&&c(s,"frameTags",[]).forEach((function(n){var s=[],h=u(n,"name",null),c=u(n,"from",0),f=u(n,"to",0),p=u(n,"direction","forward");if(h&&(!e||e&&e.indexOf(h)>-1)){for(var d=0,v=c;v<=f;v++){var y=v.toString(),g=a[y];if(g){var m=u(g,"duration",l.MAX_SAFE_INTEGER);s.push({key:t,frame:y,duration:m}),d+=m}}"reverse"===p&&(s=s.reverse());var x,b={key:h,frames:s,duration:d,yoyo:"pingpong"===p};r?r.anims&&(x=r.anims.create(b)):x=o.create(b),x&&i.push(x)}})),i},create:function(t){var e=t.key,r=!1;return e&&((r=this.get(e))?console.warn("AnimationManager key already exists: "+e):(r=new i(this,e,t),this.anims.set(e,r),this.emit(a.ADD_ANIMATION,e,r))),r},fromJSON:function(t,e){void 0===e&&(e=!1),e&&this.anims.clear(),"string"==typeof t&&(t=JSON.parse(t));var r=[];if(t.hasOwnProperty("anims")&&Array.isArray(t.anims)){for(var i=0;i<t.anims.length;i++)r.push(this.create(t.anims[i]));t.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=t.globalTimeScale)}else t.hasOwnProperty("key")&&"frame"===t.type&&r.push(this.create(t));return r},generateFrameNames:function(t,e){var r=c(e,"prefix",""),i=c(e,"start",0),n=c(e,"end",0),o=c(e,"suffix",""),s=c(e,"zeroPad",0),a=c(e,"outputArray",[]),h=c(e,"frames",!1);if(!this.textureManager.exists(t))return console.warn('Texture "%s" not found',t),a;var u,l=this.textureManager.get(t);if(!l)return a;if(e)for(h||(h=f(i,n)),u=0;u<h.length;u++){var d=r+p(h[u],s,"0",1)+o;l.has(d)?a.push({key:t,frame:d}):console.warn('Frame "%s" not found in texture "%s"',d,t)}else for(h=l.getFrameNames(),u=0;u<h.length;u++)a.push({key:t,frame:h[u]});return a},generateFrameNumbers:function(t,e){var r=c(e,"start",0),i=c(e,"end",-1),n=c(e,"first",!1),o=c(e,"outputArray",[]),s=c(e,"frames",!1);if(!this.textureManager.exists(t))return console.warn('Texture "%s" not found',t),o;var a=this.textureManager.get(t);if(!a)return o;n&&a.has(n)&&o.push({key:t,frame:n}),s||(-1===i&&(i=a.frameTotal-2),s=f(r,i));for(var h=0;h<s.length;h++){var u=s[h];a.has(u)?o.push({key:t,frame:u}):console.warn('Frame "%s" not found in texture "%s"',u,t)}return o},get:function(t){return this.anims.get(t)},getAnimsFromTexture:function(t){for(var e=this.textureManager.get(t).key,r=this.anims.getArray(),i=[],n=0;n<r.length;n++)for(var o=r[n],s=o.frames,a=0;a<s.length;a++)if(s[a].textureKey===e){i.push(o.key);break}return i},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(a.PAUSE_ALL)),this},play:function(t,e){Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++)e[r].anims.play(t);return this},staggerPlay:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=!0),Array.isArray(e)||(e=[e]);var n=e.length;i||n--;for(var o=0;o<e.length;o++){var s=r<0?Math.abs(r)*(n-o):r*o;e[o].anims.playAfterDelay(t,s)}return this},remove:function(t){var e=this.get(t);return e&&(this.emit(a.REMOVE_ANIMATION,t,e),this.anims.delete(t),this.removeMix(t)),e},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(a.RESUME_ALL)),this},toJSON:function(t){var e={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==t&&""!==t?e.anims.push(this.anims.get(t).toJSON()):this.anims.each((function(t,r){e.anims.push(r.toJSON())})),e},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});t.exports=d},9674:(t,e,r)=>{var i=r(42099),n=r(30976),o=r(83419),s=r(90330),a=r(74943),h=r(95540),u=new o({initialize:function(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(a.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(t){var e=this.parent;if(void 0===t)return this.nextAnimsQueue.length=0,this.nextAnim=null,e;Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r];this.nextAnim?this.nextAnimsQueue.push(i):this.nextAnim=i}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(t){this.isPlaying&&this.stop();var e=this.animationManager,r="string"==typeof t?t:h(t,"key",null),i=this.exists(r)?this.get(r):e.get(r);if(i){this.currentAnim=i;var o=i.getTotalFrames(),s=h(t,"frameRate",i.frameRate),a=h(t,"duration",i.duration);i.calculateDuration(this,o,a,s),this.delay=h(t,"delay",i.delay),this.repeat=h(t,"repeat",i.repeat),this.repeatDelay=h(t,"repeatDelay",i.repeatDelay),this.yoyo=h(t,"yoyo",i.yoyo),this.showBeforeDelay=h(t,"showBeforeDelay",i.showBeforeDelay),this.showOnStart=h(t,"showOnStart",i.showOnStart),this.hideOnComplete=h(t,"hideOnComplete",i.hideOnComplete),this.skipMissedFrames=h(t,"skipMissedFrames",i.skipMissedFrames),this.randomFrame=h(t,"randomFrame",i.randomFrame),this.timeScale=h(t,"timeScale",this.timeScale);var u=h(t,"startFrame",0);u>o&&(u=0),this.randomFrame&&(u=n(0,o-1));var c=i.frames[u];0!==u||this.forward||(c=i.getLastFrame()),this.currentFrame=c}else console.warn("Missing animation: "+r);return this.parent},pause:function(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.setCurrentFrame(t),this.parent},resume:function(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.setCurrentFrame(t),this.parent},playAfterDelay:function(t,e){if(this.isPlaying){var r=this.nextAnim,i=this.nextAnimsQueue;r&&i.unshift(r),this.nextAnim=t,this._pendingStop=1,this._pendingStopValue=e}else this.delayCounter=e,this.play(t,!0);return this.parent},playAfterRepeat:function(t,e){if(void 0===e&&(e=1),this.isPlaying){var r=this.nextAnim,i=this.nextAnimsQueue;r&&i.unshift(r),-1!==this.repeatCounter&&e>this.repeatCounter&&(e=this.repeatCounter),this.nextAnim=t,this._pendingStop=2,this._pendingStopValue=e}else this.play(t);return this.parent},play:function(t,e){void 0===e&&(e=!1);var r=this.currentAnim,i=this.parent,n="string"==typeof t?t:t.key;if(e&&this.isPlaying&&r.key===n)return i;if(r&&this.isPlaying){var o=this.animationManager.getMix(r.key,t);if(o>0)return this.playAfterDelay(t,o)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t)},playReverse:function(t,e){void 0===e&&(e=!1);var r="string"==typeof t?t:t.key;return e&&this.isPlaying&&this.currentAnim.key===r?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t))},startAnimation:function(t){this.load(t);var e=this.currentAnim,r=this.parent;return e?(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,e.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame),r):r},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(a.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(a.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(a.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(a.ANIMATION_COMPLETE,a.ANIMATION_COMPLETE_KEY)},emitEvents:function(t,e){var r=this.currentAnim;if(r){var i=this.currentFrame,n=this.parent,o=i.textureFrame;n.emit(t,r,i,n,o),e&&n.emit(e+r.key,r,i,n,o)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var t=this.currentFrame;if(!t)return 0;var e=t.progress;return this.inReverse&&(e*=-1),e},setProgress:function(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},setRepeat:function(t){return this.repeatCounter=-1===t?Number.MAX_VALUE:t,this.parent},globalRemove:function(t,e){void 0===e&&(e=this.currentAnim),this.isPlaying&&e.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var r=this.currentAnim,i=this.parent;return r?(e&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),r.getFirstTick(this),this.emitEvents(a.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!t,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(r.frames[0]),this.parent):i},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(t)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(t)}return this.parent},stopAfterDelay:function(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopAfterRepeat:function(t){return void 0===t&&(t=1),-1!==this.repeatCounter&&t>this.repeatCounter&&(t=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=t,this.parent},stopOnFrame:function(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(t,e){var r=this.currentAnim;if(this.isPlaying&&r&&!r.paused){if(this.accumulator+=e*this.timeScale*this.animationManager.globalTimeScale,1===this._pendingStop&&(this._pendingStopValue-=e,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?r.nextFrame(this):r.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var i=0;do{this.forward?r.nextFrame(this):r.previousFrame(this),i++}while(this.isPlaying&&this.accumulator>this.nextTick&&i<60)}}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(t){var e=this.parent;return this.currentFrame=t,e.texture=t.frame.texture,e.frame=t.frame,e.isCropped&&e.frame.updateCropUVs(e._crop,e.flipX,e.flipY),t.setAlpha&&(e.alpha=t.alpha),e.setSizeToFrame(),e._originComponent&&(t.frame.customPivot?e.setOrigin(t.frame.pivotX,t.frame.pivotY):e.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(a.ANIMATION_UPDATE),3===this._pendingStop&&this._pendingStopValue===t&&this.stop()),e},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(t){return this.anims?this.anims.get(t):null},exists:function(t){return!!this.anims&&this.anims.has(t)},create:function(t){var e=t.key,r=!1;return e&&((r=this.get(e))?console.warn("Animation key already exists: "+e):(r=new i(this,e,t),this.anims||(this.anims=new s),this.anims.set(e,r))),r},createFromAseprite:function(t,e){return this.animationManager.createFromAseprite(t,e,this.parent)},generateFrameNames:function(t,e){return this.animationManager.generateFrameNames(t,e)},generateFrameNumbers:function(t,e){return this.animationManager.generateFrameNumbers(t,e)},remove:function(t){var e=this.get(t);return e&&(this.currentAnim===e&&this.stop(),this.anims.delete(t)),e},destroy:function(){this.animationManager.off(a.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});t.exports=u},57090:t=>{t.exports="add"},25312:t=>{t.exports="animationcomplete"},89580:t=>{t.exports="animationcomplete-"},52860:t=>{t.exports="animationrepeat"},63850:t=>{t.exports="animationrestart"},99085:t=>{t.exports="animationstart"},28087:t=>{t.exports="animationstop"},1794:t=>{t.exports="animationupdate"},52562:t=>{t.exports="pauseall"},57953:t=>{t.exports="remove"},68339:t=>{t.exports="resumeall"},74943:(t,e,r)=>{t.exports={ADD_ANIMATION:r(57090),ANIMATION_COMPLETE:r(25312),ANIMATION_COMPLETE_KEY:r(89580),ANIMATION_REPEAT:r(52860),ANIMATION_RESTART:r(63850),ANIMATION_START:r(99085),ANIMATION_STOP:r(28087),ANIMATION_UPDATE:r(1794),PAUSE_ALL:r(52562),REMOVE_ANIMATION:r(57953),RESUME_ALL:r(68339)}},60421:(t,e,r)=>{t.exports={Animation:r(42099),AnimationFrame:r(41138),AnimationManager:r(60848),AnimationState:r(9674),Events:r(74943)}},2161:(t,e,r)=>{var i=r(83419),n=r(90330),o=r(50792),s=r(24736),a=new i({initialize:function(){this.entries=new n,this.events=new o},add:function(t,e){return this.entries.set(t,e),this.events.emit(s.ADD,this,t,e),this},has:function(t){return this.entries.has(t)},exists:function(t){return this.entries.has(t)},get:function(t){return this.entries.get(t)},remove:function(t){var e=this.get(t);return e&&(this.entries.delete(t),this.events.emit(s.REMOVE,this,t,e.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=a},24047:(t,e,r)=>{var i=r(2161),n=r(83419),o=r(8443),s=new n({initialize:function(t){this.game=t,this.binary=new i,this.bitmapFont=new i,this.json=new i,this.physics=new i,this.shader=new i,this.audio=new i,this.video=new i,this.text=new i,this.html=new i,this.obj=new i,this.tilemap=new i,this.xml=new i,this.custom={},this.game.events.once(o.DESTROY,this.destroy,this)},addCustom:function(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new i),this.custom[t]},destroy:function(){for(var t=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],e=0;e<t.length;e++)this[t[e]].destroy(),this[t[e]]=null;for(var r in this.custom)this.custom[r].destroy();this.custom=null,this.game=null}});t.exports=s},51464:t=>{t.exports="add"},59261:t=>{t.exports="remove"},24736:(t,e,r)=>{t.exports={ADD:r(51464),REMOVE:r(59261)}},83388:(t,e,r)=>{t.exports={BaseCache:r(2161),CacheManager:r(24047),Events:r(24736)}},71911:(t,e,r)=>{var i=r(83419),n=r(31401),o=r(39506),s=r(50792),a=r(19715),h=r(87841),u=r(61340),c=r(80333),l=r(26099),f=new i({Extends:s,Mixins:[n.AlphaSingle,n.Visible],initialize:function(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),s.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new h,this.dirty=!0,this._x=t,this._y=e,this._width=r,this._height=i,this._bounds=new h,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new u,this.transparent=!0,this.backgroundColor=c("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new l(r/2,i/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(t){this.renderList.push(t)},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this},getScroll:function(t,e,r){void 0===r&&(r=new l);var i=.5*this.width,n=.5*this.height;return r.x=t-i,r.y=e-n,this.useBounds&&(r.x=this.clampX(r.x),r.y=this.clampY(r.y)),r},centerOnX:function(t){var e=.5*this.width;return this.midPoint.x=t,this.scrollX=t-e,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(t){var e=.5*this.height;return this.midPoint.y=t,this.scrollY=t-e,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(t,e){return this.centerOnX(t),this.centerOnY(e),this},centerToBounds:function(){if(this.useBounds){var t=this._bounds,e=.5*this.width,r=.5*this.height;this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-e,this.scrollY=t.centerY-r}return this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(t){if(this.disableCull)return t;var e=this.matrix.matrix,r=e[0],i=e[1],n=e[2],o=e[3],s=r*o-i*n;if(!s)return t;var a=e[4],h=e[5],u=this.scrollX,c=this.scrollY,l=this.width,f=this.height,p=this.y,d=p+f,v=this.x,y=v+l,g=this.culledObjects,m=t.length;s=1/s,g.length=0;for(var x=0;x<m;++x){var b=t[x];if(b.hasOwnProperty("width")&&!b.parentContainer){var w=b.width,E=b.height,T=b.x-u*b.scrollFactorX-w*b.originX,S=b.y-c*b.scrollFactorY-E*b.originY;(T+w)*r+(S+E)*n+a>v&&T*r+S*n+a<y&&(T+w)*i+(S+E)*o+h>p&&T*i+S*o+h<d&&g.push(b)}else g.push(b)}return g},getWorldPoint:function(t,e,r){void 0===r&&(r=new l);var i=this.matrix.matrix,n=i[0],o=i[1],s=i[2],a=i[3],h=i[4],u=i[5],c=n*a-o*s;if(!c)return r.x=t,r.y=e,r;var f=a*(c=1/c),p=-o*c,d=-s*c,v=n*c,y=(s*u-a*h)*c,g=(o*h-n*u)*c,m=Math.cos(this.rotation),x=Math.sin(this.rotation),b=this.zoomX,w=this.zoomY,E=this.scrollX,T=this.scrollY,S=t+(E*m-T*x)*b,_=e+(E*x+T*m)*w;return r.x=S*f+_*d+y,r.y=S*p+_*v+g,r},ignore:function(t){var e=this.id;Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?this.ignore(i):i.isParent?this.ignore(i.getChildren()):i.cameraFilter|=e}return this},preRender:function(){this.renderList.length=0;var t=this.width,e=this.height,r=.5*t,i=.5*e,n=this.zoomX,o=this.zoomY,s=this.matrix,a=t*this.originX,h=e*this.originY,u=this.scrollX,c=this.scrollY;this.useBounds&&(u=this.clampX(u),c=this.clampY(c)),this.scrollX=u,this.scrollY=c;var l=u+r,f=c+i;this.midPoint.set(l,f);var p=t/n,d=e/o;this.worldView.setTo(l-p/2,f-d/2,p,d),s.applyITRS(this.x+a,this.y+h,this.rotation,n,o),s.translate(-a,-h)},clampX:function(t){var e=this._bounds,r=this.displayWidth,i=e.x+(r-this.width)/2,n=Math.max(i,i+e.width-r);return t<i?t=i:t>n&&(t=n),t},clampY:function(t){var e=this._bounds,r=this.displayHeight,i=e.y+(r-this.height)/2,n=Math.max(i,i+e.height-r);return t<i?t=i:t>n&&(t=n),t},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(t){return void 0===t&&(t=0),this.rotation=o(t),this},setBackgroundColor:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=c(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(t,e,r,i,n){return void 0===n&&(n=!1),this._bounds.setTo(t,e,r,i),this.dirty=!0,this.useBounds=!0,n?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(t){void 0===t&&(t=new h);var e=this._bounds;return t.setTo(e.x,e.y,e.width,e.height),t},setName:function(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function(t){return this.roundPixels=t,this},setScene:function(t,e){void 0===e&&(e=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=t,this.isSceneCamera=e;var r=t.sys;return this.sceneManager=r.game.scene,this.scaleManager=r.scale,this.cameraManager=r.cameras,this.updateSystem(),this},setScroll:function(t,e){return void 0===e&&(e=t),this.scrollX=t,this.scrollY=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},setViewport:function(t,e,r,i){return this.x=t,this.y=e,this.width=r,this.height=i,this},setZoom:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),0===t&&(t=.001),0===e&&(e=.001),this.zoomX=t,this.zoomY=e,this},setMask:function(t,e){return void 0===e&&(e=!0),this.mask=t,this._maskCamera=e?this.cameraManager.default:this,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function(){},setIsSceneCamera:function(t){return this.isSceneCamera=t,this},updateSystem:function(){if(this.scaleManager&&this.isSceneCamera){var t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,e=this.sceneManager;t&&!this._customViewport?e.customViewports++:!t&&this._customViewport&&e.customViewports--,this.dirty=!0,this._customViewport=t}},destroy:function(){this.emit(a.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(t){this._x=t,this.updateSystem()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.updateSystem()}},width:{get:function(){return this._width},set:function(t){this._width=t,this.updateSystem()}},height:{get:function(){return this._height},set:function(t){this._height=t,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(t){t!==this._scrollX&&(this._scrollX=t,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(t){t!==this._scrollY&&(this._scrollY=t,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(t){this._zoomX=t,this._zoomY=t,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(t){this._zoomX=t,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(t){this._zoomY=t,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});t.exports=f},38058:(t,e,r)=>{var i=r(71911),n=r(67502),o=r(45319),s=r(83419),a=r(31401),h=r(20052),u=r(19715),c=r(28915),l=r(87841),f=r(26099),p=new s({Extends:i,Mixins:[a.PostPipeline],initialize:function(t,e,r,n){i.call(this,t,e,r,n),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new h.Fade(this),this.flashEffect=new h.Flash(this),this.shakeEffect=new h.Shake(this),this.panEffect=new h.Pan(this),this.rotateToEffect=new h.RotateTo(this),this.zoomEffect=new h.Zoom(this),this.lerp=new f(1,1),this.followOffset=new f,this.deadzone=null,this._follow=null},setDeadzone:function(t,e){if(void 0===t)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=t,this.deadzone.height=e):this.deadzone=new l(0,0,t,e),this._follow){var r=this.width/2,i=this.height/2,o=this._follow.x-this.followOffset.x,s=this._follow.y-this.followOffset.y;this.midPoint.set(o,s),this.scrollX=o-r,this.scrollY=s-i}n(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(t,e,r,i,n,o){return this.fadeEffect.start(!1,t,e,r,i,!0,n,o)},fadeOut:function(t,e,r,i,n,o){return this.fadeEffect.start(!0,t,e,r,i,!0,n,o)},fadeFrom:function(t,e,r,i,n,o,s){return this.fadeEffect.start(!1,t,e,r,i,n,o,s)},fade:function(t,e,r,i,n,o,s){return this.fadeEffect.start(!0,t,e,r,i,n,o,s)},flash:function(t,e,r,i,n,o,s){return this.flashEffect.start(t,e,r,i,n,o,s)},shake:function(t,e,r,i,n){return this.shakeEffect.start(t,e,r,i,n)},pan:function(t,e,r,i,n,o,s){return this.panEffect.start(t,e,r,i,n,o,s)},rotateTo:function(t,e,r,i,n,o,s){return this.rotateToEffect.start(t,e,r,i,n,o,s)},zoomTo:function(t,e,r,i,n,o){return this.zoomEffect.start(t,e,r,i,n,o)},preRender:function(){this.renderList.length=0;var t=this.width,e=this.height,r=.5*t,i=.5*e,o=this.zoom,s=this.matrix,a=t*this.originX,h=e*this.originY,l=this._follow,f=this.deadzone,p=this.scrollX,d=this.scrollY;f&&n(f,this.midPoint.x,this.midPoint.y);var v=!1;if(l&&!this.panEffect.isRunning){var y=this.lerp,g=l.x-this.followOffset.x,m=l.y-this.followOffset.y;f?(g<f.x?p=c(p,p-(f.x-g),y.x):g>f.right&&(p=c(p,p+(g-f.right),y.x)),m<f.y?d=c(d,d-(f.y-m),y.y):m>f.bottom&&(d=c(d,d+(m-f.bottom),y.y))):(p=c(p,g-a,y.x),d=c(d,m-h,y.y)),v=!0}this.useBounds&&(p=this.clampX(p),d=this.clampY(d)),this.scrollX=p,this.scrollY=d;var x=p+r,b=d+i;this.midPoint.set(x,b);var w=t/o,E=e/o,T=Math.floor(x-w/2),S=Math.floor(b-E/2);this.worldView.setTo(T,S,w,E),s.applyITRS(Math.floor(this.x+a),Math.floor(this.y+h),this.rotation,o,o),s.translate(-a,-h),this.shakeEffect.preRender(),v&&this.emit(u.FOLLOW_UPDATE,this,l)},setLerp:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.lerp.set(t,e),this},setFollowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.followOffset.set(t,e),this},startFollow:function(t,e,r,i,n,s){void 0===e&&(e=!1),void 0===r&&(r=1),void 0===i&&(i=r),void 0===n&&(n=0),void 0===s&&(s=n),this._follow=t,this.roundPixels=e,r=o(r,0,1),i=o(i,0,1),this.lerp.set(r,i),this.followOffset.set(n,s);var a=this.width/2,h=this.height/2,u=t.x-n,c=t.y-s;return this.midPoint.set(u,c),this.scrollX=u-a,this.scrollY=c-h,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(t,e){this.visible&&(this.rotateToEffect.update(t,e),this.panEffect.update(t,e),this.zoomEffect.update(t,e),this.shakeEffect.update(t,e),this.flashEffect.update(t,e),this.fadeEffect.update(t,e))},destroy:function(){this.resetFX(),i.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=p},32743:(t,e,r)=>{var i=r(38058),n=r(83419),o=r(95540),s=r(37277),a=r(37303),h=r(97480),u=r(44594),c=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(u.BOOT,this.boot,this),t.sys.events.on(u.START,this.start,this)},boot:function(){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new i(0,0,t.scale.width,t.scale.height).setScene(this.scene),t.game.scale.on(h.RESIZE,this.onResize,this),this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){if(!this.main){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0]}var e=this.systems.events;e.on(u.UPDATE,this.update,this),e.once(u.SHUTDOWN,this.shutdown,this)},add:function(t,e,r,n,o,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=this.scene.sys.scale.width),void 0===n&&(n=this.scene.sys.scale.height),void 0===o&&(o=!1),void 0===s&&(s="");var a=new i(t,e,r,n);return a.setName(s),a.setScene(this.scene),a.setRoundPixels(this.roundPixels),a.id=this.getNextID(),this.cameras.push(a),o&&(this.main=a),a},addExisting:function(t,e){return void 0===e&&(e=!1),-1===this.cameras.indexOf(t)?(t.id=this.getNextID(),t.setRoundPixels(this.roundPixels),this.cameras.push(t),e&&(this.main=t),t):null},getNextID:function(){for(var t=this.cameras,e=1,r=0;r<32;r++){for(var i=!1,n=0;n<t.length;n++){var o=t[n];o&&o.id===e&&(i=!0)}if(!i)return e;e<<=1}return 0},getTotal:function(t){void 0===t&&(t=!1);for(var e=0,r=this.cameras,i=0;i<r.length;i++){var n=r[i];(!t||t&&n.visible)&&e++}return e},fromJSON:function(t){Array.isArray(t)||(t=[t]);for(var e=this.scene.sys.scale.width,r=this.scene.sys.scale.height,i=0;i<t.length;i++){var n=t[i],s=o(n,"x",0),a=o(n,"y",0),h=o(n,"width",e),u=o(n,"height",r),c=this.add(s,a,h,u);c.name=o(n,"name",""),c.zoom=o(n,"zoom",1),c.rotation=o(n,"rotation",0),c.scrollX=o(n,"scrollX",0),c.scrollY=o(n,"scrollY",0),c.roundPixels=o(n,"roundPixels",!1),c.visible=o(n,"visible",!0);var l=o(n,"backgroundColor",!1);l&&c.setBackgroundColor(l);var f=o(n,"bounds",null);if(f){var p=o(f,"x",0),d=o(f,"y",0),v=o(f,"width",e),y=o(f,"height",r);c.setBounds(p,d,v,y)}}return this},getCamera:function(t){for(var e=this.cameras,r=0;r<e.length;r++)if(e[r].name===t)return e[r];return null},getCamerasBelowPointer:function(t){for(var e=this.cameras,r=t.x,i=t.y,n=[],o=0;o<e.length;o++){var s=e[o];s.visible&&s.inputEnabled&&a(s,r,i)&&n.unshift(s)}return n},remove:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var r=0,i=this.cameras,n=0;n<t.length;n++){var o=i.indexOf(t[n]);-1!==o&&(e?i[o].destroy():i[o].renderList=[],i.splice(o,1),r++)}return!this.main&&i[0]&&(this.main=i[0]),r},render:function(t,e){for(var r=this.scene,i=this.cameras,n=0;n<i.length;n++){var o=i[n];if(o.visible&&o.alpha>0){o.preRender();var s=this.getVisibleChildren(e.getChildren(),o);t.render(r,s,o)}}},getVisibleChildren:function(t,e){return t.filter((function(t){return t.willRender(e)}))},resetAll:function(){for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(t,e){for(var r=0;r<this.cameras.length;r++)this.cameras[r].update(t,e)},onResize:function(t,e,r,i,n){for(var o=0;o<this.cameras.length;o++){var s=this.cameras[o];0===s._x&&0===s._y&&s._width===i&&s._height===n&&s.setSize(e.width,e.height)}},resize:function(t,e){for(var r=0;r<this.cameras.length;r++)this.cameras[r].setSize(t,e)},shutdown:function(){this.main=void 0;for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();this.cameras=[];var e=this.systems.events;e.off(u.UPDATE,this.update,this),e.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(u.START,this.start,this),this.systems.events.off(u.DESTROY,this.destroy,this),this.systems.game.scale.off(h.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});s.register("CameraManager",c,"cameras"),t.exports=c},5020:(t,e,r)=>{var i=r(45319),n=r(83419),o=r(19715),s=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,r,i,n,s,a,h){if(void 0===t&&(t=!0),void 0===e&&(e=1e3),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=!1),void 0===a&&(a=null),void 0===h&&(h=this.camera.scene),!s&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=e,this.direction=t,this.progress=0,this.red=r,this.green=i,this.blue=n,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=h;var u=t?o.FADE_OUT_START:o.FADE_IN_START;return this.camera.emit(u,this.camera,this,e,r,i,n),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=i(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(t){if(!this.isRunning&&!this.isComplete)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(t,e){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera,i=this.red/255,n=this.green/255,o=this.blue/255;return t.drawFillRect(r.x,r.y,r.width,r.height,e(o,n,i,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?o.FADE_OUT_COMPLETE:o.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=s},10662:(t,e,r)=>{var i=r(45319),n=r(83419),o=r(19715),s=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(t,e,r,i,n,s,a){return void 0===t&&(t=250),void 0===e&&(e=255),void 0===r&&(r=255),void 0===i&&(i=255),void 0===n&&(n=!1),void 0===s&&(s=null),void 0===a&&(a=this.camera.scene),!n&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.red=e,this.green=r,this.blue=i,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=s,this._onUpdateScope=a,this.camera.emit(o.FLASH_START,this.camera,this,t,e,r,i)),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=i(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(t){if(!this.isRunning)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(t,e){if(!this.isRunning)return!1;var r=this.camera,i=this.red/255,n=this.green/255,o=this.blue/255;return t.drawFillRect(r.x,r.y,r.width,r.height,e(o,n,i,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=s},20359:(t,e,r)=>{var i=r(45319),n=r(83419),o=r(62640),s=r(19715),a=r(26099),h=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new a,this.current=new a,this.destination=new a,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,r,i,n,a,h){void 0===r&&(r=1e3),void 0===i&&(i=o.Linear),void 0===n&&(n=!1),void 0===a&&(a=null),void 0===h&&(h=this.camera.scene);var u=this.camera;return!n&&this.isRunning||(this.isRunning=!0,this.duration=r,this.progress=0,this.source.set(u.scrollX,u.scrollY),this.destination.set(t,e),u.getScroll(t,e,this.current),"string"==typeof i&&o.hasOwnProperty(i)?this.ease=o[i]:"function"==typeof i&&(this.ease=i),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=h,this.camera.emit(s.PAN_START,this.camera,this,r,t,e)),u},update:function(t,e){if(this.isRunning){this._elapsed+=e;var r=i(this._elapsed/this.duration,0,1);this.progress=r;var n=this.camera;if(this._elapsed<this.duration){var o=this.ease(r);n.getScroll(this.destination.x,this.destination.y,this.current);var s=this.source.x+(this.current.x-this.source.x)*o,a=this.source.y+(this.current.y-this.source.y)*o;n.setScroll(s,a),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,r,s,a)}else n.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,r,n.scrollX,n.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=h},34208:(t,e,r)=>{var i=r(45319),n=r(83419),o=r(19715),s=r(62640),a=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(t,e,r,i,n,a,h){void 0===r&&(r=1e3),void 0===i&&(i=s.Linear),void 0===n&&(n=!1),void 0===a&&(a=null),void 0===h&&(h=this.camera.scene),void 0===e&&(e=!1),this.shortestPath=e;var u=t;t<0?(u=-1*t,this.clockwise=!1):this.clockwise=!0;var c=360*Math.PI/180;u-=Math.floor(u/c)*c;var l=this.camera;if(!n&&this.isRunning)return l;if(this.isRunning=!0,this.duration=r,this.progress=0,this.source=l.rotation,this.destination=u,"string"==typeof i&&s.hasOwnProperty(i)?this.ease=s[i]:"function"==typeof i&&(this.ease=i),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=h,this.shortestPath){var f,p;(f=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+c)-this.source)<(p=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+c)-this.destination)?this.clockwise=!0:f>p&&(this.clockwise=!1)}return this.camera.emit(o.ROTATE_START,this.camera,this,r,u),l},update:function(t,e){if(this.isRunning){this._elapsed+=e;var r=i(this._elapsed/this.duration,0,1);this.progress=r;var n=this.camera;if(this._elapsed<this.duration){var o=this.ease(r);this.current=n.rotation;var s,a=360*Math.PI/180,h=this.destination,u=this.current;!1===this.clockwise&&(h=this.current,u=this.destination),s=h>=u?Math.abs(h-u):Math.abs(h+a)-u;var c;c=this.clockwise?n.rotation+s*o:n.rotation-s*o,n.rotation=c,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,r,c)}else n.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,n,r,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=a},30330:(t,e,r)=>{var i=r(45319),n=r(83419),o=r(19715),s=r(26099),a=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new s,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(t,e,r,i,n){return void 0===t&&(t=100),void 0===e&&(e=.05),void 0===r&&(r=!1),void 0===i&&(i=null),void 0===n&&(n=this.camera.scene),!r&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,"number"==typeof e?this.intensity.set(e):this.intensity.set(e.x,e.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=i,this._onUpdateScope=n,this.camera.emit(o.SHAKE_START,this.camera,this,t,e)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(t,e){if(this.isRunning)if(this._elapsed+=e,this.progress=i(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var r=this.intensity,n=this.camera.width,o=this.camera.height,s=this.camera.zoom;this._offsetX=(Math.random()*r.x*n*2-r.x*n)*s,this._offsetY=(Math.random()*r.y*o*2-r.y*o)*s,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});t.exports=a},45641:(t,e,r)=>{var i=r(45319),n=r(83419),o=r(62640),s=r(19715),a=new n({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,r,i,n,a){void 0===e&&(e=1e3),void 0===r&&(r=o.Linear),void 0===i&&(i=!1),void 0===n&&(n=null),void 0===a&&(a=this.camera.scene);var h=this.camera;return!i&&this.isRunning||(this.isRunning=!0,this.duration=e,this.progress=0,this.source=h.zoom,this.destination=t,"string"==typeof r&&o.hasOwnProperty(r)?this.ease=o[r]:"function"==typeof r&&(this.ease=r),this._elapsed=0,this._onUpdate=n,this._onUpdateScope=a,this.camera.emit(s.ZOOM_START,this.camera,this,e,t)),h},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=i(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=a},20052:(t,e,r)=>{t.exports={Fade:r(5020),Flash:r(10662),Pan:r(20359),Shake:r(30330),RotateTo:r(34208),Zoom:r(45641)}},16438:t=>{t.exports="cameradestroy"},32726:t=>{t.exports="camerafadeincomplete"},87807:t=>{t.exports="camerafadeinstart"},45917:t=>{t.exports="camerafadeoutcomplete"},95666:t=>{t.exports="camerafadeoutstart"},47056:t=>{t.exports="cameraflashcomplete"},91261:t=>{t.exports="cameraflashstart"},45047:t=>{t.exports="followupdate"},81927:t=>{t.exports="camerapancomplete"},74264:t=>{t.exports="camerapanstart"},54419:t=>{t.exports="postrender"},79330:t=>{t.exports="prerender"},93183:t=>{t.exports="camerarotatecomplete"},80112:t=>{t.exports="camerarotatestart"},62252:t=>{t.exports="camerashakecomplete"},86017:t=>{t.exports="camerashakestart"},539:t=>{t.exports="camerazoomcomplete"},51892:t=>{t.exports="camerazoomstart"},19715:(t,e,r)=>{t.exports={DESTROY:r(16438),FADE_IN_COMPLETE:r(32726),FADE_IN_START:r(87807),FADE_OUT_COMPLETE:r(45917),FADE_OUT_START:r(95666),FLASH_COMPLETE:r(47056),FLASH_START:r(91261),FOLLOW_UPDATE:r(45047),PAN_COMPLETE:r(81927),PAN_START:r(74264),POST_RENDER:r(54419),PRE_RENDER:r(79330),ROTATE_COMPLETE:r(93183),ROTATE_START:r(80112),SHAKE_COMPLETE:r(62252),SHAKE_START:r(86017),ZOOM_COMPLETE:r(539),ZOOM_START:r(51892)}},87969:(t,e,r)=>{t.exports={Camera:r(38058),BaseCamera:r(71911),CameraManager:r(32743),Effects:r(20052),Events:r(19715)}},63091:(t,e,r)=>{var i=r(83419),n=r(35154),o=new i({initialize:function(t){this.camera=n(t,"camera",null),this.left=n(t,"left",null),this.right=n(t,"right",null),this.up=n(t,"up",null),this.down=n(t,"down",null),this.zoomIn=n(t,"zoomIn",null),this.zoomOut=n(t,"zoomOut",null),this.zoomSpeed=n(t,"zoomSpeed",.01),this.minZoom=n(t,"minZoom",.001),this.maxZoom=n(t,"maxZoom",1e3),this.speedX=0,this.speedY=0;var e=n(t,"speed",null);"number"==typeof e?(this.speedX=e,this.speedY=e):(this.speedX=n(t,"speed.x",0),this.speedY=n(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var e=this.camera;this.up&&this.up.isDown?e.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(e.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?e.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(e.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(e.zoom-=this.zoomSpeed,e.zoom<this.minZoom&&(e.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(e.zoom+=this.zoomSpeed,e.zoom>this.maxZoom&&(e.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=o},58818:(t,e,r)=>{var i=r(83419),n=r(35154),o=new i({initialize:function(t){this.camera=n(t,"camera",null),this.left=n(t,"left",null),this.right=n(t,"right",null),this.up=n(t,"up",null),this.down=n(t,"down",null),this.zoomIn=n(t,"zoomIn",null),this.zoomOut=n(t,"zoomOut",null),this.zoomSpeed=n(t,"zoomSpeed",.01),this.minZoom=n(t,"minZoom",.001),this.maxZoom=n(t,"maxZoom",1e3),this.accelX=0,this.accelY=0;var e=n(t,"acceleration",null);"number"==typeof e?(this.accelX=e,this.accelY=e):(this.accelX=n(t,"acceleration.x",0),this.accelY=n(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var r=n(t,"drag",null);"number"==typeof r?(this.dragX=r,this.dragY=r):(this.dragX=n(t,"drag.x",0),this.dragY=n(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var i=n(t,"maxSpeed",null);"number"==typeof i?(this.maxSpeedX=i,this.maxSpeedY=i):(this.maxSpeedX=n(t,"maxSpeed.x",0),this.maxSpeedY=n(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var e=this.camera;this._speedX>0?(this._speedX-=this.dragX*t,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*t,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*t,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*t,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(e.scrollX-=this._speedX*t|0),0!==this._speedY&&(e.scrollY-=this._speedY*t|0),0!==this._zoom&&(e.zoom+=this._zoom,e.zoom<this.minZoom?e.zoom=this.minZoom:e.zoom>this.maxZoom&&(e.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=o},38865:(t,e,r)=>{t.exports={FixedKeyControl:r(63091),SmoothedKeyControl:r(58818)}},26638:(t,e,r)=>{t.exports={Controls:r(38865),Scene2D:r(87969)}},8054:(t,e,r)=>{var i={VERSION:"3.80.1",BlendModes:r(10312),ScaleModes:r(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=i},69547:(t,e,r)=>{var i=r(83419),n=r(8054),o=r(42363),s=r(82264),a=r(95540),h=r(35154),u=r(41212),c=r(29747),l=r(75508),f=r(36060),p=r(80333),d=new i({initialize:function(t){void 0===t&&(t={});var e=h(t,"scale",null);this.width=h(e,"width",1024,t),this.height=h(e,"height",768,t),this.zoom=h(e,"zoom",1,t),this.parent=h(e,"parent",void 0,t),this.scaleMode=h(e,e?"mode":"scaleMode",0,t),this.expandParent=h(e,"expandParent",!0,t),this.autoRound=h(e,"autoRound",!1,t),this.autoCenter=h(e,"autoCenter",0,t),this.resizeInterval=h(e,"resizeInterval",500,t),this.fullscreenTarget=h(e,"fullscreenTarget",null,t),this.minWidth=h(e,"min.width",0,t),this.maxWidth=h(e,"max.width",0,t),this.minHeight=h(e,"min.height",0,t),this.maxHeight=h(e,"max.height",0,t),this.snapWidth=h(e,"snap.width",0,t),this.snapHeight=h(e,"snap.height",0,t),this.renderType=h(t,"type",n.AUTO),this.canvas=h(t,"canvas",null),this.context=h(t,"context",null),this.canvasStyle=h(t,"canvasStyle",null),this.customEnvironment=h(t,"customEnvironment",!1),this.sceneConfig=h(t,"scene",null),this.seed=h(t,"seed",[(Date.now()*Math.random()).toString()]),l.RND=new l.RandomDataGenerator(this.seed),this.gameTitle=h(t,"title",""),this.gameURL=h(t,"url","https://phaser.io"),this.gameVersion=h(t,"version",""),this.autoFocus=h(t,"autoFocus",!0),this.stableSort=h(t,"stableSort",-1),-1===this.stableSort&&(this.stableSort=s.browser.es2019?1:0),s.features.stableSort=this.stableSort,this.domCreateContainer=h(t,"dom.createContainer",!1),this.domPointerEvents=h(t,"dom.pointerEvents","none"),this.inputKeyboard=h(t,"input.keyboard",!0),this.inputKeyboardEventTarget=h(t,"input.keyboard.target",window),this.inputKeyboardCapture=h(t,"input.keyboard.capture",[]),this.inputMouse=h(t,"input.mouse",!0),this.inputMouseEventTarget=h(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=h(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=h(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=h(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=h(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=h(t,"input.touch",s.input.touch),this.inputTouchEventTarget=h(t,"input.touch.target",null),this.inputTouchCapture=h(t,"input.touch.capture",!0),this.inputActivePointers=h(t,"input.activePointers",1),this.inputSmoothFactor=h(t,"input.smoothFactor",0),this.inputWindowEvents=h(t,"input.windowEvents",!0),this.inputGamepad=h(t,"input.gamepad",!1),this.inputGamepadEventTarget=h(t,"input.gamepad.target",window),this.disableContextMenu=h(t,"disableContextMenu",!1),this.audio=h(t,"audio",{}),this.hideBanner=!1===h(t,"banner",null),this.hidePhaser=h(t,"banner.hidePhaser",!1),this.bannerTextColor=h(t,"banner.text","#ffffff"),this.bannerBackgroundColor=h(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=h(t,"fps",null),this.disablePreFX=h(t,"disablePreFX",!1),this.disablePostFX=h(t,"disablePostFX",!1);var r=h(t,"render",null);this.pipeline=h(r,"pipeline",null,t),this.autoMobilePipeline=h(r,"autoMobilePipeline",!0,t),this.defaultPipeline=h(r,"defaultPipeline",f.MULTI_PIPELINE,t),this.antialias=h(r,"antialias",!0,t),this.antialiasGL=h(r,"antialiasGL",!0,t),this.mipmapFilter=h(r,"mipmapFilter","",t),this.desynchronized=h(r,"desynchronized",!1,t),this.roundPixels=h(r,"roundPixels",!0,t),this.pixelArt=h(r,"pixelArt",1!==this.zoom,t),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=h(r,"transparent",!1,t),this.clearBeforeRender=h(r,"clearBeforeRender",!0,t),this.preserveDrawingBuffer=h(r,"preserveDrawingBuffer",!1,t),this.premultipliedAlpha=h(r,"premultipliedAlpha",!0,t),this.failIfMajorPerformanceCaveat=h(r,"failIfMajorPerformanceCaveat",!1,t),this.powerPreference=h(r,"powerPreference","default",t),this.batchSize=h(r,"batchSize",4096,t),this.maxTextures=h(r,"maxTextures",-1,t),this.maxLights=h(r,"maxLights",10,t);var i=h(t,"backgroundColor",0);this.backgroundColor=p(i),this.transparent&&(this.backgroundColor=p(0),this.backgroundColor.alpha=0),this.preBoot=h(t,"callbacks.preBoot",c),this.postBoot=h(t,"callbacks.postBoot",c),this.physics=h(t,"physics",{}),this.defaultPhysicsSystem=h(this.physics,"default",!1),this.loaderBaseURL=h(t,"loader.baseURL",""),this.loaderPath=h(t,"loader.path",""),this.loaderMaxParallelDownloads=h(t,"loader.maxParallelDownloads",s.os.android?6:32),this.loaderCrossOrigin=h(t,"loader.crossOrigin",void 0),this.loaderResponseType=h(t,"loader.responseType",""),this.loaderAsync=h(t,"loader.async",!0),this.loaderUser=h(t,"loader.user",""),this.loaderPassword=h(t,"loader.password",""),this.loaderTimeout=h(t,"loader.timeout",0),this.loaderWithCredentials=h(t,"loader.withCredentials",!1),this.loaderImageLoadType=h(t,"loader.imageLoadType","XHR"),this.loaderLocalScheme=h(t,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=h(t,"fx.glow.quality",.1),this.glowFXDistance=h(t,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var d=h(t,"plugins",null),v=o.DefaultScene;d&&(Array.isArray(d)?this.defaultPlugins=d:u(d)&&(this.installGlobalPlugins=a(d,"global",[]),this.installScenePlugins=a(d,"scene",[]),Array.isArray(d.default)?v=d.default:Array.isArray(d.defaultMerge)&&(v=v.concat(d.defaultMerge)))),this.defaultPlugins=v;var y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=h(t,"images.default",y+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=h(t,"images.missing",y+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=h(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=n.WEBGL:window.FORCE_CANVAS&&(this.renderType=n.CANVAS))}});t.exports=d},86054:(t,e,r)=>{var i=r(20623),n=r(27919),o=r(8054),s=r(89357);t.exports=function(t){var e=t.config;if((e.customEnvironment||e.canvas)&&e.renderType===o.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!e.customEnvironment&&!e.canvas&&e.renderType!==o.HEADLESS)if(e.renderType===o.AUTO&&(e.renderType=s.webGL?o.WEBGL:o.CANVAS),e.renderType===o.WEBGL){if(!s.webGL)throw new Error("Cannot create WebGL context, aborting.")}else{if(e.renderType!==o.CANVAS)throw new Error("Unknown value for renderer type: "+e.renderType);if(!s.canvas)throw new Error("Cannot create Canvas context, aborting.")}e.antialias||n.disableSmoothing();var a,h,u=t.scale.baseSize,c=u.width,l=u.height;e.canvas?(t.canvas=e.canvas,t.canvas.width=c,t.canvas.height=l):t.canvas=n.create(t,c,l,e.renderType),e.canvasStyle&&(t.canvas.style=e.canvasStyle),e.antialias||i.setCrisp(t.canvas),e.renderType!==o.HEADLESS&&(a=r(68627),h=r(74797),e.renderType===o.WEBGL?t.renderer=new h(t):(t.renderer=new a(t),t.context=t.renderer.gameContext))}},96391:(t,e,r)=>{var i=r(8054);t.exports=function(t){var e=t.config;if(!e.hideBanner){var r="WebGL";e.renderType===i.CANVAS?r="Canvas":e.renderType===i.HEADLESS&&(r="Headless");var n,o=e.audio,s=t.device.audio;if(n=s.webAudio&&!o.disableWebAudio?"Web Audio":o.noAudio||!s.webAudio&&!s.audioData?"No Audio":"HTML5 Audio",t.device.browser.ie)window.console&&console.log("Phaser v"+i.VERSION+" / https://phaser.io");else{var a,h="",u=[h];Array.isArray(e.bannerBackgroundColor)?(e.bannerBackgroundColor.forEach((function(t){h=h.concat("%c "),u.push("background: "+t),a=t})),u[u.length-1]="color: "+e.bannerTextColor+"; background: "+a):(h=h.concat("%c "),u.push("color: "+e.bannerTextColor+"; background: "+e.bannerBackgroundColor)),u.push("background: transparent"),e.gameTitle&&(h=h.concat(e.gameTitle),e.gameVersion&&(h=h.concat(" v"+e.gameVersion)),e.hidePhaser||(h=h.concat(" / "))),e.hidePhaser||(h=h.concat("Phaser v"+i.VERSION+" ("+r+" | "+n+")")),h=h.concat(" %c "+e.gameURL),u[0]=h,console.log.apply(console,u)}}}},50127:(t,e,r)=>{var i=r(40366),n=r(60848),o=r(24047),s=r(27919),a=r(83419),h=r(69547),u=r(83719),c=r(86054),l=r(45893),f=r(96391),p=r(82264),d=r(57264),v=r(50792),y=r(8443),g=r(7003),m=r(37277),x=r(77332),b=r(76531),w=r(60903),E=r(69442),T=r(17130),S=r(65898),_=r(51085),O=r(14747),P=new a({initialize:function(t){this.config=new h(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new v,this.anims=new n(this),this.textures=new T(this),this.cache=new o(this),this.registry=new l(this,new v),this.input=new g(this,this.config),this.scene=new w(this,this.config.sceneConfig),this.device=p,this.scale=new b(this,this.config),this.sound=null,this.sound=O.create(this),this.loop=new S(this,this.config.fps),this.plugins=new x(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,d(this.boot.bind(this))},boot:function(){m.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),c(this),u(this),f(this),i(this.canvas,this.config.parent),this.textures.once(E.READY,this.texturesReady,this),this.events.emit(y.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(y.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),_(this);var t=this.events;t.on(y.HIDDEN,this.onHidden,this),t.on(y.VISIBLE,this.onVisible,this),t.on(y.BLUR,this.onBlur,this),t.on(y.FOCUS,this.onFocus,this)},step:function(t,e){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var r=this.events;r.emit(y.PRE_STEP,t,e),r.emit(y.STEP,t,e),this.scene.update(t,e),r.emit(y.POST_STEP,t,e);var i=this.renderer;i.preRender(),r.emit(y.PRE_RENDER,i,t,e),this.scene.render(i),i.postRender(),r.emit(y.POST_RENDER,i,t,e)}},headlessStep:function(t,e){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var r=this.events;r.emit(y.PRE_STEP,t,e),r.emit(y.STEP,t,e),this.scene.update(t,e),r.emit(y.POST_STEP,t,e),this.scene.isProcessing=!1,r.emit(y.PRE_RENDER,null,t,e),r.emit(y.POST_RENDER,null,t,e)}},onHidden:function(){this.loop.pause(),this.events.emit(y.PAUSE)},pause:function(){var t=this.isPaused;this.isPaused=!0,t||this.events.emit(y.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(y.RESUME)},resume:function(){var t=this.isPaused;this.isPaused=!1,t&&this.events.emit(y.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(t,e){void 0===e&&(e=!1),this.pendingDestroy=!0,this.removeCanvas=t,this.noReturn=e},runDestroy:function(){this.scene.destroy(),this.events.emit(y.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(s.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=P},65898:(t,e,r)=>{var i=r(83419),n=r(35154),o=r(29747),s=r(43092),a=new i({initialize:function(t,e){this.game=t,this.raf=new s,this.started=!1,this.running=!1,this.minFps=n(e,"min",5),this.targetFps=n(e,"target",60),this.fpsLimit=n(e,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=o,this.forceSetTimeOut=n(e,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=n(e,"deltaHistory",10),this.panicMax=n(e,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=n(e,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=Math.min(this._target,this.deltaHistory[e]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(t){if(this.started)return this;this.started=!0,this.running=!0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t;var r=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(r,this.forceSetTimeOut,this._target)},smoothDelta:function(t){var e=this.deltaIndex,r=this.deltaHistory,i=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,t=Math.min(t,this._target)),t>this._min&&(t=r[e],t=Math.min(t,this._min)),r[e]=t,this.deltaIndex++,this.deltaIndex>=i&&(this.deltaIndex=0);for(var n=0,o=0;o<i;o++)n+=r[o];return n/i},updateFPS:function(t){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0},stepLimitFPS:function(t){this.now=t;var e=Math.max(0,t-this.lastTime);this.rawDelta=e,this.time+=this.rawDelta,this.smoothStep&&(e=this.smoothDelta(e)),this.delta+=e,t>=this.nextFpsUpdate&&this.updateFPS(t),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(t,this.delta),this.delta=0),this.lastTime=t,this.frame++},step:function(t){this.now=t;var e=Math.max(0,t-this.lastTime);this.rawDelta=e,this.time+=this.rawDelta,this.smoothStep&&(e=this.smoothDelta(e)),this.delta=e,t>=this.nextFpsUpdate&&this.updateFPS(t),this.framesThisSecond++,this.callback(t,e),this.lastTime=t,this.frame++},tick:function(){var t=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(t):this.step(t)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(t){void 0===t&&(t=!1);var e=window.performance.now();if(!this.running){t&&(this.startTime+=-this.lastTime+(this.lastTime+e));var r=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(r,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});t.exports=a},51085:(t,e,r)=>{var i=r(8443);t.exports=function(t){var e,r=t.events;void 0!==document.hidden?e="visibilitychange":["webkit","moz","ms"].forEach((function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},e=t+"visibilitychange")})),e&&document.addEventListener(e,(function(t){document.hidden||"pause"===t.type?r.emit(i.HIDDEN):r.emit(i.VISIBLE)}),!1),window.onblur=function(){r.emit(i.BLUR)},window.onfocus=function(){r.emit(i.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},97217:t=>{t.exports="blur"},47548:t=>{t.exports="boot"},19814:t=>{t.exports="contextlost"},68446:t=>{t.exports="destroy"},41700:t=>{t.exports="focus"},25432:t=>{t.exports="hidden"},65942:t=>{t.exports="pause"},59211:t=>{t.exports="postrender"},47789:t=>{t.exports="poststep"},39066:t=>{t.exports="prerender"},460:t=>{t.exports="prestep"},16175:t=>{t.exports="ready"},42331:t=>{t.exports="resume"},11966:t=>{t.exports="step"},32969:t=>{t.exports="systemready"},94830:t=>{t.exports="visible"},8443:(t,e,r)=>{t.exports={BLUR:r(97217),BOOT:r(47548),CONTEXT_LOST:r(19814),DESTROY:r(68446),FOCUS:r(41700),HIDDEN:r(25432),PAUSE:r(65942),POST_RENDER:r(59211),POST_STEP:r(47789),PRE_RENDER:r(39066),PRE_STEP:r(460),READY:r(16175),RESUME:r(42331),STEP:r(11966),SYSTEM_READY:r(32969),VISIBLE:r(94830)}},42857:(t,e,r)=>{t.exports={Config:r(69547),CreateRenderer:r(86054),DebugHeader:r(96391),Events:r(8443),TimeStep:r(65898),VisibilityHandler:r(51085)}},99584:(t,e,r)=>{var i=r(5290),n=r(27919),o=r(35154);t.exports=function(t){var e=o(t,"data",[]),r=o(t,"canvas",null),s=o(t,"palette",i),a=o(t,"pixelWidth",1),h=o(t,"pixelHeight",a),u=o(t,"resizeCanvas",!0),c=o(t,"clearCanvas",!0),l=o(t,"preRender",null),f=o(t,"postRender",null),p=Math.floor(Math.abs(e[0].length*a)),d=Math.floor(Math.abs(e.length*h));r||(r=n.create2D(this,p,d),u=!1,c=!1),u&&(r.width=p,r.height=d);var v=r.getContext("2d",{willReadFrequently:!0});c&&v.clearRect(0,0,p,d),l&&l(r,v);for(var y=0;y<e.length;y++)for(var g=e[y],m=0;m<g.length;m++){var x=g[m];"."!==x&&" "!==x&&(v.fillStyle=s[x],v.fillRect(m*a,y*h,a,h))}return f&&f(r,v),r}},15822:(t,e,r)=>{t.exports={GenerateTexture:r(99584),Palettes:r(57763)}},5290:t=>{t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},23816:t=>{t.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},9866:t=>{t.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},77552:t=>{t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},92259:t=>{t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},57763:(t,e,r)=>{t.exports={ARNE16:r(5290),C64:r(23816),CGA:r(9866),JMP:r(77552),MSX:r(92259)}},46728:(t,e,r)=>{var i=r(83419),n=r(36316),o=r(80021),s=r(26099),a=new i({Extends:o,initialize:function(t,e,r,i){o.call(this,"CubicBezierCurve"),Array.isArray(t)&&(i=new s(t[6],t[7]),r=new s(t[4],t[5]),e=new s(t[2],t[3]),t=new s(t[0],t[1])),this.p0=t,this.p1=e,this.p2=r,this.p3=i},getStartPoint:function(t){return void 0===t&&(t=new s),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new s);var r=this.p0,i=this.p1,o=this.p2,a=this.p3;return e.set(n(t,r.x,i.x,o.x,a.x),n(t,r.y,i.y,o.y,a.y))},draw:function(t,e){void 0===e&&(e=32);var r=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var i=1;i<r.length;i++)t.lineTo(r[i].x,r[i].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});a.fromJSON=function(t){var e=t.points,r=new s(e[0],e[1]),i=new s(e[2],e[3]),n=new s(e[4],e[5]),o=new s(e[6],e[7]);return new a(r,i,n,o)},t.exports=a},80021:(t,e,r)=>{var i=r(83419),n=r(19217),o=r(87841),s=r(26099),a=new i({initialize:function(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new s,this._tmpVec2B=new s},draw:function(t,e){return void 0===e&&(e=32),t.strokePoints(this.getPoints(e))},getBounds:function(t,e){t||(t=new o),void 0===e&&(e=16);var r=this.getLength();e>r&&(e=r/2);var i=Math.max(1,Math.round(r/e));return n(this.getSpacedPoints(i),t)},getDistancePoints:function(t){var e=this.getLength(),r=Math.max(1,e/t);return this.getSpacedPoints(r)},getEndPoint:function(t){return void 0===t&&(t=new s),this.getPointAt(1,t)},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,r=[],i=this.getPoint(0,this._tmpVec2A),n=0;r.push(0);for(var o=1;o<=t;o++)n+=(e=this.getPoint(o/t,this._tmpVec2B)).distance(i),r.push(n),i.copy(e);return this.cacheArcLengths=r,r},getPointAt:function(t,e){var r=this.getUtoTmapping(t);return this.getPoint(r,e)},getPoints:function(t,e,r){void 0===r&&(r=[]),t||(t=e?this.getLength()/e:this.defaultDivisions);for(var i=0;i<=t;i++)r.push(this.getPoint(i/t));return r},getRandomPoint:function(t){return void 0===t&&(t=new s),this.getPoint(Math.random(),t)},getSpacedPoints:function(t,e,r){void 0===r&&(r=[]),t||(t=e?this.getLength()/e:this.defaultDivisions);for(var i=0;i<=t;i++){var n=this.getUtoTmapping(i/t,null,t);r.push(this.getPoint(n))}return r},getStartPoint:function(t){return void 0===t&&(t=new s),this.getPointAt(0,t)},getTangent:function(t,e){void 0===e&&(e=new s);var r=1e-4,i=t-r,n=t+r;return i<0&&(i=0),n>1&&(n=1),this.getPoint(i,this._tmpVec2A),this.getPoint(n,e),e.subtract(this._tmpVec2A).normalize()},getTangentAt:function(t,e){var r=this.getUtoTmapping(t);return this.getTangent(r,e)},getTFromDistance:function(t,e){return t<=0?0:this.getUtoTmapping(0,t,e)},getUtoTmapping:function(t,e,r){var i,n=this.getLengths(r),o=0,s=n.length;i=e?Math.min(e,n[s-1]):t*n[s-1];for(var a,h=0,u=s-1;h<=u;)if((a=n[o=Math.floor(h+(u-h)/2)]-i)<0)h=o+1;else{if(!(a>0)){u=o;break}u=o-1}if(n[o=u]===i)return o/(s-1);var c=n[o];return(o+(i-c)/(n[o+1]-c))/(s-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});t.exports=a},73825:(t,e,r)=>{var i=r(83419),n=r(80021),o=r(39506),s=r(35154),a=r(43396),h=r(26099),u=new i({Extends:n,initialize:function(t,e,r,i,a,u,c,l){if("object"==typeof t){var f=t;t=s(f,"x",0),e=s(f,"y",0),r=s(f,"xRadius",0),i=s(f,"yRadius",r),a=s(f,"startAngle",0),u=s(f,"endAngle",360),c=s(f,"clockwise",!1),l=s(f,"rotation",0)}else void 0===i&&(i=r),void 0===a&&(a=0),void 0===u&&(u=360),void 0===c&&(c=!1),void 0===l&&(l=0);n.call(this,"EllipseCurve"),this.p0=new h(t,e),this._xRadius=r,this._yRadius=i,this._startAngle=o(a),this._endAngle=o(u),this._clockwise=c,this._rotation=o(l)},getStartPoint:function(t){return void 0===t&&(t=new h),this.getPoint(0,t)},getResolution:function(t){return 2*t},getPoint:function(t,e){void 0===e&&(e=new h);for(var r=2*Math.PI,i=this._endAngle-this._startAngle,n=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=n?0:r),this._clockwise&&!n&&(i===r?i=-r:i-=r);var o=this._startAngle+t*i,s=this.p0.x+this._xRadius*Math.cos(o),a=this.p0.y+this._yRadius*Math.sin(o);if(0!==this._rotation){var u=Math.cos(this._rotation),c=Math.sin(this._rotation),l=s-this.p0.x,f=a-this.p0.y;s=l*u-f*c+this.p0.x,a=l*c+f*u+this.p0.y}return e.set(s,a)},setXRadius:function(t){return this.xRadius=t,this},setYRadius:function(t){return this.yRadius=t,this},setWidth:function(t){return this.xRadius=t/2,this},setHeight:function(t){return this.yRadius=t/2,this},setStartAngle:function(t){return this.startAngle=t,this},setEndAngle:function(t){return this.endAngle=t,this},setClockwise:function(t){return this.clockwise=t,this},setRotation:function(t){return this.rotation=t,this},x:{get:function(){return this.p0.x},set:function(t){this.p0.x=t}},y:{get:function(){return this.p0.y},set:function(t){this.p0.y=t}},xRadius:{get:function(){return this._xRadius},set:function(t){this._xRadius=t}},yRadius:{get:function(){return this._yRadius},set:function(t){this._yRadius=t}},startAngle:{get:function(){return a(this._startAngle)},set:function(t){this._startAngle=o(t)}},endAngle:{get:function(){return a(this._endAngle)},set:function(t){this._endAngle=o(t)}},clockwise:{get:function(){return this._clockwise},set:function(t){this._clockwise=t}},angle:{get:function(){return a(this._rotation)},set:function(t){this._rotation=o(t)}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:a(this._startAngle),endAngle:a(this._endAngle),clockwise:this._clockwise,rotation:a(this._rotation)}}});u.fromJSON=function(t){return new u(t)},t.exports=u},33951:(t,e,r)=>{var i=r(83419),n=r(80021),o=r(19217),s=r(87841),a=r(26099),h=new i({Extends:n,initialize:function(t,e){n.call(this,"LineCurve"),Array.isArray(t)&&(e=new a(t[2],t[3]),t=new a(t[0],t[1])),this.p0=t,this.p1=e,this.arcLengthDivisions=1},getBounds:function(t){return void 0===t&&(t=new s),o([this.p0,this.p1],t)},getStartPoint:function(t){return void 0===t&&(t=new a),t.copy(this.p0)},getResolution:function(t){return void 0===t&&(t=1),t},getPoint:function(t,e){return void 0===e&&(e=new a),1===t?e.copy(this.p1):(e.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),e)},getPointAt:function(t,e){return this.getPoint(t,e)},getTangent:function(t,e){return void 0===e&&(e=new a),e.copy(this.p1).subtract(this.p0).normalize(),e},getUtoTmapping:function(t,e,r){var i;if(e){var n=this.getLengths(r),o=n[n.length-1];i=Math.min(e,o)/o}else i=t;return i},draw:function(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});h.fromJSON=function(t){var e=t.points,r=new a(e[0],e[1]),i=new a(e[2],e[3]);return new h(r,i)},t.exports=h},14744:(t,e,r)=>{var i=r(83419),n=r(80021),o=r(32112),s=r(26099),a=new i({Extends:n,initialize:function(t,e,r){n.call(this,"QuadraticBezierCurve"),Array.isArray(t)&&(r=new s(t[4],t[5]),e=new s(t[2],t[3]),t=new s(t[0],t[1])),this.p0=t,this.p1=e,this.p2=r},getStartPoint:function(t){return void 0===t&&(t=new s),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new s);var r=this.p0,i=this.p1,n=this.p2;return e.set(o(t,r.x,i.x,n.x),o(t,r.y,i.y,n.y))},draw:function(t,e){void 0===e&&(e=32);var r=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var i=1;i<r.length;i++)t.lineTo(r[i].x,r[i].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});a.fromJSON=function(t){var e=t.points,r=new s(e[0],e[1]),i=new s(e[2],e[3]),n=new s(e[4],e[5]);return new a(r,i,n)},t.exports=a},42534:(t,e,r)=>{var i=r(87842),n=r(83419),o=r(80021),s=r(26099),a=new n({Extends:o,initialize:function(t){void 0===t&&(t=[]),o.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function(t){for(var e=0;e<t.length;e++){var r=new s;"number"==typeof t[e]?(r.x=t[e],r.y=t[e+1],e++):Array.isArray(t[e])?(r.x=t[e][0],r.y=t[e][1]):(r.x=t[e].x,r.y=t[e].y),this.points.push(r)}return this},addPoint:function(t,e){var r=new s(t,e);return this.points.push(r),r},getStartPoint:function(t){return void 0===t&&(t=new s),t.copy(this.points[0])},getResolution:function(t){return t*this.points.length},getPoint:function(t,e){void 0===e&&(e=new s);var r=this.points,n=(r.length-1)*t,o=Math.floor(n),a=n-o,h=r[0===o?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],l=r[o>r.length-3?r.length-1:o+2];return e.set(i(a,h.x,u.x,c.x,l.x),i(a,h.y,u.y,c.y,l.y))},toJSON:function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].x),t.push(this.points[e].y);return{type:this.type,points:t}}});a.fromJSON=function(t){return new a(t.points)},t.exports=a},25410:(t,e,r)=>{t.exports={Path:r(46669),MoveTo:r(68618),CubicBezier:r(46728),Curve:r(80021),Ellipse:r(73825),Line:r(33951),QuadraticBezier:r(14744),Spline:r(42534)}},68618:(t,e,r)=>{var i=r(83419),n=r(26099),o=new i({initialize:function(t,e){this.active=!1,this.p0=new n(t,e)},getPoint:function(t,e){return void 0===e&&(e=new n),e.copy(this.p0)},getPointAt:function(t,e){return this.getPoint(t,e)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=o},46669:(t,e,r)=>{var i=r(83419),n=r(46728),o=r(73825),s=r(39429),a=r(33951),h=r(68618),u=r(14744),c=r(87841),l=r(42534),f=r(26099),p=r(36383),d=new i({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new f,this._tmpVec2A=new f,this._tmpVec2B=new f,"object"==typeof t?this.fromJSON(t):this.startPoint.set(t,e)},add:function(t){return this.curves.push(t),this},circleTo:function(t,e,r){return void 0===e&&(e=!1),this.ellipseTo(t,t,0,360,e,r)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new a(e,t)),this},cubicBezierTo:function(t,e,r,i,o,s){var a,h,u,c=this.getEndPoint();return t instanceof f?(a=t,h=e,u=r):(a=new f(r,i),h=new f(o,s),u=new f(t,e)),this.add(new n(c,a,h,u))},quadraticBezierTo:function(t,e,r,i){var n,o,s=this.getEndPoint();return t instanceof f?(n=t,o=e):(n=new f(r,i),o=new f(t,e)),this.add(new u(s,n,o))},draw:function(t,e){for(var r=0;r<this.curves.length;r++){var i=this.curves[r];i.active&&i.draw(t,e)}return t},ellipseTo:function(t,e,r,i,n,s){var a=new o(0,0,t,e,r,i,n,s),h=this.getEndPoint(this._tmpVec2A),u=a.getStartPoint(this._tmpVec2B);return h.subtract(u),a.x=h.x,a.y=h.y,this.add(a)},fromJSON:function(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var e=0;e<t.curves.length;e++){var r=t.curves[e];switch(r.type){case"LineCurve":this.add(a.fromJSON(r));break;case"EllipseCurve":this.add(o.fromJSON(r));break;case"SplineCurve":this.add(l.fromJSON(r));break;case"CubicBezierCurve":this.add(n.fromJSON(r));break;case"QuadraticBezierCurve":this.add(u.fromJSON(r))}}return this},getBounds:function(t,e){void 0===t&&(t=new c),void 0===e&&(e=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var r=new c,i=p.MIN_SAFE_INTEGER,n=p.MIN_SAFE_INTEGER,o=0;o<this.curves.length;o++){var s=this.curves[o];s.active&&(s.getBounds(r,e),t.x=Math.min(t.x,r.x),t.y=Math.min(t.y,r.y),i=Math.max(i,r.right),n=Math.max(n,r.bottom))}return t.right=i,t.bottom=n,t},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,r=0;r<this.curves.length;r++)e+=this.curves[r].getLength(),t.push(e);return this.cacheLengths=t,t},getCurveAt:function(t){for(var e=t*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=e)return this.curves[i];i++}return null},getEndPoint:function(t){return void 0===t&&(t=new f),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function(t,e){void 0===e&&(e=new f);for(var r=t*this.getLength(),i=this.getCurveLengths(),n=0;n<i.length;){if(i[n]>=r){var o=i[n]-r,s=this.curves[n],a=s.getLength(),h=0===a?0:1-o/a;return s.getPointAt(h,e)}n++}return null},getPoints:function(t,e){t||e||(t=this.defaultDivisions);for(var r,i=[],n=0;n<this.curves.length;n++){var o=this.curves[n];if(o.active)for(var s=o.getResolution(t),a=o.getPoints(s,e),h=0;h<a.length;h++){var u=a[h];r&&r.equals(u)||(i.push(u),r=u)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},getRandomPoint:function(t){return void 0===t&&(t=new f),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],r=0;r<=t;r++)e.push(this.getPoint(r/t));return this.autoClose&&e.push(e[0]),e},getStartPoint:function(t){return void 0===t&&(t=new f),t.copy(this.startPoint)},getTangent:function(t,e){void 0===e&&(e=new f);for(var r=t*this.getLength(),i=this.getCurveLengths(),n=0;n<i.length;){if(i[n]>=r){var o=i[n]-r,s=this.curves[n],a=s.getLength(),h=0===a?0:1-o/a;return s.getTangentAt(h,e)}n++}return null},lineTo:function(t,e){t instanceof f?this._tmpVec2B.copy(t):"object"==typeof t?this._tmpVec2B.setFromObject(t):this._tmpVec2B.set(t,e);var r=this.getEndPoint(this._tmpVec2A);return this.add(new a([r.x,r.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(t){return t.unshift(this.getEndPoint()),this.add(new l(t))},moveTo:function(t,e){return t instanceof f?this.add(new h(t.x,t.y)):this.add(new h(t,e))},toJSON:function(){for(var t=[],e=0;e<this.curves.length;e++)t.push(this.curves[e].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});s.register("path",(function(t,e){return new d(t,e)})),t.exports=d},45893:(t,e,r)=>{var i=r(83419),n=r(24882),o=new i({initialize:function(t,e){this.parent=t,this.events=e,e||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(n.DESTROY,this.destroy,this)},get:function(t){var e=this.list;if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++)r.push(e[t[i]]);return r}return e[t]},getAll:function(){var t={};for(var e in this.list)this.list.hasOwnProperty(e)&&(t[e]=this.list[e]);return t},query:function(t){var e={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(t)&&(e[r]=this.list[r]);return e},set:function(t,e){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,e);for(var r in t)this.setValue(r,t[r]);return this},inc:function(t,e){if(this._frozen)return this;void 0===e&&(e=1);var r=this.get(t);return void 0===r&&(r=0),this.set(t,r+e),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,e){if(this._frozen)return this;if(this.has(t))this.values[t]=e;else{var r=this,i=this.list,o=this.events,s=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return i[t]},set:function(e){if(!r._frozen){var a=i[t];i[t]=e,o.emit(n.CHANGE_DATA,s,t,e,a),o.emit(n.CHANGE_DATA_KEY+t,s,e,a)}}}),i[t]=e,o.emit(n.SET_DATA,s,t,e)}return this},each:function(t,e){for(var r=[this.parent,null,void 0],i=1;i<arguments.length;i++)r.push(arguments[i]);for(var n in this.list)r[1]=n,r[2]=this.list[n],t.apply(e,r);return this},merge:function(t,e){for(var r in void 0===e&&(e=!0),t)t.hasOwnProperty(r)&&(e||!e&&!this.has(r))&&this.setValue(r,t[r]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var e=0;e<t.length;e++)this.removeValue(t[e]);return this},removeValue:function(t){if(this.has(t)){var e=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(n.REMOVE_DATA,this.parent,t,e)}return this},pop:function(t){var e=void 0;return!this._frozen&&this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(n.REMOVE_DATA,this.parent,t,e)),e},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(n.CHANGE_DATA),this.events.off(n.SET_DATA),this.events.off(n.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var e in this.list)void 0!==this.list[e]&&t++;return t}}});t.exports=o},63646:(t,e,r)=>{var i=r(83419),n=r(45893),o=r(37277),s=r(44594),a=new i({Extends:n,initialize:function(t){n.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){n.prototype.destroy.call(this),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});o.register("DataManagerPlugin",a,"data"),t.exports=a},10700:t=>{t.exports="changedata"},93608:t=>{t.exports="changedata-"},60883:t=>{t.exports="destroy"},69780:t=>{t.exports="removedata"},22166:t=>{t.exports="setdata"},24882:(t,e,r)=>{t.exports={CHANGE_DATA:r(10700),CHANGE_DATA_KEY:r(93608),DESTROY:r(60883),REMOVE_DATA:r(69780),SET_DATA:r(22166)}},44965:(t,e,r)=>{t.exports={DataManager:r(45893),DataManagerPlugin:r(63646),Events:r(24882)}},7098:(t,e,r)=>{var i=r(84148),n={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function(){if("function"==typeof importScripts)return n;n.audioData=!!window.Audio,n.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),e=!!t.canPlayType;try{if(e){var r=function(e,r){var i=t.canPlayType("audio/"+e).replace(/^no$/,"");return r?Boolean(i||t.canPlayType("audio/"+r).replace(/^no$/,"")):Boolean(i)};if(n.ogg=r('ogg; codecs="vorbis"'),n.opus=r('ogg; codecs="opus"',"opus"),n.mp3=r("mpeg"),n.wav=r("wav"),n.m4a=r("x-m4a"),n.aac=r("aac"),n.flac=r("flac","x-flac"),n.webm=r('webm; codecs="vorbis"'),""!==t.canPlayType('audio/mp4; codecs="ec-3"'))if(i.edge)n.dolby=!0;else if(i.safari&&i.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var o=parseInt(RegExp.$1,10),s=parseInt(RegExp.$2,10);(10===o&&s>=11||o>10)&&(n.dolby=!0)}}}catch(t){}return n}()},84148:(t,e,r)=>{var i,n=r(25892),o={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};t.exports=(i=navigator.userAgent,/Edg\/\d+/.test(i)?(o.edge=!0,o.es2019=!0):/OPR/.test(i)?(o.opera=!0,o.es2019=!0):/Chrome\/(\d+)/.test(i)&&!n.windowsPhone?(o.chrome=!0,o.chromeVersion=parseInt(RegExp.$1,10),o.es2019=o.chromeVersion>69):/Firefox\D+(\d+)/.test(i)?(o.firefox=!0,o.firefoxVersion=parseInt(RegExp.$1,10),o.es2019=o.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(i)&&n.iOS?(o.mobileSafari=!0,o.es2019=!0):/MSIE (\d+\.\d+);/.test(i)?(o.ie=!0,o.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(i)&&!n.windowsPhone?(o.safari=!0,o.safariVersion=parseInt(RegExp.$1,10),o.es2019=o.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(i)&&(o.ie=!0,o.trident=!0,o.tridentVersion=parseInt(RegExp.$1,10),o.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(i)&&(o.silk=!0),o)},89289:(t,e,r)=>{var i,n,o,s=r(27919),a={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=("function"!=typeof importScripts&&void 0!==document&&(a.supportNewBlendModes=(i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(o=new Image).onload=function(){var t=new Image;t.onload=function(){var e=s.create2D(t,6).getContext("2d",{willReadFrequently:!0});if(e.globalCompositeOperation="multiply",e.drawImage(o,0,0),e.drawImage(t,2,0),!e.getImageData(2,0,1,1))return!1;var r=e.getImageData(2,0,1,1).data;s.remove(t),a.supportNewBlendModes=255===r[0]&&0===r[1]&&0===r[2]},t.src=i+"/wCKxvRF"+n},o.src=i+"AP804Oa6"+n,!1),a.supportInverseAlpha=function(){var t=s.create2D(this,2).getContext("2d",{willReadFrequently:!0});t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var e=t.getImageData(0,0,1,1);if(null===e)return!1;t.putImageData(e,1,0);var r=t.getImageData(1,0,1,1),i=r.data[0]===e.data[0]&&r.data[1]===e.data[1]&&r.data[2]===e.data[2]&&r.data[3]===e.data[3];return s.remove(this),i}()),a)},89357:(t,e,r)=>{var i=r(25892),n=r(84148),o=r(27919),s={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function(){if("function"==typeof importScripts)return s;s.canvas=!!window.CanvasRenderingContext2D;try{s.localStorage=!!localStorage.getItem}catch(t){s.localStorage=!1}s.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),s.fileSystem=!!window.requestFileSystem;var t,e,r,a=!1;return s.webGL=function(){if(window.WebGLRenderingContext)try{var t=o.createWebGL(this),e=t.getContext("webgl")||t.getContext("experimental-webgl"),r=o.create2D(this),i=r.getContext("2d",{willReadFrequently:!0}).createImageData(1,1);return a=i.data instanceof Uint8ClampedArray,o.remove(t),o.remove(r),!!e}catch(t){return!1}return!1}(),s.worker=!!window.Worker,s.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,s.getUserMedia=s.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,n.firefox&&n.firefoxVersion<21&&(s.getUserMedia=!1),!i.iOS&&(n.ie||n.firefox||n.chrome)&&(s.canvasBitBltShift=!0),(n.safari||n.mobileSafari)&&(s.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(s.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(s.littleEndian=(t=new ArrayBuffer(4),e=new Uint8Array(t),r=new Uint32Array(t),e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041===r[0]||2712847316!==r[0]&&null)),s.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==s.littleEndian&&a,s}()},91639:t=>{var e={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function(){if("function"==typeof importScripts)return e;var t,r="Fullscreen",i="FullScreen",n=["request"+r,"request"+i,"webkitRequest"+r,"webkitRequest"+i,"msRequest"+r,"msRequest"+i,"mozRequest"+i,"mozRequest"+r];for(t=0;t<n.length;t++)if(document.documentElement[n[t]]){e.available=!0,e.request=n[t];break}var o=["cancel"+i,"exit"+r,"webkitCancel"+i,"webkitExit"+r,"msCancel"+i,"msExit"+r,"mozCancel"+i,"mozExit"+r];if(e.available)for(t=0;t<o.length;t++)if(document[o[t]]){e.cancel=o[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(e.keyboard=!0),Object.defineProperty(e,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),e}()},31784:(t,e,r)=>{var i=r(84148),n={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=("function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(n.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(n.mspointer=!0),navigator.getGamepads&&(n.gamepads=!0),"onwheel"in window||i.ie&&"WheelEvent"in window?n.wheelEvent="wheel":"onmousewheel"in window?n.wheelEvent="mousewheel":i.firefox&&"MouseScrollEvent"in window&&(n.wheelEvent="DOMMouseScroll")),n)},25892:t=>{var e={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function(){if("function"==typeof importScripts)return e;var t=navigator.userAgent;/Windows/.test(t)?e.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(e.iOS=!0,e.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),e.iOSVersion=parseInt(RegExp.$1,10)):e.macOS=!0:/Android/.test(t)?e.android=!0:/Linux/.test(t)?e.linux=!0:/iP[ao]d|iPhone/i.test(t)?(e.iOS=!0,navigator.appVersion.match(/OS (\d+)/),e.iOSVersion=parseInt(RegExp.$1,10),e.iPhone=-1!==t.toLowerCase().indexOf("iphone"),e.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?e.kindle=!0:/CrOS/.test(t)&&(e.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(e.android=!1,e.iOS=!1,e.macOS=!1,e.windows=!0,e.windowsPhone=!0);var r=/Silk/.test(t);return(e.windows||e.macOS||e.linux&&!r||e.chromeOS)&&(e.desktop=!0),(e.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(e.desktop=!1),navigator.standalone&&(e.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(e.cordova=!0),void 0!==window.ejecta&&(e.ejecta=!0)),"undefined"!=typeof process&&process.versions&&process.versions.node&&(e.node=!0),e.node&&"object"==typeof process.versions&&(e.nodeWebkit=!!process.versions["node-webkit"],e.electron=!!process.versions.electron),/Crosswalk/.test(t)&&(e.crosswalk=!0),e.pixelRatio=window.devicePixelRatio||1,e}()},43267:(t,e,r)=>{var i=r(95540),n={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};t.exports=function(){if("function"==typeof importScripts)return n;var t=document.createElement("video"),e=!!t.canPlayType,r=/^no$/;try{e&&(t.canPlayType('video/ogg; codecs="theora"').replace(r,"")&&(n.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(r,"")&&(n.h264=!0,n.mp4=!0),t.canPlayType("video/x-m4v").replace(r,"")&&(n.m4v=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(r,"")&&(n.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(r,"")&&(n.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(r,"")&&(n.hls=!0))}catch(t){}return t.parentNode&&t.parentNode.removeChild(t),n.getVideoURL=function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var r,o=i(t[e],"url",t[e]);if(0===o.indexOf("blob:"))return{url:o,type:""};if(r=0===o.indexOf("data:")?o.split(",")[0].match(/\/(.*?);/):o.match(/\.([a-zA-Z0-9]+)($|\?)/),r=i(t[e],"type",r?r[1]:"").toLowerCase(),n[r])return{url:o,type:r}}return null},n}()},82264:(t,e,r)=>{t.exports={os:r(25892),browser:r(84148),features:r(89357),input:r(31784),audio:r(7098),video:r(43267),fullscreen:r(91639),canvasFeatures:r(89289)}},89422:(t,e,r)=>{var i=r(83419),n=new Float32Array(20),o=new i({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(t){return this._matrix.set(t),this._dirty=!0,this},reset:function(){var t=this._matrix;return t.fill(0),t[0]=1,t[6]=1,t[12]=1,t[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var t=this._data;return this._dirty&&(t.set(this._matrix),t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._dirty=!1),t},brightness:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var r=t;return this.multiply([r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],e)},saturate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var r=2*t/3+1,i=-.5*(r-1);return this.multiply([r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0],e)},desaturate:function(t){return void 0===t&&(t=!1),this.saturate(-1,t)},hue:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1),t=t/180*Math.PI;var r=Math.cos(t),i=Math.sin(t),n=.213,o=.715,s=.072;return this.multiply([n+.787*r+i*-n,o+r*-o+i*-o,s+r*-s+.928*i,0,0,n+r*-n+.143*i,o+r*(1-o)+.14*i,s+r*-s+-.283*i,0,0,n+r*-n+-.787*i,o+r*-o+i*o,s+.928*r+i*s,0,0,0,0,0,1,0],e)},grayscale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!1),this.saturate(-t,e)},blackWhite:function(t){return void 0===t&&(t=!1),this.multiply(o.BLACK_WHITE,t)},contrast:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var r=t+1,i=-.5*(r-1);return this.multiply([r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0],e)},negative:function(t){return void 0===t&&(t=!1),this.multiply(o.NEGATIVE,t)},desaturateLuminance:function(t){return void 0===t&&(t=!1),this.multiply(o.DESATURATE_LUMINANCE,t)},sepia:function(t){return void 0===t&&(t=!1),this.multiply(o.SEPIA,t)},night:function(t,e){return void 0===t&&(t=.1),void 0===e&&(e=!1),this.multiply([-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e)},lsd:function(t){return void 0===t&&(t=!1),this.multiply(o.LSD,t)},brown:function(t){return void 0===t&&(t=!1),this.multiply(o.BROWN,t)},vintagePinhole:function(t){return void 0===t&&(t=!1),this.multiply(o.VINTAGE,t)},kodachrome:function(t){return void 0===t&&(t=!1),this.multiply(o.KODACHROME,t)},technicolor:function(t){return void 0===t&&(t=!1),this.multiply(o.TECHNICOLOR,t)},polaroid:function(t){return void 0===t&&(t=!1),this.multiply(o.POLAROID,t)},shiftToBGR:function(t){return void 0===t&&(t=!1),this.multiply(o.SHIFT_BGR,t)},multiply:function(t,e){void 0===e&&(e=!1),e||this.reset();var r=this._matrix,i=n;return i.set(r),r.set([i[0]*t[0]+i[1]*t[5]+i[2]*t[10]+i[3]*t[15],i[0]*t[1]+i[1]*t[6]+i[2]*t[11]+i[3]*t[16],i[0]*t[2]+i[1]*t[7]+i[2]*t[12]+i[3]*t[17],i[0]*t[3]+i[1]*t[8]+i[2]*t[13]+i[3]*t[18],i[0]*t[4]+i[1]*t[9]+i[2]*t[14]+i[3]*t[19]+i[4],i[5]*t[0]+i[6]*t[5]+i[7]*t[10]+i[8]*t[15],i[5]*t[1]+i[6]*t[6]+i[7]*t[11]+i[8]*t[16],i[5]*t[2]+i[6]*t[7]+i[7]*t[12]+i[8]*t[17],i[5]*t[3]+i[6]*t[8]+i[7]*t[13]+i[8]*t[18],i[5]*t[4]+i[6]*t[9]+i[7]*t[14]+i[8]*t[19]+i[9],i[10]*t[0]+i[11]*t[5]+i[12]*t[10]+i[13]*t[15],i[10]*t[1]+i[11]*t[6]+i[12]*t[11]+i[13]*t[16],i[10]*t[2]+i[11]*t[7]+i[12]*t[12]+i[13]*t[17],i[10]*t[3]+i[11]*t[8]+i[12]*t[13]+i[13]*t[18],i[10]*t[4]+i[11]*t[9]+i[12]*t[14]+i[13]*t[19]+i[14],i[15]*t[0]+i[16]*t[5]+i[17]*t[10]+i[18]*t[15],i[15]*t[1]+i[16]*t[6]+i[17]*t[11]+i[18]*t[16],i[15]*t[2]+i[16]*t[7]+i[17]*t[12]+i[18]*t[17],i[15]*t[3]+i[16]*t[8]+i[17]*t[13]+i[18]*t[18],i[15]*t[4]+i[16]*t[9]+i[17]*t[14]+i[18]*t[19]+i[19]]),this._dirty=!0,this}});o.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],o.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],o.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],o.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],o.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],o.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],o.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],o.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],o.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],o.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],o.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t.exports=o},51767:(t,e,r)=>{var i=r(83419),n=r(29747),o=new i({initialize:function(t,e,r){this._rgb=[0,0,0],this.onChangeCallback=n,this.dirty=!1,this.set(t,e,r)},set:function(t,e,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this._rgb=[t,e,r],this.onChange(),this},equals:function(t,e,r){var i=this._rgb;return i[0]===t&&i[1]===e&&i[2]===r},onChange:function(){this.dirty=!0;var t=this._rgb;this.onChangeCallback.call(this,t[0],t[1],t[2])},r:{get:function(){return this._rgb[0]},set:function(t){this._rgb[0]=t,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(t){this._rgb[1]=t,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(t){this._rgb[2]=t,this.onChange()}},destroy:function(){this.onChangeCallback=null}});t.exports=o},60461:t=>{t.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},54312:(t,e,r)=>{var i=r(62235),n=r(35893),o=r(86327),s=r(88417);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),s(t,n(e)+r),o(t,i(e)+a),t}},46768:(t,e,r)=>{var i=r(62235),n=r(26541),o=r(86327),s=r(385);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),s(t,n(e)-r),o(t,i(e)+a),t}},35827:(t,e,r)=>{var i=r(62235),n=r(54380),o=r(86327),s=r(40136);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),s(t,n(e)+r),o(t,i(e)+a),t}},46871:(t,e,r)=>{var i=r(66786),n=r(35893),o=r(7702);t.exports=function(t,e,r,s){return void 0===r&&(r=0),void 0===s&&(s=0),i(t,n(e)+r,o(e)+s),t}},5198:(t,e,r)=>{var i=r(7702),n=r(26541),o=r(20786),s=r(385);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),s(t,n(e)-r),o(t,i(e)+a),t}},11879:(t,e,r)=>{var i=r(60461),n=[];n[i.BOTTOM_CENTER]=r(54312),n[i.BOTTOM_LEFT]=r(46768),n[i.BOTTOM_RIGHT]=r(35827),n[i.CENTER]=r(46871),n[i.LEFT_CENTER]=r(5198),n[i.RIGHT_CENTER]=r(80503),n[i.TOP_CENTER]=r(89698),n[i.TOP_LEFT]=r(922),n[i.TOP_RIGHT]=r(21373),n[i.LEFT_BOTTOM]=n[i.BOTTOM_LEFT],n[i.LEFT_TOP]=n[i.TOP_LEFT],n[i.RIGHT_BOTTOM]=n[i.BOTTOM_RIGHT],n[i.RIGHT_TOP]=n[i.TOP_RIGHT],t.exports=function(t,e,r,i,o){return n[r](t,e,i,o)}},80503:(t,e,r)=>{var i=r(7702),n=r(54380),o=r(20786),s=r(40136);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),s(t,n(e)+r),o(t,i(e)+a),t}},89698:(t,e,r)=>{var i=r(35893),n=r(17717),o=r(88417),s=r(66737);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),o(t,i(e)+r),s(t,n(e)-a),t}},922:(t,e,r)=>{var i=r(26541),n=r(17717),o=r(385),s=r(66737);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),o(t,i(e)-r),s(t,n(e)-a),t}},21373:(t,e,r)=>{var i=r(54380),n=r(17717),o=r(40136),s=r(66737);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),o(t,i(e)+r),s(t,n(e)-a),t}},91660:(t,e,r)=>{t.exports={BottomCenter:r(54312),BottomLeft:r(46768),BottomRight:r(35827),Center:r(46871),LeftCenter:r(5198),QuickSet:r(11879),RightCenter:r(80503),TopCenter:r(89698),TopLeft:r(922),TopRight:r(21373)}},71926:(t,e,r)=>{var i=r(60461),n=r(79291),o={In:r(91660),To:r(16694)};o=n(!1,o,i),t.exports=o},21578:(t,e,r)=>{var i=r(62235),n=r(35893),o=r(88417),s=r(66737);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),o(t,n(e)+r),s(t,i(e)+a),t}},10210:(t,e,r)=>{var i=r(62235),n=r(26541),o=r(385),s=r(66737);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),o(t,n(e)-r),s(t,i(e)+a),t}},82341:(t,e,r)=>{var i=r(62235),n=r(54380),o=r(40136),s=r(66737);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),o(t,n(e)+r),s(t,i(e)+a),t}},87958:(t,e,r)=>{var i=r(62235),n=r(26541),o=r(86327),s=r(40136);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),s(t,n(e)-r),o(t,i(e)+a),t}},40080:(t,e,r)=>{var i=r(7702),n=r(26541),o=r(20786),s=r(40136);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),s(t,n(e)-r),o(t,i(e)+a),t}},88466:(t,e,r)=>{var i=r(26541),n=r(17717),o=r(40136),s=r(66737);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),o(t,i(e)-r),s(t,n(e)-a),t}},38829:(t,e,r)=>{var i=r(60461),n=[];n[i.BOTTOM_CENTER]=r(21578),n[i.BOTTOM_LEFT]=r(10210),n[i.BOTTOM_RIGHT]=r(82341),n[i.LEFT_BOTTOM]=r(87958),n[i.LEFT_CENTER]=r(40080),n[i.LEFT_TOP]=r(88466),n[i.RIGHT_BOTTOM]=r(19211),n[i.RIGHT_CENTER]=r(34609),n[i.RIGHT_TOP]=r(48741),n[i.TOP_CENTER]=r(49440),n[i.TOP_LEFT]=r(81288),n[i.TOP_RIGHT]=r(61323),t.exports=function(t,e,r,i,o){return n[r](t,e,i,o)}},19211:(t,e,r)=>{var i=r(62235),n=r(54380),o=r(86327),s=r(385);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),s(t,n(e)+r),o(t,i(e)+a),t}},34609:(t,e,r)=>{var i=r(7702),n=r(54380),o=r(20786),s=r(385);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),s(t,n(e)+r),o(t,i(e)+a),t}},48741:(t,e,r)=>{var i=r(54380),n=r(17717),o=r(385),s=r(66737);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),o(t,i(e)+r),s(t,n(e)-a),t}},49440:(t,e,r)=>{var i=r(35893),n=r(17717),o=r(86327),s=r(88417);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),s(t,i(e)+r),o(t,n(e)-a),t}},81288:(t,e,r)=>{var i=r(26541),n=r(17717),o=r(86327),s=r(385);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),s(t,i(e)-r),o(t,n(e)-a),t}},61323:(t,e,r)=>{var i=r(54380),n=r(17717),o=r(86327),s=r(40136);t.exports=function(t,e,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),s(t,i(e)+r),o(t,n(e)-a),t}},16694:(t,e,r)=>{t.exports={BottomCenter:r(21578),BottomLeft:r(10210),BottomRight:r(82341),LeftBottom:r(87958),LeftCenter:r(40080),LeftTop:r(88466),QuickSet:r(38829),RightBottom:r(19211),RightCenter:r(34609),RightTop:r(48741),TopCenter:r(49440),TopLeft:r(81288),TopRight:r(61323)}},66786:(t,e,r)=>{var i=r(88417),n=r(20786);t.exports=function(t,e,r){return i(t,e),n(t,r)}},62235:t=>{t.exports=function(t){return t.y+t.height-t.height*t.originY}},72873:(t,e,r)=>{var i=r(62235),n=r(26541),o=r(54380),s=r(17717),a=r(87841);t.exports=function(t,e){void 0===e&&(e=new a);var r=n(t),h=s(t);return e.x=r,e.y=h,e.width=o(t)-r,e.height=i(t)-h,e}},35893:t=>{t.exports=function(t){return t.x-t.width*t.originX+.5*t.width}},7702:t=>{t.exports=function(t){return t.y-t.height*t.originY+.5*t.height}},26541:t=>{t.exports=function(t){return t.x-t.width*t.originX}},87431:t=>{t.exports=function(t){return t.width*t.originX}},46928:t=>{t.exports=function(t){return t.height*t.originY}},54380:t=>{t.exports=function(t){return t.x+t.width-t.width*t.originX}},17717:t=>{t.exports=function(t){return t.y-t.height*t.originY}},86327:t=>{t.exports=function(t,e){return t.y=e-t.height+t.height*t.originY,t}},88417:t=>{t.exports=function(t,e){var r=t.width*t.originX;return t.x=e+r-.5*t.width,t}},20786:t=>{t.exports=function(t,e){var r=t.height*t.originY;return t.y=e+r-.5*t.height,t}},385:t=>{t.exports=function(t,e){return t.x=e+t.width*t.originX,t}},40136:t=>{t.exports=function(t,e){return t.x=e-t.width+t.width*t.originX,t}},66737:t=>{t.exports=function(t,e){return t.y=e+t.height*t.originY,t}},58724:(t,e,r)=>{t.exports={CenterOn:r(66786),GetBottom:r(62235),GetBounds:r(72873),GetCenterX:r(35893),GetCenterY:r(7702),GetLeft:r(26541),GetOffsetX:r(87431),GetOffsetY:r(46928),GetRight:r(54380),GetTop:r(17717),SetBottom:r(86327),SetCenterX:r(88417),SetCenterY:r(20786),SetLeft:r(385),SetRight:r(40136),SetTop:r(66737)}},20623:t=>{t.exports={setCrisp:function(t){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach((function(e){t.style["image-rendering"]=e})),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},27919:(t,e,r)=>{var i,n,o,s=r(8054),a=r(68703),h=[],u=!1;t.exports=(o=function(){var t=0;return h.forEach((function(e){e.parent&&t++})),t},{create2D:function(t,e,r){return i(t,e,r,s.CANVAS)},create:i=function(t,e,r,i,o){var c;void 0===e&&(e=1),void 0===r&&(r=1),void 0===i&&(i=s.CANVAS),void 0===o&&(o=!1);var l=n(i);return null===l?(l={parent:t,canvas:document.createElement("canvas"),type:i},i===s.CANVAS&&h.push(l),c=l.canvas):(l.parent=t,c=l.canvas),o&&(l.parent=c),c.width=e,c.height=r,u&&i===s.CANVAS&&a.disable(c.getContext("2d",{willReadFrequently:!1})),c},createWebGL:function(t,e,r){return i(t,e,r,s.WEBGL)},disableSmoothing:function(){u=!0},enableSmoothing:function(){u=!1},first:n=function(t){if(void 0===t&&(t=s.CANVAS),t===s.WEBGL)return null;for(var e=0;e<h.length;e++){var r=h[e];if(!r.parent&&r.type===t)return r}return null},free:function(){return h.length-o()},pool:h,remove:function(t){var e=t instanceof HTMLCanvasElement;h.forEach((function(r){(e&&r.canvas===t||!e&&r.parent===t)&&(r.parent=null,r.canvas.width=1,r.canvas.height=1)}))},total:o})},68703:t=>{var e,r="";t.exports={disable:function(t){return""===r&&(r=e(t)),r&&(t[r]=!1),t},enable:function(t){return""===r&&(r=e(t)),r&&(t[r]=!0),t},getPrefix:e=function(t){for(var e=["i","webkitI","msI","mozI","oI"],r=0;r<e.length;r++){var i=e[r]+"mageSmoothingEnabled";if(i in t)return i}return null},isEnabled:function(t){return null!==r?t[r]:null}}},65208:t=>{t.exports=function(t,e){return void 0===e&&(e="none"),t.style.msTouchAction=e,t.style["ms-touch-action"]=e,t.style["touch-action"]=e,t}},91610:t=>{t.exports=function(t,e){return void 0===e&&(e="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach((function(r){t.style[r+"user-select"]=e})),t.style["-webkit-touch-callout"]=e,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},26253:(t,e,r)=>{t.exports={CanvasInterpolation:r(20623),CanvasPool:r(27919),Smoothing:r(68703),TouchAction:r(65208),UserSelect:r(91610)}},40987:(t,e,r)=>{var i=r(83419),n=r(37589),o=r(1e3),s=r(7537),a=r(87837),h=new i({initialize:function(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,e,r,i)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(t,e,r,i,n){return void 0===i&&(i=255),void 0===n&&(n=!0),this._locked=!0,this.red=t,this.green=e,this.blue=r,this.alpha=i,this._locked=!1,this.update(n)},setGLTo:function(t,e,r,i){return void 0===i&&(i=1),this._locked=!0,this.redGL=t,this.greenGL=e,this.blueGL=r,this.alphaGL=i,this._locked=!1,this.update(!0)},setFromRGB:function(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function(t,e,r){return s(t,e,r,this)},update:function(t){if(void 0===t&&(t=!1),this._locked)return this;var e=this.r,r=this.g,i=this.b,s=this.a;return this._color=n(e,r,i),this._color32=o(e,r,i,s),this._rgba="rgba("+e+","+r+","+i+","+s/255+")",t&&a(e,r,i,this),this},updateHSV:function(){var t=this.r,e=this.g,r=this.b;return a(t,e,r,this),this},clone:function(){return new h(this.r,this.g,this.b,this.a)},gray:function(t){return this.setTo(t,t,t)},random:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var r=Math.floor(t+Math.random()*(e-t)),i=Math.floor(t+Math.random()*(e-t)),n=Math.floor(t+Math.random()*(e-t));return this.setTo(r,i,n)},randomGray:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var r=Math.floor(t+Math.random()*(e-t));return this.setTo(r,r,r)},saturate:function(t){return this.s+=t/100,this},desaturate:function(t){return this.s-=t/100,this},lighten:function(t){return this.v+=t/100,this},darken:function(t){return this.v-=t/100,this},brighten:function(t){var e=this.r,r=this.g,i=this.b;return e=Math.max(0,Math.min(255,e-Math.round(-t/100*255))),r=Math.max(0,Math.min(255,r-Math.round(-t/100*255))),i=Math.max(0,Math.min(255,i-Math.round(-t/100*255))),this.setTo(e,r,i)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function(){return this.g},set:function(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function(){return this._h},set:function(t){this._h=t,s(t,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(t){this._s=t,s(this._h,t,this._v,this)}},v:{get:function(){return this._v},set:function(t){this._v=t,s(this._h,this._s,t,this)}}});t.exports=h},92728:(t,e,r)=>{var i=r(37589);t.exports=function(t){void 0===t&&(t=1024);var e,r=[],n=255,o=255,s=0,a=0;for(e=0;e<=n;e++)r.push({r:o,g:e,b:a,color:i(o,e,a)});for(s=255,e=n;e>=0;e--)r.push({r:e,g:s,b:a,color:i(e,s,a)});for(o=0,e=0;e<=n;e++,s--)r.push({r:o,g:s,b:e,color:i(o,s,e)});for(s=0,a=255,e=0;e<=n;e++,a--,o++)r.push({r:o,g:s,b:a,color:i(o,s,a)});if(1024===t)return r;var h=[],u=0,c=1024/t;for(e=0;e<t;e++)h.push(r[Math.floor(u)]),u+=c;return h}},91588:t=>{t.exports=function(t){var e={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return t>16777215&&(e.a=t>>>24),e}},62957:t=>{t.exports=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}},37589:t=>{t.exports=function(t,e,r){return t<<16|e<<8|r}},1e3:t=>{t.exports=function(t,e,r,i){return i<<24|t<<16|e<<8|r}},62183:(t,e,r)=>{var i=r(40987),n=r(89528);t.exports=function(t,e,r){var o=r,s=r,a=r;if(0!==e){var h=r<.5?r*(1+e):r+e-r*e,u=2*r-h;o=n(u,h,t+1/3),s=n(u,h,t),a=n(u,h,t-1/3)}return(new i).setGLTo(o,s,a,1)}},27939:(t,e,r)=>{var i=r(7537);t.exports=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);for(var r=[],n=0;n<=359;n++)r.push(i(n/359,t,e));return r}},7537:(t,e,r)=>{var i=r(37589);function n(t,e,r,i){var n=(t+6*e)%6,o=Math.min(n,4-n,1);return Math.round(255*(i-i*r*Math.max(0,o)))}t.exports=function(t,e,r,o){void 0===e&&(e=1),void 0===r&&(r=1);var s=n(5,t,e,r),a=n(3,t,e,r),h=n(1,t,e,r);return o?o.setTo?o.setTo(s,a,h,o.alpha,!0):(o.r=s,o.g=a,o.b=h,o.color=i(s,a,h),o):{r:s,g:a,b:h,color:i(s,a,h)}}},70238:(t,e,r)=>{var i=r(40987);t.exports=function(t){var e=new i;t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,r,i){return e+e+r+r+i+i}));var r=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(r){var n=parseInt(r[1],16),o=parseInt(r[2],16),s=parseInt(r[3],16);e.setTo(n,o,s)}return e}},89528:t=>{t.exports=function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}},30100:(t,e,r)=>{var i=r(40987),n=r(90664);t.exports=function(t){var e=n(t);return new i(e.r,e.g,e.b,e.a)}},90664:t=>{t.exports=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},13699:(t,e,r)=>{var i=r(28915),n=function(t,e,r,n,o,s,a,h){void 0===a&&(a=100),void 0===h&&(h=0);var u=h/a;return{r:i(t,n,u),g:i(e,o,u),b:i(r,s,u)}};t.exports={RGBWithRGB:n,ColorWithRGB:function(t,e,r,i,o,s){return void 0===o&&(o=100),void 0===s&&(s=0),n(t.r,t.g,t.b,e,r,i,o,s)},ColorWithColor:function(t,e,r,i){return void 0===r&&(r=100),void 0===i&&(i=0),n(t.r,t.g,t.b,e.r,e.g,e.b,r,i)}}},68957:(t,e,r)=>{var i=r(40987);t.exports=function(t){return new i(t.r,t.g,t.b,t.a)}},87388:(t,e,r)=>{var i=r(40987);t.exports=function(t){var e=new i,r=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());if(r){var n=parseInt(r[1],10),o=parseInt(r[2],10),s=parseInt(r[3],10),a=void 0!==r[4]?parseFloat(r[4]):1;e.setTo(n,o,s,255*a)}return e}},87837:t=>{t.exports=function(t,e,r,i){void 0===i&&(i={h:0,s:0,v:0}),t/=255,e/=255,r/=255;var n=Math.min(t,e,r),o=Math.max(t,e,r),s=o-n,a=0,h=0===o?0:s/o,u=o;return o!==n&&(o===t?a=(e-r)/s+(e<r?6:0):o===e?a=(r-t)/s+2:o===r&&(a=(t-e)/s+4),a/=6),i.hasOwnProperty("_h")?(i._h=a,i._s=h,i._v=u):(i.h=a,i.s=h,i.v=u),i}},75723:(t,e,r)=>{var i=r(62957);t.exports=function(t,e,r,n,o){return void 0===n&&(n=255),void 0===o&&(o="#"),"#"===o?"#"+((1<<24)+(t<<16)+(e<<8)+r).toString(16).slice(1,7):"0x"+i(n)+i(t)+i(e)+i(r)}},85386:(t,e,r)=>{var i=r(30976),n=r(40987);t.exports=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=255),new n(i(t,e),i(t,e),i(t,e))}},80333:(t,e,r)=>{var i=r(70238),n=r(30100),o=r(68957),s=r(87388);t.exports=function(t){switch(typeof t){case"string":return"rgb"===t.substr(0,3).toLowerCase()?s(t):i(t);case"number":return n(t);case"object":return o(t)}}},3956:(t,e,r)=>{var i=r(40987);i.ColorSpectrum=r(92728),i.ColorToRGBA=r(91588),i.ComponentToHex=r(62957),i.GetColor=r(37589),i.GetColor32=r(1e3),i.HexStringToColor=r(70238),i.HSLToColor=r(62183),i.HSVColorWheel=r(27939),i.HSVToRGB=r(7537),i.HueToComponent=r(89528),i.IntegerToColor=r(30100),i.IntegerToRGB=r(90664),i.Interpolate=r(13699),i.ObjectToColor=r(68957),i.RandomRGB=r(85386),i.RGBStringToColor=r(87388),i.RGBToHSV=r(87837),i.RGBToString=r(75723),i.ValueToColor=r(80333),t.exports=i},27460:(t,e,r)=>{t.exports={Align:r(71926),BaseShader:r(73894),Bounds:r(58724),Canvas:r(26253),Color:r(3956),ColorMatrix:r(89422),Masks:r(69781),RGB:r(51767)}},6858:(t,e,r)=>{var i=r(83419),n=r(39429),o=new i({initialize:function(t,e,r,i,n,o){e||(e=t.sys.make.image({x:r,y:i,key:n,frame:o,add:!1})),this.bitmapMask=e,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,e,r){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,e,r)},postRenderWebGL:function(t,e,r){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,e,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});n.register("bitmapMask",(function(t,e,r,i,n){return new o(this.scene,t,e,r,i,n)})),t.exports=o},80661:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e){this.geometryMask=e,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,e,r){var i=t.gl;t.flush(),0===t.maskStack.length&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:r}),this.applyStencil(t,r,!0),t.maskCount++},applyStencil:function(t,e,r){var i=t.gl,n=this.geometryMask,o=t.maskCount,s=255;i.colorMask(!1,!1,!1,!1),r?(i.stencilFunc(i.EQUAL,o,s),i.stencilOp(i.KEEP,i.KEEP,i.INCR),o++):(i.stencilFunc(i.EQUAL,o+1,s),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),this.level=o,n.renderWebGL(t,n,e),t.flush(),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),this.invertAlpha?i.stencilFunc(i.NOTEQUAL,o,s):i.stencilFunc(i.EQUAL,o,s)},postRenderWebGL:function(t){var e=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var r=t.currentMask;if(0===t.maskStack.length)r.mask=null,e.disable(e.STENCIL_TEST);else{var i=t.maskStack[t.maskStack.length-1];i.mask.applyStencil(t,i.camera,!1),t.currentCameraMask.mask!==i.mask?(r.mask=i.mask,r.camera=i.camera):r.mask=null}},preRenderCanvas:function(t,e,r){var i=this.geometryMask;t.currentContext.save(),i.renderCanvas(t,i,r,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=i},69781:(t,e,r)=>{t.exports={BitmapMask:r(6858),GeometryMask:r(80661)}},73894:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e,r,i){e&&""!==e||(e=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),r&&""!==r||(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join("\n")),void 0===i&&(i=null),this.key=t,this.fragmentSrc=e,this.vertexSrc=r,this.uniforms=i}});t.exports=i},40366:t=>{t.exports=function(t,e){var r;if(e)"string"==typeof e?r=document.getElementById(e):"object"==typeof e&&1===e.nodeType&&(r=e);else if(t.parentElement||null===e)return t;return r||(r=document.body),r.appendChild(t),t}},83719:(t,e,r)=>{var i=r(40366);t.exports=function(t){var e=t.config;if(e.parent&&e.domCreateContainer){var r=document.createElement("div");r.style.cssText=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+e.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=r,i(r,e.parent)}}},57264:(t,e,r)=>{var i=r(25892);t.exports=function(t){if("complete"!==document.readyState&&"interactive"!==document.readyState){var e=function(){document.removeEventListener("deviceready",e,!0),document.removeEventListener("DOMContentLoaded",e,!0),window.removeEventListener("load",e,!0),t()};document.body?i.cordova?document.addEventListener("deviceready",e,!1):(document.addEventListener("DOMContentLoaded",e,!0),window.addEventListener("load",e,!0)):window.setTimeout(e,20)}else t()}},57811:t=>{t.exports=function(t){if(!t)return window.innerHeight;var e=Math.abs(window.orientation),r={w:0,h:0},i=document.createElement("div");return i.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(i),r.w=90===e?i.offsetHeight:window.innerWidth,r.h=90===e?window.innerWidth:i.offsetHeight,document.documentElement.removeChild(i),i=null,90!==Math.abs(window.orientation)?r.h:r.w}},45818:(t,e,r)=>{var i=r(13560);t.exports=function(t,e){var r=window.screen,n=!!r&&(r.orientation||r.mozOrientation||r.msOrientation);return n&&"string"==typeof n.type?n.type:"string"==typeof n?n:"number"==typeof window.orientation?0===window.orientation||180===window.orientation?i.ORIENTATION.PORTRAIT:i.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?i.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?i.ORIENTATION.LANDSCAPE:void 0:e>t?i.ORIENTATION.PORTRAIT:i.ORIENTATION.LANDSCAPE}},74403:t=>{t.exports=function(t){var e;return""!==t&&("string"==typeof t?e=document.getElementById(t):t&&1===t.nodeType&&(e=t)),e||(e=document.body),e}},56836:t=>{t.exports=function(t){var e="";try{window.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):(e=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(t){e=null}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length?e:null}},35846:t=>{t.exports=function(t){t.parentNode&&t.parentNode.removeChild(t)}},43092:(t,e,r)=>{var i=r(83419),n=r(29747),o=new i({initialize:function(){this.isRunning=!1,this.callback=n,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var t=this;this.step=function e(r){t.callback(r),t.isRunning&&(t.timeOutID=window.requestAnimationFrame(e))},this.stepTimeout=function e(){t.isRunning&&(t.timeOutID=window.setTimeout(e,t.delay)),t.callback(window.performance.now())}},start:function(t,e,r){this.isRunning||(this.callback=t,this.isSetTimeOut=e,this.delay=r,this.isRunning=!0,this.timeOutID=e?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=n}});t.exports=o},84902:(t,e,r)=>{var i={AddToDOM:r(40366),DOMContentLoaded:r(57264),GetInnerHeight:r(57811),GetScreenOrientation:r(45818),GetTarget:r(74403),ParseXML:r(56836),RemoveFromDOM:r(35846),RequestAnimationFrame:r(43092)};t.exports=i},47565:(t,e,r)=>{var i=r(83419),n=r(50792),o=r(37277),s=new i({Extends:n,initialize:function(){n.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});o.register("EventEmitter",s,"events"),t.exports=s},93055:(t,e,r)=>{t.exports={EventEmitter:r(47565)}},20122:(t,e,r)=>{var i=r(83419),n=r(72898),o=r(14811),s=new i({Extends:n,initialize:function(t,e){void 0===e&&(e=1),n.call(this,o.BARREL,t),this.amount=e}});t.exports=s},32251:(t,e,r)=>{var i=r(83419),n=r(72898),o=r(14811),s=new i({Extends:n,initialize:function(t,e,r,i,s,a,h){void 0===r&&(r=1),void 0===i&&(i=1),void 0===s&&(s=1),void 0===a&&(a=1),void 0===h&&(h=4),n.call(this,o.BLOOM,t),this.steps=h,this.offsetX=r,this.offsetY=i,this.blurStrength=s,this.strength=a,this.glcolor=[1,1,1],null!=e&&(this.color=e)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=s},9047:(t,e,r)=>{var i=r(83419),n=r(72898),o=r(14811),s=new i({Extends:n,initialize:function(t,e,r,i,s,a,h){void 0===e&&(e=0),void 0===r&&(r=2),void 0===i&&(i=2),void 0===s&&(s=1),void 0===h&&(h=4),n.call(this,o.BLUR,t),this.quality=e,this.x=r,this.y=i,this.steps=h,this.strength=s,this.glcolor=[1,1,1],null!=a&&(this.color=a)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=s},27885:(t,e,r)=>{var i=r(83419),n=r(72898),o=r(14811),s=new i({Extends:n,initialize:function(t,e,r,i,s,a,h,u){void 0===e&&(e=.5),void 0===r&&(r=1),void 0===i&&(i=.2),void 0===s&&(s=!1),void 0===a&&(a=1),void 0===h&&(h=1),void 0===u&&(u=1),n.call(this,o.BOKEH,t),this.radius=e,this.amount=r,this.contrast=i,this.isTiltShift=s,this.strength=u,this.blurX=a,this.blurY=h}});t.exports=s},12578:(t,e,r)=>{var i=r(83419),n=r(72898),o=r(14811),s=new i({Extends:n,initialize:function(t,e,r,i,s,a){void 0===e&&(e=8),void 0===s&&(s=1),void 0===a&&(a=.005),n.call(this,o.CIRCLE,t),this.scale=s,this.feather=a,this.thickness=e,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],null!=r&&(this.color=r),null!=i&&(this.backgroundColor=i)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}},backgroundColor:{get:function(){var t=this.glcolor2;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor2;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(t){this.glcolor2[3]=t}}});t.exports=s},15802:(t,e,r)=>{var i=r(83419),n=r(89422),o=r(14811),s=new i({Extends:n,initialize:function(t){n.call(this),this.type=o.COLOR_MATRIX,this.gameObject=t,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});t.exports=s},72898:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e){this.type=t,this.gameObject=e,this.active=!0},setActive:function(t){return this.active=t,this},destroy:function(){this.gameObject=null,this.active=!1}});t.exports=i},44553:(t,e,r)=>{var i=r(83419),n=r(72898),o=r(14811),s=new i({Extends:n,initialize:function(t,e,r,i){void 0===e&&(e="__WHITE"),void 0===r&&(r=.005),void 0===i&&(i=.005),n.call(this,o.DISPLACEMENT,t),this.x=r,this.y=i,this.glTexture,this.setTexture(e)},setTexture:function(t){var e=this.gameObject.scene.sys.textures.getFrame(t);return e&&(this.glTexture=e.glTexture),this}});t.exports=s},68531:(t,e,r)=>{var i=r(83419),n=r(72898),o=r(14811),s=new i({Extends:n,initialize:function(t,e,r,i,s){void 0===r&&(r=4),void 0===i&&(i=0),void 0===s&&(s=!1),n.call(this,o.GLOW,t),this.outerStrength=r,this.innerStrength=i,this.knockout=s,this.glcolor=[1,1,1,1],void 0!==e&&(this.color=e)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=s},37102:(t,e,r)=>{var i=r(83419),n=r(72898),o=r(14811),s=new i({Extends:n,initialize:function(t,e,r,i,s,a,h,u,c){void 0===i&&(i=.2),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===u&&(u=1),void 0===c&&(c=0),n.call(this,o.GRADIENT,t),this.alpha=i,this.size=c,this.fromX=s,this.fromY=a,this.toX=h,this.toY=u,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],null!=e&&(this.color1=e),null!=r&&(this.color2=r)},color1:{get:function(){var t=this.glcolor1;return(t[0]<<16)+(t[1]<<8)+(0|t[2])},set:function(t){var e=this.glcolor1;e[0]=t>>16&255,e[1]=t>>8&255,e[2]=255&t}},color2:{get:function(){var t=this.glcolor2;return(t[0]<<16)+(t[1]<<8)+(0|t[2])},set:function(t){var e=this.glcolor2;e[0]=t>>16&255,e[1]=t>>8&255,e[2]=255&t}}});t.exports=s},86886:(t,e,r)=>{var i=r(83419),n=r(72898),o=r(14811),s=new i({Extends:n,initialize:function(t,e){void 0===e&&(e=1),n.call(this,o.PIXELATE,t),this.amount=e}});t.exports=s},92322:(t,e,r)=>{var i=r(83419),n=r(72898),o=r(14811),s=new i({Extends:n,initialize:function(t,e,r,i,s,a,h,u){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=.1),void 0===s&&(s=1),void 0===h&&(h=6),void 0===u&&(u=1),n.call(this,o.SHADOW,t),this.x=e,this.y=r,this.decay=i,this.power=s,this.glcolor=[0,0,0,1],this.samples=h,this.intensity=u,void 0!==a&&(this.color=a)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=s},39563:(t,e,r)=>{var i=r(83419),n=r(72898),o=r(14811),s=new i({Extends:n,initialize:function(t,e,r,i,s){void 0===e&&(e=.5),void 0===r&&(r=.5),void 0===i&&(i=3),void 0===s&&(s=!1),n.call(this,o.SHINE,t),this.speed=e,this.lineWidth=r,this.gradient=i,this.reveal=s}});t.exports=s},56448:(t,e,r)=>{var i=r(83419),n=r(72898),o=r(14811),s=new i({Extends:n,initialize:function(t,e,r,i,s){void 0===e&&(e=.5),void 0===r&&(r=.5),void 0===i&&(i=.5),void 0===s&&(s=.5),n.call(this,o.VIGNETTE,t),this.x=e,this.y=r,this.radius=i,this.strength=s}});t.exports=s},38433:(t,e,r)=>{var i=r(83419),n=r(72898),o=r(14811),s=new i({Extends:n,initialize:function(t,e,r,i,s){void 0===e&&(e=.1),void 0===r&&(r=0),void 0===i&&(i=0),void 0===s&&(s=!1),n.call(this,o.WIPE,t),this.progress=0,this.wipeWidth=e,this.direction=r,this.axis=i,this.reveal=s}});t.exports=s},14811:t=>{t.exports={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19}},66064:(t,e,r)=>{var i=r(79291),n=r(14811),o={Barrel:r(20122),Controller:r(72898),Bloom:r(32251),Blur:r(9047),Bokeh:r(27885),Circle:r(12578),ColorMatrix:r(15802),Displacement:r(44553),Glow:r(68531),Gradient:r(37102),Pixelate:r(86886),Shadow:r(92322),Shine:r(39563),Vignette:r(56448),Wipe:r(38433)};o=i(!1,o,n),t.exports=o},25305:(t,e,r)=>{var i=r(10312),n=r(23568);t.exports=function(t,e,r){e.x=n(r,"x",0),e.y=n(r,"y",0),e.depth=n(r,"depth",0),e.flipX=n(r,"flipX",!1),e.flipY=n(r,"flipY",!1);var o=n(r,"scale",null);"number"==typeof o?e.setScale(o):null!==o&&(e.scaleX=n(o,"x",1),e.scaleY=n(o,"y",1));var s=n(r,"scrollFactor",null);"number"==typeof s?e.setScrollFactor(s):null!==s&&(e.scrollFactorX=n(s,"x",1),e.scrollFactorY=n(s,"y",1)),e.rotation=n(r,"rotation",0);var a=n(r,"angle",null);null!==a&&(e.angle=a),e.alpha=n(r,"alpha",1);var h=n(r,"origin",null);if("number"==typeof h)e.setOrigin(h);else if(null!==h){var u=n(h,"x",.5),c=n(h,"y",.5);e.setOrigin(u,c)}return e.blendMode=n(r,"blendMode",i.NORMAL),e.visible=n(r,"visible",!0),n(r,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},13059:(t,e,r)=>{var i=r(23568);t.exports=function(t,e){var r=i(e,"anims",null);if(null===r)return t;if("string"==typeof r)t.anims.play(r);else if("object"==typeof r){var n=t.anims,o=i(r,"key",void 0);if(o){var s=i(r,"startFrame",void 0),a=i(r,"delay",0),h=i(r,"repeat",0),u=i(r,"repeatDelay",0),c=i(r,"yoyo",!1),l=i(r,"play",!1),f=i(r,"delayedPlay",0),p={key:o,delay:a,repeat:h,repeatDelay:u,yoyo:c,startFrame:s};l?n.play(p):f>0?n.playAfterDelay(p,f):n.load(p)}}return t}},8050:(t,e,r)=>{var i=r(83419),n=r(73162),o=r(37277),s=r(51708),a=r(44594),h=r(19186),u=new i({Extends:n,initialize:function(t){n.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.events.once(a.DESTROY,this.destroy,this)},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.parentContainer&&t.parentContainer.remove(t),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(s.ADDED_TO_SCENE,t,this.scene),this.events.emit(a.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(s.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(a.REMOVED_FROM_SCENE,t,this.scene)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(h(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},shutdown:function(){for(var t=this.list;t.length;)t[0].destroy(!0);this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});o.register("DisplayList",u,"displayList"),t.exports=u},95643:(t,e,r)=>{var i=r(83419),n=r(53774),o=r(45893),s=r(50792),a=r(51708),h=r(44594),u=new i({Extends:s,initialize:function(t,e){s.call(this),this.scene=t,this.displayList=null,this.type=e,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new o(this)),this},setData:function(t,e){return this.data||(this.data=new o(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new o(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new o(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new o(this)),this.data.get(t)},setInteractive:function(t,e,r){return this.scene.sys.input.enable(this,t,e,r),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return n(this)},willRender:function(t){return!(this.displayList&&this.displayList.active&&!this.displayList.willRender(t)||u.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,r=[];e&&(r.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return this.displayList?r.unshift(this.displayList.getIndex(t)):r.unshift(this.scene.sys.displayList.getIndex(t)),r},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),t.events.emit(h.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t&&t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(h.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(a.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});u.RENDER_MASK=15,t.exports=u},44603:(t,e,r)=>{var i=r(83419),n=r(37277),o=r(44594),s=new i({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});s.register=function(t,e){s.prototype.hasOwnProperty(t)||(s.prototype[t]=e)},s.remove=function(t){s.prototype.hasOwnProperty(t)&&delete s.prototype[t]},n.register("GameObjectCreator",s,"make"),t.exports=s},39429:(t,e,r)=>{var i=r(83419),n=r(37277),o=r(44594),s=new i({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});s.register=function(t,e){s.prototype.hasOwnProperty(t)||(s.prototype[t]=e)},s.remove=function(t){s.prototype.hasOwnProperty(t)&&delete s.prototype[t]},n.register("GameObjectFactory",s,"add"),t.exports=s},91296:(t,e,r)=>{var i=r(61340),n=new i,o=new i,s=new i,a={camera:n,sprite:o,calc:s};t.exports=function(t,e,r){var i=n,h=o,u=s;return h.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),i.copyFrom(e.matrix),r?(i.multiplyWithOffset(r,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),h.e=t.x,h.f=t.y):(h.e-=e.scrollX*t.scrollFactorX,h.f-=e.scrollY*t.scrollFactorY),i.multiply(h,u),a}},45027:(t,e,r)=>{var i=r(83419),n=r(25774),o=r(37277),s=r(44594),a=new i({Extends:n,initialize:function(t){n.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.start,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(s.PRE_UPDATE,this.update,this),t.on(s.UPDATE,this.sceneUpdate,this),t.once(s.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(t,e){for(var r=this._active,i=r.length,n=0;n<i;n++){var o=r[n];o.active&&o.preUpdate.call(o,t,e)}},shutdown:function(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var e=this.systems.events;e.off(s.PRE_UPDATE,this.update,this),e.off(s.UPDATE,this.sceneUpdate,this),e.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});o.register("UpdateList",a,"updateList"),t.exports=a},3217:t=>{t.exports=function(t,e,r,i,n,o,s,a,h,u,c,l,f,p,d){var v=r.x-e.displayOriginX+n,y=r.y-e.displayOriginY+o,g=v+r.w,m=y+r.h,x=s.getXRound(v,y,a),b=s.getYRound(v,y,a),w=s.getXRound(v,m,a),E=s.getYRound(v,m,a),T=s.getXRound(g,m,a),S=s.getYRound(g,m,a),_=s.getXRound(g,y,a),O=s.getYRound(g,y,a);t.batchQuad(e,x,b,w,E,T,S,_,O,i.u0,i.v0,i.u1,i.v1,h,u,c,l,f,p,d)}},53048:t=>{t.exports=function(t,e,r,i){if(void 0===r&&(r=!1),void 0===i)return{local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var n,o,s,a=t.text,h=a.length,u=t.maxWidth,c=t.wordWrapCharCode,l=Number.MAX_VALUE,f=Number.MAX_VALUE,p=0,d=0,v=t.fontData.chars,y=t.fontData.lineHeight,g=t.letterSpacing,m=t.lineSpacing,x=0,b=0,w=0,E=null,T=t._align,S=0,_=0,O=t.fontSize/t.fontData.size,P=O*t.scaleX,M=O*t.scaleY,A=null,L=0,C=[],R=Number.MAX_VALUE,k=0,F=0,I=0,D=[],j=[],B=null;if(u>0){for(n=0;n<h;n++)if(10!==(w=a.charCodeAt(n))){if(E=v[w]){if(null!==A)var N=E.kerning[L];w===c?null!==B&&(D.push({word:B.word,i:B.i,x:B.x*P,y:B.y*M,w:B.w*P,h:B.h*M,cr:!1}),B=null):(null===B&&(B={word:"",i:n,x,y:b,w:0,h:y,cr:!1}),B.word=B.word.concat(a[n]),B.w+=E.xOffset+E.xAdvance+(void 0!==N?N:0)),x+=E.xAdvance+g,A=E,L=w}}else null!==B&&(D.push({word:B.word,i:B.i,x:B.x*P,y:B.y*M,w:B.w*P,h:B.h*M,cr:!0}),B=null),x=0,b+=y+m,A=null;var G;null!==B&&D.push({word:B.word,i:B.i,x:B.x*P,y:B.y*M,w:B.w*P,h:B.h*M,cr:!1}),x=0,b=0,A=null,L=0;var U=0,Y=[];for(n=0;n<D.length;n++){var z=D[n],X=z.x,V=z.x+z.w;G&&(U=X-(X-(G.x+G.w)+G.w),G=null),X-U>u||V-U>u?(Y.push(z.i-1),z.cr?(Y.push(z.i+z.word.length),U=0,G=null):G=z):z.cr&&(Y.push(z.i+z.word.length),U=0,G=null)}for(n=Y.length-1;n>=0;n--)o=a,s=Y[n],a=o.substr(0,s)+"\n"+o.substr(s+1);i.wrappedText=a,h=a.length,D=[],B=null}var W=0;for(n=0;n<h;n++)if(10!==(w=a.charCodeAt(n))){if(E=v[w]){if(S=x,_=b,null!==A){var H=E.kerning[L];S+=void 0!==H?H:0}l>S&&(l=S),f>_&&(f=_);var q=S+E.xAdvance,K=_+y;p<q&&(p=q),d<K&&(d=K);var Z=E.xOffset+E.xAdvance+(void 0!==H?H:0);w===c?null!==B&&(D.push({word:B.word,i:B.i,x:B.x*P,y:B.y*M,w:B.w*P,h:B.h*M}),B=null):(null===B&&(B={word:"",i:W,x,y:b,w:0,h:y}),B.word=B.word.concat(a[n]),B.w+=Z),j.push({i:W,idx:n,char:a[n],code:w,x:(E.xOffset+S)*O,y:(E.yOffset+b)*O,w:E.width*O,h:E.height*O,t:b*O,r:q*O,b:y*O,line:F,glyph:E}),x+=E.xAdvance+g+(void 0!==H?H:0),A=E,L=w,I=q*O,W++}}else null!==B&&(D.push({word:B.word,i:B.i,x:B.x*P,y:B.y*M,w:B.w*P,h:B.h*M}),B=null),x=0,b+=y+m,A=null,C[F]=I,I>k&&(k=I),I<R&&(R=I),F++,I=0;if(null!==B&&D.push({word:B.word,i:B.i,x:B.x*P,y:B.y*M,w:B.w*P,h:B.h*M}),C[F]=I,I>k&&(k=I),I<R&&(R=I),T>0)for(var J=0;J<j.length;J++){var Q=j[J];if(1===T){var $=(k-C[Q.line])/2;Q.x+=$,Q.r+=$}else if(2===T){var tt=k-C[Q.line];Q.x+=tt,Q.r+=tt}}var et=i.local,rt=i.global,it=i.lines;return et.x=l*O,et.y=f*O,et.width=p*O,et.height=d*O,rt.x=t.x-t._displayOriginX+l*P,rt.y=t.y-t._displayOriginY+f*M,rt.width=p*P,rt.height=d*M,it.shortest=R,it.longest=k,it.lengths=C,e&&(et.x=Math.ceil(et.x),et.y=Math.ceil(et.y),et.width=Math.ceil(et.width),et.height=Math.ceil(et.height),rt.x=Math.ceil(rt.x),rt.y=Math.ceil(rt.y),rt.width=Math.ceil(rt.width),rt.height=Math.ceil(rt.height),it.shortest=Math.ceil(R),it.longest=Math.ceil(k)),r&&(t._displayOriginX=t.originX*et.width,t._displayOriginY=t.originY*et.height,rt.x=t.x-t._displayOriginX*t.scaleX,rt.y=t.y-t._displayOriginY*t.scaleY,e&&(rt.x=Math.ceil(rt.x),rt.y=Math.ceil(rt.y))),i.words=D,i.characters=j,i.lines.height=y,i.scale=O,i.scaleX=t.scaleX,i.scaleY=t.scaleY,i}},61327:(t,e,r)=>{var i=r(21859);t.exports=function(t,e,r,n,o,s,a){var h=t.sys.textures.get(r),u=h.get(n),c=t.sys.cache.xml.get(o);if(u&&c){var l=i(c,u,s,a,h);return t.sys.cache.bitmapFont.add(e,{data:l,texture:r,frame:n,fromAtlas:!0}),!0}return!1}},6925:(t,e,r)=>{var i=r(35154);t.exports=function(t,e){var r=e.width,n=e.height,o=Math.floor(r/2),s=Math.floor(n/2),a=i(e,"chars","");if(""!==a){var h=i(e,"image",""),u=t.sys.textures.getFrame(h),c=u.cutX,l=u.cutY,f=u.source.width,p=u.source.height,d=i(e,"offset.x",0),v=i(e,"offset.y",0),y=i(e,"spacing.x",0),g=i(e,"spacing.y",0),m=i(e,"lineSpacing",0),x=i(e,"charsPerRow",null);null===x&&(x=f/r)>a.length&&(x=a.length);for(var b=d,w=v,E={retroFont:!0,font:h,size:r,lineHeight:n+m,chars:{}},T=0,S=0;S<a.length;S++){var _=a.charCodeAt(S),O=(c+b)/f,P=(l+w)/p,M=(c+b+r)/f,A=(l+w+n)/p;E.chars[_]={x:b,y:w,width:r,height:n,centerX:o,centerY:s,xOffset:0,yOffset:0,xAdvance:r,data:{},kerning:{},u0:O,v0:P,u1:M,v1:A},++T===x?(T=0,b=d,w+=n+g):b+=r+y}return{data:E,frame:null,texture:h}}}},21859:t=>{function e(t,e){return parseInt(t.getAttribute(e),10)}t.exports=function(t,r,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0);var s=r.cutX,a=r.cutY,h=r.source.width,u=r.source.height,c=r.sourceIndex,l={},f=t.getElementsByTagName("info")[0],p=t.getElementsByTagName("common")[0];l.font=f.getAttribute("face"),l.size=e(f,"size"),l.lineHeight=e(p,"lineHeight")+n,l.chars={};var d=t.getElementsByTagName("char"),v=void 0!==r&&r.trimmed;if(v)var y=r.height,g=r.width;for(var m=0;m<d.length;m++){var x=d[m],b=e(x,"id"),w=String.fromCharCode(b),E=e(x,"x"),T=e(x,"y"),S=e(x,"width"),_=e(x,"height");v&&(E<g&&(g=E),T<y&&(y=T)),v&&0!==y&&0!==g&&(E-=r.x,T-=r.y);var O=(s+E)/h,P=(a+T)/u,M=(s+E+S)/h,A=(a+T+_)/u;if(l.chars[b]={x:E,y:T,width:S,height:_,centerX:Math.floor(S/2),centerY:Math.floor(_/2),xOffset:e(x,"xoffset"),yOffset:e(x,"yoffset"),xAdvance:e(x,"xadvance")+i,data:{},kerning:{},u0:O,v0:P,u1:M,v1:A},o&&0!==S&&0!==_){var L=o.add(w,c,E,T,S,_);L&&L.setUVs(S,_,O,P,M,A)}}var C=t.getElementsByTagName("kerning");for(m=0;m<C.length;m++){var R=C[m],k=e(R,"first"),F=e(R,"second"),I=e(R,"amount");l.chars[F].kerning[k]=I}return l}},196:(t,e,r)=>{var i=r(87662),n=r(79291),o={Parse:r(6925)};o=n(!1,o,i),t.exports=o},87662:t=>{t.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},2638:(t,e,r)=>{var i=r(22186),n=r(83419),o=r(12310),s=new n({Extends:i,Mixins:[o],initialize:function(t,e,r,n,o,s,a){i.call(this,t,e,r,n,o,s,a),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(t,e){return this.cropWidth=t,this.cropHeight=e,this},setDisplayCallback:function(t){return this.displayCallback=t,this},setScrollX:function(t){return this.scrollX=t,this},setScrollY:function(t){return this.scrollY=t,this}});t.exports=s},86741:(t,e,r)=>{var i=r(20926);t.exports=function(t,e,r,n){var o=e._text,s=o.length,a=t.currentContext;if(0!==s&&i(t,a,e,r,n)){r.addToRenderList(e);var h=e.fromAtlas?e.frame:e.texture.frames.__BASE,u=e.displayCallback,c=e.callbackData,l=e.fontData.chars,f=e.fontData.lineHeight,p=e._letterSpacing,d=0,v=0,y=0,g=null,m=0,x=0,b=0,w=0,E=0,T=0,S=null,_=0,O=e.frame.source.image,P=h.cutX,M=h.cutY,A=0,L=0,C=e._fontSize/e.fontData.size,R=e._align,k=0,F=0;e.getTextBounds(!1);var I=e._bounds.lines;1===R?F=(I.longest-I.lengths[0])/2:2===R&&(F=I.longest-I.lengths[0]),a.translate(-e.displayOriginX,-e.displayOriginY);var D=r.roundPixels;e.cropWidth>0&&e.cropHeight>0&&(a.beginPath(),a.rect(0,0,e.cropWidth,e.cropHeight),a.clip());for(var j=0;j<s;j++)if(L=C,A=0,10!==(y=o.charCodeAt(j))){if(g=l[y]){if(m=P+g.x,x=M+g.y,b=g.width,w=g.height,E=g.xOffset+d-e.scrollX,T=g.yOffset+v-e.scrollY,null!==S){var B=g.kerning[_];E+=void 0!==B?B:0}if(u){c.index=j,c.charCode=y,c.x=E,c.y=T,c.scale=L,c.rotation=A,c.data=g.data;var N=u(c);E=N.x,T=N.y,L=N.scale,A=N.rotation}E*=L,T*=L,E+=F,d+=g.xAdvance+p+(void 0!==B?B:0),S=g,_=y,0!==b&&0!==w&&32!==y&&(D&&(E=Math.round(E),T=Math.round(T)),a.save(),a.translate(E,T),a.rotate(A),a.scale(L,L),a.drawImage(O,m,x,b,w,0,0,b,w),a.restore())}}else k++,1===R?F=(I.longest-I.lengths[k])/2:2===R&&(F=I.longest-I.lengths[k]),d=0,v+=f,S=null;a.restore()}}},11164:(t,e,r)=>{var i=r(2638),n=r(25305),o=r(44603),s=r(23568);o.register("dynamicBitmapText",(function(t,e){void 0===t&&(t={});var r=s(t,"font",""),o=s(t,"text",""),a=s(t,"size",!1),h=new i(this.scene,0,0,r,o,a);return void 0!==e&&(t.add=e),n(this.scene,h,t),h}))},72566:(t,e,r)=>{var i=r(2638);r(39429).register("dynamicBitmapText",(function(t,e,r,n,o){return this.displayList.add(new i(this.scene,t,e,r,n,o))}))},12310:(t,e,r)=>{var i,n,o=r(29747);i=r(73482),n=r(86741),t.exports={renderWebGL:i,renderCanvas:n}},73482:(t,e,r)=>{var i=r(91296),n=r(61340),o=r(70554),s=new n;t.exports=function(t,e,r,n){var a=e.text,h=a.length;if(0!==h){r.addToRenderList(e);var u=t.pipelines.set(e.pipeline,e),c=i(e,r,n);t.pipelines.preBatch(e);var l=c.sprite,f=c.calc,p=s,d=e.cropWidth>0||e.cropHeight>0;d&&(u.flush(),t.pushScissor(f.tx,f.ty,e.cropWidth*f.scaleX,e.cropHeight*f.scaleY));var v,y,g=e.frame.glTexture,m=e.tintFill,x=o.getTintAppendFloatAlpha(e.tintTopLeft,r.alpha*e._alphaTL),b=o.getTintAppendFloatAlpha(e.tintTopRight,r.alpha*e._alphaTR),w=o.getTintAppendFloatAlpha(e.tintBottomLeft,r.alpha*e._alphaBL),E=o.getTintAppendFloatAlpha(e.tintBottomRight,r.alpha*e._alphaBR),T=u.setGameObject(e),S=0,_=0,O=0,P=0,M=e.letterSpacing,A=0,L=0,C=e.scrollX,R=e.scrollY,k=e.fontData,F=k.chars,I=k.lineHeight,D=e.fontSize/k.size,j=0,B=e._align,N=0,G=0,U=e.getTextBounds(!1);e.maxWidth>0&&(h=(a=U.wrappedText).length);var Y=e._bounds.lines;1===B?G=(Y.longest-Y.lengths[0])/2:2===B&&(G=Y.longest-Y.lengths[0]);for(var z=r.roundPixels,X=e.displayCallback,V=e.callbackData,W=0;W<h;W++)if(10!==(O=a.charCodeAt(W))){if(v=F[O]){A=v.width,L=v.height;var H=v.xOffset+S-C,q=v.yOffset+_-R;if(null!==y){var K=v.kerning[P];H+=void 0!==K?K:0}if(S+=v.xAdvance+M,y=v,P=O,0!==A&&0!==L&&32!==O){if(D=e.fontSize/e.fontData.size,j=0,X){V.color=0,V.tint.topLeft=x,V.tint.topRight=b,V.tint.bottomLeft=w,V.tint.bottomRight=E,V.index=W,V.charCode=O,V.x=H,V.y=q,V.scale=D,V.rotation=j,V.data=v.data;var Z=X(V);H=Z.x,q=Z.y,D=Z.scale,j=Z.rotation,Z.color?(x=Z.color,b=Z.color,w=Z.color,E=Z.color):(x=Z.tint.topLeft,b=Z.tint.topRight,w=Z.tint.bottomLeft,E=Z.tint.bottomRight),x=o.getTintAppendFloatAlpha(x,r.alpha*e._alphaTL),b=o.getTintAppendFloatAlpha(b,r.alpha*e._alphaTR),w=o.getTintAppendFloatAlpha(w,r.alpha*e._alphaBL),E=o.getTintAppendFloatAlpha(E,r.alpha*e._alphaBR)}H*=D,q*=D,H-=e.displayOriginX,q-=e.displayOriginY,H+=G,p.applyITRS(H,q,j,D,D),f.multiply(p,l);var J=v.u0,Q=v.v0,$=v.u1,tt=v.v1,et=A,rt=L,it=l.e,nt=l.f,ot=rt*l.c+l.e,st=rt*l.d+l.f,at=et*l.a+rt*l.c+l.e,ht=et*l.b+rt*l.d+l.f,ut=et*l.a+l.e,ct=et*l.b+l.f;z&&(it=Math.round(it),nt=Math.round(nt),ot=Math.round(ot),st=Math.round(st),at=Math.round(at),ht=Math.round(ht),ut=Math.round(ut),ct=Math.round(ct)),u.shouldFlush(6)&&(u.flush(),T=u.setGameObject(e)),u.batchQuad(e,it,nt,ot,st,at,ht,ut,ct,J,Q,$,tt,x,b,w,E,m,g,T)}}}else N++,1===B?G=(Y.longest-Y.lengths[N])/2:2===B&&(G=Y.longest-Y.lengths[N]),S=0,_+=I,y=null;d&&(u.flush(),t.popScissor()),t.pipelines.postBatch(e)}}},22186:(t,e,r)=>{var i=r(83419),n=r(45319),o=r(31401),s=r(95643),a=r(53048),h=r(61327),u=r(21859),c=r(87841),l=r(18658),f=new i({Extends:s,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Texture,o.Tint,o.Transform,o.Visible,l],initialize:function(t,e,r,i,n,o,h){void 0===n&&(n=""),void 0===h&&(h=0),s.call(this,t,"BitmapText"),this.font=i;var u=this.scene.sys.cache.bitmapFont.get(i);u||console.warn("Invalid BitmapText key: "+i),this.fontData=u.data,this._text="",this._fontSize=o||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=h,this._bounds=a(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=u.fromAtlas,this.setTexture(u.texture,u.frame),this.setPosition(e,r),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(n)},setLeftAlign:function(){return this._align=f.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=f.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=f.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setLineSpacing:function(t){return void 0===t&&(t=0),this.lineSpacing=t,this},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(t,e,r,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=.5),this.dropShadowX=t,this.dropShadowY=e,this.dropShadowColor=r,this.dropShadowAlpha=i,this},setCharacterTint:function(t,e,r,i,o,s,a){void 0===t&&(t=0),void 0===e&&(e=1),void 0===r&&(r=!1),void 0===i&&(i=-1),void 0===o&&(o=i,s=i,a=i);var h=this.text.length;-1===e&&(e=h),t<0&&(t=h+t),t=n(t,0,h-1);for(var u=n(t+e,t,h),c=this.charColors,l=t;l<u;l++){var f=c[l];if(-1===i)c[l]=null;else{var p=r?1:0;f?(f.tintEffect=p,f.tintTL=i,f.tintTR=o,f.tintBL=s,f.tintBR=a):c[l]={tintEffect:p,tintTL:i,tintTR:o,tintBL:s,tintBR:a}}}return this},setWordTint:function(t,e,r,i,n,o,s){void 0===e&&(e=1);for(var a=this.getTextBounds().words,h="number"==typeof t,u=0,c=0;c<a.length;c++){var l=a[c];if((h&&c===t||!h&&l.word===t)&&(this.setCharacterTint(l.i,l.word.length,r,i,n,o,s),++u===e))return this}return this},getTextBounds:function(t){var e=this._bounds;return(this._dirty||t||this.scaleX!==e.scaleX||this.scaleY!==e.scaleY)&&(a(this,t,!0,e),this._dirty=!1),e},getCharacterAt:function(t,e,r){for(var i=this.getLocalPoint(t,e,null,r),n=this.getTextBounds().characters,o=new c,s=0;s<n.length;s++){var a=n[s];if(o.setTo(a.x,a.t,a.r-a.x,a.b),o.contains(i.x,i.y))return a}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(t,e,r){void 0===e&&(e=this._fontSize),void 0===r&&(r=this._align);var i=this.scene.sys.cache.bitmapFont.get(t);return i&&(this.font=t,this.fontData=i.data,this._fontSize=e,this._align=r,this.fromAtlas=!0===i.fromAtlas,this.setTexture(i.texture,i.frame),a(this,!1,!0,this._bounds)),this},setMaxWidth:function(t,e){return this._maxWidth=t,this._dirty=!0,void 0!==e&&(this.wordWrapCharCode=e),this},align:{set:function(t){this._align=t,this._dirty=!0},get:function(){return this._align}},text:{set:function(t){this.setText(t)},get:function(){return this._text}},fontSize:{set:function(t){this._fontSize=t,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(t){this._letterSpacing=t,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(t){this._lineSpacing=t,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(t){this._maxWidth=t,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var t=o.ToJSON(this),e={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return t.data=e,t},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});f.ALIGN_LEFT=0,f.ALIGN_CENTER=1,f.ALIGN_RIGHT=2,f.ParseFromAtlas=h,f.ParseXMLBitmapFont=u,t.exports=f},37289:(t,e,r)=>{var i=r(20926);t.exports=function(t,e,r,n){var o=e._text,s=o.length,a=t.currentContext;if(0!==s&&i(t,a,e,r,n)){r.addToRenderList(e);var h=e.fromAtlas?e.frame:e.texture.frames.__BASE,u=e.fontData.chars,c=e.fontData.lineHeight,l=e._letterSpacing,f=e._lineSpacing,p=0,d=0,v=0,y=null,g=0,m=0,x=0,b=0,w=0,E=0,T=null,S=0,_=h.source.image,O=h.cutX,P=h.cutY,M=e._fontSize/e.fontData.size,A=e._align,L=0,C=0,R=e.getTextBounds(!1);e.maxWidth>0&&(s=(o=R.wrappedText).length);var k=e._bounds.lines;1===A?C=(k.longest-k.lengths[0])/2:2===A&&(C=k.longest-k.lengths[0]),a.translate(-e.displayOriginX,-e.displayOriginY);for(var F=r.roundPixels,I=0;I<s;I++)if(10!==(v=o.charCodeAt(I))){if(y=u[v]){if(g=O+y.x,m=P+y.y,x=y.width,b=y.height,w=y.xOffset+p,E=y.yOffset+d,null!==T){var D=y.kerning[S];w+=void 0!==D?D:0}w*=M,E*=M,w+=C,p+=y.xAdvance+l+(void 0!==D?D:0),T=y,S=v,0!==x&&0!==b&&32!==v&&(F&&(w=Math.round(w),E=Math.round(E)),a.save(),a.translate(w,E),a.scale(M,M),a.drawImage(_,g,m,x,b,0,0,x,b),a.restore())}}else L++,1===A?C=(k.longest-k.lengths[L])/2:2===A&&(C=k.longest-k.lengths[L]),p=0,d+=c+f,T=null;a.restore()}}},57336:(t,e,r)=>{var i=r(22186),n=r(25305),o=r(44603),s=r(23568),a=r(35154);o.register("bitmapText",(function(t,e){void 0===t&&(t={});var r=a(t,"font",""),o=s(t,"text",""),h=s(t,"size",!1),u=a(t,"align",0),c=new i(this.scene,0,0,r,o,h,u);return void 0!==e&&(t.add=e),n(this.scene,c,t),c}))},34914:(t,e,r)=>{var i=r(22186);r(39429).register("bitmapText",(function(t,e,r,n,o,s){return this.displayList.add(new i(this.scene,t,e,r,n,o,s))}))},18658:(t,e,r)=>{var i,n,o=r(29747);i=r(33590),n=r(37289),t.exports={renderWebGL:i,renderCanvas:n}},33590:(t,e,r)=>{var i=r(3217),n=r(91296),o=r(70554);t.exports=function(t,e,r,s){if(0!==e._text.length){r.addToRenderList(e);var a=t.pipelines.set(e.pipeline,e),h=n(e,r,s).calc;t.pipelines.preBatch(e);var u,c,l,f=r.roundPixels,p=r.alpha,d=e.charColors,v=e.tintFill,y=o.getTintAppendFloatAlpha,g=y(e.tintTopLeft,p*e._alphaTL),m=y(e.tintTopRight,p*e._alphaTR),x=y(e.tintBottomLeft,p*e._alphaBL),b=y(e.tintBottomRight,p*e._alphaBR),w=e.frame.glTexture,E=a.setGameObject(e),T=e.getTextBounds(!1).characters,S=e.dropShadowX,_=e.dropShadowY;if(0!==S||0!==_){var O=e.dropShadowColor,P=e.dropShadowAlpha,M=y(O,p*P*e._alphaTL),A=y(O,p*P*e._alphaTR),L=y(O,p*P*e._alphaBL),C=y(O,p*P*e._alphaBR);for(u=0;u<T.length;u++)l=(c=T[u]).glyph,32!==c.code&&0!==l.width&&0!==l.height&&i(a,e,c,l,S,_,h,f,M,A,L,C,1,w,E)}for(u=0;u<T.length;u++)if(l=(c=T[u]).glyph,32!==c.code&&0!==l.width&&0!==l.height)if(a.shouldFlush(6)&&(a.flush(),E=a.setGameObject(e)),d[c.i]){var R=d[c.i],k=R.tintEffect,F=y(R.tintTL,p*e._alphaTL),I=y(R.tintTR,p*e._alphaTR),D=y(R.tintBL,p*e._alphaBL),j=y(R.tintBR,p*e._alphaBR);i(a,e,c,l,0,0,h,f,F,I,D,j,k,w,E)}else i(a,e,c,l,0,0,h,f,g,m,x,b,v,w,E);t.pipelines.postBatch(e)}}},6107:(t,e,r)=>{var i=r(48011),n=r(46590),o=r(83419),s=r(31401),a=r(4327),h=r(95643),u=r(73162),c=new o({Extends:h,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Size,s.Texture,s.Transform,s.Visible,i],initialize:function(t,e,r,i,n){h.call(this,t,"Blitter"),this.setTexture(i,n),this.setPosition(e,r),this.initPipeline(),this.initPostPipeline(),this.children=new u,this.renderList=[],this.dirty=!1},create:function(t,e,r,i,o){void 0===i&&(i=!0),void 0===o&&(o=this.children.length),void 0===r?r=this.frame:r instanceof a||(r=this.texture.get(r));var s=new n(this,t,e,r,i);return this.children.addAt(s,o,!1),this.dirty=!0,s},createFromCallback:function(t,e,r,i){for(var n=this.createMultiple(e,r,i),o=0;o<n.length;o++){var s=n[o];t.call(this,s,o)}return n},createMultiple:function(t,e,r){void 0===e&&(e=this.frame.name),void 0===r&&(r=!0),Array.isArray(e)||(e=[e]);var i=[],n=this;return e.forEach((function(e){for(var o=0;o<t;o++)i.push(n.create(0,0,e,r))})),i},childCanRender:function(t){return t.visible&&t.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});t.exports=c},72396:t=>{t.exports=function(t,e,r,i){var n=e.getRenderList();if(0!==n.length){var o=t.currentContext,s=r.alpha*e.alpha;if(0!==s){r.addToRenderList(e),o.globalCompositeOperation=t.blendModes[e.blendMode],o.imageSmoothingEnabled=!e.frame.source.scaleMode;var a=e.x-r.scrollX*e.scrollFactorX,h=e.y-r.scrollY*e.scrollFactorY;o.save(),i&&i.copyToContext(o);for(var u=r.roundPixels,c=0;c<n.length;c++){var l=n[c],f=l.flipX||l.flipY,p=l.frame,d=p.canvasData,v=p.x,y=p.y,g=1,m=1,x=l.alpha*s;0!==x&&(o.globalAlpha=x,f?(l.flipX&&(g=-1,v-=d.width),l.flipY&&(m=-1,y-=d.height),d.width>0&&d.height>0&&(o.save(),o.translate(l.x+a,l.y+h),o.scale(g,m),o.drawImage(p.source.image,d.x,d.y,d.width,d.height,v,y,d.width,d.height),o.restore())):(u&&(v=Math.round(v),y=Math.round(y)),d.width>0&&d.height>0&&o.drawImage(p.source.image,d.x,d.y,d.width,d.height,v+l.x+a,y+l.y+h,d.width,d.height)))}o.restore()}}}},9403:(t,e,r)=>{var i=r(6107),n=r(25305),o=r(44603),s=r(23568);o.register("blitter",(function(t,e){void 0===t&&(t={});var r=s(t,"key",null),o=s(t,"frame",null),a=new i(this.scene,0,0,r,o);return void 0!==e&&(t.add=e),n(this.scene,a,t),a}))},12709:(t,e,r)=>{var i=r(6107);r(39429).register("blitter",(function(t,e,r,n){return this.displayList.add(new i(this.scene,t,e,r,n))}))},48011:(t,e,r)=>{var i,n,o=r(29747);i=r(99485),n=r(72396),t.exports={renderWebGL:i,renderCanvas:n}},99485:(t,e,r)=>{var i=r(61340),n=r(70554),o=new i;t.exports=function(t,e,r,i){var s=e.getRenderList(),a=r.alpha*e.alpha;if(0!==s.length&&0!==a){r.addToRenderList(e);var h=t.pipelines.set(this.pipeline,e),u=r.scrollX*e.scrollFactorX,c=r.scrollY*e.scrollFactorY,l=o.copyFrom(r.matrix);i&&(l.multiplyWithOffset(i,-u,-c),u=0,c=0);var f=e.x-u,p=e.y-c,d=-1;t.pipelines.preBatch(e);for(var v=0;v<s.length;v++){var y=s[v],g=y.frame,m=y.alpha*a;if(0!==m){var x=g.width,b=g.height,w=f+y.x+g.x,E=p+y.y+g.y;y.flipX&&(x*=-1,w+=g.width),y.flipY&&(b*=-1,E+=g.height);var T=l.setQuad(w,E,w+x,E+b),S=n.getTintAppendFloatAlpha(y.tint,m);if(g.sourceIndex!==d){var _=h.setGameObject(e,g);d=g.sourceIndex}h.batchQuad(e,T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],g.u0,g.v0,g.u1,g.v1,S,S,S,S,!1,g.glTexture,_)&&(d=-1)}}t.pipelines.postBatch(e)}}},46590:(t,e,r)=>{var i=r(83419),n=r(4327),o=new i({initialize:function(t,e,r,i,n){this.parent=t,this.x=e,this.y=r,this.frame=i,this.data={},this.tint=16777215,this._visible=n,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(t){return void 0===t?this.frame=this.parent.frame:t instanceof n&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(t,e,r){return this.x=t,this.y=e,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function(t,e){return this.x=t,this.y=e,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},setVisible:function(t){return this.visible=t,this},setAlpha:function(t){return this.alpha=t,this},setTint:function(t){return this.tint=t,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function(){return this._alpha},set:function(t){this.parent.dirty|=this._alpha>0!=t>0,this._alpha=t}}});t.exports=o},16005:(t,e,r)=>{var i=r(45319),n={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,e,r,n){return void 0===t&&(t=1),void 0===e?this.alpha=t:(this._alphaTL=i(t,0,1),this._alphaTR=i(e,0,1),this._alphaBL=i(r,0,1),this._alphaBR=i(n,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){var e=i(t,0,1);this._alpha=e,this._alphaTL=e,this._alphaTR=e,this._alphaBL=e,this._alphaBR=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){var e=i(t,0,1);this._alphaTL=e,0!==e&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){var e=i(t,0,1);this._alphaTR=e,0!==e&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){var e=i(t,0,1);this._alphaBL=e,0!==e&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){var e=i(t,0,1);this._alphaBR=e,0!==e&&(this.renderFlags|=2)}}};t.exports=n},88509:(t,e,r)=>{var i=r(45319),n={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function(){return this._alpha},set:function(t){var e=i(t,0,1);this._alpha=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=n},90065:(t,e,r)=>{var i=r(10312),n={_blendMode:i.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=i[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=n},94215:t=>{t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},61683:t=>{t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,r,i){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,r,i,this.flipX,this.flipY);else{var n=t;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},89272:t=>{t.exports={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}}},47059:(t,e,r)=>{var i=r(83419),n=r(66064),o=r(19133),s=new i({initialize:function(t,e){this.gameObject=t,this.isPost=e,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(t){return void 0===t&&(t=0),this.padding=t,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(t){if(!this.isPost){var e=this.gameObject.scene.sys.renderer;e&&e.pipelines?(this.gameObject.pipeline=e.pipelines.FX_PIPELINE,void 0!==t&&(this.padding=t),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var t=this.list,e=0;e<t.length;e++)t[e].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(t){var e;if(this.isPost){var r=this.gameObject.getPostPipeline(String(t.type));for(Array.isArray(r)||(r=[r]),e=0;e<r.length;e++){var i=r[e];if(i.controller===t){this.gameObject.removePostPipeline(i),t.destroy();break}}}else{var n=this.list;for(e=0;e<n.length;e++)n[e]===t&&(o(n,e),t.destroy())}return this.gameObject},disable:function(t){return void 0===t&&(t=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,t&&this.clear(),this.gameObject},add:function(t,e){if(!this.isPost)return this.enabled||this.enable(),this.list.push(t),t;var r=String(t.type);this.gameObject.setPostPipeline(r,e);var i=this.gameObject.getPostPipeline(r);return i?(Array.isArray(i)&&(i=i.pop()),i.controller=t,t):void 0},addGlow:function(t,e,r,i,o,s){return this.add(new n.Glow(this.gameObject,t,e,r,i),{quality:o,distance:s})},addShadow:function(t,e,r,i,o,s,a){return this.add(new n.Shadow(this.gameObject,t,e,r,i,o,s,a))},addPixelate:function(t){return this.add(new n.Pixelate(this.gameObject,t))},addVignette:function(t,e,r,i){return this.add(new n.Vignette(this.gameObject,t,e,r,i))},addShine:function(t,e,r,i){return this.add(new n.Shine(this.gameObject,t,e,r,i))},addBlur:function(t,e,r,i,o,s){return this.add(new n.Blur(this.gameObject,t,e,r,i,o,s))},addGradient:function(t,e,r,i,o,s,a,h){return this.add(new n.Gradient(this.gameObject,t,e,r,i,o,s,a,h))},addBloom:function(t,e,r,i,o,s){return this.add(new n.Bloom(this.gameObject,t,e,r,i,o,s))},addColorMatrix:function(){return this.add(new n.ColorMatrix(this.gameObject))},addCircle:function(t,e,r,i,o){return this.add(new n.Circle(this.gameObject,t,e,r,i,o))},addBarrel:function(t){return this.add(new n.Barrel(this.gameObject,t))},addDisplacement:function(t,e,r){return this.add(new n.Displacement(this.gameObject,t,e,r))},addWipe:function(t,e,r){return this.add(new n.Wipe(this.gameObject,t,e,r))},addReveal:function(t,e,r){return this.add(new n.Wipe(this.gameObject,t,e,r,!0))},addBokeh:function(t,e,r){return this.add(new n.Bokeh(this.gameObject,t,e,r))},addTiltShift:function(t,e,r,i,o,s){return this.add(new n.Bokeh(this.gameObject,t,e,r,!0,i,o,s))},destroy:function(){this.clear(),this.gameObject=null}});t.exports=s},54434:t=>{t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},8004:(t,e,r)=>{var i=r(87841),n=r(11520),o=r(26099),s={prepareBoundsOutput:function(t,e){return void 0===e&&(e=!1),0!==this.rotation&&n(t,this.x,this.y,this.rotation),e&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function(t,e){return void 0===t&&(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getTopLeft:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopRight:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getLeftCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getRightCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getBottomLeft:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomRight:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBounds:function(t){var e,r,n,o,s,a,h,u;if(void 0===t&&(t=new i),this.parentContainer){var c=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),c.transformPoint(t.x,t.y,t),e=t.x,r=t.y,this.getTopRight(t),c.transformPoint(t.x,t.y,t),n=t.x,o=t.y,this.getBottomLeft(t),c.transformPoint(t.x,t.y,t),s=t.x,a=t.y,this.getBottomRight(t),c.transformPoint(t.x,t.y,t),h=t.x,u=t.y}else this.getTopLeft(t),e=t.x,r=t.y,this.getTopRight(t),n=t.x,o=t.y,this.getBottomLeft(t),s=t.x,a=t.y,this.getBottomRight(t),h=t.x,u=t.y;return t.x=Math.min(e,n,s,h),t.y=Math.min(r,o,a,u),t.width=Math.max(e,n,s,h)-t.x,t.height=Math.max(r,o,a,u)-t.y,t}};t.exports=s},8573:(t,e,r)=>{var i=r(6858),n=r(80661),o={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t,e,r,n,o){return void 0===t&&(this.texture||this.shader||this.geom)&&(t=this),new i(this.scene,t,e,r,n,o)},createGeometryMask:function(t){return void 0!==t||"Graphics"!==this.type&&!this.geom||(t=this),new n(this.scene,t)}};t.exports=o},27387:t=>{t.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displayOriginX=t,this.displayOriginY=e,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},37640:(t,e,r)=>{var i=r(39506),n=r(57355),o=r(35154),s=r(86353),a=r(26099),h={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:s.PLAYING_FORWARD,setPath:function(t,e){void 0===e&&(e=this.pathConfig);var r=this.pathTween;return r&&r.isPlaying()&&r.stop(),this.path=t,e&&this.startFollow(e),this},setRotateToPath:function(t,e){return void 0===e&&(e=0),this.rotateToPath=t,this.pathRotationOffset=e,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,e){void 0===t&&(t={}),void 0===e&&(e=0);var r=this.pathTween;r&&r.isPlaying()&&r.stop(),"number"==typeof t&&(t={duration:t}),t.from=o(t,"from",0),t.to=o(t,"to",1);var h=n(t,"positionOnPath",!1);this.rotateToPath=n(t,"rotateToPath",!1),this.pathRotationOffset=o(t,"rotationOffset",0);var u=o(t,"startAt",e);if(u&&(t.onStart=function(t){var e=t.data[0];e.progress=u,e.elapsed=e.duration*u;var r=e.ease(e.progress);e.current=e.start+(e.end-e.start)*r,e.setTargetValue()}),this.pathOffset||(this.pathOffset=new a(this.x,this.y)),this.pathVector||(this.pathVector=new a),this.pathDelta||(this.pathDelta=new a),this.pathDelta.reset(),t.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),h&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=s.PLAYING_FORWARD,this.rotateToPath){var c=this.path.getPoint(.1);this.rotation=Math.atan2(c.y-this.y,c.x-this.x)+i(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t&&t.data){var e=t.data[0],r=this.pathDelta,n=this.pathVector;if(r.copy(n).negate(),e.state===s.COMPLETE)return this.path.getPoint(e.end,n),r.add(n),n.add(this.pathOffset),void this.setPosition(n.x,n.y);if(e.state!==s.PLAYING_FORWARD&&e.state!==s.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),n),r.add(n),n.add(this.pathOffset);var o=this.x,a=this.y;this.setPosition(n.x,n.y);var h=this.x-o,u=this.y-a;if(0===h&&0===u)return;if(e.state!==this._prevDirection)return void(this._prevDirection=e.state);this.rotateToPath&&(this.rotation=Math.atan2(u,h)+i(this.pathRotationOffset))}}};t.exports=h},72699:(t,e,r)=>{var i=r(62644),n={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(t){this.pipelineData={};var e=this.scene.sys.renderer;if(!e)return!1;var r=e.pipelines;if(r){void 0===t&&(t=r.default);var i=r.get(t);if(i)return this.defaultPipeline=i,this.pipeline=i,!0}return!1},setPipeline:function(t,e,r){var n=this.scene.sys.renderer;if(!n)return this;var o=n.pipelines;if(o){var s=o.get(t);s&&(this.pipeline=s),e&&(this.pipelineData=r?i(e):e)}return this},setPipelineData:function(t,e){var r=this.pipelineData;return void 0===e?delete r[t]:r[t]=e,this},resetPipeline:function(t){return void 0===t&&(t=!1),this.pipeline=this.defaultPipeline,t&&(this.pipelineData={}),null!==this.pipeline},getPipelineName:function(){return this.pipeline.name}};t.exports=n},17581:(t,e,r)=>{var i=r(62644),n=r(47059),o=r(19133),s={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(t){this.postPipelines=[],this.postPipelineData={},this.postFX=new n(this,!0),t&&(this.preFX=new n(this,!1))},setPostPipeline:function(t,e,r){var n=this.scene.sys.renderer;if(!n)return this;var o=n.pipelines;if(o){Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++){var a=o.getPostPipeline(t[s],this,e);a&&this.postPipelines.push(a)}e&&(this.postPipelineData=r?i(e):e)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(t,e){var r=this.postPipelineData;return void 0===e?delete r[t]:r[t]=e,this},getPostPipeline:function(t){for(var e="string"==typeof t,r=this.postPipelines,i=[],n=0;n<r.length;n++){var o=r[n];(e&&o.name===t||!e&&o instanceof t)&&i.push(o)}return 1===i.length?i[0]:i},resetPostPipeline:function(t){void 0===t&&(t=!1);for(var e=this.postPipelines,r=0;r<e.length;r++)e[r].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.postPipelineData={})},removePostPipeline:function(t){for(var e="string"==typeof t,r=this.postPipelines,i=r.length-1;i>=0;i--){var n=r[i];(e&&n.name===t||!e&&n===t)&&(n.destroy(),o(r,i))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};t.exports=s},80227:t=>{t.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,e){return void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this}}},16736:t=>{var e={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){t||(t=this.frame),this.width=t.realWidth,this.height=t.realHeight;var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=this.width,e.hitArea.height=this.height),this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}};t.exports=e},37726:(t,e,r)=>{var i=r(4327),n={texture:null,frame:null,isCropped:!1,setTexture:function(t,e,r,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e,r,i)},setFrame:function(t,e,r){return void 0===e&&(e=!0),void 0===r&&(r=!0),t instanceof i?(this.texture=this.scene.sys.textures.get(t.texture.key),this.frame=t):this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=n},79812:(t,e,r)=>{var i=r(4327),n={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,r,i){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,r,i,this.flipX,this.flipY);else{var n=t;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,r){return void 0===e&&(e=!0),void 0===r&&(r=!0),t instanceof i?(this.texture=this.scene.sys.textures.get(t.texture.key),this.frame=t):this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=n},27472:t=>{t.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,e,r,i){return void 0===t&&(t=16777215),void 0===e&&(e=t,r=t,i=t),this.tintTopLeft=t,this.tintTopRight=e,this.tintBottomLeft=r,this.tintBottomRight=i,this.tintFill=!1,this},setTintFill:function(t,e,r,i){return this.setTint(t,e,r,i),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}}},53774:t=>{t.exports=function(t){var e={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(e.textureKey=t.texture.key,e.frameKey=t.frame.name),e}},16901:(t,e,r)=>{var i=r(36383),n=r(61340),o=r(85955),s=r(86554),a=r(30954),h=r(26099),u={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===t?this.renderFlags&=-5:0!==this._scaleY&&(this.renderFlags|=4)}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===t?this.renderFlags&=-5:0!==this._scaleX&&(this.renderFlags|=4)}},angle:{get:function(){return a(this._rotation*i.RAD_TO_DEG)},set:function(t){this.rotation=a(t)*i.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=s(t)}},setPosition:function(t,e,r,i){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=r,this.w=i,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,e,r,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=this.scene.sys.scale.width),void 0===i&&(i=this.scene.sys.scale.height),this.x=t+Math.random()*r,this.y=e+Math.random()*i,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new n),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,e){void 0===t&&(t=new n);var r=this.parentContainer;if(!r)return this.getLocalTransformMatrix(t);for(e||(e=new n),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);r;)e.applyITRS(r.x,r.y,r._rotation,r._scaleX,r._scaleY),e.multiply(t,t),r=r.parentContainer;return t},getLocalPoint:function(t,e,r,i){r||(r=new h),i||(i=this.scene.sys.cameras.main);var n=i.scrollX,s=i.scrollY,a=t+n*this.scrollFactorX-n,u=e+s*this.scrollFactorY-s;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(a,u,r):o(a,u,this.x,this.y,this.rotation,this.scaleX,this.scaleY,r),this._originComponent&&(r.x+=this._displayOriginX,r.y+=this._displayOriginY),r},getParentRotation:function(){for(var t=0,e=this.parentContainer;e;)t+=e.rotation,e=e.parentContainer;return t}};t.exports=u},61340:(t,e,r)=>{var i=r(83419),n=r(36383),o=r(26099),s=new i({initialize:function(t,e,r,i,n,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=0),this.matrix=new Float32Array([t,e,r,i,n,o,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,e=t[0],r=t[1],i=t[2],o=t[3];return e||r?r>0?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):i||o?n.TAU-(o>0?Math.acos(-i/this.scaleY):-Math.acos(i/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,e){var r=this.matrix;return r[4]=r[0]*t+r[2]*e+r[4],r[5]=r[1]*t+r[3]*e+r[5],this},scale:function(t,e){var r=this.matrix;return r[0]*=t,r[1]*=t,r[2]*=e,r[3]*=e,this},rotate:function(t){var e=Math.sin(t),r=Math.cos(t),i=this.matrix,n=i[0],o=i[1],s=i[2],a=i[3];return i[0]=n*r+s*e,i[1]=o*r+a*e,i[2]=n*-e+s*r,i[3]=o*-e+a*r,this},multiply:function(t,e){var r=this.matrix,i=t.matrix,n=r[0],o=r[1],s=r[2],a=r[3],h=r[4],u=r[5],c=i[0],l=i[1],f=i[2],p=i[3],d=i[4],v=i[5],y=void 0===e?r:e.matrix;return y[0]=c*n+l*s,y[1]=c*o+l*a,y[2]=f*n+p*s,y[3]=f*o+p*a,y[4]=d*n+v*s+h,y[5]=d*o+v*a+u,y},multiplyWithOffset:function(t,e,r){var i=this.matrix,n=t.matrix,o=i[0],s=i[1],a=i[2],h=i[3],u=e*o+r*a+i[4],c=e*s+r*h+i[5],l=n[0],f=n[1],p=n[2],d=n[3],v=n[4],y=n[5];return i[0]=l*o+f*a,i[1]=l*s+f*h,i[2]=p*o+d*a,i[3]=p*s+d*h,i[4]=v*o+y*a+u,i[5]=v*s+y*h+c,this},transform:function(t,e,r,i,n,o){var s=this.matrix,a=s[0],h=s[1],u=s[2],c=s[3],l=s[4],f=s[5];return s[0]=t*a+e*u,s[1]=t*h+e*c,s[2]=r*a+i*u,s[3]=r*h+i*c,s[4]=n*a+o*u+l,s[5]=n*h+o*c+f,this},transformPoint:function(t,e,r){void 0===r&&(r={x:0,y:0});var i=this.matrix,n=i[0],o=i[1],s=i[2],a=i[3],h=i[4],u=i[5];return r.x=t*n+e*s+h,r.y=t*o+e*a+u,r},invert:function(){var t=this.matrix,e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],a=e*n-r*i;return t[0]=n/a,t[1]=-r/a,t[2]=-i/a,t[3]=e/a,t[4]=(i*s-n*o)/a,t[5]=-(e*s-r*o)/a,this},copyFrom:function(t){var e=this.matrix;return e[0]=t.a,e[1]=t.b,e[2]=t.c,e[3]=t.d,e[4]=t.e,e[5]=t.f,this},copyFromArray:function(t){var e=this.matrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},copyToContext:function(t){var e=this.matrix;return t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t},setToContext:function(t){return t.setTransform(this),t},copyToArray:function(t){var e=this.matrix;return void 0===t?t=[e[0],e[1],e[2],e[3],e[4],e[5]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]),t},setTransform:function(t,e,r,i,n,o){var s=this.matrix;return s[0]=t,s[1]=e,s[2]=r,s[3]=i,s[4]=n,s[5]=o,this},decomposeMatrix:function(){var t=this.decomposedMatrix,e=this.matrix,r=e[0],i=e[1],n=e[2],o=e[3],s=r*o-i*n;if(t.translateX=e[4],t.translateY=e[5],r||i){var a=Math.sqrt(r*r+i*i);t.rotation=i>0?Math.acos(r/a):-Math.acos(r/a),t.scaleX=a,t.scaleY=s/a}else if(n||o){var h=Math.sqrt(n*n+o*o);t.rotation=.5*Math.PI-(o>0?Math.acos(-n/h):-Math.acos(n/h)),t.scaleX=s/h,t.scaleY=h}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,e,r,i,n){var o=this.matrix,s=Math.sin(r),a=Math.cos(r);return o[4]=t,o[5]=e,o[0]=a*i,o[1]=s*i,o[2]=-s*n,o[3]=a*n,this},applyInverse:function(t,e,r){void 0===r&&(r=new o);var i=this.matrix,n=i[0],s=i[1],a=i[2],h=i[3],u=i[4],c=i[5],l=1/(n*h+a*-s);return r.x=h*l*t+-a*l*e+(c*a-u*h)*l,r.y=n*l*e+-s*l*t+(-c*n+u*s)*l,r},setQuad:function(t,e,r,i,n,o){void 0===n&&(n=!1),void 0===o&&(o=this.quad);var s=this.matrix,a=s[0],h=s[1],u=s[2],c=s[3],l=s[4],f=s[5];return n?(o[0]=Math.round(t*a+e*u+l),o[1]=Math.round(t*h+e*c+f),o[2]=Math.round(t*a+i*u+l),o[3]=Math.round(t*h+i*c+f),o[4]=Math.round(r*a+i*u+l),o[5]=Math.round(r*h+i*c+f),o[6]=Math.round(r*a+e*u+l),o[7]=Math.round(r*h+e*c+f)):(o[0]=t*a+e*u+l,o[1]=t*h+e*c+f,o[2]=t*a+i*u+l,o[3]=t*h+i*c+f,o[4]=r*a+i*u+l,o[5]=r*h+i*c+f,o[6]=r*a+e*u+l,o[7]=r*h+e*c+f),o},getX:function(t,e){return t*this.a+e*this.c+this.e},getY:function(t,e){return t*this.b+e*this.d+this.f},getXRound:function(t,e,r){var i=this.getX(t,e);return r&&(i=Math.round(i)),i},getYRound:function(t,e,r){var i=this.getY(t,e);return r&&(i=Math.round(i)),i},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});t.exports=s},59715:t=>{t.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}}},31401:(t,e,r)=>{t.exports={Alpha:r(16005),AlphaSingle:r(88509),BlendMode:r(90065),ComputedSize:r(94215),Crop:r(61683),Depth:r(89272),Flip:r(54434),FX:r(47059),GetBounds:r(8004),Mask:r(8573),Origin:r(27387),PathFollower:r(37640),Pipeline:r(72699),PostPipeline:r(17581),ScrollFactor:r(80227),Size:r(16736),Texture:r(37726),TextureCrop:r(79812),Tint:r(27472),ToJSON:r(53774),Transform:r(16901),TransformMatrix:r(61340),Visible:r(59715)}},31559:(t,e,r)=>{var i=r(37105),n=r(10312),o=r(83419),s=r(31401),a=r(51708),h=r(95643),u=r(87841),c=r(29959),l=r(36899),f=r(26099),p=new o({Extends:h,Mixins:[s.AlphaSingle,s.BlendMode,s.ComputedSize,s.Depth,s.Mask,s.PostPipeline,s.Transform,s.Visible,c],initialize:function(t,e,r,i){h.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new s.TransformMatrix,this.tempTransformMatrix=new s.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(e,r),this.setBlendMode(n.SKIP_CHECK),i&&this.add(i)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new u),t.setTo(this.x,this.y,0,0),this.parentContainer){var e=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(e.x,e.y,0,0)}if(this.list.length>0){var r=this.list,i=new u,n=!1;t.setEmpty();for(var o=0;o<r.length;o++){var s=r[o];s.getBounds&&(s.getBounds(i),n?l(i,t,t):(t.setTo(i.x,i.y,i.width,i.height),n=!0))}}return t},addHandler:function(t){t.once(a.DESTROY,this.onChildDestroyed,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.parentContainer=this,t.removeFromDisplayList(),t.addedToScene())},removeHandler:function(t){t.off(a.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer=null,t.removedFromScene(),t.addToDisplayList())},pointToContainer:function(t,e){void 0===e&&(e=new f),this.parentContainer?this.parentContainer.pointToContainer(t,e):(e.x=t.x,e.y=t.y);var r=this.tempTransformMatrix;return r.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),r.invert(),r.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return i.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return i.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,r){return e[t]-r[t]}),i.StableSort(this.list,e),this):this},getByName:function(t){return i.GetFirst(this.list,"name",t)},getRandom:function(t,e){return i.GetRandom(this.list,t,e)},getFirst:function(t,e,r,n){return i.GetFirst(this.list,t,e,r,n)},getAll:function(t,e,r,n){return i.GetAll(this.list,t,e,r,n)},count:function(t,e,r,n){return i.CountAllMatching(this.list,t,e,r,n)},swap:function(t,e){return i.Swap(this.list,t,e),this},moveTo:function(t,e){return i.MoveTo(this.list,t,e),this},moveAbove:function(t,e){return i.MoveAbove(this.list,t,e),this},moveBelow:function(t,e){return i.MoveBelow(this.list,t,e),this},remove:function(t,e){var r=i.Remove(this.list,t,this.removeHandler,this);if(e&&r){Array.isArray(r)||(r=[r]);for(var n=0;n<r.length;n++)r[n].destroy()}return this},removeAt:function(t,e){var r=i.RemoveAt(this.list,t,this.removeHandler,this);return e&&r&&r.destroy(),this},removeBetween:function(t,e,r){var n=i.RemoveBetween(this.list,t,e,this.removeHandler,this);if(r)for(var o=0;o<n.length;o++)n[o].destroy();return this},removeAll:function(t){var e=this.list;if(t){for(var r=0;r<e.length;r++)e[r]&&e[r].scene&&(e[r].off(a.DESTROY,this.onChildDestroyed,this),e[r].destroy());this.list=[]}else i.RemoveBetween(e,0,e.length,this.removeHandler,this);return this},bringToTop:function(t){return i.BringToTop(this.list,t),this},sendToBack:function(t){return i.SendToBack(this.list,t),this},moveUp:function(t){return i.MoveUp(this.list,t),this},moveDown:function(t){return i.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return i.Shuffle(this.list),this},replace:function(t,e,r){return i.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),r&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,r,n){return i.SetAll(this.list,t,e,r,n),this},each:function(t,e){var r,i=[null],n=this.list.slice(),o=n.length;for(r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<o;r++)i[0]=n[r],t.apply(e,i);return this},iterate:function(t,e){var r,i=[null];for(r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<this.list.length;r++)i[0]=this.list[r],t.apply(e,i);return this},setScrollFactor:function(t,e,r){return void 0===e&&(e=t),void 0===r&&(r=!1),this.scrollFactorX=t,this.scrollFactorY=e,r&&(i.SetAll(this.list,"scrollFactorX",t),i.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]},onChildDestroyed:function(t){i.Remove(this.list,t),this.exclusive&&(t.parentContainer=null,t.removedFromScene())}});t.exports=p},53584:t=>{t.exports=function(t,e,r,i){r.addToRenderList(e);var n=e.list;if(0!==n.length){var o=e.localTransform;i?(o.loadIdentity(),o.multiply(i),o.translate(e.x,e.y),o.rotate(e.rotation),o.scale(e.scaleX,e.scaleY)):o.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var s=-1!==e.blendMode;s||t.setBlendMode(0);var a=e._alpha,h=e.scrollFactorX,u=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,r);for(var c=0;c<n.length;c++){var l=n[c];if(l.willRender(r)){var f=l.alpha,p=l.scrollFactorX,d=l.scrollFactorY;s||l.blendMode===t.currentBlendMode||t.setBlendMode(l.blendMode),l.setScrollFactor(p*h,d*u),l.setAlpha(f*a),l.renderCanvas(t,l,r,o),l.setAlpha(f),l.setScrollFactor(p,d)}}e.mask&&e.mask.postRenderCanvas(t)}}},77143:(t,e,r)=>{var i=r(25305),n=r(31559),o=r(44603),s=r(23568),a=r(95540);o.register("container",(function(t,e){void 0===t&&(t={});var r=s(t,"x",0),o=s(t,"y",0),h=a(t,"children",null),u=new n(this.scene,r,o,h);return void 0!==e&&(t.add=e),i(this.scene,u,t),u}))},24961:(t,e,r)=>{var i=r(31559);r(39429).register("container",(function(t,e,r){return this.displayList.add(new i(this.scene,t,e,r))}))},29959:(t,e,r)=>{var i,n,o=r(29747);i=r(72249),n=r(53584),t.exports={renderWebGL:i,renderCanvas:n}},72249:t=>{t.exports=function(t,e,r,i){r.addToRenderList(e);var n=e.list,o=n.length;if(0!==o){var s=e.localTransform;i?(s.loadIdentity(),s.multiply(i),s.translate(e.x,e.y),s.rotate(e.rotation),s.scale(e.scaleX,e.scaleY)):s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.pipelines.preBatch(e);var a=-1!==e.blendMode;a||t.setBlendMode(0);for(var h=e.alpha,u=e.scrollFactorX,c=e.scrollFactorY,l=0;l<o;l++){var f=n[l];if(f.willRender(r)){var p,d,v,y;if(void 0!==f.alphaTopLeft)p=f.alphaTopLeft,d=f.alphaTopRight,v=f.alphaBottomLeft,y=f.alphaBottomRight;else{var g=f.alpha;p=g,d=g,v=g,y=g}var m=f.scrollFactorX,x=f.scrollFactorY;a||f.blendMode===t.currentBlendMode||t.setBlendMode(f.blendMode);var b=f.mask;b&&b.preRenderWebGL(t,f,r);var w=f.type;w!==t.currentType&&(t.newType=!0,t.currentType=w),t.nextTypeMatch=l<o-1&&n[l+1].type===t.currentType,f.setScrollFactor(m*u,x*c),f.setAlpha(p*h,d*h,v*h,y*h),f.renderWebGL(t,f,r,s,e),f.setAlpha(p,d,v,y),f.setScrollFactor(m,x),b&&b.postRenderWebGL(t,r),t.newType=!1}}t.pipelines.postBatch(e)}}},47407:t=>{t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},3069:(t,e,r)=>{var i=r(83419),n=r(31401),o=r(441),s=r(95643),a=r(41212),h=r(35846),u=r(44594),c=r(61369),l=new i({Extends:s,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Origin,n.ScrollFactor,n.Transform,n.Visible,o],initialize:function(t,e,r,i,n,o){s.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new c,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(e,r),"string"==typeof i?"#"===i[0]?this.setElement(i.substr(1),n,o):this.createElement(i,n,o):i&&this.setElement(i,n,o),t.sys.events.on(u.SLEEP,this.handleSceneEvent,this),t.sys.events.on(u.WAKE,this.handleSceneEvent,this),t.sys.events.on(u.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(t){var e=this.node,r=e.style;e&&(r.display=t.settings.visible?"block":"none")},setSkew:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.skewX=t,this.skewY=e,this},setPerspective:function(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(t){this.parent.style.perspective=t+"px"}},addListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.addEventListener(t[e],this.handler,!1)}return this},removeListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.removeEventListener(t[e],this.handler)}return this},dispatchNativeEvent:function(t){this.emit(t.type,t)},createElement:function(t,e,r){return this.setElement(document.createElement(t),e,r)},setElement:function(t,e,r){var i;if(this.removeElement(),"string"==typeof t?("#"===t[0]&&(t=t.substr(1)),i=document.getElementById(t)):"object"==typeof t&&1===t.nodeType&&(i=t),!i)return this;if(this.node=i,e&&a(e))for(var n in e)i.style[n]=e[n];else"string"==typeof e&&(i.style=e);return i.style.zIndex="0",i.style.display="inline",i.style.position="absolute",i.phaser=this,this.parent&&this.parent.appendChild(i),r&&(i.innerText=r),this.updateSize()},createFromCache:function(t,e){var r=this.cache.get(t);return r&&this.createFromHTML(r,e),this},createFromHTML:function(t,e){void 0===e&&(e="div"),this.removeElement();var r=document.createElement(e);return this.node=r,r.style.zIndex="0",r.style.display="inline",r.style.position="absolute",r.phaser=this,this.parent&&this.parent.appendChild(r),r.innerHTML=t,this.updateSize()},removeElement:function(){return this.node&&(h(this.node),this.node=null),this},updateSize:function(){var t=this.node,e=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=e.width||0,this.displayHeight=e.height||0,this},getChildByProperty:function(t,e){if(this.node)for(var r=this.node.querySelectorAll("*"),i=0;i<r.length;i++)if(r[i][t]===e)return r[i];return null},getChildByID:function(t){return this.getChildByProperty("id",t)},getChildByName:function(t){return this.getChildByProperty("name",t)},setClassName:function(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preRender:function(){var t=this.parentContainer,e=this.node;e&&t&&!t.willRender()&&(e.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(u.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(u.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(u.PRE_RENDER,this.preRender,this)}});t.exports=l},49381:(t,e,r)=>{var i=r(47407),n=r(95643),o=r(61340),s=new o,a=new o,h=new o;t.exports=function(t,e,r,o){if(e.node){var u=e.node.style,c=e.scene.sys.settings;if(!u||!c.visible||n.RENDER_MASK!==e.renderFlags||0!==e.cameraFilter&&e.cameraFilter&r.id||e.parentContainer&&!e.parentContainer.willRender())u.display="none";else{var l=e.parentContainer,f=r.alpha*e.alpha;l&&(f*=l.alpha);var p=s,d=a,v=h,y=0,g=0,m="0%",x="0%";o?(y=e.width*e.scaleX*e.originX,g=e.height*e.scaleY*e.originY,d.applyITRS(e.x-y,e.y-g,e.rotation,e.scaleX,e.scaleY),p.copyFrom(r.matrix),p.multiplyWithOffset(o,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),d.e=e.x-y,d.f=e.y-g,p.multiply(d,v)):(y=e.width*e.originX,g=e.height*e.originY,d.applyITRS(e.x-y,e.y-g,e.rotation,e.scaleX,e.scaleY),p.copyFrom(r.matrix),m=100*e.originX+"%",x=100*e.originY+"%",d.e-=r.scrollX*e.scrollFactorX,d.f-=r.scrollY*e.scrollFactorY,p.multiply(d,v)),e.transformOnly||(u.display="block",u.opacity=f,u.zIndex=e._depth,u.pointerEvents=e.pointerEvents,u.mixBlendMode=i[e._blendMode]),u.transform=v.getCSSMatrix()+" skew("+e.skewX+"rad, "+e.skewY+"rad) rotate3d("+e.rotate3d.x+","+e.rotate3d.y+","+e.rotate3d.z+","+e.rotate3d.w+e.rotate3dAngle+")",u.transformOrigin=m+" "+x}}}},2611:(t,e,r)=>{var i=r(3069);r(39429).register("dom",(function(t,e,r,n,o){var s=new i(this.scene,t,e,r,n,o);return this.displayList.add(s),s}))},441:(t,e,r)=>{var i,n,o=r(29747);i=r(49381),n=r(49381),t.exports={renderWebGL:i,renderCanvas:n}},62980:t=>{t.exports="addedtoscene"},41337:t=>{t.exports="destroy"},44947:t=>{t.exports="removedfromscene"},49358:t=>{t.exports="complete"},35163:t=>{t.exports="created"},97249:t=>{t.exports="error"},19483:t=>{t.exports="locked"},56059:t=>{t.exports="loop"},26772:t=>{t.exports="metadata"},64437:t=>{t.exports="playing"},83411:t=>{t.exports="play"},75780:t=>{t.exports="seeked"},67799:t=>{t.exports="seeking"},63500:t=>{t.exports="stalled"},55541:t=>{t.exports="stop"},53208:t=>{t.exports="textureready"},4992:t=>{t.exports="unlocked"},12:t=>{t.exports="unsupported"},51708:(t,e,r)=>{t.exports={ADDED_TO_SCENE:r(62980),DESTROY:r(41337),REMOVED_FROM_SCENE:r(44947),VIDEO_COMPLETE:r(49358),VIDEO_CREATED:r(35163),VIDEO_ERROR:r(97249),VIDEO_LOCKED:r(19483),VIDEO_LOOP:r(56059),VIDEO_METADATA:r(26772),VIDEO_PLAY:r(83411),VIDEO_PLAYING:r(64437),VIDEO_SEEKED:r(75780),VIDEO_SEEKING:r(67799),VIDEO_STALLED:r(63500),VIDEO_STOP:r(55541),VIDEO_TEXTURE:r(53208),VIDEO_UNLOCKED:r(4992),VIDEO_UNSUPPORTED:r(12)}},42421:(t,e,r)=>{var i=r(83419),n=r(31401),o=r(95643),s=r(64993),a=new i({Extends:o,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.Origin,n.ScrollFactor,n.Size,n.Texture,n.Tint,n.Transform,n.Visible,s],initialize:function(t){o.call(this,t,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});t.exports=a},70217:()=>{},56315:(t,e,r)=>{var i=r(42421);r(39429).register("extern",(function(){var t=new i(this.scene);return this.displayList.add(t),t}))},64993:(t,e,r)=>{var i,n,o=r(29747);i=r(80287),n=r(70217),t.exports={renderWebGL:i,renderCanvas:n}},80287:(t,e,r)=>{var i=r(91296);t.exports=function(t,e,r,n){t.pipelines.clear();var o=i(e,r,n).calc;e.render.call(e,t,r,o),t.pipelines.rebind()}},85592:t=>{t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},43831:(t,e,r)=>{var i=r(71911),n=r(83419),o=r(85592),s=r(31401),a=r(8497),h=r(95643),u=r(95540),c=r(35154),l=r(36383),f=r(84503),p=new n({Extends:h,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.PostPipeline,s.Transform,s.Visible,s.ScrollFactor,f],initialize:function(t,e){var r=c(e,"x",0),i=c(e,"y",0);h.call(this,t,"Graphics"),this.setPosition(r,i),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(e)},setDefaultStyles:function(t){return c(t,"lineStyle",null)&&(this.defaultStrokeWidth=c(t,"lineStyle.width",1),this.defaultStrokeColor=c(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=c(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),c(t,"fillStyle",null)&&(this.defaultFillColor=c(t,"fillStyle.color",16777215),this.defaultFillAlpha=c(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,e,r){return void 0===r&&(r=1),this.commandBuffer.push(o.LINE_STYLE,t,e,r),this._lineWidth=t,this},fillStyle:function(t,e){return void 0===e&&(e=1),this.commandBuffer.push(o.FILL_STYLE,t,e),this},fillGradientStyle:function(t,e,r,i,n,s,a,h){return void 0===n&&(n=1),void 0===s&&(s=n),void 0===a&&(a=n),void 0===h&&(h=n),this.commandBuffer.push(o.GRADIENT_FILL_STYLE,n,s,a,h,t,e,r,i),this},lineGradientStyle:function(t,e,r,i,n,s){return void 0===s&&(s=1),this.commandBuffer.push(o.GRADIENT_LINE_STYLE,t,s,e,r,i,n),this},beginPath:function(){return this.commandBuffer.push(o.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(o.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(o.FILL_PATH),this},fill:function(){return this.commandBuffer.push(o.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(o.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(o.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,e,r){return this.beginPath(),this.arc(t,e,r,0,l.PI2),this.fillPath(),this},strokeCircle:function(t,e,r){return this.beginPath(),this.arc(t,e,r,0,l.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,e,r,i){return this.commandBuffer.push(o.FILL_RECT,t,e,r,i),this},strokeRect:function(t,e,r,i){var n=this._lineWidth/2,o=t-n,s=t+n;return this.beginPath(),this.moveTo(t,e),this.lineTo(t,e+i),this.strokePath(),this.beginPath(),this.moveTo(t+r,e),this.lineTo(t+r,e+i),this.strokePath(),this.beginPath(),this.moveTo(o,e),this.lineTo(s+r,e),this.strokePath(),this.beginPath(),this.moveTo(o,e+i),this.lineTo(s+r,e+i),this.strokePath(),this},fillRoundedRect:function(t,e,r,i,n){void 0===n&&(n=20);var o=n,s=n,a=n,h=n;"number"!=typeof n&&(o=u(n,"tl",20),s=u(n,"tr",20),a=u(n,"bl",20),h=u(n,"br",20));var c=o>=0,f=s>=0,p=a>=0,d=h>=0;return o=Math.abs(o),s=Math.abs(s),a=Math.abs(a),h=Math.abs(h),this.beginPath(),this.moveTo(t+o,e),this.lineTo(t+r-s,e),f?this.arc(t+r-s,e+s,s,-l.TAU,0):this.arc(t+r,e,s,Math.PI,l.TAU,!0),this.lineTo(t+r,e+i-h),d?this.arc(t+r-h,e+i-h,h,0,l.TAU):this.arc(t+r,e+i,h,-l.TAU,Math.PI,!0),this.lineTo(t+a,e+i),p?this.arc(t+a,e+i-a,a,l.TAU,Math.PI):this.arc(t,e+i,a,0,-l.TAU,!0),this.lineTo(t,e+o),c?this.arc(t+o,e+o,o,-Math.PI,-l.TAU):this.arc(t,e,o,l.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(t,e,r,i,n){void 0===n&&(n=20);var o=n,s=n,a=n,h=n,c=Math.min(r,i)/2;"number"!=typeof n&&(o=u(n,"tl",20),s=u(n,"tr",20),a=u(n,"bl",20),h=u(n,"br",20));var f=o>=0,p=s>=0,d=a>=0,v=h>=0;return o=Math.min(Math.abs(o),c),s=Math.min(Math.abs(s),c),a=Math.min(Math.abs(a),c),h=Math.min(Math.abs(h),c),this.beginPath(),this.moveTo(t+o,e),this.lineTo(t+r-s,e),this.moveTo(t+r-s,e),p?this.arc(t+r-s,e+s,s,-l.TAU,0):this.arc(t+r,e,s,Math.PI,l.TAU,!0),this.lineTo(t+r,e+i-h),this.moveTo(t+r,e+i-h),v?this.arc(t+r-h,e+i-h,h,0,l.TAU):this.arc(t+r,e+i,h,-l.TAU,Math.PI,!0),this.lineTo(t+a,e+i),this.moveTo(t+a,e+i),d?this.arc(t+a,e+i-a,a,l.TAU,Math.PI):this.arc(t,e+i,a,0,-l.TAU,!0),this.lineTo(t,e+o),this.moveTo(t,e+o),f?this.arc(t+o,e+o,o,-Math.PI,-l.TAU):this.arc(t,e,o,l.TAU,0,!0),this.strokePath(),this},fillPointShape:function(t,e){return this.fillPoint(t.x,t.y,e)},fillPoint:function(t,e,r){return!r||r<1?r=1:(t-=r/2,e-=r/2),this.commandBuffer.push(o.FILL_RECT,t,e,r,r),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,e,r,i,n,s){return this.commandBuffer.push(o.FILL_TRIANGLE,t,e,r,i,n,s),this},strokeTriangle:function(t,e,r,i,n,s){return this.commandBuffer.push(o.STROKE_TRIANGLE,t,e,r,i,n,s),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,e,r,i){return this.beginPath(),this.moveTo(t,e),this.lineTo(r,i),this.strokePath(),this},lineTo:function(t,e){return this.commandBuffer.push(o.LINE_TO,t,e),this},moveTo:function(t,e){return this.commandBuffer.push(o.MOVE_TO,t,e),this},strokePoints:function(t,e,r,i){void 0===e&&(e=!1),void 0===r&&(r=!1),void 0===i&&(i=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var n=1;n<i;n++)this.lineTo(t[n].x,t[n].y);return e&&this.lineTo(t[0].x,t[0].y),r&&this.closePath(),this.strokePath(),this},fillPoints:function(t,e,r,i){void 0===e&&(e=!1),void 0===r&&(r=!1),void 0===i&&(i=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var n=1;n<i;n++)this.lineTo(t[n].x,t[n].y);return e&&this.lineTo(t[0].x,t[0].y),r&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(t,e){void 0===e&&(e=32);var r=t.getPoints(e);return this.strokePoints(r,!0)},strokeEllipse:function(t,e,r,i,n){void 0===n&&(n=32);var o=new a(t,e,r,i).getPoints(n);return this.strokePoints(o,!0)},fillEllipseShape:function(t,e){void 0===e&&(e=32);var r=t.getPoints(e);return this.fillPoints(r,!0)},fillEllipse:function(t,e,r,i,n){void 0===n&&(n=32);var o=new a(t,e,r,i).getPoints(n);return this.fillPoints(o,!0)},arc:function(t,e,r,i,n,s,a){return void 0===s&&(s=!1),void 0===a&&(a=0),this.commandBuffer.push(o.ARC,t,e,r,i,n,s,a),this},slice:function(t,e,r,i,n,s,a){return void 0===s&&(s=!1),void 0===a&&(a=0),this.commandBuffer.push(o.BEGIN_PATH),this.commandBuffer.push(o.MOVE_TO,t,e),this.commandBuffer.push(o.ARC,t,e,r,i,n,s,a),this.commandBuffer.push(o.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(o.SAVE),this},restore:function(){return this.commandBuffer.push(o.RESTORE),this},translateCanvas:function(t,e){return this.commandBuffer.push(o.TRANSLATE,t,e),this},scaleCanvas:function(t,e){return this.commandBuffer.push(o.SCALE,t,e),this},rotateCanvas:function(t){return this.commandBuffer.push(o.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,e,r){var i,n,o=this.scene.sys,s=o.game.renderer;void 0===e&&(e=o.scale.width),void 0===r&&(r=o.scale.height),p.TargetCamera.setScene(this.scene),p.TargetCamera.setViewport(0,0,e,r),p.TargetCamera.scrollX=this.x,p.TargetCamera.scrollY=this.y;var a={willReadFrequently:!0};if("string"==typeof t)if(o.textures.exists(t)){var h=(i=o.textures.get(t)).getSourceImage();h instanceof HTMLCanvasElement&&(n=h.getContext("2d",a))}else n=(i=o.textures.createCanvas(t,e,r)).getSourceImage().getContext("2d",a);else t instanceof HTMLCanvasElement&&(n=t.getContext("2d",a));return n&&(this.renderCanvas(s,this,p.TargetCamera,null,n,!1),i&&i.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});p.TargetCamera=new i,t.exports=p},32768:(t,e,r)=>{var i=r(85592),n=r(20926);t.exports=function(t,e,r,o,s,a){var h=e.commandBuffer,u=h.length,c=s||t.currentContext;if(0!==u&&n(t,c,e,r,o)){r.addToRenderList(e);var l=1,f=1,p=0,d=0,v=1,y=0,g=0,m=0;c.beginPath();for(var x=0;x<u;++x)switch(h[x]){case i.ARC:c.arc(h[x+1],h[x+2],h[x+3],h[x+4],h[x+5],h[x+6]),x+=7;break;case i.LINE_STYLE:v=h[x+1],p=h[x+2],l=h[x+3],y=(16711680&p)>>>16,g=(65280&p)>>>8,m=255&p,c.strokeStyle="rgba("+y+","+g+","+m+","+l+")",c.lineWidth=v,x+=3;break;case i.FILL_STYLE:d=h[x+1],f=h[x+2],y=(16711680&d)>>>16,g=(65280&d)>>>8,m=255&d,c.fillStyle="rgba("+y+","+g+","+m+","+f+")",x+=2;break;case i.BEGIN_PATH:c.beginPath();break;case i.CLOSE_PATH:c.closePath();break;case i.FILL_PATH:a||c.fill();break;case i.STROKE_PATH:a||c.stroke();break;case i.FILL_RECT:a?c.rect(h[x+1],h[x+2],h[x+3],h[x+4]):c.fillRect(h[x+1],h[x+2],h[x+3],h[x+4]),x+=4;break;case i.FILL_TRIANGLE:c.beginPath(),c.moveTo(h[x+1],h[x+2]),c.lineTo(h[x+3],h[x+4]),c.lineTo(h[x+5],h[x+6]),c.closePath(),a||c.fill(),x+=6;break;case i.STROKE_TRIANGLE:c.beginPath(),c.moveTo(h[x+1],h[x+2]),c.lineTo(h[x+3],h[x+4]),c.lineTo(h[x+5],h[x+6]),c.closePath(),a||c.stroke(),x+=6;break;case i.LINE_TO:c.lineTo(h[x+1],h[x+2]),x+=2;break;case i.MOVE_TO:c.moveTo(h[x+1],h[x+2]),x+=2;break;case i.LINE_FX_TO:c.lineTo(h[x+1],h[x+2]),x+=5;break;case i.MOVE_FX_TO:c.moveTo(h[x+1],h[x+2]),x+=5;break;case i.SAVE:c.save();break;case i.RESTORE:c.restore();break;case i.TRANSLATE:c.translate(h[x+1],h[x+2]),x+=2;break;case i.SCALE:c.scale(h[x+1],h[x+2]),x+=2;break;case i.ROTATE:c.rotate(h[x+1]),x+=1;break;case i.GRADIENT_FILL_STYLE:x+=5;break;case i.GRADIENT_LINE_STYLE:x+=6}c.restore()}}},87079:(t,e,r)=>{var i=r(44603),n=r(43831);i.register("graphics",(function(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var r=new n(this.scene,t);return t.add&&this.scene.sys.displayList.add(r),r}))},1201:(t,e,r)=>{var i=r(43831);r(39429).register("graphics",(function(t){return this.displayList.add(new i(this.scene,t))}))},84503:(t,e,r)=>{var i,n,o=r(29747);i=r(77545),r(32768),n=r(32768),t.exports={renderWebGL:i,renderCanvas:n}},77545:(t,e,r)=>{var i=r(85592),n=r(91296),o=r(61340),s=r(70554),a=function(t,e,r){this.x=t,this.y=e,this.width=r},h=function(t,e,r){this.points=[],this.pointsLength=1,this.points[0]=new a(t,e,r)},u=[],c=new o;t.exports=function(t,e,r,o){if(0!==e.commandBuffer.length){r.addToRenderList(e);var l=t.pipelines.set(e.pipeline,e);t.pipelines.preBatch(e);for(var f=n(e,r,o).calc,p=c.loadIdentity(),d=e.commandBuffer,v=r.alpha*e.alpha,y=1,g=l.fillTint,m=l.strokeTint,x=0,b=0,w=0,E=2*Math.PI,T=[],S=0,_=!0,O=null,P=s.getTintAppendFloatAlpha,M=0;M<d.length;M++)switch(d[M]){case i.BEGIN_PATH:T.length=0,O=null,_=!0;break;case i.CLOSE_PATH:_=!1,O&&O.points.length&&O.points.push(O.points[0]);break;case i.FILL_PATH:for(S=0;S<T.length;S++)l.batchFillPath(T[S].points,p,f);break;case i.STROKE_PATH:for(S=0;S<T.length;S++)l.batchStrokePath(T[S].points,y,_,p,f);break;case i.LINE_STYLE:y=d[++M];var A=P(d[++M],d[++M]*v);m.TL=A,m.TR=A,m.BL=A,m.BR=A;break;case i.FILL_STYLE:var L=P(d[++M],d[++M]*v);g.TL=L,g.TR=L,g.BL=L,g.BR=L;break;case i.GRADIENT_FILL_STYLE:var C=d[++M]*v,R=d[++M]*v,k=d[++M]*v,F=d[++M]*v;g.TL=P(d[++M],C),g.TR=P(d[++M],R),g.BL=P(d[++M],k),g.BR=P(d[++M],F);break;case i.GRADIENT_LINE_STYLE:y=d[++M];var I=d[++M]*v;m.TL=P(d[++M],I),m.TR=P(d[++M],I),m.BL=P(d[++M],I),m.BR=P(d[++M],I);break;case i.ARC:var D=0,j=d[++M],B=d[++M],N=d[++M],G=d[++M],U=d[++M],Y=d[++M],z=d[++M];for(U-=G,Y?U<-E?U=-E:U>0&&(U=U%E-E):U>E?U=E:U<0&&(U=E+U%E),null===O&&(O=new h(j+Math.cos(G)*N,B+Math.sin(G)*N,y),T.push(O),D+=.01);D<1+z;)w=U*D+G,x=j+Math.cos(w)*N,b=B+Math.sin(w)*N,O.points.push(new a(x,b,y)),D+=.01;w=U+G,x=j+Math.cos(w)*N,b=B+Math.sin(w)*N,O.points.push(new a(x,b,y));break;case i.FILL_RECT:l.batchFillRect(d[++M],d[++M],d[++M],d[++M],p,f);break;case i.FILL_TRIANGLE:l.batchFillTriangle(d[++M],d[++M],d[++M],d[++M],d[++M],d[++M],p,f);break;case i.STROKE_TRIANGLE:l.batchStrokeTriangle(d[++M],d[++M],d[++M],d[++M],d[++M],d[++M],y,p,f);break;case i.LINE_TO:null!==O?O.points.push(new a(d[++M],d[++M],y)):(O=new h(d[++M],d[++M],y),T.push(O));break;case i.MOVE_TO:O=new h(d[++M],d[++M],y),T.push(O);break;case i.SAVE:u.push(p.copyToArray());break;case i.RESTORE:p.copyFromArray(u.pop());break;case i.TRANSLATE:j=d[++M],B=d[++M],p.translate(j,B);break;case i.SCALE:j=d[++M],B=d[++M],p.scale(j,B);break;case i.ROTATE:p.rotate(d[++M])}t.pipelines.postBatch(e)}}},26479:(t,e,r)=>{var i=r(61061),n=r(83419),o=r(51708),s=r(50792),a=r(46710),h=r(95540),u=r(35154),c=r(97022),l=r(41212),f=r(88492),p=r(35072),d=r(68287),v=new n({Extends:s,initialize:function(t,e,r){s.call(this),r?e&&!Array.isArray(e)&&(e=[e]):Array.isArray(e)?l(e[0])&&(r=e,e=null):l(e)&&(r=e,e=null),this.scene=t,this.children=new p,this.isParent=!0,this.type="Group",this.classType=h(r,"classType",d),this.name=h(r,"name",""),this.active=h(r,"active",!0),this.maxSize=h(r,"maxSize",-1),this.defaultKey=h(r,"defaultKey",null),this.defaultFrame=h(r,"defaultFrame",null),this.runChildUpdate=h(r,"runChildUpdate",!1),this.createCallback=h(r,"createCallback",null),this.removeCallback=h(r,"removeCallback",null),this.createMultipleCallback=h(r,"createMultipleCallback",null),this.internalCreateCallback=h(r,"internalCreateCallback",null),this.internalRemoveCallback=h(r,"internalRemoveCallback",null),e&&this.addMultiple(e),r&&this.createMultiple(r),this.on(o.ADDED_TO_SCENE,this.addedToScene,this),this.on(o.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(t,e,r,i,n,o){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=this.defaultKey),void 0===i&&(i=this.defaultFrame),void 0===n&&(n=!0),void 0===o&&(o=!0),this.isFull())return null;var s=new this.classType(this.scene,t,e,r,i);return s.addToDisplayList(this.scene.sys.displayList),s.addToUpdateList(),s.visible=n,s.setActive(o),this.add(s),s},createMultiple:function(t){if(this.isFull())return[];Array.isArray(t)||(t=[t]);var e=[];if(t[0].key)for(var r=0;r<t.length;r++){var i=this.createFromConfig(t[r]);e=e.concat(i)}return e},createFromConfig:function(t){if(this.isFull())return[];this.classType=h(t,"classType",this.classType);var e=h(t,"key",void 0),r=h(t,"frame",null),n=h(t,"visible",!0),o=h(t,"active",!0),s=[];if(void 0===e)return s;Array.isArray(e)||(e=[e]),Array.isArray(r)||(r=[r]);var a=h(t,"repeat",0),l=h(t,"randomKey",!1),p=h(t,"randomFrame",!1),d=h(t,"yoyo",!1),v=h(t,"quantity",!1),y=h(t,"frameQuantity",1),g=h(t,"max",0),m=f(e,r,{max:g,qty:v||y,random:l,randomB:p,repeat:a,yoyo:d});t.createCallback&&(this.createCallback=t.createCallback),t.removeCallback&&(this.removeCallback=t.removeCallback),t.internalCreateCallback&&(this.internalCreateCallback=t.internalCreateCallback),t.internalRemoveCallback&&(this.internalRemoveCallback=t.internalRemoveCallback);for(var x=0;x<m.length;x++){var b=this.create(0,0,m[x].a,m[x].b,n,o);if(!b)break;s.push(b)}if(c(t,"setXY")){var w=u(t,"setXY.x",0),E=u(t,"setXY.y",0),T=u(t,"setXY.stepX",0),S=u(t,"setXY.stepY",0);i.SetXY(s,w,E,T,S)}if(c(t,"setRotation")){var _=u(t,"setRotation.value",0),O=u(t,"setRotation.step",0);i.SetRotation(s,_,O)}if(c(t,"setScale")){var P=u(t,"setScale.x",1),M=u(t,"setScale.y",P),A=u(t,"setScale.stepX",0),L=u(t,"setScale.stepY",0);i.SetScale(s,P,M,A,L)}if(c(t,"setOrigin")){var C=u(t,"setOrigin.x",.5),R=u(t,"setOrigin.y",C),k=u(t,"setOrigin.stepX",0),F=u(t,"setOrigin.stepY",0);i.SetOrigin(s,C,R,k,F)}if(c(t,"setAlpha")){var I=u(t,"setAlpha.value",1),D=u(t,"setAlpha.step",0);i.SetAlpha(s,I,D)}if(c(t,"setDepth")){var j=u(t,"setDepth.value",0),B=u(t,"setDepth.step",0);i.SetDepth(s,j,B)}if(c(t,"setScrollFactor")){var N=u(t,"setScrollFactor.x",1),G=u(t,"setScrollFactor.y",N),U=u(t,"setScrollFactor.stepX",0),Y=u(t,"setScrollFactor.stepY",0);i.SetScrollFactor(s,N,G,U,Y)}var z=h(t,"hitArea",null),X=h(t,"hitAreaCallback",null);z&&i.SetHitArea(s,z,X);var V=h(t,"gridAlign",!1);return V&&i.GridAlign(s,V),this.createMultipleCallback&&this.createMultipleCallback.call(this,s),s},preUpdate:function(t,e){if(this.runChildUpdate&&0!==this.children.size)for(var r=this.children.entries.slice(),i=0;i<r.length;i++){var n=r[i];n.active&&n.update(t,e)}},add:function(t,e){return void 0===e&&(e=!1),this.isFull()||(this.children.set(t),this.internalCreateCallback&&this.internalCreateCallback.call(this,t),this.createCallback&&this.createCallback.call(this,t),e&&(t.addToDisplayList(this.scene.sys.displayList),t.addToUpdateList()),t.on(o.DESTROY,this.remove,this)),this},addMultiple:function(t,e){if(void 0===e&&(e=!1),Array.isArray(t))for(var r=0;r<t.length;r++)this.add(t[r],e);return this},remove:function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),this.children.contains(t)?(this.children.delete(t),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,t),this.removeCallback&&this.removeCallback.call(this,t),t.off(o.DESTROY,this.remove,this),r?t.destroy():e&&(t.removeFromDisplayList(),t.removeFromUpdateList()),this):this},clear:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);for(var r=this.children,i=0;i<r.size;i++){var n=r.entries[i];n.off(o.DESTROY,this.remove,this),e?n.destroy():t&&(n.removeFromDisplayList(),n.removeFromUpdateList())}return this.children.clear(),this},contains:function(t){return this.children.contains(t)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(t,e,r,i){return a(this.children.entries,t,e,r,i)},getFirst:function(t,e,r,i,n,o,s){return this.getHandler(!0,1,t,e,r,i,n,o,s)},getFirstNth:function(t,e,r,i,n,o,s,a){return this.getHandler(!0,t,e,r,i,n,o,s,a)},getLast:function(t,e,r,i,n,o,s){return this.getHandler(!1,1,t,e,r,i,n,o,s)},getLastNth:function(t,e,r,i,n,o,s,a){return this.getHandler(!1,t,e,r,i,n,o,s,a)},getHandler:function(t,e,r,i,n,o,s,a,h){var u,c;void 0===r&&(r=!1),void 0===i&&(i=!1);var l=0,f=this.children.entries;if(t)for(c=0;c<f.length;c++)if((u=f[c]).active===r){if(++l===e)break}else u=null;else for(c=f.length-1;c>=0;c--)if((u=f[c]).active===r){if(++l===e)break}else u=null;return u?("number"==typeof n&&(u.x=n),"number"==typeof o&&(u.y=o),u):i?this.create(n,o,s,a,h):null},get:function(t,e,r,i,n){return this.getFirst(!1,!0,t,e,r,i,n)},getFirstAlive:function(t,e,r,i,n,o){return this.getFirst(!0,t,e,r,i,n,o)},getFirstDead:function(t,e,r,i,n,o){return this.getFirst(!1,t,e,r,i,n,o)},playAnimation:function(t,e){return i.PlayAnimation(this.children.entries,t,e),this},isFull:function(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(t){void 0===t&&(t=!0);for(var e=0,r=0;r<this.children.size;r++)this.children.entries[r].active===t&&e++;return e},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var t=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-t},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},propertyValueSet:function(t,e,r,n,o){return i.PropertyValueSet(this.children.entries,t,e,r,n,o),this},propertyValueInc:function(t,e,r,n,o){return i.PropertyValueInc(this.children.entries,t,e,r,n,o),this},setX:function(t,e){return i.SetX(this.children.entries,t,e),this},setY:function(t,e){return i.SetY(this.children.entries,t,e),this},setXY:function(t,e,r,n){return i.SetXY(this.children.entries,t,e,r,n),this},incX:function(t,e){return i.IncX(this.children.entries,t,e),this},incY:function(t,e){return i.IncY(this.children.entries,t,e),this},incXY:function(t,e,r,n){return i.IncXY(this.children.entries,t,e,r,n),this},shiftPosition:function(t,e,r){return i.ShiftPosition(this.children.entries,t,e,r),this},angle:function(t,e){return i.Angle(this.children.entries,t,e),this},rotate:function(t,e){return i.Rotate(this.children.entries,t,e),this},rotateAround:function(t,e){return i.RotateAround(this.children.entries,t,e),this},rotateAroundDistance:function(t,e,r){return i.RotateAroundDistance(this.children.entries,t,e,r),this},setAlpha:function(t,e){return i.SetAlpha(this.children.entries,t,e),this},setTint:function(t,e,r,n){return i.SetTint(this.children.entries,t,e,r,n),this},setOrigin:function(t,e,r,n){return i.SetOrigin(this.children.entries,t,e,r,n),this},scaleX:function(t,e){return i.ScaleX(this.children.entries,t,e),this},scaleY:function(t,e){return i.ScaleY(this.children.entries,t,e),this},scaleXY:function(t,e,r,n){return i.ScaleXY(this.children.entries,t,e,r,n),this},setDepth:function(t,e){return i.SetDepth(this.children.entries,t,e),this},setBlendMode:function(t){return i.SetBlendMode(this.children.entries,t),this},setHitArea:function(t,e){return i.SetHitArea(this.children.entries,t,e),this},shuffle:function(){return i.Shuffle(this.children.entries),this},kill:function(t){this.children.contains(t)&&t.setActive(!1)},killAndHide:function(t){this.children.contains(t)&&(t.setActive(!1),t.setVisible(!1))},setVisible:function(t,e,r){return i.SetVisible(this.children.entries,t,e,r),this},toggleVisible:function(){return i.ToggleVisible(this.children.entries),this},destroy:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.scene&&!this.ignoreDestroy&&(this.emit(o.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(e,t),this.scene=void 0,this.children=void 0)}});t.exports=v},94975:(t,e,r)=>{var i=r(44603),n=r(26479);i.register("group",(function(t){return new n(this.scene,null,t)}))},3385:(t,e,r)=>{var i=r(26479);r(39429).register("group",(function(t,e){return this.updateList.add(new i(this.scene,t,e))}))},88571:(t,e,r)=>{var i=r(83419),n=r(31401),o=r(95643),s=r(59819),a=new i({Extends:o,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,s],initialize:function(t,e,r,i,n){o.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(i,n),this.setPosition(e,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});t.exports=a},40652:t=>{t.exports=function(t,e,r,i){r.addToRenderList(e),t.batchSprite(e,e.frame,r,i)}},82459:(t,e,r)=>{var i=r(25305),n=r(44603),o=r(23568),s=r(88571);n.register("image",(function(t,e){void 0===t&&(t={});var r=o(t,"key",null),n=o(t,"frame",null),a=new s(this.scene,0,0,r,n);return void 0!==e&&(t.add=e),i(this.scene,a,t),a}))},2117:(t,e,r)=>{var i=r(88571);r(39429).register("image",(function(t,e,r,n){return this.displayList.add(new i(this.scene,t,e,r,n))}))},59819:(t,e,r)=>{var i,n,o=r(29747);i=r(99517),n=r(40652),t.exports={renderWebGL:i,renderCanvas:n}},99517:t=>{t.exports=function(t,e,r,i){r.addToRenderList(e),this.pipeline.batchSprite(e,r,i)}},77856:(t,e,r)=>{var i={Events:r(51708),DisplayList:r(8050),GameObjectCreator:r(44603),GameObjectFactory:r(39429),UpdateList:r(45027),Components:r(31401),GetCalcMatrix:r(91296),BuildGameObject:r(25305),BuildGameObjectAnimation:r(13059),GameObject:r(95643),BitmapText:r(22186),Blitter:r(6107),Bob:r(46590),Container:r(31559),DOMElement:r(3069),DynamicBitmapText:r(2638),Extern:r(42421),Graphics:r(43831),Group:r(26479),Image:r(88571),Layer:r(93595),Particles:r(18404),PathFollower:r(1159),RenderTexture:r(591),RetroFont:r(196),Rope:r(77757),Sprite:r(68287),Text:r(50171),GetTextSize:r(14220),MeasureText:r(79557),TextStyle:r(35762),TileSprite:r(20839),Zone:r(41481),Video:r(18471),Shape:r(17803),Arc:r(23629),Curve:r(89),Ellipse:r(19921),Grid:r(30479),IsoBox:r(61475),IsoTriangle:r(16933),Line:r(57847),Polygon:r(24949),Rectangle:r(74561),Star:r(55911),Triangle:r(36931),Factories:{Blitter:r(12709),Container:r(24961),DOMElement:r(2611),DynamicBitmapText:r(72566),Extern:r(56315),Graphics:r(1201),Group:r(3385),Image:r(2117),Layer:r(20005),Particles:r(676),PathFollower:r(90145),RenderTexture:r(60505),Rope:r(96819),Sprite:r(46409),StaticBitmapText:r(34914),Text:r(68005),TileSprite:r(91681),Zone:r(84175),Video:r(89025),Arc:r(42563),Curve:r(40511),Ellipse:r(1543),Grid:r(34137),IsoBox:r(3933),IsoTriangle:r(49803),Line:r(2481),Polygon:r(64827),Rectangle:r(87959),Star:r(93697),Triangle:r(45245)},Creators:{Blitter:r(9403),Container:r(77143),DynamicBitmapText:r(11164),Graphics:r(87079),Group:r(94975),Image:r(82459),Layer:r(25179),Particles:r(92730),RenderTexture:r(34495),Rope:r(26209),Sprite:r(15567),StaticBitmapText:r(57336),Text:r(71259),TileSprite:r(14167),Zone:r(95261),Video:r(11511)}};i.Shader=r(20071),i.Mesh=r(4703),i.NineSlice=r(28103),i.PointLight=r(80321),i.Plane=r(33663),i.Factories.Shader=r(74177),i.Factories.Mesh=r(9225),i.Factories.NineSlice=r(47521),i.Factories.PointLight=r(71255),i.Factories.Plane=r(30985),i.Creators.Shader=r(54935),i.Creators.Mesh=r(20527),i.Creators.NineSlice=r(28279),i.Creators.PointLight=r(39829),i.Creators.Plane=r(56015),i.Light=r(41432),i.LightsManager=r(61356),i.LightsPlugin=r(88992),t.exports=i},93595:(t,e,r)=>{var i=r(10312),n=r(83419),o=r(31401),s=r(53774),a=r(45893),h=r(50792),u=r(51708),c=r(73162),l=r(33963),f=r(44594),p=r(19186),d=new n({Extends:c,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Mask,o.PostPipeline,o.Visible,h,l],initialize:function(t,e){c.call(this,t),h.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(i.SKIP_CHECK),e&&this.add(e),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(t,e){return this.data||(this.data=new a(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new a(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new a(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new a(this)),this.data.get(t)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return s(this)},willRender:function(t){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,r=[];e&&(r.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return r.unshift(this.displayList.getIndex(t)),r},addChildCallback:function(t){var e=t.displayList;e&&e!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(u.ADDED_TO_SCENE,t,this.scene),this.events.emit(f.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(u.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(f.REMOVED_FROM_SCENE,t,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(u.ADDED_TO_SCENE,this,this.scene),t.events.emit(f.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(u.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(f.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(t){if(this.scene&&!this.ignoreDestroy){this.emit(u.DESTROY,this);for(var e=this.list;e.length;)e[0].destroy(t);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});t.exports=d},2956:t=>{t.exports=function(t,e,r){var i=e.list;if(0!==i.length){e.depthSort();var n=-1!==e.blendMode;n||t.setBlendMode(0);var o=e._alpha;e.mask&&e.mask.preRenderCanvas(t,null,r);for(var s=0;s<i.length;s++){var a=i[s];if(a.willRender(r)){var h=a.alpha;n||a.blendMode===t.currentBlendMode||t.setBlendMode(a.blendMode),a.setAlpha(h*o),a.renderCanvas(t,a,r),a.setAlpha(h)}}e.mask&&e.mask.postRenderCanvas(t)}}},25179:(t,e,r)=>{var i=r(25305),n=r(93595),o=r(44603),s=r(23568);o.register("layer",(function(t,e){void 0===t&&(t={});var r=s(t,"children",null),o=new n(this.scene,r);return void 0!==e&&(t.add=e),i(this.scene,o,t),o}))},20005:(t,e,r)=>{var i=r(93595);r(39429).register("layer",(function(t){return this.displayList.add(new i(this.scene,t))}))},33963:(t,e,r)=>{var i,n,o=r(29747);i=r(15869),n=r(2956),t.exports={renderWebGL:i,renderCanvas:n}},15869:t=>{t.exports=function(t,e,r){var i=e.list,n=i.length;if(0!==n){e.depthSort(),t.pipelines.preBatch(e);var o=-1!==e.blendMode;o||t.setBlendMode(0);for(var s=e.alpha,a=0;a<n;a++){var h=i[a];if(h.willRender(r)){var u,c,l,f;if(void 0!==h.alphaTopLeft)u=h.alphaTopLeft,c=h.alphaTopRight,l=h.alphaBottomLeft,f=h.alphaBottomRight;else{var p=h.alpha;u=p,c=p,l=p,f=p}o||h.blendMode===t.currentBlendMode||t.setBlendMode(h.blendMode);var d=h.mask;d&&d.preRenderWebGL(t,h,r);var v=h.type;v!==t.currentType&&(t.newType=!0,t.currentType=v),t.nextTypeMatch=a<n-1&&i[a+1].type===t.currentType,h.setAlpha(u*s,c*s,l*s,f*s),h.renderWebGL(t,h,r),h.setAlpha(u,c,l,f),d&&d.postRenderWebGL(t,r),t.newType=!1}}t.pipelines.postBatch(e)}}},41432:(t,e,r)=>{var i=r(96503),n=r(83419),o=r(31401),s=r(51767),a=r(70554),h=new n({Extends:i,Mixins:[o.Origin,o.ScrollFactor,o.Visible],initialize:function(t,e,r,n,o,a,h){i.call(this,t,e,r),this.color=new s(n,o,a),this.intensity=h,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(r)},displayWidth:{get:function(){return this.diameter},set:function(t){this.diameter=t}},displayHeight:{get:function(){return this.diameter},set:function(t){this.diameter=t}},width:{get:function(){return this.diameter},set:function(t){this.diameter=t}},height:{get:function(){return this.diameter},set:function(t){this.diameter=t}},willRender:function(t){return!(h.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setColor:function(t){var e=a.getFloatsFromUintRGB(t);return this.color.set(e[0],e[1],e[2]),this},setIntensity:function(t){return this.intensity=t,this},setRadius:function(t){return this.radius=t,this}});h.RENDER_MASK=15,t.exports=h},61356:(t,e,r)=>{var i=r(81491),n=r(83419),o=r(20339),s=r(41432),a=r(80321),h=r(51767),u=r(19133),c=r(19186),l=r(70554),f=new n({initialize:function(){this.lights=[],this.ambientColor=new h(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(t,e,r,i,n,o){return this.systems.displayList.add(new a(this.scene,t,e,r,i,n,o))},enable:function(){return-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(t){for(var e=this.lights,r=t.worldView,n=[],s=0;s<e.length;s++){var a=e[s];a.willRender(t)&&i(a,r)&&n.push({light:a,distance:o(a.x,a.y,r.centerX,r.centerY)})}return n.length>this.maxLights&&(c(n,this.sortByDistance),n=n.slice(0,this.maxLights)),this.visibleLights=n.length,n},sortByDistance:function(t,e){return t.distance>=e.distance},setAmbientColor:function(t){var e=l.getFloatsFromUintRGB(t);return this.ambientColor.set(e[0],e[1],e[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(t,e,r,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=128),void 0===i&&(i=16777215),void 0===n&&(n=1);var o=l.getFloatsFromUintRGB(i),a=new s(t,e,r,o[0],o[1],o[2],n);return this.lights.push(a),a},removeLight:function(t){var e=this.lights.indexOf(t);return e>=0&&u(this.lights,e),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});t.exports=f},88992:(t,e,r)=>{var i=r(83419),n=r(61356),o=r(37277),s=r(44594),a=new i({Extends:n,initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(s.BOOT,this.boot,this),n.call(this)},boot:function(){var t=this.systems.events;t.on(s.SHUTDOWN,this.shutdown,this),t.on(s.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});o.register("LightsPlugin",a,"lights"),t.exports=a},4703:(t,e,r)=>{var i=r(83419),n=r(31401),o=r(39506),s=r(83997),a=r(95643),h=r(34684),u=r(92515),c=r(91296),l=r(37867),f=r(29807),p=r(43396),d=r(19186),v=r(25836),y=r(39318),g=new i({Extends:a,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Size,n.Texture,n.Transform,n.Visible,f],initialize:function(t,e,r,i,n,o,s,h,u,c,f,p){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i="__WHITE"),a.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new v,this.modelScale=new v(1,1,1),this.modelRotation=new v,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new l,this.viewPosition=new v,this.viewMatrix=new l,this.projectionMatrix=new l,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var d=t.sys.renderer;this.setPosition(e,r),this.setTexture(i,n),this.setSize(d.width,d.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(d.width,d.height),o&&this.addVertices(o,s,h,u,c,f,p)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(t){return this.viewPosition.addScale(v.LEFT,t),this.dirtyCache[10]=1,this},panY:function(t){return this.viewPosition.y+=v.DOWN.y*t,this.dirtyCache[10]=1,this},panZ:function(t){return this.viewPosition.z+=t,this.dirtyCache[10]=1,this},setPerspective:function(t,e,r,i,n){return void 0===r&&(r=45),void 0===i&&(i=.01),void 0===n&&(n=1e3),this.fov=r,this.projectionMatrix.perspective(o(r),t/e,i,n),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(t,e,r,i){return void 0===t&&(t=this.scene.sys.renderer.getAspectRatio()),void 0===e&&(e=1),void 0===r&&(r=-1e3),void 0===i&&(i=1e3),this.fov=0,this.projectionMatrix.ortho(-t,t,-e,e,r,i),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach((function(t){t.destroy()})),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(t,e,r,i,n,o,s,a,u){var c,l=this.scene.sys.cache.obj.get(t);return l&&(c=h(l,this,e,r,i,n,o,s,a,u)),c&&0!==c.verts.length||console.warn("Mesh.addVerticesFromObj data empty:",t),this},sortByDepth:function(t,e){return t.depth-e.depth},depthSort:function(){return d(this.faces,this.sortByDepth),this},addVertex:function(t,e,r,i,n,o,s){var a=new y(t,e,r,i,n,o,s);return this.vertices.push(a),a},addFace:function(t,e,r){var i=new s(t,e,r);return this.faces.push(i),this.dirtyCache[9]=-1,i},addVertices:function(t,e,r,i,n,o,s){var a=u(t,e,r,i,n,o,s);return a?(this.faces=this.faces.concat(a.faces),this.vertices=this.vertices.concat(a.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(t){return this.faces[t]},hasFaceAt:function(t,e,r){void 0===r&&(r=this.scene.sys.cameras.main);for(var i=c(this,r).calc,n=this.faces,o=0;o<n.length;o++)if(n[o].contains(t,e,i))return!0;return!1},getFaceAt:function(t,e,r){void 0===r&&(r=this.scene.sys.cameras.main);for(var i=c(this,r).calc,n=this.faces,o=[],s=0;s<n.length;s++){var a=n[s];a.contains(t,e,i)&&o.push(a)}return d(o,this.sortByDepth)},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebug:null,this},isDirty:function(){var t=this.modelPosition,e=this.modelRotation,r=this.modelScale,i=this.dirtyCache,n=t.x,o=t.y,s=t.z,a=e.x,h=e.y,u=e.z,c=r.x,l=r.y,f=r.z,p=this.getFaceCount(),d=i[0],v=i[1],y=i[2],g=i[3],m=i[4],x=i[5],b=i[6],w=i[7],E=i[8],T=i[9];return i[0]=n,i[1]=o,i[2]=s,i[3]=a,i[4]=h,i[5]=u,i[6]=c,i[7]=l,i[8]=f,i[9]=p,d!==n||v!==o||y!==s||g!==a||m!==h||x!==u||b!==c||w!==l||E!==f||T!==p},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var t=this.dirtyCache;if(this.ignoreDirtyCache||t[10]||this.isDirty()){var e=this.width,r=this.height,i=this.viewMatrix,n=this.viewPosition;t[10]&&(i.identity(),i.translate(n),i.invert(),t[10]=0);var o=this.transformMatrix;o.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var s=n.z,a=this.faces,h=0;h<a.length;h++)a[h].transformCoordinatesLocal(o,e,r,s);this.depthSort()}},renderDebug:function(t,e){for(var r=t.debugGraphic,i=0;i<e.length;i++){var n=e[i],o=n.vertex1.tx,s=n.vertex1.ty,a=n.vertex2.tx,h=n.vertex2.ty,u=n.vertex3.tx,c=n.vertex3.ty;r.strokeTriangle(o,s,a,h,u,c)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(t){void 0===t&&(t={});var e=function(t,e,r){for(var i=this.faces,n=0;n<i.length;n++)if(i[n].contains(e,r))return!0;return!1}.bind(this);return this.scene.sys.input.enable(this,t,e),this},setTint:function(t){void 0===t&&(t=16777215);for(var e=this.vertices,r=0;r<e.length;r++)e[r].color=t;return this},uvScroll:function(t,e){for(var r=this.faces,i=0;i<r.length;i++)r[i].scrollUV(t,e);return this},uvScale:function(t,e){for(var r=this.faces,i=0;i<r.length;i++)r[i].scaleUV(t,e);return this},tint:{set:function(t){this.setTint(t)}},rotateX:{get:function(){return p(this.modelRotation.x)},set:function(t){this.modelRotation.x=o(t)}},rotateY:{get:function(){return p(this.modelRotation.y)},set:function(t){this.modelRotation.y=o(t)}},rotateZ:{get:function(){return p(this.modelRotation.z)},set:function(t){this.modelRotation.z=o(t)}}});t.exports=g},36488:t=>{t.exports=function(){}},20527:(t,e,r)=>{var i=r(25305),n=r(44603),o=r(23568),s=r(35154),a=r(4703);n.register("mesh",(function(t,e){void 0===t&&(t={});var r=o(t,"key",null),n=o(t,"frame",null),h=s(t,"vertices",[]),u=s(t,"uvs",[]),c=s(t,"indicies",[]),l=s(t,"containsZ",!1),f=s(t,"normals",[]),p=s(t,"colors",16777215),d=s(t,"alphas",1),v=new a(this.scene,0,0,r,n,h,u,c,l,f,p,d);return void 0!==e&&(t.add=e),i(this.scene,v,t),v}))},9225:(t,e,r)=>{var i=r(4703);r(39429).register("mesh",(function(t,e,r,n,o,s,a,h,u,c,l){return this.displayList.add(new i(this.scene,t,e,r,n,o,s,a,h,u,c,l))}))},29807:(t,e,r)=>{var i,n,o=r(29747);i=r(48833),n=r(36488),t.exports={renderWebGL:i,renderCanvas:n}},48833:(t,e,r)=>{var i=r(91296);t.exports=function(t,e,r,n){var o=e.faces,s=o.length;if(0!==s){r.addToRenderList(e);var a=t.pipelines.set(e.pipeline,e),h=i(e,r,n).calc;t.pipelines.preBatch(e);for(var u=a.setGameObject(e),c=a.vertexViewF32,l=a.vertexViewU32,f=a.vertexCount*a.currentShader.vertexComponentCount-1,p=e.tintFill,d=[],v=e.debugCallback,y=h.a,g=h.b,m=h.c,x=h.d,b=h.e,w=h.f,E=e.viewPosition.z,T=e.hideCCW,S=r.roundPixels,_=r.alpha*e.alpha,O=0,P=0;P<s;P++){var M=o[P];M.isInView(r,T,E,_,y,g,m,x,b,w,S)&&(a.shouldFlush(3)&&(a.flush(),u=a.setGameObject(e),f=0),f=M.load(c,l,f,u,p),O++,a.vertexCount+=3,a.currentBatch.count=a.vertexCount-a.currentBatch.start,v&&d.push(M))}e.totalFrame+=O,v&&v.call(e,e,d),t.pipelines.postBatch(e)}}},28103:(t,e,r)=>{var i=r(83419),n=r(31401),o=r(95643),s=r(78023),a=r(39318),h=new i({Extends:o,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Texture,n.Transform,n.Visible,s],initialize:function(t,e,r,i,n,s,h,u,c,l,f){o.call(this,t,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var p=t.textures.getFrame(i,n);this.is3Slice=!l&&!f,p.scale9&&(this.is3Slice=p.is3Slice);for(var d=this.is3Slice?18:54,v=0;v<d;v++)this.vertices.push(new a);this.setPosition(e,r),this.setTexture(i,n),this.setSlices(s,h,u,c,l,f,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(t,e,r,i,n,o,s){void 0===r&&(r=10),void 0===i&&(i=10),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=!1);var a=this.frame,h=!1;if(this.is3Slice&&s&&0!==n&&0!==o&&(h=!0),h)console.warn("Cannot change 9 slice to 3 slice");else{if(a.scale9&&!s){var u=a.data.scale9Borders,c=u.x,l=u.y;r=c,i=a.width-u.w-c,n=l,o=a.height-u.h-l,void 0===t&&(t=a.width),void 0===e&&(e=a.height)}else void 0===t&&(t=256),void 0===e&&(e=256);this._width=t,this._height=e,this.leftWidth=r,this.rightWidth=i,this.topHeight=n,this.bottomHeight=o,this.is3Slice&&(e=a.height,this._height=e,this.topHeight=e,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var t=this.leftWidth,e=this.rightWidth,r=this.topHeight,i=this.bottomHeight,n=this.frame.width,o=this.frame.height;this.updateQuadUVs(0,0,0,t/n,r/o),this.updateQuadUVs(6,t/n,0,1-e/n,r/o),this.updateQuadUVs(12,1-e/n,0,1,r/o),this.is3Slice||(this.updateQuadUVs(18,0,r/o,t/n,1-i/o),this.updateQuadUVs(24,t/n,r/o,1-e/n,1-i/o),this.updateQuadUVs(30,1-e/n,r/o,1,1-i/o),this.updateQuadUVs(36,0,1-i/o,t/n,1),this.updateQuadUVs(42,t/n,1-i/o,1-e/n,1),this.updateQuadUVs(48,1-e/n,1-i/o,1,1))},updateVertices:function(){var t=this.leftWidth,e=this.rightWidth,r=this.topHeight,i=this.bottomHeight,n=this.width,o=this.height;this.updateQuad(0,-.5,.5,t/n-.5,.5-r/o),this.updateQuad(6,t/n-.5,.5,.5-e/n,.5-r/o),this.updateQuad(12,.5-e/n,.5,.5,.5-r/o),this.is3Slice||(this.updateQuad(18,-.5,.5-r/o,t/n-.5,i/o-.5),this.updateQuad(24,t/n-.5,.5-r/o,.5-e/n,i/o-.5),this.updateQuad(30,.5-e/n,.5-r/o,.5,i/o-.5),this.updateQuad(36,-.5,i/o-.5,t/n-.5,-.5),this.updateQuad(42,t/n-.5,i/o-.5,.5-e/n,-.5),this.updateQuad(48,.5-e/n,i/o-.5,.5,-.5))},updateQuad:function(t,e,r,i,n){var o=this.width,s=this.height,a=this.originX,h=this.originY,u=this.vertices;u[t+0].resize(e,r,o,s,a,h),u[t+1].resize(e,n,o,s,a,h),u[t+2].resize(i,r,o,s,a,h),u[t+3].resize(e,n,o,s,a,h),u[t+4].resize(i,n,o,s,a,h),u[t+5].resize(i,r,o,s,a,h)},updateQuadUVs:function(t,e,r,i,n){var o=this.vertices,s=this.frame,a=s.u0,h=s.v0,u=s.u1,c=s.v1;if(0!==a||1!==u){var l=u-a;e=a+e*l,i=a+i*l}if(0!==h||1!==c){var f=c-h;r=h+r*f,n=h+n*f}o[t+0].setUVs(e,r),o[t+1].setUVs(e,n),o[t+2].setUVs(i,r),o[t+3].setUVs(e,n),o[t+4].setUVs(i,n),o[t+5].setUVs(i,r)},clearTint:function(){return this.setTint(16777215),this},setTint:function(t){return void 0===t&&(t=16777215),this.tint=t,this.tintFill=!1,this},setTintFill:function(t){return this.setTint(t),this.tintFill=!0,this},isTinted:{get:function(){return 16777215!==this.tint}},width:{get:function(){return this._width},set:function(t){this._width=Math.max(t,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(t){this.is3Slice||(this._height=Math.max(t,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){this.width=t,this.height=e,this.updateDisplayOrigin();var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=this.width,r.hitArea.height=this.height),this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},originX:{get:function(){return this._originX},set:function(t){this._originX=t,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(t){this._originY=t,this.updateVertices()}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this._originX=t,this._originY=e,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var t=this.frame.height;this._height=t,this.topHeight=t,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});t.exports=h},28279:(t,e,r)=>{var i=r(25305),n=r(44603),o=r(23568),s=r(35154),a=r(28103);n.register("nineslice",(function(t,e){void 0===t&&(t={});var r=o(t,"key",null),n=o(t,"frame",null),h=s(t,"width",256),u=s(t,"height",256),c=s(t,"leftWidth",10),l=s(t,"rightWidth",10),f=s(t,"topHeight",0),p=s(t,"bottomHeight",0),d=new a(this.scene,0,0,r,n,h,u,c,l,f,p);return void 0!==e&&(t.add=e),i(this.scene,d,t),d}))},47521:(t,e,r)=>{var i=r(28103);r(39429).register("nineslice",(function(t,e,r,n,o,s,a,h,u,c){return this.displayList.add(new i(this.scene,t,e,r,n,o,s,a,h,u,c))}))},78023:(t,e,r)=>{var i,n=r(29747),o=n;i=r(52230),t.exports={renderWebGL:i,renderCanvas:o}},52230:(t,e,r)=>{var i=r(91296),n=r(70554);t.exports=function(t,e,r,o){var s=e.vertices,a=s.length;if(0!==a){r.addToRenderList(e);var h=t.pipelines.set(e.pipeline,e),u=i(e,r,o,!1).calc;t.pipelines.preBatch(e);var c=h.setGameObject(e),l=h.vertexViewF32,f=h.vertexViewU32,p=h.vertexCount*h.currentShader.vertexComponentCount-1,d=r.roundPixels,v=e.tintFill,y=r.alpha*e.alpha,g=n.getTintAppendFloatAlpha(e.tint,y),m=h.vertexAvailable(),x=-1;m<a&&(x=m);for(var b=0;b<a;b++){var w=s[b];b===x&&(h.flush(),c=h.setGameObject(e),p=0),l[++p]=u.getXRound(w.vx,w.vy,d),l[++p]=u.getYRound(w.vx,w.vy,d),l[++p]=w.u,l[++p]=w.v,l[++p]=c,l[++p]=v,f[++p]=g,h.vertexCount++,h.currentBatch.count=h.vertexCount-h.currentBatch.start}t.pipelines.postBatch(e)}}},76472:(t,e,r)=>{var i=r(83419),n=r(44777),o=r(37589),s=r(6113),a=r(91389),h=r(90664),u=new i({Extends:n,initialize:function(t){n.call(this,t,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return null===this.propertyValue?0:9},setMethods:function(){var t=this.propertyValue,e=t,r=this.defaultEmit,i=this.defaultUpdate;if(9===this.method){this.start=t[0],this.ease=s("Linear"),this.interpolation=a("linear"),r=this.easedValueEmit,i=this.easeValueUpdate,e=t[0],this.active=!0;for(var n=0;n<t.length;n++){var o=h(t[n]);this.r.push(o.r),this.g.push(o.g),this.b.push(o.b)}}return this.onEmit=r,this.onUpdate=i,this.current=e,this},setEase:function(t){this.easeName=t,this.ease=s(t)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(t,e,r){var i=this.ease(r),n=this.interpolation(this.r,i),s=this.interpolation(this.g,i),a=this.interpolation(this.b,i),h=o(n,s,a);return this.current=h,h}});t.exports=u},44777:(t,e,r)=>{var i=r(30976),n=r(45319),o=r(83419),s=r(99472),a=r(6113),h=r(95540),u=r(91389),c=r(77720),l=r(15994),f=new o({initialize:function(t,e,r){void 0===r&&(r=!1),this.propertyKey=t,this.propertyValue=e,this.defaultValue=e,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=r,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(t,e){void 0===t&&(t={}),e&&(this.propertyKey=e),this.propertyValue=h(t,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(t){var e;switch(this.method){case 1:case 3:case 8:e=t;break;case 2:this.propertyValue.indexOf(t)>=0&&(e=t);break;case 4:var r=(this.end-this.start)/this.steps;e=c(t,r),this.counter=e;break;case 5:case 6:case 7:e=n(t,this.start,this.end);break;case 9:e=this.start[0]}return this.current=e,this},getMethod:function(){var t=this.propertyValue;if(null===t)return 0;var e=typeof t;if("number"===e)return 1;if(Array.isArray(t))return 2;if("function"===e)return 3;if("object"===e){if(this.hasBoth(t,"start","end"))return this.has(t,"steps")?4:5;if(this.hasBoth(t,"min","max"))return 6;if(this.has(t,"random"))return 7;if(this.hasEither(t,"onEmit","onUpdate"))return 8;if(this.hasEither(t,"values","interpolation"))return 9}return 0},setMethods:function(){var t=this.propertyValue,e=t,r=this.defaultEmit,i=this.defaultUpdate;switch(this.method){case 1:r=this.staticValueEmit;break;case 2:r=this.randomStaticValueEmit,e=t[0];break;case 3:this._onEmit=t,r=this.proxyEmit;break;case 4:this.start=t.start,this.end=t.end,this.steps=t.steps,this.counter=this.start,this.yoyo=!!this.has(t,"yoyo")&&t.yoyo,this.direction=0,r=this.steppedEmit,e=this.start;break;case 5:this.start=t.start,this.end=t.end;var n=this.has(t,"ease")?t.ease:"Linear";this.ease=a(n,t.easeParams),r=this.has(t,"random")&&t.random?this.randomRangedValueEmit:this.easedValueEmit,i=this.easeValueUpdate,e=this.start;break;case 6:this.start=t.min,this.end=t.max,r=this.has(t,"int")&&t.int?this.randomRangedIntEmit:this.randomRangedValueEmit,e=this.start;break;case 7:var o=t.random;Array.isArray(o)&&(this.start=o[0],this.end=o[1]),r=this.randomRangedIntEmit,e=this.start;break;case 8:this._onEmit=this.has(t,"onEmit")?t.onEmit:this.defaultEmit,this._onUpdate=this.has(t,"onUpdate")?t.onUpdate:this.defaultUpdate,r=this.proxyEmit,i=this.proxyUpdate;break;case 9:this.start=t.values;var s=this.has(t,"ease")?t.ease:"Linear";this.ease=a(s,t.easeParams),this.interpolation=u(t.interpolation),r=this.easedValueEmit,i=this.easeValueUpdate,e=this.start[0]}return this.onEmit=r,this.onUpdate=i,this.current=e,this},has:function(t,e){return t.hasOwnProperty(e)},hasBoth:function(t,e,r){return t.hasOwnProperty(e)&&t.hasOwnProperty(r)},hasEither:function(t,e,r){return t.hasOwnProperty(e)||t.hasOwnProperty(r)},defaultEmit:function(t,e,r){return r},defaultUpdate:function(t,e,r,i){return i},proxyEmit:function(t,e,r){var i=this._onEmit(t,e,r);return this.current=i,i},proxyUpdate:function(t,e,r,i){var n=this._onUpdate(t,e,r,i);return this.current=n,n},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[t],this.current},randomRangedValueEmit:function(t,e){var r=s(this.start,this.end);return t&&t.data[e]&&(t.data[e].min=r,t.data[e].max=this.end),this.current=r,r},randomRangedIntEmit:function(t,e){var r=i(this.start,this.end);return t&&t.data[e]&&(t.data[e].min=r,t.data[e].max=this.end),this.current=r,r},steppedEmit:function(){var t,e=this.counter,r=e,i=(this.end-this.start)/this.steps;return this.yoyo?(0===this.direction?(r+=i)>=this.end&&(t=r-this.end,r=this.end-t,this.direction=1):(r-=i)<=this.start&&(t=this.start-r,r=this.start+t,this.direction=0),this.counter=r):this.counter=l(r+i,this.start,this.end),this.current=e,e},easedValueEmit:function(t,e){if(t&&t.data[e]){var r=t.data[e];r.min=this.start,r.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(t,e,r){var i,n=t.data[e],o=this.ease(r);return i=this.interpolation?this.interpolation(this.start,o):(n.max-n.min)*o+n.min,this.current=i,i},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});t.exports=f},24502:(t,e,r)=>{var i=r(83419),n=r(95540),o=r(20286),s=new i({Extends:o,initialize:function(t,e,r,i,s){if("object"==typeof t){var a=t;t=n(a,"x",0),e=n(a,"y",0),r=n(a,"power",0),i=n(a,"epsilon",100),s=n(a,"gravity",50)}else void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=100),void 0===s&&(s=50);o.call(this,t,e,!0),this._gravity=s,this._power=r*s,this._epsilon=i*i},update:function(t,e){var r=this.x-t.x,i=this.y-t.y,n=r*r+i*i;if(0!==n){var o=Math.sqrt(n);n<this._epsilon&&(n=this._epsilon);var s=this._power*e/(n*o)*100;t.velocityX+=r*s,t.velocityY+=i*s}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(t){this._epsilon=t*t}},power:{get:function(){return this._power/this._gravity},set:function(t){this._power=t*this._gravity}},gravity:{get:function(){return this._gravity},set:function(t){var e=this.power;this._gravity=t,this.power=e}}});t.exports=s},56480:(t,e,r)=>{var i=r(9674),n=r(45319),o=r(83419),s=r(39506),a=r(87841),h=r(11520),u=r(26099),c=new o({initialize:function(t){this.emitter=t,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new u,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=t.scene,this.anims=new i(this),this.bounds=new a},emit:function(t,e,r,i,n,o){return this.emitter.emit(t,e,r,i,n,o)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},fire:function(t,e){var r=this.emitter,i=r.ops,n=r.getAnim();if(n?this.anims.play(n):(this.frame=r.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(r.getEmitZone(this),void 0===t?this.x+=i.x.onEmit(this,"x"):i.x.steps>0?this.x+=t+i.x.onEmit(this,"x"):this.x+=t,void 0===e?this.y+=i.y.onEmit(this,"y"):i.y.steps>0?this.y+=e+i.y.onEmit(this,"y"):this.y+=e,this.life=i.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=i.delay.onEmit(this,"delay"),this.holdCurrent=i.hold.onEmit(this,"hold"),this.scaleX=i.scaleX.onEmit(this,"scaleX"),this.scaleY=i.scaleY.active?i.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=i.rotate.onEmit(this,"rotate"),this.rotation=s(this.angle),r.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),0===this.delayCurrent&&r.getDeathZone(this))return this.lifeCurrent=0,!1;var o=i.speedX.onEmit(this,"speedX"),a=i.speedY.active?i.speedY.onEmit(this,"speedY"):o;if(r.radial){var h=s(i.angle.onEmit(this,"angle"));this.velocityX=Math.cos(h)*Math.abs(o),this.velocityY=Math.sin(h)*Math.abs(a)}else if(r.moveTo){var u=i.moveToX.onEmit(this,"moveToX"),c=i.moveToY.onEmit(this,"moveToY"),l=this.life/1e3;this.velocityX=(u-this.x)/l,this.velocityY=(c-this.y)/l}else this.velocityX=o,this.velocityY=a;return r.acceleration&&(this.accelerationX=i.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=i.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=i.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=i.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=i.bounce.onEmit(this,"bounce"),this.alpha=i.alpha.onEmit(this,"alpha"),i.color.active?this.tint=i.color.onEmit(this,"tint"):this.tint=i.tint.onEmit(this,"tint"),!0},update:function(t,e,r){if(this.lifeCurrent<=0)return!(this.holdCurrent>0)||(this.holdCurrent-=t,this.holdCurrent<=0);if(this.delayCurrent>0)return this.delayCurrent-=t,!1;this.anims.update(0,t);var i=this.emitter,o=i.ops,a=1-this.lifeCurrent/this.life;if(this.lifeT=a,this.x=o.x.onUpdate(this,"x",a,this.x),this.y=o.y.onUpdate(this,"y",a,this.y),i.moveTo){var h=o.moveToX.onUpdate(this,"moveToX",a,i.moveToX),u=o.moveToY.onUpdate(this,"moveToY",a,i.moveToY),c=this.lifeCurrent/1e3;this.velocityX=(h-this.x)/c,this.velocityY=(u-this.y)/c}return this.computeVelocity(i,t,e,r,a),this.scaleX=o.scaleX.onUpdate(this,"scaleX",a,this.scaleX),o.scaleY.active?this.scaleY=o.scaleY.onUpdate(this,"scaleY",a,this.scaleY):this.scaleY=this.scaleX,this.angle=o.rotate.onUpdate(this,"rotate",a,this.angle),this.rotation=s(this.angle),i.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=n(o.alpha.onUpdate(this,"alpha",a,this.alpha),0,1),o.color.active?this.tint=o.color.onUpdate(this,"color",a,this.tint):this.tint=o.tint.onUpdate(this,"tint",a,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(t,e,r,i,o){var s=t.ops,a=this.velocityX,h=this.velocityY,u=s.accelerationX.onUpdate(this,"accelerationX",o,this.accelerationX),c=s.accelerationY.onUpdate(this,"accelerationY",o,this.accelerationY),l=s.maxVelocityX.onUpdate(this,"maxVelocityX",o,this.maxVelocityX),f=s.maxVelocityY.onUpdate(this,"maxVelocityY",o,this.maxVelocityY);this.bounce=s.bounce.onUpdate(this,"bounce",o,this.bounce),a+=t.gravityX*r+u*r,h+=t.gravityY*r+c*r,a=n(a,-l,l),h=n(h,-f,f),this.velocityX=a,this.velocityY=h,this.x+=a*r,this.y+=h*r,t.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var p=0;p<i.length;p++){var d=i[p];d.active&&d.update(this,e,r,o)}},setSizeToFrame:function(){},getBounds:function(t){void 0===t&&(t=this.emitter.getWorldTransformMatrix());var e=Math.abs(t.scaleX)*this.scaleX,r=Math.abs(t.scaleY)*this.scaleY,i=this.x,n=this.y,o=this.rotation,s=this.frame.width*e/2,a=this.frame.height*r/2,c=this.bounds,l=new u(i-s,n-a),f=new u(i+s,n-a),p=new u(i-s,n+a),d=new u(i+s,n+a);return 0!==o&&(h(l,i,n,o),h(f,i,n,o),h(p,i,n,o),h(d,i,n,o)),t.transformPoint(l.x,l.y,l),t.transformPoint(f.x,f.y,f),t.transformPoint(p.x,p.y,p),t.transformPoint(d.x,d.y,d),c.x=Math.min(l.x,f.x,p.x,d.x),c.y=Math.min(l.y,f.y,p.y,d.y),c.width=Math.max(l.x,f.x,p.x,d.x)-c.x,c.height=Math.max(l.y,f.y,p.y,d.y)-c.y,c},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});t.exports=c},69601:(t,e,r)=>{var i=r(83419),n=r(20286),o=r(87841),s=new i({Extends:n,initialize:function(t,e,r,i,s,a,h,u){void 0===s&&(s=!0),void 0===a&&(a=!0),void 0===h&&(h=!0),void 0===u&&(u=!0),n.call(this,t,e,!0),this.bounds=new o(t,e,r,i),this.collideLeft=s,this.collideRight=a,this.collideTop=h,this.collideBottom=u},update:function(t){var e=this.bounds,r=-t.bounce,i=t.worldPosition;i.x<e.x&&this.collideLeft?(t.x+=e.x-i.x,t.velocityX*=r):i.x>e.right&&this.collideRight&&(t.x-=i.x-e.right,t.velocityX*=r),i.y<e.y&&this.collideTop?(t.y+=e.y-i.y,t.velocityY*=r):i.y>e.bottom&&this.collideBottom&&(t.y-=i.y-e.bottom,t.velocityY*=r)}});t.exports=s},31600:(t,e,r)=>{var i=r(83419),n=r(31401),o=r(53774),s=r(43459),a=r(26388),h=r(19909),u=r(76472),c=r(44777),l=r(20696),f=r(95643),p=r(95540),d=r(26546),v=r(24502),y=r(1985),g=r(97022),m=r(86091),x=r(73162),b=r(20074),w=r(56480),E=r(68875),T=r(87841),S=r(59996),_=r(72905),O=r(90668),P=r(19186),M=r(61340),A=r(26099),L=r(15994),C=r(69601),R=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],k=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],F=new i({Extends:f,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Texture,n.Transform,n.Visible,O],initialize:function(t,e,r,i,n){f.call(this,t,"ParticleEmitter"),this.particleClass=w,this.ops={accelerationX:new c("accelerationX",0),accelerationY:new c("accelerationY",0),alpha:new c("alpha",1),angle:new c("angle",{min:0,max:360},!0),bounce:new c("bounce",0),color:new u("color"),delay:new c("delay",0,!0),hold:new c("hold",0,!0),lifespan:new c("lifespan",1e3,!0),maxVelocityX:new c("maxVelocityX",1e4),maxVelocityY:new c("maxVelocityY",1e4),moveToX:new c("moveToX",0),moveToY:new c("moveToY",0),quantity:new c("quantity",1,!0),rotate:new c("rotate",0),scaleX:new c("scaleX",1),scaleY:new c("scaleY",1),speedX:new c("speedX",0,!0),speedY:new c("speedY",0,!0),tint:new c("tint",16777215),x:new c("x",0),y:new c("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new A,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new M,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new x(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(e,r),this.setTexture(i),n&&this.setConfig(n)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(t){if(!t)return this;var e=0,r="",i=this.ops;for(e=0;e<k.length;e++)i[r=k[e]].loadConfig(t);for(e=0;e<R.length;e++)g(t,r=R[e])&&(this[r]=p(t,r));if(this.acceleration=0!==this.accelerationX||0!==this.accelerationY,this.moveTo=0!==this.moveToX&&0!==this.moveToY,g(t,"speed")&&(i.speedX.loadConfig(t,"speed"),i.speedY.active=!1),(y(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),g(t,"scale")&&(i.scaleX.loadConfig(t,"scale"),i.scaleY.active=!1),g(t,"callbackScope")){var n=p(t,"callbackScope",null);this.emitCallbackScope=n,this.deathCallbackScope=n}if(g(t,"emitZone")&&this.addEmitZone(t.emitZone),g(t,"deathZone")&&this.addDeathZone(t.deathZone),g(t,"bounds")){var o=this.addParticleBounds(t.bounds);o.collideLeft=p(t,"collideLeft",!0),o.collideRight=p(t,"collideRight",!0),o.collideTop=p(t,"collideTop",!0),o.collideBottom=p(t,"collideBottom",!0)}return g(t,"followOffset")&&this.followOffset.setFromObject(p(t,"followOffset",0)),g(t,"texture")&&this.setTexture(t.texture),g(t,"frame")?this.setEmitterFrame(t.frame):g(t,"anim")&&this.setAnim(t.anim),g(t,"reserve")&&this.reserve(t.reserve),g(t,"advance")&&this.fastForward(t.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(l.START,this),this},toJSON:function(){var t=o(this),e=0,r="";for(e=0;e<R.length;e++)t[r=R[e]]=this[r];var i=this.ops;for(e=0;e<k.length;e++)i[r=k[e]]&&(t[r]=i[r].toJSON());return i.speedY.active||(delete t.speedX,t.speed=i.speedX.toJSON()),this.scaleX===this.scaleY&&(delete t.scaleX,delete t.scaleY,t.scale=i.scaleX.toJSON()),t},resetCounters:function(t,e){var r=this.counters;r.fill(0),r[0]=t,e&&(r[5]=1)},startFollow:function(t,e,r,i){return void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=!1),this.follow=t,this.followOffset.set(e,r),this.trackVisible=i,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var t,e=this.frames,r=e.length;return 1===r?t=e[0]:this.randomFrame?t=d(e):(t=e[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===r&&(this.currentFrame=0))),this.texture.get(t)},setEmitterFrame:function(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=1),this.randomFrame=e,this.frameQuantity=r,this.currentFrame=0;var i=typeof t;if(this.frames.length=0,Array.isArray(t))this.frames=this.frames.concat(t);else if("string"===i||"number"===i)this.frames.push(t);else if("object"===i){var n=t;(t=p(n,"frames",null))&&(this.frames=this.frames.concat(t));var o=p(n,"cycle",!1);this.randomFrame=!o,this.frameQuantity=p(n,"quantity",r)}return 1===this.frames.length&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var t=this.anims,e=t.length;if(0===e)return null;if(1===e)return t[0];if(this.randomAnim)return d(t);var r=t[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=L(this.currentAnim+1,0,e)),r},setAnim:function(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=1),this.randomAnim=e,this.animQuantity=r,this.currentAnim=0;var i=typeof t;if(this.anims.length=0,Array.isArray(t))this.anims=this.anims.concat(t);else if("string"===i)this.anims.push(t);else if("object"===i){var n=t;(t=p(n,"anims",null))&&(this.anims=this.anims.concat(t));var o=p(n,"cycle",!1);this.randomAnim=!o,this.animQuantity=p(n,"quantity",r)}return 1===this.anims.length&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(t){return void 0===t&&(t=!0),this.radial=t,this},addParticleBounds:function(t,e,r,i,n,o,s,a){if("object"==typeof t){var h=t;t=h.x,e=h.y,r=g(h,"w")?h.w:h.width,i=g(h,"h")?h.h:h.height}return this.addParticleProcessor(new C(t,e,r,i,n,o,s,a))},setParticleSpeed:function(t,e){return void 0===e&&(e=t),this.ops.speedX.onChange(t),t===e?this.ops.speedY.active=!1:this.ops.speedY.onChange(e),this.radial=!0,this},setParticleScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.ops.scaleX.onChange(t),this.ops.scaleY.onChange(e),this},setParticleGravity:function(t,e){return this.gravityX=t,this.gravityY=e,this},setParticleAlpha:function(t){return this.ops.alpha.onChange(t),this},setParticleTint:function(t){return this.ops.tint.onChange(t),this},setEmitterAngle:function(t){return this.ops.angle.onChange(t),this},setParticleLifespan:function(t){return this.ops.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity=t,this},setFrequency:function(t,e){return this.frequency=t,this.flowCounter=t>0?t:0,e&&(this.quantity=e),this},addDeathZone:function(t){var e;Array.isArray(t)||(t=[t]);for(var r=[],i=0;i<t.length;i++)if((e=t[i])instanceof a)r.push(e);else if("function"==typeof e.contains)e=new a(e,!0),r.push(e);else{var n=p(e,"type","onEnter"),o=p(e,"source",null);o&&"function"==typeof o.contains&&(e=new a(o,"onEnter"===n),r.push(e))}return this.deathZones=this.deathZones.concat(r),r},removeDeathZone:function(t){return _(this.deathZones,t),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(t){var e;Array.isArray(t)||(t=[t]);for(var r=[],i=0;i<t.length;i++)if((e=t[i])instanceof E||e instanceof h)r.push(e);else{var n=p(e,"source",null);if(n){var o=p(e,"type","random");if("random"===o&&"function"==typeof n.getRandomPoint)e=new E(n),r.push(e);else if("edge"===o&&"function"==typeof n.getPoints){var s=p(e,"quantity",1),a=p(e,"stepRate",0),u=p(e,"yoyo",!1),c=p(e,"seamless",!0),l=p(e,"total",-1);e=new h(n,s,a,u,c,l),r.push(e)}}}return this.emitZones=this.emitZones.concat(r),r},removeEmitZone:function(t){return _(this.emitZones,t),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(t){var e=this.emitZones,r=e.length;if(0!==r){var i=e[this.zoneIndex];i.getPoint(t),i.total>-1&&(this.zoneTotal++,this.zoneTotal===i.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===r&&(this.zoneIndex=0)))}},getDeathZone:function(t){for(var e=this.deathZones,r=0;r<e.length;r++){var i=e[r];if(i.willKill(t))return this.emit(l.DEATH_ZONE,this,t,i),!0}return!1},setEmitZone:function(t){var e;return(e=isFinite(t)?t:this.emitZones.indexOf(t))>=0&&(this.zoneIndex=e),this},addParticleProcessor:function(t){return this.processors.exists(t)||(t.emitter&&t.emitter.removeParticleProcessor(t),this.processors.add(t),t.emitter=this),t},removeParticleProcessor:function(t){return this.processors.exists(t)&&(this.processors.remove(t,!0),t.emitter=null),t},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(t){return this.addParticleProcessor(new v(t))},reserve:function(t){var e=this.dead;if(this.maxParticles>0){var r=this.getParticleCount();r+t>this.maxParticles&&(t=this.maxParticles-(r+t))}for(var i=0;i<t;i++)e.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles||this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(t,e){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,e&&(this.emitCallbackScope=e)),this},onParticleDeath:function(t,e){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,e&&(this.deathCallbackScope=e)),this},killAll:function(){for(var t=this.dead,e=this.alive;e.length>0;)t.push(e.pop());return this},forEachAlive:function(t,e){for(var r=this.alive,i=r.length,n=0;n<i;n++)t.call(e,r[n],this);return this},forEachDead:function(t,e){for(var r=this.dead,i=r.length,n=0;n<i;n++)t.call(e,r[n],this);return this},start:function(t,e){return void 0===t&&(t=0),this.emitting||(t>0&&this.fastForward(t),this.emitting=!0,this.resetCounters(this.frequency,!0),void 0!==e&&(this.duration=Math.abs(e)),this.emit(l.START,this)),this},stop:function(t){return void 0===t&&(t=!1),this.emitting&&(this.emitting=!1,t&&this.killAll(),this.emit(l.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(t,e){return void 0===t&&(t=""),void 0===e&&(e=this.true),this.sortProperty=t,this.sortOrderAsc=e,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(t){return t=""!==this.sortProperty?this.depthSortCallback:null,this.sortCallback=t,this},depthSort:function(){return P(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(t,e){var r=this.sortProperty;return this.sortOrderAsc?t[r]-e[r]:e[r]-t[r]},flow:function(t,e,r){return void 0===e&&(e=1),this.emitting=!1,this.frequency=t,this.quantity=e,void 0!==r&&(this.stopAfter=r),this.start()},explode:function(t,e,r){this.frequency=-1,this.resetCounters(-1,!0);var i=this.emitParticle(t,e,r);return this.emit(l.EXPLODE,this,i),i},emitParticleAt:function(t,e,r){return this.emitParticle(r,t,e)},emitParticle:function(t,e,r){if(!this.atLimit()){void 0===t&&(t=this.ops.quantity.onEmit());for(var i=this.dead,n=this.stopAfter,o=this.follow?this.follow.x+this.followOffset.x:e,s=this.follow?this.follow.y+this.followOffset.y:r,a=0;a<t;a++){var h=i.pop();if(h||(h=new this.particleClass(this)),h.fire(o,s)?(this.particleBringToTop?this.alive.push(h):this.alive.unshift(h),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,h,this)):this.dead.push(h),n>0&&(this.stopCounter++,this.stopCounter>=n))break;if(this.atLimit())break}return h}},fastForward:function(t,e){void 0===e&&(e=1e3/60);var r=0;for(this.skipping=!0;r<Math.abs(t);)this.preUpdate(0,e),r+=e;return this.skipping=!1,this},preUpdate:function(t,e){var r=(e*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var i=this.getProcessors(),n=this.alive,o=this.dead,s=0,a=[],h=n.length;for(s=0;s<h;s++){var u=n[s];u.update(e,r,i)&&a.push({index:s,particle:u})}if((h=a.length)>0){var c=this.deathCallback,f=this.deathCallbackScope;for(s=h-1;s>=0;s--){var p=a[s];n.splice(p.index,1),o.push(p.particle),c&&c.call(f,p.particle),p.particle.setPosition()}}if(this.emitting||this.skipping){if(0===this.frequency)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=e;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=e,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())}else 1===this.completeFlag&&0===n.length&&(this.completeFlag=0,this.emit(l.COMPLETE,this))},overlap:function(t){for(var e=this.getWorldTransformMatrix(),r=this.alive,i=r.length,n=[],o=0;o<i;o++){var s=r[o];S(t,s.getBounds(e))&&n.push(s)}return n},getBounds:function(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=1e3/60),void 0===i&&(i=new T);var n,o,a=this.getWorldTransformMatrix(),h=this.alive,u=!1;if(i.setTo(0,0,0,0),e>0){var c=0;for(this.skipping=!0;c<Math.abs(e);){for(this.preUpdate(0,r),n=0;n<h.length;n++)o=h[n].getBounds(a),u?b(i,o):(u=!0,s(o,i));c+=r}this.skipping=!1}else for(n=0;n<h.length;n++)o=h[n].getBounds(a),u?b(i,o):(u=!0,s(o,i));return t>0&&m(i,t,t),i},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(t){this.ops.x.onChange(t)}},particleY:{get:function(){return this.ops.y.current},set:function(t){this.ops.y.onChange(t)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(t){this.ops.accelerationX.onChange(t)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(t){this.ops.accelerationY.onChange(t)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(t){this.ops.maxVelocityX.onChange(t)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(t){this.ops.maxVelocityY.onChange(t)}},speed:{get:function(){return this.ops.speedX.current},set:function(t){this.ops.speedX.onChange(t),this.ops.speedY.onChange(t)}},speedX:{get:function(){return this.ops.speedX.current},set:function(t){this.ops.speedX.onChange(t)}},speedY:{get:function(){return this.ops.speedY.current},set:function(t){this.ops.speedY.onChange(t)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(t){this.ops.moveToX.onChange(t)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(t){this.ops.moveToY.onChange(t)}},bounce:{get:function(){return this.ops.bounce.current},set:function(t){this.ops.bounce.onChange(t)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(t){this.ops.scaleX.onChange(t)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(t){this.ops.scaleY.onChange(t)}},particleColor:{get:function(){return this.ops.color.current},set:function(t){this.ops.color.onChange(t)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(t){this.ops.color.setEase(t)}},particleTint:{get:function(){return this.ops.tint.current},set:function(t){this.ops.tint.onChange(t)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(t){this.ops.alpha.onChange(t)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(t){this.ops.lifespan.onChange(t)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(t){this.ops.angle.onChange(t)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(t){this.ops.rotate.onChange(t)}},quantity:{get:function(){return this.ops.quantity.current},set:function(t){this.ops.quantity.onChange(t)}},delay:{get:function(){return this.ops.delay.current},set:function(t){this.ops.delay.onChange(t)}},hold:{get:function(){return this.ops.hold.current},set:function(t){this.ops.hold.onChange(t)}},flowCounter:{get:function(){return this.counters[0]},set:function(t){this.counters[0]=t}},frameCounter:{get:function(){return this.counters[1]},set:function(t){this.counters[1]=t}},animCounter:{get:function(){return this.counters[2]},set:function(t){this.counters[2]=t}},elapsed:{get:function(){return this.counters[3]},set:function(t){this.counters[3]=t}},stopCounter:{get:function(){return this.counters[4]},set:function(t){this.counters[4]=t}},completeFlag:{get:function(){return this.counters[5]},set:function(t){this.counters[5]=t}},zoneIndex:{get:function(){return this.counters[6]},set:function(t){this.counters[6]=t}},zoneTotal:{get:function(){return this.counters[7]},set:function(t){this.counters[7]=t}},currentFrame:{get:function(){return this.counters[8]},set:function(t){this.counters[8]=t}},currentAnim:{get:function(){return this.counters[9]},set:function(t){this.counters[9]=t}},preDestroy:function(){var t;this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var e=this.ops;for(t=0;t<k.length;t++)e[k[t]].destroy();for(t=0;t<this.alive.length;t++)this.alive[t].destroy();for(t=0;t<this.dead.length;t++)this.dead[t].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});t.exports=F},9871:(t,e,r)=>{var i=r(59996),n=r(61340),o=new n,s=new n,a=new n,h=new n;t.exports=function(t,e,r,n){var u=o,c=s,l=a,f=h;n?(f.loadIdentity(),f.multiply(n),f.translate(e.x,e.y),f.rotate(e.rotation),f.scale(e.scaleX,e.scaleY)):f.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var p=t.currentContext,d=r.roundPixels,v=r.alpha,y=e.alpha,g=e.alive,m=g.length,x=e.viewBounds;if(e.visible&&0!==m&&(!x||i(x,r.worldView))){e.sortCallback&&e.depthSort(),r.addToRenderList(e);var b=e.scrollFactorX,w=e.scrollFactorY;p.save(),p.globalCompositeOperation=t.blendModes[e.blendMode];for(var E=0;E<m;E++){var T=g[E],S=T.alpha*y*v;if(!(S<=0||0===T.scaleX||0===T.scaleY)){l.applyITRS(T.x,T.y,T.rotation,T.scaleX,T.scaleY),u.copyFrom(r.matrix),u.multiplyWithOffset(f,-r.scrollX*b,-r.scrollY*w),l.e=T.x,l.f=T.y,u.multiply(l,c);var _=T.frame,O=_.canvasData;if(O.width>0&&O.height>0){var P=-_.halfWidth,M=-_.halfHeight;p.globalAlpha=S,p.save(),c.setToContext(p),d&&(P=Math.round(P),M=Math.round(M)),p.imageSmoothingEnabled=!_.source.scaleMode,p.drawImage(_.source.image,O.x,O.y,O.width,O.height,P,M,O.width,O.height),p.restore()}}}p.restore()}}},92730:(t,e,r)=>{var i=r(25305),n=r(44603),o=r(23568),s=r(95540),a=r(31600);n.register("particles",(function(t,e){void 0===t&&(t={});var r=o(t,"key",null),n=s(t,"config",null),h=new a(this.scene,0,0,r);return void 0!==e&&(t.add=e),i(this.scene,h,t),n&&h.setConfig(n),h}))},676:(t,e,r)=>{var i=r(39429),n=r(31600);i.register("particles",(function(t,e,r,i){return void 0!==t&&"string"==typeof t&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new n(this.scene,t,e,r,i))}))},90668:(t,e,r)=>{var i,n,o=r(29747);i=r(21188),n=r(9871),t.exports={renderWebGL:i,renderCanvas:n}},21188:(t,e,r)=>{var i=r(59996),n=r(61340),o=r(70554),s=new n,a=new n,h=new n,u=new n;t.exports=function(t,e,r,n){var c=t.pipelines.set(e.pipeline),l=s,f=a,p=h,d=u;n?(d.loadIdentity(),d.multiply(n),d.translate(e.x,e.y),d.rotate(e.rotation),d.scale(e.scaleX,e.scaleY)):d.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var v=o.getTintAppendFloatAlpha,y=r.alpha,g=e.alpha;t.pipelines.preBatch(e);var m=e.alive,x=m.length,b=e.viewBounds;if(0!==x&&(!b||i(b,r.worldView))){e.sortCallback&&e.depthSort(),r.addToRenderList(e),l.copyFrom(r.matrix),l.multiplyWithOffset(d,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),t.setBlendMode(e.blendMode),e.mask&&(e.mask.preRenderWebGL(t,e,r),t.pipelines.set(e.pipeline));for(var w,E,T=e.tintFill,S=0;S<x;S++){var _=m[S],O=_.alpha*g*y;if(!(O<=0||0===_.scaleX||0===_.scaleY)){p.applyITRS(_.x,_.y,_.rotation,_.scaleX,_.scaleY),p.e=_.x,p.f=_.y,l.multiply(p,f);var P=_.frame;P.glTexture!==E&&(E=P.glTexture,w=c.setGameObject(e,P));var M=-P.halfWidth,A=-P.halfHeight,L=f.setQuad(M,A,M+P.width,A+P.height),C=v(_.tint,O);c.shouldFlush(6)&&(c.flush(),w=c.setGameObject(e,P)),c.batchQuad(e,L[0],L[1],L[2],L[3],L[4],L[5],L[6],L[7],P.u0,P.v0,P.u1,P.v1,C,C,C,C,T,E,w)}}e.mask&&e.mask.postRenderWebGL(t,r),t.pipelines.postBatch(e)}}},20286:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=!0),this.emitter,this.x=t,this.y=e,this.active=r},update:function(){},destroy:function(){this.emitter=null}});t.exports=i},9774:t=>{t.exports="complete"},812:t=>{t.exports="deathzone"},30522:t=>{t.exports="explode"},96695:t=>{t.exports="start"},18677:t=>{t.exports="stop"},20696:(t,e,r)=>{t.exports={COMPLETE:r(9774),DEATH_ZONE:r(812),EXPLODE:r(30522),START:r(96695),STOP:r(18677)}},18404:(t,e,r)=>{t.exports={EmitterColorOp:r(76472),EmitterOp:r(44777),Events:r(20696),GravityWell:r(24502),Particle:r(56480),ParticleBounds:r(69601),ParticleEmitter:r(31600),ParticleProcessor:r(20286),Zones:r(21024)}},26388:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e){this.source=t,this.killOnEnter=e},willKill:function(t){var e=t.worldPosition,r=this.source.contains(e.x,e.y);return r&&this.killOnEnter||!r&&!this.killOnEnter}});t.exports=i},19909:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e,r,i,n,o){void 0===i&&(i=!1),void 0===n&&(n=!0),void 0===o&&(o=-1),this.source=t,this.points=[],this.quantity=e,this.stepRate=r,this.yoyo=i,this.counter=-1,this.seamless=n,this._length=0,this._direction=0,this.total=o,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],e=this.points[this.points.length-1];t.x===e.x&&t.y===e.y&&this.points.pop()}var r=this._length;return this._length=this.points.length,this._length<r&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var e=this.points[this.counter];e&&(t.x=e.x,t.y=e.y)}});t.exports=i},68875:(t,e,r)=>{var i=r(83419),n=r(26099),o=new i({initialize:function(t){this.source=t,this._tempVec=new n,this.total=-1},getPoint:function(t){var e=this._tempVec;this.source.getRandomPoint(e),t.x=e.x,t.y=e.y}});t.exports=o},21024:(t,e,r)=>{t.exports={DeathZone:r(26388),EdgeZone:r(19909),RandomZone:r(68875)}},1159:(t,e,r)=>{var i=r(83419),n=r(31401),o=r(68287),s=new i({Extends:o,Mixins:[n.PathFollower],initialize:function(t,e,r,i,n,s){o.call(this,t,r,i,n,s),this.path=e},preUpdate:function(t,e){this.anims.update(t,e),this.pathUpdate(t)}});t.exports=s},90145:(t,e,r)=>{var i=r(39429),n=r(1159);i.register("follower",(function(t,e,r,i,o){var s=new n(this.scene,t,e,r,i,o);return this.displayList.add(s),this.updateList.add(s),s}))},33663:(t,e,r)=>{var i=r(9674),n=r(83419),o=r(48803),s=r(90664),a=r(4703),h=r(45650),u=new n({Extends:a,initialize:function(t,e,r,n,o,s,h,u){n||(n="__DEFAULT"),a.call(this,t,e,r,n,o),this.type="Plane",this.anims=new i(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(s,h,u),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return.5}},originY:{get:function(){return.5}},setGridSize:function(t,e,r){void 0===t&&(t=8),void 0===e&&(e=8),void 0===r&&(r=!1);var i=!1;return r&&(i=!0),this.gridWidth=t,this.gridHeight=e,this.isTiled=r,this.clear(),o({mesh:this,widthSegments:t,heightSegments:e,isOrtho:!1,tile:r,flipY:i}),this},setSizeToFrame:function(t){void 0===t&&(t=!0);var e=this.frame;if(this.setPerspective(this.width/e.width,this.height/e.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!t)return this;var r,i,n=this.gridWidth,o=this.gridHeight,s=this.vertices,a=e.u0,h=e.u1,u=e.v0,c=e.v1,l=0;if(this.isTiled)for(u=e.v1,c=e.v0,i=0;i<o;i++)for(r=0;r<n;r++)s[l++].setUVs(a,c),s[l++].setUVs(a,u),s[l++].setUVs(h,c),s[l++].setUVs(a,u),s[l++].setUVs(h,u),s[l++].setUVs(h,c);else{var f=n+1,p=o+1,d=h-a,v=c-u,y=[];for(i=0;i<p;i++)for(r=0;r<f;r++){var g=a+d*(r/n),m=u+v*(i/o);y.push(g,m)}for(i=0;i<o;i++)for(r=0;r<n;r++){var x=2*(r+f*i),b=2*(r+f*(i+1)),w=2*(r+1+f*(i+1)),E=2*(r+1+f*i);s[l++].setUVs(y[x],y[x+1]),s[l++].setUVs(y[b],y[b+1]),s[l++].setUVs(y[E],y[E+1]),s[l++].setUVs(y[b],y[b+1]),s[l++].setUVs(y[w],y[w+1]),s[l++].setUVs(y[E],y[E+1])}}return this},setViewHeight:function(t){void 0===t&&(t=this.frame.height);var e=this.fov*(Math.PI/180);this.viewPosition.z=this.height/t/Math.tan(e/2),this.dirtyCache[10]=1},createCheckerboard:function(t,e,r,i,n){void 0===t&&(t=16777215),void 0===e&&(e=255),void 0===r&&(r=255),void 0===i&&(i=255),void 0===n&&(n=128);for(var o=s(t),a=s(e),u=[],c=0;c<16;c++)for(var l=0;l<16;l++)c<8&&l<8||c>7&&l>7?u.push(o.r,o.g,o.b,r):u.push(a.r,a.g,a.b,i);var f=this.scene.sys.textures.addUint8Array(h(),new Uint8Array(u),16,16);return this.removeCheckerboard(),this.setTexture(f),this.setSizeToFrame(),this.setViewHeight(n),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(t,e){return this.anims.play(t,e)},playReverse:function(t,e){return this.anims.playReverse(t,e)},playAfterDelay:function(t,e){return this.anims.playAfterDelay(t,e)},playAfterRepeat:function(t,e){return this.anims.playAfterRepeat(t,e)},stop:function(){return this.anims.stop()},stopAfterDelay:function(t){return this.anims.stopAfterDelay(t)},stopAfterRepeat:function(t){return this.anims.stopAfterRepeat(t)},stopOnFrame:function(t){return this.anims.stopOnFrame(t)},preUpdate:function(t,e){a.prototype.preUpdate.call(this,t,e),this.anims.update(t,e)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});t.exports=u},56015:(t,e,r)=>{var i=r(25305),n=r(13059),o=r(44603),s=r(23568),a=r(35154),h=r(33663);o.register("plane",(function(t,e){void 0===t&&(t={});var r=s(t,"key",null),o=s(t,"frame",null),u=a(t,"width",8),c=a(t,"height",8),l=a(t,"tile",!1),f=new h(this.scene,0,0,r,o,u,c,l);void 0!==e&&(t.add=e);var p=a(t,"checkerboard",null);if(p){var d=a(p,"color1",16777215),v=a(p,"color2",255),y=a(p,"alpha1",255),g=a(p,"alpha2",255),m=a(p,"height",128);f.createCheckerboard(d,v,y,g,m)}return i(this.scene,f,t),n(f,t),f}))},30985:(t,e,r)=>{var i=r(33663);r(39429).register("plane",(function(t,e,r,n,o,s,a){return this.displayList.add(new i(this.scene,t,e,r,n,o,s,a))}))},80321:(t,e,r)=>{var i=r(83419),n=r(31401),o=r(95643),s=r(30100),a=r(36060),h=r(67277),u=new i({Extends:o,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Transform,n.Visible,h],initialize:function(t,e,r,i,n,h,u){void 0===i&&(i=16777215),void 0===n&&(n=128),void 0===h&&(h=1),void 0===u&&(u=.1),o.call(this,t,"PointLight"),this.initPipeline(a.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(e,r),this.color=s(i),this.intensity=h,this.attenuation=u,this.width=2*n,this.height=2*n,this._radius=n},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this.width=2*t,this.height=2*t}},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});t.exports=u},39829:(t,e,r)=>{var i=r(25305),n=r(44603),o=r(23568),s=r(80321);n.register("pointlight",(function(t,e){void 0===t&&(t={});var r=o(t,"color",16777215),n=o(t,"radius",128),a=o(t,"intensity",1),h=o(t,"attenuation",.1),u=new s(this.scene,0,0,r,n,a,h);return void 0!==e&&(t.add=e),i(this.scene,u,t),u}))},71255:(t,e,r)=>{var i=r(39429),n=r(80321);i.register("pointlight",(function(t,e,r,i,o,s){return this.displayList.add(new n(this.scene,t,e,r,i,o,s))}))},67277:(t,e,r)=>{var i,n=r(29747),o=n;i=r(57787),t.exports={renderWebGL:i,renderCanvas:o}},57787:(t,e,r)=>{var i=r(91296);t.exports=function(t,e,r,n){r.addToRenderList(e);var o=t.pipelines.set(e.pipeline),s=i(e,r,n).calc,a=e.width,h=e.height,u=-e._radius,c=-e._radius,l=u+a,f=c+h,p=s.getX(0,0),d=s.getY(0,0),v=s.getX(u,c),y=s.getY(u,c),g=s.getX(u,f),m=s.getY(u,f),x=s.getX(l,f),b=s.getY(l,f),w=s.getX(l,c),E=s.getY(l,c);t.pipelines.preBatch(e),o.batchPointLight(e,r,v,y,g,m,x,b,w,E,p,d),t.pipelines.postBatch(e)}},591:(t,e,r)=>{var i=r(83419),n=r(81320),o=r(88571),s=new i({Extends:o,initialize:function(t,e,r,i,s){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=32),void 0===s&&(s=32);var a=new n(t.sys.textures,"",i,s);o.call(this,t,e,r,a),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(t,e){this.width=t,this.height=e,this.texture.setSize(t,e),this.updateDisplayOrigin();var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=t,r.hitArea.height=e),this},resize:function(t,e){return this.setSize(t,e),this},saveTexture:function(t){var e=this.texture;return e.key=t,e.manager.addDynamicTexture(e)&&(this._saved=!0),e},fill:function(t,e,r,i,n,o){return this.texture.fill(t,e,r,i,n,o),this},clear:function(){return this.texture.clear(),this},stamp:function(t,e,r,i,n){return this.texture.stamp(t,e,r,i,n),this},erase:function(t,e,r){return this.texture.erase(t,e,r),this},draw:function(t,e,r,i,n){return this.texture.draw(t,e,r,i,n),this},drawFrame:function(t,e,r,i,n,o){return this.texture.drawFrame(t,e,r,i,n,o),this},repeat:function(t,e,r,i,n,o,s,a,h){return this.texture.repeat(t,e,r,i,n,o,s,a,h),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(t,e,r,i,n){return this.texture.batchDraw(t,e,r,i,n),this},batchDrawFrame:function(t,e,r,i,n,o){return this.texture.batchDrawFrame(t,e,r,i,n,o),this},endDraw:function(t){return this.texture.endDraw(t),this},snapshotArea:function(t,e,r,i,n,o,s){return this.texture.snapshotArea(t,e,r,i,n,o,s),this},snapshot:function(t,e,r){return this.snapshotArea(0,0,this.width,this.height,t,e,r)},snapshotPixel:function(t,e,r){return this.snapshotArea(t,e,1,1,r,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});t.exports=s},34495:(t,e,r)=>{var i=r(25305),n=r(44603),o=r(23568),s=r(591);n.register("renderTexture",(function(t,e){void 0===t&&(t={});var r=o(t,"x",0),n=o(t,"y",0),a=o(t,"width",32),h=o(t,"height",32),u=new s(this.scene,r,n,a,h);return void 0!==e&&(t.add=e),i(this.scene,u,t),u}))},60505:(t,e,r)=>{var i=r(39429),n=r(591);i.register("renderTexture",(function(t,e,r,i){return this.displayList.add(new n(this.scene,t,e,r,i))}))},77757:(t,e,r)=>{var i=r(9674),n=r(83419),o=r(31401),s=r(95643),a=r(36060),h=r(38745),u=r(26099),c=new n({Extends:s,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Flip,o.Mask,o.Pipeline,o.PostPipeline,o.Size,o.Texture,o.Transform,o.Visible,o.ScrollFactor,h],initialize:function(t,e,r,n,o,h,c,l,f){void 0===n&&(n="__DEFAULT"),void 0===h&&(h=2),void 0===c&&(c=!0),s.call(this,t,"Rope"),this.anims=new i(this),this.points=h,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===n,this.dirty=!1,this.horizontal=c,this._flipX=!1,this._flipY=!1,this._perp=new u,this.debugCallback=null,this.debugGraphic=null,this.setTexture(n,o),this.setPosition(e,r),this.setSizeToFrame(),this.initPipeline(a.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(h)&&this.resizeArrays(h.length),this.setPoints(h,l,f),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){var r=this.anims.currentFrame;this.anims.update(t,e),this.anims.currentFrame!==r&&(this.updateUVs(),this.updateVertices())},play:function(t,e,r){return this.anims.play(t,e,r),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(t,e,r){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,e,r))},setVertical:function(t,e,r){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,e,r)):this},setTintFill:function(t){return void 0===t&&(t=!1),this.tintFill=t,this},setAlphas:function(t,e){var r=this.points.length;if(r<1)return this;var i,n=this.alphas;void 0===t?t=[1]:Array.isArray(t)||void 0!==e||(t=[t]);var o=0;if(void 0!==e)for(i=0;i<r;i++)n[o=2*i]=t,n[o+1]=e;else if(t.length===r)for(i=0;i<r;i++)n[o=2*i]=t[i],n[o+1]=t[i];else{var s=t[0];for(i=0;i<r;i++)o=2*i,t.length>o&&(s=t[o]),n[o]=s,t.length>o+1&&(s=t[o+1]),n[o+1]=s}return this},setColors:function(t){var e=this.points.length;if(e<1)return this;var r,i=this.colors;void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]);var n=0;if(t.length===e)for(r=0;r<e;r++)i[n=2*r]=t[r],i[n+1]=t[r];else{var o=t[0];for(r=0;r<e;r++)n=2*r,t.length>n&&(o=t[n]),i[n]=o,t.length>n+1&&(o=t[n+1]),i[n+1]=o}return this},setPoints:function(t,e,r){if(void 0===t&&(t=2),"number"==typeof t){var i,n,o,s=t;if(s<2&&(s=2),t=[],this.horizontal)for(o=-this.frame.halfWidth,n=this.frame.width/(s-1),i=0;i<s;i++)t.push({x:o+i*n,y:0});else for(o=-this.frame.halfHeight,n=this.frame.height/(s-1),i=0;i<s;i++)t.push({x:0,y:o+i*n})}var a=t.length,h=this.points.length;return a<1?(console.warn("Rope: Not enough points given"),this):(1===a&&(t.unshift({x:0,y:0}),a++),h!==a&&this.resizeArrays(a),this.dirty=!0,this.points=t,this.updateUVs(),null!=e&&this.setColors(e),null!=r&&this.setAlphas(r),this)},updateUVs:function(){for(var t=this.uv,e=this.points.length,r=this.frame.u0,i=this.frame.v0,n=this.frame.u1,o=this.frame.v1,s=(n-r)/(e-1),a=(o-i)/(e-1),h=0;h<e;h++){var u,c,l,f,p=4*h;this.horizontal?(this._flipX?(u=n-h*s,l=n-h*s):(u=r+h*s,l=r+h*s),this._flipY?(c=o,f=i):(c=i,f=o)):(this._flipX?(u=r,l=n):(u=n,l=r),this._flipY?(c=o-h*a,f=o-h*a):(c=i+h*a,f=i+h*a)),t[p+0]=u,t[p+1]=c,t[p+2]=l,t[p+3]=f}return this},resizeArrays:function(t){var e=this.colors,r=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t),e=new Uint32Array(2*t),r=new Float32Array(2*t);for(var i=0;i<2*t;i++)e[i]=16777215,r[i]=1;return this.colors=e,this.alphas=r,this.dirty=!0,this},updateVertices:function(){var t=this._perp,e=this.points,r=this.vertices,i=e.length;if(this.dirty=!1,!(i<1)){for(var n,o=e[0],s=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,a=0;a<i;a++){var h=e[a],u=4*a;n=a<i-1?e[a+1]:h,t.x=n.y-o.y,t.y=-(n.x-o.x);var c=t.length();t.x/=c,t.y/=c,t.x*=s,t.y*=s,r[u]=h.x+t.x,r[u+1]=h.y+t.y,r[u+2]=h.x-t.x,r[u+3]=h.y-t.y,o=h}return this}},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebugVerts:null,this},renderDebugVerts:function(t,e,r){var i=t.debugGraphic,n=r[0],o=r[1],s=r[2],a=r[3];i.lineBetween(n,o,s,a);for(var h=4;h<e;h+=4){var u=r[h+0],c=r[h+1],l=r[h+2],f=r[h+3];i.lineBetween(n,o,u,c),i.lineBetween(s,a,l,f),i.lineBetween(s,a,u,c),i.lineBetween(u,c,l,f),n=u,o=c,s=l,a=f}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(t){return this._flipY=t,this.updateUVs()}}});t.exports=c},95262:t=>{t.exports=function(){}},26209:(t,e,r)=>{var i=r(25305),n=r(44603),o=r(23568),s=r(35154),a=r(77757);n.register("rope",(function(t,e){void 0===t&&(t={});var r=o(t,"key",null),n=o(t,"frame",null),h=o(t,"horizontal",!0),u=s(t,"points",void 0),c=s(t,"colors",void 0),l=s(t,"alphas",void 0),f=new a(this.scene,0,0,r,n,u,h,c,l);return void 0!==e&&(t.add=e),i(this.scene,f,t),f}))},96819:(t,e,r)=>{var i=r(77757);r(39429).register("rope",(function(t,e,r,n,o,s,a,h){return this.displayList.add(new i(this.scene,t,e,r,n,o,s,a,h))}))},38745:(t,e,r)=>{var i,n,o=r(29747);i=r(20439),n=r(95262),t.exports={renderWebGL:i,renderCanvas:n}},20439:(t,e,r)=>{var i=r(91296),n=r(70554);t.exports=function(t,e,r,o){r.addToRenderList(e);var s=t.pipelines.set(e.pipeline,e),a=i(e,r,o).calc,h=e.vertices,u=e.uv,c=e.colors,l=e.alphas,f=e.alpha,p=n.getTintAppendFloatAlpha,d=r.roundPixels,v=h.length,y=Math.floor(.5*v);s.flush(),t.pipelines.preBatch(e);var g=s.setGameObject(e),m=s.vertexViewF32,x=s.vertexViewU32,b=s.vertexCount*s.currentShader.vertexComponentCount-1,w=0,E=e.tintFill;e.dirty&&e.updateVertices();for(var T=e.debugCallback,S=[],_=0;_<v;_+=2){var O=h[_+0],P=h[_+1],M=O*a.a+P*a.c+a.e,A=O*a.b+P*a.d+a.f;d&&(M=Math.round(M),A=Math.round(A)),m[++b]=M,m[++b]=A,m[++b]=u[_+0],m[++b]=u[_+1],m[++b]=g,m[++b]=E,x[++b]=p(c[w],r.alpha*(l[w]*f)),w++,T&&(S[_+0]=M,S[_+1]=A)}T&&T.call(e,e,v,S),s.vertexCount+=y,s.currentBatch.count=s.vertexCount-s.currentBatch.start,t.pipelines.postBatch(e)}},20071:(t,e,r)=>{var i=r(83419),n=r(31401),o=r(95643),s=r(95540),a=r(79291),h=r(61622),u=r(25479),c=r(61340),l=r(95428),f=r(92503),p=new i({Extends:o,Mixins:[n.ComputedSize,n.Depth,n.GetBounds,n.Mask,n.Origin,n.ScrollFactor,n.Transform,n.Visible,u],initialize:function(t,e,r,i,n,s,a,h){void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=128),void 0===s&&(s=128),o.call(this,t,"Shader"),this.blendMode=-1,this.shader;var u=t.sys.renderer;this.renderer=u,this.gl=u.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=u.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=u.width,this._rendererHeight=u.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(r,i),this.setSize(n,s),this.setOrigin(.5,.5),this.setShader(e,a,h),this.renderer.on(f.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(t){return!!this.renderToTexture||!(o.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setRenderToTexture:function(t,e){if(void 0===e&&(e=!1),!this.renderToTexture){var r=this.width,i=this.height,n=this.renderer;this.glTexture=n.createTextureFromSource(null,r,i,0),this.framebuffer=n.createFramebuffer(r,i,this.glTexture,!1),this._rendererWidth=r,this._rendererHeight=i,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),t&&(this.texture=this.scene.sys.textures.addGLTexture(t,this.glTexture))}return this.shader&&(n.pipelines.clear(),this.load(),this.flush(),n.pipelines.rebind()),this},setShader:function(t,e,r){if(this.renderer.contextLost)return this._deferSetShader={key:t,textures:e,textureData:r},this;if(void 0===e&&(e=[]),"string"==typeof t){var i=this.scene.sys.cache.shader;if(!i.has(t))return console.warn("Shader missing: "+t),this;this.shader=i.get(t)}else this.shader=t;var n=this.gl,o=this.renderer;this.program&&o.deleteProgram(this.program);var s=o.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);n.uniformMatrix4fv(n.getUniformLocation(s.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),n.uniformMatrix4fv(n.getUniformLocation(s.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),n.uniform2f(n.getUniformLocation(s.webGLProgram,"uResolution"),this.width,this.height),this.program=s;var h=new Date,u={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[h.getFullYear(),h.getMonth(),h.getDate(),60*h.getHours()*60+60*h.getMinutes()+h.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=a(!0,{},this.shader.uniforms,u):this.uniforms=u;for(var c=0;c<4;c++)e[c]&&this.setSampler2D("iChannel"+c,e[c],c,r);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(t){return this.pointer=t,this},projOrtho:function(t,e,r,i){if(this.renderer.contextLost)this._deferProjOrtho={left:t,right:e,bottom:r,top:i};else{var n=1/(t-e),o=1/(r-i),s=this.projectionMatrix;s[0]=-2*n,s[5]=-2*o,s[10]=-.001,s[12]=(t+e)*n,s[13]=(i+r)*o,s[14]=-0;var a=this.program,h=this.gl;this.renderer.setProgram(a),h.uniformMatrix4fv(h.getUniformLocation(a.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=e,this._rendererHeight=r}},initUniforms:function(){var t=this.renderer.glFuncMap,e=this.program;for(var r in this._textureCount=0,this.uniforms){var i=this.uniforms[r],n=i.type,o=t[n];i.uniformLocation=this.renderer.createUniformLocation(e,r),"sampler2D"!==n&&(i.glMatrix=o.matrix,i.glValueLength=o.length,i.glFunc=o.func)}},setSampler2DBuffer:function(t,e,r,i,n,o){void 0===n&&(n=0),void 0===o&&(o={});var s=this.uniforms[t];return s.value=e,o.width=r,o.height=i,s.textureData=o,this._textureCount=n,this.initSampler2D(s),this},setSampler2D:function(t,e,r,i){void 0===r&&(r=0);var n=this.scene.sys.textures;if(n.exists(e)){var o=n.getFrame(e);if(o.glTexture&&o.glTexture.isRenderTexture)return this.setSampler2DBuffer(t,o.glTexture,o.width,o.height,r,i);var s=this.uniforms[t],a=o.source;s.textureKey=e,s.source=a.image,s.value=o.glTexture,a.isGLTexture&&(i||(i={}),i.width=a.width,i.height=a.height),i&&(s.textureData=i),this._textureCount=r,this.initSampler2D(s)}return this},setUniform:function(t,e){return h(this.uniforms,t,e),this},getUniform:function(t){return s(this.uniforms,t,null)},setChannel0:function(t,e){return this.setSampler2D("iChannel0",t,0,e)},setChannel1:function(t,e){return this.setSampler2D("iChannel1",t,1,e)},setChannel2:function(t,e){return this.setSampler2D("iChannel2",t,2,e)},setChannel3:function(t,e){return this.setSampler2D("iChannel3",t,3,e)},initSampler2D:function(t){if(t.value){var e=t.textureData;if(e&&!t.value.isRenderTexture){var r=this.gl,i=t.value,n=r[s(e,"magFilter","linear").toUpperCase()],o=r[s(e,"minFilter","linear").toUpperCase()],a=r[s(e,"wrapS","repeat").toUpperCase()],h=r[s(e,"wrapT","repeat").toUpperCase()],u=r[s(e,"format","rgba").toUpperCase()],c=s(e,"flipY",!1),l=s(e,"width",i.width),f=s(e,"height",i.height),p=s(e,"source",i.pixels);e.repeat&&(a=r.REPEAT,h=r.REPEAT),e.width&&(p=null),i.update(p,l,f,c,a,h,o,n,u)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var t,e,r,i,n,o=this.gl,s=this.uniforms,a=0;for(var h in s)r=(t=s[h]).glFunc,e=t.glValueLength,i=t.uniformLocation,null!==(n=t.value)&&(1===e?t.glMatrix?r.call(o,i.webGLUniformLocation,t.transpose,n):r.call(o,i.webGLUniformLocation,n):2===e?r.call(o,i.webGLUniformLocation,n.x,n.y):3===e?r.call(o,i.webGLUniformLocation,n.x,n.y,n.z):4===e?r.call(o,i.webGLUniformLocation,n.x,n.y,n.z,n.w):"sampler2D"===t.type&&(o.activeTexture(o.TEXTURE0+a),o.bindTexture(o.TEXTURE_2D,n.webGLTexture),o.uniform1i(i.webGLUniformLocation,a),a++))},load:function(t){var e=this.gl,r=this.width,i=this.height,n=this.renderer,o=this.program,s=this.viewMatrix;if(!this.renderToTexture){var a=-this._displayOriginX,h=-this._displayOriginY;s[0]=t[0],s[1]=t[1],s[4]=t[2],s[5]=t[3],s[8]=t[4],s[9]=t[5],s[12]=s[0]*a+s[4]*h,s[13]=s[1]*a+s[5]*h}e.useProgram(o.webGLProgram),e.uniformMatrix4fv(e.getUniformLocation(o.webGLProgram,"uViewMatrix"),!1,s),e.uniformMatrix4fv(e.getUniformLocation(o.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),e.uniform2f(e.getUniformLocation(o.webGLProgram,"uResolution"),this.width,this.height);var u=this.uniforms,c=u.resolution;c.value.x=r,c.value.y=i,u.time.value=n.game.loop.getDuration();var l=this.pointer;if(l){var f=u.mouse,p=l.x/r,d=1-l.y/i;f.value.x=p.toFixed(2),f.value.y=d.toFixed(2)}this.syncUniforms()},flush:function(){var t=this.width,e=this.height,r=this.program,i=this.gl,n=this.vertexBuffer,o=this.renderer,s=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(o.setFramebuffer(this.framebuffer),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT)),i.bindBuffer(i.ARRAY_BUFFER,n.webGLBuffer);var a=i.getAttribLocation(r.webGLProgram,"inPosition");-1!==a&&(i.enableVertexAttribArray(a),i.vertexAttribPointer(a,2,i.FLOAT,!1,s,0));var h=this.vertexViewF32;h[3]=e,h[4]=t,h[5]=e,h[8]=t,h[9]=e,h[10]=t,i.bufferSubData(i.ARRAY_BUFFER,0,this.bytes.subarray(0,6*s)),i.drawArrays(i.TRIANGLES,0,6),this.renderToTexture&&o.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(null!==this._deferSetShader){var t=this._deferSetShader.key,e=this._deferSetShader.textures,r=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(t,e,r)}if(null!==this._deferProjOrtho){var i=this._deferProjOrtho.left,n=this._deferProjOrtho.right,o=this._deferProjOrtho.bottom,s=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(i,n,o,s)}},preDestroy:function(){var t=this.renderer;t.off(f.RESTORE_WEBGL,this.onContextRestored,this),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(t.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),l(this.uniforms,(function(e){t.deleteUniformLocation(e.uniformLocation),e.uniformLocation=null}))}});t.exports=p},80464:t=>{t.exports=function(){}},54935:(t,e,r)=>{var i=r(25305),n=r(44603),o=r(23568),s=r(20071);n.register("shader",(function(t,e){void 0===t&&(t={});var r=o(t,"key",null),n=o(t,"x",0),a=o(t,"y",0),h=o(t,"width",128),u=o(t,"height",128),c=new s(this.scene,r,n,a,h,u);return void 0!==e&&(t.add=e),i(this.scene,c,t),c}))},74177:(t,e,r)=>{var i=r(20071);r(39429).register("shader",(function(t,e,r,n,o,s,a){return this.displayList.add(new i(this.scene,t,e,r,n,o,s,a))}))},25479:(t,e,r)=>{var i,n,o=r(29747);i=r(19257),n=r(80464),t.exports={renderWebGL:i,renderCanvas:n}},19257:(t,e,r)=>{var i=r(91296);t.exports=function(t,e,r,n){if(e.shader){if(r.addToRenderList(e),t.pipelines.clear(),e.renderToTexture)e.load(),e.flush();else{var o=i(e,r,n).calc;t.width===e._rendererWidth&&t.height===e._rendererHeight||e.projOrtho(0,t.width,t.height,0),e.load(o.matrix),e.flush()}t.pipelines.rebind()}}},10441:(t,e,r)=>{var i=r(70554);t.exports=function(t,e,r,n,o,s){for(var a=i.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*n),h=r.pathData,u=r.pathIndexes,c=0;c<u.length;c+=3){var l=2*u[c],f=2*u[c+1],p=2*u[c+2],d=h[l+0]-o,v=h[l+1]-s,y=h[f+0]-o,g=h[f+1]-s,m=h[p+0]-o,x=h[p+1]-s,b=e.getX(d,v),w=e.getY(d,v),E=e.getX(y,g),T=e.getY(y,g),S=e.getX(m,x),_=e.getY(m,x);t.batchTri(r,b,w,E,T,S,_,0,0,1,1,a,a,a,2)}}},65960:t=>{t.exports=function(t,e,r,i){var n=r||e.fillColor,o=i||e.fillAlpha,s=(16711680&n)>>>16,a=(65280&n)>>>8,h=255&n;t.fillStyle="rgba("+s+","+a+","+h+","+o+")"}},75177:t=>{t.exports=function(t,e,r,i){var n=r||e.strokeColor,o=i||e.strokeAlpha,s=(16711680&n)>>>16,a=(65280&n)>>>8,h=255&n;t.strokeStyle="rgba("+s+","+a+","+h+","+o+")",t.lineWidth=e.lineWidth}},17803:(t,e,r)=>{var i=r(83419),n=r(31401),o=r(95643),s=r(23031),a=new i({Extends:o,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.PostPipeline,n.ScrollFactor,n.Transform,n.Visible],initialize:function(t,e,r){void 0===e&&(e="Shape"),o.call(this,t,e),this.geom=r,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new s,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=e,this.isFilled=!0),this},setStrokeStyle:function(t,e,r){return void 0===r&&(r=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=r,this.isStroked=!0),this},setClosePath:function(t){return this.closePath=t,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}}});t.exports=a},34682:(t,e,r)=>{var i=r(70554);t.exports=function(t,e,r,n,o){var s=t.strokeTint,a=i.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*r);s.TL=a,s.TR=a,s.BL=a,s.BR=a;var h=e.pathData,u=h.length-1,c=e.lineWidth,l=c/2,f=h[0]-n,p=h[1]-o;e.closePath||(u-=2);for(var d=2;d<u;d+=2){var v=h[d]-n,y=h[d+1]-o;t.batchLine(f,p,v,y,l,l,c,d-2,!!e.closePath&&d===u-1),f=v,p=y}}},23629:(t,e,r)=>{var i=r(13609),n=r(83419),o=r(39506),s=r(94811),a=r(96503),h=r(36383),u=r(17803),c=new n({Extends:u,Mixins:[i],initialize:function(t,e,r,i,n,o,s,h,c){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=128),void 0===n&&(n=0),void 0===o&&(o=360),void 0===s&&(s=!1),u.call(this,t,"Arc",new a(0,0,i)),this._startAngle=n,this._endAngle=o,this._anticlockwise=s,this._iterations=.01,this.setPosition(e,r);var l=2*this.geom.radius;this.setSize(l,l),void 0!==h&&this.setFillStyle(h,c),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(t){this._iterations=t,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(t){this.geom.radius=t;var e=2*t;this.setSize(e,e),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(t){this._anticlockwise=t,this.updateData()}},setRadius:function(t){return this.radius=t,this},setIterations:function(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function(t,e){return this._startAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},setEndAngle:function(t,e){return this._endAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},updateData:function(){var t=this._iterations,e=t,r=this.geom.radius,i=o(this._startAngle),n=o(this._endAngle),a=r,u=r;n-=i,this._anticlockwise?n<-h.PI2?n=-h.PI2:n>0&&(n=-h.PI2+n%h.PI2):n>h.PI2?n=h.PI2:n<0&&(n=h.PI2+n%h.PI2);for(var c,l=[a+Math.cos(i)*r,u+Math.sin(i)*r];e<1;)c=n*e+i,l.push(a+Math.cos(c)*r,u+Math.sin(c)*r),e+=t;return c=n+i,l.push(a+Math.cos(c)*r,u+Math.sin(c)*r),l.push(a+Math.cos(i)*r,u+Math.sin(i)*r),this.pathIndexes=s(l),this.pathData=l,this}});t.exports=c},42542:(t,e,r)=>{var i=r(39506),n=r(65960),o=r(75177),s=r(20926);t.exports=function(t,e,r,a){r.addToRenderList(e);var h=t.currentContext;if(s(t,h,e,r,a)){var u=e.radius;h.beginPath(),h.arc(u-e.originX*(2*u),u-e.originY*(2*u),u,i(e._startAngle),i(e._endAngle),e.anticlockwise),e.closePath&&h.closePath(),e.isFilled&&(n(h,e),h.fill()),e.isStroked&&(o(h,e),h.stroke()),h.restore()}}},42563:(t,e,r)=>{var i=r(23629),n=r(39429);n.register("arc",(function(t,e,r,n,o,s,a,h){return this.displayList.add(new i(this.scene,t,e,r,n,o,s,a,h))})),n.register("circle",(function(t,e,r,n,o){return this.displayList.add(new i(this.scene,t,e,r,0,360,!1,n,o))}))},13609:(t,e,r)=>{var i,n,o=r(29747);i=r(41447),n=r(42542),t.exports={renderWebGL:i,renderCanvas:n}},41447:(t,e,r)=>{var i=r(91296),n=r(10441),o=r(34682);t.exports=function(t,e,r,s){r.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=i(e,r,s),u=a.calcMatrix.copyFrom(h.calc),c=e._displayOriginX,l=e._displayOriginY,f=r.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&n(a,u,e,f,c,l),e.isStroked&&o(a,e,f,c,l),t.pipelines.postBatch(e)}},89:(t,e,r)=>{var i=r(83419),n=r(33141),o=r(94811),s=r(87841),a=r(17803),h=new i({Extends:a,Mixins:[n],initialize:function(t,e,r,i,n,o){void 0===e&&(e=0),void 0===r&&(r=0),a.call(this,t,"Curve",i),this._smoothness=32,this._curveBounds=new s,this.closePath=!1,this.setPosition(e,r),void 0!==n&&this.setFillStyle(n,o),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){var t=this._curveBounds,e=this._smoothness;this.geom.getBounds(t,e),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var r=[],i=this.geom.getPoints(e),n=0;n<i.length;n++)r.push(i[n].x,i[n].y);return r.push(i[0].x,i[0].y),this.pathIndexes=o(r),this.pathData=r,this}});t.exports=h},3170:(t,e,r)=>{var i=r(65960),n=r(75177),o=r(20926);t.exports=function(t,e,r,s){r.addToRenderList(e);var a=t.currentContext;if(o(t,a,e,r,s)){var h=e._displayOriginX+e._curveBounds.x,u=e._displayOriginY+e._curveBounds.y,c=e.pathData,l=c.length-1,f=c[0]-h,p=c[1]-u;a.beginPath(),a.moveTo(f,p),e.closePath||(l-=2);for(var d=2;d<l;d+=2){var v=c[d]-h,y=c[d+1]-u;a.lineTo(v,y)}e.closePath&&a.closePath(),e.isFilled&&(i(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},40511:(t,e,r)=>{var i=r(39429),n=r(89);i.register("curve",(function(t,e,r,i,o){return this.displayList.add(new n(this.scene,t,e,r,i,o))}))},33141:(t,e,r)=>{var i,n,o=r(29747);i=r(53987),n=r(3170),t.exports={renderWebGL:i,renderCanvas:n}},53987:(t,e,r)=>{var i=r(10441),n=r(91296),o=r(34682);t.exports=function(t,e,r,s){r.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=n(e,r,s),u=a.calcMatrix.copyFrom(h.calc),c=e._displayOriginX+e._curveBounds.x,l=e._displayOriginY+e._curveBounds.y,f=r.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&i(a,u,e,f,c,l),e.isStroked&&o(a,e,f,c,l),t.pipelines.postBatch(e)}},19921:(t,e,r)=>{var i=r(83419),n=r(94811),o=r(54205),s=r(8497),a=r(17803),h=new i({Extends:a,Mixins:[o],initialize:function(t,e,r,i,n,o,h){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=128),void 0===n&&(n=128),a.call(this,t,"Ellipse",new s(i/2,n/2,i,n)),this._smoothness=64,this.setPosition(e,r),this.width=i,this.height=n,void 0!==o&&this.setFillStyle(o,h),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setPosition(t/2,e/2),this.geom.setSize(t,e),this.updateData()},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){for(var t=[],e=this.geom.getPoints(this._smoothness),r=0;r<e.length;r++)t.push(e[r].x,e[r].y);return t.push(e[0].x,e[0].y),this.pathIndexes=n(t),this.pathData=t,this}});t.exports=h},7930:(t,e,r)=>{var i=r(65960),n=r(75177),o=r(20926);t.exports=function(t,e,r,s){r.addToRenderList(e);var a=t.currentContext;if(o(t,a,e,r,s)){var h=e._displayOriginX,u=e._displayOriginY,c=e.pathData,l=c.length-1,f=c[0]-h,p=c[1]-u;a.beginPath(),a.moveTo(f,p),e.closePath||(l-=2);for(var d=2;d<l;d+=2){var v=c[d]-h,y=c[d+1]-u;a.lineTo(v,y)}a.closePath(),e.isFilled&&(i(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},1543:(t,e,r)=>{var i=r(19921);r(39429).register("ellipse",(function(t,e,r,n,o,s){return this.displayList.add(new i(this.scene,t,e,r,n,o,s))}))},54205:(t,e,r)=>{var i,n,o=r(29747);i=r(19467),n=r(7930),t.exports={renderWebGL:i,renderCanvas:n}},19467:(t,e,r)=>{var i=r(10441),n=r(91296),o=r(34682);t.exports=function(t,e,r,s){r.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=n(e,r,s),u=a.calcMatrix.copyFrom(h.calc),c=e._displayOriginX,l=e._displayOriginY,f=r.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&i(a,u,e,f,c,l),e.isStroked&&o(a,e,f,c,l),t.pipelines.postBatch(e)}},30479:(t,e,r)=>{var i=r(83419),n=r(17803),o=r(26015),s=new i({Extends:n,Mixins:[o],initialize:function(t,e,r,i,o,s,a,h,u,c,l){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=128),void 0===o&&(o=128),void 0===s&&(s=32),void 0===a&&(a=32),n.call(this,t,"Grid",null),this.cellWidth=s,this.cellHeight=a,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(e,r),this.setSize(i,o),this.setFillStyle(h,u),void 0!==c&&this.setOutlineStyle(c,l),this.updateDisplayOrigin()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=e,this.showCells=!0),this},setAltFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=e,this.showAltCells=!0),this},setOutlineStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=e,this.showOutline=!0),this}});t.exports=s},49912:(t,e,r)=>{var i=r(65960),n=r(75177),o=r(20926);t.exports=function(t,e,r,s){r.addToRenderList(e);var a=t.currentContext;if(o(t,a,e,r,s)){var h=-e._displayOriginX,u=-e._displayOriginY,c=r.alpha*e.alpha,l=e.width,f=e.height,p=e.cellWidth,d=e.cellHeight,v=Math.ceil(l/p),y=Math.ceil(f/d),g=p,m=d,x=p-(v*p-l),b=d-(y*d-f),w=e.showCells,E=e.showAltCells,T=e.showOutline,S=0,_=0,O=0,P=0,M=0;if(T&&(g--,m--,x===p&&x--,b===d&&b--),w&&e.fillAlpha>0)for(i(a,e),_=0;_<y;_++)for(E&&(O=_%2),S=0;S<v;S++)E&&O?O=0:(O++,P=S<v-1?g:x,M=_<y-1?m:b,a.fillRect(h+S*p,u+_*d,P,M));if(E&&e.altFillAlpha>0)for(i(a,e,e.altFillColor,e.altFillAlpha*c),_=0;_<y;_++)for(E&&(O=_%2),S=0;S<v;S++)!E||O?(O=0,P=S<v-1?g:x,M=_<y-1?m:b,a.fillRect(h+S*p,u+_*d,P,M)):O=1;if(T&&e.outlineFillAlpha>0){for(n(a,e,e.outlineFillColor,e.outlineFillAlpha*c),S=1;S<v;S++){var A=S*p;a.beginPath(),a.moveTo(A+h,u),a.lineTo(A+h,f+u),a.stroke()}for(_=1;_<y;_++){var L=_*d;a.beginPath(),a.moveTo(h,L+u),a.lineTo(h+l,L+u),a.stroke()}}a.restore()}}},34137:(t,e,r)=>{var i=r(39429),n=r(30479);i.register("grid",(function(t,e,r,i,o,s,a,h,u,c){return this.displayList.add(new n(this.scene,t,e,r,i,o,s,a,h,u,c))}))},26015:(t,e,r)=>{var i,n,o=r(29747);i=r(46161),n=r(49912),t.exports={renderWebGL:i,renderCanvas:n}},46161:(t,e,r)=>{var i=r(91296),n=r(70554);t.exports=function(t,e,r,o){r.addToRenderList(e);var s=t.pipelines.set(e.pipeline),a=i(e,r,o);s.calcMatrix.copyFrom(a.calc).translate(-e._displayOriginX,-e._displayOriginY);var h,u,c=r.alpha*e.alpha,l=e.width,f=e.height,p=e.cellWidth,d=e.cellHeight,v=Math.ceil(l/p),y=Math.ceil(f/d),g=p,m=d,x=p-(v*p-l),b=d-(y*d-f),w=e.showCells,E=e.showAltCells,T=e.showOutline,S=0,_=0,O=0,P=0,M=0;if(T&&(g--,m--,x===p&&x--,b===d&&b--),t.pipelines.preBatch(e),w&&e.fillAlpha>0)for(h=s.fillTint,u=n.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*c),h.TL=u,h.TR=u,h.BL=u,h.BR=u,_=0;_<y;_++)for(E&&(O=_%2),S=0;S<v;S++)E&&O?O=0:(O++,P=S<v-1?g:x,M=_<y-1?m:b,s.batchFillRect(S*p,_*d,P,M));if(E&&e.altFillAlpha>0)for(h=s.fillTint,u=n.getTintAppendFloatAlpha(e.altFillColor,e.altFillAlpha*c),h.TL=u,h.TR=u,h.BL=u,h.BR=u,_=0;_<y;_++)for(E&&(O=_%2),S=0;S<v;S++)!E||O?(O=0,P=S<v-1?g:x,M=_<y-1?m:b,s.batchFillRect(S*p,_*d,P,M)):O=1;if(T&&e.outlineFillAlpha>0){var A=s.strokeTint,L=n.getTintAppendFloatAlpha(e.outlineFillColor,e.outlineFillAlpha*c);for(A.TL=L,A.TR=L,A.BL=L,A.BR=L,S=1;S<v;S++){var C=S*p;s.batchLine(C,0,C,f,1,1,1,0,!1)}for(_=1;_<y;_++){var R=_*d;s.batchLine(0,R,l,R,1,1,1,0,!1)}}t.pipelines.postBatch(e)}},61475:(t,e,r)=>{var i=r(99651),n=r(83419),o=r(17803),s=new n({Extends:o,Mixins:[i],initialize:function(t,e,r,i,n,s,a,h){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=48),void 0===n&&(n=32),void 0===s&&(s=15658734),void 0===a&&(a=10066329),void 0===h&&(h=13421772),o.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=s,this.fillLeft=a,this.fillRight=h,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(e,r),this.setSize(i,n),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setFaces:function(t,e,r){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),this.showTop=t,this.showLeft=e,this.showRight=r,this},setFillStyle:function(t,e,r){return this.fillTop=t,this.fillLeft=e,this.fillRight=r,this.isFilled=!0,this}});t.exports=s},11508:(t,e,r)=>{var i=r(65960),n=r(20926);t.exports=function(t,e,r,o){r.addToRenderList(e);var s=t.currentContext;if(n(t,s,e,r,o)&&e.isFilled){var a=e.width,h=e.height,u=a/2,c=a/e.projection;e.showTop&&(i(s,e,e.fillTop),s.beginPath(),s.moveTo(-u,-h),s.lineTo(0,-c-h),s.lineTo(u,-h),s.lineTo(u,-1),s.lineTo(0,c-1),s.lineTo(-u,-1),s.lineTo(-u,-h),s.fill()),e.showLeft&&(i(s,e,e.fillLeft),s.beginPath(),s.moveTo(-u,0),s.lineTo(0,c),s.lineTo(0,c-h),s.lineTo(-u,-h),s.lineTo(-u,0),s.fill()),e.showRight&&(i(s,e,e.fillRight),s.beginPath(),s.moveTo(u,0),s.lineTo(0,c),s.lineTo(0,c-h),s.lineTo(u,-h),s.lineTo(u,0),s.fill()),s.restore()}}},3933:(t,e,r)=>{var i=r(39429),n=r(61475);i.register("isobox",(function(t,e,r,i,o,s,a){return this.displayList.add(new n(this.scene,t,e,r,i,o,s,a))}))},99651:(t,e,r)=>{var i,n,o=r(29747);i=r(68149),n=r(11508),t.exports={renderWebGL:i,renderCanvas:n}},68149:(t,e,r)=>{var i=r(91296),n=r(70554);t.exports=function(t,e,r,o){r.addToRenderList(e);var s,a,h,u,c,l,f,p,d,v=t.pipelines.set(e.pipeline),y=i(e,r,o),g=v.calcMatrix.copyFrom(y.calc),m=e.width,x=e.height,b=m/2,w=m/e.projection,E=r.alpha*e.alpha;e.isFilled&&(t.pipelines.preBatch(e),e.showTop&&(s=n.getTintAppendFloatAlpha(e.fillTop,E),a=g.getX(-b,-x),h=g.getY(-b,-x),u=g.getX(0,-w-x),c=g.getY(0,-w-x),l=g.getX(b,-x),f=g.getY(b,-x),p=g.getX(0,w-x),d=g.getY(0,w-x),v.batchQuad(e,a,h,u,c,l,f,p,d,0,0,1,1,s,s,s,s,2)),e.showLeft&&(s=n.getTintAppendFloatAlpha(e.fillLeft,E),a=g.getX(-b,0),h=g.getY(-b,0),u=g.getX(0,w),c=g.getY(0,w),l=g.getX(0,w-x),f=g.getY(0,w-x),p=g.getX(-b,-x),d=g.getY(-b,-x),v.batchQuad(e,a,h,u,c,l,f,p,d,0,0,1,1,s,s,s,s,2)),e.showRight&&(s=n.getTintAppendFloatAlpha(e.fillRight,E),a=g.getX(b,0),h=g.getY(b,0),u=g.getX(0,w),c=g.getY(0,w),l=g.getX(0,w-x),f=g.getY(0,w-x),p=g.getX(b,-x),d=g.getY(b,-x),v.batchQuad(e,a,h,u,c,l,f,p,d,0,0,1,1,s,s,s,s,2)),t.pipelines.postBatch(e))}},16933:(t,e,r)=>{var i=r(83419),n=r(60561),o=r(17803),s=new i({Extends:o,Mixins:[n],initialize:function(t,e,r,i,n,s,a,h,u){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=48),void 0===n&&(n=32),void 0===s&&(s=!1),void 0===a&&(a=15658734),void 0===h&&(h=10066329),void 0===u&&(u=13421772),o.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=a,this.fillLeft=h,this.fillRight=u,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=s,this.isFilled=!0,this.setPosition(e,r),this.setSize(i,n),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setReversed:function(t){return this.isReversed=t,this},setFaces:function(t,e,r){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),this.showTop=t,this.showLeft=e,this.showRight=r,this},setFillStyle:function(t,e,r){return this.fillTop=t,this.fillLeft=e,this.fillRight=r,this.isFilled=!0,this}});t.exports=s},79590:(t,e,r)=>{var i=r(65960),n=r(20926);t.exports=function(t,e,r,o){r.addToRenderList(e);var s=t.currentContext;if(n(t,s,e,r,o)&&e.isFilled){var a=e.width,h=e.height,u=a/2,c=a/e.projection,l=e.isReversed;e.showTop&&l&&(i(s,e,e.fillTop),s.beginPath(),s.moveTo(-u,-h),s.lineTo(0,-c-h),s.lineTo(u,-h),s.lineTo(0,c-h),s.fill()),e.showLeft&&(i(s,e,e.fillLeft),s.beginPath(),l?(s.moveTo(-u,-h),s.lineTo(0,c),s.lineTo(0,c-h)):(s.moveTo(-u,0),s.lineTo(0,c),s.lineTo(0,c-h)),s.fill()),e.showRight&&(i(s,e,e.fillRight),s.beginPath(),l?(s.moveTo(u,-h),s.lineTo(0,c),s.lineTo(0,c-h)):(s.moveTo(u,0),s.lineTo(0,c),s.lineTo(0,c-h)),s.fill()),s.restore()}}},49803:(t,e,r)=>{var i=r(39429),n=r(16933);i.register("isotriangle",(function(t,e,r,i,o,s,a,h){return this.displayList.add(new n(this.scene,t,e,r,i,o,s,a,h))}))},60561:(t,e,r)=>{var i,n,o=r(29747);i=r(51503),n=r(79590),t.exports={renderWebGL:i,renderCanvas:n}},51503:(t,e,r)=>{var i=r(91296),n=r(70554);t.exports=function(t,e,r,o){r.addToRenderList(e);var s=t.pipelines.set(e.pipeline),a=i(e,r,o),h=s.calcMatrix.copyFrom(a.calc),u=e.width,c=e.height,l=u/2,f=u/e.projection,p=e.isReversed,d=r.alpha*e.alpha;if(e.isFilled){var v,y,g,m,x,b,w;if(t.pipelines.preBatch(e),e.showTop&&p){v=n.getTintAppendFloatAlpha(e.fillTop,d),y=h.getX(-l,-c),g=h.getY(-l,-c),m=h.getX(0,-f-c),x=h.getY(0,-f-c),b=h.getX(l,-c),w=h.getY(l,-c);var E=h.getX(0,f-c),T=h.getY(0,f-c);s.batchQuad(e,y,g,m,x,b,w,E,T,0,0,1,1,v,v,v,v,2)}e.showLeft&&(v=n.getTintAppendFloatAlpha(e.fillLeft,d),p?(y=h.getX(-l,-c),g=h.getY(-l,-c),m=h.getX(0,f),x=h.getY(0,f),b=h.getX(0,f-c),w=h.getY(0,f-c)):(y=h.getX(-l,0),g=h.getY(-l,0),m=h.getX(0,f),x=h.getY(0,f),b=h.getX(0,f-c),w=h.getY(0,f-c)),s.batchTri(e,y,g,m,x,b,w,0,0,1,1,v,v,v,2)),e.showRight&&(v=n.getTintAppendFloatAlpha(e.fillRight,d),p?(y=h.getX(l,-c),g=h.getY(l,-c),m=h.getX(0,f),x=h.getY(0,f),b=h.getX(0,f-c),w=h.getY(0,f-c)):(y=h.getX(l,0),g=h.getY(l,0),m=h.getX(0,f),x=h.getY(0,f),b=h.getX(0,f-c),w=h.getY(0,f-c)),s.batchTri(e,y,g,m,x,b,w,0,0,1,1,v,v,v,2)),t.pipelines.postBatch(e)}}},57847:(t,e,r)=>{var i=r(83419),n=r(17803),o=r(23031),s=r(36823),a=new i({Extends:n,Mixins:[s],initialize:function(t,e,r,i,s,a,h,u,c){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===a&&(a=128),void 0===h&&(h=0),n.call(this,t,"Line",new o(i,s,a,h));var l=Math.max(1,this.geom.right-this.geom.left),f=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(e,r),this.setSize(l,f),void 0!==u&&this.setStrokeStyle(1,u,c),this.updateDisplayOrigin()},setLineWidth:function(t,e){return void 0===e&&(e=t),this._startWidth=t,this._endWidth=e,this.lineWidth=t,this},setTo:function(t,e,r,i){return this.geom.setTo(t,e,r,i),this}});t.exports=a},17440:(t,e,r)=>{var i=r(75177),n=r(20926);t.exports=function(t,e,r,o){r.addToRenderList(e);var s=t.currentContext;if(n(t,s,e,r,o)){var a=e._displayOriginX,h=e._displayOriginY;e.isStroked&&(i(s,e),s.beginPath(),s.moveTo(e.geom.x1-a,e.geom.y1-h),s.lineTo(e.geom.x2-a,e.geom.y2-h),s.stroke()),s.restore()}}},2481:(t,e,r)=>{var i=r(39429),n=r(57847);i.register("line",(function(t,e,r,i,o,s,a,h){return this.displayList.add(new n(this.scene,t,e,r,i,o,s,a,h))}))},36823:(t,e,r)=>{var i,n,o=r(29747);i=r(77385),n=r(17440),t.exports={renderWebGL:i,renderCanvas:n}},77385:(t,e,r)=>{var i=r(91296),n=r(70554);t.exports=function(t,e,r,o){r.addToRenderList(e);var s=t.pipelines.set(e.pipeline),a=i(e,r,o);s.calcMatrix.copyFrom(a.calc);var h=e._displayOriginX,u=e._displayOriginY,c=r.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isStroked){var l=s.strokeTint,f=n.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*c);l.TL=f,l.TR=f,l.BL=f,l.BR=f,s.batchLine(e.geom.x1-h,e.geom.y1-u,e.geom.x2-h,e.geom.y2-u,e._startWidth/2,e._endWidth/2,1,0,!1,a.sprite,a.camera)}t.pipelines.postBatch(e)}},24949:(t,e,r)=>{var i=r(90273),n=r(83419),o=r(94811),s=r(13829),a=r(25717),h=r(17803),u=r(5469),c=new n({Extends:h,Mixins:[i],initialize:function(t,e,r,i,n,o){void 0===e&&(e=0),void 0===r&&(r=0),h.call(this,t,"Polygon",new a(i));var u=s(this.geom);this.setPosition(e,r),this.setSize(u.width,u.height),void 0!==n&&this.setFillStyle(n,o),this.updateDisplayOrigin(),this.updateData()},smooth:function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)u(this.geom);return this.updateData()},setTo:function(t){this.geom.setTo(t);var e=s(this.geom);return this.setSize(e.width,e.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var t=[],e=this.geom.points,r=0;r<e.length;r++)t.push(e[r].x,e[r].y);return t.push(e[0].x,e[0].y),this.pathIndexes=o(t),this.pathData=t,this}});t.exports=c},38710:(t,e,r)=>{var i=r(65960),n=r(75177),o=r(20926);t.exports=function(t,e,r,s){r.addToRenderList(e);var a=t.currentContext;if(o(t,a,e,r,s)){var h=e._displayOriginX,u=e._displayOriginY,c=e.pathData,l=c.length-1,f=c[0]-h,p=c[1]-u;a.beginPath(),a.moveTo(f,p),e.closePath||(l-=2);for(var d=2;d<l;d+=2){var v=c[d]-h,y=c[d+1]-u;a.lineTo(v,y)}e.closePath&&a.closePath(),e.isFilled&&(i(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},64827:(t,e,r)=>{var i=r(39429),n=r(24949);i.register("polygon",(function(t,e,r,i,o){return this.displayList.add(new n(this.scene,t,e,r,i,o))}))},90273:(t,e,r)=>{var i,n,o=r(29747);i=r(73695),n=r(38710),t.exports={renderWebGL:i,renderCanvas:n}},73695:(t,e,r)=>{var i=r(10441),n=r(91296),o=r(34682);t.exports=function(t,e,r,s){r.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=n(e,r,s),u=a.calcMatrix.copyFrom(h.calc),c=e._displayOriginX,l=e._displayOriginY,f=r.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&i(a,u,e,f,c,l),e.isStroked&&o(a,e,f,c,l),t.pipelines.postBatch(e)}},74561:(t,e,r)=>{var i=r(83419),n=r(87841),o=r(17803),s=r(95597),a=new i({Extends:o,Mixins:[s],initialize:function(t,e,r,i,s,a,h){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=128),void 0===s&&(s=128),o.call(this,t,"Rectangle",new n(0,0,i,s)),this.setPosition(e,r),this.setSize(i,s),void 0!==a&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()},setSize:function(t,e){this.width=t,this.height=e,this.geom.setSize(t,e),this.updateData(),this.updateDisplayOrigin();var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=t,r.hitArea.height=e),this},updateData:function(){var t=[],e=this.geom,r=this._tempLine;return e.getLineA(r),t.push(r.x1,r.y1,r.x2,r.y2),e.getLineB(r),t.push(r.x2,r.y2),e.getLineC(r),t.push(r.x2,r.y2),e.getLineD(r),t.push(r.x2,r.y2),this.pathData=t,this}});t.exports=a},48682:(t,e,r)=>{var i=r(65960),n=r(75177),o=r(20926);t.exports=function(t,e,r,s){r.addToRenderList(e);var a=t.currentContext;if(o(t,a,e,r,s)){var h=e._displayOriginX,u=e._displayOriginY;e.isFilled&&(i(a,e),a.fillRect(-h,-u,e.width,e.height)),e.isStroked&&(n(a,e),a.beginPath(),a.rect(-h,-u,e.width,e.height),a.stroke()),a.restore()}}},87959:(t,e,r)=>{var i=r(39429),n=r(74561);i.register("rectangle",(function(t,e,r,i,o,s){return this.displayList.add(new n(this.scene,t,e,r,i,o,s))}))},95597:(t,e,r)=>{var i,n,o=r(29747);i=r(52059),n=r(48682),t.exports={renderWebGL:i,renderCanvas:n}},52059:(t,e,r)=>{var i=r(91296),n=r(34682),o=r(70554);t.exports=function(t,e,r,s){r.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=i(e,r,s);a.calcMatrix.copyFrom(h.calc);var u=e._displayOriginX,c=e._displayOriginY,l=r.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isFilled){var f=a.fillTint,p=o.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*l);f.TL=p,f.TR=p,f.BL=p,f.BR=p,a.batchFillRect(-u,-c,e.width,e.height)}e.isStroked&&n(a,e,l,u,c),t.pipelines.postBatch(e)}},55911:(t,e,r)=>{var i=r(81991),n=r(83419),o=r(94811),s=r(17803),a=new n({Extends:s,Mixins:[i],initialize:function(t,e,r,i,n,o,a,h){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=5),void 0===n&&(n=32),void 0===o&&(o=64),s.call(this,t,"Star",null),this._points=i,this._innerRadius=n,this._outerRadius=o,this.setPosition(e,r),this.setSize(2*o,2*o),void 0!==a&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()},setPoints:function(t){return this._points=t,this.updateData()},setInnerRadius:function(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function(t){return this._outerRadius=t,this.updateData()},points:{get:function(){return this._points},set:function(t){this._points=t,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.updateData()}},updateData:function(){var t=[],e=this._points,r=this._innerRadius,i=this._outerRadius,n=Math.PI/2*3,s=Math.PI/e,a=i,h=i;t.push(a,h+-i);for(var u=0;u<e;u++)t.push(a+Math.cos(n)*i,h+Math.sin(n)*i),n+=s,t.push(a+Math.cos(n)*r,h+Math.sin(n)*r),n+=s;return t.push(a,h+-i),this.pathIndexes=o(t),this.pathData=t,this}});t.exports=a},64272:(t,e,r)=>{var i=r(65960),n=r(75177),o=r(20926);t.exports=function(t,e,r,s){r.addToRenderList(e);var a=t.currentContext;if(o(t,a,e,r,s)){var h=e._displayOriginX,u=e._displayOriginY,c=e.pathData,l=c.length-1,f=c[0]-h,p=c[1]-u;a.beginPath(),a.moveTo(f,p),e.closePath||(l-=2);for(var d=2;d<l;d+=2){var v=c[d]-h,y=c[d+1]-u;a.lineTo(v,y)}a.closePath(),e.isFilled&&(i(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},93697:(t,e,r)=>{var i=r(55911);r(39429).register("star",(function(t,e,r,n,o,s,a){return this.displayList.add(new i(this.scene,t,e,r,n,o,s,a))}))},81991:(t,e,r)=>{var i,n,o=r(29747);i=r(57017),n=r(64272),t.exports={renderWebGL:i,renderCanvas:n}},57017:(t,e,r)=>{var i=r(10441),n=r(91296),o=r(34682);t.exports=function(t,e,r,s){r.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=n(e,r,s),u=a.calcMatrix.copyFrom(h.calc),c=e._displayOriginX,l=e._displayOriginY,f=r.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&i(a,u,e,f,c,l),e.isStroked&&o(a,e,f,c,l),t.pipelines.postBatch(e)}},36931:(t,e,r)=>{var i=r(83419),n=r(17803),o=r(16483),s=r(96195),a=new i({Extends:n,Mixins:[s],initialize:function(t,e,r,i,s,a,h,u,c,l,f){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===s&&(s=128),void 0===a&&(a=64),void 0===h&&(h=0),void 0===u&&(u=128),void 0===c&&(c=128),n.call(this,t,"Triangle",new o(i,s,a,h,u,c));var p=this.geom.right-this.geom.left,d=this.geom.bottom-this.geom.top;this.setPosition(e,r),this.setSize(p,d),void 0!==l&&this.setFillStyle(l,f),this.updateDisplayOrigin(),this.updateData()},setTo:function(t,e,r,i,n,o){return this.geom.setTo(t,e,r,i,n,o),this.updateData()},updateData:function(){var t=[],e=this.geom,r=this._tempLine;return e.getLineA(r),t.push(r.x1,r.y1,r.x2,r.y2),e.getLineB(r),t.push(r.x2,r.y2),e.getLineC(r),t.push(r.x2,r.y2),this.pathData=t,this}});t.exports=a},85172:(t,e,r)=>{var i=r(65960),n=r(75177),o=r(20926);t.exports=function(t,e,r,s){r.addToRenderList(e);var a=t.currentContext;if(o(t,a,e,r,s)){var h=e._displayOriginX,u=e._displayOriginY,c=e.geom.x1-h,l=e.geom.y1-u,f=e.geom.x2-h,p=e.geom.y2-u,d=e.geom.x3-h,v=e.geom.y3-u;a.beginPath(),a.moveTo(c,l),a.lineTo(f,p),a.lineTo(d,v),a.closePath(),e.isFilled&&(i(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},45245:(t,e,r)=>{var i=r(39429),n=r(36931);i.register("triangle",(function(t,e,r,i,o,s,a,h,u,c){return this.displayList.add(new n(this.scene,t,e,r,i,o,s,a,h,u,c))}))},96195:(t,e,r)=>{var i,n,o=r(29747);i=r(83253),n=r(85172),t.exports={renderWebGL:i,renderCanvas:n}},83253:(t,e,r)=>{var i=r(91296),n=r(34682),o=r(70554);t.exports=function(t,e,r,s){r.addToRenderList(e);var a=t.pipelines.set(e.pipeline),h=i(e,r,s);a.calcMatrix.copyFrom(h.calc);var u=e._displayOriginX,c=e._displayOriginY,l=r.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isFilled){var f=a.fillTint,p=o.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*l);f.TL=p,f.TR=p,f.BL=p,f.BR=p;var d=e.geom.x1-u,v=e.geom.y1-c,y=e.geom.x2-u,g=e.geom.y2-c,m=e.geom.x3-u,x=e.geom.y3-c;a.batchFillTriangle(d,v,y,g,m,x,h.sprite,h.camera)}e.isStroked&&n(a,e,l,u,c),t.pipelines.postBatch(e)}},68287:(t,e,r)=>{var i=r(9674),n=r(83419),o=r(31401),s=r(95643),a=r(92751),h=new n({Extends:s,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Size,o.TextureCrop,o.Tint,o.Transform,o.Visible,a],initialize:function(t,e,r,n,o){s.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new i(this),this.setTexture(n,o),this.setPosition(e,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){this.anims.update(t,e)},play:function(t,e){return this.anims.play(t,e)},playReverse:function(t,e){return this.anims.playReverse(t,e)},playAfterDelay:function(t,e){return this.anims.playAfterDelay(t,e)},playAfterRepeat:function(t,e){return this.anims.playAfterRepeat(t,e)},chain:function(t){return this.anims.chain(t)},stop:function(){return this.anims.stop()},stopAfterDelay:function(t){return this.anims.stopAfterDelay(t)},stopAfterRepeat:function(t){return this.anims.stopAfterRepeat(t)},stopOnFrame:function(t){return this.anims.stopOnFrame(t)},toJSON:function(){return o.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});t.exports=h},76552:t=>{t.exports=function(t,e,r,i){r.addToRenderList(e),t.batchSprite(e,e.frame,r,i)}},15567:(t,e,r)=>{var i=r(25305),n=r(13059),o=r(44603),s=r(23568),a=r(68287);o.register("sprite",(function(t,e){void 0===t&&(t={});var r=s(t,"key",null),o=s(t,"frame",null),h=new a(this.scene,0,0,r,o);return void 0!==e&&(t.add=e),i(this.scene,h,t),n(h,t),h}))},46409:(t,e,r)=>{var i=r(39429),n=r(68287);i.register("sprite",(function(t,e,r,i){return this.displayList.add(new n(this.scene,t,e,r,i))}))},92751:(t,e,r)=>{var i,n,o=r(29747);i=r(9409),n=r(76552),t.exports={renderWebGL:i,renderCanvas:n}},9409:t=>{t.exports=function(t,e,r,i){r.addToRenderList(e),e.pipeline.batchSprite(e,r,i)}},14220:t=>{t.exports=function(t,e,r){var i=t.canvas,n=t.context,o=t.style,s=[],a=0,h=r.length;o.maxLines>0&&o.maxLines<r.length&&(h=o.maxLines),o.syncFont(i,n);for(var u=0;u<h;u++){var c=o.strokeThickness;c+=n.measureText(r[u]).width,r[u].length>1&&(c+=t.letterSpacing*(r[u].length-1)),o.wordWrap&&(c-=n.measureText(" ").width),s[u]=Math.ceil(c),a=Math.max(a,s[u])}var l=e.fontSize+o.strokeThickness,f=l*h,p=t.lineSpacing;return h>1&&(f+=p*(h-1)),{width:a,height:f,lines:h,lineWidths:s,lineSpacing:p,lineHeight:l}}},79557:(t,e,r)=>{var i=r(27919);t.exports=function(t){var e=i.create(this),r=e.getContext("2d",{willReadFrequently:!0});t.syncFont(e,r);var n=r.measureText(t.testString);if("actualBoundingBoxAscent"in n){var o=n.actualBoundingBoxAscent,s=n.actualBoundingBoxDescent;return i.remove(e),{ascent:o,descent:s,fontSize:o+s}}var a=Math.ceil(n.width*t.baselineX),h=a,u=2*h;h=h*t.baselineY|0,e.width=a,e.height=u,r.fillStyle="#f00",r.fillRect(0,0,a,u),r.font=t._font,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(t.testString,0,h);var c={ascent:0,descent:0,fontSize:0},l=r.getImageData(0,0,a,u);if(!l)return c.ascent=h,c.descent=h+6,c.fontSize=c.ascent+c.descent,i.remove(e),c;var f,p,d=l.data,v=d.length,y=4*a,g=0,m=!1;for(f=0;f<h;f++){for(p=0;p<y;p+=4)if(255!==d[g+p]){m=!0;break}if(m)break;g+=y}for(c.ascent=h-f,g=v-y,m=!1,f=u;f>h;f--){for(p=0;p<y;p+=4)if(255!==d[g+p]){m=!0;break}if(m)break;g-=y}return c.descent=f-h,c.fontSize=c.ascent+c.descent,i.remove(e),c}},50171:(t,e,r)=>{var i=r(40366),n=r(27919),o=r(83419),s=r(31401),a=r(95643),h=r(14220),u=r(35154),c=r(35846),l=r(61771),f=r(35762),p=r(45650),d=new o({Extends:a,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.PostPipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,l],initialize:function(t,e,r,i,o){void 0===e&&(e=0),void 0===r&&(r=0),a.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(e,r),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=n.create(this),this.context,this.style=new f(this,o),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=p(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(i),o&&o.padding&&this.setPadding(o.padding),o&&o.lineSpacing&&this.setLineSpacing(o.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",i(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var e=this.style;if(e.wordWrapCallback){var r=e.wordWrapCallback.call(e.wordWrapCallbackScope,t,this);return Array.isArray(r)&&(r=r.join("\n")),r}return e.wordWrapWidth?e.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,e,r){for(var i="",n=t.replace(/ +/gi," ").split(this.splitRegExp),o=n.length,s=0;s<o;s++){var a=n[s],h="";if(a=a.replace(/^ *|\s*$/gi,""),e.measureText(a).width<r)i+=a+"\n";else{for(var u=r,c=a.split(" "),l=0;l<c.length;l++){var f=c[l],p=f+" ",d=e.measureText(p).width;if(d>u){if(0===l){for(var v=p;v.length&&(v=v.slice(0,-1),!((d=e.measureText(v).width)<=u)););if(!v.length)throw new Error("wordWrapWidth < a single character");var y=f.substr(v.length);c[l]=y,h+=v}var g=c[l].length?l:l+1,m=c.slice(g).join(" ").replace(/[ \n]*$/gi,"");n.splice(s+1,0,m),o=n.length;break}h+=p,u-=d}i+=h.replace(/[ \n]*$/gi,"")+"\n"}}return i.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,e,r){for(var i="",n=t.split(this.splitRegExp),o=n.length-1,s=e.measureText(" ").width,a=0;a<=o;a++){for(var h=r,u=n[a].split(" "),c=u.length-1,l=0;l<=c;l++){var f=u[l],p=e.measureText(f).width,d=p;l<c&&(d+=s),d>h&&l>0&&(i+="\n",h=r),i+=f,l<c?(i+=" ",h-=d):h-=p}a<o&&(i+="\n")}return i},getWrappedText:function(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},appendText:function(t,e){void 0===e&&(e=!0),t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t=t.toString();var r=this._text.concat(e?"\n"+t:t);return r!==this._text&&(this._text=r,this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,r,i,n,o){return this.style.setShadow(t,e,r,i,n,o)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,e){return this.style.setWordWrapWidth(t,e)},setWordWrapCallback:function(t,e){return this.style.setWordWrapCallback(t,e)},setAlign:function(t){return this.style.setAlign(t)},setResolution:function(t){return this.style.setResolution(t)},setLineSpacing:function(t){return this.lineSpacing=t,this.updateText()},setLetterSpacing:function(t){return this.letterSpacing=t,this.updateText()},setPadding:function(t,e,r,i){if("object"==typeof t){var n=t,o=u(n,"x",null);null!==o?(t=o,r=o):(t=u(n,"left",0),r=u(n,"right",t));var s=u(n,"y",null);null!==s?(e=s,i=s):(e=u(n,"top",0),i=u(n,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===r&&(r=t),void 0===i&&(i=e);return this.padding.left=t,this.padding.top=e,this.padding.right=r,this.padding.bottom=i,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},setRTL:function(t){void 0===t&&(t=!0);var e=this.style;return e.rtl===t||(e.rtl=t,t?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",i(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),"left"===e.align?e.align="right":"right"===e.align&&(e.align="left")),this},updateText:function(){var t=this.canvas,e=this.context,r=this.style,i=r.resolution,n=r.metrics;r.syncFont(t,e);var o=this._text;(r.wordWrapWidth||r.wordWrapCallback)&&(o=this.runWordWrap(this._text));var s,a=o.split(this.splitRegExp),u=h(this,n,a),c=this.padding;0===r.fixedWidth?(this.width=u.width+c.left+c.right,s=u.width):(this.width=r.fixedWidth,(s=this.width-c.left-c.right)<u.width&&(s=u.width)),0===r.fixedHeight?this.height=u.height+c.top+c.bottom:this.height=r.fixedHeight;var l,f,p=this.width,d=this.height;this.updateDisplayOrigin(),p*=i,d*=i,p=Math.max(p,1),d=Math.max(d,1),t.width!==p||t.height!==d?(t.width=p,t.height=d,this.frame.setSize(p,d),r.syncFont(t,e),r.rtl&&(e.direction="rtl")):e.clearRect(0,0,p,d),e.save(),e.scale(i,i),r.backgroundColor&&(e.fillStyle=r.backgroundColor,e.fillRect(0,0,p,d)),r.syncStyle(t,e),e.translate(c.left,c.top);for(var v=0;v<u.lines;v++){if(l=r.strokeThickness/2,f=r.strokeThickness/2+v*u.lineHeight+n.ascent,v>0&&(f+=u.lineSpacing*v),r.rtl)l=p-l-c.left-c.right;else if("right"===r.align)l+=s-u.lineWidths[v];else if("center"===r.align)l+=(s-u.lineWidths[v])/2;else if("justify"===r.align&&u.lineWidths[v]/u.width>=.85){var y=u.width-u.lineWidths[v],g=e.measureText(" ").width,m=a[v].trim(),x=m.split(" ");y+=(a[v].length-m.length)*g;for(var b=Math.floor(y/g),w=0;b>0;)x[w]+=" ",w=(w+1)%(x.length-1||1),--b;a[v]=x.join(" ")}if(this.autoRound&&(l=Math.round(l),f=Math.round(f)),r.strokeThickness&&(r.syncShadow(e,r.shadowStroke),e.strokeText(a[v],l,f)),r.color){r.syncShadow(e,r.shadowFill);var E=this.letterSpacing;if(0!==E)for(var T=0,S=a[v].split(""),_=0;_<S.length;_++)e.fillText(S[_],l+T,f),T+=e.measureText(S[_]).width+E;else e.fillText(a[v],l,f)}}e.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0));var O=this.input;return O&&!O.customHitArea&&(O.hitArea.width=this.width,O.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(t){this.setText(t)}},toJSON:function(){var t=s.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){c(this.canvas),n.remove(this.canvas);var t=this.texture;t&&t.destroy()}});t.exports=d},79724:t=>{t.exports=function(t,e,r,i){0!==e.width&&0!==e.height&&(r.addToRenderList(e),t.batchSprite(e,e.frame,r,i))}},71259:(t,e,r)=>{var i=r(25305),n=r(44603),o=r(23568),s=r(50171);n.register("text",(function(t,e){void 0===t&&(t={});var r=o(t,"text",""),n=o(t,"style",null),a=o(t,"padding",null);null!==a&&(n.padding=a);var h=new s(this.scene,0,0,r,n);return void 0!==e&&(t.add=e),i(this.scene,h,t),h.autoRound=o(t,"autoRound",!0),h.resolution=o(t,"resolution",1),h}))},68005:(t,e,r)=>{var i=r(50171);r(39429).register("text",(function(t,e,r,n){return this.displayList.add(new i(this.scene,t,e,r,n))}))},61771:(t,e,r)=>{var i,n,o=r(29747);i=r(34397),n=r(79724),t.exports={renderWebGL:i,renderCanvas:n}},35762:(t,e,r)=>{var i=r(83419),n=r(23568),o=r(35154),s=r(79557),a={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},h=new i({initialize:function(t,e){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(e,!1,!0)},setStyle:function(t,e,r){for(var i in void 0===e&&(e=!0),void 0===r&&(r=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),a){var h=r?a[i][1]:this[i];this[i]="wordWrapCallback"===i||"wordWrapCallbackScope"===i?o(t,a[i][0],h):n(t,a[i][0],h)}var u=o(t,"font",null);null!==u&&this.setFont(u,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var c=o(t,"fill",null);null!==c&&(this.color=c);var l=o(t,"metrics",!1);return l?this.metrics={ascent:o(l,"ascent",0),descent:o(l,"descent",0),fontSize:o(l,"fontSize",0)}:!e&&this.metrics||(this.metrics=s(this)),e?this.parent.updateText():this.parent},syncFont:function(t,e){e.font=this._font},syncStyle:function(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"},syncShadow:function(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=s(this)),this.parent.updateText()},setFont:function(t,e){void 0===e&&(e=!0);var r=t,i="",n="";if("string"!=typeof t)r=o(t,"fontFamily","Courier"),i=o(t,"fontSize","16px"),n=o(t,"fontStyle","");else{var s=t.split(" "),a=0;n=s.length>2?s[a++]:"",i=s[a++]||"16px",r=s[a++]||"Courier"}return r===this.fontFamily&&i===this.fontSize&&n===this.fontStyle||(this.fontFamily=r,this.fontSize=i,this.fontStyle=n,e&&this.update(!0)),this.parent},setFontFamily:function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setResolution:function(t){return this.resolution=t,this.update(!1)},setStroke:function(t,e){return void 0===e&&(e=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===e||(this.stroke=t,this.strokeThickness=e,this.update(!0)),this.parent},setShadow:function(t,e,r,i,n,o){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r="#000"),void 0===i&&(i=0),void 0===n&&(n=!1),void 0===o&&(o=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=r,this.shadowBlur=i,this.shadowStroke=n,this.shadowFill=o,this.update(!1)},setShadowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)},setShadowColor:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,e){return void 0===e&&(e=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=e,this.update(!1)},setWordWrapCallback:function(t,e){return void 0===e&&(e=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=e,this.update(!1)},setAlign:function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t={};for(var e in a)t[e]=this[e];return t.metrics=this.getTextMetrics(),t},destroy:function(){this.parent=void 0}});t.exports=h},34397:(t,e,r)=>{var i=r(70554);t.exports=function(t,e,r,n){if(0!==e.width&&0!==e.height){r.addToRenderList(e);var o=e.frame,s=o.width,a=o.height,h=i.getTintAppendFloatAlpha,u=t.pipelines.set(e.pipeline,e),c=u.setTexture2D(o.glTexture,e);u.batchTexture(e,o.glTexture,s,a,e.x,e.y,s/e.style.resolution,a/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,s,a,h(e.tintTopLeft,r.alpha*e._alphaTL),h(e.tintTopRight,r.alpha*e._alphaTR),h(e.tintBottomLeft,r.alpha*e._alphaBL),h(e.tintBottomRight,r.alpha*e._alphaBR),e.tintFill,0,0,r,n,!1,c)}}},20839:(t,e,r)=>{var i=r(27919),n=r(83419),o=r(31401),s=r(95643),a=r(98439),h=r(68703),u=r(56295),c=r(45650),l=r(26099),f=new n({Extends:s,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,u],initialize:function(t,e,r,n,o,h,u){var f=t.sys.renderer;s.call(this,t,"TileSprite");var p=t.sys.textures.get(h),d=p.get(u);d.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),d=(p=t.sys.textures.get("__MISSING")).get()),"DynamicTexture"===p.type&&(console.warn("TileSprite cannot use Dynamic Texture"),d=(p=t.sys.textures.get("__MISSING")).get()),n&&o?(n=Math.floor(n),o=Math.floor(o)):(n=d.width,o=d.height),this._tilePosition=new l,this._tileScale=new l(1,1),this.dirty=!1,this.renderer=f,this.canvas=i.create(this,n,o),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=p,this.displayFrame=d,this._crop=this.resetCropObject(),this._textureKey=c(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=a(d.width),this.potHeight=a(d.height),this.fillCanvas=i.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(e,r),this.setSize(n,o),this.setFrame(u),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(t,e){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){var e=this.displayTexture.get(t);return this.potWidth=a(e.width),this.potHeight=a(e.height),this.canvas.width=0,e.cutWidth&&e.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=e,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,e){return void 0!==t&&(this.tilePositionX=t),void 0!==e&&(this.tilePositionY=e),this},setTileScale:function(t,e){return void 0===t&&(t=this.tileScaleX),void 0===e&&(e=t),this.tileScaleX=t,this.tileScaleY=e,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var e=this.fillContext,r=this.fillCanvas,i=this.potWidth,n=this.potHeight;this.renderer&&this.renderer.gl||(i=t.cutWidth,n=t.cutHeight),e.clearRect(0,0,i,n),r.width=i,r.height=n,e.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,i,n),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(r,this.fillPattern):this.fillPattern=e.createPattern(r,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var e=this.context;this.scene.sys.game.config.antialias||h.disable(e);var r=this._tileScale.x,i=this._tileScale.y,n=this._tilePosition.x,o=this._tilePosition.y;e.clearRect(0,0,this.width,this.height),e.save(),e.scale(r,i),e.translate(-n,-o),e.fillStyle=this.fillPattern,e.fillRect(n,o,this.width/r,this.height/i),e.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),i.remove(this.canvas),i.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var t=this.texture;t&&t.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=f},46992:t=>{t.exports=function(t,e,r,i){e.updateCanvas(),r.addToRenderList(e),t.batchSprite(e,e.frame,r,i)}},14167:(t,e,r)=>{var i=r(25305),n=r(44603),o=r(23568),s=r(20839);n.register("tileSprite",(function(t,e){void 0===t&&(t={});var r=o(t,"x",0),n=o(t,"y",0),a=o(t,"width",512),h=o(t,"height",512),u=o(t,"key",""),c=o(t,"frame",""),l=new s(this.scene,r,n,a,h,u,c);return void 0!==e&&(t.add=e),i(this.scene,l,t),l}))},91681:(t,e,r)=>{var i=r(20839);r(39429).register("tileSprite",(function(t,e,r,n,o,s){return this.displayList.add(new i(this.scene,t,e,r,n,o,s))}))},56295:(t,e,r)=>{var i,n,o=r(29747);i=r(18553),n=r(46992),t.exports={renderWebGL:i,renderCanvas:n}},18553:(t,e,r)=>{var i=r(70554);t.exports=function(t,e,r,n){e.updateCanvas();var o=e.width,s=e.height;if(0!==o&&0!==s){r.addToRenderList(e);var a=i.getTintAppendFloatAlpha,h=t.pipelines.set(e.pipeline,e),u=h.setTexture2D(e.fillPattern,e);h.batchTexture(e,e.fillPattern,e.displayFrame.width*e.tileScaleX,e.displayFrame.height*e.tileScaleY,e.x,e.y,o,s,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.originX*o,e.originY*s,0,0,o,s,a(e.tintTopLeft,r.alpha*e._alphaTL),a(e.tintTopRight,r.alpha*e._alphaTR),a(e.tintBottomLeft,r.alpha*e._alphaBL),a(e.tintBottomRight,r.alpha*e._alphaBR),e.tintFill,e.tilePositionX%e.displayFrame.width/e.displayFrame.width,e.tilePositionY%e.displayFrame.height/e.displayFrame.height,r,n,!1,u)}}},18471:(t,e,r)=>{var i=r(45319),n=r(83419),o=r(31401),s=r(51708),a=r(8443),h=r(95643),u=r(36383),c=r(14463),l=r(45650),f=r(10247),p=new n({Extends:h,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.TextureCrop,o.Tint,o.Transform,o.Visible,f],initialize:function(t,e,r,i){h.call(this,t,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=l(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var n=t.sys.game;this._device=n.device.video,this.setPosition(e,r),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),n.events.on(a.PAUSE,this.globalPause,this),n.events.on(a.RESUME,this.globalResume,this);var o=t.sys.sound;o&&o.on(c.GLOBAL_MUTE,this.globalMute,this),i&&this.load(i)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(t){var e=this.scene.sys.cache.video.get(t);return e?(this.cacheKey=t,this.loadHandler(e.url,e.noAudio,e.crossOrigin)):console.warn("No video in cache for key: "+t),this},changeSource:function(t,e,r,i,n){void 0===e&&(e=!0),void 0===r&&(r=!1),this.cacheKey!==t&&(this.load(t),e&&this.play(r,i,n))},getVideoKey:function(){return this.cacheKey},loadURL:function(t,e,r){void 0===e&&(e=!1);var i=this._device.getVideoURL(t);return i?(this.cacheKey="",this.loadHandler(i.url,e,r)):console.warn("No supported video format found for "+t),this},loadMediaStream:function(t,e,r){return this.loadHandler(null,e,r,t)},loadHandler:function(t,e,r,i){e||(e=!1);var n=this.video;if(n?(this.removeLoadEventHandlers(),this.stop()):((n=document.createElement("video")).controls=!1,n.setAttribute("playsinline","playsinline"),n.setAttribute("preload","auto"),n.setAttribute("disablePictureInPicture","true")),e?(n.muted=!0,n.defaultMuted=!0,n.setAttribute("autoplay","autoplay")):(n.muted=!1,n.defaultMuted=!1,n.removeAttribute("autoplay")),r?n.setAttribute("crossorigin",r):n.removeAttribute("crossorigin"),i)if("srcObject"in n)try{n.srcObject=i}catch(t){if("TypeError"!==t.name)throw t;n.src=URL.createObjectURL(i)}else n.src=URL.createObjectURL(i);else n.src=t;this.retry=0,this.video=n,this._playCalled=!1,n.load(),this.addLoadEventHandlers();var o=this.scene.sys.textures.get(this._key);return this.setTexture(o),this},requestVideoFrame:function(t,e){var r=this.video;if(r){var i=e.width,n=e.height,o=this.videoTexture,a=this.videoTextureSource,h=!o||a.source!==r;h?(this._codePaused=r.paused,this._codeMuted=r.muted,o?(a.source=r,a.width=i,a.height=n,o.get().setSize(i,n)):((o=this.scene.sys.textures.create(this._key,r,i,n)).add("__BASE",0,0,0,i,n),this.setTexture(o),this.videoTexture=o,this.videoTextureSource=o.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(s.VIDEO_TEXTURE,this,o)),this.setSizeToFrame(),this.updateDisplayOrigin()):a.update(),this.isStalled=!1,this.metadata=e;var u=e.mediaTime;h&&(this._lastUpdate=u,this.emit(s.VIDEO_CREATED,this,i,n),this.frameReady||(this.frameReady=!0,this.emit(s.VIDEO_PLAY,this))),this._playingMarker?u>=this._markerOut&&(r.loop?(r.currentTime=this._markerIn,this.emit(s.VIDEO_LOOP,this)):(this.stop(!1),this.emit(s.VIDEO_COMPLETE,this))):u<this._lastUpdate&&this.emit(s.VIDEO_LOOP,this),this._lastUpdate=u,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(t,e,r){void 0===e&&(e=-1),void 0===r&&(r=u.MAX_SAFE_INTEGER);var i=this.video;return!i||this.isPlaying()?(i||console.warn("Video not loaded"),this):(void 0===t&&(t=i.loop),i.loop=t,this._markerIn=e,this._markerOut=r,this._playingMarker=e>-1&&r>e&&r<u.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=i.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var t=this.video;t&&(t.addEventListener("error",this._loadCallbackHandler),t.addEventListener("abort",this._loadCallbackHandler),t.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var t=this.video;t&&(t.removeEventListener("error",this._loadCallbackHandler),t.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var t=this.video;if(t){var e=this._callbacks;for(var r in e)t.addEventListener(r,e[r])}},removeEventHandlers:function(){var t=this.video;if(t){var e=this._callbacks;for(var r in e)t.removeEventListener(r,e[r])}},createPlayPromise:function(t){void 0===t&&(t=!0);var e=this.video,r=e.play();if(void 0!==r){var i=this.playSuccess.bind(this),n=this.playError.bind(this);if(!t){var o=this;n=function(){o.failedPlayAttempts++}}r.then(i).catch(n)}else e.addEventListener("playing",this._callbacks.legacy),t||this.failedPlayAttempts++},addMarker:function(t,e,r){return!isNaN(e)&&e>=0&&!isNaN(r)&&r>e&&(this.markers[t]=[e,r]),this},playMarker:function(t,e){var r=this.markers[t];return r&&this.play(e,r[0],r[1]),this},removeMarker:function(t){return delete this.markers[t],this},snapshot:function(t,e){return void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.snapshotArea(0,0,this.width,this.height,t,e)},snapshotArea:function(t,e,r,i,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=this.width),void 0===i&&(i=this.height),void 0===n&&(n=r),void 0===o&&(o=i);var s=this.video,a=this.snapshotTexture;return a?(a.setSize(n,o),s&&a.context.drawImage(s,t,e,r,i,0,0,n,o)):(a=this.scene.sys.textures.createCanvas(l(),n,o),this.snapshotTexture=a,s&&a.context.drawImage(s,t,e,r,i,0,0,n,o)),a.update()},saveSnapshotTexture:function(t){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,t):this.snapshotTexture=this.scene.sys.textures.createCanvas(t,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(s.VIDEO_UNLOCKED,this));var t=this.scene.sys.sound;t&&t.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(t){var e=t.name;"NotAllowedError"===e?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(s.VIDEO_LOCKED,this)):"NotSupportedError"===e?(this.stop(!1),this.emit(s.VIDEO_UNSUPPORTED,this,t)):(this.stop(!1),this.emit(s.VIDEO_ERROR,this,t))},legacyPlayHandler:function(){var t=this.video;t&&(this.playSuccess(),t.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(s.VIDEO_PLAYING,this)},loadErrorHandler:function(t){this.stop(!1),this.emit(s.VIDEO_ERROR,this,t)},metadataHandler:function(t){this.emit(s.VIDEO_METADATA,this,t)},setSizeToFrame:function(t){t||(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,1!==this.scaleX&&(this.scaleX=this.displayWidth/this.width),1!==this.scaleY&&(this.scaleY=this.displayHeight/this.height);var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=this.width,e.hitArea.height=this.height),this},stalledHandler:function(t){this.isStalled=!0,this.emit(s.VIDEO_STALLED,this,t)},completeHandler:function(){this._playCalled=!1,this.emit(s.VIDEO_COMPLETE,this)},preUpdate:function(t,e){this.video&&this._playCalled&&this.touchLocked&&this.playWhenUnlocked&&(this.retry+=e,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(t){var e=this.video;if(e){var r=e.duration;if(r!==1/0&&!isNaN(r)){var i=r*t;this.setCurrentTime(i)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(t){var e=this.video;if(e){if("string"==typeof t){var r=t[0],i=parseFloat(t.substr(1));"+"===r?t=e.currentTime+i:"-"===r&&(t=e.currentTime-i)}e.currentTime=t}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(s.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(s.VIDEO_SEEKED,this)},getProgress:function(){var t=this.video;if(t){var e=t.duration;if(e!==1/0&&!isNaN(e))return t.currentTime/e}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(t){void 0===t&&(t=!0),this._codeMuted=t;var e=this.video;return e&&(e.muted=!!this._systemMuted||t),this},isMuted:function(){return this._codeMuted},globalMute:function(t,e){this._systemMuted=e;var r=this.video;r&&(r.muted=!!this._codeMuted||e)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,!this.video||this._codePaused||this.video.ended||this.createPlayPromise()},setPaused:function(t){void 0===t&&(t=!0);var e=this.video;return this._codePaused=t,e&&!e.ended&&(t?e.paused||(this.removeEventHandlers(),e.pause()):t||(this._playCalled?e.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(t){return void 0===t&&(t=1),this.video&&(this.video.volume=i(t,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(t){return this.video&&(this.video.playbackRate=t),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(t){return void 0===t&&(t=!0),this.video&&(this.video.loop=t),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(t,e){return void 0===e&&(e=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,t),this.videoTextureSource.setFlipY(e)),this._key=t,this.flipY=e,!!this.videoTexture},stop:function(t){void 0===t&&(t=!0);var e=this.video;return e&&(this.removeEventHandlers(),e.cancelVideoFrameCallback(this._rfvCallbackId),e.pause()),this.retry=0,this._playCalled=!1,t&&this.emit(s.VIDEO_STOP,this),this},removeVideoElement:function(){var t=this.video;if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("autoplay"),t.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var t=this.scene.sys.game.events;t.off(a.PAUSE,this.globalPause,this),t.off(a.RESUME,this.globalResume,this);var e=this.scene.sys.sound;e&&e.off(c.GLOBAL_MUTE,this.globalMute,this)}});t.exports=p},58352:t=>{t.exports=function(t,e,r,i){e.videoTexture&&(r.addToRenderList(e),t.batchSprite(e,e.frame,r,i))}},11511:(t,e,r)=>{var i=r(25305),n=r(44603),o=r(23568),s=r(18471);n.register("video",(function(t,e){void 0===t&&(t={});var r=o(t,"key",null),n=new s(this.scene,0,0,r);return void 0!==e&&(t.add=e),i(this.scene,n,t),n}))},89025:(t,e,r)=>{var i=r(18471);r(39429).register("video",(function(t,e,r){return this.displayList.add(new i(this.scene,t,e,r))}))},10247:(t,e,r)=>{var i,n,o=r(29747);i=r(29849),n=r(58352),t.exports={renderWebGL:i,renderCanvas:n}},29849:t=>{t.exports=function(t,e,r,i){e.videoTexture&&(r.addToRenderList(e),e.pipeline.batchSprite(e,r,i))}},41481:(t,e,r)=>{var i=r(10312),n=r(96503),o=r(87902),s=r(83419),a=r(31401),h=r(95643),u=r(87841),c=r(37303),l=new s({Extends:h,Mixins:[a.Depth,a.GetBounds,a.Origin,a.Transform,a.ScrollFactor,a.Visible],initialize:function(t,e,r,n,o){void 0===n&&(n=1),void 0===o&&(o=n),h.call(this,t,"Zone"),this.setPosition(e,r),this.width=n,this.height=o,this.blendMode=i.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e,r){void 0===r&&(r=!0),this.width=t,this.height=e,this.updateDisplayOrigin();var i=this.input;return r&&i&&!i.customHitArea&&(i.hitArea.width=t,i.hitArea.height=e),this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},setCircleDropZone:function(t){return this.setDropZone(new n(0,0,t),o)},setRectangleDropZone:function(t,e){return this.setDropZone(new u(0,0,t,e),c)},setDropZone:function(t,e){return this.input||this.setInteractive(t,e,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(t,e,r){r.addToRenderList(e)},renderWebGL:function(t,e,r){r.addToRenderList(e)}});t.exports=l},95261:(t,e,r)=>{var i=r(44603),n=r(23568),o=r(41481);i.register("zone",(function(t){var e=n(t,"x",0),r=n(t,"y",0),i=n(t,"width",1),s=n(t,"height",i);return new o(this.scene,e,r,i,s)}))},84175:(t,e,r)=>{var i=r(41481);r(39429).register("zone",(function(t,e,r,n){return this.displayList.add(new i(this.scene,t,e,r,n))}))},95166:t=>{t.exports=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0}},96503:(t,e,r)=>{var i=r(83419),n=r(87902),o=r(26241),s=r(79124),a=r(23777),h=r(28176),u=new i({initialize:function(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.type=a.CIRCLE,this.x=t,this.y=e,this._radius=r,this._diameter=2*r},contains:function(t,e){return n(this,t,e)},getPoint:function(t,e){return o(this,t,e)},getPoints:function(t,e,r){return s(this,t,e,r)},getRandomPoint:function(t){return h(this,t)},setTo:function(t,e,r){return this.x=t,this.y=e,this._radius=r,this._diameter=2*r,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this._diameter=2*t}},diameter:{get:function(){return this._diameter},set:function(t){this._diameter=t,this._radius=.5*t}},left:{get:function(){return this.x-this._radius},set:function(t){this.x=t+this._radius}},right:{get:function(){return this.x+this._radius},set:function(t){this.x=t-this._radius}},top:{get:function(){return this.y-this._radius},set:function(t){this.y=t+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(t){this.y=t-this._radius}}});t.exports=u},71562:t=>{t.exports=function(t){return Math.PI*t.radius*2}},92110:(t,e,r)=>{var i=r(2141);t.exports=function(t,e,r){return void 0===r&&(r=new i),r.x=t.x+t.radius*Math.cos(e),r.y=t.y+t.radius*Math.sin(e),r}},42250:(t,e,r)=>{var i=r(96503);t.exports=function(t){return new i(t.x,t.y,t.radius)}},87902:t=>{t.exports=function(t,e,r){return t.radius>0&&e>=t.left&&e<=t.right&&r>=t.top&&r<=t.bottom&&(t.x-e)*(t.x-e)+(t.y-r)*(t.y-r)<=t.radius*t.radius}},5698:(t,e,r)=>{var i=r(87902);t.exports=function(t,e){return i(t,e.x,e.y)}},70588:(t,e,r)=>{var i=r(87902);t.exports=function(t,e){return i(t,e.x,e.y)&&i(t,e.right,e.y)&&i(t,e.x,e.bottom)&&i(t,e.right,e.bottom)}},26394:t=>{t.exports=function(t,e){return e.setTo(t.x,t.y,t.radius)}},76278:t=>{t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.radius===e.radius}},2074:(t,e,r)=>{var i=r(87841);t.exports=function(t,e){return void 0===e&&(e=new i),e.x=t.left,e.y=t.top,e.width=t.diameter,e.height=t.diameter,e}},26241:(t,e,r)=>{var i=r(92110),n=r(62945),o=r(36383),s=r(2141);t.exports=function(t,e,r){void 0===r&&(r=new s);var a=n(e,0,o.PI2);return i(t,a,r)}},79124:(t,e,r)=>{var i=r(71562),n=r(92110),o=r(62945),s=r(36383);t.exports=function(t,e,r,a){void 0===a&&(a=[]),!e&&r>0&&(e=i(t)/r);for(var h=0;h<e;h++){var u=o(h/e,0,s.PI2);a.push(n(t,u))}return a}},50884:t=>{t.exports=function(t,e,r){return t.x+=e,t.y+=r,t}},39212:t=>{t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},28176:(t,e,r)=>{var i=r(2141);t.exports=function(t,e){void 0===e&&(e=new i);var r=2*Math.PI*Math.random(),n=Math.random()+Math.random(),o=n>1?2-n:n,s=o*Math.cos(r),a=o*Math.sin(r);return e.x=t.x+s*t.radius,e.y=t.y+a*t.radius,e}},88911:(t,e,r)=>{var i=r(96503);i.Area=r(95166),i.Circumference=r(71562),i.CircumferencePoint=r(92110),i.Clone=r(42250),i.Contains=r(87902),i.ContainsPoint=r(5698),i.ContainsRect=r(70588),i.CopyFrom=r(26394),i.Equals=r(76278),i.GetBounds=r(2074),i.GetPoint=r(26241),i.GetPoints=r(79124),i.Offset=r(50884),i.OffsetPoint=r(39212),i.Random=r(28176),t.exports=i},23777:t=>{t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},78874:t=>{t.exports=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},92990:t=>{t.exports=function(t){var e=t.width/2,r=t.height/2,i=Math.pow(e-r,2)/Math.pow(e+r,2);return Math.PI*(e+r)*(1+3*i/(10+Math.sqrt(4-3*i)))}},79522:(t,e,r)=>{var i=r(2141);t.exports=function(t,e,r){void 0===r&&(r=new i);var n=t.width/2,o=t.height/2;return r.x=t.x+n*Math.cos(e),r.y=t.y+o*Math.sin(e),r}},58102:(t,e,r)=>{var i=r(8497);t.exports=function(t){return new i(t.x,t.y,t.width,t.height)}},81154:t=>{t.exports=function(t,e,r){if(t.width<=0||t.height<=0)return!1;var i=(e-t.x)/t.width,n=(r-t.y)/t.height;return(i*=i)+(n*=n)<.25}},46662:(t,e,r)=>{var i=r(81154);t.exports=function(t,e){return i(t,e.x,e.y)}},1632:(t,e,r)=>{var i=r(81154);t.exports=function(t,e){return i(t,e.x,e.y)&&i(t,e.right,e.y)&&i(t,e.x,e.bottom)&&i(t,e.right,e.bottom)}},65534:t=>{t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},8497:(t,e,r)=>{var i=r(83419),n=r(81154),o=r(90549),s=r(48320),a=r(23777),h=r(24820),u=new i({initialize:function(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.type=a.ELLIPSE,this.x=t,this.y=e,this.width=r,this.height=i},contains:function(t,e){return n(this,t,e)},getPoint:function(t,e){return o(this,t,e)},getPoints:function(t,e,r){return s(this,t,e,r)},getRandomPoint:function(t){return h(this,t)},setTo:function(t,e,r,i){return this.x=t,this.y=e,this.width=r,this.height=i,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(t){this.x=t+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(t){this.y=t+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=u},36146:t=>{t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},23694:(t,e,r)=>{var i=r(87841);t.exports=function(t,e){return void 0===e&&(e=new i),e.x=t.left,e.y=t.top,e.width=t.width,e.height=t.height,e}},90549:(t,e,r)=>{var i=r(79522),n=r(62945),o=r(36383),s=r(2141);t.exports=function(t,e,r){void 0===r&&(r=new s);var a=n(e,0,o.PI2);return i(t,a,r)}},48320:(t,e,r)=>{var i=r(92990),n=r(79522),o=r(62945),s=r(36383);t.exports=function(t,e,r,a){void 0===a&&(a=[]),!e&&r>0&&(e=i(t)/r);for(var h=0;h<e;h++){var u=o(h/e,0,s.PI2);a.push(n(t,u))}return a}},73424:t=>{t.exports=function(t,e,r){return t.x+=e,t.y+=r,t}},44808:t=>{t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},24820:(t,e,r)=>{var i=r(2141);t.exports=function(t,e){void 0===e&&(e=new i);var r=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return e.x=t.x+n*Math.cos(r)*t.width/2,e.y=t.y+n*Math.sin(r)*t.height/2,e}},49203:(t,e,r)=>{var i=r(8497);i.Area=r(78874),i.Circumference=r(92990),i.CircumferencePoint=r(79522),i.Clone=r(58102),i.Contains=r(81154),i.ContainsPoint=r(46662),i.ContainsRect=r(1632),i.CopyFrom=r(65534),i.Equals=r(36146),i.GetBounds=r(23694),i.GetPoint=r(90549),i.GetPoints=r(48320),i.Offset=r(73424),i.OffsetPoint=r(44808),i.Random=r(24820),t.exports=i},55738:(t,e,r)=>{var i=r(23777),n=r(79291),o={Circle:r(88911),Ellipse:r(49203),Intersects:r(91865),Line:r(2529),Mesh:r(73090),Point:r(43711),Polygon:r(58423),Rectangle:r(93232),Triangle:r(84435)};o=n(!1,o,i),t.exports=o},2044:(t,e,r)=>{var i=r(20339);t.exports=function(t,e){return i(t.x,t.y,e.x,e.y)<=t.radius+e.radius}},81491:t=>{t.exports=function(t,e){var r=e.width/2,i=e.height/2,n=Math.abs(t.x-e.x-r),o=Math.abs(t.y-e.y-i),s=r+t.radius,a=i+t.radius;if(n>s||o>a)return!1;if(n<=r||o<=i)return!0;var h=n-r,u=o-i;return h*h+u*u<=t.radius*t.radius}},63376:(t,e,r)=>{var i=r(2141),n=r(2044);t.exports=function(t,e,r){if(void 0===r&&(r=[]),n(t,e)){var o,s,a,h,u=t.x,c=t.y,l=t.radius,f=e.x,p=e.y,d=e.radius;if(c===p)0==(a=(s=-2*p)*s-4*(o=1)*(f*f+(h=(d*d-l*l-f*f+u*u)/(2*(u-f)))*h-2*f*h+p*p-d*d))?r.push(new i(h,-s/(2*o))):a>0&&(r.push(new i(h,(-s+Math.sqrt(a))/(2*o))),r.push(new i(h,(-s-Math.sqrt(a))/(2*o))));else{var v=(u-f)/(c-p),y=(d*d-l*l-f*f+u*u-p*p+c*c)/(2*(c-p));0==(a=(s=2*c*v-2*y*v-2*u)*s-4*(o=v*v+1)*(u*u+c*c+y*y-l*l-2*c*y))?(h=-s/(2*o),r.push(new i(h,y-h*v))):a>0&&(h=(-s+Math.sqrt(a))/(2*o),r.push(new i(h,y-h*v)),h=(-s-Math.sqrt(a))/(2*o),r.push(new i(h,y-h*v)))}}return r}},97439:(t,e,r)=>{var i=r(4042),n=r(81491);t.exports=function(t,e,r){if(void 0===r&&(r=[]),n(t,e)){var o=e.getLineA(),s=e.getLineB(),a=e.getLineC(),h=e.getLineD();i(o,t,r),i(s,t,r),i(a,t,r),i(h,t,r)}return r}},4042:(t,e,r)=>{var i=r(2141),n=r(80462);t.exports=function(t,e,r){if(void 0===r&&(r=[]),n(t,e)){var o,s,a=t.x1,h=t.y1,u=t.x2,c=t.y2,l=e.x,f=e.y,p=e.radius,d=u-a,v=c-h,y=a-l,g=h-f,m=d*d+v*v,x=2*(d*y+v*g),b=x*x-4*m*(y*y+g*g-p*p);if(0===b){var w=-x/(2*m);o=a+w*d,s=h+w*v,w>=0&&w<=1&&r.push(new i(o,s))}else if(b>0){var E=(-x-Math.sqrt(b))/(2*m);o=a+E*d,s=h+E*v,E>=0&&E<=1&&r.push(new i(o,s));var T=(-x+Math.sqrt(b))/(2*m);o=a+T*d,s=h+T*v,T>=0&&T<=1&&r.push(new i(o,s))}}return r}},36100:(t,e,r)=>{var i=r(25836);t.exports=function(t,e,r,n){void 0===r&&(r=!1);var o,s,a,h=t.x1,u=t.y1,c=t.x2,l=t.y2,f=e.x1,p=e.y1,d=c-h,v=l-u,y=e.x2-f,g=e.y2-p,m=d*g-v*y;if(0===m)return null;if(r){if((s=(f+y*(o=(d*(p-u)+v*(h-f))/(y*v-g*d))-h)/d)<0||o<0||o>1)return null;a=s}else{if(s=((u-p)*d-(h-f)*v)/m,(o=((f-h)*g-(p-u)*y)/m)<0||o>1||s<0||s>1)return null;a=o}return void 0===n&&(n=new i),n.set(h+d*a,u+v*a,a)}},3073:(t,e,r)=>{var i=r(36100),n=r(23031),o=r(25836),s=new n,a=new o;t.exports=function(t,e,r,n){void 0===r&&(r=!1),void 0===n&&(n=new o);var h=!1;n.set(),a.set();for(var u=e[e.length-1],c=0;c<e.length;c++){var l=e[c];s.setTo(u.x,u.y,l.x,l.y),u=l,i(t,s,r,a)&&(!h||a.z<n.z)&&(n.copy(a),h=!0)}return h?n:null}},56362:(t,e,r)=>{var i=r(25836),n=r(61369),o=r(3073),s=new i;t.exports=function(t,e,r,i){void 0===i&&(i=new n),Array.isArray(e)||(e=[e]);var a=!1;i.set(),s.set();for(var h=0;h<e.length;h++)o(t,e[h].points,r,s)&&(!a||s.z<i.z)&&(i.set(s.x,s.y,s.z,h),a=!0);return a?i:null}},60646:(t,e,r)=>{var i=r(2141),n=r(76112),o=r(92773);t.exports=function(t,e,r){if(void 0===r&&(r=[]),o(t,e))for(var s=e.getLineA(),a=e.getLineB(),h=e.getLineC(),u=e.getLineD(),c=[new i,new i,new i,new i],l=[n(s,t,c[0]),n(a,t,c[1]),n(h,t,c[2]),n(u,t,c[3])],f=0;f<4;f++)l[f]&&r.push(c[f]);return r}},71147:(t,e,r)=>{var i=r(61369),n=r(56362),o=new(r(23031));function s(t,e,r,s,a){var h=Math.cos(t),u=Math.sin(t);o.setTo(e,r,e+h,r+u);var c=n(o,s,!0);c&&a.push(new i(c.x,c.y,t,c.w))}function a(t,e){return t.z-e.z}t.exports=function(t,e,r){Array.isArray(r)||(r=[r]);for(var i=[],n=[],o=0;o<r.length;o++)for(var h=r[o].points,u=0;u<h.length;u++){var c=Math.atan2(h[u].y-e,h[u].x-t);-1===n.indexOf(c)&&(s(c,t,e,r,i),s(c-1e-5,t,e,r,i),s(c+1e-5,t,e,r,i),n.push(c))}return i.sort(a)}},68389:(t,e,r)=>{var i=r(87841),n=r(59996);t.exports=function(t,e,r){return void 0===r&&(r=new i),n(t,e)&&(r.x=Math.max(t.x,e.x),r.y=Math.max(t.y,e.y),r.width=Math.min(t.right,e.right)-r.x,r.height=Math.min(t.bottom,e.bottom)-r.y),r}},52784:(t,e,r)=>{var i=r(60646),n=r(59996);t.exports=function(t,e,r){if(void 0===r&&(r=[]),n(t,e)){var o=t.getLineA(),s=t.getLineB(),a=t.getLineC(),h=t.getLineD();i(o,e,r),i(s,e,r),i(a,e,r),i(h,e,r)}return r}},26341:(t,e,r)=>{var i=r(89265),n=r(60646);t.exports=function(t,e,r){if(void 0===r&&(r=[]),i(t,e)){var o=e.getLineA(),s=e.getLineB(),a=e.getLineC();n(o,t,r),n(s,t,r),n(a,t,r)}return r}},38720:(t,e,r)=>{var i=r(4042),n=r(67636);t.exports=function(t,e,r){if(void 0===r&&(r=[]),n(t,e)){var o=t.getLineA(),s=t.getLineB(),a=t.getLineC();i(o,e,r),i(s,e,r),i(a,e,r)}return r}},13882:(t,e,r)=>{var i=r(2141),n=r(2822),o=r(76112);t.exports=function(t,e,r){if(void 0===r&&(r=[]),n(t,e))for(var s=t.getLineA(),a=t.getLineB(),h=t.getLineC(),u=[new i,new i,new i],c=[o(s,e,u[0]),o(a,e,u[1]),o(h,e,u[2])],l=0;l<3;l++)c[l]&&r.push(u[l]);return r}},75636:(t,e,r)=>{var i=r(82944),n=r(13882);t.exports=function(t,e,r){if(void 0===r&&(r=[]),i(t,e)){var o=e.getLineA(),s=e.getLineB(),a=e.getLineC();n(t,o,r),n(t,s,r),n(t,a,r)}return r}},80462:(t,e,r)=>{var i=r(87902),n=new(r(2141));t.exports=function(t,e,r){if(void 0===r&&(r=n),i(e,t.x1,t.y1))return r.x=t.x1,r.y=t.y1,!0;if(i(e,t.x2,t.y2))return r.x=t.x2,r.y=t.y2,!0;var o=t.x2-t.x1,s=t.y2-t.y1,a=e.x-t.x1,h=e.y-t.y1,u=o*o+s*s,c=o,l=s;if(u>0){var f=(a*o+h*s)/u;c*=f,l*=f}return r.x=t.x1+c,r.y=t.y1+l,c*c+l*l<=u&&c*o+l*s>=0&&i(e,r.x,r.y)}},76112:t=>{t.exports=function(t,e,r){var i=t.x1,n=t.y1,o=t.x2,s=t.y2,a=e.x1,h=e.y1,u=e.x2,c=e.y2;if(i===o&&n===s||a===u&&h===c)return!1;var l=(c-h)*(o-i)-(u-a)*(s-n);if(0===l)return!1;var f=((u-a)*(n-h)-(c-h)*(i-a))/l,p=((o-i)*(n-h)-(s-n)*(i-a))/l;return!(f<0||f>1||p<0||p>1||(r&&(r.x=i+f*(o-i),r.y=n+f*(s-n)),0))}},92773:t=>{t.exports=function(t,e){var r=t.x1,i=t.y1,n=t.x2,o=t.y2,s=e.x,a=e.y,h=e.right,u=e.bottom,c=0;if(r>=s&&r<=h&&i>=a&&i<=u||n>=s&&n<=h&&o>=a&&o<=u)return!0;if(r<s&&n>=s){if((c=i+(o-i)*(s-r)/(n-r))>a&&c<=u)return!0}else if(r>h&&n<=h&&(c=i+(o-i)*(h-r)/(n-r))>=a&&c<=u)return!0;if(i<a&&o>=a){if((c=r+(n-r)*(a-i)/(o-i))>=s&&c<=h)return!0}else if(i>u&&o<=u&&(c=r+(n-r)*(u-i)/(o-i))>=s&&c<=h)return!0;return!1}},16204:t=>{t.exports=function(t,e,r){void 0===r&&(r=1);var i=e.x1,n=e.y1,o=e.x2,s=e.y2,a=t.x,h=t.y,u=(o-i)*(o-i)+(s-n)*(s-n);if(0===u)return!1;var c=((a-i)*(o-i)+(h-n)*(s-n))/u;if(c<0)return Math.sqrt((i-a)*(i-a)+(n-h)*(n-h))<=r;if(c>=0&&c<=1){var l=((n-h)*(o-i)-(i-a)*(s-n))/u;return Math.abs(l)*Math.sqrt(u)<=r}return Math.sqrt((o-a)*(o-a)+(s-h)*(s-h))<=r}},14199:(t,e,r)=>{var i=r(16204);t.exports=function(t,e){if(!i(t,e))return!1;var r=Math.min(e.x1,e.x2),n=Math.max(e.x1,e.x2),o=Math.min(e.y1,e.y2),s=Math.max(e.y1,e.y2);return t.x>=r&&t.x<=n&&t.y>=o&&t.y<=s}},59996:t=>{t.exports=function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0||t.right<e.x||t.bottom<e.y||t.x>e.right||t.y>e.bottom)}},89265:(t,e,r)=>{var i=r(76112),n=r(37303),o=r(48653),s=r(77493);t.exports=function(t,e){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)return!1;var r=e.getLineA(),a=e.getLineB(),h=e.getLineC();if(n(t,r.x1,r.y1)||n(t,r.x2,r.y2))return!0;if(n(t,a.x1,a.y1)||n(t,a.x2,a.y2))return!0;if(n(t,h.x1,h.y1)||n(t,h.x2,h.y2))return!0;var u=t.getLineA(),c=t.getLineB(),l=t.getLineC(),f=t.getLineD();if(i(r,u)||i(r,c)||i(r,l)||i(r,f))return!0;if(i(a,u)||i(a,c)||i(a,l)||i(a,f))return!0;if(i(h,u)||i(h,c)||i(h,l)||i(h,f))return!0;var p=s(t);return o(e,p,!0).length>0}},84411:t=>{t.exports=function(t,e,r,i,n,o){return void 0===o&&(o=0),!(e>t.right+o||r<t.left-o||i>t.bottom+o||n<t.top-o)}},67636:(t,e,r)=>{var i=r(80462),n=r(10690);t.exports=function(t,e){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top||!n(t,e.x,e.y)&&!i(t.getLineA(),e)&&!i(t.getLineB(),e)&&!i(t.getLineC(),e))}},2822:(t,e,r)=>{var i=r(76112);t.exports=function(t,e){return!!(t.contains(e.x1,e.y1)||t.contains(e.x2,e.y2)||i(t.getLineA(),e)||i(t.getLineB(),e)||i(t.getLineC(),e))}},82944:(t,e,r)=>{var i=r(48653),n=r(71694),o=r(76112);t.exports=function(t,e){if(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)return!1;var r=t.getLineA(),s=t.getLineB(),a=t.getLineC(),h=e.getLineA(),u=e.getLineB(),c=e.getLineC();if(o(r,h)||o(r,u)||o(r,c))return!0;if(o(s,h)||o(s,u)||o(s,c))return!0;if(o(a,h)||o(a,u)||o(a,c))return!0;var l=n(t),f=i(e,l,!0);return f.length>0||(l=n(e),(f=i(t,l,!0)).length>0)}},91865:(t,e,r)=>{t.exports={CircleToCircle:r(2044),CircleToRectangle:r(81491),GetCircleToCircle:r(63376),GetCircleToRectangle:r(97439),GetLineToCircle:r(4042),GetLineToLine:r(36100),GetLineToPoints:r(3073),GetLineToPolygon:r(56362),GetLineToRectangle:r(60646),GetRaysFromPointToPolygon:r(71147),GetRectangleIntersection:r(68389),GetRectangleToRectangle:r(52784),GetRectangleToTriangle:r(26341),GetTriangleToCircle:r(38720),GetTriangleToLine:r(13882),GetTriangleToTriangle:r(75636),LineToCircle:r(80462),LineToLine:r(76112),LineToRectangle:r(92773),PointToLine:r(16204),PointToLineSegment:r(14199),RectangleToRectangle:r(59996),RectangleToTriangle:r(89265),RectangleToValues:r(84411),TriangleToCircle:r(67636),TriangleToLine:r(2822),TriangleToTriangle:r(82944)}},91938:t=>{t.exports=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},84993:t=>{t.exports=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=[]);var i=Math.round(t.x1),n=Math.round(t.y1),o=Math.round(t.x2),s=Math.round(t.y2),a=Math.abs(o-i),h=Math.abs(s-n),u=i<o?1:-1,c=n<s?1:-1,l=a-h;r.push({x:i,y:n});for(var f=1;i!==o||n!==s;){var p=l<<1;p>-h&&(l-=h,i+=u),p<a&&(l+=a,n+=c),f%e==0&&r.push({x:i,y:n}),f++}return r}},36469:t=>{t.exports=function(t,e,r){var i=e-(t.x1+t.x2)/2,n=r-(t.y1+t.y2)/2;return t.x1+=i,t.y1+=n,t.x2+=i,t.y2+=n,t}},31116:(t,e,r)=>{var i=r(23031);t.exports=function(t){return new i(t.x1,t.y1,t.x2,t.y2)}},59944:t=>{t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2)}},59220:t=>{t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}},78177:(t,e,r)=>{var i=r(35001);t.exports=function(t,e,r){void 0===r&&(r=e);var n=i(t),o=t.x2-t.x1,s=t.y2-t.y1;return e&&(t.x1=t.x1-o/n*e,t.y1=t.y1-s/n*e),r&&(t.x2=t.x2+o/n*r,t.y2=t.y2+s/n*r),t}},26708:(t,e,r)=>{var i=r(52816),n=r(6113),o=r(2141);t.exports=function(t,e,r,s,a){void 0===s&&(s=0),void 0===a&&(a=[]);var h,u,c=[],l=t.x1,f=t.y1,p=t.x2-l,d=t.y2-f,v=n(e,a),y=r-1;for(h=0;h<y;h++)u=v(h/y),c.push(new o(l+p*u,f+d*u));if(u=v(1),c.push(new o(l+p*u,f+d*u)),s>0){var g=c[0],m=[g];for(h=1;h<c.length-1;h++){var x=c[h];i(g,x)>=s&&(m.push(x),g=x)}var b=c[c.length-1];return i(g,b)<s&&m.pop(),m.push(b),m}return c}},32125:(t,e,r)=>{var i=r(2141);t.exports=function(t,e){return void 0===e&&(e=new i),e.x=(t.x1+t.x2)/2,e.y=(t.y1+t.y2)/2,e}},99569:(t,e,r)=>{var i=r(2141);t.exports=function(t,e,r){void 0===r&&(r=new i);var n=t.x1,o=t.y1,s=t.x2,a=t.y2,h=(s-n)*(s-n)+(a-o)*(a-o);if(0===h)return r;var u=((e.x-n)*(s-n)+(e.y-o)*(a-o))/h;return r.x=n+u*(s-n),r.y=o+u*(a-o),r}},34638:(t,e,r)=>{var i=r(36383),n=r(91938),o=r(2141);t.exports=function(t,e){void 0===e&&(e=new o);var r=n(t)-i.TAU;return e.x=Math.cos(r),e.y=Math.sin(r),e}},13151:(t,e,r)=>{var i=r(2141);t.exports=function(t,e,r){return void 0===r&&(r=new i),r.x=t.x1+(t.x2-t.x1)*e,r.y=t.y1+(t.y2-t.y1)*e,r}},15258:(t,e,r)=>{var i=r(35001),n=r(2141);t.exports=function(t,e,r,o){void 0===o&&(o=[]),!e&&r>0&&(e=i(t)/r);for(var s=t.x1,a=t.y1,h=t.x2,u=t.y2,c=0;c<e;c++){var l=c/e,f=s+(h-s)*l,p=a+(u-a)*l;o.push(new n(f,p))}return o}},26408:t=>{t.exports=function(t,e){var r=t.x1,i=t.y1,n=t.x2,o=t.y2,s=(n-r)*(n-r)+(o-i)*(o-i);if(0===s)return!1;var a=((i-e.y)*(n-r)-(r-e.x)*(o-i))/s;return Math.abs(a)*Math.sqrt(s)}},98770:t=>{t.exports=function(t){return Math.abs(t.y1-t.y2)}},35001:t=>{t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},23031:(t,e,r)=>{var i=r(83419),n=r(13151),o=r(15258),s=r(23777),a=r(65822),h=r(26099),u=new i({initialize:function(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.type=s.LINE,this.x1=t,this.y1=e,this.x2=r,this.y2=i},getPoint:function(t,e){return n(this,t,e)},getPoints:function(t,e,r){return o(this,t,e,r)},getRandomPoint:function(t){return a(this,t)},setTo:function(t,e,r,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x1=t,this.y1=e,this.x2=r,this.y2=i,this},setFromObjects:function(t,e){return this.x1=t.x,this.y1=t.y,this.x2=e.x,this.y2=e.y,this},getPointA:function(t){return void 0===t&&(t=new h),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new h),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=u},64795:(t,e,r)=>{var i=r(36383),n=r(15994),o=r(91938);t.exports=function(t){var e=o(t)-i.TAU;return n(e,-Math.PI,Math.PI)}},52616:(t,e,r)=>{var i=r(36383),n=r(91938);t.exports=function(t){return Math.cos(n(t)-i.TAU)}},87231:(t,e,r)=>{var i=r(36383),n=r(91938);t.exports=function(t){return Math.sin(n(t)-i.TAU)}},89662:t=>{t.exports=function(t,e,r){return t.x1+=e,t.y1+=r,t.x2+=e,t.y2+=r,t}},71165:t=>{t.exports=function(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},65822:(t,e,r)=>{var i=r(2141);t.exports=function(t,e){void 0===e&&(e=new i);var r=Math.random();return e.x=t.x1+r*(t.x2-t.x1),e.y=t.y1+r*(t.y2-t.y1),e}},69777:(t,e,r)=>{var i=r(91938),n=r(64795);t.exports=function(t,e){return 2*n(e)-Math.PI-i(t)}},39706:(t,e,r)=>{var i=r(64400);t.exports=function(t,e){var r=(t.x1+t.x2)/2,n=(t.y1+t.y2)/2;return i(t,r,n,e)}},82585:(t,e,r)=>{var i=r(64400);t.exports=function(t,e,r){return i(t,e.x,e.y,r)}},64400:t=>{t.exports=function(t,e,r,i){var n=Math.cos(i),o=Math.sin(i),s=t.x1-e,a=t.y1-r;return t.x1=s*n-a*o+e,t.y1=s*o+a*n+r,s=t.x2-e,a=t.y2-r,t.x2=s*n-a*o+e,t.y2=s*o+a*n+r,t}},62377:t=>{t.exports=function(t,e,r,i,n){return t.x1=e,t.y1=r,t.x2=e+Math.cos(i)*n,t.y2=r+Math.sin(i)*n,t}},71366:t=>{t.exports=function(t){return(t.y2-t.y1)/(t.x2-t.x1)}},10809:t=>{t.exports=function(t){return Math.abs(t.x1-t.x2)}},2529:(t,e,r)=>{var i=r(23031);i.Angle=r(91938),i.BresenhamPoints=r(84993),i.CenterOn=r(36469),i.Clone=r(31116),i.CopyFrom=r(59944),i.Equals=r(59220),i.Extend=r(78177),i.GetEasedPoints=r(26708),i.GetMidPoint=r(32125),i.GetNearestPoint=r(99569),i.GetNormal=r(34638),i.GetPoint=r(13151),i.GetPoints=r(15258),i.GetShortestDistance=r(26408),i.Height=r(98770),i.Length=r(35001),i.NormalAngle=r(64795),i.NormalX=r(52616),i.NormalY=r(87231),i.Offset=r(89662),i.PerpSlope=r(71165),i.Random=r(65822),i.ReflectAngle=r(69777),i.Rotate=r(39706),i.RotateAroundPoint=r(82585),i.RotateAroundXY=r(64400),i.SetToAngle=r(62377),i.Slope=r(71366),i.Width=r(10809),t.exports=i},83997:(t,e,r)=>{var i=r(83419),n=r(87841),o=r(26099);function s(t,e,r,i){var n=t-r,o=e-i,s=n*n+o*o;return Math.sqrt(s)}var a=new i({initialize:function(t,e,r){this.vertex1=t,this.vertex2=e,this.vertex3=r,this.bounds=new n,this._inCenter=new o},getInCenter:function(t){void 0===t&&(t=!0);var e,r,i,n,o,a,h=this.vertex1,u=this.vertex2,c=this.vertex3;t?(e=h.x,r=h.y,i=u.x,n=u.y,o=c.x,a=c.y):(e=h.vx,r=h.vy,i=u.vx,n=u.vy,o=c.vx,a=c.vy);var l=s(o,a,i,n),f=s(e,r,o,a),p=s(i,n,e,r),d=l+f+p;return this._inCenter.set((e*l+i*f+o*p)/d,(r*l+n*f+a*p)/d)},contains:function(t,e,r){var i=this.vertex1,n=this.vertex2,o=this.vertex3,s=i.vx,a=i.vy,h=n.vx,u=n.vy,c=o.vx,l=o.vy;if(r){var f=r.a,p=r.b,d=r.c,v=r.d,y=r.e,g=r.f;s=i.vx*f+i.vy*d+y,a=i.vx*p+i.vy*v+g,h=n.vx*f+n.vy*d+y,u=n.vx*p+n.vy*v+g,c=o.vx*f+o.vy*d+y,l=o.vx*p+o.vy*v+g}var m=c-s,x=l-a,b=h-s,w=u-a,E=t-s,T=e-a,S=m*m+x*x,_=m*b+x*w,O=m*E+x*T,P=b*b+w*w,M=b*E+w*T,A=S*P-_*_,L=0===A?0:1/A,C=(P*O-_*M)*L,R=(S*M-_*O)*L;return C>=0&&R>=0&&C+R<1},isCounterClockwise:function(t){var e=this.vertex1,r=this.vertex2,i=this.vertex3,n=(r.vx-e.vx)*(i.vy-e.vy)-(r.vy-e.vy)*(i.vx-e.vx);return t<=0?n>=0:n<0},load:function(t,e,r,i,n){return r=this.vertex1.load(t,e,r,i,n),r=this.vertex2.load(t,e,r,i,n),this.vertex3.load(t,e,r,i,n)},transformCoordinatesLocal:function(t,e,r,i){return this.vertex1.transformCoordinatesLocal(t,e,r,i),this.vertex2.transformCoordinatesLocal(t,e,r,i),this.vertex3.transformCoordinatesLocal(t,e,r,i),this},updateBounds:function(){var t=this.vertex1,e=this.vertex2,r=this.vertex3,i=this.bounds;return i.x=Math.min(t.vx,e.vx,r.vx),i.y=Math.min(t.vy,e.vy,r.vy),i.width=Math.max(t.vx,e.vx,r.vx)-i.x,i.height=Math.max(t.vy,e.vy,r.vy)-i.y,this},isInView:function(t,e,r,i,n,o,s,a,h,u,c){this.update(i,n,o,s,a,h,u,c);var l=this.vertex1,f=this.vertex2,p=this.vertex3;if(l.ta<=0&&f.ta<=0&&p.ta<=0)return!1;if(e&&!this.isCounterClockwise(r))return!1;var d=this.bounds;d.x=Math.min(l.tx,f.tx,p.tx),d.y=Math.min(l.ty,f.ty,p.ty),d.width=Math.max(l.tx,f.tx,p.tx)-d.x,d.height=Math.max(l.ty,f.ty,p.ty)-d.y;var v=t.x+t.width,y=t.y+t.height;return!(d.width<=0||d.height<=0||t.width<=0||t.height<=0||d.right<t.x||d.bottom<t.y||d.x>v||d.y>y)},scrollUV:function(t,e){return this.vertex1.scrollUV(t,e),this.vertex2.scrollUV(t,e),this.vertex3.scrollUV(t,e),this},scaleUV:function(t,e){return this.vertex1.scaleUV(t,e),this.vertex2.scaleUV(t,e),this.vertex3.scaleUV(t,e),this},setColor:function(t){return this.vertex1.color=t,this.vertex2.color=t,this.vertex3.color=t,this},update:function(t,e,r,i,n,o,s,a){return this.vertex1.update(e,r,i,n,o,s,a,t),this.vertex2.update(e,r,i,n,o,s,a,t),this.vertex3.update(e,r,i,n,o,s,a,t),this},translate:function(t,e){void 0===e&&(e=0);var r=this.vertex1,i=this.vertex2,n=this.vertex3;return r.x+=t,r.y+=e,i.x+=t,i.y+=e,n.x+=t,n.y+=e,this},x:{get:function(){return this.getInCenter().x},set:function(t){var e=this.getInCenter();this.translate(t-e.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(t){var e=this.getInCenter();this.translate(0,t-e.y)}},alpha:{get:function(){var t=this.vertex1,e=this.vertex2,r=this.vertex3;return(t.alpha+e.alpha+r.alpha)/3},set:function(t){this.vertex1.alpha=t,this.vertex2.alpha=t,this.vertex3.alpha=t}},depth:{get:function(){var t=this.vertex1,e=this.vertex2,r=this.vertex3;return(t.vz+e.vz+r.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});t.exports=a},48803:(t,e,r)=>{var i=r(83997),n=r(95540),o=r(37867),s=r(25836),a=r(39318),h=new s,u=new s,c=new o;t.exports=function(t){var e,r=n(t,"mesh"),o=n(t,"texture",null),s=n(t,"frame"),l=n(t,"width",1),f=n(t,"height",l),p=n(t,"widthSegments",1),d=n(t,"heightSegments",p),v=n(t,"x",0),y=n(t,"y",0),g=n(t,"z",0),m=n(t,"rotateX",0),x=n(t,"rotateY",0),b=n(t,"rotateZ",0),w=n(t,"zIsUp",!0),E=n(t,"isOrtho",!!r&&r.dirtyCache[11]),T=n(t,"colors",[16777215]),S=n(t,"alphas",[1]),_=n(t,"tile",!1),O=n(t,"flipY",!1),P=n(t,"width",null),M={faces:[],verts:[]};if(h.set(v,y,g),u.set(m,x,b),c.fromRotationXYTranslation(u,h,w),!o&&r)o=r.texture,s||(e=r.frame);else if(r&&"string"==typeof o)o=r.scene.sys.textures.get(o);else if(!o)return M;e||(e=o.get(s)),!P&&E&&o&&r&&(l=e.width/r.height,f=e.height/r.height);var A,L,C=l/2,R=f/2,k=Math.floor(p),F=Math.floor(d),I=k+1,D=F+1,j=l/k,B=f/F,N=[],G=[],U=0,Y=1,z=0,X=1;e&&(U=e.u0,Y=e.u1,O?(z=e.v1,X=e.v0):(z=e.v0,X=e.v1));var V=Y-U,W=X-z;for(L=0;L<D;L++){var H=L*B-R;for(A=0;A<I;A++){var q=A*j-C;G.push(q,-H);var K=U+V*(A/k),Z=z+W*(L/F);N.push(K,Z)}}Array.isArray(T)||(T=[T]),Array.isArray(S)||(S=[S]);var J=0,Q=0;for(L=0;L<F;L++)for(A=0;A<k;A++){var $=2*(A+I*L),tt=2*(A+I*(L+1)),et=2*(A+1+I*(L+1)),rt=2*(A+1+I*L),it=T[Q],nt=S[J],ot=new a(G[$],G[$+1],0,N[$],N[$+1],it,nt).transformMat4(c),st=new a(G[tt],G[tt+1],0,N[tt],N[tt+1],it,nt).transformMat4(c),at=new a(G[rt],G[rt+1],0,N[rt],N[rt+1],it,nt).transformMat4(c),ht=new a(G[tt],G[tt+1],0,N[tt],N[tt+1],it,nt).transformMat4(c),ut=new a(G[et],G[et+1],0,N[et],N[et+1],it,nt).transformMat4(c),ct=new a(G[rt],G[rt+1],0,N[rt],N[rt+1],it,nt).transformMat4(c);_&&(ot.setUVs(U,X),st.setUVs(U,z),at.setUVs(Y,X),ht.setUVs(U,z),ut.setUVs(Y,z),ct.setUVs(Y,X)),++Q===T.length&&(Q=0),++J===S.length&&(J=0),M.verts.push(ot,st,at,ht,ut,ct),M.faces.push(new i(ot,st,at),new i(ht,ut,ct))}return r&&(r.faces=r.faces.concat(M.faces),r.vertices=r.vertices.concat(M.verts)),M}},34684:(t,e,r)=>{var i=r(83997),n=r(37867),o=r(25836),s=r(39318),a=new o,h=new o,u=new n;t.exports=function(t,e,r,n,o,c,l,f,p,d){void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0),void 0===c&&(c=0),void 0===l&&(l=0),void 0===f&&(f=0),void 0===p&&(p=0),void 0===d&&(d=!0);var v={faces:[],verts:[]},y=t.materials;a.set(n,o,c),h.set(l,f,p),u.fromRotationXYTranslation(h,a,d);for(var g=0;g<t.models.length;g++)for(var m=t.models[g],x=m.vertices,b=m.textureCoords,w=m.faces,E=0;E<w.length;E++){var T=w[E],S=T.vertices[0],_=T.vertices[1],O=T.vertices[2],P=x[S.vertexIndex],M=x[_.vertexIndex],A=x[O.vertexIndex],L=S.textureCoordsIndex,C=_.textureCoordsIndex,R=O.textureCoordsIndex,k=-1===L?{u:0,v:1}:b[L],F=-1===C?{u:0,v:0}:b[C],I=-1===R?{u:1,v:1}:b[R],D=16777215;""!==T.material&&y[T.material]&&(D=y[T.material]);var j=new s(P.x*r,P.y*r,P.z*r,k.u,k.v,D).transformMat4(u),B=new s(M.x*r,M.y*r,M.z*r,F.u,F.v,D).transformMat4(u),N=new s(A.x*r,A.y*r,A.z*r,I.u,I.v,D).transformMat4(u);v.verts.push(j,B,N),v.faces.push(new i(j,B,N))}return e&&(e.faces=e.faces.concat(v.faces),e.vertices=e.vertices.concat(v.verts)),v}},92515:(t,e,r)=>{var i=r(83997),n=r(39318);t.exports=function(t,e,r,o,s,a,h,u){if(void 0===o&&(o=!1),void 0===a&&(a=16777215),void 0===h&&(h=1),void 0===u&&(u=!1),t.length===e.length||o){var c,l,f,p,d,v,y,g,m,x,b,w={faces:[],vertices:[]},E=o?3:2,T=Array.isArray(a),S=Array.isArray(h);if(Array.isArray(r)&&r.length>0)for(c=0;c<r.length;c++){var _=r[c],O=2*r[c],P=r[c]*E;l=t[P],f=t[P+1],p=o?t[P+2]:0,d=e[O],v=e[O+1],u&&(v=1-v),y=T?a[_]:a,g=S?h[_]:h,m=0,x=0,b=0,s&&(m=s[P],x=s[P+1],b=o?s[P+2]:0),w.vertices.push(new n(l,f,p,d,v,y,g,m,x,b))}else{var M=0,A=0;for(c=0;c<t.length;c+=E)l=t[c],f=t[c+1],p=o?t[c+2]:0,d=e[M],v=e[M+1],y=T?a[A]:a,g=S?h[A]:h,m=0,x=0,b=0,s&&(m=s[c],x=s[c+1],b=o?s[c+2]:0),w.vertices.push(new n(l,f,p,d,v,y,g,m,x,b)),M+=2,A++}for(c=0;c<w.vertices.length;c+=3){var L=w.vertices[c],C=w.vertices[c+1],R=w.vertices[c+2];w.faces.push(new i(L,C,R))}return w}console.warn("GenerateVerts: vertices and uvs count not equal")}},85048:t=>{var e=!0,r="untitled",i="",n="";function o(t){return 0===t.models.length&&t.models.push({faces:[],name:r,textureCoords:[],vertexNormals:[],vertices:[]}),i="",t.models[t.models.length-1]}function s(t,e){var n=t.length>=2?t[1]:r;e.models.push({faces:[],name:n,textureCoords:[],vertexNormals:[],vertices:[]}),i=""}function a(t){2===t.length&&(i=t[1])}function h(t,e){var r=t.length,i=r>=2?parseFloat(t[1]):0,n=r>=3?parseFloat(t[2]):0,s=r>=4?parseFloat(t[3]):0;o(e).vertices.push({x:i,y:n,z:s})}function u(t,r){var i=t.length,n=i>=2?parseFloat(t[1]):0,s=i>=3?parseFloat(t[2]):0,a=i>=4?parseFloat(t[3]):0;isNaN(n)&&(n=0),isNaN(s)&&(s=0),isNaN(a)&&(a=0),e&&(s=1-s),o(r).textureCoords.push({u:n,v:s,w:a})}function c(t,e){var r=t.length,i=r>=2?parseFloat(t[1]):0,n=r>=3?parseFloat(t[2]):0,s=r>=4?parseFloat(t[3]):0;o(e).vertexNormals.push({x:i,y:n,z:s})}function l(t,e){var r=t.length-1;if(!(r<3)){for(var s={group:i,material:n,vertices:[]},a=0;a<r;a++){var h=t[a+1].split("/"),u=h.length;if(!(u<1||u>3)){var c=0,l=0,f=0;c=parseInt(h[0],10),u>1&&""!==h[1]&&(l=parseInt(h[1],10)),u>2&&(f=parseInt(h[2],10)),0!==c&&(c<0&&(c=o(e).vertices.length+1+c),l-=1,c-=1,f-=1,s.vertices.push({textureCoordsIndex:l,vertexIndex:c,vertexNormalIndex:f}))}}o(e).faces.push(s)}}function f(t,e){t.length>=2&&e.materialLibraries.push(t[1])}function p(t){t.length>=2&&(n=t[1])}t.exports=function(t,r){void 0===r&&(r=!0),e=r;var o,d,v={materials:{},materialLibraries:[],models:[]};i="",n="";for(var y=t.split("\n"),g=0;g<y.length;g++){var m=(o=y[g],d=void 0,d=o.indexOf("#"),d>-1?o.substring(0,d):o).replace(/\s\s+/g," ").trim().split(" ");switch(m[0].toLowerCase()){case"o":s(m,v);break;case"g":a(m);break;case"v":h(m,v);break;case"vt":u(m,v);break;case"vn":c(m,v);break;case"f":l(m,v);break;case"mtllib":f(m,v);break;case"usemtl":p(m)}}return v}},61485:(t,e,r)=>{var i=r(37589);t.exports=function(t){for(var e={},r=t.split("\n"),n="",o=0;o<r.length;o++){var s=r[o].trim();if(0!==s.indexOf("#")&&""!==s){var a=s.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"newmtl":n=a[1];break;case"kd":var h=Math.floor(255*a[1]),u=a.length>=2?Math.floor(255*a[2]):h,c=a.length>=3?Math.floor(255*a[3]):h;e[n]=i(h,u,c)}}}return e}},92570:t=>{t.exports=function(t,e,r,i){var n,o;if(void 0===r&&void 0===i){var s=t.getInCenter();n=s.x,o=s.y}var a=Math.cos(e),h=Math.sin(e),u=t.vertex1,c=t.vertex2,l=t.vertex3,f=u.x-n,p=u.y-o;u.set(f*a-p*h+n,f*h+p*a+o),f=c.x-n,p=c.y-o,c.set(f*a-p*h+n,f*h+p*a+o),f=l.x-n,p=l.y-o,l.set(f*a-p*h+n,f*h+p*a+o)}},39318:(t,e,r)=>{var i=r(83419),n=r(70554),o=r(25836),s=new i({Extends:o,initialize:function(t,e,r,i,n,s,a,h,u,c){void 0===s&&(s=16777215),void 0===a&&(a=1),void 0===h&&(h=0),void 0===u&&(u=0),void 0===c&&(c=0),o.call(this,t,e,r),this.vx=0,this.vy=0,this.vz=0,this.nx=h,this.ny=u,this.nz=c,this.u=i,this.v=n,this.color=s,this.alpha=a,this.tx=0,this.ty=0,this.ta=0,this.tu=i,this.tv=n},setUVs:function(t,e){return this.u=t,this.v=e,this.tu=t,this.tv=e,this},scrollUV:function(t,e){return this.tu+=t,this.tv+=e,this},scaleUV:function(t,e){return this.tu=this.u*t,this.tv=this.v*e,this},transformCoordinatesLocal:function(t,e,r,i){var n=this.x,o=this.y,s=this.z,a=t.val,h=n*a[0]+o*a[4]+s*a[8]+a[12],u=n*a[1]+o*a[5]+s*a[9]+a[13],c=n*a[2]+o*a[6]+s*a[10]+a[14],l=n*a[3]+o*a[7]+s*a[11]+a[15];this.vx=h/l*e,this.vy=-u/l*r,this.vz=i<=0?c/l:-c/l},resize:function(t,e,r,i,n,o){return this.x=t,this.y=e,this.vx=this.x*r,this.vy=-this.y*i,this.vz=0,n<.5?this.vx+=r*(.5-n):n>.5&&(this.vx-=r*(n-.5)),o<.5?this.vy+=i*(.5-o):o>.5&&(this.vy-=i*(o-.5)),this},update:function(t,e,r,i,n,o,s,a){var h=this.vx*t+this.vy*r+n,u=this.vx*e+this.vy*i+o;return s&&(h=Math.round(h),u=Math.round(u)),this.tx=h,this.ty=u,this.ta=this.alpha*a,this},load:function(t,e,r,i,o){return t[++r]=this.tx,t[++r]=this.ty,t[++r]=this.tu,t[++r]=this.tv,t[++r]=i,t[++r]=o,e[++r]=n.getTintAppendFloatAlpha(this.color,this.ta),r}});t.exports=s},73090:(t,e,r)=>{var i={Face:r(83997),GenerateGridVerts:r(48803),GenerateObjVerts:r(34684),GenerateVerts:r(92515),ParseObj:r(85048),ParseObjMaterial:r(61485),RotateFace:r(92570),Vertex:r(39318)};t.exports=i},96550:t=>{t.exports=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},99706:(t,e,r)=>{var i=r(2141);t.exports=function(t){return new i(t.x,t.y)}},68010:t=>{t.exports=function(t,e){return e.setTo(t.x,t.y)}},27814:t=>{t.exports=function(t,e){return t.x===e.x&&t.y===e.y}},73565:t=>{t.exports=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},87555:(t,e,r)=>{var i=r(2141);t.exports=function(t,e){if(void 0===e&&(e=new i),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var r=t.length;if(r<1)throw new Error("GetCentroid points array must not be empty");if(1===r)e.x=t[0].x,e.y=t[0].y;else{for(var n=0;n<r;n++)e.x+=t[n].x,e.y+=t[n].y;e.x/=r,e.y/=r}return e}},28793:t=>{t.exports=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},44405:t=>{t.exports=function(t){return t.x*t.x+t.y*t.y}},20873:(t,e,r)=>{var i=r(87841);t.exports=function(t,e){void 0===e&&(e=new i);for(var r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=0;a<t.length;a++){var h=t[a];h.x>r&&(r=h.x),h.x<n&&(n=h.x),h.y>o&&(o=h.y),h.y<s&&(s=h.y)}return e.x=n,e.y=s,e.width=r-n,e.height=o-s,e}},26152:(t,e,r)=>{var i=r(2141);t.exports=function(t,e,r,n){return void 0===r&&(r=0),void 0===n&&(n=new i),n.x=t.x+(e.x-t.x)*r,n.y=t.y+(e.y-t.y)*r,n}},55767:t=>{t.exports=function(t){return t.setTo(t.y,t.x)}},79432:(t,e,r)=>{var i=r(2141);t.exports=function(t,e){return void 0===e&&(e=new i),e.setTo(-t.x,-t.y)}},2141:(t,e,r)=>{var i=r(83419),n=r(23777),o=new i({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.type=n.POINT,this.x=t,this.y=e},setTo:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}});t.exports=o},72930:(t,e,r)=>{var i=r(2141),n=r(44405);t.exports=function(t,e,r){void 0===r&&(r=new i);var o=(t.x*e.x+t.y*e.y)/n(e);return 0!==o&&(r.x=o*e.x,r.y=o*e.y),r}},62880:(t,e,r)=>{var i=r(2141);t.exports=function(t,e,r){void 0===r&&(r=new i);var n=t.x*e.x+t.y*e.y;return 0!==n&&(r.x=n*e.x,r.y=n*e.y),r}},15093:(t,e,r)=>{var i=r(28793);t.exports=function(t,e){if(0!==t.x||0!==t.y){var r=i(t);t.x/=r,t.y/=r}return t.x*=e,t.y*=e,t}},43711:(t,e,r)=>{var i=r(2141);i.Ceil=r(96550),i.Clone=r(99706),i.CopyFrom=r(68010),i.Equals=r(27814),i.Floor=r(73565),i.GetCentroid=r(87555),i.GetMagnitude=r(28793),i.GetMagnitudeSq=r(44405),i.GetRectangleFromPoints=r(20873),i.Interpolate=r(26152),i.Invert=r(55767),i.Negative=r(79432),i.Project=r(72930),i.ProjectUnit=r(62880),i.SetMagnitude=r(15093),t.exports=i},12306:(t,e,r)=>{var i=r(25717);t.exports=function(t){return new i(t.points)}},63814:t=>{t.exports=function(t,e,r){for(var i=!1,n=-1,o=t.points.length-1;++n<t.points.length;o=n){var s=t.points[n].x,a=t.points[n].y,h=t.points[o].x,u=t.points[o].y;(a<=r&&r<u||u<=r&&r<a)&&e<(h-s)*(r-a)/(u-a)+s&&(i=!i)}return i}},99338:(t,e,r)=>{var i=r(63814);t.exports=function(t,e){return i(t,e.x,e.y)}},94811:t=>{"use strict";function e(t,e,i){i=i||2;var o,s,a,h,l,f,d,v=e&&e.length,y=v?e[0]*i:t.length,g=r(t,0,y,i,!0),m=[];if(!g||g.next===g.prev)return m;if(v&&(g=function(t,e,i,n){var o,s,a,h=[];for(o=0,s=e.length;o<s;o++)(a=r(t,e[o]*n,o<s-1?e[o+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),h.push(p(a));for(h.sort(u),o=0;o<h.length;o++)i=c(h[o],i);return i}(t,e,g,i)),t.length>80*i){o=a=t[0],s=h=t[1];for(var x=i;x<y;x+=i)(l=t[x])<o&&(o=l),(f=t[x+1])<s&&(s=f),l>a&&(a=l),f>h&&(h=f);d=0!==(d=Math.max(a-o,h-s))?32767/d:0}return n(g,m,i,o,s,d,0),m}function r(t,e,r,i,n){var o,s;if(n===O(t,e,r,i)>0)for(o=e;o<r;o+=i)s=T(o,t[o],t[o+1],s);else for(o=r-i;o>=e;o-=i)s=T(o,t[o],t[o+1],s);return s&&g(s,s.next)&&(S(s),s=s.next),s}function i(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!g(i,i.next)&&0!==y(i.prev,i,i.next))i=i.next;else{if(S(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function n(t,e,r,u,c,l,p){if(t){!p&&l&&function(t,e,r,i){var n=t;do{0===n.z&&(n.z=f(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,o,s,a,h,u=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,i=r,a=0,e=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;a>0||h>0&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(n=r,r=r.nextZ,a--):(n=i,i=i.nextZ,h--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,u*=2}while(s>1)}(n)}(t,u,c,l);for(var d,v,y=t;t.prev!==t.next;)if(d=t.prev,v=t.next,l?s(t,u,c,l):o(t))e.push(d.i/r|0),e.push(t.i/r|0),e.push(v.i/r|0),S(t),t=v.next,y=v.next;else if((t=v)===y){p?1===p?n(t=a(i(t),e,r),e,r,u,c,l,2):2===p&&h(t,e,r,u,c,l):n(i(t),e,r,u,c,l,1);break}}}function o(t){var e=t.prev,r=t,i=t.next;if(y(e,r,i)>=0)return!1;for(var n=e.x,o=r.x,s=i.x,a=e.y,h=r.y,u=i.y,c=n<o?n<s?n:s:o<s?o:s,l=a<h?a<u?a:u:h<u?h:u,f=n>o?n>s?n:s:o>s?o:s,p=a>h?a>u?a:u:h>u?h:u,v=i.next;v!==e;){if(v.x>=c&&v.x<=f&&v.y>=l&&v.y<=p&&d(n,a,o,h,s,u,v.x,v.y)&&y(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function s(t,e,r,i){var n=t.prev,o=t,s=t.next;if(y(n,o,s)>=0)return!1;for(var a=n.x,h=o.x,u=s.x,c=n.y,l=o.y,p=s.y,v=a<h?a<u?a:u:h<u?h:u,g=c<l?c<p?c:p:l<p?l:p,m=a>h?a>u?a:u:h>u?h:u,x=c>l?c>p?c:p:l>p?l:p,b=f(v,g,e,r,i),w=f(m,x,e,r,i),E=t.prevZ,T=t.nextZ;E&&E.z>=b&&T&&T.z<=w;){if(E.x>=v&&E.x<=m&&E.y>=g&&E.y<=x&&E!==n&&E!==s&&d(a,c,h,l,u,p,E.x,E.y)&&y(E.prev,E,E.next)>=0)return!1;if(E=E.prevZ,T.x>=v&&T.x<=m&&T.y>=g&&T.y<=x&&T!==n&&T!==s&&d(a,c,h,l,u,p,T.x,T.y)&&y(T.prev,T,T.next)>=0)return!1;T=T.nextZ}for(;E&&E.z>=b;){if(E.x>=v&&E.x<=m&&E.y>=g&&E.y<=x&&E!==n&&E!==s&&d(a,c,h,l,u,p,E.x,E.y)&&y(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;T&&T.z<=w;){if(T.x>=v&&T.x<=m&&T.y>=g&&T.y<=x&&T!==n&&T!==s&&d(a,c,h,l,u,p,T.x,T.y)&&y(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function a(t,e,r){var n=t;do{var o=n.prev,s=n.next.next;!g(o,s)&&m(o,n,n.next,s)&&w(o,s)&&w(s,o)&&(e.push(o.i/r|0),e.push(n.i/r|0),e.push(s.i/r|0),S(n),S(n.next),n=t=s),n=n.next}while(n!==t);return i(n)}function h(t,e,r,o,s,a){var h=t;do{for(var u=h.next.next;u!==h.prev;){if(h.i!==u.i&&v(h,u)){var c=E(h,u);return h=i(h,h.next),c=i(c,c.next),n(h,e,r,o,s,a,0),void n(c,e,r,o,s,a,0)}u=u.next}h=h.next}while(h!==t)}function u(t,e){return t.x-e.x}function c(t,e){var r=function(t,e){var r,i=e,n=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&a>s&&(s=a,r=i.x<i.next.x?i:i.next,a===n))return r}i=i.next}while(i!==e);if(!r)return null;var h,u=r,c=r.x,f=r.y,p=1/0;i=r;do{n>=i.x&&i.x>=c&&n!==i.x&&d(o<f?n:s,o,c,f,o<f?s:n,o,i.x,i.y)&&(h=Math.abs(o-i.y)/(n-i.x),w(i,t)&&(h<p||h===p&&(i.x>r.x||i.x===r.x&&l(r,i)))&&(r=i,p=h)),i=i.next}while(i!==u);return r}(t,e);if(!r)return e;var n=E(r,t);return i(n,n.next),i(r,r.next)}function l(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function f(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function d(t,e,r,i,n,o,s,a){return(n-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(r-s)*(e-a)&&(r-s)*(o-a)>=(n-s)*(i-a)}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&m(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(w(t,e)&&w(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||g(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function g(t,e){return t.x===e.x&&t.y===e.y}function m(t,e,r,i){var n=b(y(t,e,r)),o=b(y(t,e,i)),s=b(y(r,i,t)),a=b(y(r,i,e));return n!==o&&s!==a||!(0!==n||!x(t,r,e))||!(0!==o||!x(t,i,e))||!(0!==s||!x(r,t,i))||!(0!==a||!x(r,e,i))}function x(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function b(t){return t>0?1:t<0?-1:0}function w(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function E(t,e){var r=new _(t.i,t.x,t.y),i=new _(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function T(t,e,r,i){var n=new _(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function _(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(t,e,r,i){for(var n=0,o=e,s=r-i;o<r;o+=i)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}e.deviation=function(t,e,r,i){var n=e&&e.length,o=n?e[0]*r:t.length,s=Math.abs(O(t,0,o,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,c=a<h-1?e[a+1]*r:t.length;s-=Math.abs(O(t,u,c,r))}var l=0;for(a=0;a<i.length;a+=3){var f=i[a]*r,p=i[a+1]*r,d=i[a+2]*r;l+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[n][o][s]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r},t.exports=e},13829:(t,e,r)=>{var i=r(87841);t.exports=function(t,e){void 0===e&&(e=new i);for(var r,n=1/0,o=1/0,s=-n,a=-o,h=0;h<t.points.length;h++)r=t.points[h],n=Math.min(n,r.x),o=Math.min(o,r.y),s=Math.max(s,r.x),a=Math.max(a,r.y);return e.x=n,e.y=o,e.width=s-n,e.height=a-o,e}},26173:t=>{t.exports=function(t,e){void 0===e&&(e=[]);for(var r=0;r<t.points.length;r++)e.push(t.points[r].x),e.push(t.points[r].y);return e}},9564:(t,e,r)=>{var i=r(35001),n=r(23031),o=r(30052);t.exports=function(t,e,r,s){void 0===s&&(s=[]);var a=t.points,h=o(t);!e&&r>0&&(e=h/r);for(var u=0;u<e;u++)for(var c=h*(u/e),l=0,f=0;f<a.length;f++){var p=a[f],d=a[(f+1)%a.length],v=new n(p.x,p.y,d.x,d.y),y=i(v);if(!(c<l||c>l+y)){var g=v.getPoint((c-l)/y);s.push(g);break}l+=y}return s}},30052:(t,e,r)=>{var i=r(35001),n=r(23031);t.exports=function(t){for(var e=t.points,r=0,o=0;o<e.length;o++){var s=e[o],a=e[(o+1)%e.length],h=new n(s.x,s.y,a.x,a.y);r+=i(h)}return r}},25717:(t,e,r)=>{var i=r(83419),n=r(63814),o=r(9564),s=r(23777),a=new i({initialize:function(t){this.type=s.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function(t,e){return n(this,t,e)},setTo:function(t){if(this.area=0,this.points=[],"string"==typeof t&&(t=t.split(" ")),!Array.isArray(t))return this;for(var e,r=0;r<t.length;r++)e={x:0,y:0},"number"==typeof t[r]||"string"==typeof t[r]?(e.x=parseFloat(t[r]),e.y=parseFloat(t[r+1]),r++):Array.isArray(t[r])?(e.x=t[r][0],e.y=t[r][1]):(e.x=t[r].x,e.y=t[r].y),this.points.push(e);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var t,e,r=0,i=0;i<this.points.length-1;i++)t=this.points[i],r+=((e=this.points[i+1]).x-t.x)*(t.y+e.y);return t=this.points[0],e=this.points[this.points.length-1],r+=(t.x-e.x)*(e.y+t.y),this.area=.5*-r,this.area},getPoints:function(t,e,r){return o(this,t,e,r)}});t.exports=a},8133:t=>{t.exports=function(t){return t.points.reverse(),t}},29524:t=>{function e(t,e,r){var i=e.x,n=e.y,o=r.x-i,s=r.y-n;if(0!==o||0!==s){var a=((t.x-i)*o+(t.y-n)*s)/(o*o+s*s);a>1?(i=r.x,n=r.y):a>0&&(i+=o*a,n+=s*a)}return(o=t.x-i)*o+(s=t.y-n)*s}function r(t,i,n,o,s){for(var a,h=o,u=i+1;u<n;u++){var c=e(t[u],t[i],t[n]);c>h&&(a=u,h=c)}h>o&&(a-i>1&&r(t,i,a,o,s),s.push(t[a]),n-a>1&&r(t,a,n,o,s))}function i(t,e){var i=t.length-1,n=[t[0]];return r(t,0,i,e,n),n.push(t[i]),n}t.exports=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=!1);var n=t.points;if(n.length>2){var o=e*e;r||(n=function(t,e){for(var r,i,n,o,s,a=t[0],h=[a],u=1,c=t.length;u<c;u++)n=a,void 0,void 0,(o=(i=r=t[u]).x-n.x)*o+(s=i.y-n.y)*s>e&&(h.push(r),a=r);return a!==r&&h.push(r),h}(n,o)),t.setTo(i(n,o))}return t}},5469:t=>{var e=function(t,e){return t[0]=e[0],t[1]=e[1],t};t.exports=function(t){var r,i=[],n=t.points;for(r=0;r<n.length;r++)i.push([n[r].x,n[r].y]);var o=[];for(i.length>0&&o.push(e([0,0],i[0])),r=0;r<i.length-1;r++){var s=i[r],a=i[r+1],h=s[0],u=s[1],c=a[0],l=a[1];o.push([.85*h+.15*c,.85*u+.15*l]),o.push([.15*h+.85*c,.15*u+.85*l])}return i.length>1&&o.push(e([0,0],i[i.length-1])),t.setTo(o)}},24709:t=>{t.exports=function(t,e,r){for(var i=t.points,n=0;n<i.length;n++)i[n].x+=e,i[n].y+=r;return t}},58423:(t,e,r)=>{var i=r(25717);i.Clone=r(12306),i.Contains=r(63814),i.ContainsPoint=r(99338),i.Earcut=r(94811),i.GetAABB=r(13829),i.GetNumberArray=r(26173),i.GetPoints=r(9564),i.Perimeter=r(30052),i.Reverse=r(8133),i.Simplify=r(29524),i.Smooth=r(5469),i.Translate=r(24709),t.exports=i},62224:t=>{t.exports=function(t){return t.width*t.height}},98615:t=>{t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},31688:t=>{t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},67502:t=>{t.exports=function(t,e,r){return t.x=e-t.width/2,t.y=r-t.height/2,t}},65085:(t,e,r)=>{var i=r(87841);t.exports=function(t){return new i(t.x,t.y,t.width,t.height)}},37303:t=>{t.exports=function(t,e,r){return!(t.width<=0||t.height<=0)&&t.x<=e&&t.x+t.width>=e&&t.y<=r&&t.y+t.height>=r}},96553:(t,e,r)=>{var i=r(37303);t.exports=function(t,e){return i(t,e.x,e.y)}},70273:t=>{t.exports=function(t,e){return!(e.width*e.height>t.width*t.height)&&e.x>t.x&&e.x<t.right&&e.right>t.x&&e.right<t.right&&e.y>t.y&&e.y<t.bottom&&e.bottom>t.y&&e.bottom<t.bottom}},43459:t=>{t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},77493:t=>{t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x,y:t.y}),e.push({x:t.right,y:t.y}),e.push({x:t.right,y:t.bottom}),e.push({x:t.x,y:t.bottom}),e}},9219:t=>{t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},53751:(t,e,r)=>{var i=r(8249);t.exports=function(t,e){var r=i(t);return r<i(e)?t.setSize(e.height*r,e.height):t.setSize(e.width,e.width/r),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},16088:(t,e,r)=>{var i=r(8249);t.exports=function(t,e){var r=i(t);return r>i(e)?t.setSize(e.height*r,e.height):t.setSize(e.width,e.width/r),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},80774:t=>{t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},83859:t=>{t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},19217:(t,e,r)=>{var i=r(87841),n=r(36383);t.exports=function(t,e){if(void 0===e&&(e=new i),0===t.length)return e;for(var r,o,s,a=Number.MAX_VALUE,h=Number.MAX_VALUE,u=n.MIN_SAFE_INTEGER,c=n.MIN_SAFE_INTEGER,l=0;l<t.length;l++)r=t[l],Array.isArray(r)?(o=r[0],s=r[1]):(o=r.x,s=r.y),a=Math.min(a,o),h=Math.min(h,s),u=Math.max(u,o),c=Math.max(c,s);return e.x=a,e.y=h,e.width=u-a,e.height=c-h,e}},9477:(t,e,r)=>{var i=r(87841);t.exports=function(t,e,r,n,o){return void 0===o&&(o=new i),o.setTo(Math.min(t,r),Math.min(e,n),Math.abs(t-r),Math.abs(e-n))}},8249:t=>{t.exports=function(t){return 0===t.height?NaN:t.width/t.height}},27165:(t,e,r)=>{var i=r(2141);t.exports=function(t,e){return void 0===e&&(e=new i),e.x=t.centerX,e.y=t.centerY,e}},20812:(t,e,r)=>{var i=r(13019),n=r(2141);t.exports=function(t,e,r){if(void 0===r&&(r=new n),e<=0||e>=1)return r.x=t.x,r.y=t.y,r;var o=i(t)*e;return e>.5?(o-=t.width+t.height)<=t.width?(r.x=t.right-o,r.y=t.bottom):(r.x=t.x,r.y=t.bottom-(o-t.width)):o<=t.width?(r.x=t.x+o,r.y=t.y):(r.x=t.right,r.y=t.y+(o-t.width)),r}},34819:(t,e,r)=>{var i=r(20812),n=r(13019);t.exports=function(t,e,r,o){void 0===o&&(o=[]),!e&&r>0&&(e=n(t)/r);for(var s=0;s<e;s++){var a=s/e;o.push(i(t,a))}return o}},51313:(t,e,r)=>{var i=r(2141);t.exports=function(t,e){return void 0===e&&(e=new i),e.x=t.width,e.y=t.height,e}},86091:(t,e,r)=>{var i=r(67502);t.exports=function(t,e,r){var n=t.centerX,o=t.centerY;return t.setSize(t.width+2*e,t.height+2*r),i(t,n,o)}},53951:(t,e,r)=>{var i=r(87841),n=r(59996);t.exports=function(t,e,r){return void 0===r&&(r=new i),n(t,e)?(r.x=Math.max(t.x,e.x),r.y=Math.max(t.y,e.y),r.width=Math.min(t.right,e.right)-r.x,r.height=Math.min(t.bottom,e.bottom)-r.y):r.setEmpty(),r}},14649:(t,e,r)=>{var i=r(13019),n=r(2141);t.exports=function(t,e,r,o){if(void 0===o&&(o=[]),!e&&!r)return o;e?r=Math.round(i(t)/e):e=i(t)/r;for(var s=t.x,a=t.y,h=0,u=0;u<r;u++)switch(o.push(new n(s,a)),h){case 0:(s+=e)>=t.right&&(h=1,a+=s-t.right,s=t.right);break;case 1:(a+=e)>=t.bottom&&(h=2,s-=a-t.bottom,a=t.bottom);break;case 2:(s-=e)<=t.left&&(h=3,a-=t.left-s,s=t.left);break;case 3:(a-=e)<=t.top&&(h=0,a=t.top)}return o}},33595:t=>{t.exports=function(t,e){for(var r=t.x,i=t.right,n=t.y,o=t.bottom,s=0;s<e.length;s++)r=Math.min(r,e[s].x),i=Math.max(i,e[s].x),n=Math.min(n,e[s].y),o=Math.max(o,e[s].y);return t.x=r,t.y=n,t.width=i-r,t.height=o-n,t}},20074:t=>{t.exports=function(t,e){var r=Math.min(t.x,e.x),i=Math.max(t.right,e.right);t.x=r,t.width=i-r;var n=Math.min(t.y,e.y),o=Math.max(t.bottom,e.bottom);return t.y=n,t.height=o-n,t}},92171:t=>{t.exports=function(t,e,r){var i=Math.min(t.x,e),n=Math.max(t.right,e);t.x=i,t.width=n-i;var o=Math.min(t.y,r),s=Math.max(t.bottom,r);return t.y=o,t.height=s-o,t}},42981:t=>{t.exports=function(t,e,r){return t.x+=e,t.y+=r,t}},46907:t=>{t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},60170:t=>{t.exports=function(t,e){return t.x<e.right&&t.right>e.x&&t.y<e.bottom&&t.bottom>e.y}},13019:t=>{t.exports=function(t){return 2*(t.width+t.height)}},85133:(t,e,r)=>{var i=r(2141),n=r(39506);t.exports=function(t,e,r){void 0===r&&(r=new i),e=n(e);var o=Math.sin(e),s=Math.cos(e),a=s>0?t.width/2:t.width/-2,h=o>0?t.height/2:t.height/-2;return Math.abs(a*o)<Math.abs(h*s)?h=a*o/s:a=h*s/o,r.x=a+t.centerX,r.y=h+t.centerY,r}},26597:(t,e,r)=>{var i=r(2141);t.exports=function(t,e){return void 0===e&&(e=new i),e.x=t.x+Math.random()*t.width,e.y=t.y+Math.random()*t.height,e}},86470:(t,e,r)=>{var i=r(30976),n=r(70273),o=r(2141);t.exports=function(t,e,r){if(void 0===r&&(r=new o),n(t,e))switch(i(0,3)){case 0:r.x=t.x+Math.random()*(e.right-t.x),r.y=t.y+Math.random()*(e.top-t.y);break;case 1:r.x=e.x+Math.random()*(t.right-e.x),r.y=e.bottom+Math.random()*(t.bottom-e.bottom);break;case 2:r.x=t.x+Math.random()*(e.x-t.x),r.y=e.y+Math.random()*(t.bottom-e.y);break;case 3:r.x=e.right+Math.random()*(t.right-e.right),r.y=t.y+Math.random()*(e.bottom-t.y)}return r}},87841:(t,e,r)=>{var i=r(83419),n=r(37303),o=r(20812),s=r(34819),a=r(23777),h=r(23031),u=r(26597),c=new i({initialize:function(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.type=a.RECTANGLE,this.x=t,this.y=e,this.width=r,this.height=i},contains:function(t,e){return n(this,t,e)},getPoint:function(t,e){return o(this,t,e)},getPoints:function(t,e,r){return s(this,t,e,r)},getRandomPoint:function(t){return u(this,t)},setTo:function(t,e,r,i){return this.x=t,this.y=e,this.width=r,this.height=i,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=c},94845:t=>{t.exports=function(t,e){return t.width===e.width&&t.height===e.height}},31730:t=>{t.exports=function(t,e,r){return void 0===r&&(r=e),t.width*=e,t.height*=r,t}},36899:(t,e,r)=>{var i=r(87841);t.exports=function(t,e,r){void 0===r&&(r=new i);var n=Math.min(t.x,e.x),o=Math.min(t.y,e.y),s=Math.max(t.right,e.right)-n,a=Math.max(t.bottom,e.bottom)-o;return r.setTo(n,o,s,a)}},93232:(t,e,r)=>{var i=r(87841);i.Area=r(62224),i.Ceil=r(98615),i.CeilAll=r(31688),i.CenterOn=r(67502),i.Clone=r(65085),i.Contains=r(37303),i.ContainsPoint=r(96553),i.ContainsRect=r(70273),i.CopyFrom=r(43459),i.Decompose=r(77493),i.Equals=r(9219),i.FitInside=r(53751),i.FitOutside=r(16088),i.Floor=r(80774),i.FloorAll=r(83859),i.FromPoints=r(19217),i.FromXY=r(9477),i.GetAspectRatio=r(8249),i.GetCenter=r(27165),i.GetPoint=r(20812),i.GetPoints=r(34819),i.GetSize=r(51313),i.Inflate=r(86091),i.Intersection=r(53951),i.MarchingAnts=r(14649),i.MergePoints=r(33595),i.MergeRect=r(20074),i.MergeXY=r(92171),i.Offset=r(42981),i.OffsetPoint=r(46907),i.Overlaps=r(60170),i.Perimeter=r(13019),i.PerimeterPoint=r(85133),i.Random=r(26597),i.RandomOutside=r(86470),i.SameDimensions=r(94845),i.Scale=r(31730),i.Union=r(36899),t.exports=i},41658:t=>{t.exports=function(t){var e=t.x1,r=t.y1,i=t.x2,n=t.y2,o=t.x3,s=t.y3;return Math.abs(((o-e)*(n-r)-(i-e)*(s-r))/2)}},39208:(t,e,r)=>{var i=r(16483);t.exports=function(t,e,r){var n=r*(Math.sqrt(3)/2);return new i(t,e,t+r/2,e+n,t-r/2,e+n)}},39545:(t,e,r)=>{var i=r(94811),n=r(16483);t.exports=function(t,e,r,o,s){void 0===e&&(e=null),void 0===r&&(r=1),void 0===o&&(o=1),void 0===s&&(s=[]);for(var a,h,u,c,l,f,p,d,v,y=i(t,e),g=0;g<y.length;g+=3)a=y[g],h=y[g+1],u=y[g+2],c=t[2*a]*r,l=t[2*a+1]*o,f=t[2*h]*r,p=t[2*h+1]*o,d=t[2*u]*r,v=t[2*u+1]*o,s.push(new n(c,l,f,p,d,v));return s}},90301:(t,e,r)=>{var i=r(16483);t.exports=function(t,e,r,n){return void 0===n&&(n=r),new i(t,e,t,e-n,t+r,e)}},23707:(t,e,r)=>{var i=r(97523),n=r(13584);t.exports=function(t,e,r,o){void 0===o&&(o=i);var s=o(t),a=e-s.x,h=r-s.y;return n(t,a,h)}},97523:(t,e,r)=>{var i=r(2141);t.exports=function(t,e){return void 0===e&&(e=new i),e.x=(t.x1+t.x2+t.x3)/3,e.y=(t.y1+t.y2+t.y3)/3,e}},24951:(t,e,r)=>{var i=r(26099);function n(t,e,r,i){return t*i-e*r}t.exports=function(t,e){void 0===e&&(e=new i);var r=t.x3,o=t.y3,s=t.x1-r,a=t.y1-o,h=t.x2-r,u=t.y2-o,c=2*n(s,a,h,u),l=n(a,s*s+a*a,u,h*h+u*u),f=n(s,s*s+a*a,h,h*h+u*u);return e.x=r-l/c,e.y=o+f/c,e}},85614:(t,e,r)=>{var i=r(96503);t.exports=function(t,e){void 0===e&&(e=new i);var r,n,o=t.x1,s=t.y1,a=t.x2,h=t.y2,u=t.x3,c=t.y3,l=a-o,f=h-s,p=u-o,d=c-s,v=l*(o+a)+f*(s+h),y=p*(o+u)+d*(s+c),g=2*(l*(c-h)-f*(u-a));if(Math.abs(g)<1e-6){var m=Math.min(o,a,u),x=Math.min(s,h,c);r=.5*(Math.max(o,a,u)-m),n=.5*(Math.max(s,h,c)-x),e.x=m+r,e.y=x+n,e.radius=Math.sqrt(r*r+n*n)}else e.x=(d*v-f*y)/g,e.y=(l*y-p*v)/g,r=e.x-o,n=e.y-s,e.radius=Math.sqrt(r*r+n*n);return e}},74422:(t,e,r)=>{var i=r(16483);t.exports=function(t){return new i(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},10690:t=>{t.exports=function(t,e,r){var i=t.x3-t.x1,n=t.y3-t.y1,o=t.x2-t.x1,s=t.y2-t.y1,a=e-t.x1,h=r-t.y1,u=i*i+n*n,c=i*o+n*s,l=i*a+n*h,f=o*o+s*s,p=o*a+s*h,d=u*f-c*c,v=0===d?0:1/d,y=(f*l-c*p)*v,g=(u*p-c*l)*v;return y>=0&&g>=0&&y+g<1}},48653:t=>{t.exports=function(t,e,r,i){void 0===r&&(r=!1),void 0===i&&(i=[]);for(var n,o,s,a,h,u,c=t.x3-t.x1,l=t.y3-t.y1,f=t.x2-t.x1,p=t.y2-t.y1,d=c*c+l*l,v=c*f+l*p,y=f*f+p*p,g=d*y-v*v,m=0===g?0:1/g,x=t.x1,b=t.y1,w=0;w<e.length&&(o=(d*(u=f*(s=e[w].x-x)+p*(a=e[w].y-b))-v*(h=c*s+l*a))*m,!((n=(y*h-v*u)*m)>=0&&o>=0&&n+o<1&&(i.push({x:e[w].x,y:e[w].y}),r)));w++);return i}},96006:(t,e,r)=>{var i=r(10690);t.exports=function(t,e){return i(t,e.x,e.y)}},71326:t=>{t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},71694:t=>{t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x1,y:t.y1}),e.push({x:t.x2,y:t.y2}),e.push({x:t.x3,y:t.y3}),e}},33522:t=>{t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2&&t.x3===e.x3&&t.y3===e.y3}},20437:(t,e,r)=>{var i=r(2141),n=r(35001);t.exports=function(t,e,r){void 0===r&&(r=new i);var o=t.getLineA(),s=t.getLineB(),a=t.getLineC();if(e<=0||e>=1)return r.x=o.x1,r.y=o.y1,r;var h=n(o),u=n(s),c=n(a),l=(h+u+c)*e,f=0;return l<h?(f=l/h,r.x=o.x1+(o.x2-o.x1)*f,r.y=o.y1+(o.y2-o.y1)*f):l>h+u?(f=(l-=h+u)/c,r.x=a.x1+(a.x2-a.x1)*f,r.y=a.y1+(a.y2-a.y1)*f):(f=(l-=h)/u,r.x=s.x1+(s.x2-s.x1)*f,r.y=s.y1+(s.y2-s.y1)*f),r}},80672:(t,e,r)=>{var i=r(35001),n=r(2141);t.exports=function(t,e,r,o){void 0===o&&(o=[]);var s=t.getLineA(),a=t.getLineB(),h=t.getLineC(),u=i(s),c=i(a),l=i(h),f=u+c+l;!e&&r>0&&(e=f/r);for(var p=0;p<e;p++){var d=f*(p/e),v=0,y=new n;d<u?(v=d/u,y.x=s.x1+(s.x2-s.x1)*v,y.y=s.y1+(s.y2-s.y1)*v):d>u+c?(v=(d-=u+c)/l,y.x=h.x1+(h.x2-h.x1)*v,y.y=h.y1+(h.y2-h.y1)*v):(v=(d-=u)/c,y.x=a.x1+(a.x2-a.x1)*v,y.y=a.y1+(a.y2-a.y1)*v),o.push(y)}return o}},39757:(t,e,r)=>{var i=r(2141);function n(t,e,r,i){var n=t-r,o=e-i,s=n*n+o*o;return Math.sqrt(s)}t.exports=function(t,e){void 0===e&&(e=new i);var r=t.x1,o=t.y1,s=t.x2,a=t.y2,h=t.x3,u=t.y3,c=n(h,u,s,a),l=n(r,o,h,u),f=n(s,a,r,o),p=c+l+f;return e.x=(r*c+s*l+h*f)/p,e.y=(o*c+a*l+u*f)/p,e}},13584:t=>{t.exports=function(t,e,r){return t.x1+=e,t.y1+=r,t.x2+=e,t.y2+=r,t.x3+=e,t.y3+=r,t}},1376:(t,e,r)=>{var i=r(35001);t.exports=function(t){var e=t.getLineA(),r=t.getLineB(),n=t.getLineC();return i(e)+i(r)+i(n)}},90260:(t,e,r)=>{var i=r(2141);t.exports=function(t,e){void 0===e&&(e=new i);var r=t.x2-t.x1,n=t.y2-t.y1,o=t.x3-t.x1,s=t.y3-t.y1,a=Math.random(),h=Math.random();return a+h>=1&&(a=1-a,h=1-h),e.x=t.x1+(r*a+o*h),e.y=t.y1+(n*a+s*h),e}},52172:(t,e,r)=>{var i=r(99614),n=r(39757);t.exports=function(t,e){var r=n(t);return i(t,r.x,r.y,e)}},49907:(t,e,r)=>{var i=r(99614);t.exports=function(t,e,r){return i(t,e.x,e.y,r)}},99614:t=>{t.exports=function(t,e,r,i){var n=Math.cos(i),o=Math.sin(i),s=t.x1-e,a=t.y1-r;return t.x1=s*n-a*o+e,t.y1=s*o+a*n+r,s=t.x2-e,a=t.y2-r,t.x2=s*n-a*o+e,t.y2=s*o+a*n+r,s=t.x3-e,a=t.y3-r,t.x3=s*n-a*o+e,t.y3=s*o+a*n+r,t}},16483:(t,e,r)=>{var i=r(83419),n=r(10690),o=r(20437),s=r(80672),a=r(23777),h=r(23031),u=r(90260),c=new i({initialize:function(t,e,r,i,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.type=a.TRIANGLE,this.x1=t,this.y1=e,this.x2=r,this.y2=i,this.x3=n,this.y3=o},contains:function(t,e){return n(this,t,e)},getPoint:function(t,e){return o(this,t,e)},getPoints:function(t,e,r){return s(this,t,e,r)},getRandomPoint:function(t){return u(this,t)},setTo:function(t,e,r,i,n,o){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.x1=t,this.y1=e,this.x2=r,this.y2=i,this.x3=n,this.y3=o,this},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(t){var e;e=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t,this.x1-=e,this.x2-=e,this.x3-=e}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(t){var e;e=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t,this.x1-=e,this.x2-=e,this.x3-=e}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(t){var e;e=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t,this.y1-=e,this.y2-=e,this.y3-=e}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(t){var e;e=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t,this.y1-=e,this.y2-=e,this.y3-=e}}});t.exports=c},84435:(t,e,r)=>{var i=r(16483);i.Area=r(41658),i.BuildEquilateral=r(39208),i.BuildFromPolygon=r(39545),i.BuildRight=r(90301),i.CenterOn=r(23707),i.Centroid=r(97523),i.CircumCenter=r(24951),i.CircumCircle=r(85614),i.Clone=r(74422),i.Contains=r(10690),i.ContainsArray=r(48653),i.ContainsPoint=r(96006),i.CopyFrom=r(71326),i.Decompose=r(71694),i.Equals=r(33522),i.GetPoint=r(20437),i.GetPoints=r(80672),i.InCenter=r(39757),i.Perimeter=r(1376),i.Offset=r(13584),i.Random=r(90260),i.Rotate=r(52172),i.RotateAroundPoint=r(49907),i.RotateAroundXY=r(99614),t.exports=i},74457:t=>{t.exports=function(t,e,r){return{gameObject:t,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:e,hitAreaCallback:r,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},84409:t=>{t.exports=function(t,e){return function(r,i,n,o){var s=t.getPixelAlpha(i,n,o.texture.key,o.frame.name);return s&&s>=e}}},7003:(t,e,r)=>{var i=r(83419),n=r(93301),o=r(50792),s=r(8214),a=r(8443),h=r(78970),u=r(85098),c=r(42515),l=r(36210),f=r(61340),p=r(85955),d=new i({initialize:function(t,e){this.game=t,this.scaleManager,this.canvas,this.config=e,this.enabled=!0,this.events=new o,this.isOver=!0,this.defaultCursor="",this.keyboard=e.inputKeyboard?new h(this):null,this.mouse=e.inputMouse?new u(this):null,this.touch=e.inputTouch?new l(this):null,this.pointers=[],this.pointersTotal=e.inputActivePointers,e.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var r=0;r<=this.pointersTotal;r++){var i=new c(this,r);i.smoothFactor=e.inputSmoothFactor,this.pointers.push(i)}this.mousePointer=e.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new f,this._tempMatrix2=new f,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(a.BOOT,this.boot,this)},boot:function(){var t=this.game,e=t.events;this.canvas=t.canvas,this.scaleManager=t.scale,this.events.emit(s.MANAGER_BOOT),e.on(a.PRE_RENDER,this.preRender,this),e.once(a.DESTROY,this.destroy,this)},setCanvasOver:function(t){this.isOver=!0,this.events.emit(s.GAME_OVER,t)},setCanvasOut:function(t){this.isOver=!1,this.events.emit(s.GAME_OUT,t)},preRender:function(){var t=this.game.loop.now,e=this.game.loop.delta,r=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(s.MANAGER_UPDATE);for(var i=0;i<r.length;i++){var n=r[i];if(n.sys.input&&n.sys.input.updatePoll(t,e)&&this.globalTopOnly)return}},setDefaultCursor:function(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function(t){t.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(t){void 0===t&&(t=1);var e=[];this.pointersTotal+t>10&&(t=10-this.pointersTotal);for(var r=0;r<t;r++){var i=this.pointers.length,n=new c(this,i);n.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(n),this.pointersTotal++,e.push(n)}return e},updateInputPlugins:function(t,e){var r=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var i=0;i<r.length;i++){var n=r[i];if(n.sys.input&&(n.sys.input.update(t,e)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(t){for(var e=this.pointers,r=[],i=0;i<t.changedTouches.length;i++)for(var o=t.changedTouches[i],s=1;s<this.pointersTotal;s++){var a=e[s];if(!a.active){a.touchstart(o,t),this.activePointer=a,r.push(a);break}}this.updateInputPlugins(n.TOUCH_START,r)},onTouchMove:function(t){for(var e=this.pointers,r=[],i=0;i<t.changedTouches.length;i++)for(var o=t.changedTouches[i],s=1;s<this.pointersTotal;s++){var a=e[s];if(a.active&&a.identifier===o.identifier){var h=document.elementFromPoint(o.clientX,o.clientY)===this.canvas;!this.isOver&&h?this.setCanvasOver(t):this.isOver&&!h&&this.setCanvasOut(t),this.isOver&&(a.touchmove(o,t),this.activePointer=a,r.push(a));break}}this.updateInputPlugins(n.TOUCH_MOVE,r)},onTouchEnd:function(t){for(var e=this.pointers,r=[],i=0;i<t.changedTouches.length;i++)for(var o=t.changedTouches[i],s=1;s<this.pointersTotal;s++){var a=e[s];if(a.active&&a.identifier===o.identifier){a.touchend(o,t),r.push(a);break}}this.updateInputPlugins(n.TOUCH_END,r)},onTouchCancel:function(t){for(var e=this.pointers,r=[],i=0;i<t.changedTouches.length;i++)for(var o=t.changedTouches[i],s=1;s<this.pointersTotal;s++){var a=e[s];if(a.active&&a.identifier===o.identifier){a.touchcancel(o,t),r.push(a);break}}this.updateInputPlugins(n.TOUCH_CANCEL,r)},onMouseDown:function(t){var e=this.mousePointer;e.down(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(n.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(t){var e=this.mousePointer;e.move(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(n.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(t){var e=this.mousePointer;e.up(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(n.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(t){var e=this.mousePointer;e.wheel(t),this.activePointer=e,this.updateInputPlugins(n.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(t){var e=this.mouse.locked;this.mousePointer.locked=e,this.events.emit(s.POINTERLOCK_CHANGE,t,e)},inputCandidate:function(t,e){var r=t.input;if(!r||!r.enabled||!t.willRender(e))return!1;var i=!0,n=t.parentContainer;if(n)do{if(!n.willRender(e)){i=!1;break}n=n.parentContainer}while(n);return i},hitTest:function(t,e,r,i){void 0===i&&(i=this._tempHitTest);var n=this._tempPoint,o=r.scrollX,s=r.scrollY;i.length=0;var a=t.x,h=t.y;r.getWorldPoint(a,h,n),t.worldX=n.x,t.worldY=n.y;for(var u={x:0,y:0},c=this._tempMatrix,l=this._tempMatrix2,f=0;f<e.length;f++){var d=e[f];if(this.inputCandidate(d,r)){var v=n.x+o*d.scrollFactorX-o,y=n.y+s*d.scrollFactorY-s;d.parentContainer?(d.getWorldTransformMatrix(c,l),c.applyInverse(v,y,u)):p(v,y,d.x,d.y,d.rotation,d.scaleX,d.scaleY,u),this.pointWithinHitArea(d,u.x,u.y)&&i.push(d)}}return i},pointWithinHitArea:function(t,e,r){e+=t.displayOriginX,r+=t.displayOriginY;var i=t.input;return!(!i||!i.hitAreaCallback(i.hitArea,e,r,t)||(i.localX=e,i.localY=r,0))},pointWithinInteractiveObject:function(t,e,r){return!!t.hitArea&&(e+=t.gameObject.displayOriginX,r+=t.gameObject.displayOriginY,t.localX=e,t.localY=r,t.hitAreaCallback(t.hitArea,e,r,t))},transformPointer:function(t,e,r,i){var n=t.position,o=t.prevPosition;o.x=n.x,o.y=n.y;var s=this.scaleManager.transformX(e),a=this.scaleManager.transformY(r),h=t.smoothFactor;i&&0!==h?(n.x=s*h+o.x*(1-h),n.y=a*h+o.y*(1-h)):(n.x=s,n.y=a)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(a.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=d},48205:(t,e,r)=>{var i=r(96503),n=r(87902),o=r(83419),s=r(93301),a=r(74457),h=r(84409),u=r(20339),c=r(8497),l=r(81154),f=r(8214),p=r(50792),d=r(95540),v=r(23777),y=r(89639),g=r(41212),m=r(37277),x=r(87841),b=r(37303),w=r(44594),E=r(16483),T=r(10690),S=new o({Extends:p,initialize:function(t){p.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new p,this.enabled=!0,this.displayList,this.cameras,y.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var e={cancelled:!1};this._eventContainer={stopPropagation:function(){e.cancelled=!0}},this._eventData=e,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(w.BOOT,this.boot,this),t.sys.events.on(w.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(w.DESTROY,this.destroy,this),this.pluginEvents.emit(f.BOOT)},start:function(){var t=this.systems.events;t.on(w.TRANSITION_START,this.transitionIn,this),t.on(w.TRANSITION_OUT,this.transitionOut,this),t.on(w.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(w.PRE_UPDATE,this.preUpdate,this),t.once(w.SHUTDOWN,this.shutdown,this),this.manager.events.on(f.GAME_OUT,this.onGameOut,this),this.manager.events.on(f.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(f.START)},onGameOver:function(t){this.isActive()&&this.emit(f.GAME_OVER,t.timeStamp,t)},onGameOut:function(t){this.isActive()&&this.emit(f.GAME_OUT,t.timeStamp,t)},preUpdate:function(){this.pluginEvents.emit(f.PRE_UPDATE);var t=this._pendingRemoval,e=this._pendingInsertion,r=t.length,i=e.length;if(0!==r||0!==i){for(var n=this._list,o=0;o<r;o++){var s=t[o],a=n.indexOf(s);a>-1&&(n.splice(a,1),this.clear(s,!0))}this._pendingRemoval.length=0,this._list=n.concat(e.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(t,e){if(!this.isActive())return!1;if(this.pluginEvents.emit(f.UPDATE,t,e),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var r,i=this.manager,n=i.pointers,o=i.pointersTotal;for(r=0;r<o;r++)n[r].updateMotion();if(0===this._list.length)return!1;var s=this.pollRate;if(-1===s)return!1;if(s>0){if(this._pollTimer-=e,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var a=!1;for(r=0;r<o;r++){var h=0,u=n[r];this._tempZones=[],this._temp=this.hitTestPointer(u),this.sortGameObjects(this._temp,u),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),h+=this.processOverOutEvents(u),2===this.getDragState(u)&&this.processDragThresholdEvent(u,t),h>0&&(a=!0)}return a},update:function(t,e){if(!this.isActive())return!1;for(var r=e.length,i=!1,n=0;n<r;n++){var o=0,a=e[n];switch(this._tempZones=[],this._temp=this.hitTestPointer(a),this.sortGameObjects(this._temp,a),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),t){case s.MOUSE_DOWN:o+=this.processDragDownEvent(a),o+=this.processDownEvents(a),o+=this.processOverOutEvents(a);break;case s.MOUSE_UP:o+=this.processDragUpEvent(a),o+=this.processUpEvents(a),o+=this.processOverOutEvents(a);break;case s.TOUCH_START:o+=this.processDragDownEvent(a),o+=this.processDownEvents(a),o+=this.processOverEvents(a);break;case s.TOUCH_END:case s.TOUCH_CANCEL:o+=this.processDragUpEvent(a),o+=this.processUpEvents(a),o+=this.processOutEvents(a);break;case s.MOUSE_MOVE:case s.TOUCH_MOVE:o+=this.processDragMoveEvent(a),o+=this.processMoveEvents(a),o+=this.processOverOutEvents(a);break;case s.MOUSE_WHEEL:o+=this.processWheelEvent(a)}o>0&&(i=!0)}return this._updatedThisFrame=!0,i},clear:function(t,e){void 0===e&&(e=!1),this.disable(t);var r=t.input;r&&(this.removeDebug(t),this.manager.resetCursor(r),r.gameObject=void 0,r.target=void 0,r.hitArea=void 0,r.hitAreaCallback=void 0,r.callbackContext=void 0,t.input=null),e||this.queueForRemoval(t);var i=this._draggable.indexOf(t);return i>-1&&this._draggable.splice(i,1),t},disable:function(t){var e=t.input;e&&(e.enabled=!1,e.dragState=0);for(var r,i=this._drag,n=this._over,o=this.manager,s=0;s<o.pointersTotal;s++)(r=i[s].indexOf(t))>-1&&i[s].splice(r,1),(r=n[s].indexOf(t))>-1&&n[s].splice(r,1);return this},enable:function(t,e,r,i){return void 0===i&&(i=!1),t.input?t.input.enabled=!0:this.setHitArea(t,e,r),t.input&&i&&!t.input.dropZone&&(t.input.dropZone=i),this},hitTestPointer:function(t){for(var e=this.cameras.getCamerasBelowPointer(t),r=0;r<e.length;r++){for(var i=e[r],n=this.manager.hitTest(t,this._list,i),o=0;o<n.length;o++){var s=n[o];s.input.dropZone&&this._tempZones.push(s)}if(n.length>0)return t.camera=i,n}return t.camera=e[0],[]},processDownEvents:function(t){var e=0,r=this._temp,i=this._eventData,n=this._eventContainer;i.cancelled=!1;for(var o=!1,s=0;s<r.length;s++){var a=r[s];if(a.input&&a.input.enabled){if(e++,a.emit(f.GAMEOBJECT_POINTER_DOWN,t,a.input.localX,a.input.localY,n),i.cancelled||!a.input||!a.input.enabled){o=!0;break}if(this.emit(f.GAMEOBJECT_DOWN,t,a,n),i.cancelled||!a.input){o=!0;break}}}return!o&&this.manager&&(t.downElement===this.manager.game.canvas?this.emit(f.POINTER_DOWN,t,r):this.emit(f.POINTER_DOWN_OUTSIDE,t)),e},getDragState:function(t){return this._dragState[t.id]},setDragState:function(t,e){this._dragState[t.id]=e},processDragThresholdEvent:function(t,e){var r=!1,i=this.dragTimeThreshold,n=this.dragDistanceThreshold;if((n>0&&u(t.x,t.y,t.downX,t.downY)>=n||i>0&&e>=t.downTime+i)&&(r=!0),r)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function(t){if(3!==this.getDragState(t))return 0;for(var e=this._drag[t.id],r=0;r<e.length;r++){var i=e[r],n=i.input;n.dragState=2,n.dragStartX=i.x,n.dragStartY=i.y,n.dragStartXGlobal=t.worldX,n.dragStartYGlobal=t.worldY,n.dragX=n.dragStartXGlobal-n.dragStartX,n.dragY=n.dragStartYGlobal-n.dragStartY,i.emit(f.GAMEOBJECT_DRAG_START,t,n.dragX,n.dragY),this.emit(f.DRAG_START,t,i)}return this.setDragState(t,4),e.length},processDragDownEvent:function(t){var e=this._temp;if(0===this._draggable.length||0===e.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var r=[],i=0;i<e.length;i++){var n=e[i];n.input.draggable&&0===n.input.dragState&&r.push(n)}return 0===r.length?(this.setDragState(t,0),0):(r.length>1&&(this.sortGameObjects(r,t),this.topOnly&&r.splice(1)),this._drag[t.id]=r,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function(t){if(2===this.getDragState(t)&&this.processDragThresholdEvent(t,this.manager.game.loop.now),4!==this.getDragState(t))return 0;for(var e=this._tempZones,r=this._drag[t.id],i=0;i<r.length;i++){var n,o,s=r[i],a=s.input,h=a.target;if(h){var u=e.indexOf(h);0===u?(s.emit(f.GAMEOBJECT_DRAG_OVER,t,h),this.emit(f.DRAG_OVER,t,s,h)):u>0?(s.emit(f.GAMEOBJECT_DRAG_LEAVE,t,h),this.emit(f.DRAG_LEAVE,t,s,h),a.target=e[0],h=a.target,s.emit(f.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(f.DRAG_ENTER,t,s,h)):(s.emit(f.GAMEOBJECT_DRAG_LEAVE,t,h),this.emit(f.DRAG_LEAVE,t,s,h),e[0]?(a.target=e[0],h=a.target,s.emit(f.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(f.DRAG_ENTER,t,s,h)):a.target=null)}else!h&&e[0]&&(a.target=e[0],h=a.target,s.emit(f.GAMEOBJECT_DRAG_ENTER,t,h),this.emit(f.DRAG_ENTER,t,s,h));if(s.parentContainer){var c=t.worldX-a.dragStartXGlobal,l=t.worldY-a.dragStartYGlobal,p=s.getParentRotation(),d=c*Math.cos(p)+l*Math.sin(p),v=l*Math.cos(p)-c*Math.sin(p);d*=1/s.parentContainer.scaleX,v*=1/s.parentContainer.scaleY,n=d+a.dragStartX,o=v+a.dragStartY}else n=t.worldX-a.dragX,o=t.worldY-a.dragY;s.emit(f.GAMEOBJECT_DRAG,t,n,o),this.emit(f.DRAG,t,s,n,o)}return r.length},processDragUpEvent:function(t){for(var e=this._drag[t.id],r=0;r<e.length;r++){var i=e[r],n=i.input;if(n&&2===n.dragState){n.dragState=0,n.dragX=n.localX-i.displayOriginX,n.dragY=n.localY-i.displayOriginY;var o=!1,s=n.target;s&&(i.emit(f.GAMEOBJECT_DROP,t,s),this.emit(f.DROP,t,i,s),n.target=null,o=!0),i.input&&i.input.enabled&&(i.emit(f.GAMEOBJECT_DRAG_END,t,n.dragX,n.dragY,o),this.emit(f.DRAG_END,t,i,o))}}return this.setDragState(t,0),e.splice(0),0},processMoveEvents:function(t){var e=0,r=this._temp,i=this._eventData,n=this._eventContainer;i.cancelled=!1;for(var o=!1,s=0;s<r.length;s++){var a=r[s];if(a.input&&a.input.enabled){if(e++,a.emit(f.GAMEOBJECT_POINTER_MOVE,t,a.input.localX,a.input.localY,n),i.cancelled||!a.input||!a.input.enabled){o=!0;break}if(this.emit(f.GAMEOBJECT_MOVE,t,a,n),i.cancelled||!a.input||!a.input.enabled){o=!0;break}if(this.topOnly)break}}return o||this.emit(f.POINTER_MOVE,t,r),e},processWheelEvent:function(t){var e=0,r=this._temp,i=this._eventData,n=this._eventContainer;i.cancelled=!1;for(var o=!1,s=t.deltaX,a=t.deltaY,h=t.deltaZ,u=0;u<r.length;u++){var c=r[u];if(c.input&&c.input.enabled){if(e++,c.emit(f.GAMEOBJECT_POINTER_WHEEL,t,s,a,h,n),i.cancelled||!c.input||!c.input.enabled){o=!0;break}if(this.emit(f.GAMEOBJECT_WHEEL,t,c,s,a,h,n),i.cancelled||!c.input||!c.input.enabled){o=!0;break}}}return o||this.emit(f.POINTER_WHEEL,t,r,s,a,h),e},processOverEvents:function(t){var e=this._temp,r=0,i=e.length,n=[];if(i>0){var o=this.manager,s=this._eventData,a=this._eventContainer;s.cancelled=!1;for(var h=!1,u=0;u<i;u++){var c=e[u];if(c.input&&c.input.enabled){if(n.push(c),o.setCursor(c.input),c.emit(f.GAMEOBJECT_POINTER_OVER,t,c.input.localX,c.input.localY,a),r++,s.cancelled||!c.input||!c.input.enabled){h=!0;break}if(this.emit(f.GAMEOBJECT_OVER,t,c,a),s.cancelled||!c.input||!c.input.enabled){h=!0;break}}}h||this.emit(f.POINTER_OVER,t,n)}return this._over[t.id]=n,r},processOutEvents:function(t){var e=this._over[t.id],r=0,i=e.length;if(i>0){var n=this.manager,o=this._eventData,s=this._eventContainer;o.cancelled=!1;var a=!1;this.sortGameObjects(e,t);for(var h=0;h<i;h++){var u=e[h];if((u=e[h]).input&&u.input.enabled){if(n.resetCursor(u.input),u.emit(f.GAMEOBJECT_POINTER_OUT,t,s),r++,o.cancelled||!u.input||!u.input.enabled){a=!0;break}if(this.emit(f.GAMEOBJECT_OUT,t,u,s),o.cancelled||!u.input||!u.input.enabled){a=!0;break}a||this.emit(f.POINTER_OUT,t,e)}}this._over[t.id]=[]}return r},processOverOutEvents:function(t){var e,r,i=this._temp,n=[],o=[],s=[],a=this._over[t.id],h=this._drag[t.id],u=this.manager;for(e=0;e<a.length;e++)r=a[e],-1===i.indexOf(r)&&-1===h.indexOf(r)?n.push(r):s.push(r);for(e=0;e<i.length;e++)r=i[e],-1===a.indexOf(r)&&o.push(r);var c=n.length,l=0,p=this._eventData,d=this._eventContainer;p.cancelled=!1;var v=!1;if(c>0){for(this.sortGameObjects(n,t),e=0;e<c;e++)if((r=n[e]).input&&r.input.enabled){if(u.resetCursor(r.input),r.emit(f.GAMEOBJECT_POINTER_OUT,t,d),l++,p.cancelled||!r.input||!r.input.enabled){v=!0;break}if(this.emit(f.GAMEOBJECT_OUT,t,r,d),p.cancelled||!r.input||!r.input.enabled){v=!0;break}}v||this.emit(f.POINTER_OUT,t,n)}if(c=o.length,p.cancelled=!1,v=!1,c>0){for(this.sortGameObjects(o,t),e=0;e<c;e++)if((r=o[e]).input&&r.input.enabled){if(u.setCursor(r.input),r.emit(f.GAMEOBJECT_POINTER_OVER,t,r.input.localX,r.input.localY,d),l++,p.cancelled||!r.input||!r.input.enabled){v=!0;break}if(this.emit(f.GAMEOBJECT_OVER,t,r,d),p.cancelled||!r.input||!r.input.enabled){v=!0;break}}v||this.emit(f.POINTER_OVER,t,o)}return a=s.concat(o),this._over[t.id]=this.sortGameObjects(a,t),l},processUpEvents:function(t){var e=this._temp,r=this._eventData,i=this._eventContainer;r.cancelled=!1;for(var n=!1,o=0;o<e.length;o++){var s=e[o];if(s.input&&s.input.enabled){if(s.emit(f.GAMEOBJECT_POINTER_UP,t,s.input.localX,s.input.localY,i),r.cancelled||!s.input||!s.input.enabled){n=!0;break}if(this.emit(f.GAMEOBJECT_UP,t,s,i),r.cancelled||!s.input||!s.input.enabled){n=!0;break}}}return!n&&this.manager&&(t.upElement===this.manager.game.canvas?this.emit(f.POINTER_UP,t,e):this.emit(f.POINTER_UP_OUTSIDE,t)),e.length},queueForInsertion:function(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function(t){return this._pendingRemoval.push(t),this},setDraggable:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r];i.input.draggable=e;var n=this._draggable.indexOf(i);e&&-1===n?this._draggable.push(i):!e&&n>-1&&this._draggable.splice(n,1)}return this},makePixelPerfect:function(t){void 0===t&&(t=1);var e=this.systems.textures;return h(e,t)},setHitArea:function(t,e,r){if(void 0===e)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var i=!1,n=!1,o=!1,s=!1,h=!1,u=!0;if(g(e)&&Object.keys(e).length){var c=e,l=t.some((function(t){return t.hasOwnProperty("faces")}));if(!l){e=d(c,"hitArea",null),r=d(c,"hitAreaCallback",null),h=d(c,"pixelPerfect",!1);var f=d(c,"alphaTolerance",1);h&&(e={},r=this.makePixelPerfect(f))}i=d(c,"draggable",!1),n=d(c,"dropZone",!1),o=d(c,"cursor",!1),s=d(c,"useHandCursor",!1),e&&r||(this.setHitAreaFromTexture(t),u=!1)}else"function"!=typeof e||r||(r=e,e={});for(var p=0;p<t.length;p++){var v=t[p];if(h&&"Container"===v.type)console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var y=v.input?v.input:a(v,e,r);y.customHitArea=u,y.dropZone=n,y.cursor=s?"pointer":o,v.input=y,i&&this.setDraggable(v),this.queueForInsertion(v)}}return this},setHitAreaCircle:function(t,e,r,o,s){void 0===s&&(s=n);var a=new i(e,r,o);return this.setHitArea(t,a,s)},setHitAreaEllipse:function(t,e,r,i,n,o){void 0===o&&(o=l);var s=new c(e,r,i,n);return this.setHitArea(t,s,o)},setHitAreaFromTexture:function(t,e){void 0===e&&(e=b),Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r],n=i.frame,o=0,s=0;i.width?(o=i.width,s=i.height):n&&(o=n.realWidth,s=n.realHeight),"Container"!==i.type||0!==o&&0!==s?0!==o&&0!==s&&(i.input=a(i,new x(0,0,o,s),e),this.queueForInsertion(i)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(t,e,r,i,n,o){void 0===o&&(o=b);var s=new x(e,r,i,n);return this.setHitArea(t,s,o)},setHitAreaTriangle:function(t,e,r,i,n,o,s,a){void 0===a&&(a=T);var h=new E(e,r,i,n,o,s);return this.setHitArea(t,h,a)},enableDebug:function(t,e){void 0===e&&(e=65280);var r=t.input;if(!r||!r.hitArea)return this;var i=r.hitArea,n=i.type,o=r.hitAreaDebug,s=this.systems.add,a=this.systems.updateList;o&&(a.remove(o),o.destroy(),o=null);var h=0,u=0;switch(n){case v.CIRCLE:o=s.arc(0,0,i.radius),h=i.x-i.radius,u=i.y-i.radius;break;case v.ELLIPSE:o=s.ellipse(0,0,i.width,i.height),h=i.x-i.width/2,u=i.y-i.height/2;break;case v.LINE:o=s.line(0,0,i.x1,i.y1,i.x2,i.y2);break;case v.POLYGON:o=s.polygon(0,0,i.points);break;case v.RECTANGLE:o=s.rectangle(0,0,i.width,i.height),h=i.x,u=i.y;break;case v.TRIANGLE:o=s.triangle(0,0,i.x1,i.y1,i.x2,i.y2,i.x3,i.y3)}return o&&(o.isFilled=!1,o.strokeColor=e,o.preUpdate=function(){o.setVisible(t.visible),o.setStrokeStyle(1/t.scale,o.strokeColor),o.setDisplayOrigin(t.displayOriginX,t.displayOriginY);var e=t.x,r=t.y,i=t.rotation,n=t.scaleX,s=t.scaleY;if(t.parentContainer){var a=t.getWorldTransformMatrix();e=a.tx,r=a.ty,i=a.rotation,n=a.scaleX,s=a.scaleY}o.setRotation(i),o.setScale(n,s),o.setPosition(e+h*n,r+u*s),o.setScrollFactor(t.scrollFactorX,t.scrollFactorY),o.setDepth(t.depth)},a.add(o),r.hitAreaDebug=o),this},removeDebug:function(t){var e=t.input;return e&&e.hitAreaDebug&&(e.hitAreaDebug.destroy(),e.hitAreaDebug=null),this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function(t){return this.manager.globalTopOnly=t,this},setTopOnly:function(t){return this.topOnly=t,this},sortGameObjects:function(t,e){if(t.length<2||!e.camera)return t;var r=e.camera.renderList;return t.sort((function(t,e){var i=Math.max(r.indexOf(t),0);return Math.max(r.indexOf(e),0)-i}))},sortDropZones:function(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(t,e){if(t.parentContainer||e.parentContainer){if(t.parentContainer===e.parentContainer)return e.parentContainer.getIndex(e)-t.parentContainer.getIndex(t);if(t.parentContainer===e)return-1;if(e.parentContainer===t)return 1;for(var r=t.getIndexList(),i=e.getIndexList(),n=Math.min(r.length,i.length),o=0;o<n;o++){var s=r[o],a=i[o];if(s!==a)return a-s}return i.length-r.length}return this.displayList.getIndex(e)-this.displayList.getIndex(t)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(t){return this.manager.addPointer(t)},setDefaultCursor:function(t){return this.manager.setDefaultCursor(t),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(f.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var t=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var e=this.manager;e.canvas.style.cursor=e.defaultCursor;var r=this.systems.events;r.off(w.TRANSITION_START,this.transitionIn,this),r.off(w.TRANSITION_OUT,this.transitionOut,this),r.off(w.TRANSITION_COMPLETE,this.transitionComplete,this),r.off(w.PRE_UPDATE,this.preUpdate,this),e.events.off(f.GAME_OUT,this.onGameOut,this),e.events.off(f.GAME_OVER,this.onGameOver,this),r.off(w.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var t=this.manager.pointers,e=0;e<t.length;e++)t[e].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(f.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(w.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});m.register("InputPlugin",S,"input"),t.exports=S},89639:(t,e,r)=>{var i=r(35154),n={},o={register:function(t,e,r,i,o){n[t]={plugin:e,mapping:r,settingsKey:i,configKey:o}},getPlugin:function(t){return n[t]},install:function(t){var e=t.scene.sys,r=e.settings.input,o=e.game.config;for(var s in n){var a=n[s].plugin,h=n[s].mapping,u=n[s].settingsKey,c=n[s].configKey;i(r,u,o[c])&&(t[h]=new a(t))}},remove:function(t){n.hasOwnProperty(t)&&delete n[t]}};t.exports=o},42515:(t,e,r)=>{var i=r(31040),n=r(83419),o=r(20339),s=r(43855),a=r(47235),h=r(26099),u=r(25892),c=new n({initialize:function(t,e){this.manager=t,this.id=e,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new h,this.prevPosition=new h,this.midPoint=new h(-1,-1),this.velocity=new h,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===e,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(t){var e=t.getWorldPoint(this.x,this.y);return this.worldX=e.x,this.worldY=e.y,this},positionToCamera:function(t,e){return t.getWorldPoint(this.x,this.y,e)},updateMotion:function(){var t=this.position.x,e=this.position.y,r=this.midPoint.x,n=this.midPoint.y;if(t!==r||e!==n){var o=a(this.motionFactor,r,t),h=a(this.motionFactor,n,e);s(o,t,.1)&&(o=t),s(h,e,.1)&&(h=e),this.midPoint.set(o,h);var u=t-o,c=e-h;this.velocity.set(u,c),this.angle=i(o,h,t,e),this.distance=Math.sqrt(u*u+c*c)}},up:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=t.timeStamp,this.wasTouch=!1)},down:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),u.macOS&&t.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=t.timeStamp),this.wasTouch=!1},move:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.locked&&(this.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function(t,e){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=e,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=e.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(t,e){this.event=e,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=e.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?o(this.downX,this.downY,this.x,this.y):o(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?i(this.downX,this.downY,this.x,this.y):i(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(t,e){void 0===t&&(t=10),void 0===e&&(e=[]);for(var r=this.prevPosition.x,i=this.prevPosition.y,n=this.position.x,o=this.position.y,s=0;s<t;s++){var h=1/t*s;e[s]={x:a(h,r,n),y:a(h,i,o)}}return e},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=0===this.id},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},time:{get:function(){return this.event?this.event.timeStamp:0}}});t.exports=c},93301:t=>{t.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},7179:t=>{t.exports="boot"},85375:t=>{t.exports="destroy"},39843:t=>{t.exports="dragend"},23388:t=>{t.exports="dragenter"},16133:t=>{t.exports="drag"},27829:t=>{t.exports="dragleave"},53904:t=>{t.exports="dragover"},56058:t=>{t.exports="dragstart"},2642:t=>{t.exports="drop"},88171:t=>{t.exports="gameobjectdown"},36147:t=>{t.exports="dragend"},71692:t=>{t.exports="dragenter"},96149:t=>{t.exports="drag"},81285:t=>{t.exports="dragleave"},74048:t=>{t.exports="dragover"},21322:t=>{t.exports="dragstart"},49378:t=>{t.exports="drop"},86754:t=>{t.exports="gameobjectmove"},86433:t=>{t.exports="gameobjectout"},60709:t=>{t.exports="gameobjectover"},24081:t=>{t.exports="pointerdown"},11172:t=>{t.exports="pointermove"},18907:t=>{t.exports="pointerout"},95579:t=>{t.exports="pointerover"},35368:t=>{t.exports="pointerup"},26972:t=>{t.exports="wheel"},47078:t=>{t.exports="gameobjectup"},73802:t=>{t.exports="gameobjectwheel"},56718:t=>{t.exports="gameout"},25936:t=>{t.exports="gameover"},27503:t=>{t.exports="boot"},50852:t=>{t.exports="process"},96438:t=>{t.exports="update"},59152:t=>{t.exports="pointerlockchange"},47777:t=>{t.exports="pointerdown"},27957:t=>{t.exports="pointerdownoutside"},19444:t=>{t.exports="pointermove"},54251:t=>{t.exports="pointerout"},18667:t=>{t.exports="pointerover"},27192:t=>{t.exports="pointerup"},24652:t=>{t.exports="pointerupoutside"},45132:t=>{t.exports="wheel"},44512:t=>{t.exports="preupdate"},15757:t=>{t.exports="shutdown"},41637:t=>{t.exports="start"},93802:t=>{t.exports="update"},8214:(t,e,r)=>{t.exports={BOOT:r(7179),DESTROY:r(85375),DRAG_END:r(39843),DRAG_ENTER:r(23388),DRAG:r(16133),DRAG_LEAVE:r(27829),DRAG_OVER:r(53904),DRAG_START:r(56058),DROP:r(2642),GAME_OUT:r(56718),GAME_OVER:r(25936),GAMEOBJECT_DOWN:r(88171),GAMEOBJECT_DRAG_END:r(36147),GAMEOBJECT_DRAG_ENTER:r(71692),GAMEOBJECT_DRAG:r(96149),GAMEOBJECT_DRAG_LEAVE:r(81285),GAMEOBJECT_DRAG_OVER:r(74048),GAMEOBJECT_DRAG_START:r(21322),GAMEOBJECT_DROP:r(49378),GAMEOBJECT_MOVE:r(86754),GAMEOBJECT_OUT:r(86433),GAMEOBJECT_OVER:r(60709),GAMEOBJECT_POINTER_DOWN:r(24081),GAMEOBJECT_POINTER_MOVE:r(11172),GAMEOBJECT_POINTER_OUT:r(18907),GAMEOBJECT_POINTER_OVER:r(95579),GAMEOBJECT_POINTER_UP:r(35368),GAMEOBJECT_POINTER_WHEEL:r(26972),GAMEOBJECT_UP:r(47078),GAMEOBJECT_WHEEL:r(73802),MANAGER_BOOT:r(27503),MANAGER_PROCESS:r(50852),MANAGER_UPDATE:r(96438),POINTER_DOWN:r(47777),POINTER_DOWN_OUTSIDE:r(27957),POINTER_MOVE:r(19444),POINTER_OUT:r(54251),POINTER_OVER:r(18667),POINTER_UP:r(27192),POINTER_UP_OUTSIDE:r(24652),POINTER_WHEEL:r(45132),POINTERLOCK_CHANGE:r(59152),PRE_UPDATE:r(44512),SHUTDOWN:r(15757),START:r(41637),UPDATE:r(93802)}},97421:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e){this.pad=t,this.events=t.events,this.index=e,this.value=0,this.threshold=.1},update:function(t){this.value=t},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});t.exports=i},28884:(t,e,r)=>{var i=r(83419),n=r(92734),o=new i({initialize:function(t,e){this.pad=t,this.events=t.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(t){this.value=t;var e=this.pad,r=this.index;t>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(n.BUTTON_DOWN,e,this,t),this.pad.emit(n.GAMEPAD_BUTTON_DOWN,r,t,this)):this.pressed&&(this.pressed=!1,this.events.emit(n.BUTTON_UP,e,this,t),this.pad.emit(n.GAMEPAD_BUTTON_UP,r,t,this))},destroy:function(){this.pad=null,this.events=null}});t.exports=o},99125:(t,e,r)=>{var i=r(97421),n=r(28884),o=r(83419),s=r(50792),a=r(26099),h=new o({Extends:s,initialize:function(t,e){s.call(this),this.manager=t,this.pad=e,this.id=e.id,this.index=e.index;for(var r=[],o=0;o<e.buttons.length;o++)r.push(new n(this,o));this.buttons=r;var h=[];for(o=0;o<e.axes.length;o++)h.push(new i(this,o));this.axes=h,this.vibration=e.vibrationActuator;var u={value:0,pressed:!1};this._LCLeft=r[14]?r[14]:u,this._LCRight=r[15]?r[15]:u,this._LCTop=r[12]?r[12]:u,this._LCBottom=r[13]?r[13]:u,this._RCLeft=r[2]?r[2]:u,this._RCRight=r[1]?r[1]:u,this._RCTop=r[3]?r[3]:u,this._RCBottom=r[0]?r[0]:u,this._FBLeftTop=r[4]?r[4]:u,this._FBLeftBottom=r[6]?r[6]:u,this._FBRightTop=r[5]?r[5]:u,this._FBRightBottom=r[7]?r[7]:u;var c={value:0};this._HAxisLeft=h[0]?h[0]:c,this._VAxisLeft=h[1]?h[1]:c,this._HAxisRight=h[2]?h[2]:c,this._VAxisRight=h[3]?h[3]:c,this.leftStick=new a,this.rightStick=new a,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(t){return this.axes[t].getValue()},setAxisThreshold:function(t){for(var e=0;e<this.axes.length;e++)this.axes[e].threshold=t},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(t){return this.buttons[t].value},isButtonDown:function(t){return this.buttons[t].pressed},update:function(t){if(!(t.timestamp<this._created)){var e,r=this.buttons,i=t.buttons,n=r.length;for(e=0;e<n;e++)r[e].update(i[e].value);var o=this.axes,s=t.axes;for(n=o.length,e=0;e<n;e++)o[e].update(s[e]);n>=2&&(this.leftStick.set(o[0].getValue(),o[1].getValue()),n>=4&&this.rightStick.set(o[2].getValue(),o[3].getValue()))}},destroy:function(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});t.exports=h},56654:(t,e,r)=>{var i=r(83419),n=r(50792),o=r(92734),s=r(99125),a=r(35154),h=r(89639),u=r(8214),c=new i({Extends:n,initialize:function(t){n.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(u.BOOT,this.boot,this),t.pluginEvents.on(u.START,this.start,this)},boot:function(){var t=this.scene.sys.game,e=this.settings.input,r=t.config;this.enabled=a(e,"gamepad",r.inputGamepad)&&t.device.input.gamepads,this.target=a(e,"gamepad.target",r.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(u.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(u.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var t=this,e=this.target,r=function(e){!e.defaultPrevented&&t.isActive()&&(t.refreshPads(),t.queue.push(e))};this.onGamepadHandler=r,e.addEventListener("gamepadconnected",r,!1),e.addEventListener("gamepaddisconnected",r,!1),this.sceneInputPlugin.pluginEvents.on(u.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(u.UPDATE,this.update);for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].removeAllListeners()},disconnectAll:function(){for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].pad.connected=!1},refreshPads:function(){var t=navigator.getGamepads();if(t)for(var e=this.gamepads,r=0;r<t.length;r++){var i=t[r];if(i){var n=i.id,o=i.index,a=e[o];if(a)a.id!==n?(a.destroy(),e[o]=new s(this,i)):a.update(i);else{var h=new s(this,i);e[o]=h,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=h):this._pad3=h:this._pad2=h:this._pad1=h}}}else this.disconnectAll()},getAll:function(){for(var t=[],e=this.gamepads,r=0;r<e.length;r++)e[r]&&t.push(e[r]);return t},getPad:function(t){for(var e=this.gamepads,r=0;r<e.length;r++)if(e[r]&&e[r].index===t)return e[r]},update:function(){if(this.enabled){this.refreshPads();var t=this.queue.length;if(0!==t)for(var e=this.queue.splice(0,t),r=0;r<t;r++){var i=e[r],n=this.getPad(i.gamepad.index);"gamepadconnected"===i.type?this.emit(o.CONNECTED,n,i):"gamepaddisconnected"===i.type&&this.emit(o.DISCONNECTED,n,i)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var t=0;t<this.gamepads.length;t++)this.gamepads[t]&&this.gamepads[t].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});h.register("GamepadPlugin",c,"gamepad","gamepad","inputGamepad"),t.exports=c},89651:t=>{t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},65294:t=>{t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},90089:t=>{t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},64894:(t,e,r)=>{t.exports={DUALSHOCK_4:r(65294),SNES_USB:r(89651),XBOX_360:r(90089)}},46008:t=>{t.exports="down"},7629:t=>{t.exports="up"},42206:t=>{t.exports="connected"},86544:t=>{t.exports="disconnected"},94784:t=>{t.exports="down"},14325:t=>{t.exports="up"},92734:(t,e,r)=>{t.exports={BUTTON_DOWN:r(46008),BUTTON_UP:r(7629),CONNECTED:r(42206),DISCONNECTED:r(86544),GAMEPAD_BUTTON_DOWN:r(94784),GAMEPAD_BUTTON_UP:r(14325)}},48646:(t,e,r)=>{t.exports={Axis:r(97421),Button:r(28884),Events:r(92734),Gamepad:r(99125),GamepadPlugin:r(56654),Configs:r(64894)}},14350:(t,e,r)=>{var i=r(93301),n=r(79291),o={CreatePixelPerfectHandler:r(84409),CreateInteractiveObject:r(74457),Events:r(8214),Gamepad:r(48646),InputManager:r(7003),InputPlugin:r(48205),InputPluginCache:r(89639),Keyboard:r(51442),Mouse:r(87078),Pointer:r(42515),Touch:r(95618)};o=n(!1,o,i),t.exports=o},78970:(t,e,r)=>{var i=r(72905),n=r(83419),o=r(8443),s=r(8214),a=r(46032),h=r(29747),u=new n({initialize:function(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=h,this.onKeyUp=h,t.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputKeyboard,this.target=t.inputKeyboardEventTarget,this.addCapture(t.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(o.POST_STEP,this.postUpdate,this)},startListeners:function(){var t=this;this.onKeyDown=function(e){if(!e.defaultPrevented&&t.enabled&&t.manager){t.queue.push(e),t.manager.events.emit(s.MANAGER_PROCESS);var r=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey;t.preventDefault&&!r&&t.captures.indexOf(e.keyCode)>-1&&e.preventDefault()}},this.onKeyUp=function(e){if(!e.defaultPrevented&&t.enabled&&t.manager){t.queue.push(e),t.manager.events.emit(s.MANAGER_PROCESS);var r=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey;t.preventDefault&&!r&&t.captures.indexOf(e.keyCode)>-1&&e.preventDefault()}};var e=this.target;e&&(e.addEventListener("keydown",this.onKeyDown,!1),e.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var t=this.target;t.removeEventListener("keydown",this.onKeyDown,!1),t.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,r=0;r<t.length;r++){var i=t[r];"string"==typeof i&&(i=a[i.trim().toUpperCase()]),-1===e.indexOf(i)&&e.push(i)}this.preventDefault=e.length>0},removeCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,r=0;r<t.length;r++){var n=t[r];"string"==typeof n&&(n=a[n.toUpperCase()]),i(e,n)}this.preventDefault=e.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(o.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=u},28846:(t,e,r)=>{var i=r(83419),n=r(50792),o=r(95922),s=r(8443),a=r(35154),h=r(8214),u=r(89639),c=r(30472),l=r(46032),f=r(87960),p=r(74600),d=r(44594),v=r(56583),y=new i({Extends:n,initialize:function(t){n.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(h.BOOT,this.boot,this),t.pluginEvents.on(h.START,this.start,this)},boot:function(){var t=this.settings.input;this.enabled=a(t,"keyboard",!0);var e=a(t,"keyboard.capture",null);e&&this.addCaptures(e),this.sceneInputPlugin.pluginEvents.once(h.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(h.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(h.SHUTDOWN,this.shutdown,this),this.game.events.on(s.BLUR,this.resetKeys,this),this.scene.sys.events.on(d.PAUSE,this.resetKeys,this),this.scene.sys.events.on(d.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(t){return this.manager.addCapture(t),this},removeCapture:function(t){return this.manager.removeCapture(t),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:l.UP,down:l.DOWN,left:l.LEFT,right:l.RIGHT,space:l.SPACE,shift:l.SHIFT})},addKeys:function(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1);var i={};if("string"==typeof t){t=t.split(",");for(var n=0;n<t.length;n++){var o=t[n].trim();o&&(i[o]=this.addKey(o,e,r))}}else for(var s in t)i[s]=this.addKey(t[s],e,r);return i},addKey:function(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1);var i=this.keys;if(t instanceof c){var n=i.indexOf(t);return n>-1?i[n]=t:i[t.keyCode]=t,e&&this.addCapture(t.keyCode),t.setEmitOnRepeat(r),t}return"string"==typeof t&&(t=l[t.toUpperCase()]),i[t]||(i[t]=new c(this,t),e&&this.addCapture(t),i[t].setEmitOnRepeat(r)),i[t]},removeKey:function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=!1);var i,n=this.keys;if(t instanceof c){var o=n.indexOf(t);o>-1&&(i=this.keys[o],this.keys[o]=void 0)}else"string"==typeof t&&(t=l[t.toUpperCase()]);return n[t]&&(i=n[t],n[t]=void 0),i&&(i.plugin=null,r&&this.removeCapture(i.keyCode),e&&i.destroy()),this},removeAllKeys:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);for(var r=this.keys,i=0;i<r.length;i++){var n=r[i];n&&(r[i]=void 0,e&&this.removeCapture(n.keyCode),t&&n.destroy())}return this},createCombo:function(t,e){return new f(this,t,e)},checkDown:function(t,e){if(void 0===e&&(e=0),this.enabled&&t.isDown){var r=v(this.time-t.timeDown,e);if(r>t._tick)return t._tick=r,!0}return!1},update:function(){var t=this.manager.queue,e=t.length;if(this.isActive()&&0!==e)for(var r=this.keys,i=0;i<e;i++){var n=t[i],s=n.keyCode,a=r[s],h=!1;void 0===n.cancelled&&(n.cancelled=0,n.stopImmediatePropagation=function(){n.cancelled=1},n.stopPropagation=function(){n.cancelled=-1}),-1!==n.cancelled&&(s===this.prevCode&&n.timeStamp===this.prevTime&&n.type===this.prevType||(this.prevCode=s,this.prevTime=n.timeStamp,this.prevType=n.type,"keydown"===n.type?(a&&(h=a.isDown,a.onDown(n)),n.cancelled||a&&h||(p[s]&&this.emit(o.KEY_DOWN+p[s],n),n.cancelled||this.emit(o.ANY_KEY_DOWN,n))):(a&&a.onUp(n),n.cancelled||(p[s]&&this.emit(o.KEY_UP+p[s],n),n.cancelled||this.emit(o.ANY_KEY_UP,n))),1===n.cancelled&&(n.cancelled=0)))}},resetKeys:function(){for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(h.MANAGER_PROCESS,this.update,this),this.game.events.off(s.BLUR,this.resetKeys),this.scene.sys.events.off(d.PAUSE,this.resetKeys,this),this.scene.sys.events.off(d.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});u.register("KeyboardPlugin",y,"keyboard","keyboard","inputKeyboard"),t.exports=y},66970:t=>{t.exports=function(t,e){return e.timeLastMatched=t.timeStamp,e.index++,e.index===e.size||(e.current=e.keyCodes[e.index],!1)}},87960:(t,e,r)=>{var i=r(83419),n=r(95922),o=r(95540),s=r(68769),a=r(92803),h=new i({initialize:function(t,e,r){if(void 0===r&&(r={}),e.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var i=0;i<e.length;i++){var h=e[i];"string"==typeof h?this.keyCodes.push(h.toUpperCase().charCodeAt(0)):"number"==typeof h?this.keyCodes.push(h):h.hasOwnProperty("keyCode")&&this.keyCodes.push(h.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=o(r,"resetOnWrongKey",!0),this.maxKeyDelay=o(r,"maxKeyDelay",0),this.resetOnMatch=o(r,"resetOnMatch",!1),this.deleteOnMatch=o(r,"deleteOnMatch",!1);var u=this;this.onKeyDown=function(t){!u.matched&&u.enabled&&s(t,u)&&(u.manager.emit(n.COMBO_MATCH,u,t),u.resetOnMatch?a(u):u.deleteOnMatch&&u.destroy())},this.manager.on(n.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(n.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=h},68769:(t,e,r)=>{var i=r(66970);t.exports=function(t,e){if(e.matched)return!0;var r=!1,n=!1;if(t.keyCode===e.current)if(e.index>0&&e.maxKeyDelay>0){var o=e.timeLastMatched+e.maxKeyDelay;t.timeStamp<=o&&(n=!0,r=i(t,e))}else n=!0,r=i(t,e);return!n&&e.resetOnWrongKey&&(e.index=0,e.current=e.keyCodes[0]),r&&(e.timeLastMatched=t.timeStamp,e.matched=!0,e.timeMatched=t.timeStamp),r}},92803:t=>{t.exports=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},92612:t=>{t.exports="keydown"},23345:t=>{t.exports="keyup"},21957:t=>{t.exports="keycombomatch"},44743:t=>{t.exports="down"},3771:t=>{t.exports="keydown-"},46358:t=>{t.exports="keyup-"},75674:t=>{t.exports="up"},95922:(t,e,r)=>{t.exports={ANY_KEY_DOWN:r(92612),ANY_KEY_UP:r(23345),COMBO_MATCH:r(21957),DOWN:r(44743),KEY_DOWN:r(3771),KEY_UP:r(46358),UP:r(75674)}},51442:(t,e,r)=>{t.exports={Events:r(95922),KeyboardManager:r(78970),KeyboardPlugin:r(28846),Key:r(30472),KeyCodes:r(46032),KeyCombo:r(87960),AdvanceKeyCombo:r(66970),ProcessKeyCombo:r(68769),ResetKeyCombo:r(92803),JustDown:r(90229),JustUp:r(38796),DownDuration:r(37015),UpDuration:r(41170)}},37015:t=>{t.exports=function(t,e){void 0===e&&(e=50);var r=t.plugin.game.loop.time-t.timeDown;return t.isDown&&r<e}},90229:t=>{t.exports=function(t){return!!t._justDown&&(t._justDown=!1,!0)}},38796:t=>{t.exports=function(t){return!!t._justUp&&(t._justUp=!1,!0)}},30472:(t,e,r)=>{var i=r(83419),n=r(50792),o=r(95922),s=new i({Extends:n,initialize:function(t,e){n.call(this),this.plugin=t,this.keyCode=e,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(t){return this.emitOnRepeat=t,this},onDown:function(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(o.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(o.DOWN,this,t)))},onUp:function(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(o.UP,this,t))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=s},46032:t=>{t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},74600:(t,e,r)=>{var i=r(46032),n={};for(var o in i)n[i[o]]=o;t.exports=n},41170:t=>{t.exports=function(t,e){void 0===e&&(e=50);var r=t.plugin.game.loop.time-t.timeUp;return t.isUp&&r<e}},85098:(t,e,r)=>{var i=r(83419),n=r(89357),o=r(8214),s=r(29747),a=new i({initialize:function(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=s,this.onMouseDown=s,this.onMouseUp=s,this.onMouseDownWindow=s,this.onMouseUpWindow=s,this.onMouseOver=s,this.onMouseOut=s,this.onMouseWheel=s,this.pointerLockChange=s,this.isTop=!0,t.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.passive=t.inputMousePassive,this.preventDefaultDown=t.inputMousePreventDefaultDown,this.preventDefaultUp=t.inputMousePreventDefaultUp,this.preventDefaultMove=t.inputMousePreventDefaultMove,this.preventDefaultWheel=t.inputMousePreventDefaultWheel,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},requestPointerLock:function(){if(n.pointerLock){var t=this.target;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock()}},releasePointerLock:function(){n.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var t=this.target;if(t){var e=this,r=this.manager,i=r.canvas,o=window&&window.focus&&r.game.config.autoFocus;this.onMouseMove=function(t){!t.defaultPrevented&&e.enabled&&r&&r.enabled&&(r.onMouseMove(t),e.preventDefaultMove&&t.preventDefault())},this.onMouseDown=function(t){o&&window.focus(),!t.defaultPrevented&&e.enabled&&r&&r.enabled&&(r.onMouseDown(t),e.preventDefaultDown&&t.target===i&&t.preventDefault())},this.onMouseDownWindow=function(t){t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents||!t.defaultPrevented&&e.enabled&&r&&r.enabled&&t.target!==i&&r.onMouseDown(t)},this.onMouseUp=function(t){!t.defaultPrevented&&e.enabled&&r&&r.enabled&&(r.onMouseUp(t),e.preventDefaultUp&&t.target===i&&t.preventDefault())},this.onMouseUpWindow=function(t){t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents||!t.defaultPrevented&&e.enabled&&r&&r.enabled&&t.target!==i&&r.onMouseUp(t)},this.onMouseOver=function(t){!t.defaultPrevented&&e.enabled&&r&&r.enabled&&r.setCanvasOver(t)},this.onMouseOut=function(t){!t.defaultPrevented&&e.enabled&&r&&r.enabled&&r.setCanvasOut(t)},this.onMouseWheel=function(t){!t.defaultPrevented&&e.enabled&&r&&r.enabled&&r.onMouseWheel(t),e.preventDefaultWheel&&t.target===i&&t.preventDefault()};var s={passive:!0};if(t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mouseover",this.onMouseOver,s),t.addEventListener("mouseout",this.onMouseOut,s),this.preventDefaultWheel?t.addEventListener("wheel",this.onMouseWheel,{passive:!1}):t.addEventListener("wheel",this.onMouseWheel,s),window&&r.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,s),window.top.addEventListener("mouseup",this.onMouseUpWindow,s)}catch(t){window.addEventListener("mousedown",this.onMouseDownWindow,s),window.addEventListener("mouseup",this.onMouseUpWindow,s),this.isTop=!1}n.pointerLock&&(this.pointerLockChange=function(t){var i=e.target;e.locked=document.pointerLockElement===i||document.mozPointerLockElement===i||document.webkitPointerLockElement===i,r.onPointerLockChange(t)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&((t=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),t.removeEventListener("mouseup",this.onMouseUpWindow)),n.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=a},87078:(t,e,r)=>{t.exports={MouseManager:r(85098)}},36210:(t,e,r)=>{var i=r(83419),n=r(8214),o=r(29747),s=new i({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=o,this.onTouchStartWindow=o,this.onTouchMove=o,this.onTouchEnd=o,this.onTouchEndWindow=o,this.onTouchCancel=o,this.onTouchCancelWindow=o,this.isTop=!0,t.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},startListeners:function(){var t=this.target;if(t){var e=this,r=this.manager,i=r.canvas,n=window&&window.focus&&r.game.config.autoFocus;this.onTouchMove=function(t){!t.defaultPrevented&&e.enabled&&r&&r.enabled&&(r.onTouchMove(t),e.capture&&t.cancelable&&t.preventDefault())},this.onTouchStart=function(t){n&&window.focus(),!t.defaultPrevented&&e.enabled&&r&&r.enabled&&(r.onTouchStart(t),e.capture&&t.cancelable&&t.target===i&&t.preventDefault())},this.onTouchStartWindow=function(t){!t.defaultPrevented&&e.enabled&&r&&r.enabled&&t.target!==i&&r.onTouchStart(t)},this.onTouchEnd=function(t){!t.defaultPrevented&&e.enabled&&r&&r.enabled&&(r.onTouchEnd(t),e.capture&&t.cancelable&&t.target===i&&t.preventDefault())},this.onTouchEndWindow=function(t){!t.defaultPrevented&&e.enabled&&r&&r.enabled&&t.target!==i&&r.onTouchEnd(t)},this.onTouchCancel=function(t){!t.defaultPrevented&&e.enabled&&r&&r.enabled&&(r.onTouchCancel(t),e.capture&&t.preventDefault())},this.onTouchCancelWindow=function(t){!t.defaultPrevented&&e.enabled&&r&&r.enabled&&r.onTouchCancel(t)};var o=this.capture,s={passive:!0},a={passive:!1};if(t.addEventListener("touchstart",this.onTouchStart,o?a:s),t.addEventListener("touchmove",this.onTouchMove,o?a:s),t.addEventListener("touchend",this.onTouchEnd,o?a:s),t.addEventListener("touchcancel",this.onTouchCancel,o?a:s),window&&r.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,a),window.top.addEventListener("touchend",this.onTouchEndWindow,a),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,a)}catch(t){window.addEventListener("touchstart",this.onTouchStartWindow,a),window.addEventListener("touchend",this.onTouchEndWindow,a),window.addEventListener("touchcancel",this.onTouchCancelWindow,a),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),window&&((t=this.isTop?window.top:window).removeEventListener("touchstart",this.onTouchStartWindow),t.removeEventListener("touchend",this.onTouchEndWindow),t.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=s},95618:(t,e,r)=>{t.exports={TouchManager:r(36210)}},41299:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(54899),s=r(95540),a=r(98356),h=r(3374),u=r(84376),c=r(92638),l=new i({initialize:function(t,e){if(this.loader=t,this.cache=s(e,"cache",!1),this.type=s(e,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=s(e,"key",!1);var r=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+r),!this.key)throw new Error("Invalid File key: "+this.key);var i=s(e,"url");void 0===i?i=t.path+r+"."+s(e,"extension",""):"string"!=typeof i||i.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)||(i=t.path+i),this.url=i,this.src="",this.xhrSettings=c(s(e,"responseType",void 0)),s(e,"xhrSettings",!1)&&(this.xhrSettings=h(this.xhrSettings,s(e,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?n.FILE_POPULATED:n.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=s(e,"config",{}),this.multiFile,this.linkFile,this.base64="string"==typeof i&&0===i.indexOf("data:")},setLink:function(t){this.linkFile=t,t.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===n.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=n.FILE_LOADING,this.src=a(this,this.loader.baseURL),0===this.src.indexOf("data:")&&(this.base64=!0),this.xhrLoader=u(this,this.loader.xhr))},onLoad:function(t,e){var r=t.responseURL&&this.loader.localSchemes.some((function(e){return 0===t.responseURL.indexOf(e)}))&&0===e.target.status,i=!(e.target&&200!==e.target.status)||r;4===t.readyState&&t.status>=400&&t.status<=599&&(i=!1),this.state=n.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,i)},onBase64Load:function(t){this.xhrLoader=t,this.state=n.FILE_LOADED,this.percentComplete=1,this.loader.emit(o.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(o.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=n.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=n.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=n.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(t){if(this.state!==n.FILE_PENDING_DESTROY){void 0===t&&(t=this.data);var e=this.key,r=this.type;this.loader.emit(o.FILE_COMPLETE,e,r,t),this.loader.emit(o.FILE_KEY_COMPLETE+r+"-"+e,e,r,t),this.loader.flagForRemoval(this),this.state=n.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});l.createObjectURL=function(t,e,r){if("function"==typeof URL)t.src=URL.createObjectURL(e);else{var i=new FileReader;i.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||r)+";base64,"+i.result.split(",")[1]},i.onerror=t.onerror,i.readAsDataURL(e)}},l.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=l},74099:t=>{var e={},r={install:function(t){for(var r in e)t[r]=e[r]},register:function(t,r){e[t]=r},destroy:function(){e={}}};t.exports=r},98356:t=>{t.exports=function(t,e){return!!t.url&&(t.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?t.url:e+t.url)}},74261:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(35072),s=r(50792),a=r(54899),h=r(74099),u=r(95540),c=r(35154),l=r(37277),f=r(44594),p=r(92638),d=new i({Extends:s,initialize:function(t){s.call(this);var e=t.sys.game.config,r=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,h.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(u(r,"baseURL",e.loaderBaseURL)),this.setPath(u(r,"path",e.loaderPath)),this.setPrefix(u(r,"prefix",e.loaderPrefix)),this.maxParallelDownloads=u(r,"maxParallelDownloads",e.loaderMaxParallelDownloads),this.xhr=p(u(r,"responseType",e.loaderResponseType),u(r,"async",e.loaderAsync),u(r,"user",e.loaderUser),u(r,"password",e.loaderPassword),u(r,"timeout",e.loaderTimeout),u(r,"withCredentials",e.loaderWithCredentials)),this.crossOrigin=u(r,"crossOrigin",e.loaderCrossOrigin),this.imageLoadType=u(r,"imageLoadType",e.loaderImageLoadType),this.localSchemes=u(r,"localScheme",e.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new o,this.inflight=new o,this.queue=new o,this._deleteQueue=new o,this.totalFailed=0,this.totalComplete=0,this.state=n.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(f.BOOT,this.boot,this),t.sys.events.on(f.START,this.pluginStart,this)},boot:function(){this.systems.events.once(f.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(f.SHUTDOWN,this.shutdown,this)},setBaseURL:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var r=t[e];this.keyExists(r)||(this.list.set(r),this.emit(a.ADD,r.key,r.type,this,r),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(t){var e=t.hasCacheConflict();return e||this.list.iterate((function(r){if(r.type===t.type&&r.key===t.key)return e=!0,!1})),!e&&this.isLoading()&&(this.inflight.iterate((function(r){if(r.type===t.type&&r.key===t.key)return e=!0,!1})),this.queue.iterate((function(r){if(r.type===t.type&&r.key===t.key)return e=!0,!1}))),e},addPack:function(t,e){if("string"==typeof e){var r=c(t,e);r&&(t={packKey:r})}var i=0,n=this.baseURL,o=this.path,s=this.prefix;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var h=t[a],l=u(h,"baseURL",n),f=u(h,"path",o),p=u(h,"prefix",s),d=u(h,"files",null),v=u(h,"defaultType","void");if(Array.isArray(d)){this.setBaseURL(l),this.setPath(f),this.setPrefix(p);for(var y=0;y<d.length;y++){var g=d[y],m=g.hasOwnProperty("type")?g.type:v;this[m]&&(this[m](g),i++)}}}return this.setBaseURL(n),this.setPath(o),this.setPrefix(s),i>0},isLoading:function(){return this.state===n.LOADER_LOADING||this.state===n.LOADER_PROCESSING},isReady:function(){return this.state===n.LOADER_IDLE||this.state===n.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(a.START,this),0===this.list.size?this.loadComplete():(this.state=n.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(f.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(a.PROGRESS,this.progress)},update:function(){this.state===n.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each((function(t){if((t.state===n.FILE_POPULATED||t.state===n.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function(t,e){this.inflight&&(this.inflight.delete(t),this.updateProgress(),e?(this.totalComplete++,this.queue.set(t),this.emit(a.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(a.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===n.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===n.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&(t.multiFile.addToCache(),t.multiFile.pendingDestroy()):(t.addToCache(),t.pendingDestroy())),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(a.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=n.LOADER_COMPLETE,this.systems.events.off(f.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(a.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(t){this._deleteQueue.set(t)},saveJSON:function(t,e){return this.save(JSON.stringify(t),e)},save:function(t,e,r){void 0===e&&(e="file.json"),void 0===r&&(r="application/json");var i=new Blob([t],{type:r}),n=URL.createObjectURL(i),o=document.createElement("a");return o.download=e,o.textContent="Download "+e,o.href=n,o.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,e=this.systems.settings.loader;this.setBaseURL(u(e,"baseURL",t.loaderBaseURL)),this.setPath(u(e,"path",t.loaderPath)),this.setPrefix(u(e,"prefix",t.loaderPrefix)),this.state=n.LOADER_IDLE},shutdown:function(){this.reset(),this.state=n.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(f.UPDATE,this.update,this),this.systems.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=n.LOADER_DESTROYED,this.systems.events.off(f.UPDATE,this.update,this),this.systems.events.off(f.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});l.register("Loader",d,"load"),t.exports=d},3374:(t,e,r)=>{var i=r(79291),n=r(92638);t.exports=function(t,e){var r=void 0===t?n():i({},t);if(e)for(var o in e)void 0!==e[o]&&(r[o]=e[o]);return r}},26430:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(54899),s=new i({initialize:function(t,e,r,i){var o=[];i.forEach((function(t){t&&o.push(t)})),this.loader=t,this.type=e,this.key=r;var s=this.key;t.prefix&&""!==t.prefix&&(this.key=t.prefix+s),this.multiKeyIndex=t.multiKeyIndex++,this.files=o,this.state=n.FILE_PENDING,this.complete=!1,this.pending=o.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var a=0;a<o.length;a++)o[a].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,t.type,t.key))},pendingDestroy:function(){if(this.state!==n.FILE_PENDING_DESTROY){var t=this.key,e=this.type;this.loader.emit(o.FILE_COMPLETE,t,e),this.loader.emit(o.FILE_KEY_COMPLETE+e+"-"+t,t,e),this.loader.flagForRemoval(this);for(var r=0;r<this.files.length;r++)this.files[r].pendingDestroy();this.state=n.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});t.exports=s},84376:(t,e,r)=>{var i=r(3374);t.exports=function(t,e){var r=i(e,t.xhrSettings);if(!t.base64){var n=new XMLHttpRequest;if(n.open("GET",t.src,r.async,r.user,r.password),n.responseType=t.xhrSettings.responseType,n.timeout=r.timeout,r.headers)for(var o in r.headers)n.setRequestHeader(o,r.headers[o]);return r.header&&r.headerValue&&n.setRequestHeader(r.header,r.headerValue),r.requestedWith&&n.setRequestHeader("X-Requested-With",r.requestedWith),r.overrideMimeType&&n.overrideMimeType(r.overrideMimeType),r.withCredentials&&(n.withCredentials=!0),n.onload=t.onLoad.bind(t,n),n.onerror=t.onError.bind(t,n),n.onprogress=t.onProgress.bind(t),n.ontimeout=t.onError.bind(t,n),n.send(),n}var s=t.url.split(";base64,").pop()||t.url.split(",").pop(),a={responseText:atob(s)};t.onBase64Load(a)}},92638:t=>{t.exports=function(t,e,r,i,n,o){return void 0===t&&(t=""),void 0===e&&(e=!0),void 0===r&&(r=""),void 0===i&&(i=""),void 0===n&&(n=0),void 0===o&&(o=!1),{responseType:t,async:e,user:r,password:i,timeout:n,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:o}}},23906:t=>{t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20}},42155:t=>{t.exports="addfile"},38991:t=>{t.exports="complete"},27540:t=>{t.exports="filecomplete"},87464:t=>{t.exports="filecomplete-"},94486:t=>{t.exports="loaderror"},13035:t=>{t.exports="load"},38144:t=>{t.exports="fileprogress"},97520:t=>{t.exports="postprocess"},85595:t=>{t.exports="progress"},55680:t=>{t.exports="start"},54899:(t,e,r)=>{t.exports={ADD:r(42155),COMPLETE:r(38991),FILE_COMPLETE:r(27540),FILE_KEY_COMPLETE:r(87464),FILE_LOAD_ERROR:r(94486),FILE_LOAD:r(13035),FILE_PROGRESS:r(38144),POST_PROCESS:r(97520),PROGRESS:r(85595),START:r(55680)}},14135:(t,e,r)=>{var i=r(83419),n=r(74099),o=r(518),s=r(54899),a=new i({Extends:o,initialize:function(t,e,r,i,n){o.call(this,t,e,r,i,n),this.type="animationJSON"},onProcess:function(){this.loader.once(s.POST_PROCESS,this.onLoadComplete,this),o.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});n.register("animation",(function(t,e,r,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new a(this,t[n]));else this.addFile(new a(this,t,e,i,r));return this})),t.exports=a},76272:(t,e,r)=>{var i=r(83419),n=r(74099),o=r(95540),s=r(19550),a=r(41212),h=r(518),u=r(26430),c=new i({Extends:u,initialize:function(t,e,r,i,n,c){var l,f;if(a(e)){var p=e;e=o(p,"key"),l=new s(t,{key:e,url:o(p,"textureURL"),extension:o(p,"textureExtension","png"),normalMap:o(p,"normalMap"),xhrSettings:o(p,"textureXhrSettings")}),f=new h(t,{key:e,url:o(p,"atlasURL"),extension:o(p,"atlasExtension","json"),xhrSettings:o(p,"atlasXhrSettings")})}else l=new s(t,e,r,n),f=new h(t,e,i,c);l.linkFile?u.call(this,t,"atlasjson",e,[l,f,l.linkFile]):u.call(this,t,"atlasjson",e,[l,f])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],r=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,e.data,r),e.addToCache(),this.complete=!0}}});n.register("aseprite",(function(t,e,r,i,n){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new c(this,t[s]),this.addFile(o.files);else o=new c(this,t,e,r,i,n),this.addFile(o.files);return this})),t.exports=c},38734:(t,e,r)=>{var i=r(83419),n=r(74099),o=r(95540),s=r(19550),a=r(41212),h=r(518),u=r(26430),c=new i({Extends:u,initialize:function(t,e,r,i,n,c){var l,f;if(a(e)){var p=e;e=o(p,"key"),l=new s(t,{key:e,url:o(p,"textureURL"),extension:o(p,"textureExtension","png"),normalMap:o(p,"normalMap"),xhrSettings:o(p,"textureXhrSettings")}),f=new h(t,{key:e,url:o(p,"atlasURL"),extension:o(p,"atlasExtension","json"),xhrSettings:o(p,"atlasXhrSettings")})}else l=new s(t,e,r,n),f=new h(t,e,i,c);l.linkFile?u.call(this,t,"atlasjson",e,[l,f,l.linkFile]):u.call(this,t,"atlasjson",e,[l,f])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],r=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,e.data,r),this.complete=!0}}});n.register("atlas",(function(t,e,r,i,n){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new c(this,t[s]),this.addFile(o.files);else o=new c(this,t,e,r,i,n),this.addFile(o.files);return this})),t.exports=c},74599:(t,e,r)=>{var i=r(83419),n=r(74099),o=r(95540),s=r(19550),a=r(41212),h=r(26430),u=r(57318),c=new i({Extends:h,initialize:function(t,e,r,i,n,c){var l,f;if(a(e)){var p=e;e=o(p,"key"),l=new s(t,{key:e,url:o(p,"textureURL"),extension:o(p,"textureExtension","png"),normalMap:o(p,"normalMap"),xhrSettings:o(p,"textureXhrSettings")}),f=new u(t,{key:e,url:o(p,"atlasURL"),extension:o(p,"atlasExtension","xml"),xhrSettings:o(p,"atlasXhrSettings")})}else l=new s(t,e,r,n),f=new u(t,e,i,c);l.linkFile?h.call(this,t,"atlasxml",e,[l,f,l.linkFile]):h.call(this,t,"atlasxml",e,[l,f])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],r=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(t.key,t.data,e.data,r),this.complete=!0}}});n.register("atlasXML",(function(t,e,r,i,n){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new c(this,t[s]),this.addFile(o.files);else o=new c(this,t,e,r,i,n),this.addFile(o.files);return this})),t.exports=c},21097:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(89749),u=r(41212),c=new i({Extends:o,initialize:function(t,e,r,i,n){if(u(e)){var s=e;e=a(s,"key"),i=a(s,"xhrSettings"),n=a(s,"context",n)}var h={type:"audio",cache:t.cacheManager.audio,extension:r.type,responseType:"arraybuffer",key:e,url:r.url,xhrSettings:i,config:{context:n}};o.call(this,t,h)},onProcess:function(){this.state=n.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(e){t.data=e,t.onProcessComplete()}),(function(e){console.error("Error decoding audio: "+t.key+" - ",e?e.message:null),t.onProcessError()})),this.config.context=null}});c.create=function(t,e,r,i,n){var o=t.systems.game,s=o.config.audio,l=o.device.audio;u(e)&&(r=a(e,"url",[]),i=a(e,"config",{}));var f=c.getAudioURL(o,r);return f?l.webAudio&&!s.disableWebAudio?new c(t,e,f,n,o.sound.context):new h(t,e,f,i):(console.warn('No audio URLs for "%s" matched this device',e),null)},c.getAudioURL=function(t,e){Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var i=a(e[r],"url",e[r]);if(0===i.indexOf("blob:")||0===i.indexOf("data:"))return{url:i,type:""};var n=i.match(/\.([a-zA-Z0-9]+)($|\?)/);if(n=a(e[r],"type",n?n[1]:"").toLowerCase(),t.device.audio[n])return{url:i,type:n}}return null},s.register("audio",(function(t,e,r,i){var n,o=this.systems.game,s=o.config.audio,a=o.device.audio;if(s.noAudio||!a.webAudio&&!a.audioData)return this;if(Array.isArray(t))for(var h=0;h<t.length;h++)(n=c.create(this,t[h]))&&this.addFile(n);else(n=c.create(this,t,e,r,i))&&this.addFile(n);return this})),t.exports=c},89524:(t,e,r)=>{var i=r(21097),n=r(83419),o=r(74099),s=r(95540),a=r(41212),h=r(518),u=r(26430),c=new n({Extends:u,initialize:function(t,e,r,n,o,c,l){if(a(e)){var f=e;e=s(f,"key"),r=s(f,"jsonURL"),n=s(f,"audioURL"),o=s(f,"audioConfig"),c=s(f,"audioXhrSettings"),l=s(f,"jsonXhrSettings")}var p;if(n){var d=i.create(t,e,n,o,c);d&&(p=new h(t,e,r,l),u.call(this,t,"audiosprite",e,[d,p]),this.config.resourceLoad=!1)}else p=new h(t,e,r,l),u.call(this,t,"audiosprite",e,[p]),this.config.resourceLoad=!0,this.config.audioConfig=o,this.config.audioXhrSettings=c},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad&&"json"===t.type&&t.data.hasOwnProperty("resources"))){var e=t.data.resources,r=s(this.config,"audioConfig"),n=s(this.config,"audioXhrSettings"),o=i.create(this.loader,t.key,e,r,n);o&&(this.addToMultiFile(o),this.loader.addFile(o))}},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1];t.addToCache(),e.addToCache(),this.complete=!0}}});o.register("audioSprite",(function(t,e,r,i,n,o){var s,a=this.systems.game,h=a.config.audio,u=a.device.audio;if(h&&h.noAudio||!u.webAudio&&!u.audioData)return this;if(Array.isArray(t))for(var l=0;l<t.length;l++)(s=new c(this,t[l])).files&&this.addFile(s.files);else(s=new c(this,t,e,r,i,n,o)).files&&this.addFile(s.files);return this}))},85722:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(41212),u=new i({Extends:o,initialize:function(t,e,r,i,n){var s="bin";if(h(e)){var u=e;e=a(u,"key"),r=a(u,"url"),i=a(u,"xhrSettings"),s=a(u,"extension",s),n=a(u,"dataType",n)}var c={type:"binary",cache:t.cacheManager.binary,extension:s,responseType:"arraybuffer",key:e,url:r,xhrSettings:i,config:{dataType:n}};o.call(this,t,c)},onProcess:function(){this.state=n.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});s.register("binary",(function(t,e,r,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new u(this,t[n]));else this.addFile(new u(this,t,e,i,r));return this})),t.exports=u},97025:(t,e,r)=>{var i=r(83419),n=r(74099),o=r(95540),s=r(19550),a=r(41212),h=r(26430),u=r(21859),c=r(57318),l=new i({Extends:h,initialize:function(t,e,r,i,n,u){var l,f;if(a(e)){var p=e;e=o(p,"key"),l=new s(t,{key:e,url:o(p,"textureURL"),extension:o(p,"textureExtension","png"),normalMap:o(p,"normalMap"),xhrSettings:o(p,"textureXhrSettings")}),f=new c(t,{key:e,url:o(p,"fontDataURL"),extension:o(p,"fontDataExtension","xml"),xhrSettings:o(p,"fontDataXhrSettings")})}else l=new s(t,e,r,n),f=new c(t,e,i,u);l.linkFile?h.call(this,t,"bitmapfont",e,[l,f,l.linkFile]):h.call(this,t,"bitmapfont",e,[l,f])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1];t.addToCache();var r=t.cache.get(t.key),i=u(e.data,t.cache.getFrame(t.key),0,0,r);this.loader.cacheManager.bitmapFont.add(t.key,{data:i,texture:t.key,frame:null}),this.complete=!0}}});n.register("bitmapFont",(function(t,e,r,i,n){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new l(this,t[s]),this.addFile(o.files);else o=new l(this,t,e,r,i,n),this.addFile(o.files);return this})),t.exports=l},16024:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(41212),u=new i({Extends:o,initialize:function(t,e,r,i){var n="css";if(h(e)){var s=e;e=a(s,"key"),r=a(s,"url"),i=a(s,"xhrSettings"),n=a(s,"extension",n)}var u={type:"script",cache:!1,extension:n,responseType:"text",key:e,url:r,xhrSettings:i};o.call(this,t,u)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});s.register("css",(function(t,e,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new u(this,t[i]));else this.addFile(new u(this,t,e,r));return this})),t.exports=u},69559:(t,e,r)=>{var i=r(38734),n=r(85722),o=r(83419),s=r(74099),a=r(95540),h=r(19550),u=r(41212),c=r(518),l=r(31403),f=r(46975),p=r(59327),d=r(26430),v=r(82038),y=r(55222),g=new o({Extends:d,initialize:function(t,e,r,i){if(r.multiAtlasURL){var o=new c(t,{key:e,url:r.multiAtlasURL,xhrSettings:i,config:r});d.call(this,t,"texture",e,[o])}else{var s=r.textureURL.substr(r.textureURL.length-3);r.type||(r.type="ktx"===s.toLowerCase()?"KTX":"PVR");var a=new n(t,{key:e,url:r.textureURL,extension:s,xhrSettings:i,config:r});if(r.atlasURL){var h=new c(t,{key:e,url:r.atlasURL,xhrSettings:i,config:r});d.call(this,t,"texture",e,[a,h])}else d.call(this,t,"texture",e,[a])}this.config=r},onFileComplete:function(t){if(-1!==this.files.indexOf(t)){if(this.pending--,!this.config.multiAtlasURL)return;if("json"===t.type&&t.data.hasOwnProperty("textures")){var e=t.data.textures,r=this.config,i=this.loader,o=i.baseURL,s=i.path,h=i.prefix,u=a(r,"multiBaseURL",this.baseURL),c=a(r,"multiPath",this.path),l=a(r,"prefix",this.prefix),f=a(r,"textureXhrSettings");u&&i.setBaseURL(u),c&&i.setPath(c),l&&i.setPrefix(l);for(var p=0;p<e.length;p++){var d=e[p].image,v="CMA"+this.multiKeyIndex+"_"+d,y=new n(i,v,d,f);if(this.addToMultiFile(y),i.addFile(y),e[p].normalMap){var g=new n(i,v,e[p].normalMap,f);g.type="normalMap",y.setLink(g),this.addToMultiFile(g),i.addFile(g)}}i.setBaseURL(o),i.setPath(s),i.setPrefix(h)}}},addToCache:function(){function t(t){console.warn('Compressed Texture Invalid: "'+o.key+'". '+t)}if(this.isReadyToProcess()){var e=this.config;if(e.multiAtlasURL)this.addMultiToCache();else{var r,i=this.loader.systems.renderer,n=this.loader.textureManager,o=this.files[0],s=this.files[1];if("PVR"===e.type?r=v(o.data):"KTX"===e.type&&((r=l(o.data))||t("KTX file contains unsupported format.")),r&&!y(r)&&(t("Texture dimensions failed verification. Check the texture format specifications for "+e.format+" 0x"+r.internalFormat.toString(16)+"."),r=null),r&&!i.supportsCompressedTexture(e.format,r.internalFormat)&&(t("Texture format "+e.format+" with internal format "+r.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),r=null),r){r.format=i.getCompressedTextureName(e.format,r.internalFormat);var a=s&&s.data?s.data:null;n.addCompressedTexture(o.key,r,a)}}this.complete=!0}},addMultiToCache:function(){for(var t,e=this.config,r=this.files[0],i=[],n=[],o=[],s=this.loader.systems.renderer,a=this.loader.textureManager,h=1;h<this.files.length;h++){var u=this.files[h];if("normalMap"!==u.type)for(var c=u.key.indexOf("_"),f=u.key.substr(c+1),p=u.data,d=0;d<r.data.textures.length;d++){var y=r.data.textures[d];if(y.image===f){"PVR"===e.type?t=v(p):"KTX"===e.type&&(t=l(p)),t&&s.supportsCompressedTexture(e.format,t.internalFormat)&&(t.format=s.getCompressedTextureName(e.format,t.internalFormat),n.push(t),i.push(y),u.linkFile&&o.push(u.linkFile.data));break}}}0===o.length&&(o=void 0),a.addAtlasJSONArray(this.key,n,i,o),this.complete=!0}});s.register("texture",(function(t,e,r){var n=this.systems.renderer,o=function(t,e,r,o){var s={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(u(e)){var c=e;e=a(c,"key"),r=a(c,"url"),o=a(c,"xhrSettings")}var l=!1;for(var d in r)if(n.supportsCompressedTexture(d)){var v=r[d];"string"==typeof v?s.textureURL=v:s=f(v,s),s.format=d.toUpperCase(),l=!0;break}if(l)if("IMG"===s.format){var y;y=s.multiAtlasURL?new p(t,e,s.multiAtlasURL,s.multiPath,s.multiBaseURL,o).files:s.atlasURL?new i(t,e,s.textureURL,s.atlasURL,o).files:new h(t,e,s.textureURL,o),t.addFile(y)}else{var m=new g(t,e,s,o);t.addFile(m.files)}else console.warn("No supported compressed texture format or IMG fallback",e)};if(Array.isArray(t))for(var s=0;s<t.length;s++)o(this,t[s]);else o(this,t,e,r);return this})),t.exports=g},47931:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(41212),u=r(73894),c=new i({Extends:o,initialize:function(t,e,r,i,n){var s="glsl";if(h(e)){var u=e;e=a(u,"key"),r=a(u,"url"),i=a(u,"shaderType","fragment"),n=a(u,"xhrSettings"),s=a(u,"extension",s)}else void 0===i&&(i="fragment");var c={type:"glsl",cache:t.cacheManager.shader,extension:s,responseType:"text",key:e,url:r,config:{shaderType:i},xhrSettings:n};o.call(this,t,c)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.split("\n"),e=this.extractBlock(t,0);if(e)for(;e;){var r=this.getShaderName(e.header),i=this.getShaderType(e.header),n=this.getShaderUniforms(e.header),o=e.shader;if(this.cache.has(r)){var s=this.cache.get(r);"fragment"===i?s.fragmentSrc=o:s.vertexSrc=o,s.uniforms||(s.uniforms=n)}else"fragment"===i?this.cache.add(r,new u(r,o,"",n)):this.cache.add(r,new u(r,"",o,n));e=this.extractBlock(t,e.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new u(this.key,this.data)):this.cache.add(this.key,new u(this.key,"",this.data))},getShaderName:function(t){for(var e=0;e<t.length;e++){var r=t[e].trim();if("name:"===r.substring(0,5))return r.substring(5).trim()}return this.key},getShaderType:function(t){for(var e=0;e<t.length;e++){var r=t[e].trim();if("type:"===r.substring(0,5))return r.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(t){for(var e={},r=0;r<t.length;r++){var i=t[r].trim();if("uniform."===i.substring(0,8)){var n=i.indexOf(":");if(n){var o=i.substring(8,n);try{e[o]=JSON.parse(i.substring(n+1))}catch(t){console.warn("Invalid uniform JSON: "+o)}}}}return e},extractBlock:function(t,e){for(var r=-1,i=-1,n=-1,o=!1,s=!1,a=[],h=[],u=e;u<t.length;u++){var c=t[u].trim();if("---"===c)if(-1===r)r=u,o=!0;else{if(!o){s=!1;break}i=u,o=!1,s=!0}else o?a.push(c):s&&(h.push(c),n=u)}return o||-1===i?null:{header:a,shader:h.join("\n"),offset:n}}});s.register("glsl",(function(t,e,r,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new c(this,t[n]));else this.addFile(new c(this,t,e,r,i));return this})),t.exports=c},89749:(t,e,r)=>{var i=r(83419),n=r(54899),o=r(41299),s=r(95540),a=r(98356),h=r(41212),u=new i({Extends:o,initialize:function(t,e,r,i){if(h(e)){var n=e;e=s(n,"key"),i=s(n,"config",i)}var a={type:"audio",cache:t.cacheManager.audio,extension:r.type,key:e,url:r.url,config:i};o.call(this,t,a),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];e.oncanplaythrough=null,e.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(t){var e=t.target;e.oncanplaythrough=null,e.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0,this.percentComplete=0;for(var e=0;e<t;e++){var r=new Audio;r.dataset||(r.dataset={}),r.dataset.name=this.key+("0"+e).slice(-2),r.dataset.used="false",this.locked?r.dataset.locked="true":(r.dataset.locked="false",r.preload="auto",r.oncanplaythrough=this.onProgress.bind(this),r.onerror=this.onError.bind(this)),this.data.push(r)}for(e=0;e<this.data.length;e++)(r=this.data[e]).src=a(this,this.loader.baseURL),this.locked||r.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=u},88470:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(41212),u=new i({Extends:o,initialize:function(t,e,r,i){var n="html";if(h(e)){var s=e;e=a(s,"key"),r=a(s,"url"),i=a(s,"xhrSettings"),n=a(s,"extension",n)}var u={type:"text",cache:t.cacheManager.html,extension:n,responseType:"text",key:e,url:r,xhrSettings:i};o.call(this,t,u)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});s.register("html",(function(t,e,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new u(this,t[i]));else this.addFile(new u(this,t,e,r));return this})),t.exports=u},14643:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(41212),u=new i({Extends:o,initialize:function(t,e,r,i,n,s){void 0===i&&(i=512),void 0===n&&(n=512);var u="html";if(h(e)){var c=e;e=a(c,"key"),r=a(c,"url"),s=a(c,"xhrSettings"),u=a(c,"extension",u),i=a(c,"width",i),n=a(c,"height",n)}var l={type:"html",cache:t.textureManager,extension:u,responseType:"text",key:e,url:r,xhrSettings:s,config:{width:i,height:n}};o.call(this,t,l)},onProcess:function(){this.state=n.FILE_PROCESSING;var t=this.config.width,e=this.config.height,r=[];r.push('<svg width="'+t+'px" height="'+e+'px" viewBox="0 0 '+t+" "+e+'" xmlns="http://www.w3.org/2000/svg">'),r.push('<foreignObject width="100%" height="100%">'),r.push('<body xmlns="http://www.w3.org/1999/xhtml">'),r.push(this.xhrLoader.responseText),r.push("</body>"),r.push("</foreignObject>"),r.push("</svg>");var i=[r.join("\n")],s=this;try{var a=new window.Blob(i,{type:"image/svg+xml;charset=utf-8"})}catch(t){return s.state=n.FILE_ERRORED,void s.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){o.revokeObjectURL(s.data),s.onProcessComplete()},this.data.onerror=function(){o.revokeObjectURL(s.data),s.onProcessError()},o.createObjectURL(this.data,a,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});s.register("htmlTexture",(function(t,e,r,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new u(this,t[o]));else this.addFile(new u(this,t,e,r,i,n));return this})),t.exports=u},19550:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(41212),u=r(98356),c=new i({Extends:o,initialize:function t(e,r,i,n,s){var u,c="png";if(h(r)){var l=r;r=a(l,"key"),i=a(l,"url"),u=a(l,"normalMap"),n=a(l,"xhrSettings"),c=a(l,"extension",c),s=a(l,"frameConfig")}Array.isArray(i)&&(u=i[1],i=i[0]);var f={type:"image",cache:e.textureManager,extension:c,responseType:"blob",key:r,url:i,xhrSettings:n,config:s};if(o.call(this,e,f),u){var p=new t(e,this.key,u,n,s);p.type="normalMap",this.setLink(p),e.addFile(p)}this.useImageElementLoad="HTMLImageElement"===e.imageLoadType||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){o.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){o.revokeObjectURL(t.data),t.onProcessError()},o.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var t=this.state;this.state=n.FILE_PROCESSING,t===n.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=n.FILE_LOADING,this.src=u(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){t.state=n.FILE_LOADED,t.loader.nextFile(t,!0)},this.data.onerror=function(){t.loader.nextFile(t,!1)},this.data.src=this.src},addToCache:function(){var t=this.linkFile;t?t.state>=n.FILE_COMPLETE&&("spritesheet"===t.type?t.addToCache():"normalMap"===this.type?this.cache.addImage(this.key,t.data,this.data):this.cache.addImage(this.key,this.data,t.data)):this.cache.addImage(this.key,this.data)}});s.register("image",(function(t,e,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new c(this,t[i]));else this.addFile(new c(this,t,e,r));return this})),t.exports=c},518:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(35154),u=r(41212),c=new i({Extends:o,initialize:function(t,e,r,i,s){var c="json";if(u(e)){var l=e;e=a(l,"key"),r=a(l,"url"),i=a(l,"xhrSettings"),c=a(l,"extension",c),s=a(l,"dataKey",s)}var f={type:"json",cache:t.cacheManager.json,extension:c,responseType:"text",key:e,url:r,xhrSettings:i,config:s};o.call(this,t,f),u(r)&&(this.data=s?h(r,s):r,this.state=n.FILE_POPULATED)},onProcess:function(){if(this.state!==n.FILE_POPULATED){this.state=n.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(t){throw this.onProcessError(),t}var e=this.config;this.data="string"==typeof e?h(t,e,t):t}this.onProcessComplete()}});s.register("json",(function(t,e,r,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new c(this,t[n]));else this.addFile(new c(this,t,e,i,r));return this})),t.exports=c},59327:(t,e,r)=>{var i=r(83419),n=r(74099),o=r(95540),s=r(19550),a=r(41212),h=r(518),u=r(26430),c=new i({Extends:u,initialize:function(t,e,r,i,n,s,c){if(a(e)){var l=e;e=o(l,"key"),r=o(l,"url",!1)?o(l,"url"):o(l,"atlasURL"),s=o(l,"xhrSettings"),i=o(l,"path"),n=o(l,"baseURL"),c=o(l,"textureXhrSettings")}var f=new h(t,e,r,s);u.call(this,t,"multiatlas",e,[f]),this.config.path=i,this.config.baseURL=n,this.config.textureXhrSettings=c},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type&&t.data.hasOwnProperty("textures"))){var e=t.data.textures,r=this.config,i=this.loader,n=i.baseURL,a=i.path,h=i.prefix,u=o(r,"baseURL",this.baseURL),c=o(r,"path",this.path),l=o(r,"prefix",this.prefix),f=o(r,"textureXhrSettings");i.setBaseURL(u),i.setPath(c),i.setPrefix(l);for(var p=0;p<e.length;p++){var d=e[p].image,v="MA"+this.multiKeyIndex+"_"+d,y=new s(i,v,d,f);if(this.addToMultiFile(y),i.addFile(y),e[p].normalMap){var g=new s(i,v,e[p].normalMap,f);g.type="normalMap",y.setLink(g),this.addToMultiFile(g),i.addFile(g)}}i.setBaseURL(n),i.setPath(a),i.setPrefix(h)}},addToCache:function(){if(this.isReadyToProcess()){for(var t=this.files[0],e=[],r=[],i=[],n=1;n<this.files.length;n++){var o=this.files[n];if("normalMap"!==o.type)for(var s=o.key.indexOf("_"),a=o.key.substr(s+1),h=o.data,u=0;u<t.data.textures.length;u++){var c=t.data.textures[u];if(c.image===a){r.push(h),e.push(c),o.linkFile&&i.push(o.linkFile.data);break}}}0===i.length&&(i=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,r,e,i),this.complete=!0}}});n.register("multiatlas",(function(t,e,r,i,n){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new c(this,t[s]),this.addFile(o.files);else o=new c(this,t,e,r,i,n),this.addFile(o.files);return this})),t.exports=c},99297:(t,e,r)=>{var i=r(83419),n=r(74099),o=r(95540),s=r(41212),a=r(26430),h=r(34328),u=new i({Extends:a,initialize:function(t,e,r,i){var n="js",u=[];if(s(e)){var c=e;e=o(c,"key"),r=o(c,"url"),i=o(c,"xhrSettings"),n=o(c,"extension",n)}Array.isArray(r)||(r=[r]);for(var l=0;l<r.length;l++){var f=new h(t,{key:e+"_"+l.toString(),url:r[l],extension:n,xhrSettings:i});f.onProcess=function(){this.onProcessComplete()},u.push(f)}a.call(this,t,"scripts",e,u)},addToCache:function(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var e=this.files[t];e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=e.xhrLoader.responseText,document.head.appendChild(e.data)}this.complete=!0}}});n.register("scripts",(function(t,e,r){var i;if(Array.isArray(t))for(var n=0;n<t.length;n++)i=new u(this,t[n]),this.addFile(i.files);else i=new u(this,t,e,r),this.addFile(i.files);return this})),t.exports=u},41846:(t,e,r)=>{var i=r(83419),n=r(74099),o=r(95540),s=r(41212),a=r(26430),h=r(85048),u=r(61485),c=r(78776),l=new i({Extends:a,initialize:function(t,e,r,i,n,h){var u,l,f=t.cacheManager.obj;if(s(e)){var p=e;e=o(p,"key"),u=new c(t,{key:e,type:"obj",cache:f,url:o(p,"url"),extension:o(p,"extension","obj"),xhrSettings:o(p,"xhrSettings"),config:{flipUV:o(p,"flipUV",n)}}),(i=o(p,"matURL"))&&(l=new c(t,{key:e,type:"mat",cache:f,url:i,extension:o(p,"matExtension","mat"),xhrSettings:o(p,"xhrSettings")}))}else u=new c(t,{key:e,url:r,type:"obj",cache:f,extension:"obj",xhrSettings:h,config:{flipUV:n}}),i&&(l=new c(t,{key:e,url:i,type:"mat",cache:f,extension:"mat",xhrSettings:h}));a.call(this,t,"obj",e,[u,l])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],r=h(t.data,t.config.flipUV);e&&(r.materials=u(e.data)),t.cache.add(t.key,r),this.complete=!0}}});n.register("obj",(function(t,e,r,i,n){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new l(this,t[s]),this.addFile(o.files);else o=new l(this,t,e,r,i,n),this.addFile(o.files);return this})),t.exports=l},58610:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(74099),s=r(518),a=new i({Extends:s,initialize:function(t,e,r,i,n){s.call(this,t,e,r,i,n),this.type="packfile"},onProcess:function(){if(this.state!==n.FILE_POPULATED&&(this.state=n.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var t={};t[this.config]=this.data,this.data=t}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});o.register("pack",(function(t,e,r,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new a(this,t[n]));else this.addFile(new a(this,t,e,i,r));return this})),t.exports=a},48988:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(41212),u=new i({Extends:o,initialize:function(t,e,r,i,s,u){var c="js";if(h(e)){var l=e;e=a(l,"key"),r=a(l,"url"),u=a(l,"xhrSettings"),c=a(l,"extension",c),i=a(l,"start"),s=a(l,"mapping")}var f={type:"plugin",cache:!1,extension:c,responseType:"text",key:e,url:r,xhrSettings:u,config:{start:i,mapping:s}};o.call(this,t,f),"function"==typeof r&&(this.data=r,this.state=n.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,r=a(e,"start",!1),i=a(e,"mapping",null);if(this.state===n.FILE_POPULATED)t.install(this.key,this.data,r,i);else{this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var o=t.install(this.key,window[this.key],r,i);(r||i)&&(this.loader.systems[i]=o,this.loader.scene[i]=o)}this.onProcessComplete()}});s.register("plugin",(function(t,e,r,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new u(this,t[o]));else this.addFile(new u(this,t,e,r,i,n));return this})),t.exports=u},67397:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(41212),u=new i({Extends:o,initialize:function(t,e,r,i,n){var s="svg";if(h(e)){var u=e;e=a(u,"key"),r=a(u,"url"),i=a(u,"svgConfig",{}),n=a(u,"xhrSettings"),s=a(u,"extension",s)}var c={type:"svg",cache:t.textureManager,extension:s,responseType:"text",key:e,url:r,xhrSettings:n,config:{width:a(i,"width"),height:a(i,"height"),scale:a(i,"scale")}};o.call(this,t,c)},onProcess:function(){this.state=n.FILE_PROCESSING;var t=this.xhrLoader.responseText,e=[t],r=this.config.width,i=this.config.height,s=this.config.scale;t:if(r&&i||s){var a=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],h=a.hasAttribute("viewBox"),u=parseFloat(a.getAttribute("width")),c=parseFloat(a.getAttribute("height"));if(!h&&u&&c)a.setAttribute("viewBox","0  0 "+u+" "+c);else if(h&&!u&&!c){var l=a.getAttribute("viewBox").split(/\s+|,/);u=l[2],c=l[3]}if(s){if(!u||!c)break t;r=u*s,i=c*s}a.setAttribute("width",r.toString()+"px"),a.setAttribute("height",i.toString()+"px"),e=[(new XMLSerializer).serializeToString(a)]}try{var f=new window.Blob(e,{type:"image/svg+xml;charset=utf-8"})}catch(t){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var p=this,d=!1;this.data.onload=function(){d||o.revokeObjectURL(p.data),p.onProcessComplete()},this.data.onerror=function(){d?p.onProcessError():(d=!0,o.revokeObjectURL(p.data),p.data.src="data:image/svg+xml,"+encodeURIComponent(e.join("")))},o.createObjectURL(this.data,f,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});s.register("svg",(function(t,e,r,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new u(this,t[n]));else this.addFile(new u(this,t,e,r,i));return this})),t.exports=u},88423:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(41212),u=new i({Extends:o,initialize:function(t,e,r,i){var n="js";if(h(e)){var s=e;e=a(s,"key"),r=a(s,"url"),i=a(s,"xhrSettings"),n=a(s,"extension",n)}var u={type:"text",extension:n,responseType:"text",key:e,url:r,xhrSettings:i};o.call(this,t,u)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),e=eval;this.loader.sceneManager.add(this.key,e(t)),this.complete=!0}});s.register("sceneFile",(function(t,e,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new u(this,t[i]));else this.addFile(new u(this,t,e,r));return this})),t.exports=u},56812:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(41212),u=new i({Extends:o,initialize:function(t,e,r,i,s,u){var c="js";if(h(e)){var l=e;e=a(l,"key"),r=a(l,"url"),u=a(l,"xhrSettings"),c=a(l,"extension",c),i=a(l,"systemKey"),s=a(l,"sceneKey")}var f={type:"scenePlugin",cache:!1,extension:c,responseType:"text",key:e,url:r,xhrSettings:u,config:{systemKey:i,sceneKey:s}};o.call(this,t,f),"function"==typeof r&&(this.data=r,this.state=n.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,r=this.key,i=a(e,"systemKey",r),o=a(e,"sceneKey",r);this.state===n.FILE_POPULATED?t.installScenePlugin(i,this.data,o,this.loader.scene,!0):(this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(i,window[this.key],o,this.loader.scene,!0)),this.onProcessComplete()}});s.register("scenePlugin",(function(t,e,r,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new u(this,t[o]));else this.addFile(new u(this,t,e,r,i,n));return this})),t.exports=u},34328:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(41212),u=new i({Extends:o,initialize:function(t,e,r,i,n){var s="js";if(h(e)){var u=e;e=a(u,"key"),r=a(u,"url"),i=a(u,"type","script"),n=a(u,"xhrSettings"),s=a(u,"extension",s)}else void 0===i&&(i="script");var c={type:i,cache:!1,extension:s,responseType:"text",key:e,url:r,xhrSettings:n};o.call(this,t,c)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});s.register("script",(function(t,e,r,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new u(this,t[n]));else this.addFile(new u(this,t,e,r,i));return this})),t.exports=u},85035:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(74099),s=r(19550),a=new i({Extends:s,initialize:function(t,e,r,i,n){s.call(this,t,e,r,n,i),this.type="spritesheet"},addToCache:function(){var t=this.linkFile;t?t.state>=n.FILE_COMPLETE&&("normalMap"===this.type?this.cache.addSpriteSheet(this.key,t.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,t.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});o.register("spritesheet",(function(t,e,r,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new a(this,t[n]));else this.addFile(new a(this,t,e,r,i));return this})),t.exports=a},78776:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(41212),u=new i({Extends:o,initialize:function(t,e,r,i){var n="text",s="txt",u=t.cacheManager.text;if(h(e)){var c=e;e=a(c,"key"),r=a(c,"url"),i=a(c,"xhrSettings"),s=a(c,"extension",s),n=a(c,"type",n),u=a(c,"cache",u)}var l={type:n,cache:u,extension:s,responseType:"text",key:e,url:r,xhrSettings:i};o.call(this,t,l)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});s.register("text",(function(t,e,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new u(this,t[i]));else this.addFile(new u(this,t,e,r));return this})),t.exports=u},49477:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(41212),u=r(80341),c=new i({Extends:o,initialize:function(t,e,r,i){var n="csv";if(h(e)){var s=e;e=a(s,"key"),r=a(s,"url"),i=a(s,"xhrSettings"),n=a(s,"extension",n)}var c={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:n,responseType:"text",key:e,url:r,xhrSettings:i};o.call(this,t,c),this.tilemapFormat=u.CSV},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t)}});s.register("tilemapCSV",(function(t,e,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new c(this,t[i]));else this.addFile(new c(this,t,e,r));return this})),t.exports=c},40807:(t,e,r)=>{var i=r(83419),n=r(74099),o=r(518),s=r(80341),a=new i({Extends:o,initialize:function(t,e,r,i){o.call(this,t,e,r,i),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:s.WELTMEISTER,data:this.data};this.cache.add(this.key,t)}});n.register("tilemapImpact",(function(t,e,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new a(this,t[i]));else this.addFile(new a(this,t,e,r));return this})),t.exports=a},56775:(t,e,r)=>{var i=r(83419),n=r(74099),o=r(518),s=r(80341),a=new i({Extends:o,initialize:function(t,e,r,i){o.call(this,t,e,r,i),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:s.TILED_JSON,data:this.data};this.cache.add(this.key,t)}});n.register("tilemapTiledJSON",(function(t,e,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new a(this,t[i]));else this.addFile(new a(this,t,e,r));return this})),t.exports=a},25771:(t,e,r)=>{var i=r(83419),n=r(74099),o=r(95540),s=r(19550),a=r(41212),h=r(26430),u=r(78776),c=new i({Extends:h,initialize:function(t,e,r,i,n,c){var l,f;if(a(e)){var p=e;e=o(p,"key"),l=new s(t,{key:e,url:o(p,"textureURL"),extension:o(p,"textureExtension","png"),normalMap:o(p,"normalMap"),xhrSettings:o(p,"textureXhrSettings")}),f=new u(t,{key:e,url:o(p,"atlasURL"),extension:o(p,"atlasExtension","txt"),xhrSettings:o(p,"atlasXhrSettings")})}else l=new s(t,e,r,n),f=new u(t,e,i,c);l.linkFile?h.call(this,t,"unityatlas",e,[l,f,l.linkFile]):h.call(this,t,"unityatlas",e,[l,f])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],r=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(t.key,t.data,e.data,r),this.complete=!0}}});n.register("unityAtlas",(function(t,e,r,i,n){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new c(this,t[s]),this.addFile(o.files);else o=new c(this,t,e,r,i,n),this.addFile(o.files);return this})),t.exports=c},33720:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(98356),h=r(95540),u=r(41212),c=new i({Extends:o,initialize:function(t,e,r,i){if(void 0===i&&(i=!1),u(e)){var n=e;e=h(n,"key"),r=h(n,"url",[]),i=h(n,"noAudio",!1)}var s=t.systems.game.device.video.getVideoURL(r);s||console.warn("VideoFile: No supported format for "+e);var a={type:"video",cache:t.cacheManager.video,extension:s.type,key:e,url:s.url,config:{noAudio:i}};o.call(this,t,a)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=a(this,this.loader.baseURL),this.state=n.FILE_LOADED,this.loader.nextFile(this,!0)}});s.register("video",(function(t,e,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new c(this,t[i]));else this.addFile(new c(this,t,e,r));return this})),t.exports=c},57318:(t,e,r)=>{var i=r(83419),n=r(23906),o=r(41299),s=r(74099),a=r(95540),h=r(41212),u=r(56836),c=new i({Extends:o,initialize:function(t,e,r,i){var n="xml";if(h(e)){var s=e;e=a(s,"key"),r=a(s,"url"),i=a(s,"xhrSettings"),n=a(s,"extension",n)}var u={type:"xml",cache:t.cacheManager.xml,extension:n,responseType:"text",key:e,url:r,xhrSettings:i};o.call(this,t,u)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=u(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});s.register("xml",(function(t,e,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new c(this,t[i]));else this.addFile(new c(this,t,e,r));return this})),t.exports=c},64589:(t,e,r)=>{t.exports={AnimationJSONFile:r(14135),AsepriteFile:r(76272),AtlasJSONFile:r(38734),AtlasXMLFile:r(74599),AudioFile:r(21097),AudioSpriteFile:r(89524),BinaryFile:r(85722),BitmapFontFile:r(97025),CompressedTextureFile:r(69559),CSSFile:r(16024),GLSLFile:r(47931),HTML5AudioFile:r(89749),HTMLFile:r(88470),HTMLTextureFile:r(14643),ImageFile:r(19550),JSONFile:r(518),MultiAtlasFile:r(59327),MultiScriptFile:r(99297),OBJFile:r(41846),PackFile:r(58610),PluginFile:r(48988),SceneFile:r(88423),ScenePluginFile:r(56812),ScriptFile:r(34328),SpriteSheetFile:r(85035),SVGFile:r(67397),TextFile:r(78776),TilemapCSVFile:r(49477),TilemapImpactFile:r(40807),TilemapJSONFile:r(56775),UnityAtlasFile:r(25771),VideoFile:r(33720),XMLFile:r(57318)}},57777:(t,e,r)=>{var i=r(23906),n=r(79291),o={Events:r(54899),FileTypes:r(64589),File:r(41299),FileTypesManager:r(74099),GetURL:r(98356),LoaderPlugin:r(74261),MergeXHRSettings:r(3374),MultiFile:r(26430),XHRLoader:r(84376),XHRSettings:r(92638)};o=n(!1,o,i),t.exports=o},53307:t=>{t.exports=function(t){for(var e=0,r=0;r<t.length;r++)e+=+t[r];return e/t.length}},85710:(t,e,r)=>{var i=r(6411);t.exports=function(t,e){return i(t)/i(e)/i(t-e)}},30976:t=>{t.exports=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},87842:t=>{t.exports=function(t,e,r,i,n){var o=.5*(i-e),s=.5*(n-r),a=t*t;return(2*r-2*i+o+s)*(t*a)+(-3*r+3*i-2*o-s)*a+o*t+r}},26302:t=>{t.exports=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=10);var i=Math.pow(r,-e);return Math.ceil(t*i)/i}},45319:t=>{t.exports=function(t,e,r){return Math.max(e,Math.min(r,t))}},39506:(t,e,r)=>{var i=r(36383);t.exports=function(t){return t*i.DEG_TO_RAD}},61241:t=>{t.exports=function(t,e){return Math.abs(t-e)}},38857:(t,e,r)=>{var i=r(45319),n=r(83419),o=r(37867),s=r(29747),a=new o,h=new n({initialize:function t(e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=t.DefaultOrder),this._x=e,this._y=r,this._z=i,this._order=n,this.onChangeCallback=s},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,e,r,i){return void 0===i&&(i=this._order),this._x=t,this._y=e,this._z=r,this._order=i,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,e,r){return void 0===e&&(e=this._order),void 0===r&&(r=!1),a.fromQuat(t),this.setFromRotationMatrix(a,e,r)},setFromRotationMatrix:function(t,e,r){void 0===e&&(e=this._order),void 0===r&&(r=!1);var n=t.val,o=n[0],s=n[4],a=n[8],h=n[1],u=n[5],c=n[9],l=n[2],f=n[6],p=n[10],d=0,v=0,y=0,g=.99999;switch(e){case"XYZ":v=Math.asin(i(a,-1,1)),Math.abs(a)<g?(d=Math.atan2(-c,p),y=Math.atan2(-s,o)):d=Math.atan2(f,u);break;case"YXZ":d=Math.asin(-i(c,-1,1)),Math.abs(c)<g?(v=Math.atan2(a,p),y=Math.atan2(h,u)):v=Math.atan2(-l,o);break;case"ZXY":d=Math.asin(i(f,-1,1)),Math.abs(f)<g?(v=Math.atan2(-l,p),y=Math.atan2(-s,u)):y=Math.atan2(h,o);break;case"ZYX":v=Math.asin(-i(l,-1,1)),Math.abs(l)<g?(d=Math.atan2(f,p),y=Math.atan2(h,o)):y=Math.atan2(-s,u);break;case"YZX":y=Math.asin(i(h,-1,1)),Math.abs(h)<g?(d=Math.atan2(-c,u),v=Math.atan2(-l,o)):v=Math.atan2(a,p);break;case"XZY":y=Math.asin(-i(s,-1,1)),Math.abs(s)<g?(d=Math.atan2(f,u),v=Math.atan2(a,o)):d=Math.atan2(-c,p)}return this._x=d,this._y=v,this._z=y,this._order=e,r&&this.onChangeCallback(this),this}});h.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],h.DefaultOrder="XYZ",t.exports=h},6411:t=>{t.exports=function(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}},99472:t=>{t.exports=function(t,e){return Math.random()*(e-t)+t}},77623:t=>{t.exports=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=10);var i=Math.pow(r,-e);return Math.floor(t*i)/i}},62945:(t,e,r)=>{var i=r(45319);t.exports=function(t,e,r){return(r-e)*(t=i(t,0,1))+e}},38265:t=>{t.exports=function(t,e){return t/e/1e3}},78702:t=>{t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},94883:t=>{t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},28915:t=>{t.exports=function(t,e,r){return(e-t)*r+t}},94908:t=>{t.exports=function(t,e,r){return void 0===r&&(r=0),t.clone().lerp(e,r)}},94434:(t,e,r)=>{var i=new(r(83419))({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new i(this)},set:function(t){return this.copy(t)},copy:function(t){var e=this.val,r=t.val;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this},fromMat4:function(t){var e=t.val,r=this.val;return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],this},fromArray:function(t){var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,e=t[1],r=t[2],i=t[5];return t[1]=t[3],t[2]=t[6],t[3]=e,t[5]=t[7],t[6]=r,t[7]=i,this},invert:function(){var t=this.val,e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],a=t[6],h=t[7],u=t[8],c=u*o-s*h,l=-u*n+s*a,f=h*n-o*a,p=e*c+r*l+i*f;return p?(p=1/p,t[0]=c*p,t[1]=(-u*r+i*h)*p,t[2]=(s*r-i*o)*p,t[3]=l*p,t[4]=(u*e-i*a)*p,t[5]=(-s*e+i*n)*p,t[6]=f*p,t[7]=(-h*e+r*a)*p,t[8]=(o*e-r*n)*p,this):null},adjoint:function(){var t=this.val,e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],a=t[6],h=t[7],u=t[8];return t[0]=o*u-s*h,t[1]=i*h-r*u,t[2]=r*s-i*o,t[3]=s*a-n*u,t[4]=e*u-i*a,t[5]=i*n-e*s,t[6]=n*h-o*a,t[7]=r*a-e*h,t[8]=e*o-r*n,this},determinant:function(){var t=this.val,e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],a=t[6],h=t[7],u=t[8];return e*(u*o-s*h)+r*(-u*n+s*a)+i*(h*n-o*a)},multiply:function(t){var e=this.val,r=e[0],i=e[1],n=e[2],o=e[3],s=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=t.val,f=l[0],p=l[1],d=l[2],v=l[3],y=l[4],g=l[5],m=l[6],x=l[7],b=l[8];return e[0]=f*r+p*o+d*h,e[1]=f*i+p*s+d*u,e[2]=f*n+p*a+d*c,e[3]=v*r+y*o+g*h,e[4]=v*i+y*s+g*u,e[5]=v*n+y*a+g*c,e[6]=m*r+x*o+b*h,e[7]=m*i+x*s+b*u,e[8]=m*n+x*a+b*c,this},translate:function(t){var e=this.val,r=t.x,i=t.y;return e[6]=r*e[0]+i*e[3]+e[6],e[7]=r*e[1]+i*e[4]+e[7],e[8]=r*e[2]+i*e[5]+e[8],this},rotate:function(t){var e=this.val,r=e[0],i=e[1],n=e[2],o=e[3],s=e[4],a=e[5],h=Math.sin(t),u=Math.cos(t);return e[0]=u*r+h*o,e[1]=u*i+h*s,e[2]=u*n+h*a,e[3]=u*o-h*r,e[4]=u*s-h*i,e[5]=u*a-h*n,this},scale:function(t){var e=this.val,r=t.x,i=t.y;return e[0]=r*e[0],e[1]=r*e[1],e[2]=r*e[2],e[3]=i*e[3],e[4]=i*e[4],e[5]=i*e[5],this},fromQuat:function(t){var e=t.x,r=t.y,i=t.z,n=t.w,o=e+e,s=r+r,a=i+i,h=e*o,u=e*s,c=e*a,l=r*s,f=r*a,p=i*a,d=n*o,v=n*s,y=n*a,g=this.val;return g[0]=1-(l+p),g[3]=u+y,g[6]=c-v,g[1]=u-y,g[4]=1-(h+p),g[7]=f+d,g[2]=c+v,g[5]=f-d,g[8]=1-(h+l),this},normalFromMat4:function(t){var e=t.val,r=this.val,i=e[0],n=e[1],o=e[2],s=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],f=e[9],p=e[10],d=e[11],v=e[12],y=e[13],g=e[14],m=e[15],x=i*h-n*a,b=i*u-o*a,w=i*c-s*a,E=n*u-o*h,T=n*c-s*h,S=o*c-s*u,_=l*y-f*v,O=l*g-p*v,P=l*m-d*v,M=f*g-p*y,A=f*m-d*y,L=p*m-d*g,C=x*L-b*A+w*M+E*P-T*O+S*_;return C?(C=1/C,r[0]=(h*L-u*A+c*M)*C,r[1]=(u*P-a*L-c*O)*C,r[2]=(a*A-h*P+c*_)*C,r[3]=(o*A-n*L-s*M)*C,r[4]=(i*L-o*P+s*O)*C,r[5]=(n*P-i*A-s*_)*C,r[6]=(y*S-g*T+m*E)*C,r[7]=(g*w-v*S-m*b)*C,r[8]=(v*T-y*w+m*x)*C,this):null}});t.exports=i},37867:(t,e,r)=>{var i=r(83419),n=r(25836),o=1e-6,s=new i({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new s(this)},set:function(t){return this.copy(t)},setValues:function(t,e,r,i,n,o,s,a,h,u,c,l,f,p,d,v){var y=this.val;return y[0]=t,y[1]=e,y[2]=r,y[3]=i,y[4]=n,y[5]=o,y[6]=s,y[7]=a,y[8]=h,y[9]=u,y[10]=c,y[11]=l,y[12]=f,y[13]=p,y[14]=d,y[15]=v,this},copy:function(t){var e=t.val;return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,e,r){var i=a.fromQuat(r).val,n=e.x,o=e.y,s=e.z;return this.setValues(i[0]*n,i[1]*n,i[2]*n,0,i[4]*o,i[5]*o,i[6]*o,0,i[8]*s,i[9]*s,i[10]*s,0,t.x,t.y,t.z,1)},xyz:function(t,e,r){this.identity();var i=this.val;return i[12]=t,i[13]=e,i[14]=r,this},scaling:function(t,e,r){this.zero();var i=this.val;return i[0]=t,i[5]=e,i[10]=r,i[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var t=this.val,e=t[1],r=t[2],i=t[3],n=t[6],o=t[7],s=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=r,t[9]=n,t[11]=t[14],t[12]=i,t[13]=o,t[14]=s,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){var t=this.val,e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],a=t[6],h=t[7],u=t[8],c=t[9],l=t[10],f=t[11],p=t[12],d=t[13],v=t[14],y=t[15],g=e*s-r*o,m=e*a-i*o,x=e*h-n*o,b=r*a-i*s,w=r*h-n*s,E=i*h-n*a,T=u*d-c*p,S=u*v-l*p,_=u*y-f*p,O=c*v-l*d,P=c*y-f*d,M=l*y-f*v,A=g*M-m*P+x*O+b*_-w*S+E*T;return A?(A=1/A,this.setValues((s*M-a*P+h*O)*A,(i*P-r*M-n*O)*A,(d*E-v*w+y*b)*A,(l*w-c*E-f*b)*A,(a*_-o*M-h*S)*A,(e*M-i*_+n*S)*A,(v*x-p*E-y*m)*A,(u*E-l*x+f*m)*A,(o*P-s*_+h*T)*A,(r*_-e*P-n*T)*A,(p*w-d*x+y*g)*A,(c*x-u*w-f*g)*A,(s*S-o*O-a*T)*A,(e*O-r*S+i*T)*A,(d*m-p*b-v*g)*A,(u*b-c*m+l*g)*A)):this},adjoint:function(){var t=this.val,e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],a=t[6],h=t[7],u=t[8],c=t[9],l=t[10],f=t[11],p=t[12],d=t[13],v=t[14],y=t[15];return this.setValues(s*(l*y-f*v)-c*(a*y-h*v)+d*(a*f-h*l),-(r*(l*y-f*v)-c*(i*y-n*v)+d*(i*f-n*l)),r*(a*y-h*v)-s*(i*y-n*v)+d*(i*h-n*a),-(r*(a*f-h*l)-s*(i*f-n*l)+c*(i*h-n*a)),-(o*(l*y-f*v)-u*(a*y-h*v)+p*(a*f-h*l)),e*(l*y-f*v)-u*(i*y-n*v)+p*(i*f-n*l),-(e*(a*y-h*v)-o*(i*y-n*v)+p*(i*h-n*a)),e*(a*f-h*l)-o*(i*f-n*l)+u*(i*h-n*a),o*(c*y-f*d)-u*(s*y-h*d)+p*(s*f-h*c),-(e*(c*y-f*d)-u*(r*y-n*d)+p*(r*f-n*c)),e*(s*y-h*d)-o*(r*y-n*d)+p*(r*h-n*s),-(e*(s*f-h*c)-o*(r*f-n*c)+u*(r*h-n*s)),-(o*(c*v-l*d)-u*(s*v-a*d)+p*(s*l-a*c)),e*(c*v-l*d)-u*(r*v-i*d)+p*(r*l-i*c),-(e*(s*v-a*d)-o*(r*v-i*d)+p*(r*a-i*s)),e*(s*l-a*c)-o*(r*l-i*c)+u*(r*a-i*s))},determinant:function(){var t=this.val,e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],a=t[6],h=t[7],u=t[8],c=t[9],l=t[10],f=t[11],p=t[12],d=t[13],v=t[14],y=t[15];return(e*s-r*o)*(l*y-f*v)-(e*a-i*o)*(c*y-f*d)+(e*h-n*o)*(c*v-l*d)+(r*a-i*s)*(u*y-f*p)-(r*h-n*s)*(u*v-l*p)+(i*h-n*a)*(u*d-c*p)},multiply:function(t){var e=this.val,r=e[0],i=e[1],n=e[2],o=e[3],s=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=e[9],f=e[10],p=e[11],d=e[12],v=e[13],y=e[14],g=e[15],m=t.val,x=m[0],b=m[1],w=m[2],E=m[3];return e[0]=x*r+b*s+w*c+E*d,e[1]=x*i+b*a+w*l+E*v,e[2]=x*n+b*h+w*f+E*y,e[3]=x*o+b*u+w*p+E*g,x=m[4],b=m[5],w=m[6],E=m[7],e[4]=x*r+b*s+w*c+E*d,e[5]=x*i+b*a+w*l+E*v,e[6]=x*n+b*h+w*f+E*y,e[7]=x*o+b*u+w*p+E*g,x=m[8],b=m[9],w=m[10],E=m[11],e[8]=x*r+b*s+w*c+E*d,e[9]=x*i+b*a+w*l+E*v,e[10]=x*n+b*h+w*f+E*y,e[11]=x*o+b*u+w*p+E*g,x=m[12],b=m[13],w=m[14],E=m[15],e[12]=x*r+b*s+w*c+E*d,e[13]=x*i+b*a+w*l+E*v,e[14]=x*n+b*h+w*f+E*y,e[15]=x*o+b*u+w*p+E*g,this},multiplyLocal:function(t){var e=this.val,r=t.val;return this.setValues(e[0]*r[0]+e[1]*r[4]+e[2]*r[8]+e[3]*r[12],e[0]*r[1]+e[1]*r[5]+e[2]*r[9]+e[3]*r[13],e[0]*r[2]+e[1]*r[6]+e[2]*r[10]+e[3]*r[14],e[0]*r[3]+e[1]*r[7]+e[2]*r[11]+e[3]*r[15],e[4]*r[0]+e[5]*r[4]+e[6]*r[8]+e[7]*r[12],e[4]*r[1]+e[5]*r[5]+e[6]*r[9]+e[7]*r[13],e[4]*r[2]+e[5]*r[6]+e[6]*r[10]+e[7]*r[14],e[4]*r[3]+e[5]*r[7]+e[6]*r[11]+e[7]*r[15],e[8]*r[0]+e[9]*r[4]+e[10]*r[8]+e[11]*r[12],e[8]*r[1]+e[9]*r[5]+e[10]*r[9]+e[11]*r[13],e[8]*r[2]+e[9]*r[6]+e[10]*r[10]+e[11]*r[14],e[8]*r[3]+e[9]*r[7]+e[10]*r[11]+e[11]*r[15],e[12]*r[0]+e[13]*r[4]+e[14]*r[8]+e[15]*r[12],e[12]*r[1]+e[13]*r[5]+e[14]*r[9]+e[15]*r[13],e[12]*r[2]+e[13]*r[6]+e[14]*r[10]+e[15]*r[14],e[12]*r[3]+e[13]*r[7]+e[14]*r[11]+e[15]*r[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.val,i=e.val,n=r[0],o=r[4],s=r[8],a=r[12],h=r[1],u=r[5],c=r[9],l=r[13],f=r[2],p=r[6],d=r[10],v=r[14],y=r[3],g=r[7],m=r[11],x=r[15],b=i[0],w=i[4],E=i[8],T=i[12],S=i[1],_=i[5],O=i[9],P=i[13],M=i[2],A=i[6],L=i[10],C=i[14],R=i[3],k=i[7],F=i[11],I=i[15];return this.setValues(n*b+o*S+s*M+a*R,h*b+u*S+c*M+l*R,f*b+p*S+d*M+v*R,y*b+g*S+m*M+x*R,n*w+o*_+s*A+a*k,h*w+u*_+c*A+l*k,f*w+p*_+d*A+v*k,y*w+g*_+m*A+x*k,n*E+o*O+s*L+a*F,h*E+u*O+c*L+l*F,f*E+p*O+d*L+v*F,y*E+g*O+m*L+x*F,n*T+o*P+s*C+a*I,h*T+u*P+c*C+l*I,f*T+p*P+d*C+v*I,y*T+g*P+m*C+x*I)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,e,r){var i=this.val;return i[12]=i[0]*t+i[4]*e+i[8]*r+i[12],i[13]=i[1]*t+i[5]*e+i[9]*r+i[13],i[14]=i[2]*t+i[6]*e+i[10]*r+i[14],i[15]=i[3]*t+i[7]*e+i[11]*r+i[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,e,r){var i=this.val;return i[0]=i[0]*t,i[1]=i[1]*t,i[2]=i[2]*t,i[3]=i[3]*t,i[4]=i[4]*e,i[5]=i[5]*e,i[6]=i[6]*e,i[7]=i[7]*e,i[8]=i[8]*r,i[9]=i[9]*r,i[10]=i[10]*r,i[11]=i[11]*r,this},makeRotationAxis:function(t,e){var r=Math.cos(e),i=Math.sin(e),n=1-r,o=t.x,s=t.y,a=t.z,h=n*o,u=n*s;return this.setValues(h*o+r,h*s-i*a,h*a+i*s,0,h*s+i*a,u*s+r,u*a-i*o,0,h*a-i*s,u*a+i*o,n*a*a+r,0,0,0,0,1)},rotate:function(t,e){var r=this.val,i=e.x,n=e.y,s=e.z,a=Math.sqrt(i*i+n*n+s*s);if(Math.abs(a)<o)return this;i*=a=1/a,n*=a,s*=a;var h=Math.sin(t),u=Math.cos(t),c=1-u,l=r[0],f=r[1],p=r[2],d=r[3],v=r[4],y=r[5],g=r[6],m=r[7],x=r[8],b=r[9],w=r[10],E=r[11],T=r[12],S=r[13],_=r[14],O=r[15],P=i*i*c+u,M=n*i*c+s*h,A=s*i*c-n*h,L=i*n*c-s*h,C=n*n*c+u,R=s*n*c+i*h,k=i*s*c+n*h,F=n*s*c-i*h,I=s*s*c+u;return this.setValues(l*P+v*M+x*A,f*P+y*M+b*A,p*P+g*M+w*A,d*P+m*M+E*A,l*L+v*C+x*R,f*L+y*C+b*R,p*L+g*C+w*R,d*L+m*C+E*R,l*k+v*F+x*I,f*k+y*F+b*I,p*k+g*F+w*I,d*k+m*F+E*I,T,S,_,O)},rotateX:function(t){var e=this.val,r=Math.sin(t),i=Math.cos(t),n=e[4],o=e[5],s=e[6],a=e[7],h=e[8],u=e[9],c=e[10],l=e[11];return e[4]=n*i+h*r,e[5]=o*i+u*r,e[6]=s*i+c*r,e[7]=a*i+l*r,e[8]=h*i-n*r,e[9]=u*i-o*r,e[10]=c*i-s*r,e[11]=l*i-a*r,this},rotateY:function(t){var e=this.val,r=Math.sin(t),i=Math.cos(t),n=e[0],o=e[1],s=e[2],a=e[3],h=e[8],u=e[9],c=e[10],l=e[11];return e[0]=n*i-h*r,e[1]=o*i-u*r,e[2]=s*i-c*r,e[3]=a*i-l*r,e[8]=n*r+h*i,e[9]=o*r+u*i,e[10]=s*r+c*i,e[11]=a*r+l*i,this},rotateZ:function(t){var e=this.val,r=Math.sin(t),i=Math.cos(t),n=e[0],o=e[1],s=e[2],a=e[3],h=e[4],u=e[5],c=e[6],l=e[7];return e[0]=n*i+h*r,e[1]=o*i+u*r,e[2]=s*i+c*r,e[3]=a*i+l*r,e[4]=h*i-n*r,e[5]=u*i-o*r,e[6]=c*i-s*r,e[7]=l*i-a*r,this},fromRotationTranslation:function(t,e){var r=t.x,i=t.y,n=t.z,o=t.w,s=r+r,a=i+i,h=n+n,u=r*s,c=r*a,l=r*h,f=i*a,p=i*h,d=n*h,v=o*s,y=o*a,g=o*h;return this.setValues(1-(f+d),c+g,l-y,0,c-g,1-(u+d),p+v,0,l+y,p-v,1-(u+f),0,e.x,e.y,e.z,1)},fromQuat:function(t){var e=t.x,r=t.y,i=t.z,n=t.w,o=e+e,s=r+r,a=i+i,h=e*o,u=e*s,c=e*a,l=r*s,f=r*a,p=i*a,d=n*o,v=n*s,y=n*a;return this.setValues(1-(l+p),u+y,c-v,0,u-y,1-(h+p),f+d,0,c+v,f-d,1-(h+l),0,0,0,0,1)},frustum:function(t,e,r,i,n,o){var s=1/(e-t),a=1/(i-r),h=1/(n-o);return this.setValues(2*n*s,0,0,0,0,2*n*a,0,0,(e+t)*s,(i+r)*a,(o+n)*h,-1,0,0,o*n*2*h,0)},perspective:function(t,e,r,i){var n=1/Math.tan(t/2),o=1/(r-i);return this.setValues(n/e,0,0,0,0,n,0,0,0,0,(i+r)*o,-1,0,0,2*i*r*o,0)},perspectiveLH:function(t,e,r,i){return this.setValues(2*r/t,0,0,0,0,2*r/e,0,0,0,0,-i/(r-i),1,0,0,r*i/(r-i),0)},ortho:function(t,e,r,i,n,o){var s=t-e,a=r-i,h=n-o;return s=0===s?s:1/s,a=0===a?a:1/a,h=0===h?h:1/h,this.setValues(-2*s,0,0,0,0,-2*a,0,0,0,0,2*h,0,(t+e)*s,(i+r)*a,(o+n)*h,1)},lookAtRH:function(t,e,r){var i=this.val;return l.subVectors(t,e),0===l.getLengthSquared()&&(l.z=1),l.normalize(),u.crossVectors(r,l),0===u.getLengthSquared()&&(1===Math.abs(r.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),u.crossVectors(r,l)),u.normalize(),c.crossVectors(l,u),i[0]=u.x,i[1]=u.y,i[2]=u.z,i[4]=c.x,i[5]=c.y,i[6]=c.z,i[8]=l.x,i[9]=l.y,i[10]=l.z,this},lookAt:function(t,e,r){var i=t.x,n=t.y,s=t.z,a=r.x,h=r.y,u=r.z,c=e.x,l=e.y,f=e.z;if(Math.abs(i-c)<o&&Math.abs(n-l)<o&&Math.abs(s-f)<o)return this.identity();var p=i-c,d=n-l,v=s-f,y=1/Math.sqrt(p*p+d*d+v*v),g=h*(v*=y)-u*(d*=y),m=u*(p*=y)-a*v,x=a*d-h*p;(y=Math.sqrt(g*g+m*m+x*x))?(g*=y=1/y,m*=y,x*=y):(g=0,m=0,x=0);var b=d*x-v*m,w=v*g-p*x,E=p*m-d*g;return(y=Math.sqrt(b*b+w*w+E*E))?(b*=y=1/y,w*=y,E*=y):(b=0,w=0,E=0),this.setValues(g,b,p,0,m,w,d,0,x,E,v,0,-(g*i+m*n+x*s),-(b*i+w*n+E*s),-(p*i+d*n+v*s),1)},yawPitchRoll:function(t,e,r){this.zero(),a.zero(),h.zero();var i=this.val,n=a.val,o=h.val,s=Math.sin(r),u=Math.cos(r);return i[10]=1,i[15]=1,i[0]=u,i[1]=s,i[4]=-s,i[5]=u,s=Math.sin(e),u=Math.cos(e),n[0]=1,n[15]=1,n[5]=u,n[10]=u,n[9]=-s,n[6]=s,s=Math.sin(t),u=Math.cos(t),o[5]=1,o[15]=1,o[0]=u,o[2]=-s,o[8]=s,o[10]=u,this.multiplyLocal(a),this.multiplyLocal(h),this},setWorldMatrix:function(t,e,r,i,n){return this.yawPitchRoll(t.y,t.x,t.z),a.scaling(r.x,r.y,r.z),h.xyz(e.x,e.y,e.z),this.multiplyLocal(a),this.multiplyLocal(h),i&&this.multiplyLocal(i),n&&this.multiplyLocal(n),this},multiplyToMat4:function(t,e){var r=this.val,i=t.val,n=r[0],o=r[1],s=r[2],a=r[3],h=r[4],u=r[5],c=r[6],l=r[7],f=r[8],p=r[9],d=r[10],v=r[11],y=r[12],g=r[13],m=r[14],x=r[15],b=i[0],w=i[1],E=i[2],T=i[3],S=i[4],_=i[5],O=i[6],P=i[7],M=i[8],A=i[9],L=i[10],C=i[11],R=i[12],k=i[13],F=i[14],I=i[15];return e.setValues(b*n+w*h+E*f+T*y,w*o+w*u+E*p+T*g,E*s+w*c+E*d+T*m,T*a+w*l+E*v+T*x,S*n+_*h+O*f+P*y,S*o+_*u+O*p+P*g,S*s+_*c+O*d+P*m,S*a+_*l+O*v+P*x,M*n+A*h+L*f+C*y,M*o+A*u+L*p+C*g,M*s+A*c+L*d+C*m,M*a+A*l+L*v+C*x,R*n+k*h+F*f+I*y,R*o+k*u+F*p+I*g,R*s+k*c+F*d+I*m,R*a+k*l+F*v+I*x)},fromRotationXYTranslation:function(t,e,r){var i=e.x,n=e.y,o=e.z,s=Math.sin(t.x),a=Math.cos(t.x),h=Math.sin(t.y),u=Math.cos(t.y),c=i,l=n,f=o,p=-s,d=0-p*h,v=0-a*h,y=p*u,g=a*u;return r||(c=u*i+h*o,l=d*i+a*n+y*o,f=v*i+s*n+g*o),this.setValues(u,d,v,0,0,a,s,0,h,y,g,0,c,l,f,1)},getMaxScaleOnAxis:function(){var t=this.val,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,i))}}),a=new s,h=new s,u=new n,c=new n,l=new n;t.exports=s},86883:t=>{t.exports=function(t,e,r){return Math.min(t+e,r)}},50040:t=>{t.exports=function(t){var e=t.length;if(0===e)return 0;t.sort((function(t,e){return t-e}));var r=Math.floor(e/2);return e%2==0?(t[r]+t[r-1])/2:t[r]}},37204:t=>{t.exports=function(t,e,r){return Math.max(t-e,r)}},65201:t=>{t.exports=function(t,e,r,i){void 0===r&&(r=e+1);var n=(t-e)/(r-e);return n>1?void 0!==i?(n=(i-t)/(i-r))<0&&(n=0):n=1:n<0&&(n=0),n}},15746:(t,e,r)=>{var i=r(83419),n=r(94434),o=r(29747),s=r(25836),a=1e-6,h=new Int8Array([1,2,0]),u=new Float32Array([0,0,0]),c=new s(1,0,0),l=new s(0,1,0),f=new s,p=new n,d=new i({initialize:function(t,e,r,i){this.onChangeCallback=o,this.set(t,e,r,i)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,e,r,i,n){return void 0===n&&(n=!0),"object"==typeof t?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=e||0,this._z=r||0,this._w=i||0),n&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){var t=this.x,e=this.y,r=this.z,i=this.w;return Math.sqrt(t*t+e*e+r*r+i*i)},lengthSq:function(){var t=this.x,e=this.y,r=this.z,i=this.w;return t*t+e*e+r*r+i*i},normalize:function(){var t=this.x,e=this.y,r=this.z,i=this.w,n=t*t+e*e+r*r+i*i;return n>0&&(n=1/Math.sqrt(n),this._x=t*n,this._y=e*n,this._z=r*n,this._w=i*n),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var r=this.x,i=this.y,n=this.z,o=this.w;return this.set(r+e*(t.x-r),i+e*(t.y-i),n+e*(t.z-n),o+e*(t.w-o))},rotationTo:function(t,e){var r=t.x*e.x+t.y*e.y+t.z*e.z;return r<-.999999?(f.copy(c).cross(t).length()<a&&f.copy(l).cross(t),f.normalize(),this.setAxisAngle(f,Math.PI)):r>.999999?this.set(0,0,0,1):(f.copy(t).cross(e),this._x=f.x,this._y=f.y,this._z=f.z,this._w=1+r,this.normalize())},setAxes:function(t,e,r){var i=p.val;return i[0]=e.x,i[3]=e.y,i[6]=e.z,i[1]=r.x,i[4]=r.y,i[7]=r.z,i[2]=-t.x,i[5]=-t.y,i[8]=-t.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,e){e*=.5;var r=Math.sin(e);return this.set(r*t.x,r*t.y,r*t.z,Math.cos(e))},multiply:function(t){var e=this.x,r=this.y,i=this.z,n=this.w,o=t.x,s=t.y,a=t.z,h=t.w;return this.set(e*h+n*o+r*a-i*s,r*h+n*s+i*o-e*a,i*h+n*a+e*s-r*o,n*h-e*o-r*s-i*a)},slerp:function(t,e){var r=this.x,i=this.y,n=this.z,o=this.w,s=t.x,h=t.y,u=t.z,c=t.w,l=r*s+i*h+n*u+o*c;l<0&&(l=-l,s=-s,h=-h,u=-u,c=-c);var f=1-e,p=e;if(1-l>a){var d=Math.acos(l),v=Math.sin(d);f=Math.sin((1-e)*d)/v,p=Math.sin(e*d)/v}return this.set(f*r+p*s,f*i+p*h,f*n+p*u,f*o+p*c)},invert:function(){var t=this.x,e=this.y,r=this.z,i=this.w,n=t*t+e*e+r*r+i*i,o=n?1/n:0;return this.set(-t*o,-e*o,-r*o,i*o)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;var e=this.x,r=this.y,i=this.z,n=this.w,o=Math.sin(t),s=Math.cos(t);return this.set(e*s+n*o,r*s+i*o,i*s-r*o,n*s-e*o)},rotateY:function(t){t*=.5;var e=this.x,r=this.y,i=this.z,n=this.w,o=Math.sin(t),s=Math.cos(t);return this.set(e*s-i*o,r*s+n*o,i*s+e*o,n*s-r*o)},rotateZ:function(t){t*=.5;var e=this.x,r=this.y,i=this.z,n=this.w,o=Math.sin(t),s=Math.cos(t);return this.set(e*s+r*o,r*s-e*o,i*s+n*o,n*s-i*o)},calculateW:function(){var t=this.x,e=this.y,r=this.z;return this.w=-Math.sqrt(1-t*t-e*e-r*r),this},setFromEuler:function(t,e){var r=t.x/2,i=t.y/2,n=t.z/2,o=Math.cos(r),s=Math.cos(i),a=Math.cos(n),h=Math.sin(r),u=Math.sin(i),c=Math.sin(n);switch(t.order){case"XYZ":this.set(h*s*a+o*u*c,o*u*a-h*s*c,o*s*c+h*u*a,o*s*a-h*u*c,e);break;case"YXZ":this.set(h*s*a+o*u*c,o*u*a-h*s*c,o*s*c-h*u*a,o*s*a+h*u*c,e);break;case"ZXY":this.set(h*s*a-o*u*c,o*u*a+h*s*c,o*s*c+h*u*a,o*s*a-h*u*c,e);break;case"ZYX":this.set(h*s*a-o*u*c,o*u*a+h*s*c,o*s*c-h*u*a,o*s*a+h*u*c,e);break;case"YZX":this.set(h*s*a+o*u*c,o*u*a+h*s*c,o*s*c-h*u*a,o*s*a-h*u*c,e);break;case"XZY":this.set(h*s*a-o*u*c,o*u*a-h*s*c,o*s*c+h*u*a,o*s*a+h*u*c,e)}return this},setFromRotationMatrix:function(t){var e,r=t.val,i=r[0],n=r[4],o=r[8],s=r[1],a=r[5],h=r[9],u=r[2],c=r[6],l=r[10],f=i+a+l;return f>0?(e=.5/Math.sqrt(f+1),this.set((c-h)*e,(o-u)*e,(s-n)*e,.25/e)):i>a&&i>l?(e=2*Math.sqrt(1+i-a-l),this.set(.25*e,(n+s)/e,(o+u)/e,(c-h)/e)):a>l?(e=2*Math.sqrt(1+a-i-l),this.set((n+s)/e,.25*e,(h+c)/e,(o-u)/e)):(e=2*Math.sqrt(1+l-i-a),this.set((o+u)/e,(h+c)/e,.25*e,(s-n)/e)),this},fromMat3:function(t){var e,r=t.val,i=r[0]+r[4]+r[8];if(i>0)e=Math.sqrt(i+1),this.w=.5*e,e=.5/e,this._x=(r[7]-r[5])*e,this._y=(r[2]-r[6])*e,this._z=(r[3]-r[1])*e;else{var n=0;r[4]>r[0]&&(n=1),r[8]>r[3*n+n]&&(n=2);var o=h[n],s=h[o];e=Math.sqrt(r[3*n+n]-r[3*o+o]-r[3*s+s]+1),u[n]=.5*e,e=.5/e,u[o]=(r[3*o+n]+r[3*n+o])*e,u[s]=(r[3*s+n]+r[3*n+s])*e,this._x=u[0],this._y=u[1],this._z=u[2],this._w=(r[3*s+o]-r[3*o+s])*e}return this.onChangeCallback(this),this}});t.exports=d},43396:(t,e,r)=>{var i=r(36383);t.exports=function(t){return t*i.RAD_TO_DEG}},74362:t=>{t.exports=function(t,e){void 0===e&&(e=1);var r=2*Math.random()*Math.PI;return t.x=Math.cos(r)*e,t.y=Math.sin(r)*e,t}},60706:t=>{t.exports=function(t,e){void 0===e&&(e=1);var r=2*Math.random()*Math.PI,i=2*Math.random()-1,n=Math.sqrt(1-i*i)*e;return t.x=Math.cos(r)*n,t.y=Math.sin(r)*n,t.z=i*e,t}},67421:t=>{t.exports=function(t,e){return void 0===e&&(e=1),t.x=(2*Math.random()-1)*e,t.y=(2*Math.random()-1)*e,t.z=(2*Math.random()-1)*e,t.w=(2*Math.random()-1)*e,t}},36305:t=>{t.exports=function(t,e){var r=t.x,i=t.y;return t.x=r*Math.cos(e)-i*Math.sin(e),t.y=r*Math.sin(e)+i*Math.cos(e),t}},11520:t=>{t.exports=function(t,e,r,i){var n=Math.cos(i),o=Math.sin(i),s=t.x-e,a=t.y-r;return t.x=s*n-a*o+e,t.y=s*o+a*n+r,t}},1163:t=>{t.exports=function(t,e,r,i,n){var o=i+Math.atan2(t.y-r,t.x-e);return t.x=e+n*Math.cos(o),t.y=r+n*Math.sin(o),t}},70336:t=>{t.exports=function(t,e,r,i,n){return t.x=e+n*Math.cos(i),t.y=r+n*Math.sin(i),t}},72678:(t,e,r)=>{var i=r(25836),n=r(37867),o=r(15746),s=new n,a=new o,h=new i;t.exports=function(t,e,r){return a.setAxisAngle(e,r),s.fromRotationTranslation(a,h.set(0,0,0)),t.transformMat4(s)}},2284:t=>{t.exports=function(t){return t>0?Math.ceil(t):Math.floor(t)}},41013:t=>{t.exports=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=10);var i=Math.pow(r,-e);return Math.round(t*i)/i}},16922:t=>{t.exports=function(t,e,r,i){void 0===e&&(e=1),void 0===r&&(r=1),void 0===i&&(i=1),i*=Math.PI/t;for(var n=[],o=[],s=0;s<t;s++)e+=(r-=e*i)*i,n[s]=r,o[s]=e;return{sin:o,cos:n,length:t}}},7602:t=>{t.exports=function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e))*t*(3-2*t)}},54261:t=>{t.exports=function(t,e,r){return(t=Math.max(0,Math.min(1,(t-e)/(r-e))))*t*t*(t*(6*t-15)+10)}},44408:(t,e,r)=>{var i=r(26099);t.exports=function(t,e,r,n){void 0===n&&(n=new i);var o=0,s=0;return t>0&&t<=e*r&&(o=t>e-1?t-(s=Math.floor(t/e))*e:t),n.set(o,s)}},85955:(t,e,r)=>{var i=r(26099);t.exports=function(t,e,r,n,o,s,a,h){void 0===h&&(h=new i);var u=Math.sin(o),c=Math.cos(o),l=c*s,f=u*s,p=-u*a,d=c*a,v=1/(l*d+p*-f);return h.x=d*v*t+-p*v*e+(n*p-r*d)*v,h.y=l*v*e+-f*v*t+(-n*l+r*f)*v,h}},26099:(t,e,r)=>{var i=r(83419),n=r(43855),o=new i({initialize:function(t,e){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===e&&(e=t),this.x=t||0,this.y=e||0)},clone:function(){return new o(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setTo:function(t,e){return this.set(t,e)},setToPolar:function(t,e){return null==e&&(e=1),this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,e){return n(this.x,t.x,e)&&n(this.y,t.y,e)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var e=t.x-this.x,r=t.y-this.y;return Math.sqrt(e*e+r*r)},distanceSq:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,e=this.y;return t*t+e*e},normalize:function(){var t=this.x,e=this.y,r=t*t+e*e;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,e){void 0===e&&(e=0);var r=this.x,i=this.y;return this.x=r+e*(t.x-r),this.y=i+e*(t.y-i),this},transformMat3:function(t){var e=this.x,r=this.y,i=t.val;return this.x=i[0]*e+i[3]*r+i[6],this.y=i[1]*e+i[4]*r+i[7],this},transformMat4:function(t){var e=this.x,r=this.y,i=t.val;return this.x=i[0]*e+i[4]*r+i[12],this.y=i[1]*e+i[5]*r+i[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var e=this.length();return e&&e>t&&this.scale(t/e),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e*this.x-r*this.y,r*this.x+e*this.y)},project:function(t){var e=this.dot(t)/t.dot(t);return this.copy(t).scale(e)}});o.ZERO=new o,o.RIGHT=new o(1,0),o.LEFT=new o(-1,0),o.UP=new o(0,-1),o.DOWN=new o(0,1),o.ONE=new o(1,1),t.exports=o},25836:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e,r){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new i(this.x,this.y,this.z)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},crossVectors:function(t,e){var r=t.x,i=t.y,n=t.z,o=e.x,s=e.y,a=e.z;return this.x=i*a-n*s,this.y=n*o-r*a,this.z=r*s-i*o,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,e,r){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=r||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,e){return this.fromArray(t.val,4*e)},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var e=t.x-this.x,r=t.y-this.y,i=t.z-this.z||0;return Math.sqrt(e*e+r*r+i*i)},distanceSq:function(t){var e=t.x-this.x,r=t.y-this.y,i=t.z-this.z||0;return e*e+r*r+i*i},length:function(){var t=this.x,e=this.y,r=this.z;return Math.sqrt(t*t+e*e+r*r)},lengthSq:function(){var t=this.x,e=this.y,r=this.z;return t*t+e*e+r*r},normalize:function(){var t=this.x,e=this.y,r=this.z,i=t*t+e*e+r*r;return i>0&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i,this.z=r*i),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var e=this.x,r=this.y,i=this.z,n=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*n-e*s,this.z=e*o-r*n,this},lerp:function(t,e){void 0===e&&(e=0);var r=this.x,i=this.y,n=this.z;return this.x=r+e*(t.x-r),this.y=i+e*(t.y-i),this.z=n+e*(t.z-n),this},applyMatrix3:function(t){var e=this.x,r=this.y,i=this.z,n=t.val;return this.x=n[0]*e+n[3]*r+n[6]*i,this.y=n[1]*e+n[4]*r+n[7]*i,this.z=n[2]*e+n[5]*r+n[8]*i,this},applyMatrix4:function(t){var e=this.x,r=this.y,i=this.z,n=t.val,o=1/(n[3]*e+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*e+n[4]*r+n[8]*i+n[12])*o,this.y=(n[1]*e+n[5]*r+n[9]*i+n[13])*o,this.z=(n[2]*e+n[6]*r+n[10]*i+n[14])*o,this},transformMat3:function(t){var e=this.x,r=this.y,i=this.z,n=t.val;return this.x=e*n[0]+r*n[3]+i*n[6],this.y=e*n[1]+r*n[4]+i*n[7],this.z=e*n[2]+r*n[5]+i*n[8],this},transformMat4:function(t){var e=this.x,r=this.y,i=this.z,n=t.val;return this.x=n[0]*e+n[4]*r+n[8]*i+n[12],this.y=n[1]*e+n[5]*r+n[9]*i+n[13],this.z=n[2]*e+n[6]*r+n[10]*i+n[14],this},transformCoordinates:function(t){var e=this.x,r=this.y,i=this.z,n=t.val,o=e*n[0]+r*n[4]+i*n[8]+n[12],s=e*n[1]+r*n[5]+i*n[9]+n[13],a=e*n[2]+r*n[6]+i*n[10]+n[14],h=e*n[3]+r*n[7]+i*n[11]+n[15];return this.x=o/h,this.y=s/h,this.z=a/h,this},transformQuat:function(t){var e=this.x,r=this.y,i=this.z,n=t.x,o=t.y,s=t.z,a=t.w,h=a*e+o*i-s*r,u=a*r+s*e-n*i,c=a*i+n*r-o*e,l=-n*e-o*r-s*i;return this.x=h*a+l*-n+u*-s-c*-o,this.y=u*a+l*-o+c*-n-h*-s,this.z=c*a+l*-s+h*-o-u*-n,this},project:function(t){var e=this.x,r=this.y,i=this.z,n=t.val,o=n[0],s=n[1],a=n[2],h=n[3],u=n[4],c=n[5],l=n[6],f=n[7],p=n[8],d=n[9],v=n[10],y=n[11],g=n[12],m=n[13],x=n[14],b=1/(e*h+r*f+i*y+n[15]);return this.x=(e*o+r*u+i*p+g)*b,this.y=(e*s+r*c+i*d+m)*b,this.z=(e*a+r*l+i*v+x)*b,this},projectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unprojectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unproject:function(t,e){var r=t.x,i=t.y,n=t.z,o=t.w,s=this.x-r,a=o-this.y-1-i,h=this.z;return this.x=2*s/n-1,this.y=2*a/o-1,this.z=2*h-1,this.project(e)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});i.ZERO=new i,i.RIGHT=new i(1,0,0),i.LEFT=new i(-1,0,0),i.UP=new i(0,-1,0),i.DOWN=new i(0,1,0),i.FORWARD=new i(0,0,1),i.BACK=new i(0,0,-1),i.ONE=new i(1,1,1),t.exports=i},61369:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e,r,i){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=r||0,this.w=i||0)},clone:function(){return new i(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,e,r,i){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=r||0,this.w=i||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,e=this.y,r=this.z,i=this.w;return Math.sqrt(t*t+e*e+r*r+i*i)},lengthSq:function(){var t=this.x,e=this.y,r=this.z,i=this.w;return t*t+e*e+r*r+i*i},normalize:function(){var t=this.x,e=this.y,r=this.z,i=this.w,n=t*t+e*e+r*r+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=e*n,this.z=r*n,this.w=i*n),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var r=this.x,i=this.y,n=this.z,o=this.w;return this.x=r+e*(t.x-r),this.y=i+e*(t.y-i),this.z=n+e*(t.z-n),this.w=o+e*(t.w-o),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var e=t.x-this.x,r=t.y-this.y,i=t.z-this.z||0,n=t.w-this.w||0;return Math.sqrt(e*e+r*r+i*i+n*n)},distanceSq:function(t){var e=t.x-this.x,r=t.y-this.y,i=t.z-this.z||0,n=t.w-this.w||0;return e*e+r*r+i*i+n*n},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var e=this.x,r=this.y,i=this.z,n=this.w,o=t.val;return this.x=o[0]*e+o[4]*r+o[8]*i+o[12]*n,this.y=o[1]*e+o[5]*r+o[9]*i+o[13]*n,this.z=o[2]*e+o[6]*r+o[10]*i+o[14]*n,this.w=o[3]*e+o[7]*r+o[11]*i+o[15]*n,this},transformQuat:function(t){var e=this.x,r=this.y,i=this.z,n=t.x,o=t.y,s=t.z,a=t.w,h=a*e+o*i-s*r,u=a*r+s*e-n*i,c=a*i+n*r-o*e,l=-n*e-o*r-s*i;return this.x=h*a+l*-n+u*-s-c*-o,this.y=u*a+l*-o+c*-n-h*-s,this.z=c*a+l*-s+h*-o-u*-n,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});i.prototype.sub=i.prototype.subtract,i.prototype.mul=i.prototype.multiply,i.prototype.div=i.prototype.divide,i.prototype.dist=i.prototype.distance,i.prototype.distSq=i.prototype.distanceSq,i.prototype.len=i.prototype.length,i.prototype.lenSq=i.prototype.lengthSq,t.exports=i},60417:t=>{t.exports=function(t,e,r){return Math.abs(t-e)<=r}},15994:t=>{t.exports=function(t,e,r){var i=r-e;return e+((t-e)%i+i)%i}},31040:t=>{t.exports=function(t,e,r,i){return Math.atan2(i-e,r-t)}},55495:t=>{t.exports=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},128:t=>{t.exports=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}},41273:t=>{t.exports=function(t,e,r,i){return Math.atan2(r-t,i-e)}},1432:(t,e,r)=>{var i=r(36383);t.exports=function(t){return t>Math.PI&&(t-=i.PI2),Math.abs(((t+i.TAU)%i.PI2-i.PI2)%i.PI2)}},12407:t=>{t.exports=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},53993:(t,e,r)=>{var i=r(99472);t.exports=function(){return i(-Math.PI,Math.PI)}},86564:(t,e,r)=>{var i=r(99472);t.exports=function(){return i(-180,180)}},90154:(t,e,r)=>{var i=r(12407);t.exports=function(t){return i(t+Math.PI)}},48736:(t,e,r)=>{var i=r(36383);t.exports=function(t,e,r){return void 0===r&&(r=.05),t===e||(Math.abs(e-t)<=r||Math.abs(e-t)>=i.PI2-r?t=e:(Math.abs(e-t)>Math.PI&&(e<t?e+=i.PI2:e-=i.PI2),e>t?t+=r:e<t&&(t-=r))),t}},61430:t=>{t.exports=function(t,e){var r=e-t;return 0===r?0:r-360*Math.floor((r- -180)/360)}},86554:(t,e,r)=>{var i=r(15994);t.exports=function(t){return i(t,-Math.PI,Math.PI)}},30954:(t,e,r)=>{var i=r(15994);t.exports=function(t){return i(t,-180,180)}},25588:(t,e,r)=>{t.exports={Between:r(31040),BetweenPoints:r(55495),BetweenPointsY:r(128),BetweenY:r(41273),CounterClockwise:r(1432),Normalize:r(12407),Random:r(53993),RandomDegrees:r(86564),Reverse:r(90154),RotateTo:r(48736),ShortestBetween:r(61430),Wrap:r(86554),WrapDegrees:r(30954)}},36383:t=>{var e={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=e},20339:t=>{t.exports=function(t,e,r,i){var n=t-r,o=e-i;return Math.sqrt(n*n+o*o)}},52816:t=>{t.exports=function(t,e){var r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}},64559:t=>{t.exports=function(t,e){var r=t.x-e.x,i=t.y-e.y;return r*r+i*i}},82340:t=>{t.exports=function(t,e,r,i){return Math.max(Math.abs(t-r),Math.abs(e-i))}},14390:t=>{t.exports=function(t,e,r,i,n){return void 0===n&&(n=2),Math.sqrt(Math.pow(r-t,n)+Math.pow(i-e,n))}},2243:t=>{t.exports=function(t,e,r,i){return Math.abs(t-r)+Math.abs(e-i)}},89774:t=>{t.exports=function(t,e,r,i){var n=t-r,o=e-i;return n*n+o*o}},50994:(t,e,r)=>{t.exports={Between:r(20339),BetweenPoints:r(52816),BetweenPointsSquared:r(64559),Chebyshev:r(82340),Power:r(14390),Snake:r(2243),Squared:r(89774)}},62640:(t,e,r)=>{var i=r(54178),n=r(41521),o=r(79980),s=r(85433),a=r(99140),h=r(48857),u=r(81596),c=r(59133),l=r(98516),f=r(35248),p=r(82500),d=r(49752);t.exports={Power0:u,Power1:c.Out,Power2:s.Out,Power3:l.Out,Power4:f.Out,Linear:u,Quad:c.Out,Cubic:s.Out,Quart:l.Out,Quint:f.Out,Sine:p.Out,Expo:h.Out,Circ:o.Out,Elastic:a.Out,Back:i.Out,Bounce:n.Out,Stepped:d,"Quad.easeIn":c.In,"Cubic.easeIn":s.In,"Quart.easeIn":l.In,"Quint.easeIn":f.In,"Sine.easeIn":p.In,"Expo.easeIn":h.In,"Circ.easeIn":o.In,"Elastic.easeIn":a.In,"Back.easeIn":i.In,"Bounce.easeIn":n.In,"Quad.easeOut":c.Out,"Cubic.easeOut":s.Out,"Quart.easeOut":l.Out,"Quint.easeOut":f.Out,"Sine.easeOut":p.Out,"Expo.easeOut":h.Out,"Circ.easeOut":o.Out,"Elastic.easeOut":a.Out,"Back.easeOut":i.Out,"Bounce.easeOut":n.Out,"Quad.easeInOut":c.InOut,"Cubic.easeInOut":s.InOut,"Quart.easeInOut":l.InOut,"Quint.easeInOut":f.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":h.InOut,"Circ.easeInOut":o.InOut,"Elastic.easeInOut":a.InOut,"Back.easeInOut":i.InOut,"Bounce.easeInOut":n.InOut}},1639:t=>{t.exports=function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)}},50099:t=>{t.exports=function(t,e){void 0===e&&(e=1.70158);var r=1.525*e;return(t*=2)<1?t*t*((r+1)*t-r)*.5:.5*((t-=2)*t*((r+1)*t+r)+2)}},41286:t=>{t.exports=function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1}},54178:(t,e,r)=>{t.exports={In:r(1639),Out:r(41286),InOut:r(50099)}},59590:t=>{t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},41788:t=>{t.exports=function(t){var e=!1;return t<.5?(t=1-2*t,e=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}},69905:t=>{t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},41521:(t,e,r)=>{t.exports={In:r(59590),Out:r(69905),InOut:r(41788)}},91861:t=>{t.exports=function(t){return 1-Math.sqrt(1-t*t)}},4177:t=>{t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},57512:t=>{t.exports=function(t){return Math.sqrt(1- --t*t)}},79980:(t,e,r)=>{t.exports={In:r(91861),Out:r(57512),InOut:r(4177)}},51150:t=>{t.exports=function(t){return t*t*t}},82820:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},35033:t=>{t.exports=function(t){return--t*t*t+1}},85433:(t,e,r)=>{t.exports={In:r(51150),Out:r(35033),InOut:r(82820)}},69965:t=>{t.exports=function(t,e,r){if(void 0===e&&(e=.1),void 0===r&&(r=.1),0===t)return 0;if(1===t)return 1;var i=r/4;return e<1?e=1:i=r*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/r)}},50665:t=>{t.exports=function(t,e,r){if(void 0===e&&(e=.1),void 0===r&&(r=.1),0===t)return 0;if(1===t)return 1;var i=r/4;return e<1?e=1:i=r*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/r)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/r)*.5+1}},7744:t=>{t.exports=function(t,e,r){if(void 0===e&&(e=.1),void 0===r&&(r=.1),0===t)return 0;if(1===t)return 1;var i=r/4;return e<1?e=1:i=r*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/r)+1}},99140:(t,e,r)=>{t.exports={In:r(69965),Out:r(7744),InOut:r(50665)}},24590:t=>{t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},87844:t=>{t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},89433:t=>{t.exports=function(t){return 1-Math.pow(2,-10*t)}},48857:(t,e,r)=>{t.exports={In:r(24590),Out:r(89433),InOut:r(87844)}},48820:(t,e,r)=>{t.exports={Back:r(54178),Bounce:r(41521),Circular:r(79980),Cubic:r(85433),Elastic:r(99140),Expo:r(48857),Linear:r(81596),Quadratic:r(59133),Quartic:r(98516),Quintic:r(35248),Sine:r(82500),Stepped:r(49752)}},7147:t=>{t.exports=function(t){return t}},81596:(t,e,r)=>{t.exports=r(7147)},34826:t=>{t.exports=function(t){return t*t}},20544:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},92029:t=>{t.exports=function(t){return t*(2-t)}},59133:(t,e,r)=>{t.exports={In:r(34826),Out:r(92029),InOut:r(20544)}},64413:t=>{t.exports=function(t){return t*t*t*t}},78137:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},45840:t=>{t.exports=function(t){return 1- --t*t*t*t}},98516:(t,e,r)=>{t.exports={In:r(64413),Out:r(45840),InOut:r(78137)}},87745:t=>{t.exports=function(t){return t*t*t*t*t}},16509:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},17868:t=>{t.exports=function(t){return--t*t*t*t*t+1}},35248:(t,e,r)=>{t.exports={In:r(87745),Out:r(17868),InOut:r(16509)}},80461:t=>{t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},34025:t=>{t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},52768:t=>{t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},82500:(t,e,r)=>{t.exports={In:r(80461),Out:r(52768),InOut:r(34025)}},72251:t=>{t.exports=function(t,e){return void 0===e&&(e=1),t<=0?0:t>=1?1:1/e*(1+(e*t|0))}},49752:(t,e,r)=>{t.exports=r(72251)},75698:t=>{t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}},43855:t=>{t.exports=function(t,e,r){return void 0===r&&(r=1e-4),Math.abs(t-e)<r}},25777:t=>{t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}},5470:t=>{t.exports=function(t,e,r){return void 0===r&&(r=1e-4),t>e-r}},94977:t=>{t.exports=function(t,e,r){return void 0===r&&(r=1e-4),t<e+r}},48379:(t,e,r)=>{t.exports={Ceil:r(75698),Equal:r(43855),Floor:r(25777),GreaterThan:r(5470),LessThan:r(94977)}},75508:(t,e,r)=>{var i=r(36383),n=r(79291),o={Angle:r(25588),Distance:r(50994),Easing:r(48820),Fuzzy:r(48379),Interpolation:r(38289),Pow2:r(49001),Snap:r(73697),RandomDataGenerator:r(28453),Average:r(53307),Bernstein:r(85710),Between:r(30976),CatmullRom:r(87842),CeilTo:r(26302),Clamp:r(45319),DegToRad:r(39506),Difference:r(61241),Euler:r(38857),Factorial:r(6411),FloatBetween:r(99472),FloorTo:r(77623),FromPercent:r(62945),GetSpeed:r(38265),IsEven:r(78702),IsEvenStrict:r(94883),Linear:r(28915),LinearXY:r(94908),MaxAdd:r(86883),Median:r(50040),MinSub:r(37204),Percent:r(65201),RadToDeg:r(43396),RandomXY:r(74362),RandomXYZ:r(60706),RandomXYZW:r(67421),Rotate:r(36305),RotateAround:r(11520),RotateAroundDistance:r(1163),RotateTo:r(70336),RoundAwayFromZero:r(2284),RoundTo:r(41013),SinCosTableGenerator:r(16922),SmootherStep:r(54261),SmoothStep:r(7602),ToXY:r(44408),TransformXY:r(85955),Within:r(60417),Wrap:r(15994),Vector2:r(26099),Vector3:r(25836),Vector4:r(61369),Matrix3:r(94434),Matrix4:r(37867),Quaternion:r(15746),RotateVec3:r(72678)};o=n(!1,o,i),t.exports=o},89318:(t,e,r)=>{var i=r(85710);t.exports=function(t,e){for(var r=0,n=t.length-1,o=0;o<=n;o++)r+=Math.pow(1-e,n-o)*Math.pow(e,o)*t[o]*i(n,o);return r}},77259:(t,e,r)=>{var i=r(87842);t.exports=function(t,e){var r=t.length-1,n=r*e,o=Math.floor(n);return t[0]===t[r]?(e<0&&(o=Math.floor(n=r*(1+e))),i(n-o,t[(o-1+r)%r],t[o],t[(o+1)%r],t[(o+2)%r])):e<0?t[0]-(i(-n,t[0],t[0],t[1],t[1])-t[0]):e>1?t[r]-(i(n-r,t[r],t[r],t[r-1],t[r-1])-t[r]):i(n-o,t[o?o-1:0],t[o],t[r<o+1?r:o+1],t[r<o+2?r:o+2])}},36316:t=>{t.exports=function(t,e,r,i,n){return function(t,e){var r=1-t;return r*r*r*e}(t,e)+function(t,e){var r=1-t;return 3*r*r*t*e}(t,r)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,n)}},28392:(t,e,r)=>{var i=r(28915);t.exports=function(t,e){var r=t.length-1,n=r*e,o=Math.floor(n);return e<0?i(t[0],t[1],n):e>1?i(t[r],t[r-1],r-n):i(t[o],t[o+1>r?r:o+1],n-o)}},32112:t=>{t.exports=function(t,e,r,i){return function(t,e){var r=1-t;return r*r*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,r)+function(t,e){return t*t*e}(t,i)}},47235:(t,e,r)=>{var i=r(7602);t.exports=function(t,e,r){return e+(r-e)*i(t,0,1)}},50178:(t,e,r)=>{var i=r(54261);t.exports=function(t,e,r){return e+(r-e)*i(t,0,1)}},38289:(t,e,r)=>{t.exports={Bezier:r(89318),CatmullRom:r(77259),CubicBezier:r(36316),Linear:r(28392),QuadraticBezier:r(32112),SmoothStep:r(47235),SmootherStep:r(50178)}},98439:t=>{t.exports=function(t){var e=Math.log(t)/.6931471805599453;return 1<<Math.ceil(e)}},50030:t=>{t.exports=function(t,e){return t>0&&!(t&t-1)&&e>0&&!(e&e-1)}},81230:t=>{t.exports=function(t){return t>0&&!(t&t-1)}},49001:(t,e,r)=>{t.exports={GetNext:r(98439),IsSize:r(50030),IsValue:r(81230)}},28453:(t,e,r)=>{var i=new(r(83419))({initialize:function(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var e,r=this.n;t=t.toString();for(var i=0;i<t.length;i++)e=.02519603282416938*(r+=t.charCodeAt(i)),e-=r=e>>>0,r=(e*=r)>>>0,r+=4294967296*(e-=r);return this.n=r,2.3283064365386963e-10*(r>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var e=0;e<t.length&&null!=t[e];e++){var r=t[e];this.s0-=this.hash(r),this.s0+=~~(this.s0<0),this.s1-=this.hash(r),this.s1+=~~(this.s1<0),this.s2-=this.hash(r),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},between:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-.5)+.5)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(this.frac()*(e+1)),i=t[r];t[r]=t[e],t[e]=i}return t}});t.exports=i},63448:t=>{t.exports=function(t,e,r,i){return void 0===r&&(r=0),0===e?t:(t-=r,t=e*Math.ceil(t/e),i?(r+t)/e:r+t)}},56583:t=>{t.exports=function(t,e,r,i){return void 0===r&&(r=0),0===e?t:(t-=r,t=e*Math.floor(t/e),i?(r+t)/e:r+t)}},77720:t=>{t.exports=function(t,e,r,i){return void 0===r&&(r=0),0===e?t:(t-=r,t=e*Math.round(t/e),i?(r+t)/e:r+t)}},73697:(t,e,r)=>{t.exports={Ceil:r(63448),Floor:r(56583),To:r(77720)}},85454:(t,e,r)=>{r(63595);var i=r(8054),n=r(79291),o={Actions:r(61061),Animations:r(60421),BlendModes:r(10312),Cache:r(83388),Cameras:r(26638),Core:r(42857),Class:r(83419),Create:r(15822),Curves:r(25410),Data:r(44965),Display:r(27460),DOM:r(84902),Events:r(93055),FX:r(66064),Game:r(50127),GameObjects:r(77856),Geom:r(55738),Input:r(14350),Loader:r(57777),Math:r(75508),Physics:r(44563),Plugins:r(18922),Renderer:r(36909),Scale:r(93364),ScaleModes:r(29795),Scene:r(97482),Scenes:r(62194),Structs:r(41392),Textures:r(27458),Tilemaps:r(62501),Time:r(90291),Tweens:r(43066),Utils:r(91799)};o.Sound=r(23717),o=n(!1,o,i),t.exports=o,r.g.Phaser=o},71289:(t,e,r)=>{var i=r(83419),n=r(92209),o=r(88571),s=new i({Extends:o,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Collision,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Pushable,n.Size,n.Velocity],initialize:function(t,e,r,i,n){o.call(this,t,e,r,i,n),this.body=null}});t.exports=s},86689:(t,e,r)=>{var i=r(83419),n=r(39506),o=r(20339),s=r(89774),a=r(66022),h=r(95540),u=r(46975),c=r(72441),l=r(47956),f=r(37277),p=r(44594),d=r(26099),v=r(82248),y=new i({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,t.sys.events.once(p.BOOT,this.boot,this),t.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new v(this.scene,this.config),this.add=new a(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new v(this.scene,this.config),this.add=new a(this.world));var t=this.systems.events;h(this.config,"customUpdate",!1)||t.on(p.UPDATE,this.world.update,this.world),t.on(p.POST_UPDATE,this.world.postUpdate,this.world),t.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return u(h(e,"arcade",{}),h(t,"arcade",{}))},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(t,e,r,i,n){return void 0===r&&(r=null),void 0===i&&(i=null),void 0===n&&(n=r),this.world.collideObjects(t,e,r,i,n,!0)},collide:function(t,e,r,i,n){return void 0===r&&(r=null),void 0===i&&(i=null),void 0===n&&(n=r),this.world.collideObjects(t,e,r,i,n,!1)},collideTiles:function(t,e,r,i,n){return this.world.collideTiles(t,e,r,i,n)},overlapTiles:function(t,e,r,i,n){return this.world.overlapTiles(t,e,r,i,n)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(t,e,r,i,n,o){void 0===i&&(i=60);var s=Math.atan2(r-t.y,e-t.x);return t.body.acceleration.setToPolar(s,i),void 0!==n&&void 0!==o&&t.body.maxVelocity.set(n,o),s},accelerateToObject:function(t,e,r,i,n){return this.accelerateTo(t,e.x,e.y,r,i,n)},closest:function(t,e){e||(e=this.world.bodies.entries);for(var r=Number.MAX_VALUE,i=null,n=t.x,o=t.y,a=e.length,h=0;h<a;h++){var u=e[h],c=u.body||u;if(t!==u&&t!==c&&t!==c.gameObject&&t!==c.center){var l=s(n,o,c.center.x,c.center.y);l<r&&(i=u,r=l)}}return i},furthest:function(t,e){e||(e=this.world.bodies.entries);for(var r=-1,i=null,n=t.x,o=t.y,a=e.length,h=0;h<a;h++){var u=e[h],c=u.body||u;if(t!==u&&t!==c&&t!==c.gameObject&&t!==c.center){var l=s(n,o,c.center.x,c.center.y);l>r&&(i=u,r=l)}}return i},moveTo:function(t,e,r,i,n){void 0===i&&(i=60),void 0===n&&(n=0);var s=Math.atan2(r-t.y,e-t.x);return n>0&&(i=o(t.x,t.y,e,r)/(n/1e3)),t.body.velocity.setToPolar(s,i),s},moveToObject:function(t,e,r,i){return this.moveTo(t,e.x,e.y,r,i)},velocityFromAngle:function(t,e,r){return void 0===e&&(e=60),void 0===r&&(r=new d),r.setToPolar(n(t),e)},velocityFromRotation:function(t,e,r){return void 0===e&&(e=60),void 0===r&&(r=new d),r.setToPolar(t,e)},overlapRect:function(t,e,r,i,n,o){return l(this.world,t,e,r,i,n,o)},overlapCirc:function(t,e,r,i,n){return c(this.world,t,e,r,i,n)},shutdown:function(){if(this.world){var t=this.systems.events;t.off(p.UPDATE,this.world.update,this.world),t.off(p.POST_UPDATE,this.world.postUpdate,this.world),t.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});f.register("ArcadePhysics",y,"arcadePhysics"),t.exports=y},13759:(t,e,r)=>{var i=r(83419),n=r(92209),o=r(68287),s=new i({Extends:o,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Collision,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Pushable,n.Size,n.Velocity],initialize:function(t,e,r,i,n){o.call(this,t,e,r,i,n),this.body=null}});t.exports=s},37742:(t,e,r)=>{var i=r(83419),n=r(78389),o=r(37747),s=r(63012),a=r(43396),h=r(87841),u=r(37303),c=r(95829),l=r(26099),f=new i({Mixins:[n],initialize:function(t,e){var r=64,i=64,n=void 0!==e;n&&e.displayWidth&&(r=e.displayWidth,i=e.displayHeight),n||(e={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0}),this.world=t,this.gameObject=n?e:void 0,this.isBody=!0,this.transform={x:e.x,y:e.y,rotation:e.angle,scaleX:e.scaleX,scaleY:e.scaleY,displayOriginX:e.displayOriginX,displayOriginY:e.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(e.x-e.scaleX*e.displayOriginX,e.y-e.scaleY*e.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=e.angle,this.preRotation=e.angle,this.width=r,this.height=i,this.sourceWidth=r,this.sourceHeight=i,e.frame&&(this.sourceWidth=e.frame.realWidth,this.sourceHeight=e.frame.realHeight),this.halfWidth=Math.abs(r/2),this.halfHeight=Math.abs(i/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new l,this.newVelocity=new l,this.deltaMax=new l,this.acceleration=new l,this.allowDrag=!0,this.drag=new l,this.allowGravity=!0,this.gravity=new l,this.bounce=new l,this.worldBounce=null,this.customBoundsRectangle=t.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new l(1e4,1e4),this.maxSpeed=-1,this.friction=new l(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=o.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new l(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=c(!1),this.touching=c(!0),this.wasTouching=c(!0),this.blocked=c(!0),this.syncBounds=!1,this.physicsType=o.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=e.scaleX,this._sy=e.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new h,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var t=this.gameObject,e=this.transform;if(t.parentContainer){var r=t.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);e.x=r.tx,e.y=r.ty,e.rotation=a(r.rotation),e.scaleX=r.scaleX,e.scaleY=r.scaleY,e.displayOriginX=t.displayOriginX,e.displayOriginY=t.displayOriginY}else e.x=t.x,e.y=t.y,e.rotation=t.angle,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.displayOriginX=t.displayOriginX,e.displayOriginY=t.displayOriginY;var i=!1;if(this.syncBounds){var n=t.getBounds(this._bounds);this.width=n.width,this.height=n.height,i=!0}else{var o=Math.abs(e.scaleX),s=Math.abs(e.scaleY);this._sx===o&&this._sy===s||(this.width=this.sourceWidth*o,this.height=this.sourceHeight*s,this._sx=o,this._sy=s,i=!0)}i&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var t=this.transform;this.position.x=t.x+t.scaleX*(this.offset.x-t.displayOriginX),this.position.y=t.y+t.scaleY*(this.offset.y-t.displayOriginY),this.updateCenter()},resetFlags:function(t){void 0===t&&(t=!1);var e=this.wasTouching,r=this.touching,i=this.blocked;t?c(!0,e):(e.none=r.none,e.up=r.up,e.down=r.down,e.left=r.left,e.right=r.right),c(!0,r),c(!0,i),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(t,e){if(t&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var r=this.position;this.prev.x=r.x,this.prev.y=r.y,this.prevFrame.x=r.x,this.prevFrame.y=r.y}t&&this.update(e)},update:function(t){var e=this.prev,r=this.position,i=this.velocity;if(e.set(r.x,r.y),!this.moves)return this._dx=r.x-e.x,void(this._dy=r.y-e.y);if(this.directControl){var n=this.autoFrame;i.set((r.x-n.x)/t,(r.y-n.y)/t),this.world.updateMotion(this,t),this._dx=r.x-n.x,this._dy=r.y-n.y}else this.world.updateMotion(this,t),this.newVelocity.set(i.x*t,i.y*t),r.add(this.newVelocity),this._dx=r.x-e.x,this._dy=r.y-e.y;var o=i.x,a=i.y;if(this.updateCenter(),this.angle=Math.atan2(a,o),this.speed=Math.sqrt(o*o+a*a),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var h=this.blocked;this.world.emit(s.WORLD_BOUNDS,this,h.up,h.down,h.left,h.right)}},postUpdate:function(){var t=this.position,e=t.x-this.prevFrame.x,r=t.y-this.prevFrame.y,i=this.gameObject;if(this.moves){var n=this.deltaMax.x,s=this.deltaMax.y;0!==n&&0!==e&&(e<0&&e<-n?e=-n:e>0&&e>n&&(e=n)),0!==s&&0!==r&&(r<0&&r<-s?r=-s:r>0&&r>s&&(r=s)),i&&(i.x+=e,i.y+=r)}e<0?this.facing=o.FACING_LEFT:e>0&&(this.facing=o.FACING_RIGHT),r<0?this.facing=o.FACING_UP:r>0&&(this.facing=o.FACING_DOWN),this.allowRotation&&i&&(i.angle+=this.deltaZ()),this._tx=e,this._ty=r,this.autoFrame.set(t.x,t.y)},setBoundsRectangle:function(t){return this.customBoundsRectangle=t||this.world.bounds,this},checkWorldBounds:function(){var t=this.position,e=this.velocity,r=this.blocked,i=this.customBoundsRectangle,n=this.world.checkCollision,o=this.worldBounce?-this.worldBounce.x:-this.bounce.x,s=this.worldBounce?-this.worldBounce.y:-this.bounce.y,a=!1;return t.x<i.x&&n.left?(t.x=i.x,e.x*=o,r.left=!0,a=!0):this.right>i.right&&n.right&&(t.x=i.right-this.width,e.x*=o,r.right=!0,a=!0),t.y<i.y&&n.up?(t.y=i.y,e.y*=s,r.up=!0,a=!0):this.bottom>i.bottom&&n.down&&(t.y=i.bottom-this.height,e.y*=s,r.down=!0,a=!0),a&&(this.blocked.none=!1,this.updateCenter()),a},setOffset:function(t,e){return void 0===e&&(e=t),this.offset.set(t,e),this},setGameObject:function(t,e){return void 0===e&&(e=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=t,t.body&&(t.body=this),this.setSize(),this.world.add(this),this.enable=e,this},setSize:function(t,e,r){void 0===r&&(r=!0);var i=this.gameObject;if(i&&(!t&&i.frame&&(t=i.frame.realWidth),!e&&i.frame&&(e=i.frame.realHeight)),this.sourceWidth=t,this.sourceHeight=e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),r&&i&&i.getCenter){var n=(i.width-t)/2,o=(i.height-e)/2;this.offset.set(n,o)}return this.isCircle=!1,this.radius=0,this},setCircle:function(t,e,r){return void 0===e&&(e=this.offset.x),void 0===r&&(r=this.offset.y),t>0?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,r),this.updateCenter()):this.isCircle=!1,this},reset:function(t,e){this.stop();var r=this.gameObject;r&&(r.setPosition(t,e),this.rotation=r.angle,this.preRotation=r.angle);var i=this.position;r&&r.getTopLeft?r.getTopLeft(i):i.set(t,e),this.prev.copy(i),this.prevFrame.copy(i),this.autoFrame.copy(i),r&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?this.radius>0&&t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom&&(this.center.x-t)*(this.center.x-t)+(this.center.y-e)*(this.center.y-e)<=this.radius*this.radius:u(this,t,e)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,r=e.x+this.halfWidth,i=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(r,i,this.width/2):(this.checkCollision.up&&t.lineBetween(e.x,e.y,e.x+this.width,e.y),this.checkCollision.right&&t.lineBetween(e.x+this.width,e.y,e.x+this.width,e.y+this.height),this.checkCollision.down&&t.lineBetween(e.x,e.y+this.height,e.x+this.width,e.y+this.height),this.checkCollision.left&&t.lineBetween(e.x,e.y,e.x,e.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(r,i,r+this.velocity.x/2,i+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(t){return void 0===t&&(t=!0),this.directControl=t,this},setCollideWorldBounds:function(t,e,r,i){void 0===t&&(t=!0),this.collideWorldBounds=t;var n=void 0!==e,o=void 0!==r;return(n||o)&&(this.worldBounce||(this.worldBounce=new l),n&&(this.worldBounce.x=e),o&&(this.worldBounce.y=r)),void 0!==i&&(this.onWorldBounds=i),this},setVelocity:function(t,e){return this.velocity.set(t,e),t=this.velocity.x,e=this.velocity.y,this.speed=Math.sqrt(t*t+e*e),this},setVelocityX:function(t){return this.setVelocity(t,this.velocity.y)},setVelocityY:function(t){return this.setVelocity(this.velocity.x,t)},setMaxVelocity:function(t,e){return this.maxVelocity.set(t,e),this},setMaxVelocityX:function(t){return this.maxVelocity.x=t,this},setMaxVelocityY:function(t){return this.maxVelocity.y=t,this},setMaxSpeed:function(t){return this.maxSpeed=t,this},setSlideFactor:function(t,e){return this.slideFactor.set(t,e),this},setBounce:function(t,e){return this.bounce.set(t,e),this},setBounceX:function(t){return this.bounce.x=t,this},setBounceY:function(t){return this.bounce.y=t,this},setAcceleration:function(t,e){return this.acceleration.set(t,e),this},setAccelerationX:function(t){return this.acceleration.x=t,this},setAccelerationY:function(t){return this.acceleration.y=t,this},setAllowDrag:function(t){return void 0===t&&(t=!0),this.allowDrag=t,this},setAllowGravity:function(t){return void 0===t&&(t=!0),this.allowGravity=t,this},setAllowRotation:function(t){return void 0===t&&(t=!0),this.allowRotation=t,this},setDrag:function(t,e){return this.drag.set(t,e),this},setDamping:function(t){return this.useDamping=t,this},setDragX:function(t){return this.drag.x=t,this},setDragY:function(t){return this.drag.y=t,this},setGravity:function(t,e){return this.gravity.set(t,e),this},setGravityX:function(t){return this.gravity.x=t,this},setGravityY:function(t){return this.gravity.y=t,this},setFriction:function(t,e){return this.friction.set(t,e),this},setFrictionX:function(t){return this.friction.x=t,this},setFrictionY:function(t){return this.friction.y=t,this},setAngularVelocity:function(t){return this.angularVelocity=t,this},setAngularAcceleration:function(t){return this.angularAcceleration=t,this},setAngularDrag:function(t){return this.angularDrag=t,this},setMass:function(t){return this.mass=t,this},setImmovable:function(t){return void 0===t&&(t=!0),this.immovable=t,this},setEnable:function(t){return void 0===t&&(t=!0),this.enable=t,this},processX:function(t,e,r,i){this.x+=t,this.updateCenter(),null!==e&&(this.velocity.x=e*this.slideFactor.x);var n=this.blocked;r&&(n.left=!0,n.none=!1),i&&(n.right=!0,n.none=!1)},processY:function(t,e,r,i){this.y+=t,this.updateCenter(),null!==e&&(this.velocity.y=e*this.slideFactor.y);var n=this.blocked;r&&(n.up=!0,n.none=!1),i&&(n.down=!0,n.none=!1)},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=f},79342:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e,r,i,n,o,s){this.world=t,this.name="",this.active=!0,this.overlapOnly=e,this.object1=r,this.object2=i,this.collideCallback=n,this.processCallback=o,this.callbackContext=s},setName:function(t){return this.name=t,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=i},66022:(t,e,r)=>{var i=r(71289),n=r(13759),o=r(37742),s=r(83419),a=r(37747),h=r(60758),u=r(72624),c=r(71464),l=new s({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},collider:function(t,e,r,i,n){return this.world.addCollider(t,e,r,i,n)},overlap:function(t,e,r,i,n){return this.world.addOverlap(t,e,r,i,n)},existing:function(t,e){var r=e?a.STATIC_BODY:a.DYNAMIC_BODY;return this.world.enableBody(t,r),t},staticImage:function(t,e,r,n){var o=new i(this.scene,t,e,r,n);return this.sys.displayList.add(o),this.world.enableBody(o,a.STATIC_BODY),o},image:function(t,e,r,n){var o=new i(this.scene,t,e,r,n);return this.sys.displayList.add(o),this.world.enableBody(o,a.DYNAMIC_BODY),o},staticSprite:function(t,e,r,i){var o=new n(this.scene,t,e,r,i);return this.sys.displayList.add(o),this.sys.updateList.add(o),this.world.enableBody(o,a.STATIC_BODY),o},sprite:function(t,e,r,i){var o=new n(this.scene,t,e,r,i);return this.sys.displayList.add(o),this.sys.updateList.add(o),this.world.enableBody(o,a.DYNAMIC_BODY),o},staticGroup:function(t,e){return this.sys.updateList.add(new c(this.world,this.world.scene,t,e))},group:function(t,e){return this.sys.updateList.add(new h(this.world,this.world.scene,t,e))},body:function(t,e,r,i){var n=new o(this.world);return n.position.set(t,e),r&&i&&n.setSize(r,i),this.world.add(n,a.DYNAMIC_BODY),n},staticBody:function(t,e,r,i){var n=new u(this.world);return n.position.set(t,e),r&&i&&n.setSize(r,i),this.world.add(n,a.STATIC_BODY),n},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=l},79599:t=>{t.exports=function(t){var e=0;if(Array.isArray(t))for(var r=0;r<t.length;r++)e|=t[r];else e=t;return e}},64897:(t,e,r)=>{var i=r(37747);t.exports=function(t,e,r,n){var o=0,s=t.deltaAbsX()+e.deltaAbsX()+n;return 0===t._dx&&0===e._dx?(t.embedded=!0,e.embedded=!0):t._dx>e._dx?(o=t.right-e.x)>s&&!r||!1===t.checkCollision.right||!1===e.checkCollision.left?o=0:(t.touching.none=!1,t.touching.right=!0,e.touching.none=!1,e.touching.left=!0,e.physicsType!==i.STATIC_BODY||r||(t.blocked.none=!1,t.blocked.right=!0),t.physicsType!==i.STATIC_BODY||r||(e.blocked.none=!1,e.blocked.left=!0)):t._dx<e._dx&&(-(o=t.x-e.width-e.x)>s&&!r||!1===t.checkCollision.left||!1===e.checkCollision.right?o=0:(t.touching.none=!1,t.touching.left=!0,e.touching.none=!1,e.touching.right=!0,e.physicsType!==i.STATIC_BODY||r||(t.blocked.none=!1,t.blocked.left=!0),t.physicsType!==i.STATIC_BODY||r||(e.blocked.none=!1,e.blocked.right=!0))),t.overlapX=o,e.overlapX=o,o}},45170:(t,e,r)=>{var i=r(37747);t.exports=function(t,e,r,n){var o=0,s=t.deltaAbsY()+e.deltaAbsY()+n;return 0===t._dy&&0===e._dy?(t.embedded=!0,e.embedded=!0):t._dy>e._dy?(o=t.bottom-e.y)>s&&!r||!1===t.checkCollision.down||!1===e.checkCollision.up?o=0:(t.touching.none=!1,t.touching.down=!0,e.touching.none=!1,e.touching.up=!0,e.physicsType!==i.STATIC_BODY||r||(t.blocked.none=!1,t.blocked.down=!0),t.physicsType!==i.STATIC_BODY||r||(e.blocked.none=!1,e.blocked.up=!0)):t._dy<e._dy&&(-(o=t.y-e.bottom)>s&&!r||!1===t.checkCollision.up||!1===e.checkCollision.down?o=0:(t.touching.none=!1,t.touching.up=!0,e.touching.none=!1,e.touching.down=!0,e.physicsType!==i.STATIC_BODY||r||(t.blocked.none=!1,t.blocked.up=!0),t.physicsType!==i.STATIC_BODY||r||(e.blocked.none=!1,e.blocked.down=!0))),t.overlapY=o,e.overlapY=o,o}},60758:(t,e,r)=>{var i=r(13759),n=r(83419),o=r(78389),s=r(37747),a=r(95540),h=r(26479),u=r(41212),c=new n({Extends:h,Mixins:[o],initialize:function(t,e,r,n){if(r||n)if(u(r))n=r,r=null,n.internalCreateCallback=this.createCallbackHandler,n.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(r)&&u(r[0])){var o=this;r.forEach((function(t){t.internalCreateCallback=o.createCallbackHandler,t.internalRemoveCallback=o.removeCallbackHandler,t.classType=a(t,"classType",i)})),n=null}else n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=t,n&&(n.classType=a(n,"classType",i)),this.physicsType=s.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this.defaults={setCollideWorldBounds:a(n,"collideWorldBounds",!1),setBoundsRectangle:a(n,"customBoundsRectangle",null),setAccelerationX:a(n,"accelerationX",0),setAccelerationY:a(n,"accelerationY",0),setAllowDrag:a(n,"allowDrag",!0),setAllowGravity:a(n,"allowGravity",!0),setAllowRotation:a(n,"allowRotation",!0),setDamping:a(n,"useDamping",!1),setBounceX:a(n,"bounceX",0),setBounceY:a(n,"bounceY",0),setDragX:a(n,"dragX",0),setDragY:a(n,"dragY",0),setEnable:a(n,"enable",!0),setGravityX:a(n,"gravityX",0),setGravityY:a(n,"gravityY",0),setFrictionX:a(n,"frictionX",0),setFrictionY:a(n,"frictionY",0),setMaxSpeed:a(n,"maxSpeed",-1),setMaxVelocityX:a(n,"maxVelocityX",1e4),setMaxVelocityY:a(n,"maxVelocityY",1e4),setVelocityX:a(n,"velocityX",0),setVelocityY:a(n,"velocityY",0),setAngularVelocity:a(n,"angularVelocity",0),setAngularAcceleration:a(n,"angularAcceleration",0),setAngularDrag:a(n,"angularDrag",0),setMass:a(n,"mass",1),setImmovable:a(n,"immovable",!1)},h.call(this,e,r,n),this.type="PhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,s.DYNAMIC_BODY);var e=t.body;for(var r in this.defaults)e[r](this.defaults[r])},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},setVelocity:function(t,e,r){void 0===r&&(r=0);for(var i=this.getChildren(),n=0;n<i.length;n++)i[n].body.velocity.set(t+n*r,e+n*r);return this},setVelocityX:function(t,e){void 0===e&&(e=0);for(var r=this.getChildren(),i=0;i<r.length;i++)r[i].body.velocity.x=t+i*e;return this},setVelocityY:function(t,e){void 0===e&&(e=0);for(var r=this.getChildren(),i=0;i<r.length;i++)r[i].body.velocity.y=t+i*e;return this}});t.exports=c},3017:t=>{var e,r,i,n,o,s,a,h,u,c,l,f,p,d,v,y,g,m=function(){return c&&v&&r.blocked.right?(e.processX(-g,a,!1,!0),1):u&&y&&r.blocked.left?(e.processX(g,a,!0),1):p&&y&&e.blocked.right?(r.processX(-g,h,!1,!0),2):f&&v&&e.blocked.left?(r.processX(g,h,!0),2):0},x=function(t){if(i&&n)g*=.5,0===t||3===t?(e.processX(g,o),r.processX(-g,s)):(e.processX(-g,o),r.processX(g,s));else if(i&&!n)0===t||3===t?e.processX(g,a,!0):e.processX(-g,a,!1,!0);else if(!i&&n)0===t||3===t?r.processX(-g,h,!1,!0):r.processX(g,h,!0);else{var v=.5*g;0===t?d?(e.processX(g,0,!0),r.processX(0,null,!1,!0)):p?(e.processX(v,0,!0),r.processX(-v,0,!1,!0)):(e.processX(v,r.velocity.x,!0),r.processX(-v,null,!1,!0)):1===t?l?(e.processX(0,null,!1,!0),r.processX(g,0,!0)):c?(e.processX(-v,0,!1,!0),r.processX(v,0,!0)):(e.processX(-v,null,!1,!0),r.processX(v,e.velocity.x,!0)):2===t?d?(e.processX(-g,0,!1,!0),r.processX(0,null,!0)):f?(e.processX(-v,0,!1,!0),r.processX(v,0,!0)):(e.processX(-v,r.velocity.x,!1,!0),r.processX(v,null,!0)):3===t&&(l?(e.processX(0,null,!0),r.processX(-g,0,!1,!0)):u?(e.processX(v,0,!0),r.processX(-v,0,!1,!0)):(e.processX(v,r.velocity.y,!0),r.processX(-v,null,!1,!0)))}return!0};t.exports={BlockCheck:m,Check:function(){var t=e.velocity.x,i=r.velocity.x,n=Math.sqrt(i*i*r.mass/e.mass)*(i>0?1:-1),a=Math.sqrt(t*t*e.mass/r.mass)*(t>0?1:-1),h=.5*(n+a);return a-=h,o=h+(n-=h)*e.bounce.x,s=h+a*r.bounce.x,u&&y?x(0):f&&v?x(1):c&&v?x(2):!(!p||!y)&&x(3)},Set:function(t,o,s){r=o;var x=(e=t).velocity.x,b=r.velocity.x;return i=e.pushable,u=e._dx<0,c=e._dx>0,l=0===e._dx,v=Math.abs(e.right-r.x)<=Math.abs(r.right-e.x),a=b-x*e.bounce.x,n=r.pushable,f=r._dx<0,p=r._dx>0,d=0===r._dx,y=!v,h=x-b*r.bounce.x,g=Math.abs(s),m()},Run:x,RunImmovableBody1:function(t){1===t?r.velocity.x=0:v?r.processX(g,h,!0):r.processX(-g,h,!1,!0),e.moves&&(r.y+=(e.y-e.prev.y)*e.friction.y,r._dy=r.y-r.prev.y)},RunImmovableBody2:function(t){2===t?e.velocity.x=0:y?e.processX(g,a,!0):e.processX(-g,a,!1,!0),r.moves&&(e.y+=(r.y-r.prev.y)*r.friction.y,e._dy=e.y-e.prev.y)}}},47962:t=>{var e,r,i,n,o,s,a,h,u,c,l,f,p,d,v,y,g,m=function(){return c&&v&&r.blocked.down?(e.processY(-g,a,!1,!0),1):u&&y&&r.blocked.up?(e.processY(g,a,!0),1):p&&y&&e.blocked.down?(r.processY(-g,h,!1,!0),2):f&&v&&e.blocked.up?(r.processY(g,h,!0),2):0},x=function(t){if(i&&n)g*=.5,0===t||3===t?(e.processY(g,o),r.processY(-g,s)):(e.processY(-g,o),r.processY(g,s));else if(i&&!n)0===t||3===t?e.processY(g,a,!0):e.processY(-g,a,!1,!0);else if(!i&&n)0===t||3===t?r.processY(-g,h,!1,!0):r.processY(g,h,!0);else{var v=.5*g;0===t?d?(e.processY(g,0,!0),r.processY(0,null,!1,!0)):p?(e.processY(v,0,!0),r.processY(-v,0,!1,!0)):(e.processY(v,r.velocity.y,!0),r.processY(-v,null,!1,!0)):1===t?l?(e.processY(0,null,!1,!0),r.processY(g,0,!0)):c?(e.processY(-v,0,!1,!0),r.processY(v,0,!0)):(e.processY(-v,null,!1,!0),r.processY(v,e.velocity.y,!0)):2===t?d?(e.processY(-g,0,!1,!0),r.processY(0,null,!0)):f?(e.processY(-v,0,!1,!0),r.processY(v,0,!0)):(e.processY(-v,r.velocity.y,!1,!0),r.processY(v,null,!0)):3===t&&(l?(e.processY(0,null,!0),r.processY(-g,0,!1,!0)):u?(e.processY(v,0,!0),r.processY(-v,0,!1,!0)):(e.processY(v,r.velocity.y,!0),r.processY(-v,null,!1,!0)))}return!0};t.exports={BlockCheck:m,Check:function(){var t=e.velocity.y,i=r.velocity.y,n=Math.sqrt(i*i*r.mass/e.mass)*(i>0?1:-1),a=Math.sqrt(t*t*e.mass/r.mass)*(t>0?1:-1),h=.5*(n+a);return a-=h,o=h+(n-=h)*e.bounce.y,s=h+a*r.bounce.y,u&&y?x(0):f&&v?x(1):c&&v?x(2):!(!p||!y)&&x(3)},Set:function(t,o,s){r=o;var x=(e=t).velocity.y,b=r.velocity.y;return i=e.pushable,u=e._dy<0,c=e._dy>0,l=0===e._dy,v=Math.abs(e.bottom-r.y)<=Math.abs(r.bottom-e.y),a=b-x*e.bounce.y,n=r.pushable,f=r._dy<0,p=r._dy>0,d=0===r._dy,y=!v,h=x-b*r.bounce.y,g=Math.abs(s),m()},Run:x,RunImmovableBody1:function(t){1===t?r.velocity.y=0:v?r.processY(g,h,!0):r.processY(-g,h,!1,!0),e.moves&&(r.x+=(e.x-e.prev.x)*e.friction.x,r._dx=r.x-r.prev.x)},RunImmovableBody2:function(t){2===t?e.velocity.y=0:y?e.processY(g,a,!0):e.processY(-g,a,!1,!0),r.moves&&(e.x+=(r.x-r.prev.x)*r.friction.x,e._dx=e.x-e.prev.x)}}},14087:(t,e,r)=>{var i=r(64897),n=r(3017);t.exports=function(t,e,r,o,s){void 0===s&&(s=i(t,e,r,o));var a=t.immovable,h=e.immovable;if(r||0===s||a&&h||t.customSeparateX||e.customSeparateX)return 0!==s||t.embedded&&e.embedded;var u=n.Set(t,e,s);return a||h?(a?n.RunImmovableBody1(u):h&&n.RunImmovableBody2(u),!0):u>0||n.Check()}},89936:(t,e,r)=>{var i=r(45170),n=r(47962);t.exports=function(t,e,r,o,s){void 0===s&&(s=i(t,e,r,o));var a=t.immovable,h=e.immovable;if(r||0===s||a&&h||t.customSeparateY||e.customSeparateY)return 0!==s||t.embedded&&e.embedded;var u=n.Set(t,e,s);return a||h?(a?n.RunImmovableBody1(u):h&&n.RunImmovableBody2(u),!0):u>0||n.Check()}},95829:t=>{t.exports=function(t,e){return void 0===e&&(e={}),e.none=t,e.up=!1,e.down=!1,e.left=!1,e.right=!1,t||(e.up=!0,e.down=!0,e.left=!0,e.right=!0),e}},72624:(t,e,r)=>{var i=r(87902),n=r(83419),o=r(78389),s=r(37747),a=r(37303),h=r(95829),u=r(26099),c=new n({Mixins:[o],initialize:function(t,e){var r=64,i=64,n=void 0!==e;n&&e.displayWidth&&(r=e.displayWidth,i=e.displayHeight),n||(e={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0}),this.world=t,this.gameObject=n?e:void 0,this.isBody=!0,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new u,this.position=new u(e.x-r*e.originX,e.y-i*e.originY),this.width=r,this.height=i,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new u(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=u.ZERO,this.allowGravity=!1,this.gravity=u.ZERO,this.bounce=u.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=h(!1),this.touching=h(!0),this.wasTouching=h(!0),this.blocked=h(!0),this.physicsType=s.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(t,e){return t&&t!==this.gameObject&&(this.gameObject.body=null,t.body=this,this.gameObject=t),e&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(t,e){return void 0===e&&(e=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,e),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(t,e,r){void 0===r&&(r=!0);var i=this.gameObject;if(i&&i.frame&&(t||(t=i.frame.realWidth),e||(e=i.frame.realHeight)),this.world.staticTree.remove(this),this.width=t,this.height=e,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(e/2),r&&i&&i.getCenter){var n=i.displayWidth/2,o=i.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(n-this.halfWidth,o-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(t,e,r){return void 0===e&&(e=this.offset.x),void 0===r&&(r=this.offset.y),t>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,r),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,e){var r=this.gameObject;void 0===t&&(t=r.x),void 0===e&&(e=r.y),this.world.staticTree.remove(this),r.setPosition(t,e),r.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?i(this,t,e):a(this,t,e)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,r=e.x+this.halfWidth,i=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(r,i,this.width/2):t.strokeRect(e.x,e.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function(){return this.position.x},set:function(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=c},71464:(t,e,r)=>{var i=r(13759),n=r(83419),o=r(78389),s=r(37747),a=r(95540),h=r(26479),u=r(41212),c=new n({Extends:h,Mixins:[o],initialize:function(t,e,r,n){r||n?u(r)?(n=r,r=null,n.internalCreateCallback=this.createCallbackHandler,n.internalRemoveCallback=this.removeCallbackHandler,n.createMultipleCallback=this.createMultipleCallbackHandler,n.classType=a(n,"classType",i)):Array.isArray(r)&&u(r[0])?(n=r,r=null,n.forEach((function(t){t.internalCreateCallback=this.createCallbackHandler,t.internalRemoveCallback=this.removeCallbackHandler,t.createMultipleCallback=this.createMultipleCallbackHandler,t.classType=a(t,"classType",i)}))):n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:i},this.world=t,this.physicsType=s.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,h.call(this,e,r,n),this.type="StaticPhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,s.STATIC_BODY)},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var t=this.children.entries,e=0;e<t.length;e++)t[e].body.reset();return this}});t.exports=c},82248:(t,e,r)=>{var i=r(55495),n=r(37742),o=r(45319),s=r(83419),a=r(79342),h=r(37747),u=r(20339),c=r(52816),l=r(50792),f=r(63012),p=r(43855),d=r(5470),v=r(94977),y=r(64897),g=r(45170),m=r(96523),x=r(35154),b=r(36383),w=r(25774),E=r(96602),T=r(87841),S=r(59542),_=r(40012),O=r(14087),P=r(89936),M=r(35072),A=r(72624),L=r(2483),C=r(61340),R=r(26099),k=r(15994),F=new s({Extends:l,initialize:function(t,e){l.call(this),this.scene=t,this.bodies=new M,this.staticBodies=new M,this.pendingDestroy=new M,this.colliders=new w,this.gravity=new R(x(e,"gravity.x",0),x(e,"gravity.y",0)),this.bounds=new T(x(e,"x",0),x(e,"y",0),x(e,"width",t.sys.scale.width),x(e,"height",t.sys.scale.height)),this.checkCollision={up:x(e,"checkCollision.up",!0),down:x(e,"checkCollision.down",!0),left:x(e,"checkCollision.left",!0),right:x(e,"checkCollision.right",!0)},this.fps=x(e,"fps",60),this.fixedStep=x(e,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=x(e,"timeScale",1),this.OVERLAP_BIAS=x(e,"overlapBias",4),this.TILE_BIAS=x(e,"tileBias",16),this.forceX=x(e,"forceX",!1),this.isPaused=x(e,"isPaused",!1),this._total=0,this.drawDebug=x(e,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:x(e,"debugShowBody",!0),debugShowStaticBody:x(e,"debugShowStaticBody",!0),debugShowVelocity:x(e,"debugShowVelocity",!0),bodyDebugColor:x(e,"debugBodyColor",16711935),staticBodyDebugColor:x(e,"debugStaticBodyColor",255),velocityDebugColor:x(e,"debugVelocityColor",65280)},this.maxEntries=x(e,"maxEntries",16),this.useTree=x(e,"useTree",!0),this.tree=new S(this.maxEntries),this.staticTree=new S(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new C,this._tempMatrix2=new C,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(t,e){void 0===e&&(e=h.DYNAMIC_BODY),Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r];if(i.isParent)for(var n=i.getChildren(),o=0;o<n.length;o++){var s=n[o];s.isParent?this.enable(s,e):this.enableBody(s,e)}else this.enableBody(i,e)}},enableBody:function(t,e){return void 0===e&&(e=h.DYNAMIC_BODY),t.hasTransformComponent&&(t.body||(e===h.DYNAMIC_BODY?t.body=new n(this,t):e===h.STATIC_BODY&&(t.body=new A(this,t))),this.add(t.body)),t},add:function(t){return t.physicsType===h.DYNAMIC_BODY?this.bodies.set(t):t.physicsType===h.STATIC_BODY&&(this.staticBodies.set(t),this.staticTree.insert(t)),t.enable=!0,t},disable:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var r=t[e];if(r.isParent)for(var i=r.getChildren(),n=0;n<i.length;n++){var o=i[n];o.isParent?this.disable(o):this.disableBody(o.body)}else this.disableBody(r.body)}},disableBody:function(t){this.remove(t),t.enable=!1},remove:function(t){t.physicsType===h.DYNAMIC_BODY?(this.tree.remove(t),this.bodies.delete(t)):t.physicsType===h.STATIC_BODY&&(this.staticBodies.delete(t),this.staticTree.remove(t))},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},setBounds:function(t,e,r,i,n,o,s,a){return this.bounds.setTo(t,e,r,i),void 0!==n&&this.setBoundsCollision(n,o,s,a),this},setBoundsCollision:function(t,e,r,i){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===i&&(i=!0),this.checkCollision.left=t,this.checkCollision.right=e,this.checkCollision.up=r,this.checkCollision.down=i,this},pause:function(){return this.isPaused=!0,this.emit(f.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(f.RESUME),this},addCollider:function(t,e,r,i,n){void 0===r&&(r=null),void 0===i&&(i=null),void 0===n&&(n=r);var o=new a(this,!1,t,e,r,i,n);return this.colliders.add(o),o},addOverlap:function(t,e,r,i,n){void 0===r&&(r=null),void 0===i&&(i=null),void 0===n&&(n=r);var o=new a(this,!0,t,e,r,i,n);return this.colliders.add(o),o},removeCollider:function(t){return this.colliders.remove(t),this},setFPS:function(t){return this.fps=t,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(t,e){if(!this.isPaused&&0!==this.bodies.size){var r,i,n=this._frameTime,o=this._frameTimeMS*this.timeScale;this._elapsed+=e;var s=this.bodies.entries,a=this._elapsed>=o;for(this.fixedStep||(n=.001*e,a=!0,this._elapsed=0),r=0;r<s.length;r++)(i=s[r]).enable&&i.preUpdate(a,n);if(a){this._elapsed-=o,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(s));var h=this.colliders.update();for(r=0;r<h.length;r++){var u=h[r];u.active&&u.update()}this.emit(f.WORLD_STEP,n)}for(;this._elapsed>=o;)this._elapsed-=o,this.step(n)}},step:function(t){var e,r,i=this.bodies.entries,n=i.length;for(e=0;e<n;e++)(r=i[e]).enable&&r.update(t);this.useTree&&(this.tree.clear(),this.tree.load(i));var o=this.colliders.update();for(e=0;e<o.length;e++){var s=o[e];s.active&&s.update()}this.emit(f.WORLD_STEP,t),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var t,e,r=this.bodies.entries,i=r.length,n=this.bodies,o=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,t=0;t<i;t++)(e=r[t]).enable&&e.postUpdate();if(this.drawDebug){var s=this.debugGraphic;for(s.clear(),t=0;t<i;t++)(e=r[t]).willDrawDebug()&&e.drawDebug(s);for(i=(r=o.entries).length,t=0;t<i;t++)(e=r[t]).willDrawDebug()&&e.drawDebug(s)}var a=this.pendingDestroy;if(a.size>0){var u=this.tree,c=this.staticTree;for(i=(r=a.entries).length,t=0;t<i;t++)(e=r[t]).physicsType===h.DYNAMIC_BODY?(u.remove(e),n.delete(e)):e.physicsType===h.STATIC_BODY&&(c.remove(e),o.delete(e)),e.world=void 0,e.gameObject=void 0;a.clear()}},updateMotion:function(t,e){t.allowRotation&&this.computeAngularVelocity(t,e),this.computeVelocity(t,e)},computeAngularVelocity:function(t,e){var r=t.angularVelocity,i=t.angularAcceleration,n=t.angularDrag,s=t.maxAngular;i?r+=i*e:t.allowDrag&&n&&(d(r-(n*=e),0,.1)?r-=n:v(r+n,0,.1)?r+=n:r=0);var a=(r=o(r,-s,s))-t.angularVelocity;t.angularVelocity+=a,t.rotation+=t.angularVelocity*e},computeVelocity:function(t,e){var r=t.velocity.x,i=t.acceleration.x,n=t.drag.x,s=t.maxVelocity.x,a=t.velocity.y,h=t.acceleration.y,u=t.drag.y,c=t.maxVelocity.y,l=t.speed,f=t.maxSpeed,y=t.allowDrag,g=t.useDamping;t.allowGravity&&(r+=(this.gravity.x+t.gravity.x)*e,a+=(this.gravity.y+t.gravity.y)*e),i?r+=i*e:y&&n&&(g?(r*=n=Math.pow(n,e),l=Math.sqrt(r*r+a*a),p(l,0,.001)&&(r=0)):d(r-(n*=e),0,.01)?r-=n:v(r+n,0,.01)?r+=n:r=0),h?a+=h*e:y&&u&&(g?(a*=u=Math.pow(u,e),l=Math.sqrt(r*r+a*a),p(l,0,.001)&&(a=0)):d(a-(u*=e),0,.01)?a-=u:v(a+u,0,.01)?a+=u:a=0),r=o(r,-s,s),a=o(a,-c,c),t.velocity.set(r,a),f>-1&&t.velocity.length()>f&&(t.velocity.normalize().scale(f),l=f),t.speed=l},separate:function(t,e,r,i,n){var o,s,a=!1,h=!0;if(!t.enable||!e.enable||t.checkCollision.none||e.checkCollision.none||!this.intersects(t,e))return a;if(r&&!1===r.call(i,t.gameObject,e.gameObject))return a;if(t.isCircle||e.isCircle){var u=this.separateCircle(t,e,n);u.result?(a=!0,h=!1):(o=u.x,s=u.y,h=!0)}if(h){var c=!1,l=!1,p=this.OVERLAP_BIAS;n?(c=O(t,e,n,p,o),l=P(t,e,n,p,s)):this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?(c=O(t,e,n,p,o),this.intersects(t,e)&&(l=P(t,e,n,p,s))):(l=P(t,e,n,p,s),this.intersects(t,e)&&(c=O(t,e,n,p,o))),a=c||l}return a&&(n?(t.onOverlap||e.onOverlap)&&this.emit(f.OVERLAP,t.gameObject,e.gameObject,t,e):(t.onCollide||e.onCollide)&&this.emit(f.COLLIDE,t.gameObject,e.gameObject,t,e)),a},separateCircle:function(t,e,r){y(t,e,!1,0),g(t,e,!1,0);var n=t.isCircle,o=e.isCircle,s=t.center,a=e.center,h=t.immovable,l=e.immovable,f=t.velocity,p=e.velocity,d=0,v=!0;if(n!==o){v=!1;var m=s.x,x=s.y,w=t.halfWidth,E=e.position.x,T=e.position.y,S=e.right,_=e.bottom;o&&(m=a.x,x=a.y,w=e.halfWidth,E=t.position.x,T=t.position.y,S=t.right,_=t.bottom),x<T?m<E?d=u(m,x,E,T)-w:m>S&&(d=u(m,x,S,T)-w):x>_&&(m<E?d=u(m,x,E,_)-w:m>S&&(d=u(m,x,S,_)-w)),d*=-1}else d=t.halfWidth+e.halfWidth-c(s,a);t.overlapR=d,e.overlapR=d;var O=i(s,a),P=(d+b.EPSILON)*Math.cos(O),M=(d+b.EPSILON)*Math.sin(O),A={overlap:d,result:!1,x:P,y:M};if(r&&(!v||v&&0!==d))return A.result=!0,A;if(!v&&0===d||h&&l||t.customSeparateX||e.customSeparateX)return A.x=void 0,A.y=void 0,A;var L=!t.pushable&&!e.pushable;if(v){var C=s.x-a.x,R=s.y-a.y,k=Math.sqrt(Math.pow(C,2)+Math.pow(R,2)),F=(a.x-s.x)/k||0,I=(a.y-s.y)/k||0,D=2*(f.x*F+f.y*I-p.x*F-p.y*I)/(t.mass+e.mass);(h||l)&&(D*=2),h||(f.x=f.x-D/t.mass*F,f.y=f.y-D/t.mass*I,f.multiply(t.bounce)),l||(p.x=p.x+D/e.mass*F,p.y=p.y+D/e.mass*I,p.multiply(e.bounce)),h||l||(P*=.5,M*=.5),h||(t.x-=P,t.y-=M,t.updateCenter()),l||(e.x+=P,e.y+=M,e.updateCenter()),A.result=!0}else!h||t.pushable||L?(t.x-=P,t.y-=M,t.updateCenter()):(!l||e.pushable||L)&&(e.x+=P,e.y+=M,e.updateCenter()),A.x=void 0,A.y=void 0;return A},intersects:function(t,e){return t!==e&&(t.isCircle||e.isCircle?t.isCircle?e.isCircle?c(t.center,e.center)<=t.halfWidth+e.halfWidth:this.circleBodyIntersects(t,e):this.circleBodyIntersects(e,t):!(t.right<=e.left||t.bottom<=e.top||t.left>=e.right||t.top>=e.bottom))},circleBodyIntersects:function(t,e){var r=o(t.center.x,e.left,e.right),i=o(t.center.y,e.top,e.bottom);return(t.center.x-r)*(t.center.x-r)+(t.center.y-i)*(t.center.y-i)<=t.halfWidth*t.halfWidth},overlap:function(t,e,r,i,n){return void 0===r&&(r=null),void 0===i&&(i=null),void 0===n&&(n=r),this.collideObjects(t,e,r,i,n,!0)},collide:function(t,e,r,i,n){return void 0===r&&(r=null),void 0===i&&(i=null),void 0===n&&(n=r),this.collideObjects(t,e,r,i,n,!1)},collideObjects:function(t,e,r,i,n,o){var s,a;!t.isParent||void 0!==t.physicsType&&void 0!==e&&t!==e||(t=t.children.entries),e&&e.isParent&&void 0===e.physicsType&&(e=e.children.entries);var h=Array.isArray(t),u=Array.isArray(e);if(this._total=0,h||u)if(!h&&u)for(s=0;s<e.length;s++)this.collideHandler(t,e[s],r,i,n,o);else if(h&&!u)if(e)for(s=0;s<t.length;s++)this.collideHandler(t[s],e,r,i,n,o);else for(s=0;s<t.length;s++){var c=t[s];for(a=s+1;a<t.length;a++)s!==a&&this.collideHandler(c,t[a],r,i,n,o)}else for(s=0;s<t.length;s++)for(a=0;a<e.length;a++)this.collideHandler(t[s],e[a],r,i,n,o);else this.collideHandler(t,e,r,i,n,o);return this._total>0},collideHandler:function(t,e,r,i,n,o){if(void 0===e&&t.isParent)return this.collideGroupVsGroup(t,t,r,i,n,o);if(!t||!e)return!1;if(t.body||t.isBody){if(e.body||e.isBody)return this.collideSpriteVsSprite(t,e,r,i,n,o);if(e.isParent)return this.collideSpriteVsGroup(t,e,r,i,n,o);if(e.isTilemap)return this.collideSpriteVsTilemapLayer(t,e,r,i,n,o)}else if(t.isParent){if(e.body||e.isBody)return this.collideSpriteVsGroup(e,t,r,i,n,o);if(e.isParent)return this.collideGroupVsGroup(t,e,r,i,n,o);if(e.isTilemap)return this.collideGroupVsTilemapLayer(t,e,r,i,n,o)}else if(t.isTilemap){if(e.body||e.isBody)return this.collideSpriteVsTilemapLayer(e,t,r,i,n,o);if(e.isParent)return this.collideGroupVsTilemapLayer(e,t,r,i,n,o)}},canCollide:function(t,e){return t&&e&&!!(t.collisionMask&e.collisionCategory)&&!!(e.collisionMask&t.collisionCategory)},collideSpriteVsSprite:function(t,e,r,i,n,o){var s=t.isBody?t:t.body,a=e.isBody?e:e.body;return!!this.canCollide(s,a)&&(this.separate(s,a,i,n,o)&&(r&&r.call(n,t,e),this._total++),!0)},collideSpriteVsGroup:function(t,e,r,i,n,o){var s,a,u,c=t.isBody?t:t.body;if(0!==e.length&&c&&c.enable&&!c.checkCollision.none&&this.canCollide(c,e))if(this.useTree||e.physicsType===h.STATIC_BODY){var l=this.treeMinMax;l.minX=c.left,l.minY=c.top,l.maxX=c.right,l.maxY=c.bottom;var f=e.physicsType===h.DYNAMIC_BODY?this.tree.search(l):this.staticTree.search(l);for(a=f.length,s=0;s<a;s++)c!==(u=f[s])&&u.enable&&!u.checkCollision.none&&e.contains(u.gameObject)&&this.separate(c,u,i,n,o)&&(r&&r.call(n,c.gameObject,u.gameObject),this._total++)}else{var p=e.getChildren(),d=e.children.entries.indexOf(t);for(a=p.length,s=0;s<a;s++)(u=p[s].body)&&s!==d&&u.enable&&this.separate(c,u,i,n,o)&&(r&&r.call(n,c.gameObject,u.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(t,e,r,i,n,o){if(!this.canCollide(t,e))return!1;var s=t.getChildren();if(0===s.length)return!1;for(var a=!1,h=0;h<s.length;h++)(s[h].body||s[h].isBody)&&this.collideSpriteVsTilemapLayer(s[h],e,r,i,n,o)&&(a=!0);return a},collideTiles:function(t,e,r,i,n){return!(0===e.length||t.body&&!t.body.enable||t.isBody&&!t.enable)&&this.collideSpriteVsTilesHandler(t,e,r,i,n,!1,!1)},overlapTiles:function(t,e,r,i,n){return!(0===e.length||t.body&&!t.body.enable||t.isBody&&!t.enable)&&this.collideSpriteVsTilesHandler(t,e,r,i,n,!0,!1)},collideSpriteVsTilemapLayer:function(t,e,r,i,n,o){var s=t.isBody?t:t.body;if(!s.enable||s.checkCollision.none||!this.canCollide(s,e))return!1;var a=e.layer,h=s.x-a.tileWidth*e.scaleX,u=s.y-a.tileHeight*e.scaleY,c=s.width+a.tileWidth*e.scaleX,l=s.height+a.tileHeight*e.scaleY,f=o?null:this.tileFilterOptions,p=m(h,u,c,l,f,e.scene.cameras.main,e.layer);return 0!==p.length&&this.collideSpriteVsTilesHandler(t,p,r,i,n,o,!0)},collideSpriteVsTilesHandler:function(t,e,r,i,n,o,s){for(var a,h,u=t.isBody?t:t.body,c={left:0,right:0,top:0,bottom:0},l=!1,p=0;p<e.length;p++){var d=(h=(a=e[p]).tilemapLayer).tileToWorldXY(a.x,a.y);c.left=d.x,c.top=d.y,c.right=c.left+a.width*h.scaleX,c.bottom=c.top+a.height*h.scaleY,L(c,u)&&(!i||i.call(n,t,a))&&E(a,t)&&(o||_(p,u,a,c,h,this.TILE_BIAS,s))&&(this._total++,l=!0,r&&r.call(n,t,a),o&&u.onOverlap?this.emit(f.TILE_OVERLAP,t,a,u):u.onCollide&&this.emit(f.TILE_COLLIDE,t,a,u))}return l},collideGroupVsGroup:function(t,e,r,i,n,o){if(0!==t.length&&0!==e.length&&this.canCollide(t,e))for(var s=t.getChildren(),a=0;a<s.length;a++)this.collideSpriteVsGroup(s[a],e,r,i,n,o)},wrap:function(t,e){t.body?this.wrapObject(t,e):t.getChildren?this.wrapArray(t.getChildren(),e):Array.isArray(t)?this.wrapArray(t,e):this.wrapObject(t,e)},wrapArray:function(t,e){for(var r=0;r<t.length;r++)this.wrapObject(t[r],e)},wrapObject:function(t,e){void 0===e&&(e=0),t.x=k(t.x,this.bounds.left-e,this.bounds.right+e),t.y=k(t.y,this.bounds.top-e,this.bounds.bottom+e)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});t.exports=F},1093:t=>{t.exports={setAcceleration:function(t,e){return this.body.acceleration.set(t,e),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}}},59023:t=>{t.exports={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}}},62069:t=>{t.exports={setBounce:function(t,e){return this.body.bounce.set(t,e),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,e,r,i){return this.body.setCollideWorldBounds(t,e,r,i),this}}},78389:(t,e,r)=>{var i=r(79599),n={setCollisionCategory:function(t){return(this.body?this.body:this).collisionCategory=t,this},willCollideWith:function(t){return!!((this.body?this.body:this).collisionMask&t)},addCollidesWith:function(t){var e=this.body?this.body:this;return e.collisionMask=e.collisionMask|t,this},removeCollidesWith:function(t){var e=this.body?this.body:this;return e.collisionMask=e.collisionMask&~t,this},setCollidesWith:function(t){return(this.body?this.body:this).collisionMask=i(t),this},resetCollisionCategory:function(){var t=this.body?this.body:this;return t.collisionCategory=1,t.collisionMask=1,this}};t.exports=n},87118:t=>{t.exports={setDebug:function(t,e,r){return this.debugShowBody=t,this.debugShowVelocity=e,this.debugBodyColor=r,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}}},52819:t=>{t.exports={setDrag:function(t,e){return this.body.drag.set(t,e),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}}},4074:t=>{t.exports={setDirectControl:function(t){return this.body.setDirectControl(t),this},enableBody:function(t,e,r,i,n){return t&&this.body.reset(e,r),i&&(this.body.gameObject.active=!0),n&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),e&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}}},40831:t=>{t.exports={setFriction:function(t,e){return this.body.friction.set(t,e),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}}},26775:t=>{t.exports={setGravity:function(t,e){return this.body.gravity.set(t,e),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}}},9437:t=>{t.exports={setImmovable:function(t){return void 0===t&&(t=!0),this.body.immovable=t,this}}},30621:t=>{t.exports={setMass:function(t){return this.body.mass=t,this}}},72441:(t,e,r)=>{var i=r(47956),n=r(96503),o=r(2044),s=r(81491);t.exports=function(t,e,r,a,h,u){var c=i(t,e-a,r-a,2*a,2*a,h,u);if(0===c.length)return c;for(var l=new n(e,r,a),f=new n,p=[],d=0;d<c.length;d++){var v=c[d];v.isCircle?(f.setTo(v.center.x,v.center.y,v.halfWidth),o(l,f)&&p.push(v)):s(l,v)&&p.push(v)}return p}},47956:t=>{t.exports=function(t,e,r,i,n,o,s){void 0===o&&(o=!0),void 0===s&&(s=!1);var a=[],h=[],u=t.treeMinMax;if(u.minX=e,u.minY=r,u.maxX=e+i,u.maxY=r+n,s&&(h=t.staticTree.search(u)),o&&t.useTree)a=t.tree.search(u);else if(o){var c=t.bodies,l={position:{x:e,y:r},left:e,top:r,right:e+i,bottom:r+n,isCircle:!1},f=t.intersects;c.iterate((function(t){f(t,l)&&a.push(t)}))}return h.concat(a)}},62121:t=>{t.exports={setPushable:function(t){return void 0===t&&(t=!0),this.body.pushable=t,this}}},29384:t=>{t.exports={setOffset:function(t,e){return this.body.setOffset(t,e),this},setSize:function(t,e,r){return this.body.setSize(t,e,r),this},setBodySize:function(t,e,r){return this.body.setSize(t,e,r),this},setCircle:function(t,e,r){return this.body.setCircle(t,e,r),this}}},15098:t=>{t.exports={setVelocity:function(t,e){return this.body.setVelocity(t,e),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,e){return this.body.maxVelocity.set(t,e),this}}},92209:(t,e,r)=>{t.exports={Acceleration:r(1093),Angular:r(59023),Bounce:r(62069),Collision:r(78389),Debug:r(87118),Drag:r(52819),Enable:r(4074),Friction:r(40831),Gravity:r(26775),Immovable:r(9437),Mass:r(30621),OverlapCirc:r(72441),OverlapRect:r(47956),Pushable:r(62121),Size:r(29384),Velocity:r(15098)}},37747:t=>{t.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},20009:t=>{t.exports="collide"},36768:t=>{t.exports="overlap"},60473:t=>{t.exports="pause"},89954:t=>{t.exports="resume"},61804:t=>{t.exports="tilecollide"},7161:t=>{t.exports="tileoverlap"},34689:t=>{t.exports="worldbounds"},16006:t=>{t.exports="worldstep"},63012:(t,e,r)=>{t.exports={COLLIDE:r(20009),OVERLAP:r(36768),PAUSE:r(60473),RESUME:r(89954),TILE_COLLIDE:r(61804),TILE_OVERLAP:r(7161),WORLD_BOUNDS:r(34689),WORLD_STEP:r(16006)}},27064:(t,e,r)=>{var i=r(37747),n=r(79291),o={ArcadePhysics:r(86689),Body:r(37742),Collider:r(79342),Components:r(92209),Events:r(63012),Factory:r(66022),GetCollidesWith:r(79599),GetOverlapX:r(64897),GetOverlapY:r(45170),SeparateX:r(14087),SeparateY:r(89936),Group:r(60758),Image:r(71289),Sprite:r(13759),StaticBody:r(72624),StaticGroup:r(71464),Tilemap:r(55173),World:r(82248)};o=n(!1,o,i),t.exports=o},96602:t=>{t.exports=function(t,e){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,e,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,e,t)}},36294:t=>{t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.left=!0):e>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=e,t.updateCenter(),0===t.bounce.x?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x}},67013:t=>{t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.up=!0):e>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=e,t.updateCenter(),0===t.bounce.y?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y}},40012:(t,e,r)=>{var i=r(21329),n=r(53442),o=r(2483);t.exports=function(t,e,r,s,a,h,u){var c=s.left,l=s.top,f=s.right,p=s.bottom,d=r.faceLeft||r.faceRight,v=r.faceTop||r.faceBottom;if(u||(d=!0,v=!0),!d&&!v)return!1;var y=0,g=0,m=0,x=1;if(e.deltaAbsX()>e.deltaAbsY()?m=-1:e.deltaAbsX()<e.deltaAbsY()&&(x=-1),0!==e.deltaX()&&0!==e.deltaY()&&d&&v&&(m=Math.min(Math.abs(e.position.x-f),Math.abs(e.right-c)),x=Math.min(Math.abs(e.position.y-p),Math.abs(e.bottom-l))),m<x){if(d&&0!==(y=i(e,r,c,f,h,u))&&!o(s,e))return!0;v&&(g=n(e,r,l,p,h,u))}else{if(v&&0!==(g=n(e,r,l,p,h,u))&&!o(s,e))return!0;d&&(y=i(e,r,c,f,h,u))}return 0!==y||0!==g}},21329:(t,e,r)=>{var i=r(36294);t.exports=function(t,e,r,n,o,s){var a=0,h=e.faceLeft,u=e.faceRight,c=e.collideLeft,l=e.collideRight;return s||(h=!0,u=!0,c=!0,l=!0),t.deltaX()<0&&l&&t.checkCollision.left?u&&t.x<n&&(a=t.x-n)<-o&&(a=0):t.deltaX()>0&&c&&t.checkCollision.right&&h&&t.right>r&&(a=t.right-r)>o&&(a=0),0!==a&&(t.customSeparateX?t.overlapX=a:i(t,a)),a}},53442:(t,e,r)=>{var i=r(67013);t.exports=function(t,e,r,n,o,s){var a=0,h=e.faceTop,u=e.faceBottom,c=e.collideUp,l=e.collideDown;return s||(h=!0,u=!0,c=!0,l=!0),t.deltaY()<0&&l&&t.checkCollision.up?u&&t.y<n&&(a=t.y-n)<-o&&(a=0):t.deltaY()>0&&c&&t.checkCollision.down&&h&&t.bottom>r&&(a=t.bottom-r)>o&&(a=0),0!==a&&(t.customSeparateY?t.overlapY=a:i(t,a)),a}},2483:t=>{t.exports=function(t,e){return!(e.right<=t.left||e.bottom<=t.top||e.position.x>=t.right||e.position.y>=t.bottom)}},55173:(t,e,r)=>{var i={ProcessTileCallbacks:r(96602),ProcessTileSeparationX:r(36294),ProcessTileSeparationY:r(67013),SeparateTile:r(40012),TileCheckX:r(21329),TileCheckY:r(53442),TileIntersectsBody:r(2483)};t.exports=i},44563:(t,e,r)=>{t.exports={Arcade:r(27064),Matter:r(3875)}},68174:(t,e,r)=>{var i=r(83419),n=r(26099),o=new i({initialize:function(){this.boundsCenter=new n,this.centerDiff=new n},parseBody:function(t){if(!(t=t.hasOwnProperty("body")?t.body:t).hasOwnProperty("bounds")||!t.hasOwnProperty("centerOfMass"))return!1;var e=this.boundsCenter,r=this.centerDiff,i=t.bounds.max.x-t.bounds.min.x,n=t.bounds.max.y-t.bounds.min.y,o=i*t.centerOfMass.x,s=n*t.centerOfMass.y;return e.set(i/2,n/2),r.set(o-e.x,s-e.y),!0},getTopLeft:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(t)){var i=this.boundsCenter,o=this.centerDiff;return new n(e+i.x+o.x,r+i.y+o.y)}return!1},getTopCenter:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(t)){var i=this.boundsCenter,o=this.centerDiff;return new n(e+o.x,r+i.y+o.y)}return!1},getTopRight:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(t)){var i=this.boundsCenter,o=this.centerDiff;return new n(e-(i.x-o.x),r+i.y+o.y)}return!1},getLeftCenter:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(t)){var i=this.boundsCenter,o=this.centerDiff;return new n(e+i.x+o.x,r+o.y)}return!1},getCenter:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(t)){var i=this.centerDiff;return new n(e+i.x,r+i.y)}return!1},getRightCenter:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(t)){var i=this.boundsCenter,o=this.centerDiff;return new n(e-(i.x-o.x),r+o.y)}return!1},getBottomLeft:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(t)){var i=this.boundsCenter,o=this.centerDiff;return new n(e+i.x+o.x,r-(i.y-o.y))}return!1},getBottomCenter:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(t)){var i=this.boundsCenter,o=this.centerDiff;return new n(e+o.x,r-(i.y-o.y))}return!1},getBottomRight:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(t)){var i=this.boundsCenter,o=this.centerDiff;return new n(e-(i.x-o.x),r-(i.y-o.y))}return!1}});t.exports=o},19933:(t,e,r)=>{var i=r(6790);i.Body=r(22562),i.Composite=r(69351),i.World=r(4372),i.Collision=r(52284),i.Detector=r(81388),i.Pairs=r(99561),i.Pair=r(4506),i.Query=r(73296),i.Resolver=r(66272),i.Constraint=r(48140),i.Common=r(53402),i.Engine=r(48413),i.Events=r(35810),i.Sleeping=r(53614),i.Plugin=r(73832),i.Bodies=r(66280),i.Composites=r(74116),i.Axes=r(66615),i.Bounds=r(15647),i.Svg=r(74058),i.Vector=r(31725),i.Vertices=r(41598),i.World.add=i.Composite.add,i.World.remove=i.Composite.remove,i.World.addComposite=i.Composite.addComposite,i.World.addBody=i.Composite.addBody,i.World.addConstraint=i.Composite.addConstraint,i.World.clear=i.Composite.clear,t.exports=i},28137:(t,e,r)=>{var i=r(66280),n=r(83419),o=r(74116),s=r(48140),a=r(74058),h=r(75803),u=r(23181),c=r(34803),l=r(73834),f=r(19496),p=r(85791),d=r(98713),v=r(41598),y=new n({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},rectangle:function(t,e,r,n,o){var s=i.rectangle(t,e,r,n,o);return this.world.add(s),s},trapezoid:function(t,e,r,n,o,s){var a=i.trapezoid(t,e,r,n,o,s);return this.world.add(a),a},circle:function(t,e,r,n,o){var s=i.circle(t,e,r,n,o);return this.world.add(s),s},polygon:function(t,e,r,n,o){var s=i.polygon(t,e,r,n,o);return this.world.add(s),s},fromVertices:function(t,e,r,n,o,s,a){"string"==typeof r&&(r=v.fromPath(r));var h=i.fromVertices(t,e,r,n,o,s,a);return this.world.add(h),h},fromPhysicsEditor:function(t,e,r,i,n){void 0===n&&(n=!0);var o=f.parseBody(t,e,r,i);return n&&!this.world.has(o)&&this.world.add(o),o},fromSVG:function(t,e,r,n,o,s){void 0===n&&(n=1),void 0===o&&(o={}),void 0===s&&(s=!0);for(var h=r.getElementsByTagName("path"),u=[],c=0;c<h.length;c++){var l=a.pathToVertices(h[c],30);1!==n&&v.scale(l,n,n),u.push(l)}var f=i.fromVertices(t,e,u,o);return s&&this.world.add(f),f},fromJSON:function(t,e,r,i,n){void 0===i&&(i={}),void 0===n&&(n=!0);var o=p.parseBody(t,e,r,i);return o&&n&&this.world.add(o),o},imageStack:function(t,e,r,i,n,s,a,h,c){void 0===a&&(a=0),void 0===h&&(h=0),void 0===c&&(c={});var l=this.world,f=this.sys.displayList;c.addToWorld=!1;var p=o.stack(r,i,n,s,a,h,(function(r,i){var n=new u(l,r,i,t,e,c);return f.add(n),n.body}));return l.add(p),p},stack:function(t,e,r,i,n,s,a){var h=o.stack(t,e,r,i,n,s,a);return this.world.add(h),h},pyramid:function(t,e,r,i,n,s,a){var h=o.pyramid(t,e,r,i,n,s,a);return this.world.add(h),h},chain:function(t,e,r,i,n,s){return o.chain(t,e,r,i,n,s)},mesh:function(t,e,r,i,n){return o.mesh(t,e,r,i,n)},newtonsCradle:function(t,e,r,i,n){var s=o.newtonsCradle(t,e,r,i,n);return this.world.add(s),s},car:function(t,e,r,i,n){var s=o.car(t,e,r,i,n);return this.world.add(s),s},softBody:function(t,e,r,i,n,s,a,h,u,c){var l=o.softBody(t,e,r,i,n,s,a,h,u,c);return this.world.add(l),l},joint:function(t,e,r,i,n){return this.constraint(t,e,r,i,n)},spring:function(t,e,r,i,n){return this.constraint(t,e,r,i,n)},constraint:function(t,e,r,i,n){void 0===i&&(i=1),void 0===n&&(n={}),n.bodyA="body"===t.type?t:t.body,n.bodyB="body"===e.type?e:e.body,isNaN(r)||(n.length=r),n.stiffness=i;var o=s.create(n);return this.world.add(o),o},worldConstraint:function(t,e,r,i){void 0===r&&(r=1),void 0===i&&(i={}),i.bodyB="body"===t.type?t:t.body,isNaN(e)||(i.length=e),i.stiffness=r;var n=s.create(i);return this.world.add(n),n},mouseSpring:function(t){return this.pointerConstraint(t)},pointerConstraint:function(t){void 0===t&&(t={}),t.hasOwnProperty("render")||(t.render={visible:!1});var e=new d(this.scene,this.world,t);return this.world.add(e.constraint),e},image:function(t,e,r,i,n){var o=new u(this.world,t,e,r,i,n);return this.sys.displayList.add(o),o},tileBody:function(t,e){return new l(this.world,t,e)},sprite:function(t,e,r,i,n){var o=new c(this.world,t,e,r,i,n);return this.sys.displayList.add(o),this.sys.updateList.add(o),o},gameObject:function(t,e,r){return h(this.world,t,e,r)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=y},75803:(t,e,r)=>{var i=r(31884),n=r(95540),o=r(26099);t.exports=function(t,e,r,s){void 0===r&&(r={}),void 0===s&&(s=!0);var a=e.x,h=e.y;if(e.body={temp:!0,position:{x:a,y:h}},[i.Bounce,i.Collision,i.Force,i.Friction,i.Gravity,i.Mass,i.Sensor,i.SetBody,i.Sleep,i.Static,i.Transform,i.Velocity].forEach((function(t){for(var r in t)(i=t[r]).get&&"function"==typeof i.get||i.set&&"function"==typeof i.set?Object.defineProperty(e,r,{get:t[r].get,set:t[r].set}):Object.defineProperty(e,r,{value:t[r]});var i})),e.world=t,e._tempVec2=new o(a,h),r.hasOwnProperty("type")&&"body"===r.type)e.setExistingBody(r,s);else{var u=n(r,"shape",null);u||(u="rectangle"),r.addToWorld=s,e.setBody(u,r)}return e}},23181:(t,e,r)=>{var i=r(83419),n=r(31884),o=r(95643),s=r(95540),a=r(88571),h=r(72699),u=r(26099),c=new i({Extends:a,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,h],initialize:function(t,e,r,i,n,a){o.call(this,t.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(i,n),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new u(e,r);var h=s(a,"shape",null);h?this.setBody(h,a):this.setRectangle(this.width,this.height,a),this.setPosition(e,r),this.initPipeline(),this.initPostPipeline(!0)}});t.exports=c},42045:(t,e,r)=>{var i=r(60461),n=r(66615),o=r(66280),s=r(22562),a=r(68174),h=r(15647),u=r(83419),c=r(52284),l=r(53402),f=r(69351),p=r(74116),d=r(48140),v=r(81388),y=r(20339),g=r(28137),m=r(95540),x=r(35154),b=r(18210),w=r(40178),E=r(6790),T=r(74507),S=r(46975),_=r(4506),O=r(99561),P=r(73832),M=r(37277),A=r(73296),L=r(66272),C=r(44594),R=r(74058),k=r(31725),F=r(41598),I=r(68243);l.setDecomp(r(55973));var D=new u({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=s,this.composite=f,this.collision=c,this.detector=v,this.pair=_,this.pairs=O,this.query=A,this.resolver=L,this.constraint=d,this.bodies=o,this.composites=p,this.axes=n,this.bounds=h,this.svg=R,this.vector=k,this.vertices=F,this.verts=F,this._tempVec2=k.create(),x(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),x(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),x(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),L._restingThresh=x(this.config,"restingThresh",4),L._restingThreshTangent=x(this.config,"restingThreshTangent",6),L._positionDampen=x(this.config,"positionDampen",.9),L._positionWarming=x(this.config,"positionWarming",.8),L._frictionNormalMultiplier=x(this.config,"frictionNormalMultiplier",5),t.sys.events.once(C.BOOT,this.boot,this),t.sys.events.on(C.START,this.start,this)},boot:function(){this.world=new I(this.scene,this.config),this.add=new g(this.world),this.bodyBounds=new a,this.systems.events.once(C.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new I(this.scene,this.config),this.add=new g(this.world));var t=this.systems.events;t.on(C.UPDATE,this.world.update,this.world),t.on(C.POST_UPDATE,this.world.postUpdate,this.world),t.once(C.SHUTDOWN,this.shutdown,this)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return S(m(e,"matter",{}),m(t,"matter",{}))},enableAttractorPlugin:function(){return P.register(b),P.use(E,b),this},enableWrapPlugin:function(){return P.register(T),P.use(E,T),this},enableCollisionEventsPlugin:function(){return P.register(w),P.use(E,w),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(t,e){this.world.step(t,e)},containsPoint:function(t,e,r){t=this.getMatterBodies(t);var i=k.create(e,r);return A.point(t,i).length>0},intersectPoint:function(t,e,r){r=this.getMatterBodies(r);var i=k.create(t,e),n=[];return A.point(r,i).forEach((function(t){-1===n.indexOf(t)&&n.push(t)})),n},intersectRect:function(t,e,r,i,n,o){void 0===n&&(n=!1),o=this.getMatterBodies(o);var s={min:{x:t,y:e},max:{x:t+r,y:e+i}},a=[];return A.region(o,s,n).forEach((function(t){-1===a.indexOf(t)&&a.push(t)})),a},intersectRay:function(t,e,r,i,n,o){void 0===n&&(n=1),o=this.getMatterBodies(o);for(var s=[],a=A.ray(o,k.create(t,e),k.create(r,i),n),h=0;h<a.length;h++)s.push(a[h].body);return s},intersectBody:function(t,e){e=this.getMatterBodies(e);for(var r=[],i=A.collides(t,e),n=0;n<i.length;n++){var o=i[n];o.bodyA===t?r.push(o.bodyB):r.push(o.bodyA)}return r},overlap:function(t,e,r,i,n){void 0===r&&(r=null),void 0===i&&(i=null),void 0===n&&(n=r),Array.isArray(t)||(t=[t]),t=this.getMatterBodies(t),e=this.getMatterBodies(e);for(var o=!1,s=0;s<t.length;s++)for(var a=t[s],h=A.collides(a,e),u=0;u<h.length;u++){var c=h[u],l=c.bodyA.id===a.id?c.bodyB:c.bodyA;if(!i||i.call(n,a,l,c))if(o=!0,r)r.call(n,a,l,c);else if(!i)return!0}return o},setCollisionCategory:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.category=e})),this},setCollisionGroup:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.group=e})),this},setCollidesWith:function(t,e){t=this.getMatterBodies(t);var r=0;if(Array.isArray(e))for(var i=0;i<e.length;i++)r|=e[i];else r=e;return t.forEach((function(t){t.collisionFilter.mask=r})),this},getMatterBodies:function(t){if(!t)return this.world.getAllBodies();Array.isArray(t)||(t=[t]);for(var e=[],r=0;r<t.length;r++){var i=t[r].hasOwnProperty("body")?t[r].body:t[r];e.push(i)}return e},setVelocity:function(t,e,r){t=this.getMatterBodies(t);var i=this._tempVec2;return i.x=e,i.y=r,t.forEach((function(t){s.setVelocity(t,i)})),this},setVelocityX:function(t,e){t=this.getMatterBodies(t);var r=this._tempVec2;return r.x=e,t.forEach((function(t){r.y=t.velocity.y,s.setVelocity(t,r)})),this},setVelocityY:function(t,e){t=this.getMatterBodies(t);var r=this._tempVec2;return r.y=e,t.forEach((function(t){r.x=t.velocity.x,s.setVelocity(t,r)})),this},setAngularVelocity:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){s.setAngularVelocity(t,e)})),this},applyForce:function(t,e){t=this.getMatterBodies(t);var r=this._tempVec2;return t.forEach((function(t){r.x=t.position.x,r.y=t.position.y,s.applyForce(t,r,e)})),this},applyForceFromPosition:function(t,e,r,i){t=this.getMatterBodies(t);var n=this._tempVec2;return t.forEach((function(t){void 0===i&&(i=t.angle),n.x=r*Math.cos(i),n.y=r*Math.sin(i),s.applyForce(t,e,n)})),this},applyForceFromAngle:function(t,e,r){t=this.getMatterBodies(t);var i=this._tempVec2;return t.forEach((function(t){void 0===r&&(r=t.angle),i.x=e*Math.cos(r),i.y=e*Math.sin(r),s.applyForce(t,{x:t.position.x,y:t.position.y},i)})),this},getConstraintLength:function(t){var e=t.pointA.x,r=t.pointA.y,i=t.pointB.x,n=t.pointB.y;return t.bodyA&&(e+=t.bodyA.position.x,r+=t.bodyA.position.y),t.bodyB&&(i+=t.bodyB.position.x,n+=t.bodyB.position.y),y(e,r,i,n)},alignBody:function(t,e,r,n){var o;switch(t=t.hasOwnProperty("body")?t.body:t,n){case i.TOP_LEFT:case i.LEFT_TOP:o=this.bodyBounds.getTopLeft(t,e,r);break;case i.TOP_CENTER:o=this.bodyBounds.getTopCenter(t,e,r);break;case i.TOP_RIGHT:case i.RIGHT_TOP:o=this.bodyBounds.getTopRight(t,e,r);break;case i.LEFT_CENTER:o=this.bodyBounds.getLeftCenter(t,e,r);break;case i.CENTER:o=this.bodyBounds.getCenter(t,e,r);break;case i.RIGHT_CENTER:o=this.bodyBounds.getRightCenter(t,e,r);break;case i.LEFT_BOTTOM:case i.BOTTOM_LEFT:o=this.bodyBounds.getBottomLeft(t,e,r);break;case i.BOTTOM_CENTER:o=this.bodyBounds.getBottomCenter(t,e,r);break;case i.BOTTOM_RIGHT:case i.RIGHT_BOTTOM:o=this.bodyBounds.getBottomRight(t,e,r)}return o&&s.setPosition(t,o),this},shutdown:function(){var t=this.systems.events;this.world&&(t.off(C.UPDATE,this.world.update,this.world),t.off(C.POST_UPDATE,this.world.postUpdate,this.world)),t.off(C.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(C.START,this.start,this),this.scene=null,this.systems=null}});M.register("MatterPhysics",D,"matterPhysics"),t.exports=D},34803:(t,e,r)=>{var i=r(9674),n=r(83419),o=r(31884),s=r(95643),a=r(95540),h=r(72699),u=r(68287),c=r(26099),l=new n({Extends:u,Mixins:[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity,h],initialize:function(t,e,r,n,o,h){s.call(this,t.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new i(this),this.setTexture(n,o),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new c(e,r);var u=a(h,"shape",null);u?this.setBody(u,h):this.setRectangle(this.width,this.height,h),this.setPosition(e,r),this.initPipeline(),this.initPostPipeline(!0)}});t.exports=l},73834:(t,e,r)=>{var i=r(66280),n=r(22562),o=r(83419),s=r(31884),a=r(62644),h=r(50792),u=r(95540),c=r(97022),l=r(41598),f=new o({Extends:h,Mixins:[s.Bounce,s.Collision,s.Friction,s.Gravity,s.Mass,s.Sensor,s.Sleep,s.Static],initialize:function(t,e,r){h.call(this),this.tile=e,this.world=t,e.physics.matterBody&&e.physics.matterBody.destroy(),e.physics.matterBody=this;var i=u(r,"body",null),o=u(r,"addToWorld",!0);if(i)this.setBody(i,o);else{var s=e.getCollisionGroup();u(s,"objects",[]).length>0?this.setFromTileCollision(r):this.setFromTileRectangle(r)}if(e.flipX||e.flipY){var a={x:e.getCenterX(),y:e.getCenterY()},c=e.flipX?-1:1,l=e.flipY?-1:1;n.scale(i,c,l,a)}},setFromTileRectangle:function(t){void 0===t&&(t={}),c(t,"isStatic")||(t.isStatic=!0),c(t,"addToWorld")||(t.addToWorld=!0);var e=this.tile.getBounds(),r=e.x+e.width/2,n=e.y+e.height/2,o=i.rectangle(r,n,e.width,e.height,t);return this.setBody(o,t.addToWorld),this},setFromTileCollision:function(t){void 0===t&&(t={}),c(t,"isStatic")||(t.isStatic=!0),c(t,"addToWorld")||(t.addToWorld=!0);for(var e=this.tile.tilemapLayer.scaleX,r=this.tile.tilemapLayer.scaleY,o=this.tile.getLeft(),s=this.tile.getTop(),h=this.tile.getCollisionGroup(),f=u(h,"objects",[]),p=[],d=0;d<f.length;d++){var v=f[d],y=o+v.x*e,g=s+v.y*r,m=v.width*e,x=v.height*r,b=null;if(v.rectangle)b=i.rectangle(y+m/2,g+x/2,m,x,t);else if(v.ellipse)b=i.circle(y+m/2,g+x/2,m/2,t);else if(v.polygon||v.polyline){var w=(v.polygon?v.polygon:v.polyline).map((function(t){return{x:t.x*e,y:t.y*r}})),E=l.create(w),T=l.centre(E);y+=T.x,g+=T.y,b=i.fromVertices(y,g,E,t)}b&&p.push(b)}if(1===p.length)this.setBody(p[0],t.addToWorld);else if(p.length>1){var S=a(t);S.parts=p,this.setBody(n.create(S),S.addToWorld)}return this},setBody:function(t,e){return void 0===e&&(e=!0),this.body&&this.removeBody(),this.body=t,this.body.gameObject=this,e&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});t.exports=f},19496:(t,e,r)=>{var i=r(66280),n=r(22562),o=r(53402),s=r(95540),a=r(41598),h={parseBody:function(t,e,r,i){void 0===i&&(i={});for(var a=s(r,"fixtures",[]),h=[],u=0;u<a.length;u++)for(var c=this.parseFixture(a[u]),l=0;l<c.length;l++)h.push(c[l]);var f=o.clone(r,!0);o.extend(f,i,!0),delete f.fixtures,delete f.type;var p=n.create(f);return n.setParts(p,h),n.setPosition(p,{x:t,y:e}),p},parseFixture:function(t){var e,r=o.extend({},!1,t);if(delete r.circle,delete r.vertices,t.circle){var n=s(t.circle,"x"),a=s(t.circle,"y"),h=s(t.circle,"radius");e=[i.circle(n,a,h,r)]}else t.vertices&&(e=this.parseVertices(t.vertices,r));return e},parseVertices:function(t,e){void 0===e&&(e={});for(var r=[],s=0;s<t.length;s++)a.clockwiseSort(t[s]),r.push(n.create(o.extend({position:a.centre(t[s]),vertices:t[s]},e)));return i.flagCoincidentParts(r)}};t.exports=h},85791:(t,e,r)=>{var i=r(66280),n=r(22562),o={parseBody:function(t,e,r,o){var s;void 0===o&&(o={});var a=r.vertices;if(1===a.length)o.vertices=a[0],s=n.create(o),i.flagCoincidentParts(s.parts);else{for(var h=[],u=0;u<a.length;u++){var c=n.create({vertices:a[u]});h.push(c)}i.flagCoincidentParts(h),o.parts=h,s=n.create(o)}return s.label=r.label,n.setPosition(s,{x:t,y:e}),s}};t.exports=o},98713:(t,e,r)=>{var i=r(15647),n=r(83419),o=r(69351),s=r(48140),a=r(81388),h=r(1121),u=r(8214),c=r(46975),l=r(53614),f=r(26099),p=r(41598),d=new n({initialize:function(t,e,r){void 0===r&&(r={}),this.scene=t,this.world=e,this.camera=null,this.pointer=null,this.active=!0,this.position=new f,this.body=null,this.part=null,this.constraint=s.create(c(r,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(h.BEFORE_UPDATE,this.update,this),t.sys.input.on(u.POINTER_DOWN,this.onDown,this),t.sys.input.on(u.POINTER_UP,this.onUp,this)},onDown:function(t){this.pointer||(this.pointer=t,this.camera=t.camera)},onUp:function(t){t===this.pointer&&(this.pointer=null)},getBody:function(t){var e=this.position,r=this.constraint;this.camera.getWorldPoint(t.x,t.y,e);for(var n=o.allBodies(this.world.localWorld),s=0;s<n.length;s++){var u=n[s];if(!u.ignorePointer&&i.contains(u.bounds,e)&&a.canCollide(u.collisionFilter,r.collisionFilter)&&this.hitTestBody(u,e))return this.world.emit(h.DRAG_START,u,this.part,this),!0}return!1},hitTestBody:function(t,e){for(var r=this.constraint,i=t.parts.length,n=i>1?1:0;n<i;n++){var o=t.parts[n];if(p.contains(o.vertices,e))return r.pointA=e,r.pointB={x:e.x-t.position.x,y:e.y-t.position.y},r.bodyB=t,r.angleB=t.angle,l.set(t,!1),this.part=o,this.body=t,!0}return!1},update:function(){var t=this.pointer,e=this.body;if(this.active&&t)if(t.isDown||!e){if(t.isDown){if(!this.camera||!e&&!this.getBody(t))return;e=this.body;var r=this.position,i=this.constraint;this.camera.getWorldPoint(t.x,t.y,r),i.pointA.x=r.x,i.pointA.y=r.y,l.set(e,!1),this.world.emit(h.DRAG,e,this)}}else this.stopDrag();else e&&this.stopDrag()},stopDrag:function(){var t=this.body,e=this.constraint;e.bodyB=null,e.pointB=null,this.pointer=null,this.body=null,this.part=null,t&&this.world.emit(h.DRAG_END,t,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(h.BEFORE_UPDATE,this.update),this.scene.sys.input.off(u.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(u.POINTER_UP,this.onUp,this)}});t.exports=d},68243:(t,e,r)=>{var i=r(66280),n=r(22562),o=r(83419),s=r(53402),a=r(69351),h=r(48413),u=r(50792),c=r(1121),l=r(95540),f=r(35154),p=r(22562),d=r(35810),v=r(73834),y=r(4372),g=r(31725),m=new o({Extends:u,initialize:function(t,e){u.call(this),this.scene=t,this.engine=h.create(e),this.localWorld=this.engine.world;var r=f(e,"gravity",null);r?this.setGravity(r.x,r.y,r.scale):!1===r&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=f(e,"enabled",!0),this.getDelta=f(e,"getDelta",this.update60Hz);var i=l(e,"runner",{}),n=l(i,"fps",!1),o=l(i,"fps",60),s=l(i,"delta",1e3/o),a=l(i,"deltaMin",1e3/o),c=l(i,"deltaMax",1e3/(.5*o));n||(o=1e3/s),this.runner={fps:o,deltaSampleSize:l(i,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:l(i,"isFixed",!1),delta:s,deltaMin:a,deltaMax:c},this.autoUpdate=f(e,"autoUpdate",!0);var p=f(e,"debug",!1);if(this.drawDebug="object"==typeof p||p,this.debugGraphic,this.debugConfig={showAxes:l(p,"showAxes",!1),showAngleIndicator:l(p,"showAngleIndicator",!1),angleColor:l(p,"angleColor",15208787),showBroadphase:l(p,"showBroadphase",!1),broadphaseColor:l(p,"broadphaseColor",16757760),showBounds:l(p,"showBounds",!1),boundsColor:l(p,"boundsColor",16777215),showVelocity:l(p,"showVelocity",!1),velocityColor:l(p,"velocityColor",44783),showCollisions:l(p,"showCollisions",!1),collisionColor:l(p,"collisionColor",16094476),showSeparations:l(p,"showSeparations",!1),separationColor:l(p,"separationColor",16753920),showBody:l(p,"showBody",!0),showStaticBody:l(p,"showStaticBody",!0),showInternalEdges:l(p,"showInternalEdges",!1),renderFill:l(p,"renderFill",!1),renderLine:l(p,"renderLine",!0),fillColor:l(p,"fillColor",1075465),fillOpacity:l(p,"fillOpacity",1),lineColor:l(p,"lineColor",2678297),lineOpacity:l(p,"lineOpacity",1),lineThickness:l(p,"lineThickness",1),staticFillColor:l(p,"staticFillColor",857979),staticLineColor:l(p,"staticLineColor",1255396),showSleeping:l(p,"showSleeping",!1),staticBodySleepOpacity:l(p,"staticBodySleepOpacity",.7),sleepFillColor:l(p,"sleepFillColor",4605510),sleepLineColor:l(p,"sleepLineColor",10066585),showSensors:l(p,"showSensors",!0),sensorFillColor:l(p,"sensorFillColor",857979),sensorLineColor:l(p,"sensorLineColor",1255396),showPositions:l(p,"showPositions",!0),positionSize:l(p,"positionSize",4),positionColor:l(p,"positionColor",14697178),showJoint:l(p,"showJoint",!0),jointColor:l(p,"jointColor",14737474),jointLineOpacity:l(p,"jointLineOpacity",1),jointLineThickness:l(p,"jointLineThickness",2),pinSize:l(p,"pinSize",4),pinColor:l(p,"pinColor",4382944),springColor:l(p,"springColor",14697184),anchorColor:l(p,"anchorColor",15724527),anchorSize:l(p,"anchorSize",4),showConvexHulls:l(p,"showConvexHulls",!1),hullColor:l(p,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),l(e,"setBounds",!1)){var d=e.setBounds;if("boolean"==typeof d)this.setBounds();else{var v=l(d,"x",0),y=l(d,"y",0),g=l(d,"width",t.sys.scale.width),m=l(d,"height",t.sys.scale.height),x=l(d,"thickness",64),b=l(d,"left",!0),w=l(d,"right",!0),E=l(d,"top",!0),T=l(d,"bottom",!0);this.setBounds(v,y,g,m,x,b,w,E,T)}}},setCompositeRenderStyle:function(t){var e,r,i,n=t.bodies,o=t.constraints,s=t.composites;for(e=0;e<n.length;e++)i=(r=n[e]).render,this.setBodyRenderStyle(r,i.lineColor,i.lineOpacity,i.lineThickness,i.fillColor,i.fillOpacity);for(e=0;e<o.length;e++)i=(r=o[e]).render,this.setConstraintRenderStyle(r,i.lineColor,i.lineOpacity,i.lineThickness,i.pinSize,i.anchorColor,i.anchorSize);for(e=0;e<s.length;e++)r=s[e],this.setCompositeRenderStyle(r);return this},setBodyRenderStyle:function(t,e,r,i,n,o){var s=t.render,a=this.debugConfig;return s?(null==e&&(e=t.isStatic?a.staticLineColor:a.lineColor),null==r&&(r=a.lineOpacity),null==i&&(i=a.lineThickness),null==n&&(n=t.isStatic?a.staticFillColor:a.fillColor),null==o&&(o=a.fillOpacity),!1!==e&&(s.lineColor=e),!1!==r&&(s.lineOpacity=r),!1!==i&&(s.lineThickness=i),!1!==n&&(s.fillColor=n),!1!==o&&(s.fillOpacity=o),this):this},setConstraintRenderStyle:function(t,e,r,i,n,o,s){var a=t.render,h=this.debugConfig;if(!a)return this;if(null==e){var u=a.type;"line"===u?e=h.jointColor:"pin"===u?e=h.pinColor:"spring"===u&&(e=h.springColor)}return null==r&&(r=h.jointLineOpacity),null==i&&(i=h.jointLineThickness),null==n&&(n=h.pinSize),null==o&&(o=h.anchorColor),null==s&&(s=h.anchorSize),!1!==e&&(a.lineColor=e),!1!==r&&(a.lineOpacity=r),!1!==i&&(a.lineThickness=i),!1!==n&&(a.pinSize=n),!1!==o&&(a.anchorColor=o),!1!==s&&(a.anchorSize=s),this},setEventsProxy:function(){var t=this,e=this.engine,r=this.localWorld;this.drawDebug&&(d.on(r,"compositeModified",(function(e){t.setCompositeRenderStyle(e)})),d.on(r,"beforeAdd",(function(e){for(var r=[].concat(e.object),i=0;i<r.length;i++){var n=r[i],o=n.render;"body"===n.type?t.setBodyRenderStyle(n,o.lineColor,o.lineOpacity,o.lineThickness,o.fillColor,o.fillOpacity):"composite"===n.type?t.setCompositeRenderStyle(n):"constraint"===n.type&&t.setConstraintRenderStyle(n,o.lineColor,o.lineOpacity,o.lineThickness,o.pinSize,o.anchorColor,o.anchorSize)}}))),d.on(r,"beforeAdd",(function(e){t.emit(c.BEFORE_ADD,e)})),d.on(r,"afterAdd",(function(e){t.emit(c.AFTER_ADD,e)})),d.on(r,"beforeRemove",(function(e){t.emit(c.BEFORE_REMOVE,e)})),d.on(r,"afterRemove",(function(e){t.emit(c.AFTER_REMOVE,e)})),d.on(e,"beforeUpdate",(function(e){t.emit(c.BEFORE_UPDATE,e)})),d.on(e,"afterUpdate",(function(e){t.emit(c.AFTER_UPDATE,e)})),d.on(e,"collisionStart",(function(e){var r,i,n=e.pairs;n.length>0&&(r=n[0].bodyA,i=n[0].bodyB),t.emit(c.COLLISION_START,e,r,i)})),d.on(e,"collisionActive",(function(e){var r,i,n=e.pairs;n.length>0&&(r=n[0].bodyA,i=n[0].bodyB),t.emit(c.COLLISION_ACTIVE,e,r,i)})),d.on(e,"collisionEnd",(function(e){var r,i,n=e.pairs;n.length>0&&(r=n[0].bodyA,i=n[0].bodyB),t.emit(c.COLLISION_END,e,r,i)}))},setBounds:function(t,e,r,i,n,o,s,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=this.scene.sys.scale.width),void 0===i&&(i=this.scene.sys.scale.height),void 0===n&&(n=64),void 0===o&&(o=!0),void 0===s&&(s=!0),void 0===a&&(a=!0),void 0===h&&(h=!0),this.updateWall(o,"left",t-n,e-n,n,i+2*n),this.updateWall(s,"right",t+r,e-n,n,i+2*n),this.updateWall(a,"top",t,e-n,r,n),this.updateWall(h,"bottom",t,e+i,r,n),this},updateWall:function(t,e,r,i,n,o){var s=this.walls[e];t?(s&&y.remove(this.localWorld,s),r+=n/2,i+=o/2,this.walls[e]=this.create(r,i,n,o,{isStatic:!0,friction:0,frictionStatic:0})):(s&&y.remove(this.localWorld,s),this.walls[e]=null)},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(t,e,r){return void 0===t&&(t=0),void 0===e&&(e=1),void 0===r&&(r=.001),this.localWorld.gravity.x=t,this.localWorld.gravity.y=e,this.localWorld.gravity.scale=r,this},create:function(t,e,r,n,o){var s=i.rectangle(t,e,r,n,o);return y.add(this.localWorld,s),s},add:function(t){return y.add(this.localWorld,t),this},remove:function(t,e){Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r],n=i.body?i.body:i;a.remove(this.localWorld,n,e)}return this},removeConstraint:function(t,e){return a.remove(this.localWorld,t,e),this},convertTilemapLayer:function(t,e){var r=t.layer,i=t.getTilesWithin(0,0,r.width,r.height,{isColliding:!0});return this.convertTiles(i,e),this},convertTiles:function(t,e){if(0===t.length)return this;for(var r=0;r<t.length;r++)new v(this,t[r],e);return this},nextGroup:function(t){return p.nextGroup(t)},nextCategory:function(){return p.nextCategory()},pause:function(){return this.enabled=!1,this.emit(c.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(c.RESUME),this},update:function(t,e){if(this.enabled&&this.autoUpdate){var r=this.engine,i=this.runner,n=r.timing;i.isFixed?e=this.getDelta(t,e):(e=t-i.timePrev||i.delta,i.timePrev=t,i.deltaHistory.push(e),i.deltaHistory=i.deltaHistory.slice(-i.deltaSampleSize),e=(e=(e=Math.min.apply(null,i.deltaHistory))<i.deltaMin?i.deltaMin:e)>i.deltaMax?i.deltaMax:e,i.delta=e),i.timeScalePrev=n.timeScale,i.frameCounter+=1,t-i.counterTimestamp>=1e3&&(i.fps=i.frameCounter*((t-i.counterTimestamp)/1e3),i.counterTimestamp=t,i.frameCounter=0),h.update(r,e)}},step:function(t){h.update(this.engine,t)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(t){var e=t.hasOwnProperty("body")?t.body:t;return null!==a.get(this.localWorld,e.id,e.type)},getAllBodies:function(){return a.allBodies(this.localWorld)},getAllConstraints:function(){return a.allConstraints(this.localWorld)},getAllComposites:function(){return a.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var t=this.debugConfig,e=this.engine,r=this.debugGraphic,i=a.allBodies(this.localWorld);this.debugGraphic.clear(),t.showBroadphase&&e.broadphase.controller&&this.renderGrid(e.broadphase,r,t.broadphaseColor,.5),t.showBounds&&this.renderBodyBounds(i,r,t.boundsColor,.5),(t.showBody||t.showStaticBody)&&this.renderBodies(i),t.showJoint&&this.renderJoints(),(t.showAxes||t.showAngleIndicator)&&this.renderBodyAxes(i,r,t.showAxes,t.angleColor,.5),t.showVelocity&&this.renderBodyVelocity(i,r,t.velocityColor,1,2),t.showSeparations&&this.renderSeparations(e.pairs.list,r,t.separationColor),t.showCollisions&&this.renderCollisions(e.pairs.list,r,t.collisionColor)}},renderGrid:function(t,e,r,i){e.lineStyle(1,r,i);for(var n=s.keys(t.buckets),o=0;o<n.length;o++){var a=n[o];if(!(t.buckets[a].length<2)){var h=a.split(/C|R/);e.strokeRect(parseInt(h[1],10)*t.bucketWidth,parseInt(h[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}return this},renderSeparations:function(t,e,r){e.lineStyle(1,r,1);for(var i=0;i<t.length;i++){var n=t[i];if(n.isActive){var o=n.collision,s=o.bodyA,a=o.bodyB,h=s.position,u=a.position,c=o.penetration,l=s.isStatic||a.isStatic?1:4;a.isStatic&&(l=0),e.lineBetween(u.x,u.y,u.x-c.x*l,u.y-c.y*l),l=s.isStatic||a.isStatic?1:4,s.isStatic&&(l=0),e.lineBetween(h.x,h.y,h.x-c.x*l,h.y-c.y*l)}}return this},renderCollisions:function(t,e,r){var i,n;for(e.lineStyle(1,r,.5),e.fillStyle(r,1),i=0;i<t.length;i++)if((n=t[i]).isActive)for(var o=0;o<n.activeContacts.length;o++){var s=n.activeContacts[o].vertex;e.fillRect(s.x-2,s.y-2,5,5)}for(i=0;i<t.length;i++)if((n=t[i]).isActive){var a=n.collision,h=n.activeContacts;if(h.length>0){var u=h[0].vertex.x,c=h[0].vertex.y;2===h.length&&(u=(h[0].vertex.x+h[1].vertex.x)/2,c=(h[0].vertex.y+h[1].vertex.y)/2),a.bodyB===a.supports[0].body||a.bodyA.isStatic?e.lineBetween(u-8*a.normal.x,c-8*a.normal.y,u,c):e.lineBetween(u+8*a.normal.x,c+8*a.normal.y,u,c)}}return this},renderBodyBounds:function(t,e,r,i){e.lineStyle(1,r,i);for(var n=0;n<t.length;n++){var o=t[n];if(o.render.visible){var s=o.bounds;if(s)e.strokeRect(s.min.x,s.min.y,s.max.x-s.min.x,s.max.y-s.min.y);else for(var a=o.parts,h=a.length>1?1:0;h<a.length;h++){var u=a[h];e.strokeRect(u.bounds.min.x,u.bounds.min.y,u.bounds.max.x-u.bounds.min.x,u.bounds.max.y-u.bounds.min.y)}}}return this},renderBodyAxes:function(t,e,r,i,n){e.lineStyle(1,i,n);for(var o=0;o<t.length;o++){var s,a,h,u=t[o],c=u.parts;if(u.render.visible)if(r)for(a=c.length>1?1:0;a<c.length;a++)for(s=c[a],h=0;h<s.axes.length;h++){var l=s.axes[h];e.lineBetween(s.position.x,s.position.y,s.position.x+20*l.x,s.position.y+20*l.y)}else for(a=c.length>1?1:0;a<c.length;a++)for(s=c[a],h=0;h<s.axes.length;h++)e.lineBetween(s.position.x,s.position.y,(s.vertices[0].x+s.vertices[s.vertices.length-1].x)/2,(s.vertices[0].y+s.vertices[s.vertices.length-1].y)/2)}return this},renderBodyVelocity:function(t,e,r,i,n){e.lineStyle(n,r,i);for(var o=0;o<t.length;o++){var s=t[o];s.render.visible&&e.lineBetween(s.position.x,s.position.y,s.position.x+2*(s.position.x-s.positionPrev.x),s.position.y+2*(s.position.y-s.positionPrev.y))}return this},renderBodies:function(t){for(var e=this.debugGraphic,r=this.debugConfig,i=r.showBody,n=r.showStaticBody,o=r.showSleeping,s=r.showInternalEdges,a=r.showConvexHulls,h=r.renderFill,u=r.renderLine,c=r.staticBodySleepOpacity,l=r.sleepFillColor,f=r.sleepLineColor,p=r.hullColor,d=0;d<t.length;d++){var v=t[d];if(v.render.visible&&(n||!v.isStatic)&&(i||v.isStatic)){var y=v.render.lineColor,g=v.render.lineOpacity,m=v.render.lineThickness,x=v.render.fillColor,b=v.render.fillOpacity;o&&v.isSleeping&&(v.isStatic?(g*=c,b*=c):(y=f,x=l)),h||(x=null),u||(y=null),this.renderBody(v,e,s,y,g,m,x,b);var w=v.parts.length;a&&w>1&&this.renderConvexHull(v,e,p,m)}}},renderBody:function(t,e,r,i,n,o,s,a){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=1),void 0===s&&(s=null),void 0===a&&(a=null);for(var h=this.debugConfig,u=h.sensorFillColor,c=h.sensorLineColor,l=t.parts,f=l.length,p=f>1?1:0;p<f;p++){var d=l[p],v=d.render,y=v.opacity;if(v.visible&&0!==y&&(!d.isSensor||h.showSensors)){var g=d.circleRadius;if(e.beginPath(),d.isSensor?(null!==s&&e.fillStyle(u,a*y),null!==i&&e.lineStyle(o,c,n*y)):(null!==s&&e.fillStyle(s,a*y),null!==i&&e.lineStyle(o,i,n*y)),g)e.arc(d.position.x,d.position.y,g,0,2*Math.PI);else{var m=d.vertices,x=m.length;e.moveTo(m[0].x,m[0].y);for(var b=1;b<x;b++){var w=m[b];if(!m[b-1].isInternal||r?e.lineTo(w.x,w.y):e.moveTo(w.x,w.y),b<x&&w.isInternal&&!r){var E=(b+1)%x;e.moveTo(m[E].x,m[E].y)}}e.closePath()}null!==s&&e.fillPath(),null!==i&&e.strokePath()}}if(h.showPositions&&!t.isStatic){var T=t.position.x,S=t.position.y,_=Math.ceil(h.positionSize/2);e.fillStyle(h.positionColor,1),e.fillRect(T-_,S-_,h.positionSize,h.positionSize)}return this},renderConvexHull:function(t,e,r,i){if(void 0===i&&(i=1),t.parts.length>1){var n=t.vertices;e.lineStyle(i,r),e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var o=1;o<n.length;o++)e.lineTo(n[o].x,n[o].y);e.lineTo(n[0].x,n[0].y),e.strokePath()}return this},renderJoints:function(){for(var t=this.debugGraphic,e=a.allConstraints(this.localWorld),r=0;r<e.length;r++){var i=e[r].render,n=i.lineColor,o=i.lineOpacity,s=i.lineThickness,h=i.pinSize,u=i.anchorColor,c=i.anchorSize;this.renderConstraint(e[r],t,n,o,s,h,u,c)}},renderConstraint:function(t,e,r,i,n,o,a,h){var u=t.render;if(!u.visible||!t.pointA||!t.pointB)return this;e.lineStyle(n,r,i);var c,l,f=t.bodyA,p=t.bodyB;if(c=f?g.add(f.position,t.pointA):t.pointA,"pin"===u.type)e.strokeCircle(c.x,c.y,o);else{if(l=p?g.add(p.position,t.pointB):t.pointB,e.beginPath(),e.moveTo(c.x,c.y),"spring"===u.type)for(var d,v=g.sub(l,c),y=g.perp(g.normalise(v)),m=Math.ceil(s.clamp(t.length/5,12,20)),x=1;x<m;x+=1)d=x%2==0?1:-1,e.lineTo(c.x+v.x*(x/m)+y.x*d*4,c.y+v.y*(x/m)+y.y*d*4);e.lineTo(l.x,l.y)}return e.strokePath(),u.anchors&&h>0&&(e.fillStyle(a),e.fillCircle(c.x,c.y,h),e.fillCircle(l.x,l.y,h)),this},resetCollisionIDs:function(){return n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,this},shutdown:function(){d.off(this.engine),this.removeAllListeners(),y.clear(this.localWorld,!1),h.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});t.exports=m},70410:t=>{t.exports={setBounce:function(t){return this.body.restitution=t,this}}},66968:t=>{var e={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var e=0;if(Array.isArray(t))for(var r=0;r<t.length;r++)e|=t[r];else e=t;return this.body.collisionFilter.mask=e,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,e){Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r].hasOwnProperty("body")?t[r].body:t[r];this.body.setOnCollideWith(i,e)}return this}};t.exports=e},51607:(t,e,r)=>{var i=r(22562),n={applyForce:function(t){return this._tempVec2.set(this.body.position.x,this.body.position.y),i.applyForce(this.body,this._tempVec2,t),this},applyForceFrom:function(t,e){return i.applyForce(this.body,t,e),this},thrust:function(t){var e=this.body.angle;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),i.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(t){var e=this.body.angle-Math.PI/2;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),i.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(t){var e=this.body.angle+Math.PI/2;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),i.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(t){var e=this.body.angle-Math.PI;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),i.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};t.exports=n},5436:t=>{t.exports={setFriction:function(t,e,r){return this.body.friction=t,void 0!==e&&(this.body.frictionAir=e),void 0!==r&&(this.body.frictionStatic=r),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}}},39858:t=>{t.exports={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}}},37302:(t,e,r)=>{var i=r(22562),n=r(26099),o={setMass:function(t){return i.setMass(this.body,t),this},setDensity:function(t){return i.setDensity(this.body,t),this},centerOfMass:{get:function(){return new n(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};t.exports=o},39132:t=>{t.exports={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}}},57772:(t,e,r)=>{var i=r(66280),n=r(22562),o=r(43855),s=r(95540),a=r(19496),h=r(85791),u=r(41598),c={setRectangle:function(t,e,r){return this.setBody({type:"rectangle",width:t,height:e},r)},setCircle:function(t,e){return this.setBody({type:"circle",radius:t},e)},setPolygon:function(t,e,r){return this.setBody({type:"polygon",sides:e,radius:t},r)},setTrapezoid:function(t,e,r,i){return this.setBody({type:"trapezoid",width:t,height:e,slope:r},i)},setExistingBody:function(t,e){void 0===e&&(e=!0),this.body&&this.world.remove(this.body,!0),this.body=t;for(var r=0;r<t.parts.length;r++)t.parts[r].gameObject=this;var i=this;if(t.destroy=function(){i.world.remove(i.body,!0),i.body.gameObject=null},e&&(this.world.has(t)&&this.world.remove(t,!0),this.world.add(t)),this._originComponent){var n=t.render.sprite.xOffset,s=t.render.sprite.yOffset,a=t.centerOfMass.x,h=t.centerOfMass.y;if(o(a,.5)&&o(h,.5))this.setOrigin(n+.5,s+.5);else{var u=t.centerOffset.x,c=t.centerOffset.y;this.setOrigin(n+u/this.displayWidth,s+c/this.displayHeight)}}return this},setBody:function(t,e){if(!t)return this;var r;"string"==typeof t&&(t={type:t});var o=s(t,"type","rectangle"),c=s(t,"x",this._tempVec2.x),l=s(t,"y",this._tempVec2.y),f=s(t,"width",this.width),p=s(t,"height",this.height);switch(o){case"rectangle":r=i.rectangle(c,l,f,p,e);break;case"circle":var d=s(t,"radius",Math.max(f,p)/2),v=s(t,"maxSides",25);r=i.circle(c,l,d,e,v);break;case"trapezoid":var y=s(t,"slope",.5);r=i.trapezoid(c,l,f,p,y,e);break;case"polygon":var g=s(t,"sides",5),m=s(t,"radius",Math.max(f,p)/2);r=i.polygon(c,l,g,m,e);break;case"fromVertices":case"fromVerts":var x=s(t,"verts",null);if(x)if("string"==typeof x&&(x=u.fromPath(x)),this.body&&!this.body.hasOwnProperty("temp"))n.setVertices(this.body,x),r=this.body;else{var b=s(t,"flagInternal",!1),w=s(t,"removeCollinear",.01),E=s(t,"minimumArea",10);r=i.fromVertices(c,l,x,e,b,w,E)}break;case"fromPhysicsEditor":r=a.parseBody(c,l,t,e);break;case"fromPhysicsTracer":r=h.parseBody(c,l,t,e)}return r&&this.setExistingBody(r,t.addToWorld),this}};t.exports=c},38083:(t,e,r)=>{var i=r(1121),n=r(53614),o=r(35810),s={setToSleep:function(){return n.set(this.body,!0),this},setAwake:function(){return n.set(this.body,!1),this},setSleepThreshold:function(t){return void 0===t&&(t=60),this.body.sleepThreshold=t,this},setSleepEvents:function(t,e){return this.setSleepStartEvent(t),this.setSleepEndEvent(e),this},setSleepStartEvent:function(t){if(t){var e=this.world;o.on(this.body,"sleepStart",(function(t){e.emit(i.SLEEP_START,t,this)}))}else o.off(this.body,"sleepStart");return this},setSleepEndEvent:function(t){if(t){var e=this.world;o.on(this.body,"sleepEnd",(function(t){e.emit(i.SLEEP_END,t,this)}))}else o.off(this.body,"sleepEnd");return this}};t.exports=s},90556:(t,e,r)=>{var i=r(22562),n={setStatic:function(t){return i.setStatic(this.body,t),this},isStatic:function(){return this.body.isStatic}};t.exports=n},85436:(t,e,r)=>{var i=r(22562),n=r(36383),o=r(86554),s=r(30954),a={x:{get:function(){return this.body.position.x},set:function(t){this._tempVec2.set(t,this.y),i.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(t){this._tempVec2.set(this.x,t),i.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(t){var e=1/this._scaleX,r=1/this._scaleY;this._scaleX=t,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,i.scale(this.body,e,r),i.scale(this.body,t,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(t){var e=1/this._scaleX,r=1/this._scaleY;this._scaleY=t,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,i.scale(this.body,e,r),i.scale(this.body,this._scaleX,t)}},angle:{get:function(){return s(this.body.angle*n.RAD_TO_DEG)},set:function(t){this.rotation=s(t)*n.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(t){this._rotation=o(t),i.setAngle(this.body,this._rotation)}},setPosition:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._tempVec2.set(t,e),i.setPosition(this.body,this._tempVec2),this},setRotation:function(t){return void 0===t&&(t=0),this._rotation=o(t),i.setAngle(this.body,t),this},setFixedRotation:function(){return i.setInertia(this.body,1/0),this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,i.setAngle(this.body,this.rotation),this},setScale:function(t,e,r){void 0===t&&(t=1),void 0===e&&(e=t);var n=1/this._scaleX,o=1/this._scaleY;return this._scaleX=t,this._scaleY=e,i.scale(this.body,n,o,r),i.scale(this.body,t,e,r),this}};t.exports=a},42081:(t,e,r)=>{var i=r(22562),n={setVelocityX:function(t){return this._tempVec2.set(t,this.body.velocity.y),i.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(t){return this._tempVec2.set(this.body.velocity.x,t),i.setVelocity(this.body,this._tempVec2),this},setVelocity:function(t,e){return this._tempVec2.set(t,e),i.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return i.getVelocity(this.body)},setAngularVelocity:function(t){return i.setAngularVelocity(this.body,t),this},getAngularVelocity:function(){return i.getAngularVelocity(this.body)},setAngularSpeed:function(t){return i.setAngularSpeed(this.body,t),this},getAngularSpeed:function(){return i.getAngularSpeed(this.body)}};t.exports=n},31884:(t,e,r)=>{t.exports={Bounce:r(70410),Collision:r(66968),Force:r(51607),Friction:r(5436),Gravity:r(39858),Mass:r(37302),Sensor:r(39132),SetBody:r(57772),Sleep:r(38083),Static:r(90556),Transform:r(85436),Velocity:r(42081)}},85608:t=>{t.exports="afteradd"},1213:t=>{t.exports="afterremove"},25968:t=>{t.exports="afterupdate"},67205:t=>{t.exports="beforeadd"},39438:t=>{t.exports="beforeremove"},44823:t=>{t.exports="beforeupdate"},92593:t=>{t.exports="collisionactive"},60128:t=>{t.exports="collisionend"},76861:t=>{t.exports="collisionstart"},92362:t=>{t.exports="dragend"},76408:t=>{t.exports="drag"},93971:t=>{t.exports="dragstart"},5656:t=>{t.exports="pause"},47861:t=>{t.exports="resume"},79099:t=>{t.exports="sleepend"},35906:t=>{t.exports="sleepstart"},1121:(t,e,r)=>{t.exports={AFTER_ADD:r(85608),AFTER_REMOVE:r(1213),AFTER_UPDATE:r(25968),BEFORE_ADD:r(67205),BEFORE_REMOVE:r(39438),BEFORE_UPDATE:r(44823),COLLISION_ACTIVE:r(92593),COLLISION_END:r(60128),COLLISION_START:r(76861),DRAG_END:r(92362),DRAG:r(76408),DRAG_START:r(93971),PAUSE:r(5656),RESUME:r(47861),SLEEP_END:r(79099),SLEEP_START:r(35906)}},3875:(t,e,r)=>{t.exports={BodyBounds:r(68174),Components:r(31884),Events:r(1121),Factory:r(28137),MatterGameObject:r(75803),Image:r(23181),Matter:r(19933),MatterPhysics:r(42045),PolyDecomp:r(55973),Sprite:r(34803),TileBody:r(73834),PhysicsEditorParser:r(19496),PhysicsJSONParser:r(85791),PointerConstraint:r(98713),World:r(68243)}},22562:(t,e,r)=>{var i={};t.exports=i;var n=r(41598),o=r(31725),s=r(53614),a=r(53402),h=r(15647),u=r(66615);!function(){i._timeCorrection=!0,i._inertiaScale=4,i._nextCollidingGroupId=1,i._nextNonCollidingGroupId=-1,i._nextCategory=1,i._baseDelta=1e3/60,i.create=function(e){var r={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:1e3/60,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!e.hasOwnProperty("position")&&e.hasOwnProperty("vertices")?e.position=n.centre(e.vertices):e.hasOwnProperty("vertices")||(r.vertices=n.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var i=a.extend(r,e);return t(i,e),i.setOnCollideWith=function(t,e){return e?this.onCollideWith[t.id]=e:delete this.onCollideWith[t.id],this},i},i.nextGroup=function(t){return t?i._nextNonCollidingGroupId--:i._nextCollidingGroupId++},i.nextCategory=function(){return i._nextCategory=i._nextCategory<<1,i._nextCategory};var t=function(t,e){if(e=e||{},i.set(t,{bounds:t.bounds||h.create(t.vertices),positionPrev:t.positionPrev||o.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),n.rotate(t.vertices,t.angle,t.position),u.rotate(t.axes,t.angle),h.update(t.bounds,t.vertices,t.velocity),i.set(t,{axes:e.axes||t.axes,area:e.area||t.area,mass:e.mass||t.mass,inertia:e.inertia||t.inertia}),1===t.parts.length){var r=t.bounds,s=t.centerOfMass,a=t.centerOffset,c=r.max.x-r.min.x,l=r.max.y-r.min.y;s.x=-(r.min.x-t.position.x)/c,s.y=-(r.min.y-t.position.y)/l,a.x=c*s.x,a.y=l*s.y}};i.set=function(t,e,r){var n;for(n in"string"==typeof e&&(n=e,(e={})[n]=r),e)if(Object.prototype.hasOwnProperty.call(e,n))switch(r=e[n],n){case"isStatic":i.setStatic(t,r);break;case"isSleeping":s.set(t,r);break;case"mass":i.setMass(t,r);break;case"density":i.setDensity(t,r);break;case"inertia":i.setInertia(t,r);break;case"vertices":i.setVertices(t,r);break;case"position":i.setPosition(t,r);break;case"angle":i.setAngle(t,r);break;case"velocity":i.setVelocity(t,r);break;case"angularVelocity":i.setAngularVelocity(t,r);break;case"speed":i.setSpeed(t,r);break;case"angularSpeed":i.setAngularSpeed(t,r);break;case"parts":i.setParts(t,r);break;case"centre":i.setCentre(t,r);break;default:t[n]=r}},i.setStatic=function(t,e){for(var r=0;r<t.parts.length;r++){var i=t.parts[r];e?(i.isStatic||(i._original={restitution:i.restitution,friction:i.friction,mass:i.mass,inertia:i.inertia,density:i.density,inverseMass:i.inverseMass,inverseInertia:i.inverseInertia}),i.restitution=0,i.friction=1,i.mass=i.inertia=i.density=1/0,i.inverseMass=i.inverseInertia=0,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.anglePrev=i.angle,i.angularVelocity=0,i.speed=0,i.angularSpeed=0,i.motion=0):i._original&&(i.restitution=i._original.restitution,i.friction=i._original.friction,i.mass=i._original.mass,i.inertia=i._original.inertia,i.density=i._original.density,i.inverseMass=i._original.inverseMass,i.inverseInertia=i._original.inverseInertia,i._original=null),i.isStatic=e}},i.setMass=function(t,e){var r=t.inertia/(t.mass/6);t.inertia=r*(e/6),t.inverseInertia=1/t.inertia,t.mass=e,t.inverseMass=1/t.mass,t.density=t.mass/t.area},i.setDensity=function(t,e){i.setMass(t,e*t.area),t.density=e},i.setInertia=function(t,e){t.inertia=e,t.inverseInertia=1/t.inertia},i.setVertices=function(t,e){e[0].body===t?t.vertices=e:t.vertices=n.create(e,t),t.axes=u.fromVertices(t.vertices),t.area=n.area(t.vertices),i.setMass(t,t.density*t.area);var r=n.centre(t.vertices);n.translate(t.vertices,r,-1),i.setInertia(t,i._inertiaScale*n.inertia(t.vertices,t.mass)),n.translate(t.vertices,t.position),h.update(t.bounds,t.vertices,t.velocity)},i.setParts=function(t,e,r){var o;for(e=e.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,o=0;o<e.length;o++){var s=e[o];s!==t&&(s.parent=t,t.parts.push(s))}if(1!==t.parts.length){if(r=void 0===r||r){var a=[];for(o=0;o<e.length;o++)a=a.concat(e[o].vertices);n.clockwiseSort(a);var u=n.hull(a),c=n.centre(u);i.setVertices(t,u),n.translate(t.vertices,c)}var l=i._totalProperties(t),f=l.centre.x,p=l.centre.y,d=t.bounds,v=t.centerOfMass,y=t.centerOffset;h.update(d,t.vertices,t.velocity),v.x=-(d.min.x-f)/(d.max.x-d.min.x),v.y=-(d.min.y-p)/(d.max.y-d.min.y),y.x=f,y.y=p,t.area=l.area,t.parent=t,t.position.x=f,t.position.y=p,t.positionPrev.x=f,t.positionPrev.y=p,i.setMass(t,l.mass),i.setInertia(t,l.inertia),i.setPosition(t,l.centre)}},i.setCentre=function(t,e,r){r?(t.positionPrev.x+=e.x,t.positionPrev.y+=e.y,t.position.x+=e.x,t.position.y+=e.y):(t.positionPrev.x=e.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=e.y-(t.position.y-t.positionPrev.y),t.position.x=e.x,t.position.y=e.y)},i.setPosition=function(t,e,r){var i=o.sub(e,t.position);r?(t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.velocity.x=i.x,t.velocity.y=i.y,t.speed=o.magnitude(i)):(t.positionPrev.x+=i.x,t.positionPrev.y+=i.y);for(var s=0;s<t.parts.length;s++){var a=t.parts[s];a.position.x+=i.x,a.position.y+=i.y,n.translate(a.vertices,i),h.update(a.bounds,a.vertices,t.velocity)}},i.setAngle=function(t,e,r){var i=e-t.angle;r?(t.anglePrev=t.angle,t.angularVelocity=i,t.angularSpeed=Math.abs(i)):t.anglePrev+=i;for(var s=0;s<t.parts.length;s++){var a=t.parts[s];a.angle+=i,n.rotate(a.vertices,i,t.position),u.rotate(a.axes,i),h.update(a.bounds,a.vertices,t.velocity),s>0&&o.rotateAbout(a.position,i,t.position,a.position)}},i.setVelocity=function(t,e){var r=t.deltaTime/i._baseDelta;t.positionPrev.x=t.position.x-e.x*r,t.positionPrev.y=t.position.y-e.y*r,t.velocity.x=(t.position.x-t.positionPrev.x)/r,t.velocity.y=(t.position.y-t.positionPrev.y)/r,t.speed=o.magnitude(t.velocity)},i.getVelocity=function(t){var e=i._baseDelta/t.deltaTime;return{x:(t.position.x-t.positionPrev.x)*e,y:(t.position.y-t.positionPrev.y)*e}},i.getSpeed=function(t){return o.magnitude(i.getVelocity(t))},i.setSpeed=function(t,e){i.setVelocity(t,o.mult(o.normalise(i.getVelocity(t)),e))},i.setAngularVelocity=function(t,e){var r=t.deltaTime/i._baseDelta;t.anglePrev=t.angle-e*r,t.angularVelocity=(t.angle-t.anglePrev)/r,t.angularSpeed=Math.abs(t.angularVelocity)},i.getAngularVelocity=function(t){return(t.angle-t.anglePrev)*i._baseDelta/t.deltaTime},i.getAngularSpeed=function(t){return Math.abs(i.getAngularVelocity(t))},i.setAngularSpeed=function(t,e){i.setAngularVelocity(t,a.sign(i.getAngularVelocity(t))*e)},i.translate=function(t,e,r){i.setPosition(t,o.add(t.position,e),r)},i.rotate=function(t,e,r,n){if(r){var o=Math.cos(e),s=Math.sin(e),a=t.position.x-r.x,h=t.position.y-r.y;i.setPosition(t,{x:r.x+(a*o-h*s),y:r.y+(a*s+h*o)},n),i.setAngle(t,t.angle+e,n)}else i.setAngle(t,t.angle+e,n)},i.scale=function(t,e,r,o){var s=0,a=0;o=o||t.position;for(var c=t.inertia===1/0,l=0;l<t.parts.length;l++){var f=t.parts[l];f.scale.x=e,f.scale.y=r,n.scale(f.vertices,e,r,o),f.axes=u.fromVertices(f.vertices),f.area=n.area(f.vertices),i.setMass(f,t.density*f.area),n.translate(f.vertices,{x:-f.position.x,y:-f.position.y}),i.setInertia(f,i._inertiaScale*n.inertia(f.vertices,f.mass)),n.translate(f.vertices,{x:f.position.x,y:f.position.y}),l>0&&(s+=f.area,a+=f.inertia),f.position.x=o.x+(f.position.x-o.x)*e,f.position.y=o.y+(f.position.y-o.y)*r,h.update(f.bounds,f.vertices,t.velocity)}t.parts.length>1&&(t.area=s,t.isStatic||(i.setMass(t,t.density*s),i.setInertia(t,a))),t.circleRadius&&(e===r?t.circleRadius*=e:t.circleRadius=null),c&&i.setInertia(t,1/0)},i.update=function(t,e){var r=(e=(void 0!==e?e:1e3/60)*t.timeScale)*e,s=i._timeCorrection?e/(t.deltaTime||e):1,c=1-t.frictionAir*(e/a._baseDelta),l=(t.position.x-t.positionPrev.x)*s,f=(t.position.y-t.positionPrev.y)*s;t.velocity.x=l*c+t.force.x/t.mass*r,t.velocity.y=f*c+t.force.y/t.mass*r,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.deltaTime=e,t.angularVelocity=(t.angle-t.anglePrev)*c*s+t.torque/t.inertia*r,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=o.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var p=0;p<t.parts.length;p++){var d=t.parts[p];n.translate(d.vertices,t.velocity),p>0&&(d.position.x+=t.velocity.x,d.position.y+=t.velocity.y),0!==t.angularVelocity&&(n.rotate(d.vertices,t.angularVelocity,t.position),u.rotate(d.axes,t.angularVelocity),p>0&&o.rotateAbout(d.position,t.angularVelocity,t.position,d.position)),h.update(d.bounds,d.vertices,t.velocity)}},i.updateVelocities=function(t){var e=i._baseDelta/t.deltaTime,r=t.velocity;r.x=(t.position.x-t.positionPrev.x)*e,r.y=(t.position.y-t.positionPrev.y)*e,t.speed=Math.sqrt(r.x*r.x+r.y*r.y),t.angularVelocity=(t.angle-t.anglePrev)*e,t.angularSpeed=Math.abs(t.angularVelocity)},i.applyForce=function(t,e,r){var i=e.x-t.position.x,n=e.y-t.position.y;t.force.x+=r.x,t.force.y+=r.y,t.torque+=i*r.y-n*r.x},i._totalProperties=function(t){for(var e={mass:0,area:0,inertia:0,centre:{x:0,y:0}},r=1===t.parts.length?0:1;r<t.parts.length;r++){var i=t.parts[r],n=i.mass!==1/0?i.mass:1;e.mass+=n,e.area+=i.area,e.inertia+=i.inertia,e.centre=o.add(e.centre,o.mult(i.position,n))}return e.centre=o.div(e.centre,e.mass),e}}()},69351:(t,e,r)=>{var i={};t.exports=i;var n=r(35810),o=r(53402),s=r(15647),a=r(22562);i.create=function(t){return o.extend({id:o.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},t)},i.setModified=function(t,e,r,o){if(n.trigger(t,"compositeModified",t),t.isModified=e,e&&t.cache&&(t.cache.allBodies=null,t.cache.allConstraints=null,t.cache.allComposites=null),r&&t.parent&&i.setModified(t.parent,e,r,o),o)for(var s=0;s<t.composites.length;s++){var a=t.composites[s];i.setModified(a,e,r,o)}},i.add=function(t,e){var r=[].concat(e);n.trigger(t,"beforeAdd",{object:e});for(var s=0;s<r.length;s++){var a=r[s];switch(a.type){case"body":if(a.parent!==a){o.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}i.addBody(t,a);break;case"constraint":i.addConstraint(t,a);break;case"composite":i.addComposite(t,a);break;case"mouseConstraint":i.addConstraint(t,a.constraint)}}return n.trigger(t,"afterAdd",{object:e}),t},i.remove=function(t,e,r){var o=[].concat(e);n.trigger(t,"beforeRemove",{object:e});for(var s=0;s<o.length;s++){var a=o[s];switch(a.type){case"body":i.removeBody(t,a,r);break;case"constraint":i.removeConstraint(t,a,r);break;case"composite":i.removeComposite(t,a,r);break;case"mouseConstraint":i.removeConstraint(t,a.constraint)}}return n.trigger(t,"afterRemove",{object:e}),t},i.addComposite=function(t,e){return t.composites.push(e),e.parent=t,i.setModified(t,!0,!0,!1),t},i.removeComposite=function(t,e,r){var n=o.indexOf(t.composites,e);if(-1!==n&&i.removeCompositeAt(t,n),r)for(var s=0;s<t.composites.length;s++)i.removeComposite(t.composites[s],e,!0);return t},i.removeCompositeAt=function(t,e){return t.composites.splice(e,1),i.setModified(t,!0,!0,!1),t},i.addBody=function(t,e){return t.bodies.push(e),i.setModified(t,!0,!0,!1),t},i.removeBody=function(t,e,r){var n=o.indexOf(t.bodies,e);if(-1!==n&&i.removeBodyAt(t,n),r)for(var s=0;s<t.composites.length;s++)i.removeBody(t.composites[s],e,!0);return t},i.removeBodyAt=function(t,e){return t.bodies.splice(e,1),i.setModified(t,!0,!0,!1),t},i.addConstraint=function(t,e){return t.constraints.push(e),i.setModified(t,!0,!0,!1),t},i.removeConstraint=function(t,e,r){var n=o.indexOf(t.constraints,e);if(-1!==n&&i.removeConstraintAt(t,n),r)for(var s=0;s<t.composites.length;s++)i.removeConstraint(t.composites[s],e,!0);return t},i.removeConstraintAt=function(t,e){return t.constraints.splice(e,1),i.setModified(t,!0,!0,!1),t},i.clear=function(t,e,r){if(r)for(var n=0;n<t.composites.length;n++)i.clear(t.composites[n],e,!0);return e?t.bodies=t.bodies.filter((function(t){return t.isStatic})):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,i.setModified(t,!0,!0,!1),t},i.allBodies=function(t){if(t.cache&&t.cache.allBodies)return t.cache.allBodies;for(var e=[].concat(t.bodies),r=0;r<t.composites.length;r++)e=e.concat(i.allBodies(t.composites[r]));return t.cache&&(t.cache.allBodies=e),e},i.allConstraints=function(t){if(t.cache&&t.cache.allConstraints)return t.cache.allConstraints;for(var e=[].concat(t.constraints),r=0;r<t.composites.length;r++)e=e.concat(i.allConstraints(t.composites[r]));return t.cache&&(t.cache.allConstraints=e),e},i.allComposites=function(t){if(t.cache&&t.cache.allComposites)return t.cache.allComposites;for(var e=[].concat(t.composites),r=0;r<t.composites.length;r++)e=e.concat(i.allComposites(t.composites[r]));return t.cache&&(t.cache.allComposites=e),e},i.get=function(t,e,r){var n,o;switch(r){case"body":n=i.allBodies(t);break;case"constraint":n=i.allConstraints(t);break;case"composite":n=i.allComposites(t).concat(t)}return n?0===(o=n.filter((function(t){return t.id.toString()===e.toString()}))).length?null:o[0]:null},i.move=function(t,e,r){return i.remove(t,e),i.add(r,e),t},i.rebase=function(t){for(var e=i.allBodies(t).concat(i.allConstraints(t)).concat(i.allComposites(t)),r=0;r<e.length;r++)e[r].id=o.nextId();return t},i.translate=function(t,e,r){for(var n=r?i.allBodies(t):t.bodies,o=0;o<n.length;o++)a.translate(n[o],e);return t},i.rotate=function(t,e,r,n){for(var o=Math.cos(e),s=Math.sin(e),h=n?i.allBodies(t):t.bodies,u=0;u<h.length;u++){var c=h[u],l=c.position.x-r.x,f=c.position.y-r.y;a.setPosition(c,{x:r.x+(l*o-f*s),y:r.y+(l*s+f*o)}),a.rotate(c,e)}return t},i.scale=function(t,e,r,n,o){for(var s=o?i.allBodies(t):t.bodies,h=0;h<s.length;h++){var u=s[h],c=u.position.x-n.x,l=u.position.y-n.y;a.setPosition(u,{x:n.x+c*e,y:n.y+l*r}),a.scale(u,e,r)}return t},i.bounds=function(t){for(var e=i.allBodies(t),r=[],n=0;n<e.length;n+=1){var o=e[n];r.push(o.bounds.min,o.bounds.max)}return s.create(r)}},4372:(t,e,r)=>{var i={};t.exports=i;var n=r(69351);i.create=n.create,i.add=n.add,i.remove=n.remove,i.clear=n.clear,i.addComposite=n.addComposite,i.addBody=n.addBody,i.addConstraint=n.addConstraint},52284:(t,e,r)=>{var i={};t.exports=i;var n,o,s,a=r(41598),h=r(4506);n=[],o={overlap:0,axis:null},s={overlap:0,axis:null},i.create=function(t,e){return{pair:null,collided:!1,bodyA:t,bodyB:e,parentA:t.parent,parentB:e.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},i.collides=function(t,e,r){if(i._overlapAxes(o,t.vertices,e.vertices,t.axes),o.overlap<=0)return null;if(i._overlapAxes(s,e.vertices,t.vertices,e.axes),s.overlap<=0)return null;var n,u,c=r&&r.table[h.id(t,e)];c?n=c.collision:((n=i.create(t,e)).collided=!0,n.bodyA=t.id<e.id?t:e,n.bodyB=t.id<e.id?e:t,n.parentA=n.bodyA.parent,n.parentB=n.bodyB.parent),t=n.bodyA,e=n.bodyB,u=o.overlap<s.overlap?o:s;var l=n.normal,f=n.supports,p=u.axis,d=p.x,v=p.y;d*(e.position.x-t.position.x)+v*(e.position.y-t.position.y)<0?(l.x=d,l.y=v):(l.x=-d,l.y=-v),n.tangent.x=-l.y,n.tangent.y=l.x,n.depth=u.overlap,n.penetration.x=l.x*n.depth,n.penetration.y=l.y*n.depth;var y=i._findSupports(t,e,l,1),g=0;if(a.contains(t.vertices,y[0])&&(f[g++]=y[0]),a.contains(t.vertices,y[1])&&(f[g++]=y[1]),g<2){var m=i._findSupports(e,t,l,-1);a.contains(e.vertices,m[0])&&(f[g++]=m[0]),g<2&&a.contains(e.vertices,m[1])&&(f[g++]=m[1])}return 0===g&&(f[g++]=y[0]),f.length=g,n},i._overlapAxes=function(t,e,r,i){var n,o,s,a,h,u,c=e.length,l=r.length,f=e[0].x,p=e[0].y,d=r[0].x,v=r[0].y,y=i.length,g=Number.MAX_VALUE,m=0;for(h=0;h<y;h++){var x=i[h],b=x.x,w=x.y,E=f*b+p*w,T=d*b+v*w,S=E,_=T;for(u=1;u<c;u+=1)(a=e[u].x*b+e[u].y*w)>S?S=a:a<E&&(E=a);for(u=1;u<l;u+=1)(a=r[u].x*b+r[u].y*w)>_?_=a:a<T&&(T=a);if((n=(o=S-T)<(s=_-E)?o:s)<g&&(g=n,m=h,n<=0))break}t.axis=i[m],t.overlap=g},i._projectToAxis=function(t,e,r){for(var i=e[0].x*r.x+e[0].y*r.y,n=i,o=1;o<e.length;o+=1){var s=e[o].x*r.x+e[o].y*r.y;s>n?n=s:s<i&&(i=s)}t.min=i,t.max=n},i._findSupports=function(t,e,r,i){var o,s,a,h,u,c=e.vertices,l=c.length,f=t.position.x,p=t.position.y,d=r.x*i,v=r.y*i,y=Number.MAX_VALUE;for(u=0;u<l;u+=1)(h=d*(f-(s=c[u]).x)+v*(p-s.y))<y&&(y=h,o=s);return y=d*(f-(a=c[(l+o.index-1)%l]).x)+v*(p-a.y),d*(f-(s=c[(o.index+1)%l]).x)+v*(p-s.y)<y?(n[0]=o,n[1]=s,n):(n[0]=o,n[1]=a,n)}},43424:t=>{var e={};t.exports=e,e.create=function(t){return{vertex:t,normalImpulse:0,tangentImpulse:0}}},81388:(t,e,r)=>{var i={};t.exports=i;var n=r(53402),o=r(52284);i.create=function(t){return n.extend({bodies:[],pairs:null},t)},i.setBodies=function(t,e){t.bodies=e.slice(0)},i.clear=function(t){t.bodies=[]},i.collisions=function(t){var e,r,n=[],s=t.pairs,a=t.bodies,h=a.length,u=i.canCollide,c=o.collides;for(a.sort(i._compareBoundsX),e=0;e<h;e++){var l=a[e],f=l.bounds,p=l.bounds.max.x,d=l.bounds.max.y,v=l.bounds.min.y,y=l.isStatic||l.isSleeping,g=l.parts.length,m=1===g;for(r=e+1;r<h;r++){var x=a[r];if((P=x.bounds).min.x>p)break;if(!(d<P.min.y||v>P.max.y)&&(!y||!x.isStatic&&!x.isSleeping)&&u(l.collisionFilter,x.collisionFilter)){var b=x.parts.length;if(m&&1===b)(_=c(l,x,s))&&n.push(_);else for(var w=b>1?1:0,E=g>1?1:0;E<g;E++)for(var T=l.parts[E],S=(f=T.bounds,w);S<b;S++){var _,O=x.parts[S],P=O.bounds;f.min.x>P.max.x||f.max.x<P.min.x||f.max.y<P.min.y||f.min.y>P.max.y||(_=c(T,O,s))&&n.push(_)}}}}return n},i.canCollide=function(t,e){return t.group===e.group&&0!==t.group?t.group>0:!!(t.mask&e.category)&&!!(e.mask&t.category)},i._compareBoundsX=function(t,e){return t.bounds.min.x-e.bounds.min.x}},4506:(t,e,r)=>{var i={};t.exports=i;var n=r(43424);i.create=function(t,e){var r=t.bodyA,n=t.bodyB,o={id:i.id(r,n),bodyA:r,bodyB:n,collision:t,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:r.isSensor||n.isSensor,timeCreated:e,timeUpdated:e,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(o,t,e),o},i.update=function(t,e,r){var i=t.contacts,o=e.supports,s=t.activeContacts,a=e.parentA,h=e.parentB,u=a.vertices.length;t.isActive=!0,t.timeUpdated=r,t.collision=e,t.separation=e.depth,t.inverseMass=a.inverseMass+h.inverseMass,t.friction=a.friction<h.friction?a.friction:h.friction,t.frictionStatic=a.frictionStatic>h.frictionStatic?a.frictionStatic:h.frictionStatic,t.restitution=a.restitution>h.restitution?a.restitution:h.restitution,t.slop=a.slop>h.slop?a.slop:h.slop,e.pair=t,s.length=0;for(var c=0;c<o.length;c++){var l=o[c],f=l.body===a?l.index:u+l.index,p=i[f];p?s.push(p):s.push(i[f]=n.create(l))}},i.setActive=function(t,e,r){e?(t.isActive=!0,t.timeUpdated=r):(t.isActive=!1,t.activeContacts.length=0)},i.id=function(t,e){return t.id<e.id?"A"+t.id+"B"+e.id:"A"+e.id+"B"+t.id}},99561:(t,e,r)=>{var i={};t.exports=i;var n=r(4506),o=r(53402);i.create=function(t){return o.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},i.update=function(t,e,r){var i,o,s,a,h=t.list,u=h.length,c=t.table,l=e.length,f=t.collisionStart,p=t.collisionEnd,d=t.collisionActive;for(f.length=0,p.length=0,d.length=0,a=0;a<u;a++)h[a].confirmedActive=!1;for(a=0;a<l;a++)(s=(i=e[a]).pair)?(s.isActive?d.push(s):f.push(s),n.update(s,i,r),s.confirmedActive=!0):(c[(s=n.create(i,r)).id]=s,f.push(s),h.push(s));var v=[];for(u=h.length,a=0;a<u;a++)(s=h[a]).confirmedActive||(n.setActive(s,!1,r),p.push(s),s.collision.bodyA.isSleeping||s.collision.bodyB.isSleeping||v.push(a));for(a=0;a<v.length;a++)s=h[o=v[a]-a],h.splice(o,1),delete c[s.id]},i.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}},73296:(t,e,r)=>{var i={};t.exports=i;var n=r(31725),o=r(52284),s=r(15647),a=r(66280),h=r(41598);i.collides=function(t,e){for(var r=[],i=e.length,n=t.bounds,a=o.collides,h=s.overlaps,u=0;u<i;u++){var c=e[u],l=c.parts.length,f=1===l?0:1;if(t!==c&&h(c.bounds,n))for(var p=f;p<l;p++){var d=c.parts[p];if(h(d.bounds,n)){var v=a(d,t);if(v){r.push(v);break}}}}return r},i.ray=function(t,e,r,o){o=o||1e-100;for(var s=n.angle(e,r),h=n.magnitude(n.sub(e,r)),u=.5*(r.x+e.x),c=.5*(r.y+e.y),l=a.rectangle(u,c,h,o,{angle:s}),f=i.collides(l,t),p=0;p<f.length;p+=1){var d=f[p];d.body=d.bodyB=d.bodyA}return f},i.region=function(t,e,r){for(var i=[],n=0;n<t.length;n++){var o=t[n],a=s.overlaps(o.bounds,e);(a&&!r||!a&&r)&&i.push(o)}return i},i.point=function(t,e){for(var r=[],i=0;i<t.length;i++){var n=t[i];if(s.contains(n.bounds,e))for(var o=1===n.parts.length?0:1;o<n.parts.length;o++){var a=n.parts[o];if(s.contains(a.bounds,e)&&h.contains(a.vertices,e)){r.push(n);break}}}return r}},66272:(t,e,r)=>{var i={};t.exports=i;var n=r(41598),o=r(53402),s=r(15647);i._restingThresh=2,i._restingThreshTangent=Math.sqrt(6),i._positionDampen=.9,i._positionWarming=.8,i._frictionNormalMultiplier=5,i._frictionMaxStatic=Number.MAX_VALUE,i.preSolvePosition=function(t){var e,r,i,n=t.length;for(e=0;e<n;e++)(r=t[e]).isActive&&(i=r.activeContacts.length,r.collision.parentA.totalContacts+=i,r.collision.parentB.totalContacts+=i)},i.solvePosition=function(t,e,r){var n,s,a,h,u,c,l,f,p=i._positionDampen*(r||1),d=o.clamp(e/o._baseDelta,0,1),v=t.length;for(n=0;n<v;n++)(s=t[n]).isActive&&!s.isSensor&&(h=(a=s.collision).parentA,u=a.parentB,c=a.normal,s.separation=c.x*(u.positionImpulse.x+a.penetration.x-h.positionImpulse.x)+c.y*(u.positionImpulse.y+a.penetration.y-h.positionImpulse.y));for(n=0;n<v;n++)(s=t[n]).isActive&&!s.isSensor&&(h=(a=s.collision).parentA,u=a.parentB,c=a.normal,f=s.separation-s.slop*d,(h.isStatic||u.isStatic)&&(f*=2),h.isStatic||h.isSleeping||(l=p/h.totalContacts,h.positionImpulse.x+=c.x*f*l,h.positionImpulse.y+=c.y*f*l),u.isStatic||u.isSleeping||(l=p/u.totalContacts,u.positionImpulse.x-=c.x*f*l,u.positionImpulse.y-=c.y*f*l))},i.postSolvePosition=function(t){for(var e=i._positionWarming,r=t.length,o=n.translate,a=s.update,h=0;h<r;h++){var u=t[h],c=u.positionImpulse,l=c.x,f=c.y,p=u.velocity;if(u.totalContacts=0,0!==l||0!==f){for(var d=0;d<u.parts.length;d++){var v=u.parts[d];o(v.vertices,c),a(v.bounds,v.vertices,p),v.position.x+=l,v.position.y+=f}u.positionPrev.x+=l,u.positionPrev.y+=f,l*p.x+f*p.y<0?(c.x=0,c.y=0):(c.x*=e,c.y*=e)}}},i.preSolveVelocity=function(t){var e,r,i=t.length;for(e=0;e<i;e++){var n=t[e];if(n.isActive&&!n.isSensor){var o=n.activeContacts,s=o.length,a=n.collision,h=a.parentA,u=a.parentB,c=a.normal,l=a.tangent;for(r=0;r<s;r++){var f=o[r],p=f.vertex,d=f.normalImpulse,v=f.tangentImpulse;if(0!==d||0!==v){var y=c.x*d+l.x*v,g=c.y*d+l.y*v;h.isStatic||h.isSleeping||(h.positionPrev.x+=y*h.inverseMass,h.positionPrev.y+=g*h.inverseMass,h.anglePrev+=h.inverseInertia*((p.x-h.position.x)*g-(p.y-h.position.y)*y)),u.isStatic||u.isSleeping||(u.positionPrev.x-=y*u.inverseMass,u.positionPrev.y-=g*u.inverseMass,u.anglePrev-=u.inverseInertia*((p.x-u.position.x)*g-(p.y-u.position.y)*y))}}}}},i.solveVelocity=function(t,e){var r,n,s,a,h=e/o._baseDelta,u=h*h*h,c=-i._restingThresh*h,l=i._restingThreshTangent,f=i._frictionNormalMultiplier*h,p=i._frictionMaxStatic,d=t.length;for(s=0;s<d;s++){var v=t[s];if(v.isActive&&!v.isSensor){var y=v.collision,g=y.parentA,m=y.parentB,x=g.velocity,b=m.velocity,w=y.normal.x,E=y.normal.y,T=y.tangent.x,S=y.tangent.y,_=v.activeContacts,O=_.length,P=1/O,M=g.inverseMass+m.inverseMass,A=v.friction*v.frictionStatic*f;for(x.x=g.position.x-g.positionPrev.x,x.y=g.position.y-g.positionPrev.y,b.x=m.position.x-m.positionPrev.x,b.y=m.position.y-m.positionPrev.y,g.angularVelocity=g.angle-g.anglePrev,m.angularVelocity=m.angle-m.anglePrev,a=0;a<O;a++){var L=_[a],C=L.vertex,R=C.x-g.position.x,k=C.y-g.position.y,F=C.x-m.position.x,I=C.y-m.position.y,D=x.x-k*g.angularVelocity,j=x.y+R*g.angularVelocity,B=D-(b.x-I*m.angularVelocity),N=j-(b.y+F*m.angularVelocity),G=w*B+E*N,U=T*B+S*N,Y=v.separation+G,z=Math.min(Y,1),X=(z=Y<0?0:z)*A;U<-X||U>X?(n=U>0?U:-U,(r=v.friction*(U>0?1:-1)*u)<-n?r=-n:r>n&&(r=n)):(r=U,n=p);var V=R*E-k*w,W=F*E-I*w,H=P/(M+g.inverseInertia*V*V+m.inverseInertia*W*W),q=(1+v.restitution)*G*H;if(r*=H,G<c)L.normalImpulse=0;else{var K=L.normalImpulse;L.normalImpulse+=q,L.normalImpulse>0&&(L.normalImpulse=0),q=L.normalImpulse-K}if(U<-l||U>l)L.tangentImpulse=0;else{var Z=L.tangentImpulse;L.tangentImpulse+=r,L.tangentImpulse<-n&&(L.tangentImpulse=-n),L.tangentImpulse>n&&(L.tangentImpulse=n),r=L.tangentImpulse-Z}var J=w*q+T*r,Q=E*q+S*r;g.isStatic||g.isSleeping||(g.positionPrev.x+=J*g.inverseMass,g.positionPrev.y+=Q*g.inverseMass,g.anglePrev+=(R*Q-k*J)*g.inverseInertia),m.isStatic||m.isSleeping||(m.positionPrev.x-=J*m.inverseMass,m.positionPrev.y-=Q*m.inverseMass,m.anglePrev-=(F*Q-I*J)*m.inverseInertia)}}}}},48140:(t,e,r)=>{var i={};t.exports=i;var n=r(41598),o=r(31725),s=r(53614),a=r(15647),h=r(66615),u=r(53402);i._warming=.4,i._torqueDampen=1,i._minLength=1e-6,i.create=function(t){var e=t;e.bodyA&&!e.pointA&&(e.pointA={x:0,y:0}),e.bodyB&&!e.pointB&&(e.pointB={x:0,y:0});var r=e.bodyA?o.add(e.bodyA.position,e.pointA):e.pointA,i=e.bodyB?o.add(e.bodyB.position,e.pointB):e.pointB,n=o.magnitude(o.sub(r,i));e.length=void 0!==e.length?e.length:n,e.id=e.id||u.nextId(),e.label=e.label||"Constraint",e.type="constraint",e.stiffness=e.stiffness||(e.length>0?1:.7),e.damping=e.damping||0,e.angularStiffness=e.angularStiffness||0,e.angleA=e.bodyA?e.bodyA.angle:e.angleA,e.angleB=e.bodyB?e.bodyB.angle:e.angleB,e.plugin={};var s={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return 0===e.length&&e.stiffness>.1?(s.type="pin",s.anchors=!1):e.stiffness<.9&&(s.type="spring"),e.render=u.extend(s,e.render),e},i.preSolveAll=function(t){for(var e=0;e<t.length;e+=1){var r=t[e],i=r.constraintImpulse;r.isStatic||0===i.x&&0===i.y&&0===i.angle||(r.position.x+=i.x,r.position.y+=i.y,r.angle+=i.angle)}},i.solveAll=function(t,e){for(var r=u.clamp(e/u._baseDelta,0,1),n=0;n<t.length;n+=1){var o=t[n],s=!o.bodyA||o.bodyA&&o.bodyA.isStatic,a=!o.bodyB||o.bodyB&&o.bodyB.isStatic;(s||a)&&i.solve(t[n],r)}for(n=0;n<t.length;n+=1)s=!(o=t[n]).bodyA||o.bodyA&&o.bodyA.isStatic,a=!o.bodyB||o.bodyB&&o.bodyB.isStatic,s||a||i.solve(t[n],r)},i.solve=function(t,e){var r=t.bodyA,n=t.bodyB,s=t.pointA,a=t.pointB;if(r||n){r&&!r.isStatic&&(o.rotate(s,r.angle-t.angleA,s),t.angleA=r.angle),n&&!n.isStatic&&(o.rotate(a,n.angle-t.angleB,a),t.angleB=n.angle);var h=s,u=a;if(r&&(h=o.add(r.position,s)),n&&(u=o.add(n.position,a)),h&&u){var c=o.sub(h,u),l=o.magnitude(c);l<i._minLength&&(l=i._minLength);var f,p,d,v,y,g=(l-t.length)/l,m=t.stiffness>=1||0===t.length?t.stiffness*e:t.stiffness*e*e,x=t.damping*e,b=o.mult(c,g*m),w=(r?r.inverseMass:0)+(n?n.inverseMass:0),E=w+((r?r.inverseInertia:0)+(n?n.inverseInertia:0));if(x>0){var T=o.create();d=o.div(c,l),y=o.sub(n&&o.sub(n.position,n.positionPrev)||T,r&&o.sub(r.position,r.positionPrev)||T),v=o.dot(d,y)}r&&!r.isStatic&&(p=r.inverseMass/w,r.constraintImpulse.x-=b.x*p,r.constraintImpulse.y-=b.y*p,r.position.x-=b.x*p,r.position.y-=b.y*p,x>0&&(r.positionPrev.x-=x*d.x*v*p,r.positionPrev.y-=x*d.y*v*p),f=o.cross(s,b)/E*i._torqueDampen*r.inverseInertia*(1-t.angularStiffness),r.constraintImpulse.angle-=f,r.angle-=f),n&&!n.isStatic&&(p=n.inverseMass/w,n.constraintImpulse.x+=b.x*p,n.constraintImpulse.y+=b.y*p,n.position.x+=b.x*p,n.position.y+=b.y*p,x>0&&(n.positionPrev.x+=x*d.x*v*p,n.positionPrev.y+=x*d.y*v*p),f=o.cross(a,b)/E*i._torqueDampen*n.inverseInertia*(1-t.angularStiffness),n.constraintImpulse.angle+=f,n.angle+=f)}}},i.postSolveAll=function(t){for(var e=0;e<t.length;e++){var r=t[e],u=r.constraintImpulse;if(!(r.isStatic||0===u.x&&0===u.y&&0===u.angle)){s.set(r,!1);for(var c=0;c<r.parts.length;c++){var l=r.parts[c];n.translate(l.vertices,u),c>0&&(l.position.x+=u.x,l.position.y+=u.y),0!==u.angle&&(n.rotate(l.vertices,u.angle,r.position),h.rotate(l.axes,u.angle),c>0&&o.rotateAbout(l.position,u.angle,r.position,l.position)),a.update(l.bounds,l.vertices,r.velocity)}u.angle*=i._warming,u.x*=i._warming,u.y*=i._warming}}},i.pointAWorld=function(t){return{x:(t.bodyA?t.bodyA.position.x:0)+(t.pointA?t.pointA.x:0),y:(t.bodyA?t.bodyA.position.y:0)+(t.pointA?t.pointA.y:0)}},i.pointBWorld=function(t){return{x:(t.bodyB?t.bodyB.position.x:0)+(t.pointB?t.pointB.x:0),y:(t.bodyB?t.bodyB.position.y:0)+(t.pointB?t.pointB.y:0)}},i.currentLength=function(t){var e=(t.bodyA?t.bodyA.position.x:0)+(t.pointA?t.pointA.x:0),r=(t.bodyA?t.bodyA.position.y:0)+(t.pointA?t.pointA.y:0),i=e-((t.bodyB?t.bodyB.position.x:0)+(t.pointB?t.pointB.x:0)),n=r-((t.bodyB?t.bodyB.position.y:0)+(t.pointB?t.pointB.y:0));return Math.sqrt(i*i+n*n)}},53402:(t,e,r)=>{var i={};t.exports=i,function(){i._baseDelta=1e3/60,i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i._warnedOnce={},i._decomp=null,i.extend=function(t,e){var r,n;"boolean"==typeof e?(r=2,n=e):(r=1,n=!0);for(var o=r;o<arguments.length;o++){var s=arguments[o];if(s)for(var a in s)n&&s[a]&&s[a].constructor===Object?t[a]&&t[a].constructor!==Object?t[a]=s[a]:(t[a]=t[a]||{},i.extend(t[a],n,s[a])):t[a]=s[a]}return t},i.clone=function(t,e){return i.extend({},e,t)},i.keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)e.push(r);return e},i.values=function(t){var e=[];if(Object.keys){for(var r=Object.keys(t),i=0;i<r.length;i++)e.push(t[r[i]]);return e}for(var n in t)e.push(t[n]);return e},i.get=function(t,e,r,i){e=e.split(".").slice(r,i);for(var n=0;n<e.length;n+=1)t=t[e[n]];return t},i.set=function(t,e,r,n,o){var s=e.split(".").slice(n,o);return i.get(t,e,0,-1)[s[s.length-1]]=r,r},i.shuffle=function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(i.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t},i.choose=function(t){return t[Math.floor(i.random()*t.length)]},i.isElement=function(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:!!(t&&t.nodeType&&t.nodeName)},i.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.isFunction=function(t){return"function"==typeof t},i.isPlainObject=function(t){return"object"==typeof t&&t.constructor===Object},i.isString=function(t){return"[object String]"===toString.call(t)},i.clamp=function(t,e,r){return t<e?e:t>r?r:t},i.sign=function(t){return t<0?-1:1},i.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-i._nowStartTime},i.random=function(e,r){return r=void 0!==r?r:1,(e=void 0!==e?e:0)+t()*(r-e)};var t=function(){return i._seed=(9301*i._seed+49297)%233280,i._seed/233280};i.colorToNumber=function(t){return 3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warnOnce=function(){var t=Array.prototype.slice.call(arguments).join(" ");i._warnedOnce[t]||(i.warn(t),i._warnedOnce[t]=!0)},i.deprecated=function(t,e,r){t[e]=i.chain((function(){i.warnOnce("🔅 deprecated 🔅",r)}),t[e])},i.nextId=function(){return i._nextId++},i.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0;r<t.length;r++)if(t[r]===e)return r;return-1},i.map=function(t,e){if(t.map)return t.map(e);for(var r=[],i=0;i<t.length;i+=1)r.push(e(t[i]));return r},i.topologicalSort=function(t){var e=[],r=[],n=[];for(var o in t)r[o]||n[o]||i._topologicalSort(o,r,n,t,e);return e},i._topologicalSort=function(t,e,r,n,o){var s=n[t]||[];r[t]=!0;for(var a=0;a<s.length;a+=1){var h=s[a];r[h]||e[h]||i._topologicalSort(h,e,r,n,o)}r[t]=!1,e[t]=!0,o.push(t)},i.chain=function(){for(var t=[],e=0;e<arguments.length;e+=1){var r=arguments[e];r._chained?t.push.apply(t,r._chained):t.push(r)}var i=function(){for(var e,r=new Array(arguments.length),i=0,n=arguments.length;i<n;i++)r[i]=arguments[i];for(i=0;i<t.length;i+=1){var o=t[i].apply(e,r);void 0!==o&&(e=o)}return e};return i._chained=t,i},i.chainPathBefore=function(t,e,r){return i.set(t,e,i.chain(r,i.get(t,e)))},i.chainPathAfter=function(t,e,r){return i.set(t,e,i.chain(i.get(t,e),r))},i.setDecomp=function(t){i._decomp=t},i.getDecomp=function(){var t=i._decomp;try{t||"undefined"==typeof window||(t=window.decomp),t||void 0===r.g||(t=r.g.decomp)}catch(e){t=null}return t}}()},48413:(t,e,r)=>{var i={};t.exports=i;var n=r(53614),o=r(66272),s=r(81388),a=r(99561),h=r(35810),u=r(69351),c=r(48140),l=r(53402),f=r(22562);i.create=function(t){t=t||{};var e=l.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},t);return e.world=t.world||u.create({label:"World"}),e.pairs=t.pairs||a.create(),e.detector=t.detector||s.create(),e.grid={buckets:[]},e.world.gravity=e.gravity,e.broadphase=e.grid,e.metrics={},e},i.update=function(t,e){var r,f=l.now(),p=t.world,d=t.detector,v=t.pairs,y=t.timing,g=y.timestamp;e=void 0!==e?e:l._baseDelta,e*=y.timeScale,y.timestamp+=e,y.lastDelta=e;var m={timestamp:y.timestamp,delta:e};h.trigger(t,"beforeUpdate",m);var x=u.allBodies(p),b=u.allConstraints(p);for(p.isModified&&(s.setBodies(d,x),u.setModified(p,!1,!1,!0)),t.enableSleeping&&n.update(x,e),i._bodiesApplyGravity(x,t.gravity),e>0&&i._bodiesUpdate(x,e),h.trigger(t,"beforeSolve",m),c.preSolveAll(x),r=0;r<t.constraintIterations;r++)c.solveAll(b,e);c.postSolveAll(x),d.pairs=t.pairs;var w=s.collisions(d);a.update(v,w,g),t.enableSleeping&&n.afterCollisions(v.list),v.collisionStart.length>0&&h.trigger(t,"collisionStart",{pairs:v.collisionStart,timestamp:y.timestamp,delta:e});var E=l.clamp(20/t.positionIterations,0,1);for(o.preSolvePosition(v.list),r=0;r<t.positionIterations;r++)o.solvePosition(v.list,e,E);for(o.postSolvePosition(x),c.preSolveAll(x),r=0;r<t.constraintIterations;r++)c.solveAll(b,e);for(c.postSolveAll(x),o.preSolveVelocity(v.list),r=0;r<t.velocityIterations;r++)o.solveVelocity(v.list,e);return i._bodiesUpdateVelocities(x),v.collisionActive.length>0&&h.trigger(t,"collisionActive",{pairs:v.collisionActive,timestamp:y.timestamp,delta:e}),v.collisionEnd.length>0&&h.trigger(t,"collisionEnd",{pairs:v.collisionEnd,timestamp:y.timestamp,delta:e}),i._bodiesClearForces(x),h.trigger(t,"afterUpdate",m),t.timing.lastElapsed=l.now()-f,t},i.merge=function(t,e){if(l.extend(t,e),e.world){t.world=e.world,i.clear(t);for(var r=u.allBodies(t.world),o=0;o<r.length;o++){var s=r[o];n.set(s,!1),s.id=l.nextId()}}},i.clear=function(t){a.clear(t.pairs),s.clear(t.detector)},i._bodiesClearForces=function(t){for(var e=t.length,r=0;r<e;r++){var i=t[r];i.force.x=0,i.force.y=0,i.torque=0}},i._bodiesApplyGravity=function(t,e){var r=void 0!==e.scale?e.scale:.001,i=t.length;if((0!==e.x||0!==e.y)&&0!==r)for(var n=0;n<i;n++){var o=t[n];o.ignoreGravity||o.isStatic||o.isSleeping||(o.force.y+=o.mass*e.y*r,o.force.x+=o.mass*e.x*r)}},i._bodiesUpdate=function(t,e){for(var r=t.length,i=0;i<r;i++){var n=t[i];n.isStatic||n.isSleeping||f.update(n,e)}},i._bodiesUpdateVelocities=function(t){for(var e=t.length,r=0;r<e;r++)f.updateVelocities(t[r])}},35810:(t,e,r)=>{var i={};t.exports=i;var n=r(53402);i.on=function(t,e,r){for(var i,n=e.split(" "),o=0;o<n.length;o++)i=n[o],t.events=t.events||{},t.events[i]=t.events[i]||[],t.events[i].push(r);return r},i.off=function(t,e,r){if(e){"function"==typeof e&&(r=e,e=n.keys(t.events).join(" "));for(var i=e.split(" "),o=0;o<i.length;o++){var s=t.events[i[o]],a=[];if(r&&s)for(var h=0;h<s.length;h++)s[h]!==r&&a.push(s[h]);t.events[i[o]]=a}}else t.events={}},i.trigger=function(t,e,r){var i,o,s,a,h=t.events;if(h&&n.keys(h).length>0){r||(r={}),i=e.split(" ");for(var u=0;u<i.length;u++)if(s=h[o=i[u]]){(a=n.clone(r,!1)).name=o,a.source=t;for(var c=0;c<s.length;c++)s[c].apply(t,[a])}}}},6790:(t,e,r)=>{var i={};t.exports=i;var n=r(73832),o=r(53402);i.name="matter-js",i.version="0.19.0",i.uses=[],i.used=[],i.use=function(){n.use(i,Array.prototype.slice.call(arguments))},i.before=function(t,e){return t=t.replace(/^Matter./,""),o.chainPathBefore(i,t,e)},i.after=function(t,e){return t=t.replace(/^Matter./,""),o.chainPathAfter(i,t,e)}},73832:(t,e,r)=>{var i={};t.exports=i;var n=r(53402);i._registry={},i.register=function(t){if(i.isPlugin(t)||n.warn("Plugin.register:",i.toString(t),"does not implement all required fields."),t.name in i._registry){var e=i._registry[t.name],r=i.versionParse(t.version).number,o=i.versionParse(e.version).number;r>o?(n.warn("Plugin.register:",i.toString(e),"was upgraded to",i.toString(t)),i._registry[t.name]=t):r<o?n.warn("Plugin.register:",i.toString(e),"can not be downgraded to",i.toString(t)):t!==e&&n.warn("Plugin.register:",i.toString(t),"is already registered to different plugin object")}else i._registry[t.name]=t;return t},i.resolve=function(t){return i._registry[i.dependencyParse(t).name]},i.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},i.isPlugin=function(t){return t&&t.name&&t.version&&t.install},i.isUsed=function(t,e){return t.used.indexOf(e)>-1},i.isFor=function(t,e){var r=t.for&&i.dependencyParse(t.for);return!t.for||e.name===r.name&&i.versionSatisfies(e.version,r.range)},i.use=function(t,e){if(t.uses=(t.uses||[]).concat(e||[]),0!==t.uses.length){for(var r=i.dependencies(t),o=n.topologicalSort(r),s=[],a=0;a<o.length;a+=1)if(o[a]!==t.name){var h=i.resolve(o[a]);h?i.isUsed(t,h.name)||(i.isFor(h,t)||(n.warn("Plugin.use:",i.toString(h),"is for",h.for,"but installed on",i.toString(t)+"."),h._warned=!0),h.install?h.install(t):(n.warn("Plugin.use:",i.toString(h),"does not specify an install function."),h._warned=!0),h._warned?(s.push("🔶 "+i.toString(h)),delete h._warned):s.push("✅ "+i.toString(h)),t.used.push(h.name)):s.push("❌ "+o[a])}s.length>0&&!h.silent&&n.info(s.join("  "))}else n.warn("Plugin.use:",i.toString(t),"does not specify any dependencies to install.")},i.dependencies=function(t,e){var r=i.dependencyParse(t),o=r.name;if(!(o in(e=e||{}))){t=i.resolve(t)||t,e[o]=n.map(t.uses||[],(function(e){i.isPlugin(e)&&i.register(e);var o=i.dependencyParse(e),s=i.resolve(e);return s&&!i.versionSatisfies(s.version,o.range)?(n.warn("Plugin.dependencies:",i.toString(s),"does not satisfy",i.toString(o),"used by",i.toString(r)+"."),s._warned=!0,t._warned=!0):s||(n.warn("Plugin.dependencies:",i.toString(e),"used by",i.toString(r),"could not be resolved."),t._warned=!0),o.name}));for(var s=0;s<e[o].length;s+=1)i.dependencies(e[o][s],e);return e}},i.dependencyParse=function(t){return n.isString(t)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/.test(t)||n.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}):{name:t.name,range:t.range||t.version}},i.versionParse=function(t){var e=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;e.test(t)||n.warn("Plugin.versionParse:",t,"is not a valid version or range.");var r=e.exec(t),i=Number(r[4]),o=Number(r[5]),s=Number(r[6]);return{isRange:Boolean(r[1]||r[2]),version:r[3],range:t,operator:r[1]||r[2]||"",major:i,minor:o,patch:s,parts:[i,o,s],prerelease:r[7],number:1e8*i+1e4*o+s}},i.versionSatisfies=function(t,e){e=e||"*";var r=i.versionParse(e),n=i.versionParse(t);if(r.isRange){if("*"===r.operator||"*"===t)return!0;if(">"===r.operator)return n.number>r.number;if(">="===r.operator)return n.number>=r.number;if("~"===r.operator)return n.major===r.major&&n.minor===r.minor&&n.patch>=r.patch;if("^"===r.operator)return r.major>0?n.major===r.major&&n.number>=r.number:r.minor>0?n.minor===r.minor&&n.patch>=r.patch:n.patch===r.patch}return t===e||"*"===t}},53614:(t,e,r)=>{var i={};t.exports=i;var n=r(22562),o=r(35810),s=r(53402);i._motionWakeThreshold=.18,i._motionSleepThreshold=.08,i._minBias=.9,i.update=function(t,e){for(var r=e/s._baseDelta,o=i._motionSleepThreshold,a=0;a<t.length;a++){var h=t[a],u=n.getSpeed(h),c=n.getAngularSpeed(h),l=u*u+c*c;if(0===h.force.x&&0===h.force.y){var f=Math.min(h.motion,l),p=Math.max(h.motion,l);h.motion=i._minBias*f+(1-i._minBias)*p,h.sleepThreshold>0&&h.motion<o?(h.sleepCounter+=1,h.sleepCounter>=h.sleepThreshold/r&&i.set(h,!0)):h.sleepCounter>0&&(h.sleepCounter-=1)}else i.set(h,!1)}},i.afterCollisions=function(t){for(var e=i._motionSleepThreshold,r=0;r<t.length;r++){var n=t[r];if(n.isActive){var o=n.collision,s=o.bodyA.parent,a=o.bodyB.parent;if(!(s.isSleeping&&a.isSleeping||s.isStatic||a.isStatic)&&(s.isSleeping||a.isSleeping)){var h=s.isSleeping&&!s.isStatic?s:a,u=h===s?a:s;!h.isStatic&&u.motion>e&&i.set(h,!1)}}}},i.set=function(t,e){var r=t.isSleeping;e?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,r||o.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,r&&o.trigger(t,"sleepEnd"))}},66280:(t,e,r)=>{var i={};t.exports=i;var n=r(41598),o=r(53402),s=r(22562),a=r(15647),h=r(31725);i.rectangle=function(t,e,r,i,a){a=a||{};var h={label:"Rectangle Body",position:{x:t,y:e},vertices:n.fromPath("L 0 0 L "+r+" 0 L "+r+" "+i+" L 0 "+i)};if(a.chamfer){var u=a.chamfer;h.vertices=n.chamfer(h.vertices,u.radius,u.quality,u.qualityMin,u.qualityMax),delete a.chamfer}return s.create(o.extend({},h,a))},i.trapezoid=function(t,e,r,i,a,h){h=h||{};var u,c=r*(a*=.5),l=c+(1-2*a)*r,f=l+c;u=a<.5?"L 0 0 L "+c+" "+-i+" L "+l+" "+-i+" L "+f+" 0":"L 0 0 L "+l+" "+-i+" L "+f+" 0";var p={label:"Trapezoid Body",position:{x:t,y:e},vertices:n.fromPath(u)};if(h.chamfer){var d=h.chamfer;p.vertices=n.chamfer(p.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete h.chamfer}return s.create(o.extend({},p,h))},i.circle=function(t,e,r,n,s){n=n||{};var a={label:"Circle Body",circleRadius:r};s=s||25;var h=Math.ceil(Math.max(10,Math.min(s,r)));return h%2==1&&(h+=1),i.polygon(t,e,h,r,o.extend({},a,n))},i.polygon=function(t,e,r,a,h){if(h=h||{},r<3)return i.circle(t,e,a,h);for(var u=2*Math.PI/r,c="",l=.5*u,f=0;f<r;f+=1){var p=l+f*u,d=Math.cos(p)*a,v=Math.sin(p)*a;c+="L "+d.toFixed(3)+" "+v.toFixed(3)+" "}var y={label:"Polygon Body",position:{x:t,y:e},vertices:n.fromPath(c)};if(h.chamfer){var g=h.chamfer;y.vertices=n.chamfer(y.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete h.chamfer}return s.create(o.extend({},y,h))},i.fromVertices=function(t,e,r,i,u,c,l,f){var p,d,v,y,g,m,x,b,w,E,T=o.getDecomp();for(p=Boolean(T&&T.quickDecomp),i=i||{},v=[],u=void 0!==u&&u,c=void 0!==c?c:.01,l=void 0!==l?l:10,f=void 0!==f?f:.01,o.isArray(r[0])||(r=[r]),w=0;w<r.length;w+=1)if(g=r[w],!(y=n.isConvex(g))&&!p&&o.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),y||!p)g=y?n.clockwiseSort(g):n.hull(g),v.push({position:{x:t,y:e},vertices:g});else{var S=g.map((function(t){return[t.x,t.y]}));T.makeCCW(S),!1!==c&&T.removeCollinearPoints(S,c),!1!==f&&T.removeDuplicatePoints&&T.removeDuplicatePoints(S,f);var _=T.quickDecomp(S);for(m=0;m<_.length;m++){var O=_[m].map((function(t){return{x:t[0],y:t[1]}}));l>0&&n.area(O)<l||v.push({position:n.centre(O),vertices:O})}}for(m=0;m<v.length;m++)v[m]=s.create(o.extend(v[m],i));if(u)for(m=0;m<v.length;m++){var P=v[m];for(x=m+1;x<v.length;x++){var M=v[x];if(a.overlaps(P.bounds,M.bounds)){var A=P.vertices,L=M.vertices;for(b=0;b<P.vertices.length;b++)for(E=0;E<M.vertices.length;E++){var C=h.magnitudeSquared(h.sub(A[(b+1)%A.length],L[E])),R=h.magnitudeSquared(h.sub(A[b],L[(E+1)%L.length]));C<5&&R<5&&(A[b].isInternal=!0,L[E].isInternal=!0)}}}}return v.length>1?(d=s.create(o.extend({parts:v.slice(0)},i)),s.setPosition(d,{x:t,y:e}),d):v[0]},i.flagCoincidentParts=function(t,e){void 0===e&&(e=5);for(var r=0;r<t.length;r++)for(var i=t[r],n=r+1;n<t.length;n++){var o=t[n];if(a.overlaps(i.bounds,o.bounds))for(var s=i.vertices,u=o.vertices,c=0;c<i.vertices.length;c++)for(var l=0;l<o.vertices.length;l++){var f=h.magnitudeSquared(h.sub(s[(c+1)%s.length],u[l])),p=h.magnitudeSquared(h.sub(s[c],u[(l+1)%u.length]));f<e&&p<e&&(s[c].isInternal=!0,u[l].isInternal=!0)}}return t}},74116:(t,e,r)=>{var i={};t.exports=i;var n=r(69351),o=r(48140),s=r(53402),a=r(22562),h=r(66280);i.stack=function(t,e,r,i,o,s,h){for(var u,c=n.create({label:"Stack"}),l=t,f=e,p=0,d=0;d<i;d++){for(var v=0,y=0;y<r;y++){var g=h(l,f,y,d,u,p);if(g){var m=g.bounds.max.y-g.bounds.min.y,x=g.bounds.max.x-g.bounds.min.x;m>v&&(v=m),a.translate(g,{x:.5*x,y:.5*m}),l=g.bounds.max.x+o,n.addBody(c,g),u=g,p+=1}else l+=o}f+=v+s,l=t}return c},i.chain=function(t,e,r,i,a,h){for(var u=t.bodies,c=1;c<u.length;c++){var l=u[c-1],f=u[c],p=l.bounds.max.y-l.bounds.min.y,d=l.bounds.max.x-l.bounds.min.x,v=f.bounds.max.y-f.bounds.min.y,y={bodyA:l,pointA:{x:d*e,y:p*r},bodyB:f,pointB:{x:(f.bounds.max.x-f.bounds.min.x)*i,y:v*a}},g=s.extend(y,h);n.addConstraint(t,o.create(g))}return t.label+=" Chain",t},i.mesh=function(t,e,r,i,a){var h,u,c,l,f,p=t.bodies;for(h=0;h<r;h++){for(u=1;u<e;u++)c=p[u-1+h*e],l=p[u+h*e],n.addConstraint(t,o.create(s.extend({bodyA:c,bodyB:l},a)));if(h>0)for(u=0;u<e;u++)c=p[u+(h-1)*e],l=p[u+h*e],n.addConstraint(t,o.create(s.extend({bodyA:c,bodyB:l},a))),i&&u>0&&(f=p[u-1+(h-1)*e],n.addConstraint(t,o.create(s.extend({bodyA:f,bodyB:l},a)))),i&&u<e-1&&(f=p[u+1+(h-1)*e],n.addConstraint(t,o.create(s.extend({bodyA:f,bodyB:l},a))))}return t.label+=" Mesh",t},i.pyramid=function(t,e,r,n,o,s,h){return i.stack(t,e,r,n,o,s,(function(e,i,s,u,c,l){var f=Math.min(n,Math.ceil(r/2)),p=c?c.bounds.max.x-c.bounds.min.x:0;if(!(u>f||s<(u=f-u)||s>r-1-u))return 1===l&&a.translate(c,{x:(s+(r%2==1?1:-1))*p,y:0}),h(t+(c?s*p:0)+s*o,i,s,u,c,l)}))},i.newtonsCradle=function(t,e,r,i,s){for(var a=n.create({label:"Newtons Cradle"}),u=0;u<r;u++){var c=h.circle(t+u*(1.9*i),e+s,i,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),l=o.create({pointA:{x:t+u*(1.9*i),y:e},bodyB:c});n.addBody(a,c),n.addConstraint(a,l)}return a},i.car=function(t,e,r,i,s){var u=a.nextGroup(!0),c=.5*-r+20,l=.5*r-20,f=n.create({label:"Car"}),p=h.rectangle(t,e,r,i,{collisionFilter:{group:u},chamfer:{radius:.5*i},density:2e-4}),d=h.circle(t+c,e+0,s,{collisionFilter:{group:u},friction:.8}),v=h.circle(t+l,e+0,s,{collisionFilter:{group:u},friction:.8}),y=o.create({bodyB:p,pointB:{x:c,y:0},bodyA:d,stiffness:1,length:0}),g=o.create({bodyB:p,pointB:{x:l,y:0},bodyA:v,stiffness:1,length:0});return n.addBody(f,p),n.addBody(f,d),n.addBody(f,v),n.addConstraint(f,y),n.addConstraint(f,g),f},i.softBody=function(t,e,r,n,o,a,u,c,l,f){l=s.extend({inertia:1/0},l),f=s.extend({stiffness:.2,render:{type:"line",anchors:!1}},f);var p=i.stack(t,e,r,n,o,a,(function(t,e){return h.circle(t,e,c,l)}));return i.mesh(p,r,n,u,f),p.label="Soft Body",p}},66615:(t,e,r)=>{var i={};t.exports=i;var n=r(31725),o=r(53402);i.fromVertices=function(t){for(var e={},r=0;r<t.length;r++){var i=(r+1)%t.length,s=n.normalise({x:t[i].y-t[r].y,y:t[r].x-t[i].x}),a=0===s.y?1/0:s.x/s.y;e[a=a.toFixed(3).toString()]=s}return o.values(e)},i.rotate=function(t,e){if(0!==e)for(var r=Math.cos(e),i=Math.sin(e),n=0;n<t.length;n++){var o,s=t[n];o=s.x*r-s.y*i,s.y=s.x*i+s.y*r,s.x=o}}},15647:t=>{var e={};t.exports=e,e.create=function(t){var r={min:{x:0,y:0},max:{x:0,y:0}};return t&&e.update(r,t),r},e.update=function(t,e,r){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var i=0;i<e.length;i++){var n=e[i];n.x>t.max.x&&(t.max.x=n.x),n.x<t.min.x&&(t.min.x=n.x),n.y>t.max.y&&(t.max.y=n.y),n.y<t.min.y&&(t.min.y=n.y)}r&&(r.x>0?t.max.x+=r.x:t.min.x+=r.x,r.y>0?t.max.y+=r.y:t.min.y+=r.y)},e.contains=function(t,e){return e.x>=t.min.x&&e.x<=t.max.x&&e.y>=t.min.y&&e.y<=t.max.y},e.overlaps=function(t,e){return t.min.x<=e.max.x&&t.max.x>=e.min.x&&t.max.y>=e.min.y&&t.min.y<=e.max.y},e.translate=function(t,e){t.min.x+=e.x,t.max.x+=e.x,t.min.y+=e.y,t.max.y+=e.y},e.shift=function(t,e){var r=t.max.x-t.min.x,i=t.max.y-t.min.y;t.min.x=e.x,t.max.x=e.x+r,t.min.y=e.y,t.max.y=e.y+i}},74058:(t,e,r)=>{var i={};t.exports=i,r(15647);var n=r(53402);i.pathToVertices=function(t,e){"undefined"==typeof window||"SVGPathSeg"in window||n.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var r,o,s,a,h,u,c,l,f,p,d,v=[],y=0,g=0,m=0;e=e||15;var x=function(t,e,r){var i=r%2==1&&r>1;if(!f||t!=f.x||e!=f.y){f&&i?(p=f.x,d=f.y):(p=0,d=0);var n={x:p+t,y:d+e};!i&&f||(f=n),v.push(n),g=p+t,m=d+e}},b=function(t){var e=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==e){switch(e){case"M":case"L":case"T":case"C":case"S":case"Q":g=t.x,m=t.y;break;case"H":g=t.x;break;case"V":m=t.y}x(g,m,t.pathSegType)}};for(i._svgPathToAbsolute(t),s=t.getTotalLength(),u=[],r=0;r<t.pathSegList.numberOfItems;r+=1)u.push(t.pathSegList.getItem(r));for(c=u.concat();y<s;){if((h=u[t.getPathSegAtLength(y)])!=l){for(;c.length&&c[0]!=h;)b(c.shift());l=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=t.getPointAtLength(y),x(a.x,a.y,0)}y+=e}for(r=0,o=c.length;r<o;++r)b(c[r]);return v},i._svgPathToAbsolute=function(t){for(var e,r,i,n,o,s,a=t.pathSegList,h=0,u=0,c=a.numberOfItems,l=0;l<c;++l){var f=a.getItem(l),p=f.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(p))"x"in f&&(h=f.x),"y"in f&&(u=f.y);else switch("x1"in f&&(i=h+f.x1),"x2"in f&&(o=h+f.x2),"y1"in f&&(n=u+f.y1),"y2"in f&&(s=u+f.y2),"x"in f&&(h+=f.x),"y"in f&&(u+=f.y),p){case"m":a.replaceItem(t.createSVGPathSegMovetoAbs(h,u),l);break;case"l":a.replaceItem(t.createSVGPathSegLinetoAbs(h,u),l);break;case"h":a.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(h),l);break;case"v":a.replaceItem(t.createSVGPathSegLinetoVerticalAbs(u),l);break;case"c":a.replaceItem(t.createSVGPathSegCurvetoCubicAbs(h,u,i,n,o,s),l);break;case"s":a.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(h,u,o,s),l);break;case"q":a.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(h,u,i,n),l);break;case"t":a.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(h,u),l);break;case"a":a.replaceItem(t.createSVGPathSegArcAbs(h,u,f.r1,f.r2,f.angle,f.largeArcFlag,f.sweepFlag),l);break;case"z":case"Z":h=e,u=r}"M"!=p&&"m"!=p||(e=h,r=u)}}},31725:t=>{var e={};t.exports=e,e.create=function(t,e){return{x:t||0,y:e||0}},e.clone=function(t){return{x:t.x,y:t.y}},e.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},e.rotate=function(t,e,r){var i=Math.cos(e),n=Math.sin(e);r||(r={});var o=t.x*i-t.y*n;return r.y=t.x*n+t.y*i,r.x=o,r},e.rotateAbout=function(t,e,r,i){var n=Math.cos(e),o=Math.sin(e);i||(i={});var s=r.x+((t.x-r.x)*n-(t.y-r.y)*o);return i.y=r.y+((t.x-r.x)*o+(t.y-r.y)*n),i.x=s,i},e.normalise=function(t){var r=e.magnitude(t);return 0===r?{x:0,y:0}:{x:t.x/r,y:t.y/r}},e.dot=function(t,e){return t.x*e.x+t.y*e.y},e.cross=function(t,e){return t.x*e.y-t.y*e.x},e.cross3=function(t,e,r){return(e.x-t.x)*(r.y-t.y)-(e.y-t.y)*(r.x-t.x)},e.add=function(t,e,r){return r||(r={}),r.x=t.x+e.x,r.y=t.y+e.y,r},e.sub=function(t,e,r){return r||(r={}),r.x=t.x-e.x,r.y=t.y-e.y,r},e.mult=function(t,e){return{x:t.x*e,y:t.y*e}},e.div=function(t,e){return{x:t.x/e,y:t.y/e}},e.perp=function(t,e){return{x:(e=!0===e?-1:1)*-t.y,y:e*t.x}},e.neg=function(t){return{x:-t.x,y:-t.y}},e.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},e._temp=[e.create(),e.create(),e.create(),e.create(),e.create(),e.create()]},41598:(t,e,r)=>{var i={};t.exports=i;var n=r(31725),o=r(53402);i.create=function(t,e){for(var r=[],i=0;i<t.length;i++){var n=t[i],o={x:n.x,y:n.y,index:i,body:e,isInternal:!1};r.push(o)}return r},i.fromPath=function(t,e){var r=[];return t.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(t,e,i){r.push({x:parseFloat(e),y:parseFloat(i)})})),i.create(r,e)},i.centre=function(t){for(var e,r,o,s=i.area(t,!0),a={x:0,y:0},h=0;h<t.length;h++)o=(h+1)%t.length,e=n.cross(t[h],t[o]),r=n.mult(n.add(t[h],t[o]),e),a=n.add(a,r);return n.div(a,6*s)},i.mean=function(t){for(var e={x:0,y:0},r=0;r<t.length;r++)e.x+=t[r].x,e.y+=t[r].y;return n.div(e,t.length)},i.area=function(t,e){for(var r=0,i=t.length-1,n=0;n<t.length;n++)r+=(t[i].x-t[n].x)*(t[i].y+t[n].y),i=n;return e?r/2:Math.abs(r)/2},i.inertia=function(t,e){for(var r,i,o=0,s=0,a=t,h=0;h<a.length;h++)i=(h+1)%a.length,o+=(r=Math.abs(n.cross(a[i],a[h])))*(n.dot(a[i],a[i])+n.dot(a[i],a[h])+n.dot(a[h],a[h])),s+=r;return e/6*(o/s)},i.translate=function(t,e,r){r=void 0!==r?r:1;var i,n=t.length,o=e.x*r,s=e.y*r;for(i=0;i<n;i++)t[i].x+=o,t[i].y+=s;return t},i.rotate=function(t,e,r){if(0!==e){var i,n,o,s,a=Math.cos(e),h=Math.sin(e),u=r.x,c=r.y,l=t.length;for(s=0;s<l;s++)n=(i=t[s]).x-u,o=i.y-c,i.x=u+(n*a-o*h),i.y=c+(n*h+o*a);return t}},i.contains=function(t,e){for(var r,i=e.x,n=e.y,o=t.length,s=t[o-1],a=0;a<o;a++){if(r=t[a],(i-s.x)*(r.y-s.y)+(n-s.y)*(s.x-r.x)>0)return!1;s=r}return!0},i.scale=function(t,e,r,o){if(1===e&&1===r)return t;var s,a;o=o||i.centre(t);for(var h=0;h<t.length;h++)s=t[h],a=n.sub(s,o),t[h].x=o.x+a.x*e,t[h].y=o.y+a.y*r;return t},i.chamfer=function(t,e,r,i,s){e="number"==typeof e?[e]:e||[8],r=void 0!==r?r:-1,i=i||2,s=s||14;for(var a=[],h=0;h<t.length;h++){var u=t[h-1>=0?h-1:t.length-1],c=t[h],l=t[(h+1)%t.length],f=e[h<e.length?h:e.length-1];if(0!==f){var p=n.normalise({x:c.y-u.y,y:u.x-c.x}),d=n.normalise({x:l.y-c.y,y:c.x-l.x}),v=Math.sqrt(2*Math.pow(f,2)),y=n.mult(o.clone(p),f),g=n.normalise(n.mult(n.add(p,d),.5)),m=n.sub(c,n.mult(g,v)),x=r;-1===r&&(x=1.75*Math.pow(f,.32)),(x=o.clamp(x,i,s))%2==1&&(x+=1);for(var b=Math.acos(n.dot(p,d))/x,w=0;w<x;w++)a.push(n.add(n.rotate(y,b*w),m))}else a.push(c)}return a},i.clockwiseSort=function(t){var e=i.mean(t);return t.sort((function(t,r){return n.angle(e,t)-n.angle(e,r)})),t},i.isConvex=function(t){var e,r,i,n,o=0,s=t.length;if(s<3)return null;for(e=0;e<s;e++)if(i=(e+2)%s,n=(t[r=(e+1)%s].x-t[e].x)*(t[i].y-t[r].y),(n-=(t[r].y-t[e].y)*(t[i].x-t[r].x))<0?o|=1:n>0&&(o|=2),3===o)return!1;return 0!==o||null},i.hull=function(t){var e,r,i=[],o=[];for((t=t.slice(0)).sort((function(t,e){var r=t.x-e.x;return 0!==r?r:t.y-e.y})),r=0;r<t.length;r+=1){for(e=t[r];o.length>=2&&n.cross3(o[o.length-2],o[o.length-1],e)<=0;)o.pop();o.push(e)}for(r=t.length-1;r>=0;r-=1){for(e=t[r];i.length>=2&&n.cross3(i[i.length-2],i[i.length-1],e)<=0;)i.pop();i.push(e)}return i.pop(),o.pop(),i.concat(o)}},18210:(t,e,r)=>{var i=r(19933),n={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(t){t.after("Body.create",(function(){n.Body.init(this)})),t.before("Engine.update",(function(t){n.Engine.update(t)}))},Body:{init:function(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update:function(t){for(var e=i.Composite.allBodies(t.world),r=0;r<e.length;r++){var n=e[r],o=n.plugin.attractors;if(o&&o.length>0)for(var s=0;s<e.length;s++){var a=e[s];if(r!==s)for(var h=0;h<o.length;h++){var u=o[h],c=u;i.Common.isFunction(u)&&(c=u(n,a)),c&&i.Body.applyForce(a,a.position,c)}}}}},Attractors:{gravityConstant:.001,gravity:function(t,e){var r=i.Vector.sub(e.position,t.position),o=i.Vector.magnitudeSquared(r)||1e-4,s=i.Vector.normalise(r),a=-n.Attractors.gravityConstant*(t.mass*e.mass/o),h=i.Vector.mult(s,a);i.Body.applyForce(t,t.position,i.Vector.neg(h)),i.Body.applyForce(e,e.position,h)}}};t.exports=n},40178:t=>{t.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(t){t.after("Engine.create",(function(){t.Events.on(this,"collisionStart",(function(e){e.pairs.map((function(e){var r=e.bodyA,i=e.bodyB;r.gameObject&&r.gameObject.emit("collide",r,i,e),i.gameObject&&i.gameObject.emit("collide",i,r,e),t.Events.trigger(r,"onCollide",{pair:e}),t.Events.trigger(i,"onCollide",{pair:e}),r.onCollideCallback&&r.onCollideCallback(e),i.onCollideCallback&&i.onCollideCallback(e),r.onCollideWith[i.id]&&r.onCollideWith[i.id](i,e),i.onCollideWith[r.id]&&i.onCollideWith[r.id](r,e)}))})),t.Events.on(this,"collisionActive",(function(e){e.pairs.map((function(e){var r=e.bodyA,i=e.bodyB;r.gameObject&&r.gameObject.emit("collideActive",r,i,e),i.gameObject&&i.gameObject.emit("collideActive",i,r,e),t.Events.trigger(r,"onCollideActive",{pair:e}),t.Events.trigger(i,"onCollideActive",{pair:e}),r.onCollideActiveCallback&&r.onCollideActiveCallback(e),i.onCollideActiveCallback&&i.onCollideActiveCallback(e)}))})),t.Events.on(this,"collisionEnd",(function(e){e.pairs.map((function(e){var r=e.bodyA,i=e.bodyB;r.gameObject&&r.gameObject.emit("collideEnd",r,i,e),i.gameObject&&i.gameObject.emit("collideEnd",i,r,e),t.Events.trigger(r,"onCollideEnd",{pair:e}),t.Events.trigger(i,"onCollideEnd",{pair:e}),r.onCollideEndCallback&&r.onCollideEndCallback(e),i.onCollideEndCallback&&i.onCollideEndCallback(e)}))}))}))}}},74507:(t,e,r)=>{var i=r(19933),n={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(t){t.after("Engine.update",(function(){n.Engine.update(this)}))},Engine:{update:function(t){for(var e=t.world,r=i.Composite.allBodies(e),o=i.Composite.allComposites(e),s=0;s<r.length;s+=1){var a=r[s];a.plugin.wrap&&n.Body.wrap(a,a.plugin.wrap)}for(s=0;s<o.length;s+=1){var h=o[s];h.plugin.wrap&&n.Composite.wrap(h,h.plugin.wrap)}}},Bounds:{wrap:function(t,e){var r=null,i=null;if(void 0!==e.min.x&&void 0!==e.max.x&&(t.min.x>e.max.x?r=e.min.x-t.max.x:t.max.x<e.min.x&&(r=e.max.x-t.min.x)),void 0!==e.min.y&&void 0!==e.max.y&&(t.min.y>e.max.y?i=e.min.y-t.max.y:t.max.y<e.min.y&&(i=e.max.y-t.min.y)),null!==r||null!==i)return{x:r||0,y:i||0}}},Body:{wrap:function(t,e){var r=n.Bounds.wrap(t.bounds,e);return r&&i.Body.translate(t,r),r}},Composite:{bounds:function(t){for(var e=i.Composite.allBodies(t),r=[],n=0;n<e.length;n+=1){var o=e[n];r.push(o.bounds.min,o.bounds.max)}return i.Bounds.create(r)},wrap:function(t,e){var r=n.Bounds.wrap(n.Composite.bounds(t),e);return r&&i.Composite.translate(t,r),r}}};t.exports=n},55973:t=>{function e(t,e,r){r=r||0;var i,n,o,s,a,h,u,c=[0,0];return i=t[1][1]-t[0][1],n=t[0][0]-t[1][0],o=i*t[0][0]+n*t[0][1],s=e[1][1]-e[0][1],a=e[0][0]-e[1][0],h=s*e[0][0]+a*e[0][1],T(u=i*a-s*n,0,r)||(c[0]=(a*o-n*h)/u,c[1]=(i*h-s*o)/u),c}function r(t,e,r,i){var n=e[0]-t[0],o=e[1]-t[1],s=i[0]-r[0],a=i[1]-r[1];if(s*o-a*n==0)return!1;var h=(n*(r[1]-t[1])+o*(t[0]-r[0]))/(s*o-a*n),u=(s*(t[1]-r[1])+a*(r[0]-t[0]))/(a*n-s*o);return h>=0&&h<=1&&u>=0&&u<=1}function i(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])}function n(t,e,r){return i(t,e,r)>0}function o(t,e,r){return i(t,e,r)>=0}function s(t,e,r){return i(t,e,r)<0}function a(t,e,r){return i(t,e,r)<=0}t.exports={decomp:function(t){var e=b(t);return e.length>0?w(t,e):[t]},quickDecomp:function t(e,r,i,h,u,c,v){c=c||100,v=v||0,u=u||25,r=void 0!==r?r:[],i=i||[],h=h||[];var y=[0,0],g=[0,0],x=[0,0],b=0,w=0,T=0,S=0,_=0,O=0,P=0,M=[],A=[],L=e,C=e;if(C.length<3)return r;if(++v>c)return console.warn("quickDecomp: max level ("+c+") reached."),r;for(var R=0;R<e.length;++R)if(d(L,R)){i.push(L[R]),b=w=Number.MAX_VALUE;for(var k=0;k<e.length;++k)n(f(L,R-1),f(L,R),f(L,k))&&a(f(L,R-1),f(L,R),f(L,k-1))&&(x=E(f(L,R-1),f(L,R),f(L,k),f(L,k-1)),s(f(L,R+1),f(L,R),x)&&(T=l(L[R],x))<w&&(w=T,g=x,O=k)),n(f(L,R+1),f(L,R),f(L,k+1))&&a(f(L,R+1),f(L,R),f(L,k))&&(x=E(f(L,R+1),f(L,R),f(L,k),f(L,k+1)),n(f(L,R-1),f(L,R),x)&&(T=l(L[R],x))<b&&(b=T,y=x,_=k));if(O===(_+1)%e.length)x[0]=(g[0]+y[0])/2,x[1]=(g[1]+y[1])/2,h.push(x),R<_?(p(M,L,R,_+1),M.push(x),A.push(x),0!==O&&p(A,L,O,L.length),p(A,L,0,R+1)):(0!==R&&p(M,L,R,L.length),p(M,L,0,_+1),M.push(x),A.push(x),p(A,L,O,R+1));else{if(O>_&&(_+=e.length),S=Number.MAX_VALUE,_<O)return r;for(k=O;k<=_;++k)o(f(L,R-1),f(L,R),f(L,k))&&a(f(L,R+1),f(L,R),f(L,k))&&(T=l(f(L,R),f(L,k)))<S&&m(L,R,k)&&(S=T,P=k%e.length);R<P?(p(M,L,R,P+1),0!==P&&p(A,L,P,C.length),p(A,L,0,R+1)):(0!==R&&p(M,L,R,C.length),p(M,L,0,P+1),p(A,L,P,R+1))}return M.length<A.length?(t(M,r,i,h,u,c,v),t(A,r,i,h,u,c,v)):(t(A,r,i,h,u,c,v),t(M,r,i,h,u,c,v)),r}return r.push(e),r},isSimple:function(t){var e,i=t;for(e=0;e<i.length-1;e++)for(var n=0;n<e-1;n++)if(r(i[e],i[e+1],i[n],i[n+1]))return!1;for(e=1;e<i.length-2;e++)if(r(i[0],i[i.length-1],i[e],i[e+1]))return!1;return!0},removeCollinearPoints:function(t,e){for(var r=0,i=t.length-1;t.length>3&&i>=0;--i)c(f(t,i-1),f(t,i),f(t,i+1),e)&&(t.splice(i%t.length,1),r++);return r},removeDuplicatePoints:function(t,e){for(var r=t.length-1;r>=1;--r)for(var i=t[r],n=r-1;n>=0;--n)S(i,t[n],e)&&t.splice(r,1)},makeCCW:function(t){for(var e=0,r=t,i=1;i<t.length;++i)(r[i][1]<r[e][1]||r[i][1]===r[e][1]&&r[i][0]>r[e][0])&&(e=i);return!n(f(t,e-1),f(t,e),f(t,e+1))&&(function(t){for(var e=[],r=t.length,i=0;i!==r;i++)e.push(t.pop());for(i=0;i!==r;i++)t[i]=e[i]}(t),!0)}};var h=[],u=[];function c(t,e,r,n){if(n){var o=h,s=u;o[0]=e[0]-t[0],o[1]=e[1]-t[1],s[0]=r[0]-e[0],s[1]=r[1]-e[1];var a=o[0]*s[0]+o[1]*s[1],c=Math.sqrt(o[0]*o[0]+o[1]*o[1]),l=Math.sqrt(s[0]*s[0]+s[1]*s[1]);return Math.acos(a/(c*l))<n}return 0===i(t,e,r)}function l(t,e){var r=e[0]-t[0],i=e[1]-t[1];return r*r+i*i}function f(t,e){var r=t.length;return t[e<0?e%r+r:e%r]}function p(t,e,r,i){for(var n=r;n<i;n++)t.push(e[n])}function d(t,e){return s(f(t,e-1),f(t,e),f(t,e+1))}var v=[],y=[];function g(t,r,i){var n,s,h=v,u=y;if(o(f(t,r+1),f(t,r),f(t,i))&&a(f(t,r-1),f(t,r),f(t,i)))return!1;s=l(f(t,r),f(t,i));for(var c=0;c!==t.length;++c)if((c+1)%t.length!==r&&c!==r&&o(f(t,r),f(t,i),f(t,c+1))&&a(f(t,r),f(t,i),f(t,c))&&(h[0]=f(t,r),h[1]=f(t,i),u[0]=f(t,c),u[1]=f(t,c+1),n=e(h,u),l(f(t,r),n)<s))return!1;return!0}function m(t,e,i){for(var n=0;n!==t.length;++n)if(n!==e&&n!==i&&(n+1)%t.length!==e&&(n+1)%t.length!==i&&r(f(t,e),f(t,i),f(t,n),f(t,n+1)))return!1;return!0}function x(t,e,r,i){var n=i||[];if(function(t){t.length=0}(n),e<r)for(var o=e;o<=r;o++)n.push(t[o]);else{for(o=0;o<=r;o++)n.push(t[o]);for(o=e;o<t.length;o++)n.push(t[o])}return n}function b(t){for(var e=[],r=[],i=[],n=[],o=Number.MAX_VALUE,s=0;s<t.length;++s)if(d(t,s))for(var a=0;a<t.length;++a)if(g(t,s,a)){r=b(x(t,s,a,n)),i=b(x(t,a,s,n));for(var h=0;h<i.length;h++)r.push(i[h]);r.length<o&&(e=r,o=r.length,e.push([f(t,s),f(t,a)]))}return e}function w(t,e){if(0===e.length)return[t];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2===e[0].length&&e[0][0]instanceof Array){for(var r=[t],i=0;i<e.length;i++)for(var n=e[i],o=0;o<r.length;o++){var s=w(r[o],n);if(s){r.splice(o,1),r.push(s[0],s[1]);break}}return r}return n=e,i=t.indexOf(n[0]),o=t.indexOf(n[1]),-1!==i&&-1!==o&&[x(t,i,o),x(t,o,i)]}function E(t,e,r,i,n){n=n||0;var o=e[1]-t[1],s=t[0]-e[0],a=o*t[0]+s*t[1],h=i[1]-r[1],u=r[0]-i[0],c=h*r[0]+u*r[1],l=o*u-h*s;return T(l,0,n)?[0,0]:[(u*a-s*c)/l,(o*c-h*a)/l]}function T(t,e,r){return r=r||0,Math.abs(t-e)<=r}function S(t,e,r){return T(t[0],e[0],r)&&T(t[1],e[1],r)}},52018:(t,e,r)=>{var i=new(r(83419))({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=i},42363:t=>{t.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},37277:t=>{var e={},r={},i={register:function(t,r,i,n){void 0===n&&(n=!1),e[t]={plugin:r,mapping:i,custom:n}},registerCustom:function(t,e,i,n){r[t]={plugin:e,mapping:i,data:n}},hasCore:function(t){return e.hasOwnProperty(t)},hasCustom:function(t){return r.hasOwnProperty(t)},getCore:function(t){return e[t]},getCustom:function(t){return r[t]},getCustomClass:function(t){return r.hasOwnProperty(t)?r[t].plugin:null},remove:function(t){e.hasOwnProperty(t)&&delete e[t]},removeCustom:function(t){r.hasOwnProperty(t)&&delete r[t]},destroyCorePlugins:function(){for(var t in e)e.hasOwnProperty(t)&&delete e[t]},destroyCustomPlugins:function(){for(var t in r)r.hasOwnProperty(t)&&delete r[t]}};t.exports=i},77332:(t,e,r)=>{var i=r(83419),n=r(8443),o=r(50792),s=r(74099),a=r(44603),h=r(39429),u=r(95540),c=r(37277),l=r(72905),f=new i({Extends:o,initialize:function(t){o.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(n.BOOT,this.boot,this)},boot:function(){var t,e,r,i,o,s,a,h=this.game.config,c=h.installGlobalPlugins;for(c=c.concat(this._pendingGlobal),t=0;t<c.length;t++)e=c[t],r=u(e,"key",null),i=u(e,"plugin",null),o=u(e,"start",!1),s=u(e,"mapping",null),a=u(e,"data",null),r&&(i?this.install(r,i,o,s,a):console.warn("Missing `plugin` for key: "+r));for(c=(c=h.installScenePlugins).concat(this._pendingScene),t=0;t<c.length;t++)e=c[t],r=u(e,"key",null),i=u(e,"plugin",null),s=u(e,"mapping",null),r&&(i?this.installScenePlugin(r,i,s):console.warn("Missing `plugin` for key: "+r));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(n.DESTROY,this.destroy,this)},addToScene:function(t,e,r){var i,n,o,s=this.game,a=t.scene,h=t.settings.map,u=t.settings.isBooted;for(i=0;i<e.length;i++)s[n=e[i]]?(t[n]=s[n],h.hasOwnProperty(n)&&(a[h[n]]=t[n])):"game"===n&&h.hasOwnProperty(n)&&(a[h[n]]=s);for(var l=0;l<r.length;l++)for(o=r[l],i=0;i<o.length;i++)if(n=o[i],c.hasCore(n)){var f=c.getCore(n),p=f.mapping,d=new f.plugin(a,this,p);t[p]=d,f.custom?a[p]=d:h.hasOwnProperty(p)&&(a[h[p]]=d),u&&d.boot()}for(o=this.plugins,i=0;i<o.length;i++){var v=o[i];v.mapping&&(a[v.mapping]=v.plugin)}},getDefaultScenePlugins:function(){var t=this.game.config.defaultPlugins;return t.concat(this.scenePlugins)},installScenePlugin:function(t,e,r,i,n){if(void 0===n&&(n=!1),"function"==typeof e){if(c.hasCore(t)||c.register(t,e,r,!0),-1===this.scenePlugins.indexOf(t))this.scenePlugins.push(t);else if(!n&&c.hasCore(t))return void console.warn("Scene Plugin key in use: "+t);if(i){var o=new e(i,this,t);i.sys[t]=o,r&&""!==r&&(i[r]=o),o.boot()}}else console.warn("Invalid Scene Plugin: "+t)},install:function(t,e,r,i,n){if(void 0===r&&(r=!1),void 0===i&&(i=null),void 0===n&&(n=null),"function"!=typeof e)return console.warn("Invalid Plugin: "+t),null;if(c.hasCustom(t))return console.warn("Plugin key in use: "+t),null;if(null!==i&&(r=!0),this.game.isBooted){if(c.registerCustom(t,e,i,n),r)return this.start(t)}else this._pendingGlobal.push({key:t,plugin:e,start:r,mapping:i,data:n});return null},getIndex:function(t){for(var e=this.plugins,r=0;r<e.length;r++)if(e[r].key===t)return r;return-1},getEntry:function(t){var e=this.getIndex(t);if(-1!==e)return this.plugins[e]},isActive:function(t){var e=this.getEntry(t);return e&&e.active},start:function(t,e){void 0===e&&(e=t);var r=this.getEntry(e);return r&&!r.active?(r.active=!0,r.plugin.start()):r||(r=this.createEntry(t,e)),r?r.plugin:null},createEntry:function(t,e){var r=c.getCustom(t);if(r){var i=new r.plugin(this);r={key:e,plugin:i,active:!0,mapping:r.mapping,data:r.data},this.plugins.push(r),i.init(r.data),i.start()}return r},stop:function(t){var e=this.getEntry(t);return e&&e.active&&(e.active=!1,e.plugin.stop()),this},get:function(t,e){void 0===e&&(e=!0);var r=this.getEntry(t);if(r)return r.plugin;var i=this.getClass(t);return i&&e?(r=this.createEntry(t,t))?r.plugin:null:i||null},getClass:function(t){return c.getCustomClass(t)},removeGlobalPlugin:function(t){var e=this.getEntry(t);e&&l(this.plugins,e),c.removeCustom(t)},removeScenePlugin:function(t){l(this.scenePlugins,t),c.remove(t)},registerGameObject:function(t,e,r){return e&&h.register(t,e),r&&a.register(t,r),this},removeGameObject:function(t,e,r){return void 0===e&&(e=!0),void 0===r&&(r=!0),e&&h.remove(t),r&&a.remove(t),this},registerFileType:function(t,e,r){s.register(t,e),r&&r.sys.load&&(r.sys.load[t]=e)},destroy:function(){for(var t=0;t<this.plugins.length;t++)this.plugins[t].plugin.destroy();c.destroyCustomPlugins(),this.game.noReturn&&c.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=f},45145:(t,e,r)=>{var i=r(52018),n=r(83419),o=r(44594),s=new n({Extends:i,initialize:function(t,e,r){i.call(this,e),this.scene=t,this.systems=t.sys,this.pluginKey=r,t.sys.events.once(o.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=s},18922:(t,e,r)=>{t.exports={BasePlugin:r(52018),DefaultPlugins:r(42363),PluginCache:r(37277),PluginManager:r(77332),ScenePlugin:r(45145)}},63595:()=>{HTMLVideoElement&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(t){const e=performance.now(),r=this.getVideoPlaybackQuality(),i=this.mozPresentedFrames||this.mozPaintedFrames||r.totalVideoFrames-r.droppedVideoFrames,n=(o,s)=>{const a=this.getVideoPlaybackQuality(),h=this.mozPresentedFrames||this.mozPaintedFrames||a.totalVideoFrames-a.droppedVideoFrames;if(h>i){const i=this.mozFrameDelay||a.totalFrameDelay-r.totalFrameDelay||0,n=s-o;t(s,{presentationTime:s+1e3*i,expectedDisplayTime:s+n,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+n/1e3,presentedFrames:h,processingDuration:i}),delete this._rvfcpolyfillmap[e]}else this._rvfcpolyfillmap[e]=requestAnimationFrame((t=>n(s,t)))};return this._rvfcpolyfillmap[e]=requestAnimationFrame((t=>n(e,t))),e},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(t){cancelAnimationFrame(this._rvfcpolyfillmap[t]),delete this._rvfcpolyfillmap[t]})},10312:t=>{t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29795:t=>{t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},68627:(t,e,r)=>{var i=r(19715),n=r(32880),o=r(83419),s=r(8054),a=r(50792),h=r(92503),u=r(56373),c=r(97480),l=r(69442),f=r(61340),p=new o({Extends:a,initialize:function(t){a.call(this);var e=t.config;this.config={clearBeforeRender:e.clearBeforeRender,backgroundColor:e.backgroundColor,antialias:e.antialias,roundPixels:e.roundPixels},this.game=t,this.type=s.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas;var r={alpha:t.config.transparent,desynchronized:t.config.desynchronized,willReadFrequently:!1};this.gameContext=e.context?e.context:this.gameCanvas.getContext("2d",r),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=u(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(l.READY,this.boot,this)},boot:function(){var t=this.game,e=t.scale.baseSize;this.width=e.width,this.height=e.height,this.isBooted=!0,t.scale.on(c.RESIZE,this.onResize,this),this.resize(e.width,e.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},resize:function(t,e){this.width=t,this.height=e,this.emit(h.RESIZE,t,e)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function(t){return this.currentContext=t||this.gameContext,this},setAlpha:function(t){return this.currentContext.globalAlpha=t,this},preRender:function(){var t=this.gameContext,e=this.config,r=this.width,i=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),e.clearBeforeRender&&(t.clearRect(0,0,r,i),e.transparent||(t.fillStyle=e.backgroundColor.rgba,t.fillRect(0,0,r,i))),t.save(),this.drawCount=0,this.emit(h.PRE_RENDER)},render:function(t,e,r){var n=e.length;this.emit(h.RENDER,t,r);var o=r.x,s=r.y,a=r.width,u=r.height,c=r.renderToTexture?r.context:t.sys.context;c.save(),this.game.scene.customViewports&&(c.beginPath(),c.rect(o,s,a,u),c.clip()),r.emit(i.PRE_RENDER,r),this.currentContext=c;var l=r.mask;l&&l.preRenderCanvas(this,null,r._maskCamera),r.transparent||(c.fillStyle=r.backgroundColor.rgba,c.fillRect(o,s,a,u)),c.globalAlpha=r.alpha,c.globalCompositeOperation="source-over",this.drawCount+=n,r.renderToTexture&&r.emit(i.PRE_RENDER,r),r.matrix.copyToContext(c);for(var f=0;f<n;f++){var p=e[f];p.mask&&p.mask.preRenderCanvas(this,p,r),p.renderCanvas(this,p,r),p.mask&&p.mask.postRenderCanvas(this,p,r)}c.setTransform(1,0,0,1,0,0),c.globalCompositeOperation="source-over",c.globalAlpha=1,r.flashEffect.postRenderCanvas(c),r.fadeEffect.postRenderCanvas(c),r.dirty=!1,l&&l.postRenderCanvas(this),c.restore(),r.renderToTexture&&(r.emit(i.POST_RENDER,r),r.renderToGame&&t.sys.context.drawImage(r.canvas,o,s)),r.emit(i.POST_RENDER,r)},postRender:function(){this.gameContext.restore(),this.emit(h.POST_RENDER);var t=this.snapshotState;t.callback&&(n(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function(t,e,r,i,o,s,a,h,u){void 0===r&&(r=!1),this.snapshotArea(i,o,s,a,e,h,u);var c=this.snapshotState;return c.getPixel=r,n(t,c),c.callback=null,this},snapshot:function(t,e,r){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,e,r)},snapshotArea:function(t,e,r,i,n,o,s){var a=this.snapshotState;return a.callback=n,a.type=o,a.encoder=s,a.getPixel=!1,a.x=t,a.y=e,a.width=Math.min(r,this.gameCanvas.width),a.height=Math.min(i,this.gameCanvas.height),this},snapshotPixel:function(t,e,r){return this.snapshotArea(t,e,1,1,r),this.snapshotState.getPixel=!0,this},batchSprite:function(t,e,r,i){var n=r.alpha*t.alpha;if(0!==n){var o=this.currentContext,s=this._tempMatrix1,a=this._tempMatrix2,h=e.canvasData,u=h.x,c=h.y,l=e.cutWidth,f=e.cutHeight,p=e.customPivot,d=e.source.resolution,v=t.displayOriginX,y=t.displayOriginY,g=-v+e.x,m=-y+e.y;if(t.isCropped){var x=t._crop;x.flipX===t.flipX&&x.flipY===t.flipY||e.updateCropUVs(x,t.flipX,t.flipY),l=x.cw,f=x.ch,u=x.cx,c=x.cy,g=-v+x.x,m=-y+x.y,t.flipX&&(g>=0?g=-(g+l):g<0&&(g=Math.abs(g)-l)),t.flipY&&(m>=0?m=-(m+f):m<0&&(m=Math.abs(m)-f))}var b=1,w=1;t.flipX&&(p||(g+=-e.realWidth+2*v),b=-1),t.flipY&&(p||(m+=-e.realHeight+2*y),w=-1);var E=t.x,T=t.y;a.applyITRS(E,T,t.rotation,t.scaleX*b,t.scaleY*w),s.copyFrom(r.matrix),i?(s.multiplyWithOffset(i,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY),a.e=E,a.f=T):(a.e-=r.scrollX*t.scrollFactorX,a.f-=r.scrollY*t.scrollFactorY),s.multiply(a),r.roundPixels&&(s.e=Math.round(s.e),s.f=Math.round(s.f)),o.save(),s.setToContext(o),o.globalCompositeOperation=this.blendModes[t.blendMode],o.globalAlpha=n,o.imageSmoothingEnabled=!e.source.scaleMode,t.mask&&t.mask.preRenderCanvas(this,t,r),l>0&&f>0&&(r.roundPixels?o.drawImage(e.source.image,u,c,l,f,Math.round(g),Math.round(m),Math.round(l/d),Math.round(f/d)):o.drawImage(e.source.image,u,c,l,f,g,m,l/d,f/d)),t.mask&&t.mask.postRenderCanvas(this,t,r),o.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});t.exports=p},55830:(t,e,r)=>{t.exports={CanvasRenderer:r(68627),GetBlendModes:r(56373),SetTransform:r(20926)}},56373:(t,e,r)=>{var i=r(10312),n=r(89289);t.exports=function(){var t=[],e=n.supportNewBlendModes,r="source-over";return t[i.NORMAL]=r,t[i.ADD]="lighter",t[i.MULTIPLY]=e?"multiply":r,t[i.SCREEN]=e?"screen":r,t[i.OVERLAY]=e?"overlay":r,t[i.DARKEN]=e?"darken":r,t[i.LIGHTEN]=e?"lighten":r,t[i.COLOR_DODGE]=e?"color-dodge":r,t[i.COLOR_BURN]=e?"color-burn":r,t[i.HARD_LIGHT]=e?"hard-light":r,t[i.SOFT_LIGHT]=e?"soft-light":r,t[i.DIFFERENCE]=e?"difference":r,t[i.EXCLUSION]=e?"exclusion":r,t[i.HUE]=e?"hue":r,t[i.SATURATION]=e?"saturation":r,t[i.COLOR]=e?"color":r,t[i.LUMINOSITY]=e?"luminosity":r,t[i.ERASE]="destination-out",t[i.SOURCE_IN]="source-in",t[i.SOURCE_OUT]="source-out",t[i.SOURCE_ATOP]="source-atop",t[i.DESTINATION_OVER]="destination-over",t[i.DESTINATION_IN]="destination-in",t[i.DESTINATION_OUT]="destination-out",t[i.DESTINATION_ATOP]="destination-atop",t[i.LIGHTER]="lighter",t[i.COPY]="copy",t[i.XOR]="xor",t}},20926:(t,e,r)=>{var i=r(91296);t.exports=function(t,e,r,n,o){var s=n.alpha*r.alpha;if(s<=0)return!1;var a=i(r,n,o).calc;return e.globalCompositeOperation=t.blendModes[r.blendMode],e.globalAlpha=s,e.save(),a.setToContext(e),e.imageSmoothingEnabled=r.frame?!r.frame.source.scaleMode:t.antialias,!0}},63899:t=>{t.exports="losewebgl"},6119:t=>{t.exports="postrender"},48070:t=>{t.exports="prerender"},15640:t=>{t.exports="render"},8912:t=>{t.exports="resize"},87124:t=>{t.exports="restorewebgl"},92503:(t,e,r)=>{t.exports={LOSE_WEBGL:r(63899),POST_RENDER:r(6119),PRE_RENDER:r(48070),RENDER:r(15640),RESIZE:r(8912),RESTORE_WEBGL:r(87124)}},36909:(t,e,r)=>{t.exports={Events:r(92503),Snapshot:r(89966)},t.exports.Canvas=r(55830),t.exports.WebGL=r(4159)},32880:(t,e,r)=>{var i=r(27919),n=r(40987),o=r(95540);t.exports=function(t,e){var r=o(e,"callback"),s=o(e,"type","image/png"),a=o(e,"encoder",.92),h=Math.abs(Math.round(o(e,"x",0))),u=Math.abs(Math.round(o(e,"y",0))),c=Math.floor(o(e,"width",t.width)),l=Math.floor(o(e,"height",t.height));if(o(e,"getPixel",!1)){var f=t.getContext("2d",{willReadFrequently:!1}).getImageData(h,u,1,1).data;r.call(null,new n(f[0],f[1],f[2],f[3]))}else if(0!==h||0!==u||c!==t.width||l!==t.height){var p=i.createWebGL(this,c,l),d=p.getContext("2d",{willReadFrequently:!0});c>0&&l>0&&d.drawImage(t,h,u,c,l,0,0,c,l);var v=new Image;v.onerror=function(){r.call(null),i.remove(p)},v.onload=function(){r.call(null,v),i.remove(p)},v.src=p.toDataURL(s,a)}else{var y=new Image;y.onerror=function(){r.call(null)},y.onload=function(){r.call(null,y)},y.src=t.toDataURL(s,a)}}},88815:(t,e,r)=>{var i=r(27919),n=r(40987),o=r(95540);t.exports=function(t,e){var r=t,s=o(e,"callback"),a=o(e,"type","image/png"),h=o(e,"encoder",.92),u=Math.abs(Math.round(o(e,"x",0))),c=Math.abs(Math.round(o(e,"y",0))),l=o(e,"getPixel",!1),f=o(e,"isFramebuffer",!1),p=f?o(e,"bufferWidth",1):r.drawingBufferWidth,d=f?o(e,"bufferHeight",1):r.drawingBufferHeight;if(l){var v=new Uint8Array(4),y=f?c:d-c;r.readPixels(u,y,1,1,r.RGBA,r.UNSIGNED_BYTE,v),s.call(null,new n(v[0],v[1],v[2],v[3]))}else{var g=Math.floor(o(e,"width",p)),m=Math.floor(o(e,"height",d)),x=g*m*4,b=new Uint8Array(x);r.readPixels(u,d-c-m,g,m,r.RGBA,r.UNSIGNED_BYTE,b);for(var w=i.createWebGL(this,g,m),E=w.getContext("2d",{willReadFrequently:!0}),T=E.getImageData(0,0,g,m),S=T.data,_=0;_<m;_++)for(var O=0;O<g;O++){var P=4*((m-_-1)*g+O),M=f?x-4*(_*g+(g-O)):4*(_*g+O);S[M+0]=b[P+0],S[M+1]=b[P+1],S[M+2]=b[P+2],S[M+3]=b[P+3]}E.putImageData(T,0,0);var A=new Image;A.onerror=function(){s.call(null),i.remove(w)},A.onload=function(){s.call(null,A),i.remove(w)},A.src=w.toDataURL(a,h)}}},89966:(t,e,r)=>{t.exports={Canvas:r(32880),WebGL:r(88815)}},7530:(t,e,r)=>{var i=r(83419),n=r(36060),o=r(90330),s=r(82264),a=r(95540),h=r(32302),u=r(63448),c=r(31302),l=r(58918),f=r(14811),p=r(92651),d=r(96569),v=r(56527),y=r(57516),g=r(43439),m=r(81041),x=r(12385),b=r(7589),w=r(95428),E=r(72905),T=new i({initialize:function(t){this.game=t.game,this.renderer=t,this.classes=new o([[n.UTILITY_PIPELINE,b],[n.MULTI_PIPELINE,y],[n.BITMAPMASK_PIPELINE,c],[n.SINGLE_PIPELINE,x],[n.ROPE_PIPELINE,m],[n.LIGHT_PIPELINE,d],[n.POINTLIGHT_PIPELINE,g],[n.MOBILE_PIPELINE,v]]),this.postPipelineClasses=new o,this.pipelines=new o,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(t,e,r){var i=this.renderer,o=this.renderTargets;this.frameInc=Math.floor(a(t,"frameInc",32));var u,c,d=i.width,v=i.height,y=this.game.config.disablePreFX;if(this.game.config.disablePostFX||this.postPipelineClasses.setAll([[String(f.BARREL),l.Barrel],[String(f.BLOOM),l.Bloom],[String(f.BLUR),l.Blur],[String(f.BOKEH),l.Bokeh],[String(f.CIRCLE),l.Circle],[String(f.COLOR_MATRIX),l.ColorMatrix],[String(f.DISPLACEMENT),l.Displacement],[String(f.GLOW),l.Glow],[String(f.GRADIENT),l.Gradient],[String(f.PIXELATE),l.Pixelate],[String(f.SHADOW),l.Shadow],[String(f.SHINE),l.Shine],[String(f.VIGNETTE),l.Vignette],[String(f.WIPE),l.Wipe]]),!y){this.classes.set(n.FX_PIPELINE,p);for(var g=Math.min(d,v),m=Math.ceil(g/this.frameInc),x=1;x<m;x++){var b=x*this.frameInc;o.push(new h(i,b,b)),o.push(new h(i,b,b)),o.push(new h(i,b,b)),this.maxDimension=b}o.push(new h(i,d,v,1,0,!0,!0)),o.push(new h(i,d,v,1,0,!0,!0)),o.push(new h(i,d,v,1,0,!0,!0))}var w=this,E=this.game;if(this.classes.each((function(t,e){u=w.add(t,new e({game:E})),t===n.UTILITY_PIPELINE&&(w.UTILITY_PIPELINE=u,w.fullFrame1=u.fullFrame1,w.fullFrame2=u.fullFrame2,w.halfFrame1=u.halfFrame1,w.halfFrame2=u.halfFrame2)})),this.MULTI_PIPELINE=this.get(n.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(n.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(n.MOBILE_PIPELINE),y||(this.FX_PIPELINE=this.get(n.FX_PIPELINE)),t)for(c in t){var T=t[c];(u=new T(E)).name=c,u.isPostFX?this.postPipelineClasses.set(c,T):this.has(c)||(this.classes.set(c,T),this.add(c,u))}this.default=this.get(e),r&&!s.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(t){var e=this.get(t);return e&&(this.default=e),e},add:function(t,e){if(!e.isPostFX){var r=this.pipelines,i=this.renderer;return r.has(t)?console.warn("Pipeline exists: "+t):(e.name=t,e.manager=this,r.set(t,e)),e.hasBooted||e.boot(),0===i.width||0===i.height||e.isPreFX||e.resize(i.width,i.height),e}console.warn(t+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function(t,e){this.postPipelineClasses.has(t)||this.postPipelineClasses.set(t,e)},flush:function(){this.current&&this.current.flush()},has:function(t){var e=this.pipelines;return"string"==typeof t?e.has(t):!!e.contains(t)},get:function(t){var e=this.pipelines;return"string"==typeof t?e.get(t):e.contains(t)?t:void 0},getPostPipeline:function(t,e,r){var i,n=this.postPipelineClasses,o="",s=typeof t;if("string"===s||"number"===s?(i=n.get(t),o=t):"function"===s?(n.contains(t)&&(i=t),o=t.name):"object"===s&&(i=n.get(t.name),o=t.name),i){var a=new i(this.game,r);return a.name=o,e&&(a.gameObject=e),this.postPipelineInstances.push(a),a}},removePostPipeline:function(t){E(this.postPipelineInstances,t)},remove:function(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!0),this.pipelines.delete(t),e&&this.classes.delete(t),r&&this.postPipelineClasses.delete(t)},set:function(t,e,r){if(!t.isPostFX)return this.isCurrent(t,r)||(this.flush(),this.current&&this.current.unbind(),this.current=t,t.bind(r)),t.updateProjectionMatrix(),t.onBind(e),t},preBatch:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,r=e.length-1;r>=0;r--){var i=e[r];i.active&&i.preBatch(t)}}},postBatch:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,r=0;r<e.length;r++){var i=e[r];i.active&&i.postBatch(t)}}},preBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,r=e.length-1;r>=0;r--){var i=e[r];i.active&&i.preBatch(t)}}},postBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,r=0;r<e.length;r++){var i=e[r];i.active&&i.postBatch(t)}}},isCurrent:function(t,e){var r=this.renderer,i=this.current;return i&&!e&&(e=i.currentShader),!(i!==t||e.program!==r.currentProgram)},copyFrame:function(t,e,r,i,n){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(t,e,r,i,n),this},copyToGame:function(t){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(t),this},drawFrame:function(t,e,r,i){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(t,e,r,i),this},blendFrames:function(t,e,r,i,n){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(t,e,r,i,n),this},blendFramesAdditive:function(t,e,r,i,n){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(t,e,r,i,n),this},clearFrame:function(t,e){return this.UTILITY_PIPELINE.clearFrame(t,e),this},blitFrame:function(t,e,r,i,n,o){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(t,e,r,i,n,o),this},copyFrameRect:function(t,e,r,i,n,o,s,a){return this.UTILITY_PIPELINE.copyFrameRect(t,e,r,i,n,o,s,a),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(t){return this.UTILITY_PIPELINE.bind(t)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each((function(t,e){e.restoreContext()})),w(this.postPipelineInstances,(function(t){t.restoreContext()}))},rebind:function(t){void 0===t&&this.previous&&(t=this.previous);var e=this.renderer,r=e.gl;r.disable(r.DEPTH_TEST),r.disable(r.CULL_FACE),e.hasActiveStencilMask()?r.clear(r.DEPTH_BUFFER_BIT):(r.disable(r.STENCIL_TEST),r.clear(r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT)),r.viewport(0,0,e.width,e.height),e.currentProgram=null,e.setBlendMode(0,!0);var i=e.vaoExtension;i&&i.bindVertexArrayOES(null);var n=this.pipelines.entries;for(var o in n)n[o].glReset=!0;t&&(this.current=t,t.rebind())},clear:function(){var t=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,t.currentProgram=null,t.setBlendMode(0,!0);var e=t.vaoExtension;e&&e.bindVertexArrayOES(null)},getRenderTarget:function(t){var e=this.renderTargets;if(t>this.maxDimension)return this.targetIndex=e.length-3,e[this.targetIndex];var r=3*(u(t,this.frameInc,0,!0)-1);return this.targetIndex=r,e[r]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});t.exports=T},32302:(t,e,r)=>{var i=r(83419),n=r(92503),o=new i({initialize:function(t,e,r,i,n,o,s,a,h){void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=!0),void 0===s&&(s=!1),void 0===a&&(a=!0),void 0===h&&(h=!0),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=i,this.minFilter=n,this.autoClear=o,this.autoResize=!0,this.hasDepthBuffer=a,this.forceClamp=h,this.resize(e,r),s?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(t){return t&&!this.autoResize?(this.renderer.on(n.RESIZE,this.resize,this),this.autoResize=!0):!t&&this.autoResize&&(this.renderer.off(n.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(t,e){if((t=Math.round(t*this.scale))<=0&&(t=1),(e=Math.round(e*this.scale))<=0&&(e=1),this.autoResize&&(t!==this.width||e!==this.height)){var r=this.renderer;r.deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),this.texture=r.createTextureFromSource(null,t,e,this.minFilter,this.forceClamp),this.framebuffer=r.createFramebuffer(t,e,this.texture,this.hasDepthBuffer),this.width=t,this.height=e}return this},willResize:function(t,e){return(t=Math.round(t*this.scale))<=0&&(t=1),(e=Math.round(e*this.scale))<=0&&(e=1),t!==this.width||e!==this.height},bind:function(t,e,r){void 0===t&&(t=!1);var i=this.renderer;if(t&&i.flush(),e&&r&&this.resize(e,r),i.pushFramebuffer(this.framebuffer,!1,!1),t&&this.adjustViewport(),this.autoClear){var n=this.renderer.gl;n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)}i.clearStencilMask()},adjustViewport:function(){var t=this.renderer.gl;t.viewport(0,0,this.width,this.height),t.disable(t.SCISSOR_TEST)},clear:function(){var t=this.renderer,e=t.gl;t.pushFramebuffer(this.framebuffer),e.disable(e.SCISSOR_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t.popFramebuffer(),t.resetScissor()},unbind:function(t){void 0===t&&(t=!1);var e=this.renderer;return t&&e.flush(),e.popFramebuffer()},destroy:function(){var t=this.renderer;t.off(n.RESIZE,this.resize,this),t.deleteFramebuffer(this.framebuffer),t.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});t.exports=o},70554:t=>{t.exports={getTintFromFloats:function(t,e,r,i){return((255*i&255)<<24|(255*t&255)<<16|(255*e&255)<<8|255*r&255)>>>0},getTintAppendFloatAlpha:function(t,e){return((255*e&255)<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,e){return((255*e&255)<<24|(255&t)<<16|(t>>8&255)<<8|t>>16&255)>>>0},getFloatsFromUintRGB:function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},checkShaderMax:function(t,e){var r=Math.min(16,t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));return e&&-1!==e?Math.min(r,e):r},parseFragmentShaderMaxTextures:function(t,e){if(!t)return"";for(var r="",i=0;i<e;i++)i>0&&(r+="\n\telse "),i<e-1&&(r+="if (outTexId < "+i+".5)"),r+="\n\t{",r+="\n\t\ttexture = texture2D(uMainSampler["+i+"], outTexCoord);",r+="\n\t}";return(t=t.replace(/%count%/gi,e.toString())).replace(/%forloop%/gi,r)},setGlowQuality:function(t,e,r,i){return void 0===r&&(r=e.config.glowFXQuality),void 0===i&&(i=e.config.glowFXDistance),(t=t.replace(/__SIZE__/gi,(1/r/i).toFixed(7))).replace(/__DIST__/gi,i.toFixed(0)+".0")}}},29100:(t,e,r)=>{var i=r(83419),n=r(62644),o=r(50792),s=r(77085),a=r(95540),h=r(37867),u=r(92503),c=r(32302),l=r(70554),f=r(38683),p=new i({Extends:o,initialize:function(t){o.call(this);var e=t.game,r=e.renderer,i=r.gl;this.name=a(t,"name","WebGLPipeline"),this.game=e,this.renderer=r,this.manager,this.gl=i,this.view=e.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=a(t,"topology",i.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=a(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=a(t,"resizeUniform","")},boot:function(){var t,e=this.gl,r=this.config,i=this.renderer;this.isPostFX||(this.projectionMatrix=(new h).identity());var n=this.renderTargets,o=a(r,"renderTarget",!1);"boolean"==typeof o&&o&&(o=1);var l=i.width,f=i.height;if("number"==typeof o)for(t=0;t<o;t++)n.push(new c(i,l,f,1,0,!0));else if(Array.isArray(o))for(t=0;t<o.length;t++){var p=a(o[t],"scale",1),d=a(o[t],"minFilter",0),v=a(o[t],"autoClear",1),y=a(o[t],"autoResize",!1),g=a(o[t],"width",null),m=a(o[t],"height",g);g?n.push(new c(i,g,m,1,d,v,y)):n.push(new c(i,l,f,p,d,v,y))}n.length&&(this.currentRenderTarget=n[0]),this.setShadersFromConfig(r);var x=this.shaders,b=0;for(t=0;t<x.length;t++)x[t].vertexSize>b&&(b=x[t].vertexSize);var w=a(r,"batchSize",i.config.batchSize);this.vertexCapacity=6*w;var E=new ArrayBuffer(this.vertexCapacity*b);this.vertexData=E,this.bytes=new Uint8Array(E),this.vertexViewF32=new Float32Array(E),this.vertexViewU32=new Uint32Array(E);var T=a(r,"vertices",null);for(T?(this.vertexViewF32.set(T),this.vertexBuffer=i.createVertexBuffer(E,e.STATIC_DRAW)):this.vertexBuffer=i.createVertexBuffer(E.byteLength,e.DYNAMIC_DRAW),this.setVertexBuffer(),t=x.length-1;t>=0;t--)x[t].rebind();this.hasBooted=!0,i.on(u.RESIZE,this.resize,this),i.on(u.PRE_RENDER,this.onPreRender,this),i.on(u.RENDER,this.onRender,this),i.on(u.POST_RENDER,this.onPostRender,this),this.emit(s.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(t,e,r){var i=this.renderer;return t===this.currentShader&&i.currentProgram===this.currentShader.program||(this.flush(),this.setVertexBuffer(r)&&!e&&(e=!0),t.bind(e,!1),this.currentShader=t),this},getShaderByName:function(t){for(var e=this.shaders,r=0;r<e.length;r++)if(e[r].name===t)return e[r]},setShadersFromConfig:function(t){var e,r=this.shaders,i=this.renderer;for(e=0;e<r.length;e++)r[e].destroy();var o="vertShader",s="fragShader",h="attributes",u=a(t,o,null),c=l.parseFragmentShaderMaxTextures(a(t,s,null),i.maxTextures),p=a(t,h,null),d=a(t,"shaders",[]),v=d.length;if(0===v)u&&c&&(this.shaders=[new f(this,"default",u,c,n(p))]);else{var y=[];for(e=0;e<v;e++){var g,m,x,b,w=d[e];if("string"==typeof w?(g="default",m=u,x=l.parseFragmentShaderMaxTextures(w,i.maxTextures),b=p):(g=a(w,"name","default"),m=a(w,o,u),x=l.parseFragmentShaderMaxTextures(a(w,s,c),i.maxTextures),b=a(w,h,p)),"default"===g){var E=x.split("\n")[0].trim();E.indexOf("#define SHADER_NAME")>-1&&(g=E.substring(20))}m&&x&&y.push(new f(this,g,m,x,n(b)))}this.shaders=y}return 0===this.shaders.length?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(t){return this.currentBatch={start:this.vertexCount,count:0,texture:[t],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=t,this.batch.push(this.currentBatch),0},addTextureToBatch:function(t){var e=this.currentBatch;e&&(e.texture.push(t),e.unit++,e.maxUnit++)},pushBatch:function(t){if(!this.currentBatch||this.forceZero&&t!==this.currentTexture)return this.createBatch(t);if(t===this.currentTexture)return this.currentUnit;var e=this.currentBatch,r=e.texture.indexOf(t);return-1===r?e.texture.length===this.renderer.maxTextures?this.createBatch(t):(e.unit++,e.maxUnit++,e.texture.push(t),this.currentUnit=e.unit,this.currentTexture=t,e.unit):(this.currentUnit=r,this.currentTexture=t,r)},setGameObject:function(t,e){return void 0===e&&(e=t.frame),this.pushBatch(e.source.glTexture)},shouldFlush:function(t){return void 0===t&&(t=0),this.vertexCount+t>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(t,e){t===this.width&&e===this.height||this.flush(),this.width=t,this.height=e;for(var r=this.renderTargets,i=0;i<r.length;i++)r[i].resize(t,e);return this.setProjectionMatrix(t,e),this.resizeUniform&&this.set2f(this.resizeUniform,t,e),this.emit(s.RESIZE,t,e,this),this.onResize(t,e),this},setProjectionMatrix:function(t,e){var r=this.projectionMatrix;if(!r)return this;this.projectionWidth=t,this.projectionHeight=e,r.ortho(0,t,e,0,-1e3,1e3);for(var i=this.shaders,n="uProjectionMatrix",o=0;o<i.length;o++){var s=i[o];s.hasUniform(n)&&(s.resetUniform(n),s.setMatrix4fv(n,!1,r.val,s))}return this},flipProjectionMatrix:function(t){void 0===t&&(t=!0);var e=this.projectionMatrix;if(!e)return this;var r=this.projectionWidth,i=this.projectionHeight;t?e.ortho(0,r,0,i,-1e3,1e3):e.ortho(0,r,i,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,e.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var t=this.renderer.projectionWidth,e=this.renderer.projectionHeight;this.projectionWidth===t&&this.projectionHeight===e||this.setProjectionMatrix(t,e)}},bind:function(t){if(void 0===t&&(t=this.currentShader),this.glReset)return this.rebind(t);var e=!1,r=this.gl;return r.getParameter(r.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,e=!0),t.bind(e),this.currentShader=t,this.activeTextures.length=0,this.emit(s.BIND,this,t),this.onActive(t),this},rebind:function(t){this.activeBuffer=null,this.setVertexBuffer();for(var e=this.shaders,r=e.length-1;r>=0;r--){var i=e[r].rebind();t&&i!==t||(this.currentShader=i)}return this.activeTextures.length=0,this.emit(s.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var t=this.shaders,e=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,e&&this.setVertexBuffer();for(var r=0;r<t.length;r++){var i=t[r];i.syncUniforms(),e&&i.rebind()}},setVertexBuffer:function(t){if(void 0===t&&(t=this.vertexBuffer),t!==this.activeBuffer){var e=this.gl;return this.gl.bindBuffer(e.ARRAY_BUFFER,t.webGLBuffer),this.activeBuffer=t,!0}return!1},preBatch:function(t){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(t),this},postBatch:function(t){return this.onDraw(this.currentRenderTarget),this.onPostBatch(t),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(t){if(void 0===t&&(t=!1),this.vertexCount>0){this.emit(s.BEFORE_FLUSH,this,t),this.onBeforeFlush(t);var e=this.gl,r=this.vertexCount,i=this.currentShader.vertexSize,n=this.topology;if(this.active){var o,a,h;this.setVertexBuffer(),r===this.vertexCapacity?e.bufferData(e.ARRAY_BUFFER,this.vertexData,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.bytes.subarray(0,r*i));var u=this.batch,c=this.activeTextures;if(this.forceZero)for(c[0]||e.activeTexture(e.TEXTURE0),o=0;o<u.length;o++)h=(a=u[o]).texture[0],c[0]!==h&&(e.bindTexture(e.TEXTURE_2D,h.webGLTexture),c[0]=h),e.drawArrays(n,a.start,a.count);else for(o=0;o<u.length;o++){a=u[o];for(var l=0;l<=a.maxUnit;l++)h=a.texture[l],c[l]!==h&&(e.activeTexture(e.TEXTURE0+l),e.bindTexture(e.TEXTURE_2D,h.webGLTexture),c[l]=h);e.drawArrays(n,a.start,a.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(s.AFTER_FLUSH,this,t),this.onAfterFlush(t)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(t,e,r,i,n,o,s){var a=this.vertexViewF32,h=this.vertexViewU32,u=this.vertexCount*this.currentShader.vertexComponentCount-1;a[++u]=t,a[++u]=e,a[++u]=r,a[++u]=i,a[++u]=n,a[++u]=o,h[++u]=s,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(t,e,r,i,n,o,s,a,h,u,c,l,f,p,d,v,y,g,m,x){void 0===x&&(x=this.currentUnit);var b=!1;this.shouldFlush(6)&&(this.flush(),b=!0),this.currentBatch||(x=this.setTexture2D(m));var w=this.vertexViewF32,E=this.vertexViewU32,T=this.vertexCount*this.currentShader.vertexComponentCount-1;return w[++T]=e,w[++T]=r,w[++T]=u,w[++T]=c,w[++T]=x,w[++T]=g,E[++T]=p,w[++T]=i,w[++T]=n,w[++T]=u,w[++T]=f,w[++T]=x,w[++T]=g,E[++T]=v,w[++T]=o,w[++T]=s,w[++T]=l,w[++T]=f,w[++T]=x,w[++T]=g,E[++T]=y,w[++T]=e,w[++T]=r,w[++T]=u,w[++T]=c,w[++T]=x,w[++T]=g,E[++T]=p,w[++T]=o,w[++T]=s,w[++T]=l,w[++T]=f,w[++T]=x,w[++T]=g,E[++T]=y,w[++T]=a,w[++T]=h,w[++T]=l,w[++T]=c,w[++T]=x,w[++T]=g,E[++T]=d,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(t),b},batchTri:function(t,e,r,i,n,o,s,a,h,u,c,l,f,p,d,v,y){void 0===y&&(y=this.currentUnit);var g=!1;this.shouldFlush(3)&&(this.flush(),g=!0),this.currentBatch||(y=this.setTexture2D(v));var m=this.vertexViewF32,x=this.vertexViewU32,b=this.vertexCount*this.currentShader.vertexComponentCount-1;return m[++b]=e,m[++b]=r,m[++b]=a,m[++b]=h,m[++b]=y,m[++b]=d,x[++b]=l,m[++b]=i,m[++b]=n,m[++b]=a,m[++b]=c,m[++b]=y,m[++b]=d,x[++b]=f,m[++b]=o,m[++b]=s,m[++b]=u,m[++b]=c,m[++b]=y,m[++b]=d,x[++b]=p,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(t),g},drawFillRect:function(t,e,r,i,n,o,s,a){void 0===s&&(s=this.renderer.whiteTexture),void 0===a&&(a=!0),t=Math.floor(t),e=Math.floor(e);var h=Math.floor(t+r),u=Math.floor(e+i),c=this.setTexture2D(s),f=l.getTintAppendFloatAlphaAndSwap(n,o),p=0,d=1;a&&(p=1,d=0),this.batchQuad(null,t,e,t,u,h,u,h,e,0,p,1,d,f,f,f,f,0,s,c)},setTexture2D:function(t){return void 0===t&&(t=this.renderer.whiteTexture),this.pushBatch(t)},bindTexture:function(t,e){void 0===e&&(e=0);var r=this.gl;return r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,t.webGLTexture),this},bindRenderTarget:function(t,e){return this.bindTexture(t.texture,e)},setTime:function(t,e){return this.set1f(t,this.game.loop.getDuration(),e),this},setBoolean:function(t,e,r){return void 0===r&&(r=this.currentShader),r.setBoolean(t,e),this},set1f:function(t,e,r){return void 0===r&&(r=this.currentShader),r.set1f(t,e),this},set2f:function(t,e,r,i){return void 0===i&&(i=this.currentShader),i.set2f(t,e,r),this},set3f:function(t,e,r,i,n){return void 0===n&&(n=this.currentShader),n.set3f(t,e,r,i),this},set4f:function(t,e,r,i,n,o){return void 0===o&&(o=this.currentShader),o.set4f(t,e,r,i,n),this},set1fv:function(t,e,r){return void 0===r&&(r=this.currentShader),r.set1fv(t,e),this},set2fv:function(t,e,r){return void 0===r&&(r=this.currentShader),r.set2fv(t,e),this},set3fv:function(t,e,r){return void 0===r&&(r=this.currentShader),r.set3fv(t,e),this},set4fv:function(t,e,r){return void 0===r&&(r=this.currentShader),r.set4fv(t,e),this},set1iv:function(t,e,r){return void 0===r&&(r=this.currentShader),r.set1iv(t,e),this},set2iv:function(t,e,r){return void 0===r&&(r=this.currentShader),r.set2iv(t,e),this},set3iv:function(t,e,r){return void 0===r&&(r=this.currentShader),r.set3iv(t,e),this},set4iv:function(t,e,r){return void 0===r&&(r=this.currentShader),r.set4iv(t,e),this},set1i:function(t,e,r){return void 0===r&&(r=this.currentShader),r.set1i(t,e),this},set2i:function(t,e,r,i){return void 0===i&&(i=this.currentShader),i.set2i(t,e,r),this},set3i:function(t,e,r,i,n){return void 0===n&&(n=this.currentShader),n.set3i(t,e,r,i),this},set4i:function(t,e,r,i,n,o){return void 0===o&&(o=this.currentShader),o.set4i(t,e,r,i,n),this},setMatrix2fv:function(t,e,r,i){return void 0===i&&(i=this.currentShader),i.setMatrix2fv(t,e,r),this},setMatrix3fv:function(t,e,r,i){return void 0===i&&(i=this.currentShader),i.setMatrix3fv(t,e,r),this},setMatrix4fv:function(t,e,r,i){return void 0===i&&(i=this.currentShader),i.setMatrix4fv(t,e,r),this},destroy:function(){var t;this.emit(s.DESTROY,this);var e=this.shaders;for(t=0;t<e.length;t++)e[t].destroy();var r=this.renderTargets;for(t=0;t<r.length;t++)r[t].destroy();var i=this.renderer;return i.deleteBuffer(this.vertexBuffer),i.off(u.RESIZE,this.resize,this),i.off(u.PRE_RENDER,this.onPreRender,this),i.off(u.RENDER,this.onRender,this),i.off(u.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});t.exports=p},74797:(t,e,r)=>{var i=r(95428),n=r(72905),o=r(19715),s=r(83419),a=r(8054),h=r(50792),u=r(92503),c=r(50030),l=r(37867),f=r(29747),p=r(7530),d=r(32302),v=r(97480),y=r(69442),g=r(70554),m=r(88815),x=r(26128),b=r(1482),w=r(82751),E=r(84387),T=r(93567),S=r(57183),_=new s({Extends:h,initialize:function(t){h.call(this);var e=t.config,r={alpha:e.transparent,desynchronized:e.desynchronized,depth:!0,antialias:e.antialiasGL,premultipliedAlpha:e.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:e.failIfMajorPerformanceCaveat,powerPreference:e.powerPreference,preserveDrawingBuffer:e.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:e.clearBeforeRender,antialias:e.antialias,backgroundColor:e.backgroundColor,contextCreation:r,roundPixels:e.roundPixels,maxTextures:e.maxTextures,maxTextureSize:e.maxTextureSize,batchSize:e.batchSize,maxLights:e.maxLights,mipmapFilter:e.mipmapFilter},this.game=t,this.type=a.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=f,this.contextRestoredHandler=f,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(t){var e,r=this.game,n=this.canvas,o=t.backgroundColor;if(!(e=r.config.context?r.config.context:n.getContext("webgl",t.contextCreation)||n.getContext("experimental-webgl",t.contextCreation))||e.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=e;var s=this,h=function(){var t=e.getSupportedExtensions();s.supportedExtensions=t;var r="ANGLE_instanced_arrays";s.instancedArraysExtension=t.indexOf(r)>-1?e.getExtension(r):null;var i="OES_vertex_array_object";s.vaoExtension=t.indexOf(i)>-1?e.getExtension(i):null};h(),this.contextLostHandler=function(t){s.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),s.emit(u.LOSE_WEBGL,s),t.preventDefault()},n.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.contextRestoredHandler=function(t){if(e.isContextLost())console&&console.log("WebGL Context restored, but context is still lost");else{s.currentProgram=null,s.currentFramebuffer=null,s.setBlendMode(a.BlendModes.NORMAL),e.disable(e.BLEND),e.disable(e.DEPTH_TEST),e.enable(e.CULL_FACE),s.compression=s.getCompressedTextures();var r=function(t){t.createResource()};i(s.glTextureWrappers,r),i(s.glBufferWrappers,r),i(s.glFramebufferWrappers,r),i(s.glProgramWrappers,r),i(s.glAttribLocationWrappers,r),i(s.glUniformLocationWrappers,r),s.createTemporaryTextures(),s.pipelines.restoreContext(),s.resize(s.game.scale.baseSize.width,s.game.scale.baseSize.height),h(),s.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),s.emit(u.RESTORE_WEBGL,s),t.preventDefault()}},n.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),r.context=e;for(var c=0;c<=27;c++)this.blendModes.push({func:[e.ONE,e.ONE_MINUS_SRC_ALPHA],equation:e.FUNC_ADD});return this.blendModes[1].func=[e.ONE,e.DST_ALPHA],this.blendModes[2].func=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[e.ONE,e.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[e.ZERO,e.ONE_MINUS_SRC_ALPHA],equation:e.FUNC_REVERSE_SUBTRACT},this.glFormats=[e.BYTE,e.SHORT,e.UNSIGNED_BYTE,e.UNSIGNED_SHORT,e.FLOAT],this.glFuncMap={mat2:{func:e.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:e.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:e.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:e.uniform1f,length:1},"1fv":{func:e.uniform1fv,length:1},"1i":{func:e.uniform1i,length:1},"1iv":{func:e.uniform1iv,length:1},"2f":{func:e.uniform2f,length:2},"2fv":{func:e.uniform2fv,length:1},"2i":{func:e.uniform2i,length:2},"2iv":{func:e.uniform2iv,length:1},"3f":{func:e.uniform3f,length:3},"3fv":{func:e.uniform3fv,length:1},"3i":{func:e.uniform3i,length:3},"3iv":{func:e.uniform3iv,length:1},"4f":{func:e.uniform4f,length:4},"4fv":{func:e.uniform4fv,length:1},"4i":{func:e.uniform4i,length:4},"4iv":{func:e.uniform4iv,length:1}},t.maxTextures&&-1!==t.maxTextures||(t.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),t.maxTextureSize||(t.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.clearColor(o.redGL,o.greenGL,o.blueGL,o.alphaGL),-1!==["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"].indexOf(t.mipmapFilter)&&(this.mipmapFilter=e[t.mipmapFilter]),this.maxTextures=g.checkShaderMax(e,t.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new p(this),this.setBlendMode(a.BlendModes.NORMAL),this.projectionMatrix=(new l).identity(),r.textures.once(y.READY,this.boot,this),this},boot:function(){var t=this.game,e=this.pipelines,r=t.scale.baseSize,i=r.width,n=r.height;this.width=i,this.height=n,this.isBooted=!0,this.renderTarget=new d(this,i,n,1,0,!0,!0),this.maskTarget=new d(this,i,n,1,0,!0,!0),this.maskSource=new d(this,i,n,1,0,!0,!0);var o=t.config;e.boot(o.pipeline,o.defaultPipeline,o.autoMobilePipeline),this.blankTexture=t.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=t.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=t.textures.getFrame("__WHITE").glTexture;var s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,null),s.enable(s.SCISSOR_TEST),t.scale.on(v.RESIZE,this.onResize,this),this.resize(i,n)},createTemporaryTextures:function(){for(var t=this.gl,e=0;e<this.maxTextures;e++){var r=t.createTexture();t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(e)}},captureFrame:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1)},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(t,e,r){void 0===t&&(t=0),void 0===e&&(e=!1),void 0===r&&(r=!1)},stopCapture:function(){},onCapture:function(t){},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},beginCapture:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.renderTarget.bind(!0,t,e),this.setProjectionMatrix(t,e)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(t,e){var r=this.gl;return this.width=t,this.height=e,this.setProjectionMatrix(t,e),r.viewport(0,0,t,e),this.drawingBufferHeight=r.drawingBufferHeight,r.scissor(0,r.drawingBufferHeight-e,t,e),this.defaultScissor[2]=t,this.defaultScissor[3]=e,this.emit(u.RESIZE,t,e),this},getCompressedTextures:function(){var t="WEBGL_compressed_texture_",e="WEBKIT_"+t,r=function(r,i){var n=r.getExtension(t+i)||r.getExtension(e+i)||r.getExtension("EXT_texture_compression_"+i);if(n){var o={};for(var s in n)o[n[s]]=s;return o}},i=this.gl;return{ETC:r(i,"etc"),ETC1:r(i,"etc1"),ATC:r(i,"atc"),ASTC:r(i,"astc"),BPTC:r(i,"bptc"),RGTC:r(i,"rgtc"),PVRTC:r(i,"pvrtc"),S3TC:r(i,"s3tc"),S3TCSRGB:r(i,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(t,e){var r=this.compression[t.toUpperCase()];if(e in r)return r[e]},supportsCompressedTexture:function(t,e){var r=this.compression[t.toUpperCase()];return!!r&&(!e||e in r)},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(t,e){return t===this.projectionWidth&&e===this.projectionHeight||(this.projectionWidth=t,this.projectionHeight=e,this.projectionMatrix.ortho(0,t,e,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(t){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(t)},getExtension:function(t){return this.hasExtension(t)?(t in this.extensions||(this.extensions[t]=this.gl.getExtension(t)),this.extensions[t]):null},flush:function(){this.pipelines.flush()},pushScissor:function(t,e,r,i,n){void 0===n&&(n=this.drawingBufferHeight);var o=[t,e,r,i];return this.scissorStack.push(o),this.setScissor(t,e,r,i,n),this.currentScissor=o,o},setScissor:function(t,e,r,i,n){void 0===n&&(n=this.drawingBufferHeight);var o=this.gl,s=this.currentScissor,a=r>0&&i>0;if(s&&a){var h=s[0],u=s[1],c=s[2],l=s[3];a=h!==t||u!==e||c!==r||l!==i}a&&(this.flush(),o.scissor(t,n-e-i,r,i))},resetScissor:function(){var t=this.gl;t.enable(t.SCISSOR_TEST);var e=this.currentScissor;if(e){var r=e[0],i=e[1],n=e[2],o=e[3];n>0&&o>0&&t.scissor(r,this.drawingBufferHeight-i-o,n,o)}},popScissor:function(){var t=this.scissorStack;t.pop();var e=t[t.length-1];e&&this.setScissor(e[0],e[1],e[2],e[3]),this.currentScissor=e},hasActiveStencilMask:function(){var t=this.currentMask.mask,e=this.currentCameraMask.mask;return t&&t.isStencil||e&&e.isStencil},resetViewport:function(){var t=this.gl;t.viewport(0,0,this.width,this.height),this.drawingBufferHeight=t.drawingBufferHeight},setBlendMode:function(t,e){void 0===e&&(e=!1);var r=this.gl,i=this.blendModes[t];return!!(e||t!==a.BlendModes.SKIP_CHECK&&this.currentBlendMode!==t)&&(this.flush(),r.enable(r.BLEND),r.blendEquation(i.equation),i.func.length>2?r.blendFuncSeparate(i.func[0],i.func[1],i.func[2],i.func[3]):r.blendFunc(i.func[0],i.func[1]),this.currentBlendMode=t,!0)},addBlendMode:function(t,e){return this.blendModes.push({func:t,equation:e})-1},updateBlendMode:function(t,e,r){return this.blendModes[t]&&(this.blendModes[t].func=e,r&&(this.blendModes[t].equation=r)),this},removeBlendMode:function(t){return t>17&&this.blendModes[t]&&this.blendModes.splice(t,1),this},pushFramebuffer:function(t,e,r,i,n){return t===this.currentFramebuffer?this:(this.fboStack.push(t),this.setFramebuffer(t,e,r,i,n))},setFramebuffer:function(t,e,r,i,n){if(void 0===e&&(e=!1),void 0===r&&(r=!0),void 0===i&&(i=null),void 0===n&&(n=!1),t===this.currentFramebuffer)return this;var o=this.gl,s=this.width,a=this.height;return t&&t.renderTexture&&r?(s=t.renderTexture.width,a=t.renderTexture.height):this.flush(),t?o.bindFramebuffer(o.FRAMEBUFFER,t.webGLFramebuffer):o.bindFramebuffer(o.FRAMEBUFFER,null),r&&o.viewport(0,0,s,a),i&&o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,i.webGLTexture,0),n&&(o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)),e&&(t?(this.drawingBufferHeight=a,this.pushScissor(0,0,s,a)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=t,this},popFramebuffer:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0);var r=this.fboStack;r.pop();var i=r[r.length-1];return i||(i=null),this.setFramebuffer(i,t,e),i},restoreFramebuffer:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0);var r=this.fboStack,i=r[r.length-1];i||(i=null),this.currentFramebuffer=null,this.setFramebuffer(i,t,e)},setProgram:function(t){return t!==this.currentProgram&&(this.flush(),this.gl.useProgram(t.webGLProgram),this.currentProgram=t,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(t,e,r,i,n){void 0===n&&(n=!1);var o=this.gl,s=o.NEAREST,h=o.NEAREST,u=o.CLAMP_TO_EDGE;e=t?t.width:e,r=t?t.height:r;var l=c(e,r);if(l&&!n&&(u=o.REPEAT),i===a.ScaleModes.LINEAR&&this.config.antialias){var f=t&&t.compressed,p=!f&&l||f&&t.mipmaps.length>1;s=this.mipmapFilter&&p?this.mipmapFilter:o.LINEAR,h=o.LINEAR}return t||"number"!=typeof e||"number"!=typeof r?this.createTexture2D(0,s,h,u,u,o.RGBA,t):this.createTexture2D(0,s,h,u,u,o.RGBA,null,e,r)},createTexture2D:function(t,e,r,i,n,o,s,a,h,u,c,l){"number"!=typeof a&&(a=s?s.width:1),"number"!=typeof h&&(h=s?s.height:1);var f=new w(this.gl,t,e,r,i,n,o,s,a,h,u,c,l);return this.glTextureWrappers.push(f),f},createFramebuffer:function(t,e,r,i){this.currentFramebuffer=null;var n=new E(this.gl,t,e,r,i);return this.glFramebufferWrappers.push(n),n},beginBitmapMask:function(t,e){this.gl&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==t&&(this.currentMask.mask=t,this.currentMask.camera=e))},drawBitmapMask:function(t,e,r){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),t.renderWebGL(this,t,e),this.maskSource.unbind(!0),this.maskTarget.unbind();var i=this.gl,n=this.getCurrentStencilMask();n?(i.enable(i.STENCIL_TEST),n.mask.applyStencil(this,n.camera,!0)):this.currentMask.mask=null,this.pipelines.set(r),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.maskTarget.texture.webGLTexture),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(t,e){var r=new b(this.gl,t,e);return this.glProgramWrappers.push(r),r},createVertexBuffer:function(t,e){var r=this.gl,i=new x(r,t,r.ARRAY_BUFFER,e);return this.glBufferWrappers.push(i),i},createAttribLocation:function(t,e){var r=new T(this.gl,t,e);return this.glAttribLocationWrappers.push(r),r},createUniformLocation:function(t,e){var r=new S(this.gl,t,e);return this.glUniformLocationWrappers.push(r),r},createIndexBuffer:function(t,e){var r=this.gl,i=new x(r,t,r.ELEMENT_ARRAY_BUFFER,e);return this.glBufferWrappers.push(i),i},deleteTexture:function(t){if(t)return n(this.glTextureWrappers,t),t.destroy(),this},deleteFramebuffer:function(t){return t?(n(this.fboStack,t),n(this.glFramebufferWrappers,t),t.destroy(),this):this},deleteProgram:function(t){return t&&(n(this.glProgramWrappers,t),t.destroy()),this},deleteAttribLocation:function(t){return t&&(n(this.glAttribLocationWrappers,t),t.destroy()),this},deleteUniformLocation:function(t){return t&&(n(this.glUniformLocationWrappers,t),t.destroy()),this},deleteBuffer:function(t){return t?(n(this.glBufferWrappers,t),t.destroy(),this):this},preRenderCamera:function(t){var e=t.x,r=t.y,i=t.width,n=t.height,s=t.backgroundColor;t.emit(o.PRE_RENDER,t),this.pipelines.preBatchCamera(t),this.pushScissor(e,r,i,n),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),s.alphaGL>0&&this.pipelines.setMulti().drawFillRect(e,r,i,n,g.getTintFromFloats(s.blueGL,s.greenGL,s.redGL,1),s.alphaGL)},getCurrentStencilMask:function(){var t=null,e=this.maskStack,r=this.currentCameraMask;return e.length>0?t=e[e.length-1]:r.mask&&r.mask.isStencil&&(t=r),t},postRenderCamera:function(t){var e=t.flashEffect,r=t.fadeEffect;if(e.isRunning||r.isRunning||r.isComplete){var i=this.pipelines.setMulti();e.postRenderWebGL(i,g.getTintFromFloats),r.postRenderWebGL(i,g.getTintFromFloats)}t.dirty=!1,this.popScissor(),t.mask&&(this.currentCameraMask.mask=null,t.mask.postRenderWebGL(this,t._maskCamera)),this.pipelines.postBatchCamera(t),t.emit(o.POST_RENDER,t)},preRender:function(){if(!this.contextLost){var t=this.gl;if(t.bindFramebuffer(t.FRAMEBUFFER,null),this.config.clearBeforeRender){var e=this.config.backgroundColor;t.clearColor(e.redGL,e.greenGL,e.blueGL,e.alphaGL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}t.enable(t.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&t.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(u.PRE_RENDER)}},render:function(t,e,r){if(!this.contextLost){var i=e.length;if(this.emit(u.RENDER,t,r),this.preRenderCamera(r),0===i)return this.setBlendMode(a.BlendModes.NORMAL),void this.postRenderCamera(r);this.currentType="";for(var n=this.currentMask,o=0;o<i;o++){this.finalType=o===i-1;var s=e[o],h=s.mask;(n=this.currentMask).mask&&n.mask!==h&&n.mask.postRenderWebGL(this,n.camera),h&&n.mask!==h&&h.preRenderWebGL(this,s,r),s.blendMode!==this.currentBlendMode&&this.setBlendMode(s.blendMode);var c=s.type;c!==this.currentType&&(this.newType=!0,this.currentType=c),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=e[o+1].type===this.currentType,s.renderWebGL(this,s,r),this.newType=!1}(n=this.currentMask).mask&&n.mask.postRenderWebGL(this,n.camera),this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(r)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(u.POST_RENDER);var t=this.snapshotState;t.callback&&(m(this.gl,t),t.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var t=this.gl,e=this.getCurrentStencilMask();if(e){var r=e.mask;t.enable(t.STENCIL_TEST),r.invertAlpha?t.stencilFunc(t.NOTEQUAL,r.level,255):t.stencilFunc(t.EQUAL,r.level,255)}},snapshot:function(t,e,r){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,t,e,r)},snapshotArea:function(t,e,r,i,n,o,s){var a=this.snapshotState;return a.callback=n,a.type=o,a.encoder=s,a.getPixel=!1,a.x=t,a.y=e,a.width=r,a.height=i,this},snapshotPixel:function(t,e,r){return this.snapshotArea(t,e,1,1,r),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(t,e,r,i,n,o,s,a,h,u,c){void 0===n&&(n=!1),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=e),void 0===h&&(h=r),"pixel"===u&&(n=!0,u="image/png");var l=this.currentFramebuffer;this.snapshotArea(o,s,a,h,i,u,c);var f=this.snapshotState;return f.getPixel=n,f.isFramebuffer=!0,f.bufferWidth=e,f.bufferHeight=r,f.width=Math.min(f.width,e),f.height=Math.min(f.height,r),this.setFramebuffer(t),m(this.gl,f),this.setFramebuffer(l),f.callback=null,f.isFramebuffer=!1,this},canvasToTexture:function(t,e,r,i){void 0===r&&(r=!1),void 0===i&&(i=!1);var n=this.gl,o=n.NEAREST,s=n.NEAREST,a=t.width,h=t.height,u=n.CLAMP_TO_EDGE,l=c(a,h);return!r&&l&&(u=n.REPEAT),this.config.antialias&&(o=l&&this.mipmapFilter?this.mipmapFilter:n.LINEAR,s=n.LINEAR),e?(e.update(t,a,h,i,u,u,o,s,e.format),e):this.createTexture2D(0,o,s,u,u,n.RGBA,t,a,h,!0,!1,i)},createCanvasTexture:function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),this.canvasToTexture(t,null,e,r)},updateCanvasTexture:function(t,e,r,i){return void 0===r&&(r=!1),void 0===i&&(i=!1),this.canvasToTexture(t,e,i,r)},videoToTexture:function(t,e,r,i){void 0===r&&(r=!1),void 0===i&&(i=!1);var n=this.gl,o=n.NEAREST,s=n.NEAREST,a=t.videoWidth,h=t.videoHeight,u=n.CLAMP_TO_EDGE,l=c(a,h);return!r&&l&&(u=n.REPEAT),this.config.antialias&&(o=l&&this.mipmapFilter?this.mipmapFilter:n.LINEAR,s=n.LINEAR),e?(e.update(t,a,h,i,u,u,o,s,e.format),e):this.createTexture2D(0,o,s,u,u,n.RGBA,t,a,h,!0,!0,i)},createVideoTexture:function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),this.videoToTexture(t,null,e,r)},updateVideoTexture:function(t,e,r,i){return void 0===r&&(r=!1),void 0===i&&(i=!1),this.videoToTexture(t,e,i,r)},createUint8ArrayTexture:function(t,e,r){var i=this.gl,n=i.NEAREST,o=i.NEAREST,s=i.CLAMP_TO_EDGE;return c(e,r)&&(s=i.REPEAT),this.createTexture2D(0,n,o,s,s,i.RGBA,t,e,r)},setTextureFilter:function(t,e){var r=this.gl,i=0===e?r.LINEAR:r.NEAREST;r.activeTexture(r.TEXTURE0);var n=r.getParameter(r.TEXTURE_BINDING_2D);return r.bindTexture(r.TEXTURE_2D,t.webGLTexture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,i),t.minFilter=i,t.magFilter=i,n&&r.bindTexture(r.TEXTURE_2D,n),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var t=function(t){t.destroy()};i(this.glAttribLocationWrappers,t),i(this.glBufferWrappers,t),i(this.glFramebufferWrappers,t),i(this.glProgramWrappers,t),i(this.glTextureWrappers,t),i(this.glUniformLocationWrappers,t),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});t.exports=_},38683:(t,e,r)=>{var i=r(83419),n=r(95428),o=r(95540),s=r(14500),a=new i({initialize:function(t,e,r,i,n){this.pipeline=t,this.name=e,this.renderer=t.renderer,this.gl=this.renderer.gl,this.fragSrc=i,this.vertSrc=r,this.program=this.renderer.createProgram(r,i),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(n),this.createUniforms()},createAttributes:function(t){var e=0,r=0,i=[];this.vertexComponentCount=0;for(var n=0;n<t.length;n++){var a=t[n],h=a.name,u=o(a,"size",1),c=o(a,"type",s.FLOAT),l=c.enum,f=c.size,p=!!a.normalized;i.push({name:h,size:u,type:l,normalized:p,offset:r,enabled:!1,location:-1}),4===f?e+=u:e++,r+=u*f}this.vertexSize=r,this.vertexComponentCount=e,this.attributes=i},bind:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),e&&this.pipeline.flush(),this.renderer.setProgram(this.program),t&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(t){void 0===t&&(t=!1);for(var e=this.gl,r=this.renderer,i=this.vertexSize,n=this.attributes,o=this.program,s=0;s<n.length;s++){var a=n[s],h=a.size,u=a.type,c=a.offset,l=a.enabled,f=a.location,p=!!a.normalized;if(t){-1!==f&&r.deleteAttribLocation(f);var d=this.renderer.createAttribLocation(o,a.name);d.webGLAttribLocation>=0?(e.enableVertexAttribArray(d.webGLAttribLocation),e.vertexAttribPointer(d.webGLAttribLocation,h,u,p,i,c),a.enabled=!0,a.location=d):-1!==d.webGLAttribLocation&&e.disableVertexAttribArray(d.webGLAttribLocation)}else l?e.vertexAttribPointer(f.webGLAttribLocation,h,u,p,i,c):!l&&-1!==f&&f.webGLAttribLocation>-1&&(e.disableVertexAttribArray(f.webGLAttribLocation),a.location=-1)}return this},createUniforms:function(){var t,e,r,i=this.gl,n=this.program,o=this.uniforms,s=i.getProgramParameter(n.webGLProgram,i.ACTIVE_UNIFORMS);for(t=0;t<s;t++){var a=i.getActiveUniform(n.webGLProgram,t);if(a){e=a.name,null!==(r=this.renderer.createUniformLocation(n,e))&&(o[e]={name:e,location:r,setter:null,value1:null,value2:null,value3:null,value4:null});var h=e.indexOf("[");h>0&&(e=e.substr(0,h),o.hasOwnProperty(e)||null!==(r=this.renderer.createUniformLocation(n,e))&&(o[e]={name:e,location:r,setter:null,value1:null,value2:null,value3:null,value4:null}))}}return this},syncUniforms:function(){var t=this.gl;for(var e in this.renderer.setProgram(this.program),this.uniforms){var r=this.uniforms[e];r.setter&&r.setter.call(t,r.location.webGLUniformLocation,r.value1,r.value2,r.value3,r.value4)}},hasUniform:function(t){return this.uniforms.hasOwnProperty(t)},resetUniform:function(t){var e=this.uniforms[t];return e&&(e.value1=null,e.value2=null,e.value3=null,e.value4=null),this},setUniform1:function(t,e,r,i){var n=this.uniforms[e];return n?((i||n.value1!==r)&&(n.setter||(n.setter=t),n.value1=r,this.renderer.setProgram(this.program),t.call(this.gl,n.location.webGLUniformLocation,r),this.pipeline.currentShader=this),this):this},setUniform2:function(t,e,r,i,n){var o=this.uniforms[e];return o?((n||o.value1!==r||o.value2!==i)&&(o.setter||(o.setter=t),o.value1=r,o.value2=i,this.renderer.setProgram(this.program),t.call(this.gl,o.location.webGLUniformLocation,r,i),this.pipeline.currentShader=this),this):this},setUniform3:function(t,e,r,i,n,o){var s=this.uniforms[e];return s?((o||s.value1!==r||s.value2!==i||s.value3!==n)&&(s.setter||(s.setter=t),s.value1=r,s.value2=i,s.value3=n,this.renderer.setProgram(this.program),t.call(this.gl,s.location.webGLUniformLocation,r,i,n),this.pipeline.currentShader=this),this):this},setUniform4:function(t,e,r,i,n,o,s){var a=this.uniforms[e];return a?((s||a.value1!==r||a.value2!==i||a.value3!==n||a.value4!==o)&&(a.setter||(a.setter=t),a.value1=r,a.value2=i,a.value3=n,a.value4=o,this.renderer.setProgram(this.program),t.call(this.gl,a.location.webGLUniformLocation,r,i,n,o),this.pipeline.currentShader=this),this):this},setBoolean:function(t,e){return this.setUniform1(this.gl.uniform1i,t,Number(e))},set1f:function(t,e){return this.setUniform1(this.gl.uniform1f,t,e)},set2f:function(t,e,r){return this.setUniform2(this.gl.uniform2f,t,e,r)},set3f:function(t,e,r,i){return this.setUniform3(this.gl.uniform3f,t,e,r,i)},set4f:function(t,e,r,i,n){return this.setUniform4(this.gl.uniform4f,t,e,r,i,n)},set1fv:function(t,e){return this.setUniform1(this.gl.uniform1fv,t,e,!0)},set2fv:function(t,e){return this.setUniform1(this.gl.uniform2fv,t,e,!0)},set3fv:function(t,e){return this.setUniform1(this.gl.uniform3fv,t,e,!0)},set4fv:function(t,e){return this.setUniform1(this.gl.uniform4fv,t,e,!0)},set1iv:function(t,e){return this.setUniform1(this.gl.uniform1iv,t,e,!0)},set2iv:function(t,e){return this.setUniform1(this.gl.uniform2iv,t,e,!0)},set3iv:function(t,e){return this.setUniform1(this.gl.uniform3iv,t,e,!0)},set4iv:function(t,e){return this.setUniform1(this.gl.uniform4iv,t,e,!0)},set1i:function(t,e){return this.setUniform1(this.gl.uniform1i,t,e)},set2i:function(t,e,r){return this.setUniform2(this.gl.uniform2i,t,e,r)},set3i:function(t,e,r,i){return this.setUniform3(this.gl.uniform3i,t,e,r,i)},set4i:function(t,e,r,i,n){return this.setUniform4(this.gl.uniform4i,t,e,r,i,n)},setMatrix2fv:function(t,e,r){return this.setUniform2(this.gl.uniformMatrix2fv,t,e,r,!0)},setMatrix3fv:function(t,e,r){return this.setUniform2(this.gl.uniformMatrix3fv,t,e,r,!0)},setMatrix4fv:function(t,e,r){return this.setUniform2(this.gl.uniformMatrix4fv,t,e,r,!0)},createProgram:function(t,e){return void 0===t&&(t=this.vertSrc),void 0===e&&(e=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=t,this.fragSrc=e,this.program=this.renderer.createProgram(t,e),this.createUniforms(),this.rebind()},destroy:function(){var t=this.renderer;n(this.uniforms,(function(e){t.deleteUniformLocation(e.location)})),this.uniforms=null,n(this.attributes,(function(e){t.deleteAttribLocation(e.location)})),this.attributes=null,t.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});t.exports=a},14500:t=>{t.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},4159:(t,e,r)=>{var i=r(14500),n=r(79291),o={PipelineManager:r(7530),Pipelines:r(96615),RenderTarget:r(32302),Utils:r(70554),WebGLPipeline:r(29100),WebGLRenderer:r(74797),WebGLShader:r(38683),Wrappers:r(9503)};o=n(!1,o,i),t.exports=o},31302:(t,e,r)=>{var i=r(83419),n=r(95540),o=r(78908),s=r(85191),a=r(14500),h=r(29100),u=new i({Extends:h,initialize:function(t){t.fragShader=n(t,"fragShader",o),t.vertShader=n(t,"vertShader",s),t.batchSize=n(t,"batchSize",1),t.vertices=n(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=n(t,"attributes",[{name:"inPosition",size:2,type:a.FLOAT}]),h.call(this,t)},boot:function(){h.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(t,e){h.prototype.resize.call(this,t,e),this.set2f("uResolution",t,e)},beginMask:function(t,e,r){this.renderer.beginBitmapMask(t,r)},endMask:function(t,e,r){var i=this.gl,n=this.renderer,o=t.bitmapMask;o&&i&&(n.drawBitmapMask(o,e,this),r&&this.set2f("uResolution",r.width,r.height),this.set1i("uInvertMaskAlpha",t.invertAlpha),i.drawArrays(this.topology,0,3),r&&this.set2f("uResolution",this.width,this.height),i.bindTexture(i.TEXTURE_2D,null))}});t.exports=u},92651:(t,e,r)=>{var i=r(83419),n=r(58918),o=r(14811),s=r(95540),a=r(43558),h=r(89350),u=r(70554),c=new i({Extends:a,initialize:function(t){t.shaders=[u.setGlowQuality(h.FXGlowFrag,t.game),h.FXShadowFrag,h.FXPixelateFrag,h.FXVignetteFrag,h.FXShineFrag,h.FXBlurLowFrag,h.FXBlurMedFrag,h.FXBlurHighFrag,h.FXGradientFrag,h.FXBloomFrag,h.ColorMatrixFrag,h.FXCircleFrag,h.FXBarrelFrag,h.FXDisplacementFrag,h.FXWipeFrag,h.FXBokehFrag],a.call(this,t);var e=this.game;this.glow=new n.Glow(e),this.shadow=new n.Shadow(e),this.pixelate=new n.Pixelate(e),this.vignette=new n.Vignette(e),this.shine=new n.Shine(e),this.gradient=new n.Gradient(e),this.circle=new n.Circle(e),this.barrel=new n.Barrel(e),this.wipe=new n.Wipe(e),this.bokeh=new n.Bokeh(e);var r=[];r[o.GLOW]=this.onGlow,r[o.SHADOW]=this.onShadow,r[o.PIXELATE]=this.onPixelate,r[o.VIGNETTE]=this.onVignette,r[o.SHINE]=this.onShine,r[o.BLUR]=this.onBlur,r[o.GRADIENT]=this.onGradient,r[o.BLOOM]=this.onBloom,r[o.COLOR_MATRIX]=this.onColorMatrix,r[o.CIRCLE]=this.onCircle,r[o.BARREL]=this.onBarrel,r[o.DISPLACEMENT]=this.onDisplacement,r[o.WIPE]=this.onWipe,r[o.BOKEH]=this.onBokeh,this.fxHandlers=r,this.source,this.target,this.swap},onDraw:function(t,e,r){this.source=t,this.target=e,this.swap=r;var i=t.width,n=t.height,o=this.tempSprite,s=this.fxHandlers;if(o&&o.preFX)for(var a=o.preFX.list,h=0;h<a.length;h++){var u=a[h];u.active&&s[u.type].call(this,u,i,n)}this.drawToGame(this.source)},runDraw:function(){var t=this.source,e=this.target;this.copy(t,e),this.source=e,this.target=t},onGlow:function(t,e,r){var i=this.shaders[o.GLOW];this.setShader(i),this.glow.onPreRender(t,i,e,r),this.runDraw()},onShadow:function(t){var e=this.shaders[o.SHADOW];this.setShader(e),this.shadow.onPreRender(t,e),this.runDraw()},onPixelate:function(t,e,r){var i=this.shaders[o.PIXELATE];this.setShader(i),this.pixelate.onPreRender(t,i,e,r),this.runDraw()},onVignette:function(t){var e=this.shaders[o.VIGNETTE];this.setShader(e),this.vignette.onPreRender(t,e),this.runDraw()},onShine:function(t,e,r){var i=this.shaders[o.SHINE];this.setShader(i),this.shine.onPreRender(t,i,e,r),this.runDraw()},onBlur:function(t,e,r){var i=s(t,"quality"),n=this.shaders[o.BLUR+i];this.setShader(n),this.set1i("uMainSampler",0),this.set2f("resolution",e,r),this.set1f("strength",s(t,"strength")),this.set3fv("color",s(t,"glcolor"));for(var a=s(t,"x"),h=s(t,"y"),u=s(t,"steps"),c=0;c<u;c++)this.set2f("offset",a,0),this.runDraw(),this.set2f("offset",0,h),this.runDraw()},onGradient:function(t){var e=this.shaders[o.GRADIENT];this.setShader(e),this.gradient.onPreRender(t,e),this.runDraw()},onBloom:function(t,e,r){var i=this.shaders[o.BLOOM];this.copySprite(this.source,this.swap),this.setShader(i),this.set1i("uMainSampler",0),this.set1f("strength",s(t,"blurStrength")),this.set3fv("color",s(t,"glcolor"));for(var n=2/e*s(t,"offsetX"),a=2/r*s(t,"offsetY"),h=s(t,"steps"),u=0;u<h;u++)this.set2f("offset",n,0),this.runDraw(),this.set2f("offset",0,a),this.runDraw();this.blendFrames(this.swap,this.source,this.target,s(t,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(t){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",t.getData()),this.set1f("uAlpha",t.alpha),this.runDraw()},onCircle:function(t,e,r){var i=this.shaders[o.CIRCLE];this.setShader(i),this.circle.onPreRender(t,i,e,r),this.runDraw()},onBarrel:function(t){var e=this.shaders[o.BARREL];this.setShader(e),this.barrel.onPreRender(t,e),this.runDraw()},onDisplacement:function(t){this.setShader(this.shaders[o.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",t.x,t.y),this.bindTexture(t.glTexture,1),this.runDraw()},onWipe:function(t){var e=this.shaders[o.WIPE];this.setShader(e),this.wipe.onPreRender(t,e),this.runDraw()},onBokeh:function(t,e,r){var i=this.shaders[o.BOKEH];this.setShader(i),this.bokeh.onPreRender(t,i,e,r),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,a.prototype.destroy.call(this),this}});t.exports=c},96569:(t,e,r)=>{var i=r(83419),n=r(95540),o=r(31063),s=r(57516),a=r(61340),h=r(26099),u=r(29100),c=new i({Extends:s,initialize:function(t){var e=n(t,"fragShader",o);t.fragShader=e.replace("%LIGHT_COUNT%",t.game.renderer.config.maxLights),s.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new h,this._tempMatrix=new a,this._tempMatrix2=new a},boot:function(){u.prototype.boot.call(this)},onRender:function(t,e){var r=t.sys.lights;if(this.lightsActive=!1,r&&r.active){var i,n=r.getLights(e),o=n.length;this.lightsActive=!0;var s=this.renderer.height,a=e.matrix,h=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",e.x,e.y,e.rotation,e.zoom),this.set3f("uAmbientLightColor",r.ambientColor.r,r.ambientColor.g,r.ambientColor.b),this.set1i("uLightCount",o),i=0;i<o;i++){var u=n[i].light,c=u.color,l="uLights["+i+"].";a.transformPoint(u.x,u.y,h),this.set2f(l+"position",h.x-e.scrollX*u.scrollFactorX*e.zoom,s-(h.y-e.scrollY*u.scrollFactorY*e.zoom)),this.set3f(l+"color",c.r,c.g,c.b),this.set1f(l+"intensity",u.intensity),this.set1f(l+"radius",u.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(t){if(t!==this.currentNormalMapRotation||0===this.vertexCount){this.vertexCount>0&&this.flush();var e=this.inverseRotationMatrix;if(t){var r=-t,i=Math.cos(r),n=Math.sin(r);e[1]=n,e[3]=-n,e[0]=e[4]=i}else e[0]=e[4]=1,e[1]=e[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,e),this.currentNormalMapRotation=t}},setTexture2D:function(t,e){var r=this.renderer;void 0===t&&(t=r.whiteTexture);var i=this.getNormalMap(e);this.isNewNormalMap(t,i)&&(this.flush(),this.createBatch(t),this.addTextureToBatch(i),this.currentNormalMap=i);var n=0;return e&&e.parentContainer?n=e.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2).rotationNormalized:e&&(n=e.rotation),this.setNormalMapRotation(n),0},setGameObject:function(t,e){void 0===e&&(e=t.frame);var r=e.glTexture,i=this.getNormalMap(t);if(this.isNewNormalMap(r,i)&&(this.flush(),this.createBatch(r),this.addTextureToBatch(i),this.currentNormalMap=i),t.parentContainer){var n=t.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(n.rotationNormalized)}else this.setNormalMapRotation(t.rotation);return 0},isNewNormalMap:function(t,e){return this.currentTexture!==t||this.currentNormalMap!==e},getNormalMap:function(t){var e;return t?(t.displayTexture?e=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?e=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(e=Array.isArray(t.tileset)?t.tileset[0].image.dataSource[0]:t.tileset.image.dataSource[0]),e?e.glTexture:this.renderer.normalTexture):this.renderer.normalTexture},batchSprite:function(t,e,r){this.lightsActive&&s.prototype.batchSprite.call(this,t,e,r)},batchTexture:function(t,e,r,i,n,o,a,h,u,c,l,f,p,d,v,y,g,m,x,b,w,E,T,S,_,O,P,M,A,L,C,R){this.lightsActive&&s.prototype.batchTexture.call(this,t,e,r,i,n,o,a,h,u,c,l,f,p,d,v,y,g,m,x,b,w,E,T,S,_,O,P,M,A,L,C,R)},batchTextureFrame:function(t,e,r,i,n,o,a){this.lightsActive&&s.prototype.batchTextureFrame.call(this,t,e,r,i,n,o,a)}});t.exports=c},56527:(t,e,r)=>{var i=r(83419),n=r(95540),o=r(57516),s=r(45561),a=r(60722),h=r(14500),u=r(29100),c=new i({Extends:o,initialize:function(t){t.fragShader=n(t,"fragShader",s),t.vertShader=n(t,"vertShader",a),t.attributes=n(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:h.UNSIGNED_BYTE,normalized:!0}]),t.forceZero=!0,t.resizeUniform="uResolution",o.call(this,t)},boot:function(){u.prototype.boot.call(this);var t=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",t.width,t.height),this.set1i("uRoundPixels",t.config.roundPixels)}});t.exports=c},57516:(t,e,r)=>{var i=r(83419),n=r(94811),o=r(95540),s=r(98840),a=r(44667),h=r(61340),u=r(70554),c=r(14500),l=r(29100),f=new i({Extends:l,initialize:function(t){var e=t.game.renderer,r=o(t,"fragShader",s);t.fragShader=u.parseFragmentShaderMaxTextures(r,e.maxTextures),t.vertShader=o(t,"vertShader",a),t.attributes=o(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),t.resizeUniform="uResolution",l.call(this,t),this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this.calcMatrix=new h,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){l.prototype.boot.call(this);var t=this.renderer;this.set1iv("uMainSampler",t.textureIndexes),this.set2f("uResolution",t.width,t.height),this.set1i("uRoundPixels",t.config.roundPixels)},batchSprite:function(t,e,r){this.manager.set(this,t);var i=this._tempMatrix1,n=this._tempMatrix2,o=this._tempMatrix3,s=t.frame,a=s.glTexture,h=s.u0,c=s.v0,l=s.u1,f=s.v1,p=s.x,d=s.y,v=s.cutWidth,y=s.cutHeight,g=s.customPivot,m=t.displayOriginX,x=t.displayOriginY,b=-m+p,w=-x+d;if(t.isCropped){var E=t._crop;E.flipX===t.flipX&&E.flipY===t.flipY||s.updateCropUVs(E,t.flipX,t.flipY),h=E.u0,c=E.v0,l=E.u1,f=E.v1,v=E.width,y=E.height,b=-m+(p=E.x),w=-x+(d=E.y)}var T=1,S=1;t.flipX&&(g||(b+=-s.realWidth+2*m),T=-1),t.flipY&&(g||(w+=-s.realHeight+2*x),S=-1);var _=t.x,O=t.y;n.applyITRS(_,O,t.rotation,t.scaleX*T,t.scaleY*S),i.copyFrom(e.matrix),r?(i.multiplyWithOffset(r,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),n.e=_,n.f=O):(n.e-=e.scrollX*t.scrollFactorX,n.f-=e.scrollY*t.scrollFactorY),i.multiply(n,o);var P=o.setQuad(b,w,b+v,w+y),M=u.getTintAppendFloatAlpha,A=e.alpha,L=M(t.tintTopLeft,A*t._alphaTL),C=M(t.tintTopRight,A*t._alphaTR),R=M(t.tintBottomLeft,A*t._alphaBL),k=M(t.tintBottomRight,A*t._alphaBR);this.shouldFlush(6)&&this.flush();var F=this.setGameObject(t,s);this.manager.preBatch(t),this.currentShader.set1i("uRoundPixels",e.roundPixels),this.batchQuad(t,P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],h,c,l,f,L,C,R,k,t.tintFill,a,F),this.manager.postBatch(t)},batchTexture:function(t,e,r,i,n,o,s,a,h,u,c,l,f,p,d,v,y,g,m,x,b,w,E,T,S,_,O,P,M,A,L,C,R){void 0===R&&(R=!1),this.manager.set(this,t);var k=this._tempMatrix1,F=this._tempMatrix2,I=this._tempMatrix3,D=g/r+O,j=m/i+P,B=(g+x)/r+O,N=(m+b)/i+P,G=s,U=a,Y=-v,z=-y;if(t.isCropped){var X=t._crop,V=X.width,W=X.height;G=V,U=W,s=V,a=W;var H=g=X.x,q=m=X.y;l&&(H=x-X.x-V),f&&(q=b-X.y-W),D=H/r+O,j=q/i+P,B=(H+V)/r+O,N=(q+W)/i+P,Y=-v+g,z=-y+m}l&&(G*=-1,Y+=s),(f^=!L&&e.isRenderTexture?1:0)&&(U*=-1,z+=a),F.applyITRS(n,o,c,h,u),k.copyFrom(M.matrix),A?(k.multiplyWithOffset(A,-M.scrollX*p,-M.scrollY*d),F.e=n,F.f=o):(F.e-=M.scrollX*p,F.f-=M.scrollY*d),k.multiply(F,I);var K=I.setQuad(Y,z,Y+G,z+U);null==C&&(C=this.setTexture2D(e)),t&&!R&&this.manager.preBatch(t),this.currentShader.set1i("uRoundPixels",M.roundPixels),this.batchQuad(t,K[0],K[1],K[2],K[3],K[4],K[5],K[6],K[7],D,j,B,N,w,E,T,S,_,e,C),t&&!R&&this.manager.postBatch(t)},batchTextureFrame:function(t,e,r,i,n,o,s){this.manager.set(this);var a=this._tempMatrix1.copyFrom(o),h=this._tempMatrix2;s?a.multiply(s,h):h=a;var c=h.setQuad(e,r,e+t.width,r+t.height),l=this.setTexture2D(t.source.glTexture);i=u.getTintAppendFloatAlpha(i,n),this.batchQuad(null,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],t.u0,t.v0,t.u1,t.v1,i,i,i,i,0,t.glTexture,l)},batchFillRect:function(t,e,r,i,n,o){this.renderer.pipelines.set(this);var s=this.calcMatrix;o&&o.multiply(n,s);var a=s.setQuad(t,e,t+r,e+i),h=this.fillTint;this.batchQuad(null,a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],0,0,1,1,h.TL,h.TR,h.BL,h.BR,2)},batchFillTriangle:function(t,e,r,i,n,o,s,a){this.renderer.pipelines.set(this);var h=this.calcMatrix;a&&a.multiply(s,h);var u=h.getX(t,e),c=h.getY(t,e),l=h.getX(r,i),f=h.getY(r,i),p=h.getX(n,o),d=h.getY(n,o),v=this.fillTint;this.currentShader.set1i("uRoundPixels",!1),this.batchTri(null,u,c,l,f,p,d,0,0,1,1,v.TL,v.TR,v.BL,2)},batchStrokeTriangle:function(t,e,r,i,n,o,s,a,h){var u=this.tempTriangle;u[0].x=t,u[0].y=e,u[0].width=s,u[1].x=r,u[1].y=i,u[1].width=s,u[2].x=n,u[2].y=o,u[2].width=s,u[3].x=t,u[3].y=e,u[3].width=s,this.batchStrokePath(u,s,!1,a,h)},batchFillPath:function(t,e,r){this.renderer.pipelines.set(this);var i=this.calcMatrix;r&&r.multiply(e,i);for(var o,s,a=t.length,h=this.polygonCache,u=this.fillTint.TL,c=this.fillTint.TR,l=this.fillTint.BL,f=0;f<a;++f)s=t[f],h.push(s.x,s.y);a=(o=n(h)).length,this.currentShader.set1i("uRoundPixels",!1);for(var p=0;p<a;p+=3){var d=2*o[p+0],v=2*o[p+1],y=2*o[p+2],g=h[d+0],m=h[d+1],x=h[v+0],b=h[v+1],w=h[y+0],E=h[y+1],T=i.getX(g,m),S=i.getY(g,m),_=i.getX(x,b),O=i.getY(x,b),P=i.getX(w,E),M=i.getY(w,E);this.batchTri(null,T,S,_,O,P,M,0,0,1,1,u,c,l,2)}h.length=0},batchStrokePath:function(t,e,r,i,n){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var o=t.length-1,s=0;s<o;s++){var a=t[s],h=t[s+1];this.batchLine(a.x,a.y,h.x,h.y,a.width/2,h.width/2,e,s,!r&&s===o-1,i,n)}},batchLine:function(t,e,r,i,n,o,s,a,h,u,c){this.renderer.pipelines.set(this);var l=this.calcMatrix;c&&c.multiply(u,l);var f=r-t,p=i-e,d=Math.sqrt(f*f+p*p);if(0!==d){var v=n*(i-e)/d,y=n*(t-r)/d,g=o*(i-e)/d,m=o*(t-r)/d,x=r-g,b=i-m,w=t-v,E=e-y,T=r+g,S=i+m,_=t+v,O=e+y,P=l.getX(x,b),M=l.getY(x,b),A=l.getX(w,E),L=l.getY(w,E),C=l.getX(T,S),R=l.getY(T,S),k=l.getX(_,O),F=l.getY(_,O),I=this.strokeTint,D=I.TL,j=I.TR,B=I.BL,N=I.BR;if(this.currentShader.set1i("uRoundPixels",!1),this.batchQuad(null,k,F,A,L,P,M,C,R,0,0,1,1,D,j,B,N,2),!(s<=2)){var G=this.prevQuad,U=this.firstQuad;a>0&&G[4]?this.batchQuad(null,k,F,A,L,G[0],G[1],G[2],G[3],0,0,1,1,D,j,B,N,2):(U[0]=k,U[1]=F,U[2]=A,U[3]=L,U[4]=1),h&&U[4]?this.batchQuad(null,P,M,C,R,U[0],U[1],U[2],U[3],0,0,1,1,D,j,B,N,2):(G[0]=P,G[1]=M,G[2]=C,G[3]=R,G[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,l.prototype.destroy.call(this),this}});t.exports=f},43439:(t,e,r)=>{var i=r(83419),n=r(95540),o=r(4127),s=r(89924),a=r(29100),h=new i({Extends:a,initialize:function(t){t.vertShader=n(t,"vertShader",s),t.fragShader=n(t,"fragShader",o),t.attributes=n(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),a.call(this,t)},onRender:function(t,e){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",e.zoom)},batchPointLight:function(t,e,r,i,n,o,s,a,h,u,c,l){var f=t.color,p=t.intensity,d=t.radius,v=t.attenuation,y=f.r*p,g=f.g*p,m=f.b*p,x=e.alpha*t.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(r,i,c,l,d,v,y,g,m,x),this.batchLightVert(n,o,c,l,d,v,y,g,m,x),this.batchLightVert(s,a,c,l,d,v,y,g,m,x),this.batchLightVert(r,i,c,l,d,v,y,g,m,x),this.batchLightVert(s,a,c,l,d,v,y,g,m,x),this.batchLightVert(h,u,c,l,d,v,y,g,m,x),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(t,e,r,i,n,o,s,a,h,u){var c=this.vertexViewF32,l=this.vertexCount*this.currentShader.vertexComponentCount-1;c[++l]=t,c[++l]=e,c[++l]=r,c[++l]=i,c[++l]=n,c[++l]=o,c[++l]=s,c[++l]=a,c[++l]=h,c[++l]=u,this.vertexCount++}});t.exports=h},84057:(t,e,r)=>{var i=r(83419),n=r(89422),o=r(95540),s=r(27681),a=r(49627),h=r(29100),u=new i({Extends:h,initialize:function(t){t.renderTarget=o(t,"renderTarget",1),t.fragShader=o(t,"fragShader",s),t.vertShader=o(t,"vertShader",a),t.attributes=o(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],h.call(this,t),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new n,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){h.prototype.boot.call(this);var t=this.manager.UTILITY_PIPELINE;this.fullFrame1=t.fullFrame1,this.fullFrame2=t.fullFrame2,this.halfFrame1=t.halfFrame1,this.halfFrame2=t.halfFrame2;var e=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",e.width,e.height),this.set1i("uRoundPixels",e.config.roundPixels);for(var r=this.renderTargets,i=0;i<r.length;i++)r[i].autoResize=!0},postBatch:function(t){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(t),this},onDraw:function(t){this.bindAndDraw(t)},getController:function(t){return void 0!==t?t:this.controller?this.controller:this},copySprite:function(t,e,r){void 0===r&&(r=!1);var i=this.gl;i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture.webGLTexture);var n=i.getParameter(i.FRAMEBUFFER_BINDING);i.bindFramebuffer(i.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e.texture.webGLTexture,0),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.bufferData(i.ARRAY_BUFFER,this.vertexData,i.STATIC_DRAW),i.drawArrays(i.TRIANGLES,0,6),r&&(i.bindTexture(i.TEXTURE_2D,null),i.bindFramebuffer(i.FRAMEBUFFER,n))},copyFrame:function(t,e,r,i,n){this.manager.copyFrame(t,e,r,i,n)},copyToGame:function(t){this.manager.copyToGame(t)},drawFrame:function(t,e,r){this.manager.drawFrame(t,e,r,this.colorMatrix)},blendFrames:function(t,e,r,i,n){this.manager.blendFrames(t,e,r,i,n)},blendFramesAdditive:function(t,e,r,i,n){this.manager.blendFramesAdditive(t,e,r,i,n)},clearFrame:function(t,e){this.manager.clearFrame(t,e)},blitFrame:function(t,e,r,i,n,o){this.manager.blitFrame(t,e,r,i,n,o)},copyFrameRect:function(t,e,r,i,n,o,s,a){this.manager.copyFrameRect(t,e,r,i,n,o,s,a)},bindAndDraw:function(t,e,r,i,n){void 0===r&&(r=!0),void 0===i&&(i=!0);var o=this.gl,s=this.renderer;this.bind(n),this.set1i("uMainSampler",0),e?(o.viewport(0,0,e.width,e.height),o.bindFramebuffer(o.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e.texture.webGLTexture,0),r&&(i?o.clearColor(0,0,0,0):o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT))):(s.popFramebuffer(!1,!1),s.currentFramebuffer||o.viewport(0,0,s.width,s.height)),s.restoreStencilMask(),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture.webGLTexture),o.bufferData(o.ARRAY_BUFFER,this.vertexData,o.STATIC_DRAW),o.drawArrays(o.TRIANGLES,0,6),e&&(o.bindTexture(o.TEXTURE_2D,null),o.bindFramebuffer(o.FRAMEBUFFER,s.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),h.prototype.destroy.call(this),this}});t.exports=u},43558:(t,e,r)=>{var i=r(10312),n=r(67502),o=r(83419),s=r(96293),a=r(95540),h=r(57516),u=r(27681),c=r(87841),l=r(32302),f=r(45561),p=r(60722),d=r(29100),v=new o({Extends:h,initialize:function(t){var e=a(t,"fragShader",u),r=a(t,"vertShader",p),i=a(t,"drawShader",u),n=[{name:"DrawSprite",fragShader:f,vertShader:p},{name:"CopySprite",fragShader:e,vertShader:r},{name:"DrawGame",fragShader:i,vertShader:p},{name:"ColorMatrix",fragShader:s}],o=a(t,"shaders",[]);t.shaders=n.concat(o),t.vertShader||(t.vertShader=r),t.batchSize=1,h.call(this,t),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new c,this.targetBounds=new c,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){d.prototype.boot.call(this);var t=this.shaders,e=this.renderer;this.drawSpriteShader=t[0],this.copyShader=t[1],this.gameShader=t[2],this.colorMatrixShader=t[3],this.fsTarget=new l(e,e.width,e.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var r=new ArrayBuffer(168);this.quadVertexData=r,this.quadVertexViewF32=new Float32Array(r),this.quadVertexBuffer=e.createVertexBuffer(r,this.gl.STATIC_DRAW),this.onResize(e.width,e.height),this.currentShader=this.copyShader,this.set2f("uResolution",e.width,e.height),this.set1i("uRoundPixels",e.config.roundPixels)},onResize:function(t,e){var r=this.quadVertexViewF32;r[1]=e,r[22]=e,r[14]=t,r[28]=t,r[35]=t,r[36]=e},batchQuad:function(t,e,r,i,o,s,a,h,u,c,l,f,p,d,v,y,g,m,x){var b=Math.min(e,i,s,h),w=Math.min(r,o,a,u),E=Math.max(e,i,s,h)-b,T=Math.max(r,o,a,u)-w,S=this.spriteBounds.setTo(b,w,E,T),_=t?t.preFX.padding:0,O=E+2*_,P=T+2*_,M=Math.abs(Math.max(O,P)),A=this.manager.getRenderTarget(M),L=this.targetBounds.setTo(0,0,A.width,A.height);n(L,S.centerX,S.centerY),this.tempSprite=t;var C=this.gl,R=this.renderer;R.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",R.width,R.height),this.set1i("uRoundPixels",R.config.roundPixels),this.flipProjectionMatrix(!0),t&&(this.onDrawSprite(t,A),t.preFX.onFX(this));var k=this.fsTarget;return this.flush(),C.viewport(0,0,R.width,R.height),C.bindFramebuffer(C.FRAMEBUFFER,k.framebuffer.webGLFramebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,k.texture.webGLTexture,0),C.clearColor(0,0,0,0),C.clear(C.COLOR_BUFFER_BIT),this.setTexture2D(x),this.batchVert(e,r,c,l,0,m,d),this.batchVert(i,o,c,p,0,m,y),this.batchVert(s,a,f,p,0,m,g),this.batchVert(e,r,c,l,0,m,d),this.batchVert(s,a,f,p,0,m,g),this.batchVert(h,u,f,l,0,m,v),this.flush(),this.flipProjectionMatrix(!1),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,A.texture.webGLTexture),C.copyTexSubImage2D(C.TEXTURE_2D,0,0,0,L.x,L.y,L.width,L.height),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null),this.onBatch(t),this.currentShader=this.copyShader,this.onDraw(A,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(t,e,r,n,o,s,a){void 0===r&&(r=!0),void 0===n&&(n=!0),void 0===o&&(o=!1),void 0===a&&(a=this.copyShader);var h=this.gl,u=this.tempSprite;s&&(a=this.colorMatrixShader),this.currentShader=a;var c=this.setVertexBuffer(this.quadVertexBuffer);a.bind(c,!1);var l=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",l.width,l.height),this.set1i("uRoundPixels",l.config.roundPixels),u.preFX.onFXCopy(this),this.onCopySprite(t,e,u),s&&(this.set1fv("uColorMatrix",s.getData()),this.set1f("uAlpha",s.alpha)),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,t.texture.webGLTexture),t.height>e.height)h.viewport(0,0,t.width,t.height),this.setTargetUVs(t,e);else{var f=e.height-t.height;h.viewport(0,f,t.width,t.height),this.resetUVs()}if(h.bindFramebuffer(h.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,e.texture.webGLTexture,0),r&&(h.clearColor(0,0,0,Number(!n)),h.clear(h.COLOR_BUFFER_BIT)),o){var p=this.renderer.currentBlendMode;this.renderer.setBlendMode(i.ERASE)}h.bufferData(h.ARRAY_BUFFER,this.quadVertexData,h.STATIC_DRAW),h.drawArrays(h.TRIANGLES,0,6),o&&this.renderer.setBlendMode(p),h.bindFramebuffer(h.FRAMEBUFFER,null)},copy:function(t,e){var r=this.gl;this.set1i("uMainSampler",0),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.texture.webGLTexture),r.viewport(0,0,t.width,t.height),this.setUVs(0,0,0,1,1,1,1,0),r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.texture.webGLTexture,0),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.bufferData(r.ARRAY_BUFFER,this.quadVertexData,r.STATIC_DRAW),r.drawArrays(r.TRIANGLES,0,6),r.bindFramebuffer(r.FRAMEBUFFER,null)},blendFrames:function(t,e,r,i,n){this.manager.blendFrames(t,e,r,i,n)},blendFramesAdditive:function(t,e,r,i,n){this.manager.blendFramesAdditive(t,e,r,i,n)},drawToGame:function(t){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(t)},copyToGame:function(t){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(t)},bindAndDraw:function(t){var e=this.gl,r=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(t.texture);var i=this._tempMatrix1.loadIdentity(),n=this.targetBounds.x,o=this.targetBounds.y,s=n+t.width,a=o+t.height,h=i.getX(n,o),u=i.getX(n,a),c=i.getX(s,a),l=i.getX(s,o),f=i.getY(n,o),p=i.getY(n,a),d=i.getY(s,a),v=i.getY(s,o),y=16777215;this.batchVert(h,f,0,0,0,0,y),this.batchVert(u,p,0,1,0,0,y),this.batchVert(c,d,1,1,0,0,y),this.batchVert(h,f,0,0,0,0,y),this.batchVert(c,d,1,1,0,0,y),this.batchVert(l,v,1,0,0,0,y),r.restoreFramebuffer(!1,!0),r.currentFramebuffer||e.viewport(0,0,r.width,r.height),r.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(t){this.drawToGame(t)},setUVs:function(t,e,r,i,n,o,s,a){var h=this.quadVertexViewF32;h[2]=t,h[3]=e,h[9]=r,h[10]=i,h[16]=n,h[17]=o,h[23]=t,h[24]=e,h[30]=n,h[31]=o,h[37]=s,h[38]=a},setTargetUVs:function(t,e){var r=e.height/t.height;r=r>.5?.5-(r-.5):.5-r+.5,this.setUVs(0,r,0,1+r,1,1+r,1,r)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,h.prototype.destroy.call(this),this}});t.exports=v},81041:(t,e,r)=>{var i=r(83419),n=r(95540),o=r(57516),s=new i({Extends:o,initialize:function(t){t.topology=5,t.batchSize=n(t,"batchSize",256),o.call(this,t)}});t.exports=s},12385:(t,e,r)=>{var i=r(83419),n=r(95540),o=r(57516),s=r(45561),a=r(60722),h=r(29100),u=new i({Extends:o,initialize:function(t){t.fragShader=n(t,"fragShader",s),t.vertShader=n(t,"vertShader",a),t.forceZero=!0,o.call(this,t)},boot:function(){h.prototype.boot.call(this);var t=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",t.width,t.height),this.set1i("uRoundPixels",t.config.roundPixels)}});t.exports=u},7589:(t,e,r)=>{var i=r(35407),n=r(10312),o=r(83419),s=r(89422),a=r(96293),h=r(36682),u=r(95540),c=r(48247),l=r(49627),f=r(29100),p=new o({Extends:f,initialize:function(t){t.renderTarget=u(t,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),t.vertShader=u(t,"vertShader",l),t.shaders=u(t,"shaders",[{name:"Copy",fragShader:h},{name:"AddBlend",fragShader:i},{name:"LinearBlend",fragShader:c},{name:"ColorMatrix",fragShader:a}]),t.attributes=u(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,f.call(this,t),this.colorMatrix=new s,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){f.prototype.boot.call(this);var t=this.shaders,e=this.renderTargets;this.copyShader=t[0],this.addShader=t[1],this.linearShader=t[2],this.colorMatrixShader=t[3],this.fullFrame1=e[0],this.fullFrame2=e[1],this.halfFrame1=e[2],this.halfFrame2=e[3]},copyFrame:function(t,e,r,i,n){void 0===r&&(r=1),void 0===i&&(i=!0),void 0===n&&(n=!0);var o=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",r),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture.webGLTexture),e?(o.viewport(0,0,e.width,e.height),o.bindFramebuffer(o.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e.texture.webGLTexture,0)):o.viewport(0,0,t.width,t.height),i&&(n?o.clearColor(0,0,0,0):o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT)),o.bufferData(o.ARRAY_BUFFER,this.vertexData,o.STATIC_DRAW),o.drawArrays(o.TRIANGLES,0,6),o.bindFramebuffer(o.FRAMEBUFFER,null),o.bindTexture(o.TEXTURE_2D,null)},blitFrame:function(t,e,r,i,o,s,a){void 0===r&&(r=1),void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===s&&(s=!1),void 0===a&&(a=!1);var h=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",r),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,t.texture.webGLTexture),t.height>e.height)h.viewport(0,0,t.width,t.height),this.setTargetUVs(t,e);else{var u=e.height-t.height;h.viewport(0,u,t.width,t.height)}if(h.bindFramebuffer(h.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,e.texture.webGLTexture,0),i&&(o?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT)),s){var c=this.renderer.currentBlendMode;this.renderer.setBlendMode(n.ERASE)}a&&this.flipY(),h.bufferData(h.ARRAY_BUFFER,this.vertexData,h.STATIC_DRAW),h.drawArrays(h.TRIANGLES,0,6),s&&this.renderer.setBlendMode(c),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindTexture(h.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(t,e,r,i,n,o,s,a){void 0===s&&(s=!0),void 0===a&&(a=!0);var h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,t.framebuffer.webGLFramebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,t.texture.webGLTexture,0),s&&(a?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT)),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,e.texture.webGLTexture),h.copyTexSubImage2D(h.TEXTURE_2D,0,0,0,r,i,n,o),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindTexture(h.TEXTURE_2D,null)},copyToGame:function(t){var e=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t.texture.webGLTexture),e.bufferData(e.ARRAY_BUFFER,this.vertexData,e.STATIC_DRAW),e.drawArrays(e.TRIANGLES,0,6)},drawFrame:function(t,e,r,i){void 0===r&&(r=!0),void 0===i&&(i=this.colorMatrix);var n=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",i.getData()),this.set1f("uAlpha",i.alpha),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.texture.webGLTexture),e?(n.viewport(0,0,e.width,e.height),n.bindFramebuffer(n.FRAMEBUFFER,e.framebuffer.webGLFramebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e.texture.webGLTexture,0)):n.viewport(0,0,t.width,t.height),r?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.bufferData(n.ARRAY_BUFFER,this.vertexData,n.STATIC_DRAW),n.drawArrays(n.TRIANGLES,0,6),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindTexture(n.TEXTURE_2D,null)},blendFrames:function(t,e,r,i,n,o){void 0===i&&(i=1),void 0===n&&(n=!0),void 0===o&&(o=this.linearShader);var s=this.gl;this.setShader(o),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",i),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.texture.webGLTexture),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,e.texture.webGLTexture),r?(s.bindFramebuffer(s.FRAMEBUFFER,r.framebuffer.webGLFramebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,r.texture.webGLTexture,0),s.viewport(0,0,r.width,r.height)):s.viewport(0,0,t.width,t.height),n?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindTexture(s.TEXTURE_2D,null)},blendFramesAdditive:function(t,e,r,i,n){this.blendFrames(t,e,r,i,n,this.addShader)},clearFrame:function(t,e){void 0===e&&(e=!0);var r=this.gl;r.viewport(0,0,t.width,t.height),r.bindFramebuffer(r.FRAMEBUFFER,t.framebuffer.webGLFramebuffer),e?r.clearColor(0,0,0,0):r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT);var i=this.renderer.currentFramebuffer;r.bindFramebuffer(r.FRAMEBUFFER,i.webGLFramebuffer)},setUVs:function(t,e,r,i,n,o,s,a){var h=this.vertexViewF32;h[2]=t,h[3]=e,h[6]=r,h[7]=i,h[10]=n,h[11]=o,h[14]=t,h[15]=e,h[18]=n,h[19]=o,h[22]=s,h[23]=a},setTargetUVs:function(t,e){var r=e.height/t.height;r=r>.5?.5-(r-.5):.5-r+.5,this.setUVs(0,r,0,1+r,1,1+r,1,r)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});t.exports=p},36060:t=>{t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"}},84817:t=>{t.exports="pipelineafterflush"},36712:t=>{t.exports="pipelinebeforeflush"},40285:t=>{t.exports="pipelinebind"},65918:t=>{t.exports="pipelineboot"},92852:t=>{t.exports="pipelinedestroy"},56072:t=>{t.exports="pipelinerebind"},57566:t=>{t.exports="pipelineresize"},77085:(t,e,r)=>{t.exports={AFTER_FLUSH:r(84817),BEFORE_FLUSH:r(36712),BIND:r(40285),BOOT:r(65918),DESTROY:r(92852),REBIND:r(56072),RESIZE:r(57566)}},54812:(t,e,r)=>{var i=r(83419),n=r(99155),o=r(84057),s=new i({Extends:o,initialize:function(t){o.call(this,{game:t,fragShader:n}),this.amount=1},onPreRender:function(t,e){t=this.getController(t),this.set1f("amount",t.amount,e)}});t.exports=s},67329:(t,e,r)=>{var i=r(83419),n=r(24400),o=r(84057),s=new i({Extends:o,initialize:function(t){o.call(this,{game:t,fragShader:n}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(t){t=this.getController(t),this.set1f("strength",t.blurStrength),this.set3fv("color",t.glcolor)},onDraw:function(t){var e=this.getController(),r=this.fullFrame1,i=this.fullFrame2;this.copyFrame(t,i);for(var n=2/t.width*e.offsetX,o=2/t.height*e.offsetY,s=0;s<e.steps;s++)this.set2f("offset",n,0),this.copySprite(t,r),this.set2f("offset",0,o),this.copySprite(r,t);this.blendFrames(i,t,r,e.strength),this.copyToGame(r)}});t.exports=s},8861:(t,e,r)=>{var i=r(83419),n=r(41514),o=r(51078),s=r(94328),a=r(84057),h=new i({Extends:a,initialize:function(t){a.call(this,{game:t,shaders:[{name:"Gaussian5",fragShader:n},{name:"Gaussian9",fragShader:o},{name:"Gaussian13",fragShader:s}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(t){var e=this.getController(),r=this.gl,i=this.fullFrame1,n=r.getParameter(r.FRAMEBUFFER_BINDING);this.bind(this.shaders[e.quality]),r.activeTexture(r.TEXTURE0),r.viewport(0,0,t.width,t.height),this.set1i("uMainSampler",0),this.set2f("resolution",t.width,t.height),this.set1f("strength",e.strength),this.set3fv("color",e.glcolor);for(var o=0;o<e.steps;o++)this.set2f("offset",e.x,0),this.copySprite(t,i),this.set2f("offset",0,e.y),this.copySprite(i,t);r.bindFramebuffer(r.FRAMEBUFFER,n),r.bindTexture(r.TEXTURE_2D,null),this.copyToGame(t)}});t.exports=h},51051:(t,e,r)=>{var i=r(83419),n=r(90610),o=r(84057),s=new i({Extends:o,initialize:function(t){o.call(this,{game:t,fragShader:n}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(t,e,r,i){t=this.getController(t),this.set1f("radius",t.radius,e),this.set1f("amount",t.amount,e),this.set1f("contrast",t.contrast,e),this.set1f("strength",t.strength,e),this.set2f("blur",t.blurX,t.blurY,e),this.setBoolean("isTiltShift",t.isTiltShift,e),r&&i&&this.set2f("resolution",r,i,e)},onDraw:function(t){this.set2f("resolution",t.width,t.height),this.bindAndDraw(t)}});t.exports=s},89428:(t,e,r)=>{var i=r(83419),n=r(91899),o=r(84057),s=new i({Extends:o,initialize:function(t){o.call(this,{game:t,fragShader:n}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(t,e,r,i){t=this.getController(t),this.set1f("scale",t.scale,e),this.set1f("feather",t.feather,e),this.set1f("thickness",t.thickness,e),this.set3fv("color",t.glcolor,e),this.set4fv("backgroundColor",t.glcolor2,e),r&&i&&this.set2f("resolution",r,i,e)},onDraw:function(t){this.set2f("resolution",t.width,t.height),this.bindAndDraw(t)}});t.exports=s},88904:(t,e,r)=>{var i=r(83419),n=r(84057),o=new i({Extends:n,initialize:function(t){n.call(this,{game:t})},onDraw:function(t){var e=this.fullFrame1;this.controller?this.manager.drawFrame(t,e,!0,this.controller):this.drawFrame(t,e),this.copyToGame(e)}});t.exports=o},63563:(t,e,r)=>{var i=r(83419),n=r(47838),o=r(84057),s=new i({Extends:o,initialize:function(t){o.call(this,{game:t,fragShader:n}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(t){var e=this.game.textures.getFrame(t);e&&(this.glTexture=e.glTexture)},onDraw:function(t){var e=this.getController(),r=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",e.x,e.y),this.bindTexture(e.glTexture,1),this.copySprite(t,r),this.copyToGame(r)}});t.exports=s},94045:(t,e,r)=>{var i=r(83419),n=r(95540),o=r(98656),s=r(84057),a=r(70554),h=new i({Extends:s,initialize:function(t,e){var r=n(e,"quality",.1),i=n(e,"distance",10);s.call(this,{game:t,fragShader:a.setGlowQuality(o,t,r,i)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(t,e,r,i){t=this.getController(t),this.set1f("outerStrength",t.outerStrength,e),this.set1f("innerStrength",t.innerStrength,e),this.set4fv("glowColor",t.glcolor,e),this.setBoolean("knockout",t.knockout,e),r&&i&&this.set2f("resolution",r,i,e)},onDraw:function(t){this.set2f("resolution",t.width,t.height),this.bindAndDraw(t)}});t.exports=h},74088:(t,e,r)=>{var i=r(83419),n=r(70463),o=r(84057),s=new i({Extends:o,initialize:function(t){o.call(this,{game:t,fragShader:n}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(t,e){t=this.getController(t),this.set1f("alpha",t.alpha,e),this.set1i("size",t.size,e),this.set3fv("color1",t.glcolor1,e),this.set3fv("color2",t.glcolor2,e),this.set2f("positionFrom",t.fromX,t.fromY,e),this.set2f("positionTo",t.toX,t.toY,e)}});t.exports=s},99636:(t,e,r)=>{var i=r(83419),n=r(50831),o=r(84057),s=new i({Extends:o,initialize:function(t){o.call(this,{game:t,fragShader:n}),this.amount=1},onPreRender:function(t,e,r,i){t=this.getController(t),this.set1f("amount",t.amount,e),r&&i&&this.set2f("resolution",r,i,e)},onDraw:function(t){this.set2f("resolution",t.width,t.height),this.bindAndDraw(t)}});t.exports=s},34700:(t,e,r)=>{var i=r(83419),n=r(92595),o=r(84057),s=new i({Extends:o,initialize:function(t){o.call(this,{game:t,fragShader:n}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(t,e){var r=(t=this.getController(t)).samples;this.set1i("samples",r,e),this.set1f("intensity",t.intensity,e),this.set1f("decay",t.decay,e),this.set1f("power",t.power/r,e),this.set2f("lightPosition",t.x,t.y,e),this.set4fv("color",t.glcolor,e)}});t.exports=s},91157:(t,e,r)=>{var i=r(83419),n=r(72464),o=r(84057),s=new i({Extends:o,initialize:function(t){o.call(this,{game:t,fragShader:n}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(t,e,r,i){t=this.getController(t),this.setTime("time",e),this.set1f("speed",t.speed,e),this.set1f("lineWidth",t.lineWidth,e),this.set1f("gradient",t.gradient,e),this.setBoolean("reveal",t.reveal,e),r&&i&&this.set2f("resolution",r,i,e)},onDraw:function(t){this.set2f("resolution",t.width,t.height),this.bindAndDraw(t)}});t.exports=s},27797:(t,e,r)=>{var i=r(83419),n=r(39249),o=r(84057),s=new i({Extends:o,initialize:function(t){o.call(this,{game:t,fragShader:n}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(t,e){t=this.getController(t),this.set1f("radius",t.radius,e),this.set1f("strength",t.strength,e),this.set2f("position",t.x,t.y,e)}});t.exports=s},67603:(t,e,r)=>{var i=r(83419),n=r(2878),o=r(84057),s=new i({Extends:o,initialize:function(t){o.call(this,{game:t,fragShader:n}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(t,e){var r=(t=this.getController(t)).progress,i=t.wipeWidth,n=t.direction,o=t.axis;this.set4f("config",r,i,n,o,e),this.setBoolean("reveal",t.reveal,e)}});t.exports=s},58918:(t,e,r)=>{var i={Barrel:r(54812),Bloom:r(67329),Blur:r(8861),Bokeh:r(51051),Circle:r(89428),ColorMatrix:r(88904),Displacement:r(63563),Glow:r(94045),Gradient:r(74088),Pixelate:r(99636),Shadow:r(34700),Shine:r(91157),Vignette:r(27797),Wipe:r(67603)};t.exports=i},96615:(t,e,r)=>{var i=r(36060),n=r(79291),o={FX:r(58918),BitmapMaskPipeline:r(31302),Events:r(77085),FXPipeline:r(92651),LightPipeline:r(96569),MobilePipeline:r(56527),MultiPipeline:r(57516),PointLightPipeline:r(43439),PostFXPipeline:r(84057),PreFXPipeline:r(43558),RopePipeline:r(81041),SinglePipeline:r(12385),UtilityPipeline:r(7589)};o=n(!1,o,i),t.exports=o},35407:t=>{t.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join("\n")},78908:t=>{t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join("\n")},85191:t=>{t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join("\n")},96293:t=>{t.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join("\n")},36682:t=>{t.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join("\n")},99155:t=>{t.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join("\n")},24400:t=>{t.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join("\n")},94328:t=>{t.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join("\n")},41514:t=>{t.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join("\n")},51078:t=>{t.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join("\n")},90610:t=>{t.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join("\n")},91899:t=>{t.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join("\n")},47838:t=>{t.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join("\n")},98656:t=>{t.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join("\n")},70463:t=>{t.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join("\n")},50831:t=>{t.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join("\n")},92595:t=>{t.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join("\n")},72464:t=>{t.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","\tvec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join("\n")},39249:t=>{t.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    \tcol = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join("\n")},2878:t=>{t.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join("\n")},31063:t=>{t.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join("\n")},48247:t=>{t.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join("\n")},41214:t=>{t.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join("\n")},39653:t=>{t.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join("\n")},62143:t=>{t.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join("\n")},47940:t=>{t.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join("\n")},98840:t=>{t.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join("\n")},44667:t=>{t.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join("\n")},4127:t=>{t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join("\n")},89924:t=>{t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join("\n")},27681:t=>{t.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join("\n")},49627:t=>{t.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join("\n")},45561:t=>{t.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join("\n")},60722:t=>{t.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join("\n")},89350:(t,e,r)=>{t.exports={AddBlendFrag:r(35407),BitmapMaskFrag:r(78908),BitmapMaskVert:r(85191),ColorMatrixFrag:r(96293),CopyFrag:r(36682),FXBarrelFrag:r(99155),FXBloomFrag:r(24400),FXBlurHighFrag:r(94328),FXBlurLowFrag:r(41514),FXBlurMedFrag:r(51078),FXBokehFrag:r(90610),FXCircleFrag:r(91899),FXDisplacementFrag:r(47838),FXGlowFrag:r(98656),FXGradientFrag:r(70463),FXPixelateFrag:r(50831),FXShadowFrag:r(92595),FXShineFrag:r(72464),FXVignetteFrag:r(39249),FXWipeFrag:r(2878),LightFrag:r(31063),LinearBlendFrag:r(48247),MeshFrag:r(41214),MeshVert:r(39653),MobileFrag:r(62143),MobileVert:r(47940),MultiFrag:r(98840),MultiVert:r(44667),PointLightFrag:r(4127),PointLightVert:r(89924),PostFXFrag:r(27681),QuadVert:r(49627),SingleFrag:r(45561),SingleVert:r(60722)}},93567:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e,r){this.webGLAttribLocation=-1,this.gl=t,this.program=e,this.name=r,this.createResource()},createResource:function(){if(null!==this.program.webGLProgram){var t=this.gl;t.isContextLost()||(this.webGLAttribLocation=t.getAttribLocation(this.program.webGLProgram,this.name))}else this.webGLAttribLocation=-1},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});t.exports=i},26128:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e,r,i){this.webGLBuffer=null,this.gl=t,this.initialDataOrSize=e,this.bufferType=r,this.bufferUsage=i,this.createResource()},createResource:function(){if(null!==this.initialDataOrSize){var t=this.gl;if(!t.isContextLost()){var e=this.bufferType,r=t.createBuffer();this.webGLBuffer=r,t.bindBuffer(e,this.webGLBuffer),t.bufferData(e,this.initialDataOrSize,this.bufferUsage),t.bindBuffer(e,null)}}},destroy:function(){var t=this.gl;t.isContextLost()||t.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});t.exports=i},84387:(t,e,r)=>{var i=r(83419),n={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},o=new i({initialize:function(t,e,r,i,n){this.webGLFramebuffer=null,this.gl=t,this.width=e,this.height=r,this.renderTexture=i,this.addDepthStencilBuffer=!!n,this.createResource()},createResource:function(){var t=this.gl;if(!t.isContextLost()){var e,r=this.renderTexture,i=t.createFramebuffer();if(this.webGLFramebuffer=i,t.bindFramebuffer(t.FRAMEBUFFER,i),r.isRenderTexture=!0,r.isAlphaPremultiplied=!1,t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r.webGLTexture,0),(e=t.checkFramebufferStatus(t.FRAMEBUFFER))!==t.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(n[e]||e));if(this.addDepthStencilBuffer){var o=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,o),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,o)}t.bindFramebuffer(t.FRAMEBUFFER,null)}},destroy:function(){if(null!==this.webGLFramebuffer){var t=this.gl;if(!t.isContextLost()){t.bindFramebuffer(t.FRAMEBUFFER,this.webGLFramebuffer);var e=t.getFramebufferAttachmentParameter(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);null!==e&&(t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),t.deleteTexture(e));var r=t.getFramebufferAttachmentParameter(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);null!==r&&t.deleteRenderbuffer(r),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});t.exports=o},1482:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e,r){this.webGLProgram=null,this.gl=t,this.vertexSource=e,this.fragmentSource=r,this.createResource()},createResource:function(){var t=this.gl;if(!t.isContextLost()){var e=t.createProgram(),r=t.createShader(t.VERTEX_SHADER),i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,this.vertexSource),t.shaderSource(i,this.fragmentSource),t.compileShader(r),t.compileShader(i);var n="Shader failed:\n";if(!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Vertex "+n+t.getShaderInfoLog(r));if(!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error("Fragment "+n+t.getShaderInfoLog(i));if(t.attachShader(e,r),t.attachShader(e,i),t.linkProgram(e),!t.getProgramParameter(e,t.LINK_STATUS))throw new Error("Link "+n+t.getProgramInfoLog(e));t.useProgram(e),this.webGLProgram=e}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});t.exports=i},82751:(t,e,r)=>{var i=r(83419),n=r(50030),o=new i({initialize:function(t,e,r,i,n,o,s,a,h,u,c,l,f){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=t,this.mipLevel=e,this.minFilter=r,this.magFilter=i,this.wrapT=n,this.wrapS=o,this.format=s,this.pixels=a,this.width=h,this.height=u,this.pma=null==c||c,this.forceSize=!!l,this.flipY=!!f,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var t=this.gl;if(!t.isContextLost())if(this.pixels instanceof o)this.webGLTexture=this.pixels.webGLTexture;else{var e=t.createTexture();e.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=e,this._processTexture()}},update:function(t,e,r,i,n,o,s,a,h){0!==e&&0!==r&&(this.pixels=t,this.width=e,this.height=r,this.flipY=i,this.wrapS=n,this.wrapT=o,this.minFilter=s,this.magFilter=a,this.format=h,this.gl.isContextLost()||this._processTexture())},_processTexture:function(){var t=this.gl;t.activeTexture(t.TEXTURE0);var e=t.getParameter(t.TEXTURE_BINDING_2D);t.bindTexture(t.TEXTURE_2D,this.webGLTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.minFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.magFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.wrapS),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.wrapT),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,this.flipY);var r=this.pixels,i=this.mipLevel,o=this.width,s=this.height,a=this.format,h=!1;if(null==r)t.texImage2D(t.TEXTURE_2D,i,a,o,s,0,a,t.UNSIGNED_BYTE,null),h=n(o,s);else if(r.compressed){o=r.width,s=r.height,h=r.generateMipmap;for(var u=0;u<r.mipmaps.length;u++)t.compressedTexImage2D(t.TEXTURE_2D,u,r.internalFormat,r.mipmaps[u].width,r.mipmaps[u].height,0,r.mipmaps[u].data)}else r instanceof Uint8Array?(t.texImage2D(t.TEXTURE_2D,i,a,o,s,0,a,t.UNSIGNED_BYTE,r),h=n(o,s)):(this.forceSize||(o=r.width,s=r.height),t.texImage2D(t.TEXTURE_2D,i,a,a,t.UNSIGNED_BYTE,r),h=n(o,s));h&&t.generateMipmap(t.TEXTURE_2D),e?t.bindTexture(t.TEXTURE_2D,e):t.bindTexture(t.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(t){this.__SPECTOR_Metadata=t,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=t)}},destroy:function(){null!==this.webGLTexture&&(this.gl.isContextLost()||this.pixels instanceof o||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});t.exports=o},57183:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e,r){this.webGLUniformLocation=null,this.gl=t,this.program=e,this.name=r,this.createResource()},createResource:function(){if(null!==this.program.webGLProgram){var t=this.gl;t.isContextLost()||(this.webGLUniformLocation=t.getUniformLocation(this.program.webGLProgram,this.name))}else this.webGLUniformLocation=null},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});t.exports=i},9503:(t,e,r)=>{var i={WebGLAttribLocationWrapper:r(93567),WebGLBufferWrapper:r(26128),WebGLProgramWrapper:r(1482),WebGLTextureWrapper:r(82751),WebGLFramebufferWrapper:r(84387),WebGLUniformLocationWrapper:r(57183)};t.exports=i},76531:(t,e,r)=>{var i=r(13560),n=r(83419),o=r(50792),s=r(97480),a=r(8443),h=r(57811),u=r(74403),c=r(45818),l=r(29747),f=r(87841),p=r(86555),d=r(56583),v=r(26099),y=r(38058),g=new n({Extends:o,initialize:function(t){o.call(this),this.game=t,this.canvas,this.canvasBounds=new f,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=i.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new v(1,1),this.autoRound=!1,this.autoCenter=i.CENTER.NO_CENTER,this.orientation=i.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:l,windowResize:l,fullScreenChange:l,fullScreenError:l}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(a.BOOT,this.boot,this)},boot:function(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==i.SCALE_MODE.RESIZE&&this.scaleMode!==i.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===i.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(a.PRE_STEP,this.step,this),t.events.once(a.READY,this.refresh,this),t.events.once(a.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(t){this.getParent(t),this.getParentBounds();var e=t.width,r=t.height,n=t.scaleMode,o=t.zoom,s=t.autoRound;if("string"==typeof e)if("%"!==e.substr(-1))e=parseInt(e,10);else{var a=this.parentSize.width;0===a&&(a=window.innerWidth);var h=parseInt(e,10)/100;e=Math.floor(a*h)}if("string"==typeof r)if("%"!==r.substr(-1))r=parseInt(r,10);else{var u=this.parentSize.height;0===u&&(u=window.innerHeight);var l=parseInt(r,10)/100;r=Math.floor(u*l)}this.scaleMode=n,this.autoRound=s,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,s&&(e=Math.floor(e),r=Math.floor(r)),this.gameSize.setSize(e,r),o===i.ZOOM.MAX_ZOOM&&(o=this.getMaxZoom()),this.zoom=o,1!==o&&(this._resetZoom=!0),this.baseSize.setSize(e,r),s&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),t.minWidth>0&&this.displaySize.setMin(t.minWidth*o,t.minHeight*o),t.maxWidth>0&&this.displaySize.setMax(t.maxWidth*o,t.maxHeight*o),this.displaySize.setSize(e,r),(t.snapWidth>0||t.snapHeight>0)&&this.displaySize.setSnap(t.snapWidth,t.snapHeight),this.orientation=c(e,r)},getParent:function(t){var e=t.parent;if(null!==e){if(this.parent=u(e),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==i.SCALE_MODE.NONE){var r=this.parent.getBoundingClientRect();(this.parentIsWindow||0===r.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",r=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==r.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}t.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=u(t.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var t=this.parentSize,e=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(e.height=h(!0));var r=e.width,i=e.height;if(t.width!==r||t.height!==i)return t.setSize(r,i),!0;if(this.canvas){var n=this.canvasBounds,o=this.canvas.getBoundingClientRect();if(o.x!==n.x||o.y!==n.y)return!0}return!1},lockOrientation:function(t){var e=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!e&&e.call(screen,t)},setParentSize:function(t,e){return this.parentSize.setSize(t,e),this.refresh()},setGameSize:function(t,e){var r=this.autoRound;r&&(t=Math.floor(t),e=Math.floor(e));var i=this.width,n=this.height;return this.gameSize.resize(t,e),this.baseSize.resize(t,e),r&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(t/e),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(i,n)},resize:function(t,e){var r=this.zoom,i=this.autoRound;i&&(t=Math.floor(t),e=Math.floor(e));var n=this.width,o=this.height;this.gameSize.resize(t,e),this.baseSize.resize(t,e),i&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t*r,e*r),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var s=this.canvas.style,a=t*r,h=e*r;return i&&(a=Math.floor(a),h=Math.floor(h)),a===t&&h===e||(s.width=a+"px",s.height=h+"px"),this.refresh(n,o)},setZoom:function(t){return this.zoom=t,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displaySize.setSnap(t,e),this.refresh()},refresh:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var r=this.game.domContainer;if(r){this.baseSize.setCSS(r);var i=this.canvas.style,n=r.style;n.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",n.marginLeft=i.marginLeft,n.marginTop=i.marginTop}return this.emit(s.RESIZE,this.gameSize,this.baseSize,this.displaySize,t,e),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var t=c(this.width,this.height);t!==this.orientation&&(this.orientation=t,this.emit(s.ORIENTATION_CHANGE,t))}},updateScale:function(){var t,e,r=this.canvas.style,n=this.gameSize.width,o=this.gameSize.height,s=this.zoom,a=this.autoRound;if(this.scaleMode===i.SCALE_MODE.NONE)this.displaySize.setSize(n*s,o*s),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),this._resetZoom&&(r.width=t+"px",r.height=e+"px",this._resetZoom=!1);else if(this.scaleMode===i.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),this.canvas.width=t,this.canvas.height=e;else if(this.scaleMode===i.SCALE_MODE.EXPAND){this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),r.width=t+"px",r.height=e+"px";var h=this.parentSize.width/this.gameSize.width,u=this.parentSize.height/this.gameSize.height;h<u?this.baseSize.setSize(this.gameSize.width,this.parentSize.height/h):this.baseSize.setSize(this.displaySize.width/u,this.gameSize.height),t=this.baseSize.width,e=this.baseSize.height,a&&(t=Math.floor(t),e=Math.floor(e)),this.canvas.width=t,this.canvas.height=e}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),r.width=t+"px",r.height=e+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var t=d(this.parentSize.width,this.gameSize.width,0,!0),e=d(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(t,e),1)},updateCenter:function(){var t=this.autoCenter;if(t!==i.CENTER.NO_CENTER){var e=this.canvas,r=e.style,n=e.getBoundingClientRect(),o=n.width,s=n.height,a=Math.floor((this.parentSize.width-o)/2),h=Math.floor((this.parentSize.height-s)/2);t===i.CENTER.CENTER_HORIZONTALLY?h=0:t===i.CENTER.CENTER_VERTICALLY&&(a=0),r.marginLeft=a+"px",r.marginTop=h+"px"}},updateBounds:function(){var t=this.canvasBounds,e=this.canvas.getBoundingClientRect();t.x=e.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),t.y=e.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),t.width=e.width,t.height=e.height},transformX:function(t){return(t-this.canvasBounds.left)*this.displayScale.x},transformY:function(t){return(t-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(t){void 0===t&&(t={navigationUI:"hide"});var e=this.fullscreen;if(e.available){if(!e.active){var r=this.getFullscreenTarget();e.keyboard?r[e.request](Element.ALLOW_KEYBOARD_INPUT):r[e.request](t)}}else this.emit(s.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(s.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(t){this.removeFullscreenTarget(),this.emit(s.FULLSCREEN_FAILED,t)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var t=document.createElement("div");t.style.margin="0",t.style.padding="0",t.style.width="100%",t.style.height="100%",this.fullscreenTarget=t,this._createdFullscreenTarget=!0}return this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var t=this.fullscreenTarget;if(t&&t.parentNode){var e=t.parentNode;e.insertBefore(this.canvas,t),e.removeChild(t)}}},stopFullscreen:function(){var t=this.fullscreen;if(!t.available)return this.emit(s.FULLSCREEN_UNSUPPORTED),!1;t.active&&document[t.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(s.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(t){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(t)},startListeners:function(){var t=this,e=this.domlisteners;e.orientationChange=function(){t.updateBounds(),t._checkOrientation=!0,t.dirty=!0,t.refresh()},e.windowResize=function(){t.updateBounds(),t.dirty=!0},window.addEventListener("orientationchange",e.orientationChange,!1),window.addEventListener("resize",e.windowResize,!1),this.fullscreen.available&&(e.fullScreenChange=function(e){return t.onFullScreenChange(e)},e.fullScreenError=function(e){return t.onFullScreenError(e)},["webkit","moz",""].forEach((function(t){document.addEventListener(t+"fullscreenchange",e.fullScreenChange,!1),document.addEventListener(t+"fullscreenerror",e.fullScreenError,!1)})),document.addEventListener("MSFullscreenChange",e.fullScreenChange,!1),document.addEventListener("MSFullscreenError",e.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(t,e){t instanceof y||(e=t,t=void 0),void 0===e&&(e=new f);var r,i,n=this.baseSize,o=this.parentSize,s=this.canvasBounds,a=this.displayScale,h=s.x>=0?0:-s.x*a.x,u=s.y>=0?0:-s.y*a.y;return r=o.width>=s.width?n.width:n.width-(s.width-o.width)*a.x,i=o.height>=s.height?n.height:n.height-(s.height-o.height)*a.y,e.setTo(h,u,r,i),t&&(e.width/=t.zoomX,e.height/=t.zoomY,e.centerX=t.centerX+t.scrollX,e.centerY=t.centerY+t.scrollY),e},step:function(t,e){this.parent&&(this._lastCheck+=e,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var t=this.domlisteners;window.removeEventListener("orientationchange",t.orientationChange,!1),window.removeEventListener("resize",t.windowResize,!1),["webkit","moz",""].forEach((function(e){document.removeEventListener(e+"fullscreenchange",t.fullScreenChange,!1),document.removeEventListener(e+"fullscreenerror",t.fullScreenError,!1)})),document.removeEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",t.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===i.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===i.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});t.exports=g},64743:t=>{t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},39218:t=>{t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},81050:t=>{t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}},80805:t=>{t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},13560:(t,e,r)=>{var i={CENTER:r(64743),ORIENTATION:r(39218),SCALE_MODE:r(81050),ZOOM:r(80805)};t.exports=i},56139:t=>{t.exports="enterfullscreen"},2336:t=>{t.exports="fullscreenfailed"},47412:t=>{t.exports="fullscreenunsupported"},51452:t=>{t.exports="leavefullscreen"},20666:t=>{t.exports="orientationchange"},47945:t=>{t.exports="resize"},97480:(t,e,r)=>{t.exports={ENTER_FULLSCREEN:r(56139),FULLSCREEN_FAILED:r(2336),FULLSCREEN_UNSUPPORTED:r(47412),LEAVE_FULLSCREEN:r(51452),ORIENTATION_CHANGE:r(20666),RESIZE:r(47945)}},93364:(t,e,r)=>{var i=r(79291),n=r(13560),o={Center:r(64743),Events:r(97480),Orientation:r(39218),ScaleManager:r(76531),ScaleModes:r(81050),Zoom:r(80805)};o=i(!1,o,n.CENTER),o=i(!1,o,n.ORIENTATION),o=i(!1,o,n.SCALE_MODE),o=i(!1,o,n.ZOOM),t.exports=o},27397:(t,e,r)=>{var i=r(95540),n=r(35355);t.exports=function(t){var e=t.game.config.defaultPhysicsSystem,r=i(t.settings,"physics",!1);if(e||r){var o=[];if(e&&o.push(n(e+"Physics")),r)for(var s in r)s=n(s.concat("Physics")),-1===o.indexOf(s)&&o.push(s);return o}}},52106:(t,e,r)=>{var i=r(95540);t.exports=function(t){var e=t.plugins.getDefaultScenePlugins(),r=i(t.settings,"plugins",!1);return Array.isArray(r)?r:e||[]}},87033:t=>{t.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},97482:(t,e,r)=>{var i=r(83419),n=r(2368),o=new i({initialize:function(t){this.sys=new n(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});t.exports=o},60903:(t,e,r)=>{var i=r(83419),n=r(89993),o=r(44594),s=r(8443),a=r(35154),h=r(54899),u=r(29747),c=r(97482),l=r(2368),f=new i({initialize:function(t,e){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,e){Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++)this._pending.push({key:"default",scene:e[r],autoStart:0===r,data:{}})}t.events.once(s.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var t,e,r,i;for(this.systemScene=this.createSceneFromInstance("__SYSTEM",new c),this.game.events.emit(s.SYSTEM_READY,this.systemScene,this),t=0;t<this._pending.length;t++){var n;r=(e=this._pending[t]).key,(i=e.scene)instanceof c?n=this.createSceneFromInstance(r,i):"object"==typeof i?n=this.createSceneFromObject(r,i):"function"==typeof i&&(n=this.createSceneFromFunction(r,i)),r=n.sys.settings.key,this.keys[r]=n,this.scenes.push(n),this._data[r]&&(n.sys.settings.data=this._data[r].data,this._data[r].autoStart&&(e.autoStart=!0)),(e.autoStart||n.sys.settings.active)&&this._start.push(r)}for(this._pending.length=0,this._data={},this.isBooted=!0,t=0;t<this._start.length;t++)e=this._start[t],this.start(e);this._start.length=0}},processQueue:function(){var t=this._pending.length,e=this._queue.length;if(0!==t||0!==e){var r,i;if(t){for(r=0;r<t;r++)i=this._pending[r],this.add(i.key,i.scene,i.autoStart,i.data);for(r=0;r<this._start.length;r++)i=this._start[r],this.start(i);this._start.length=0,this._pending.length=0}for(r=0;r<this._queue.length;r++)this[(i=this._queue[r]).op](i.keyA,i.keyB);this._queue.length=0}},add:function(t,e,r,i){return void 0===r&&(r=!1),void 0===i&&(i={}),this.isProcessing||!this.isBooted?(this._pending.push({key:t,scene:e,autoStart:r,data:i}),this.isBooted||(this._data[t]={data:i}),null):(t=this.getKey(t,e),e instanceof c?n=this.createSceneFromInstance(t,e):"object"==typeof e?(e.key=t,n=this.createSceneFromObject(t,e)):"function"==typeof e&&(n=this.createSceneFromFunction(t,e)),n.sys.settings.data=i,t=n.sys.settings.key,this.keys[t]=n,this.scenes.push(n),(r||n.sys.settings.active)&&(this._pending.length?this._start.push(t):this.start(t)),n);var n},remove:function(t){if(this.isProcessing)this._queue.push({op:"remove",keyA:t,keyB:null});else{var e=this.getScene(t);if(!e||e.sys.isTransitioning())return this;var r=this.scenes.indexOf(e),i=e.sys.settings.key;r>-1&&(delete this.keys[i],this.scenes.splice(r,1),this._start.indexOf(i)>-1&&(r=this._start.indexOf(i),this._start.splice(r,1)),e.sys.destroy())}return this},bootScene:function(t){var e,r=t.sys,i=r.settings;r.sceneUpdate=u,t.init&&(t.init.call(t,i.data),i.status=n.INIT,i.isTransition&&r.events.emit(o.TRANSITION_INIT,i.transitionFrom,i.transitionDuration)),r.load&&(e=r.load).reset(),e&&t.preload?(t.preload.call(t),i.status=n.LOADING,e.once(h.COMPLETE,this.loadComplete,this),e.start()):this.create(t)},loadComplete:function(t){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(t.scene)},payloadComplete:function(t){this.bootScene(t.scene)},update:function(t,e){this.processQueue(),this.isProcessing=!0;for(var r=this.scenes.length-1;r>=0;r--){var i=this.scenes[r].sys;i.settings.status>n.START&&i.settings.status<=n.RUNNING&&i.step(t,e),i.scenePlugin&&i.scenePlugin._target&&i.scenePlugin.step(t,e)}},render:function(t){for(var e=0;e<this.scenes.length;e++){var r=this.scenes[e].sys;r.settings.visible&&r.settings.status>=n.LOADING&&r.settings.status<n.SLEEPING&&r.render(t)}this.isProcessing=!1},create:function(t){var e=t.sys,r=e.settings;t.create&&(r.status=n.CREATING,t.create.call(t,r.data),r.status===n.DESTROYED)||(r.isTransition&&e.events.emit(o.TRANSITION_START,r.transitionFrom,r.transitionDuration),t.update&&(e.sceneUpdate=t.update),r.status=n.RUNNING,e.events.emit(o.CREATE,t))},createSceneFromFunction:function(t,e){var r=new e;if(r instanceof c){var i=r.sys.settings.key;if(""!==i&&(t=i),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return this.createSceneFromInstance(t,r)}return r.sys=new l(r),r.sys.settings.key=t,r.sys.init(this.game),r},createSceneFromInstance:function(t,e){return""===e.sys.settings.key&&(e.sys.settings.key=t),e.sys.init(this.game),e},createSceneFromObject:function(t,e){var r=new c(e),i=r.sys.settings.key;""!==i?t=i:r.sys.settings.key=t,r.sys.init(this.game);for(var n=["init","preload","create","update","render"],o=0;o<n.length;o++){var s=a(e,n[o],null);s&&(r[n[o]]=s)}if(e.hasOwnProperty("extend"))for(var h in e.extend)if(e.extend.hasOwnProperty(h)){var u=e.extend[h];"data"===h&&r.hasOwnProperty("data")&&"object"==typeof u?r.data.merge(u):"sys"!==h&&(r[h]=u)}return r},getKey:function(t,e){if(t||(t="default"),"function"==typeof e)return t;if(e instanceof c?t=e.sys.settings.key:"object"==typeof e&&e.hasOwnProperty("key")&&(t=e.key),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return t},getScenes:function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);for(var r=[],i=this.scenes,n=0;n<i.length;n++){var o=i[n];o&&(!t||t&&o.sys.isActive())&&r.push(o)}return e?r.reverse():r},getScene:function(t){if("string"==typeof t){if(this.keys[t])return this.keys[t]}else for(var e=0;e<this.scenes.length;e++)if(t===this.scenes[e])return t;return null},isActive:function(t){var e=this.getScene(t);return e?e.sys.isActive():null},isPaused:function(t){var e=this.getScene(t);return e?e.sys.isPaused():null},isVisible:function(t){var e=this.getScene(t);return e?e.sys.isVisible():null},isSleeping:function(t){var e=this.getScene(t);return e?e.sys.isSleeping():null},pause:function(t,e){var r=this.getScene(t);return r&&r.sys.pause(e),this},resume:function(t,e){var r=this.getScene(t);return r&&r.sys.resume(e),this},sleep:function(t,e){var r=this.getScene(t);return r&&!r.sys.isTransitioning()&&r.sys.sleep(e),this},wake:function(t,e){var r=this.getScene(t);return r&&r.sys.wake(e),this},run:function(t,e){var r=this.getScene(t);if(!r){for(var i=0;i<this._pending.length;i++)if(this._pending[i].key===t){this.queueOp("start",t,e);break}return this}r.sys.isSleeping()?r.sys.wake(e):r.sys.isPaused()?r.sys.resume(e):this.start(t,e)},start:function(t,e){if(!this.isBooted)return this._data[t]={autoStart:!0,data:e},this;var r=this.getScene(t);if(!r)return console.warn("Scene not found for key: "+t),this;var i,o=r.sys,s=o.settings.status;if(s>=n.START&&s<=n.CREATING)return this;if(s>=n.RUNNING&&s<=n.SLEEPING)o.shutdown(),o.sceneUpdate=u,o.start(e);else if(o.sceneUpdate=u,o.start(e),o.load&&(i=o.load),i&&o.settings.hasOwnProperty("pack")&&(i.reset(),i.addPack({payload:o.settings.pack})))return o.settings.status=n.LOADING,i.once(h.COMPLETE,this.payloadComplete,this),i.start(),this;return this.bootScene(r),this},stop:function(t,e){var r=this.getScene(t);if(r&&!r.sys.isTransitioning()&&r.sys.settings.status!==n.SHUTDOWN){var i=r.sys.load;i&&(i.off(h.COMPLETE,this.loadComplete,this),i.off(h.COMPLETE,this.payloadComplete,this)),r.sys.shutdown(e)}return this},switch:function(t,e){var r=this.getScene(t),i=this.getScene(e);return r&&i&&r!==i&&(this.sleep(t),this.isSleeping(e)?this.wake(e):this.start(e)),this},getAt:function(t){return this.scenes[t]},getIndex:function(t){var e=this.getScene(t);return this.scenes.indexOf(e)},bringToTop:function(t){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:t,keyB:null});else{var e=this.getIndex(t);if(-1!==e&&e<this.scenes.length){var r=this.getScene(t);this.scenes.splice(e,1),this.scenes.push(r)}}return this},sendToBack:function(t){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:t,keyB:null});else{var e=this.getIndex(t);if(-1!==e&&e>0){var r=this.getScene(t);this.scenes.splice(e,1),this.scenes.unshift(r)}}return this},moveDown:function(t){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:t,keyB:null});else{var e=this.getIndex(t);if(e>0){var r=e-1,i=this.getScene(t),n=this.getAt(r);this.scenes[e]=n,this.scenes[r]=i}}return this},moveUp:function(t){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:t,keyB:null});else{var e=this.getIndex(t);if(e<this.scenes.length-1){var r=e+1,i=this.getScene(t),n=this.getAt(r);this.scenes[e]=n,this.scenes[r]=i}}return this},moveAbove:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:t,keyB:e});else{var r=this.getIndex(t),i=this.getIndex(e);if(-1!==r&&-1!==i&&i<r){var n=this.getAt(i);this.scenes.splice(i,1),this.scenes.splice(r+(i>r),0,n)}}return this},moveBelow:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:t,keyB:e});else{var r=this.getIndex(t),i=this.getIndex(e);if(-1!==r&&-1!==i&&i>r){var n=this.getAt(i);this.scenes.splice(i,1),0===r?this.scenes.unshift(n):this.scenes.splice(r-(i<r),0,n)}}return this},queueOp:function(t,e,r){return this._queue.push({op:t,keyA:e,keyB:r}),this},swapPosition:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:t,keyB:e});else{var r=this.getIndex(t),i=this.getIndex(e);if(r!==i&&-1!==r&&-1!==i){var n=this.getAt(r);this.scenes[r]=this.scenes[i],this.scenes[i]=n}}return this},dump:function(){for(var t=[],e=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],r=0;r<this.scenes.length;r++){var i=this.scenes[r].sys,o=!i.settings.visible||i.settings.status!==n.RUNNING&&i.settings.status!==n.PAUSED?"[-] ":"[*] ";o+=i.settings.key+" ("+e[i.settings.status]+")",t.push(o)}console.log(t.join("\n"))},destroy:function(){for(var t=0;t<this.scenes.length;t++)this.scenes[t].sys.destroy();this.systemScene.sys.destroy(),this.update=u,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});t.exports=f},52209:(t,e,r)=>{var i=r(45319),n=r(83419),o=r(44594),s=r(95540),a=r(37277),h=new n({initialize:function(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.pluginStart,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(o.SHUTDOWN,this.shutdown,this)},start:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,e),this},restart:function(t){var e=this.key;return this.manager.queueOp("stop",e),this.manager.queueOp("start",e,t),this},transition:function(t){void 0===t&&(t={});var e=s(t,"target",!1),r=this.manager.getScene(e);if(!e||!this.checkValidTransition(r))return!1;var i=s(t,"duration",1e3);this._elapsed=0,this._target=r,this._duration=i,this._willSleep=s(t,"sleep",!1),this._willRemove=s(t,"remove",!1);var n=s(t,"onUpdate",null);n&&(this._onUpdate=n,this._onUpdateScope=s(t,"onUpdateScope",this.scene));var a=s(t,"allowInput",!1);this.settings.transitionAllowInput=a;var h=r.sys.settings;h.isTransition=!0,h.transitionFrom=this.scene,h.transitionDuration=i,h.transitionAllowInput=a,s(t,"moveAbove",!1)?this.manager.moveAbove(this.key,e):s(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,e),r.sys.isSleeping()?r.sys.wake(s(t,"data")):this.manager.start(e,s(t,"data"));var u=s(t,"onStart",null),c=s(t,"onStartScope",this.scene);return u&&u.call(c,this.scene,r,i),this.systems.events.emit(o.TRANSITION_OUT,r,i),!0},checkValidTransition:function(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function(t,e){this._elapsed+=e,this.transitionProgress=i(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var t=this._target.sys,e=this._target.sys.settings;t.events.emit(o.TRANSITION_COMPLETE,this.scene),e.isTransition=!1,e.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(t,e,r,i){return this.manager.add(t,e,r,i)},launch:function(t,e){return t&&t!==this.key&&this.manager.queueOp("start",t,e),this},run:function(t,e){return t&&t!==this.key&&this.manager.queueOp("run",t,e),this},pause:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,e),this},resume:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,e),this},sleep:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,e),this},wake:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,e),this},switch:function(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t,e),this},setActive:function(t,e,r){void 0===e&&(e=this.key);var i=this.manager.getScene(e);return i&&i.sys.setActive(t,r),this},setVisible:function(t,e){void 0===e&&(e=this.key);var r=this.manager.getScene(e);return r&&r.sys.setVisible(t),this},isSleeping:function(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.swapPosition(t,e),this},moveAbove:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveAbove(t,e),this},moveBelow:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveBelow(t,e),this},remove:function(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function(t){return this.manager.getScene(t)},getStatus:function(t){var e=this.manager.getScene(t);if(e)return e.sys.getStatus()},getIndex:function(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function(){var t=this.systems.events;t.off(o.SHUTDOWN,this.shutdown,this),t.off(o.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});a.register("ScenePlugin",h,"scenePlugin"),t.exports=h},55681:(t,e,r)=>{var i=r(89993),n=r(35154),o=r(46975),s=r(87033),a={create:function(t){return"string"==typeof t?t={key:t}:void 0===t&&(t={}),{status:i.PENDING,key:n(t,"key",""),active:n(t,"active",!1),visible:n(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:n(t,"pack",!1),cameras:n(t,"cameras",null),map:n(t,"map",o(s,n(t,"mapAdd",{}))),physics:n(t,"physics",{}),loader:n(t,"loader",{}),plugins:n(t,"plugins",!1),input:n(t,"input",{})}}};t.exports=a},2368:(t,e,r)=>{var i=r(83419),n=r(89993),o=r(42363),s=r(44594),a=r(27397),h=r(52106),u=r(29747),c=r(55681),l=new i({initialize:function(t,e){this.scene=t,this.game,this.renderer,this.config=e,this.settings=c.create(e),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=u},init:function(t){this.settings.status=n.INIT,this.sceneUpdate=u,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;var e=t.plugins;this.plugins=e,e.addToScene(this,o.Global,[o.CoreScene,h(this),a(this)]),this.events.emit(s.BOOT,this),this.settings.isBooted=!0},step:function(t,e){var r=this.events;r.emit(s.PRE_UPDATE,t,e),r.emit(s.UPDATE,t,e),this.sceneUpdate.call(this.scene,t,e),r.emit(s.POST_UPDATE,t,e)},render:function(t){var e=this.displayList;e.depthSort(),this.events.emit(s.PRE_RENDER,t),this.cameras.render(t,e),this.events.emit(s.RENDER,t)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(t){var e=this.settings,r=this.getStatus();return r!==n.CREATING&&r!==n.RUNNING?console.warn("Cannot pause non-running Scene",e.key):this.settings.active&&(e.status=n.PAUSED,e.active=!1,this.events.emit(s.PAUSE,this,t)),this},resume:function(t){var e=this.events,r=this.settings;return this.settings.active||(r.status=n.RUNNING,r.active=!0,e.emit(s.RESUME,this,t)),this},sleep:function(t){var e=this.settings,r=this.getStatus();return r!==n.CREATING&&r!==n.RUNNING?console.warn("Cannot sleep non-running Scene",e.key):(e.status=n.SLEEPING,e.active=!1,e.visible=!1,this.events.emit(s.SLEEP,this,t)),this},wake:function(t){var e=this.events,r=this.settings;return r.status=n.RUNNING,r.active=!0,r.visible=!0,e.emit(s.WAKE,this,t),r.isTransition&&e.emit(s.TRANSITION_WAKE,r.transitionFrom,r.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var t=this.settings.status;return t>n.PENDING&&t<=n.RUNNING},isSleeping:function(){return this.settings.status===n.SLEEPING},isActive:function(){return this.settings.status===n.RUNNING},isPaused:function(){return this.settings.status===n.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(t){return this.settings.visible=t,this},setActive:function(t,e){return t?this.resume(e):this.pause(e)},start:function(t){var e=this.events,r=this.settings;t&&(r.data=t),r.status=n.START,r.active=!0,r.visible=!0,e.emit(s.START,this),e.emit(s.READY,this,t)},shutdown:function(t){var e=this.events,r=this.settings;e.off(s.TRANSITION_INIT),e.off(s.TRANSITION_START),e.off(s.TRANSITION_COMPLETE),e.off(s.TRANSITION_OUT),r.status=n.SHUTDOWN,r.active=!1,r.visible=!1,e.emit(s.SHUTDOWN,this,t)},destroy:function(){var t=this.events,e=this.settings;e.status=n.DESTROYED,e.active=!1,e.visible=!1,t.emit(s.DESTROY,this),t.removeAllListeners();for(var r=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],i=0;i<r.length;i++)this[r[i]]=null}});t.exports=l},89993:t=>{t.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},69830:t=>{t.exports="addedtoscene"},7919:t=>{t.exports="boot"},46763:t=>{t.exports="create"},11763:t=>{t.exports="destroy"},71555:t=>{t.exports="pause"},36735:t=>{t.exports="postupdate"},3809:t=>{t.exports="prerender"},90716:t=>{t.exports="preupdate"},58262:t=>{t.exports="ready"},91633:t=>{t.exports="removedfromscene"},10319:t=>{t.exports="render"},87132:t=>{t.exports="resume"},81961:t=>{t.exports="shutdown"},90194:t=>{t.exports="sleep"},6265:t=>{t.exports="start"},33178:t=>{t.exports="transitioncomplete"},43063:t=>{t.exports="transitioninit"},11259:t=>{t.exports="transitionout"},61611:t=>{t.exports="transitionstart"},45209:t=>{t.exports="transitionwake"},22966:t=>{t.exports="update"},21747:t=>{t.exports="wake"},44594:(t,e,r)=>{t.exports={ADDED_TO_SCENE:r(69830),BOOT:r(7919),CREATE:r(46763),DESTROY:r(11763),PAUSE:r(71555),POST_UPDATE:r(36735),PRE_RENDER:r(3809),PRE_UPDATE:r(90716),READY:r(58262),REMOVED_FROM_SCENE:r(91633),RENDER:r(10319),RESUME:r(87132),SHUTDOWN:r(81961),SLEEP:r(90194),START:r(6265),TRANSITION_COMPLETE:r(33178),TRANSITION_INIT:r(43063),TRANSITION_OUT:r(11259),TRANSITION_START:r(61611),TRANSITION_WAKE:r(45209),UPDATE:r(22966),WAKE:r(21747)}},62194:(t,e,r)=>{var i=r(89993),n=r(79291),o={Events:r(44594),GetPhysicsPlugins:r(27397),GetScenePlugins:r(52106),SceneManager:r(60903),ScenePlugin:r(52209),Settings:r(55681),Systems:r(2368)};o=n(!1,o,i),t.exports=o},30341:(t,e,r)=>{var i=r(83419),n=r(50792),o=r(14463),s=r(79291),a=r(29747),h=new i({Extends:n,initialize:function(t,e,r){n.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=s(this.config,r),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(console.error("addMarker "+t.name+" already exists in Sound"),1):(t=s(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},t),this.markers[t.name]=t,0)))},updateMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(this.markers[t.name]=s(!0,this.markers[t.name],t),0):(console.warn("Audio Marker: "+t.name+" missing in Sound: "+this.key),1)))},removeMarker:function(t){var e=this.markers[t];return e?(this.markers[t]=null,e):null},play:function(t,e){if(void 0===t&&(t=""),"object"==typeof t&&(e=t,t=""),"string"!=typeof t)return!1;if(t){if(!this.markers[t])return console.warn("Marker: "+t+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=s(this.currentConfig,e),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return!(this.isPaused||!this.isPlaying||(this.isPlaying=!1,this.isPaused=!0,0))},resume:function(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1,0))},stop:function(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:a,calculateRate:function(){var t=this.currentConfig.detune+this.manager.detune,e=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*e},destroy:function(){this.pendingRemove||(this.stop(),this.emit(o.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});t.exports=h},85034:(t,e,r)=>{var i=r(83419),n=r(41786),o=r(50792),s=r(14463),a=r(8443),h=r(46710),u=r(58731),c=r(29747),l=r(26099),f=new i({Extends:o,initialize:function(t){o.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new l,t.events.on(a.BLUR,this.onGameBlur,this),t.events.on(a.FOCUS,this.onGameFocus,this),t.events.on(a.PRE_STEP,this.update,this),t.events.once(a.DESTROY,this.destroy,this)},add:c,addAudioSprite:function(t,e){void 0===e&&(e={});var r=this.add(t,e);for(var i in r.spritemap=this.jsonCache.get(t).spritemap,r.spritemap)if(r.spritemap.hasOwnProperty(i)){var o=n(e),s=r.spritemap[i];o.loop=!!s.hasOwnProperty("loop")&&s.loop,r.addMarker({name:i,start:s.start,duration:s.end-s.start,config:o})}return r},get:function(t){return u(this.sounds,"key",t)},getAll:function(t){return t?h(this.sounds,"key",t):h(this.sounds)},getAllPlaying:function(){return h(this.sounds,"isPlaying",!0)},play:function(t,e){var r=this.add(t);return r.once(s.COMPLETE,r.destroy,r),e?e.name?(r.addMarker(e),r.play(e.name)):r.play(e):r.play()},playAudioSprite:function(t,e,r){var i=this.addAudioSprite(t);return i.once(s.COMPLETE,i.destroy,i),i.play(e,r)},remove:function(t){var e=this.sounds.indexOf(t);return-1!==e&&(t.destroy(),this.sounds.splice(e,1),!0)},removeAll:function(){this.sounds.forEach((function(t){t.destroy()})),this.sounds.length=0},removeByKey:function(t){for(var e=0,r=this.sounds.length-1;r>=0;r--){var i=this.sounds[r];i.key===t&&(i.destroy(),this.sounds.splice(r,1),e++)}return e},pauseAll:function(){this.forEachActiveSound((function(t){t.pause()})),this.emit(s.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound((function(t){t.resume()})),this.emit(s.RESUME_ALL,this)},setListenerPosition:c,stopAll:function(){this.forEachActiveSound((function(t){t.stop()})),this.emit(s.STOP_ALL,this)},stopByKey:function(t){var e=0;return this.getAll(t).forEach((function(t){t.stop()&&e++})),e},unlock:c,onBlur:c,onFocus:c,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(t,e){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(s.UNLOCKED,this));for(var r=this.sounds.length-1;r>=0;r--)this.sounds[r].pendingRemove&&this.sounds.splice(r,1);this.sounds.forEach((function(r){r.update(t,e)}))},destroy:function(){this.game.events.off(a.BLUR,this.onGameBlur,this),this.game.events.off(a.FOCUS,this.onGameFocus,this),this.game.events.off(a.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(t,e){var r=this;this.sounds.forEach((function(i,n){i&&!i.pendingRemove&&t.call(e||r,i,n,r.sounds)}))},setRate:function(t){return this.rate=t,this},rate:{get:function(){return this._rate},set:function(t){this._rate=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(s.GLOBAL_RATE,this,t)}},setDetune:function(t){return this.detune=t,this},detune:{get:function(){return this._detune},set:function(t){this._detune=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(s.GLOBAL_DETUNE,this,t)}}});t.exports=f},14747:(t,e,r)=>{var i=r(33684),n=r(25960),o=r(57490),s={create:function(t){var e=t.config.audio,r=t.device.audio;return e.noAudio||!r.webAudio&&!r.audioData?new n(t):r.webAudio&&!e.disableWebAudio?new o(t):new i(t)}};t.exports=s},19723:t=>{t.exports="complete"},98882:t=>{t.exports="decodedall"},57506:t=>{t.exports="decoded"},73146:t=>{t.exports="destroy"},11305:t=>{t.exports="detune"},40577:t=>{t.exports="detune"},30333:t=>{t.exports="mute"},20394:t=>{t.exports="rate"},21802:t=>{t.exports="volume"},1299:t=>{t.exports="looped"},99190:t=>{t.exports="loop"},97125:t=>{t.exports="mute"},89259:t=>{t.exports="pan"},79986:t=>{t.exports="pauseall"},17586:t=>{t.exports="pause"},19618:t=>{t.exports="play"},42306:t=>{t.exports="rate"},10387:t=>{t.exports="resumeall"},48959:t=>{t.exports="resume"},9960:t=>{t.exports="seek"},19180:t=>{t.exports="stopall"},98328:t=>{t.exports="stop"},50401:t=>{t.exports="unlocked"},52498:t=>{t.exports="volume"},14463:(t,e,r)=>{t.exports={COMPLETE:r(19723),DECODED:r(57506),DECODED_ALL:r(98882),DESTROY:r(73146),DETUNE:r(11305),GLOBAL_DETUNE:r(40577),GLOBAL_MUTE:r(30333),GLOBAL_RATE:r(20394),GLOBAL_VOLUME:r(21802),LOOP:r(99190),LOOPED:r(1299),MUTE:r(97125),PAN:r(89259),PAUSE_ALL:r(79986),PAUSE:r(17586),PLAY:r(19618),RATE:r(42306),RESUME_ALL:r(10387),RESUME:r(48959),SEEK:r(9960),STOP_ALL:r(19180),STOP:r(98328),UNLOCKED:r(50401),VOLUME:r(52498)}},64895:(t,e,r)=>{var i=r(30341),n=r(83419),o=r(14463),s=r(45319),a=new n({Extends:i,initialize:function(t,e,r){if(void 0===r&&(r={}),this.tags=t.game.cache.audio.get(e),!this.tags)throw new Error('No cached audio asset with key "'+e);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,i.call(this,t,e,r)},play:function(t,e){return!(this.manager.isLocked(this,"play",[t,e])||!i.prototype.play.call(this,t,e)||!this.pickAndPlayAudioTag()||(this.emit(o.PLAY,this),0))},pause:function(){return!(this.manager.isLocked(this,"pause")||this.startTime>0||!i.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(o.PAUSE,this),0))},resume:function(){return!(this.manager.isLocked(this,"resume")||this.startTime>0||!i.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(o.RESUME,this),0))},stop:function(){return!this.manager.isLocked(this,"stop")&&!!i.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(o.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,e=this.currentConfig.delay,r=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=r,this.audio.currentTime=r,this.applyConfig(),0===e?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*e,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var e=this.tags[t];if("false"===e.dataset.used)return e.dataset.used="true",this.audio=e,!0}if(!this.manager.override)return!1;var r=[];this.manager.forEachActiveSound((function(t){t.key===this.key&&t.audio&&r.push(t)}),this),r.sort((function(t,e){return t.loop===e.loop?e.seek/e.duration-t.seek/t.duration:t.loop?1:-1}));var i=r[0];return this.audio=i.audio,i.reset(),i.audio=null,i.startTime=0,i.previousTime=0,!0},playCatchPromise:function(){var t=this.audio.play();t&&t.catch((function(t){console.warn(t)}))},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){i.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(t){if(this.isPlaying)if(this.startTime>0)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var e=this.currentMarker?this.currentMarker.start:0,r=e+this.duration,i=this.audio.currentTime;if(this.currentConfig.loop)i>=r-this.manager.loopEndOffset?(this.audio.currentTime=e+Math.max(0,i-r),i=this.audio.currentTime):i<e&&(this.audio.currentTime+=e,i=this.audio.currentTime),i<this.previousTime&&this.emit(o.LOOPED,this);else if(i>=r)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(o.COMPLETE,this);this.previousTime=i}},destroy:function(){i.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=s(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){i.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.updateMute(),this.emit(o.MUTE,this,t))}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.currentConfig.volume},set:function(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.updateVolume(),this.emit(o.VOLUME,this,t))}},setVolume:function(t){return this.volume=t,this},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.manager.isLocked(this,o.RATE,t)||(this.calculateRate(),this.emit(o.RATE,this,t))}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.manager.isLocked(this,o.DETUNE,t)||(this.calculateRate(),this.emit(o.DETUNE,this,t))}},setDetune:function(t){return this.detune=t,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.isLocked(this,"seek",t)||this.startTime>0||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(o.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit(o.LOOP,this,t))}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.currentConfig.pan},set:function(t){this.currentConfig.pan=t,this.emit(o.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=a},33684:(t,e,r)=>{var i=r(85034),n=r(83419),o=r(14463),s=r(64895),a=new n({Extends:i,initialize:function(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,i.call(this,t)},add:function(t,e){var r=new s(this,t,e);return this.sounds.push(r),r},unlock:function(){this.locked=!1;var t=this;if(this.game.cache.audio.entries.each((function(e,r){for(var i=0;i<r.length;i++)if("true"===r[i].dataset.locked)return t.locked=!0,!1;return!0})),this.locked){var e=!1,r=function(){e=!0},i=function(){if(e)e=!1;else{document.body.removeEventListener("touchmove",r),document.body.removeEventListener("touchend",i);var n=[];if(t.game.cache.audio.entries.each((function(t,e){for(var r=0;r<e.length;r++){var i=e[r];"true"===i.dataset.locked&&n.push(i)}return!0})),0!==n.length){var o=n[n.length-1];o.oncanplaythrough=function(){o.oncanplaythrough=null,n.forEach((function(t){t.dataset.locked="false"})),t.unlocked=!0},n.forEach((function(t){t.load()}))}}};this.once(o.UNLOCKED,(function(){for(this.forEachActiveSound((function(t){null===t.currentMarker&&0===t.duration&&(t.duration=t.tags[0].duration),t.totalDuration=t.tags[0].duration}));this.lockedActionsQueue.length;){var t=this.lockedActionsQueue.shift();t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}}),this),document.body.addEventListener("touchmove",r,!1),document.body.addEventListener("touchend",i,!1)}},onBlur:function(){this.forEachActiveSound((function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())}))},onFocus:function(){this.onBlurPausedSounds.forEach((function(t){t.onFocus()})),this.onBlurPausedSounds.length=0},destroy:function(){i.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(t,e,r){return"true"===t.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:t,prop:e,value:r}),!0)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return this._mute},set:function(t){this._mute=t,this.forEachActiveSound((function(t){t.updateMute()})),this.emit(o.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this._volume},set:function(t){this._volume=t,this.forEachActiveSound((function(t){t.updateVolume()})),this.emit(o.GLOBAL_VOLUME,this,t)}}});t.exports=a},23717:(t,e,r)=>{t.exports={SoundManagerCreator:r(14747),Events:r(14463),BaseSound:r(30341),BaseSoundManager:r(85034),WebAudioSound:r(71741),WebAudioSoundManager:r(57490),HTML5AudioSound:r(64895),HTML5AudioSoundManager:r(33684),NoAudioSound:r(4603),NoAudioSoundManager:r(25960)}},4603:(t,e,r)=>{var i=r(30341),n=r(83419),o=r(50792),s=r(79291),a=r(29747),h=function(){return!1},u=function(){return null},c=function(){return this},l=new n({Extends:o,initialize:function(t,e,r){void 0===r&&(r={}),o.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=s({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},r),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:h,updateMarker:h,removeMarker:u,play:h,pause:h,resume:h,stop:h,setMute:c,setVolume:c,setRate:c,setDetune:c,setSeek:c,setLoop:c,setPan:c,applyConfig:u,resetConfig:u,update:a,calculateRate:u,destroy:function(){i.prototype.destroy.call(this)}});t.exports=l},25960:(t,e,r)=>{var i=r(85034),n=r(83419),o=r(50792),s=r(4603),a=r(29747),h=new n({Extends:o,initialize:function(t){o.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(t,e){var r=new s(this,t,e);return this.sounds.push(r),r},addAudioSprite:function(t,e){var r=this.add(t,e);return r.spritemap={},r},get:function(t){return i.prototype.get.call(this,t)},getAll:function(t){return i.prototype.getAll.call(this,t)},play:function(t,e){return!1},playAudioSprite:function(t,e,r){return!1},remove:function(t){return i.prototype.remove.call(this,t)},removeAll:function(){return i.prototype.removeAll.call(this)},removeByKey:function(t){return i.prototype.removeByKey.call(this,t)},stopByKey:function(t){return i.prototype.stopByKey.call(this,t)},onBlur:a,onFocus:a,onGameBlur:a,onGameFocus:a,pauseAll:a,resumeAll:a,stopAll:a,update:a,setRate:a,setDetune:a,setMute:a,setVolume:a,unlock:a,forEachActiveSound:function(t,e){i.prototype.forEachActiveSound.call(this,t,e)},destroy:function(){i.prototype.destroy.call(this)}});t.exports=h},71741:(t,e,r)=>{var i=r(30341),n=r(83419),o=r(14463),s=r(95540),a=new n({Extends:i,initialize:function(t,e,r){if(void 0===r&&(r={}),this.audioBuffer=t.game.cache.audio.get(e),!this.audioBuffer)throw new Error('Audio key "'+e+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createPanner&&(this.spatialNode=t.context.createPanner(),this.volumeNode.connect(this.spatialNode)),t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),t.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(t.destination)):t.context.createPanner?this.spatialNode.connect(t.destination):this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,i.call(this,t,e,r)},play:function(t,e){return!!i.prototype.play.call(this,t,e)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(o.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime||!i.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(o.PAUSE,this),0))},resume:function(){return!(this.manager.context.currentTime<this.startTime||!i.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(o.RESUME,this),0))},stop:function(){return!!i.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(o.STOP,this),!0)},createAndStartBufferSource:function(){var t=this.currentConfig.seek,e=this.currentConfig.delay,r=this.manager.context.currentTime+e,i=(this.currentMarker?this.currentMarker.start:0)+t,n=this.duration-t;this.playTime=r-t,this.startTime=r,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,r),Math.max(0,i),Math.max(0,n)),this.resetConfig()},createAndStartLoopBufferSource:function(){var t=this.getLoopTime(),e=this.currentMarker?this.currentMarker.start:0,r=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,e),Math.max(0,r))},createBufferSource:function(){var t=this,e=this.manager.context.createBufferSource();return e.buffer=this.audioBuffer,e.connect(this.muteNode),e.onended=function(e){e.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},e},stopAndRemoveBufferSource:function(){if(this.source){var t=this.source;this.source=null,t.stop(),t.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var t=this.currentConfig.source;if(t&&this.manager.context.createPanner){var e=this.spatialNode;e.panningModel=s(t,"panningModel","equalpower"),e.distanceModel=s(t,"distanceModel","inverse"),e.orientationX.value=s(t,"orientationX",0),e.orientationY.value=s(t,"orientationY",0),e.orientationZ.value=s(t,"orientationZ",-1),e.refDistance=s(t,"refDistance",1),e.maxDistance=s(t,"maxDistance",1e4),e.rolloffFactor=s(t,"rolloffFactor",1),e.coneInnerAngle=s(t,"coneInnerAngle",360),e.coneOuterAngle=s(t,"coneOuterAngle",0),e.coneOuterGain=s(t,"coneOuterGain",0),this.spatialSource=s(t,"follow",null),this.spatialSource||(e.positionX.value=s(t,"x",0),e.positionY.value=s(t,"y",0),e.positionZ.value=s(t,"z",0))}i.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(t){this.spatialNode&&(this.spatialNode.positionX.value=t)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(t){this.spatialNode&&(this.spatialNode.positionY.value=t)}},update:function(){if(this.isPlaying&&this.spatialSource){var t=s(this.spatialSource,"x",null),e=s(this.spatialSource,"y",null);t&&t!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=t),e&&e!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=e)}this.hasEnded?(i.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(o.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(o.LOOPED,this))},destroy:function(){this.pendingRemove||(i.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){i.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var t=0,e=0;e<this.rateUpdates.length;e++)t+=((e<this.rateUpdates.length-1?this.rateUpdates[e+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[e].time)*this.rateUpdates[e].rate;return t},getLoopTime:function(){for(var t=0,e=0;e<this.rateUpdates.length-1;e++)t+=(this.rateUpdates[e+1].time-this.rateUpdates[e].time)*this.rateUpdates[e].rate;var r=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+r.time+(this.duration-t)/r.rate},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(o.RATE,this,t)}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(o.DETUNE,this,t)}},setDetune:function(t){return this.detune=t,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(o.MUTE,this,t)}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(o.VOLUME,this,t)}},setVolume:function(t){return this.volume=t,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(o.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(o.LOOP,this,t)}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(t){this.currentConfig.pan=t,this.pannerNode&&this.pannerNode.pan.setValueAtTime(t,this.manager.context.currentTime),this.emit(o.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=a},57490:(t,e,r)=>{var i=r(53134),n=r(85034),o=r(83419),s=r(14463),a=r(8443),h=r(71741),u=r(95540),c=new o({Extends:n,initialize:function(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),n.call(this,t),this.locked&&t.isBooted?this.unlock():t.events.once(a.BOOT,this.unlock,this)},createAudioContext:function(t){var e=t.config.audio;return e.context?(e.context.resume(),e.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function(t){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=t,this.masterMuteNode=t.createGain(),this.masterVolumeNode=t.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(t.destination),this.destination=this.masterMuteNode,this},add:function(t,e){var r=new h(this,t,e);return this.sounds.push(r),r},decodeAudio:function(t,e){var r;r=Array.isArray(t)?t:[{key:t,data:e}];for(var n=this.game.cache.audio,o=r.length,a=0;a<r.length;a++){var h=r[a],u=h.key,c=h.data;"string"==typeof c&&(c=i(c));var l=function(t,e){n.add(t,e),this.emit(s.DECODED,t),0==--o&&this.emit(s.DECODED_ALL)}.bind(this,u),f=function(t,e){console.error("Error decoding audio: "+t+" - ",e?e.message:""),0==--o&&this.emit(s.DECODED_ALL)}.bind(this,u);this.context.decodeAudioData(c,l,f)}},setListenerPosition:function(t,e){return void 0===t&&(t=this.game.scale.width/2),void 0===e&&(e=this.game.scale.height/2),this.listenerPosition.set(t,e),this},unlock:function(){var t=this,e=document.body,r=function r(){if(t.context&&e){var i=e.removeEventListener.bind(e);t.context.resume().then((function(){i("touchstart",r),i("touchend",r),i("click",r),i("keydown",r),t.unlocked=!0}),(function(){i("touchstart",r),i("touchend",r),i("click",r),i("keydown",r)}))}};e&&(e.addEventListener("touchstart",r,!1),e.addEventListener("touchend",r,!1),e.addEventListener("click",r,!1),e.addEventListener("keydown",r,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var t=this.context;!t||this.locked||"suspended"!==t.state&&"interrupted"!==t.state||t.resume()},update:function(t,e){var r=this.context.listener;if(r&&void 0!==r.positionX){var i=u(this.listenerPosition,"x",null),o=u(this.listenerPosition,"y",null);i&&i!==this._spatialx&&(this._spatialx=r.positionX.value=i),o&&o!==this._spatialy&&(this._spatialy=r.positionY.value=o)}n.prototype.update.call(this,t,e),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var t=this;this.context.close().then((function(){t.context=null}))}n.prototype.destroy.call(this)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit(s.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit(s.GLOBAL_VOLUME,this,t)}}});t.exports=c},73162:(t,e,r)=>{var i=r(37105),n=r(83419),o=r(29747),s=r(19186),a=new n({initialize:function(t){this.parent=t,this.list=[],this.position=0,this.addCallback=o,this.removeCallback=o,this._sortKey=""},add:function(t,e){return e?i.Add(this.list,t):i.Add(this.list,t,0,this.addCallback,this)},addAt:function(t,e,r){return r?i.AddAt(this.list,t,e):i.AddAt(this.list,t,e,0,this.addCallback,this)},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,r){return e[t]-r[t]}),s(this.list,e),this):this},getByName:function(t){return i.GetFirst(this.list,"name",t)},getRandom:function(t,e){return i.GetRandom(this.list,t,e)},getFirst:function(t,e,r,n){return i.GetFirst(this.list,t,e,r,n)},getAll:function(t,e,r,n){return i.GetAll(this.list,t,e,r,n)},count:function(t,e){return i.CountAllMatching(this.list,t,e)},swap:function(t,e){i.Swap(this.list,t,e)},moveTo:function(t,e){return i.MoveTo(this.list,t,e)},moveAbove:function(t,e){return i.MoveAbove(this.list,t,e)},moveBelow:function(t,e){return i.MoveBelow(this.list,t,e)},remove:function(t,e){return e?i.Remove(this.list,t):i.Remove(this.list,t,this.removeCallback,this)},removeAt:function(t,e){return e?i.RemoveAt(this.list,t):i.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function(t,e,r){return r?i.RemoveBetween(this.list,t,e):i.RemoveBetween(this.list,t,e,this.removeCallback,this)},removeAll:function(t){for(var e=this.list.length;e--;)this.remove(this.list[e],t);return this},bringToTop:function(t){return i.BringToTop(this.list,t)},sendToBack:function(t){return i.SendToBack(this.list,t)},moveUp:function(t){return i.MoveUp(this.list,t),t},moveDown:function(t){return i.MoveDown(this.list,t),t},reverse:function(){return this.list.reverse(),this},shuffle:function(){return i.Shuffle(this.list),this},replace:function(t,e){return i.Replace(this.list,t,e)},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,r,n){return i.SetAll(this.list,t,e,r,n),this},each:function(t,e){for(var r=[null],i=2;i<arguments.length;i++)r.push(arguments[i]);for(i=0;i<this.list.length;i++)r[0]=this.list[i],t.apply(e,r)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});t.exports=a},90330:(t,e,r)=>{var i=new(r(83419))({initialize:function(t){this.entries={},this.size=0,this.setAll(t)},setAll:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e][0],t[e][1]);return this},set:function(t,e){return this.has(t)||this.size++,this.entries[t]=e,this},get:function(t){if(this.has(t))return this.entries[t]},getArray:function(){var t=[],e=this.entries;for(var r in e)t.push(e[r]);return t},has:function(t){return this.entries.hasOwnProperty(t)},delete:function(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function(){return Object.keys(this.entries).forEach((function(t){delete this.entries[t]}),this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var t=[],e=this.entries;for(var r in e)t.push(e[r]);return t},dump:function(){var t=this.entries;for(var e in console.group("Map"),t)console.log(e,t[e]);console.groupEnd()},each:function(t){var e=this.entries;for(var r in e)if(!1===t(r,e[r]))break;return this},contains:function(t){var e=this.entries;for(var r in e)if(e[r]===t)return!0;return!1},merge:function(t,e){void 0===e&&(e=!1);var r=this.entries,i=t.entries;for(var n in i)r.hasOwnProperty(n)&&e?r[n]=i[n]:this.set(n,i[n]);return this}});t.exports=i},25774:(t,e,r)=>{var i=r(83419),n=r(50792),o=r(82348),s=new i({Extends:n,initialize:function(){n.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(t){return this._active.indexOf(t)>-1},isPending:function(t){return this._toProcess>0&&this._pending.indexOf(t)>-1},isDestroying:function(t){return this._destroy.indexOf(t)>-1},add:function(t){return this.checkQueue&&this.isActive(t)&&!this.isDestroying(t)||this.isPending(t)||(this._pending.push(t),this._toProcess++),t},remove:function(t){if(this.isPending(t)){var e=this._pending,r=e.indexOf(t);-1!==r&&e.splice(r,1)}else this.isActive(t)&&(this._destroy.push(t),this._toProcess++);return t},removeAll:function(){for(var t=this._active,e=this._destroy,r=t.length;r--;)e.push(t[r]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;var t,e,r=this._destroy,i=this._active;for(t=0;t<r.length;t++){e=r[t];var n=i.indexOf(e);-1!==n&&(i.splice(n,1),this.emit(o.PROCESS_QUEUE_REMOVE,e))}for(r.length=0,r=this._pending,t=0;t<r.length;t++)e=r[t],(!this.checkQueue||this.checkQueue&&-1===i.indexOf(e))&&(i.push(e),this.emit(o.PROCESS_QUEUE_ADD,e));return r.length=0,this._toProcess=0,i},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=s},59542:(t,e,r)=>{var i=r(43886);function n(t){if(!(this instanceof n))return new n(t,[".left",".top",".right",".bottom"]);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function o(t,e,r){if(!r)return e.indexOf(t);for(var i=0;i<e.length;i++)if(r(t,e[i]))return i;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,r,i,n){n||(n=v(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,s=e;s<r;s++)o=t.children[s],h(n,t.leaf?i(o):o);return n}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function v(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,r,n,o){for(var s,a=[e,r];a.length;)(r=a.pop())-(e=a.pop())<=n||(s=e+Math.ceil((r-e)/n/2)*n,i(t,s,e,r,o),a.push(e,s,s,r))}n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],i=this.toBBox;if(!d(t,e))return r;for(var n,o,s,a,h=[];e;){for(n=0,o=e.children.length;n<o;n++)s=e.children[n],d(t,a=e.leaf?i(s):s)&&(e.leaf?r.push(s):p(t,a)?this._all(s,r):h.push(s));e=h.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!d(t,e))return!1;for(var i,n,o,s,a=[];e;){for(i=0,n=e.children.length;i<n;i++)if(o=e.children[i],d(t,s=e.leaf?r(o):o)){if(e.leaf||p(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=v([]),this},remove:function(t,e){if(!t)return this;for(var r,i,n,s,a=this.data,h=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),i=u[u.length-1],r=c.pop(),s=!0),a.leaf&&-1!==(n=o(t,a.children,e)))return a.children.splice(n,1),u.push(a),this._condense(u),this;s||a.leaf||!p(a,h)?i?(r++,a=i.children[r],s=!1):a=null:(u.push(a),c.push(r),r=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,i){var n,o=r-e+1,a=this._maxEntries;if(o<=a)return s(n=v(t.slice(e,r+1)),this.toBBox),n;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(n=v([])).leaf=!1,n.height=i;var h,u,c,l,f=Math.ceil(o/a),p=f*Math.ceil(Math.sqrt(a));for(y(t,e,r,p,this.compareMinX),h=e;h<=r;h+=p)for(y(t,h,c=Math.min(h+p-1,r),f,this.compareMinY),u=h;u<=c;u+=f)l=Math.min(u+f-1,c),n.children.push(this._build(t,u,l,i-1));return s(n,this.toBBox),n},_chooseSubtree:function(t,e,r,i){for(var n,o,s,a,h,u,c,f,p,d;i.push(e),!e.leaf&&i.length-1!==r;){for(c=f=1/0,n=0,o=e.children.length;n<o;n++)h=l(s=e.children[n]),p=t,d=s,(u=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-h)<f?(f=u,c=h<c?h:c,a=s):u===f&&h<c&&(c=h,a=s);e=a||e.children[0]}return e},_insert:function(t,e,r){var i=this.toBBox,n=r?t:i(t),o=[],s=this._chooseSubtree(n,this.data,e,o);for(s.children.push(t),h(s,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},_split:function(t,e){var r=t[e],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var o=this._chooseSplitIndex(r,n,i),a=v(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,s(r,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(r,a)},_splitRoot:function(t,e){this.data=v([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var i,n,o,s,h,u,c,f,p,d,v,y,g,m;for(u=c=1/0,i=e;i<=r-e;i++)p=n=a(t,0,i,this.toBBox),d=o=a(t,i,r,this.toBBox),void 0,void 0,void 0,void 0,v=Math.max(p.minX,d.minX),y=Math.max(p.minY,d.minY),g=Math.min(p.maxX,d.maxX),m=Math.min(p.maxY,d.maxY),s=Math.max(0,g-v)*Math.max(0,m-y),h=l(n)+l(o),s<u?(u=s,f=i,c=h<c?h:c):s===u&&h<c&&(c=h,f=i);return f},_chooseSplitAxis:function(t,e,r){var i=t.leaf?this.compareMinX:u,n=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,r,i)<this._allDistMargin(t,e,r,n)&&t.children.sort(i)},_allDistMargin:function(t,e,r,i){t.children.sort(i);var n,o,s=this.toBBox,u=a(t,0,e,s),c=a(t,r-e,r,s),l=f(u)+f(c);for(n=e;n<r-e;n++)o=t.children[n],h(u,t.leaf?s(o):o),l+=f(u);for(n=r-e-1;n>=e;n--)o=t.children[n],h(c,t.leaf?s(o):o),l+=f(c);return l},_adjustParentBBoxes:function(t,e,r){for(var i=r;i>=0;i--)h(e[i],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():s(t[r],this.toBBox)},compareMinX:function(t,e){return t.left-e.left},compareMinY:function(t,e){return t.top-e.top},toBBox:function(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}}},t.exports=n},35072:(t,e,r)=>{var i=new(r(83419))({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e])},set:function(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function(t,e){for(var r=0;r<this.entries.length;r++){var i=this.entries[r];if(i[t]===e)return i}},getArray:function(){return this.entries.slice(0)},delete:function(t){var e=this.entries.indexOf(t);return e>-1&&this.entries.splice(e,1),this},dump:function(){console.group("Set");for(var t=0;t<this.entries.length;t++){var e=this.entries[t];console.log(e)}console.groupEnd()},each:function(t,e){var r,i=this.entries.slice(),n=i.length;if(e)for(r=0;r<n&&!1!==t.call(e,i[r],r);r++);else for(r=0;r<n&&!1!==t(i[r],r);r++);return this},iterate:function(t,e){var r,i=this.entries.length;if(e)for(r=0;r<i&&!1!==t.call(e,this.entries[r],r);r++);else for(r=0;r<i&&!1!==t(this.entries[r],r);r++);return this},iterateLocal:function(t){var e,r=[];for(e=1;e<arguments.length;e++)r.push(arguments[e]);var i=this.entries.length;for(e=0;e<i;e++){var n=this.entries[e];n[t].apply(n,r)}return this},clear:function(){return this.entries.length=0,this},contains:function(t){return this.entries.indexOf(t)>-1},union:function(t){var e=new i;return t.entries.forEach((function(t){e.set(t)})),this.entries.forEach((function(t){e.set(t)})),e},intersect:function(t){var e=new i;return this.entries.forEach((function(r){t.contains(r)&&e.set(r)})),e},difference:function(t){var e=new i;return this.entries.forEach((function(r){t.contains(r)||e.set(r)})),e},size:{get:function(){return this.entries.length},set:function(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});t.exports=i},86555:(t,e,r)=>{var i=r(45319),n=r(83419),o=r(56583),s=r(26099),a=new n({initialize:function(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=t),void 0===r&&(r=0),void 0===i&&(i=null),this._width=t,this._height=e,this._parent=i,this.aspectMode=r,this.aspectRatio=0===e?1:t/e,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new s},setAspectMode:function(t){return void 0===t&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.snapTo.set(t,e),this.setSize(this._width,this._height)},setParent:function(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.minWidth=i(t,0,this.maxWidth),this.minHeight=i(e,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(t,e){return void 0===t&&(t=Number.MAX_VALUE),void 0===e&&(e=t),this.maxWidth=i(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=i(e,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(t,e){switch(void 0===t&&(t=0),void 0===e&&(e=t),this.aspectMode){case a.NONE:this._width=this.getNewWidth(o(t,this.snapTo.x)),this._height=this.getNewHeight(o(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case a.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(o(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case a.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(o(e,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case a.FIT:this.constrain(t,e,!0);break;case a.ENVELOP:this.constrain(t,e,!1)}return this},setAspectRatio:function(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function(t,e){return this._width=this.getNewWidth(o(t,this.snapTo.x)),this._height=this.getNewHeight(o(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(t,e){return void 0===e&&(e=!0),t=i(t,this.minWidth,this.maxWidth),e&&this._parent&&t>this._parent.width&&(t=Math.max(this.minWidth,this._parent.width)),t},getNewHeight:function(t,e){return void 0===e&&(e=!0),t=i(t,this.minHeight,this.maxHeight),e&&this._parent&&t>this._parent.height&&(t=Math.max(this.minHeight,this._parent.height)),t},constrain:function(t,e,r){void 0===t&&(t=0),void 0===e&&(e=t),void 0===r&&(r=!0),t=this.getNewWidth(t),e=this.getNewHeight(e);var i=this.snapTo,n=0===e?1:t/e;return r&&this.aspectRatio>n||!r&&this.aspectRatio<n?(e=(t=o(t,i.x))/this.aspectRatio,i.y>0&&(t=(e=o(e,i.y))*this.aspectRatio)):(r&&this.aspectRatio<n||!r&&this.aspectRatio>n)&&(t=(e=o(e,i.y))*this.aspectRatio,i.x>0&&(e=(t=o(t,i.x))*(1/this.aspectRatio))),this._width=t,this._height=e,this},fitTo:function(t,e){return this.constrain(t,e,!0)},envelop:function(t,e){return this.constrain(t,e,!1)},setWidth:function(t){return this.setSize(t,this._height)},setHeight:function(t){return this.setSize(this._width,t)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(t){this.setSize(t,this._height)}},height:{get:function(){return this._height},set:function(t){this.setSize(this._width,t)}}});a.NONE=0,a.WIDTH_CONTROLS_HEIGHT=1,a.HEIGHT_CONTROLS_WIDTH=2,a.FIT=3,a.ENVELOP=4,t.exports=a},15238:t=>{t.exports="add"},56187:t=>{t.exports="remove"},82348:(t,e,r)=>{t.exports={PROCESS_QUEUE_ADD:r(15238),PROCESS_QUEUE_REMOVE:r(56187)}},41392:(t,e,r)=>{t.exports={Events:r(82348),List:r(73162),Map:r(90330),ProcessQueue:r(25774),RTree:r(59542),Set:r(35072),Size:r(86555)}},57382:(t,e,r)=>{var i=r(83419),n=r(45319),o=r(40987),s=r(8054),a=r(50030),h=r(79237),u=new i({Extends:h,initialize:function(t,e,r,i,n){h.call(this,t,e,r,i,n),this.add("__BASE",0,0,0,i,n),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=i,this.height=n,this.imageData=this.context.getImageData(0,0,i,n),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===s.WEBGL&&this.refresh(),this},draw:function(t,e,r,i){return void 0===i&&(i=!0),this.context.drawImage(r,t,e),i&&this.update(),this},drawFrame:function(t,e,r,i,n){void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=!0);var o=this.manager.getFrame(t,e);if(o){var s=o.canvasData,a=o.cutWidth,h=o.cutHeight,u=o.source.resolution;this.context.drawImage(o.source.image,s.x,s.y,a,h,r,i,a/u,h/u),n&&this.update()}return this},setPixel:function(t,e,r,i,n,o){if(void 0===o&&(o=255),t=Math.abs(Math.floor(t)),e=Math.abs(Math.floor(e)),this.getIndex(t,e)>-1){var s=this.context.getImageData(t,e,1,1);s.data[0]=r,s.data[1]=i,s.data[2]=n,s.data[3]=o,this.context.putImageData(s,t,e)}return this},putData:function(t,e,r,i,n,o,s){return void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=t.width),void 0===s&&(s=t.height),this.context.putImageData(t,e,r,i,n,o,s),this},getData:function(t,e,r,i){return t=n(Math.floor(t),0,this.width-1),e=n(Math.floor(e),0,this.height-1),r=n(r,1,this.width-t),i=n(i,1,this.height-e),this.context.getImageData(t,e,r,i)},getPixel:function(t,e,r){r||(r=new o);var i=this.getIndex(t,e);if(i>-1){var n=this.data,s=n[i+0],a=n[i+1],h=n[i+2],u=n[i+3];r.setTo(s,a,h,u)}return r},getPixels:function(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=this.width),void 0===i&&(i=r),t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e));for(var s=n(t,0,this.width),a=n(t+r,0,this.width),h=n(e,0,this.height),u=n(e+i,0,this.height),c=new o,l=[],f=h;f<u;f++){for(var p=[],d=s;d<a;d++)c=this.getPixel(d,f,c),p.push({x:d,y:f,color:c.color,alpha:c.alphaGL});l.push(p)}return l},getIndex:function(t,e){return t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e)),t<this.width&&e<this.height?4*(t+e*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(t,e,r,i,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=this.width),void 0===i&&(i=this.height),void 0===n&&(n=!0),this.context.clearRect(t,e,r,i),n&&this.update(),this},setSize:function(t,e){return void 0===e&&(e=t),t===this.width&&e===this.height||(this.canvas.width=t,this.canvas.height=e,this._source.width=t,this._source.height=e,this._source.isPowerOf2=a(t,e),this.frames.__BASE.setSize(t,e,0,0),this.width=t,this.height=e,this.refresh()),this},destroy:function(){h.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=u},81320:(t,e,r)=>{var i=r(10312),n=r(71911),o=r(27919),s=r(83419),a=r(8054),h=r(4327),u=r(95540),c=r(36060),l=r(32302),f=r(79237),p=r(70554),d=new s({Extends:f,initialize:function(t,e,r,i){void 0===r&&(r=256),void 0===i&&(i=256),this.type="DynamicTexture";var s=t.game.renderer,h=s&&s.type===a.CANVAS,u=h?o.create2D(this,r,i):[this];f.call(this,t,e,u,r,i),this.add("__BASE",0,0,0,r,i),this.renderer=s,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=h?u:null,this.context=h?u.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new n(0,0,r,i).setScene(t.game.scene.systemScene,!1),this.renderTarget=h?null:new l(s,r,i,1,0,!1,!0,!0,!1),this.pipeline=h?null:s.pipelines.get(c.SINGLE_PIPELINE),this.setSize(r,i)},setSize:function(t,e){void 0===e&&(e=t);var r=this.get(),i=r.source;if(t!==this.width||e!==this.height){this.canvas&&(this.canvas.width=t,this.canvas.height=e);var n=this.renderTarget;n&&(n.willResize(t,e)&&n.resize(t,e),n.texture!==i.glTexture&&this.renderer.deleteTexture(i.glTexture),this.setFromRenderTarget()),this.camera.setSize(t,e),i.width=t,i.height=e,r.setSize(t,e),this.width=t,this.height=e}else{var o=this.getSourceImage();r.cutX+t>o.width&&(t=o.width-r.cutX),r.cutY+e>o.height&&(e=o.height-r.cutY),r.setSize(t,e,r.cutX,r.cutY)}return this},setFromRenderTarget:function(){var t=this.get().source,e=this.renderTarget;return t.isRenderTexture=!0,t.isGLTexture=!0,t.glTexture=e.texture,this},setIsSpriteTexture:function(t){return this.isSpriteTexture=t,this},fill:function(t,e,r,i,n,o){var s=this.camera,a=this.renderer;void 0===e&&(e=1),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=this.width),void 0===o&&(o=this.height);var h=t>>16&255,u=t>>8&255,c=255&t,l=this.renderTarget;if(s.preRender(),l){l.bind(!0);var f=this.pipeline.manager.set(this.pipeline),d=a.width/l.width,v=a.height/l.height,y=l.height-(i+o);f.drawFillRect(r*d,y*v,n*d,o*v,p.getTintFromFloats(c/255,u/255,h/255,1),e),l.unbind(!0)}else{var g=this.context;a.setContext(g),g.globalCompositeOperation="source-over",g.fillStyle="rgba("+h+","+u+","+c+","+e+")",g.fillRect(r,i,n,o),a.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var t=this.context,e=this.renderTarget;e?e.clear():t&&(t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.width,this.height),t.restore()),this.dirty=!1}return this},stamp:function(t,e,r,i,n){void 0===r&&(r=0),void 0===i&&(i=0);var o=u(n,"alpha",1),s=u(n,"tint",16777215),a=u(n,"angle",0),h=u(n,"rotation",0),c=u(n,"scale",1),l=u(n,"scaleX",c),f=u(n,"scaleY",c),p=u(n,"originX",.5),d=u(n,"originY",.5),v=u(n,"blendMode",0),y=u(n,"erase",!1),g=u(n,"skipBatch",!1),m=this.manager.resetStamp(o,s);return m.setAngle(0),0!==a?m.setAngle(a):0!==h&&m.setRotation(h),m.setScale(l,f),m.setTexture(t,e),m.setOrigin(p,d),m.setBlendMode(v),y&&(this._eraseMode=!0),g?this.batchGameObject(m,r,i):this.draw(m,r,i),y&&(this._eraseMode=!1),this},erase:function(t,e,r){return this._eraseMode=!0,this.draw(t,e,r),this._eraseMode=!1,this},draw:function(t,e,r,i,n){return this.beginDraw(),this.batchDraw(t,e,r,i,n),this.endDraw(),this},drawFrame:function(t,e,r,i,n,o){return this.beginDraw(),this.batchDrawFrame(t,e,r,i,n,o),this.endDraw(),this},repeat:function(t,e,r,i,n,o,s,a,u){if(void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=this.width),void 0===o&&(o=this.height),void 0===s&&(s=1),void 0===a&&(a=16777215),void 0===u&&(u=!1),!(e=t instanceof h?t:this.manager.getFrame(t,e)))return this;var c=this.manager.resetStamp(s,a);c.setFrame(e),c.setOrigin(0);var l=e.width,f=e.height;n=Math.floor(n),o=Math.floor(o);var p=Math.ceil(n/l),d=Math.ceil(o/f),v=p*l-n,y=d*f-o;v>0&&(v=l-v),y>0&&(y=f-y),r<0&&(p+=Math.ceil(Math.abs(r)/l)),i<0&&(d+=Math.ceil(Math.abs(i)/f));var g=r,m=i,x=!1,b=this.manager.stampCrop.setTo(0,0,l,f);u||this.beginDraw();for(var w=0;w<d;w++)if(m+f<0)m+=f;else{for(var E=0;E<p;E++)x=!1,g+l<0||(g<0&&(x=!0,b.width=l+g,b.x=l-b.width),m<0&&(x=!0,b.height=f+m,b.y=f-b.height),v>0&&E===p-1&&(x=!0,b.width=v),y>0&&w===d-1&&(x=!0,b.height=y),x&&c.setCrop(b),this.batchGameObject(c,g,m),c.isCropped=!1,b.setTo(0,0,l,f)),g+=l;g=r,m+=f}return u||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var t=this.camera,e=this.renderer,r=this.renderTarget;t.preRender(),r?e.beginCapture(r.width,r.height):e.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(t,e,r,i,n){return Array.isArray(t)||(t=[t]),this.batchList(t,e,r,i,n),this},batchDrawFrame:function(t,e,r,i,n,o){void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===o&&(o=16777215);var s=this.manager.getFrame(t,e);return s&&(this.renderTarget?this.pipeline.batchTextureFrame(s,r,i,o,n,this.camera.matrix,null):this.batchTextureFrame(s,r,i,n,o)),this},endDraw:function(t){if(void 0===t&&(t=this._eraseMode),this.isDrawing){var e=this.renderer,r=this.renderTarget;if(r){var i=e.endCapture();e.pipelines.setUtility().blitFrame(i,r,1,!1,!1,t,this.isSpriteTexture),e.resetScissor(),e.resetViewport()}else e.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(t,e,r,i,n){var o=t.length;if(0!==o)for(var s=0;s<o;s++){var a=t[s];a&&a!==this&&(a.renderWebGL||a.renderCanvas?this.batchGameObject(a,e,r):a.isParent||a.list?this.batchGroup(a.getChildren(),e,r):"string"==typeof a?this.batchTextureFrameKey(a,null,e,r,i,n):a instanceof h?this.batchTextureFrame(a,e,r,i,n):Array.isArray(a)&&this.batchList(a,e,r,i,n))}},batchGroup:function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0);for(var i=0;i<t.length;i++){var n=t[i];n.willRender(this.camera)&&this.batchGameObject(n,n.x+e,n.y+r)}},batchGameObject:function(t,e,r){void 0===e&&(e=t.x),void 0===r&&(r=t.y);var n=t.x,o=t.y,s=this.camera,a=this.renderer,h=this._eraseMode,u=t.mask;if(t.setPosition(e,r),this.canvas){if(h){var c=t.blendMode;t.blendMode=i.ERASE}u&&u.preRenderCanvas(a,t,s),t.renderCanvas(a,t,s,null),u&&u.postRenderCanvas(a,t,s),h&&(t.blendMode=c)}else a&&(u&&u.preRenderWebGL(a,t,s),h||a.setBlendMode(t.blendMode),t.renderWebGL(a,t,s),u&&u.postRenderWebGL(a,s,this.renderTarget));t.setPosition(n,o)},batchTextureFrameKey:function(t,e,r,i,n,o){var s=this.manager.getFrame(t,e);s&&this.batchTextureFrame(s,r,i,n,o)},batchTextureFrame:function(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=16777215);var o=this.camera.matrix;if(this.renderTarget)this.pipeline.batchTextureFrame(t,e,r,n,i,o,null);else{var s=this.context,a=t.canvasData,h=t.source.image;s.save(),s.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",s.globalAlpha=i,o.setToContext(s),a.width>0&&a.height>0&&s.drawImage(h,a.x,a.y,a.width,a.height,e,r,a.width,a.height),s.restore()}},snapshotArea:function(t,e,r,i,n,o,s){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,n,!1,t,e,r,i,o,s):this.renderer.snapshotCanvas(this.canvas,n,!1,t,e,r,i,o,s),this},snapshot:function(t,e,r){return this.snapshotArea(0,0,this.width,this.height,t,e,r)},snapshotPixel:function(t,e,r){return this.snapshotArea(t,e,1,1,r,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(t,e,r,i){var n=this.manager.resetStamp();n.setTexture(this),n.setOrigin(0),n.renderWebGL(t,n,r,i)},renderCanvas:function(){},destroy:function(){var t=this.manager.stamp;t&&t.texture===this&&this.manager.resetStamp(),f.prototype.destroy.call(this),o.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});t.exports=d},4327:(t,e,r)=>{var i=r(83419),n=r(45319),o=r(79291),s=new i({initialize:function(t,e,r,i,n,o,s){this.texture=t,this.name=e,this.source=t.source[r],this.sourceIndex=r,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(o,s,i,n)},setSize:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0),this.cutX=r,this.cutY=i,this.cutWidth=t,this.cutHeight=e,this.width=t,this.height=e,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*e),this.centerX=Math.floor(t/2),this.centerY=Math.floor(e/2);var n=this.data,o=n.cut;o.x=r,o.y=i,o.w=t,o.h=e,o.r=r+t,o.b=i+e,n.sourceSize.w=t,n.sourceSize.h=e,n.spriteSourceSize.w=t,n.spriteSourceSize.h=e,n.radius=.5*Math.sqrt(t*t+e*e);var s=n.drawImage;return s.x=r,s.y=i,s.width=t,s.height=e,this.updateUVs()},setTrim:function(t,e,r,i,n,o){var s=this.data,a=s.spriteSourceSize;return s.trim=!0,s.sourceSize.w=t,s.sourceSize.h=e,a.x=r,a.y=i,a.w=n,a.h=o,a.r=r+n,a.b=i+o,this.x=r,this.y=i,this.width=n,this.height=o,this.halfWidth=.5*n,this.halfHeight=.5*o,this.centerX=Math.floor(n/2),this.centerY=Math.floor(o/2),this.updateUVs()},setScale9:function(t,e,r,i){var n=this.data;return n.scale9=!0,n.is3Slice=0===e&&i===this.height,n.scale9Borders.x=t,n.scale9Borders.y=e,n.scale9Borders.w=r,n.scale9Borders.h=i,this},setCropUVs:function(t,e,r,i,o,s,a){var h=this.cutX,u=this.cutY,c=this.cutWidth,l=this.cutHeight,f=this.realWidth,p=this.realHeight,d=h+(e=n(e,0,f)),v=u+(r=n(r,0,p)),y=i=n(i,0,f-e),g=o=n(o,0,p-r),m=this.data;if(m.trim){var x=m.spriteSourceSize,b=e+(i=n(i,0,c-e)),w=r+(o=n(o,0,l-r));if(x.r<e||x.b<r||x.x>b||x.y>w)d=0,v=0,y=0,g=0;else{var E=Math.max(x.x,e),T=Math.max(x.y,r),S=Math.min(x.r,b)-E,_=Math.min(x.b,w)-T;y=S,g=_,d=s?h+(c-(E-x.x)-S):h+(E-x.x),v=a?u+(l-(T-x.y)-_):u+(T-x.y),e=E,r=T,i=S,o=_}}else s&&(d=h+(c-e-i)),a&&(v=u+(l-r-o));var O=this.source.width,P=this.source.height;return t.u0=Math.max(0,d/O),t.v0=Math.max(0,v/P),t.u1=Math.min(1,(d+y)/O),t.v1=Math.min(1,(v+g)/P),t.x=e,t.y=r,t.cx=d,t.cy=v,t.cw=y,t.ch=g,t.width=i,t.height=o,t.flipX=s,t.flipY=a,t},updateCropUVs:function(t,e,r){return this.setCropUVs(t,t.x,t.y,t.width,t.height,e,r)},setUVs:function(t,e,r,i,n,o){var s=this.data.drawImage;return s.width=t,s.height=e,this.u0=r,this.v0=i,this.u1=n,this.v1=o,this},updateUVs:function(){var t=this.cutX,e=this.cutY,r=this.cutWidth,i=this.cutHeight,n=this.data.drawImage;n.width=r,n.height=i;var o=this.source.width,s=this.source.height;return this.u0=t/o,this.v0=e/s,this.u1=(t+r)/o,this.v1=(e+i)/s,this},updateUVsInverted:function(){var t=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/e,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var t=new s(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=o(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=s},79237:(t,e,r)=>{var i=r(83419),n=r(4327),o=r(11876),s='Texture "%s" has no frame "%s"',a=new i({initialize:function(t,e,r,i,n){Array.isArray(r)||(r=[r]),this.manager=t,this.key=e,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var s=0;s<r.length;s++)this.source.push(new o(this,r[s],i,n))},add:function(t,e,r,i,o,s){if(this.has(t))return null;var a=new n(this,t,e,r,i,o,s);return this.frames[t]=a,"__BASE"===this.firstFrame&&(this.firstFrame=t),this.frameTotal++,a},remove:function(t){return!!this.has(t)&&(this.get(t).destroy(),delete this.frames[t],!0)},has:function(t){return this.frames.hasOwnProperty(t)},get:function(t){t||(t=this.firstFrame);var e=this.frames[t];return e||(console.warn(s,this.key,t),e=this.frames[this.firstFrame]),e},getTextureSourceIndex:function(t){for(var e=0;e<this.source.length;e++)if(this.source[e]===t)return e;return-1},getFramesFromTextureSource:function(t,e){void 0===e&&(e=!1);var r=[];for(var i in this.frames)if("__BASE"!==i||e){var n=this.frames[i];n.sourceIndex===t&&r.push(n)}return r},getFrameBounds:function(t){void 0===t&&(t=0);for(var e=this.getFramesFromTextureSource(t),r=1/0,i=1/0,n=0,o=0,s=0;s<e.length;s++){var a=e[s];a.cutX<r&&(r=a.cutX),a.cutY<i&&(i=a.cutY),a.cutX+a.cutWidth>n&&(n=a.cutX+a.cutWidth),a.cutY+a.cutHeight>o&&(o=a.cutY+a.cutHeight)}return{x:r,y:i,width:n-r,height:o-i}},getFrameNames:function(t){void 0===t&&(t=!1);var e=Object.keys(this.frames);if(!t){var r=e.indexOf("__BASE");-1!==r&&e.splice(r,1)}return e},getSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var e=this.frames[t];return e?e.source.image:(console.warn(s,this.key,t),this.frames.__BASE.source.image)},getDataSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var e,r=this.frames[t];return r?e=r.sourceIndex:(console.warn(s,this.key,t),e=this.frames.__BASE.sourceIndex),this.dataSource[e].image},setDataSource:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var r=this.source[e];this.dataSource.push(new o(this,t[e],r.width,r.height))}},setFilter:function(t){var e;for(e=0;e<this.source.length;e++)this.source[e].setFilter(t);for(e=0;e<this.dataSource.length;e++)this.dataSource[e].setFilter(t)},destroy:function(){var t,e=this.source,r=this.dataSource;for(t=0;t<e.length;t++)e[t]&&e[t].destroy();for(t=0;t<r.length;t++)r[t]&&r[t].destroy();for(var i in this.frames){var n=this.frames[i];n&&n.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});t.exports=a},17130:(t,e,r)=>{var i=r(27919),n=r(57382),o=r(83419),s=r(40987),a=r(8054),h=r(81320),u=r(50792),c=r(69442),l=r(4327),f=r(8443),p=r(99584),d=r(35154),v=r(88571),y=r(41212),g=r(61309),m=r(87841),x=r(79237),b=new o({Extends:u,initialize:function(t){u.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=i.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new m,this.silentWarnings=!1,t.events.once(f.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(c.LOAD,this.updatePending,this),this.on(c.ERROR,this.updatePending,this);var t=this.game.config;this.addBase64("__DEFAULT",t.defaultImage),this.addBase64("__MISSING",t.missingImage),this.addBase64("__WHITE",t.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(f.DESTROY,this.destroy,this),this.game.events.once(f.SYSTEM_READY,(function(t){this.stamp=new v(t).setOrigin(0)}),this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(c.LOAD),this.off(c.ERROR),this.emit(c.READY))},checkKey:function(t){return!this.exists(t)||(this.silentWarnings||console.error("Texture key already in use: "+t),!1)},remove:function(t){if("string"==typeof t){if(!this.exists(t))return this.silentWarnings||console.warn("No texture found matching key: "+t),this;t=this.get(t)}var e=t.key;return this.list.hasOwnProperty(e)&&(t.destroy(),this.emit(c.REMOVE,e),this.emit(c.REMOVE_KEY+e)),this},removeKey:function(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function(t,e){if(this.checkKey(t)){var r=this,i=new Image;i.onerror=function(){r.emit(c.ERROR,t)},i.onload=function(){var e=r.create(t,i);g.Image(e,0),r.emit(c.ADD,t,e),r.emit(c.ADD_KEY+t,e),r.emit(c.LOAD,t,e)},i.src=e}return this},getBase64:function(t,e,r,n){void 0===r&&(r="image/png"),void 0===n&&(n=.92);var o="",s=this.getFrame(t,e);if(s&&(s.source.isRenderTexture||s.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(s){var a=s.canvasData,h=i.create2D(this,a.width,a.height),u=h.getContext("2d",{willReadFrequently:!0});a.width>0&&a.height>0&&u.drawImage(s.source.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height),o=h.toDataURL(r,n),i.remove(h)}return o},addImage:function(t,e,r){var i=null;return this.checkKey(t)&&(i=this.create(t,e),g.Image(i,0),r&&i.setDataSource(r),this.emit(c.ADD,t,i),this.emit(c.ADD_KEY+t,i)),i},addGLTexture:function(t,e){var r=null;if(this.checkKey(t)){var i=e.width,n=e.height;(r=this.create(t,e,i,n)).add("__BASE",0,0,0,i,n),this.emit(c.ADD,t,r),this.emit(c.ADD_KEY+t,r)}return r},addCompressedTexture:function(t,e,r){var i=null;if(this.checkKey(t)){if((i=this.create(t,e)).add("__BASE",0,0,0,e.width,e.height),r){var n=function(t,e,r){Array.isArray(r.textures)||Array.isArray(r.frames)?g.JSONArray(t,e,r):g.JSONHash(t,e,r)};if(Array.isArray(r))for(var o=0;o<r.length;o++)n(i,o,r[o]);else n(i,0,r)}this.emit(c.ADD,t,i),this.emit(c.ADD_KEY+t,i)}return i},addRenderTexture:function(t,e){var r=null;return this.checkKey(t)&&((r=this.create(t,e)).add("__BASE",0,0,0,e.width,e.height),this.emit(c.ADD,t,r),this.emit(c.ADD_KEY+t,r)),r},generate:function(t,e){if(this.checkKey(t)){var r=i.create(this,1,1);return e.canvas=r,p(e),this.addCanvas(t,r)}return null},createCanvas:function(t,e,r){if(void 0===e&&(e=256),void 0===r&&(r=256),this.checkKey(t)){var n=i.create(this,e,r,a.CANVAS,!0);return this.addCanvas(t,n)}return null},addCanvas:function(t,e,r){void 0===r&&(r=!1);var i=null;return r?i=new n(this,t,e,e.width,e.height):this.checkKey(t)&&(i=new n(this,t,e,e.width,e.height),this.list[t]=i,this.emit(c.ADD,t,i),this.emit(c.ADD_KEY+t,i)),i},addDynamicTexture:function(t,e,r){var i=null;return"string"!=typeof t||this.exists(t)?t=(i=t).key:i=new h(this,t,e,r),this.checkKey(t)?(this.list[t]=i,this.emit(c.ADD,t,i),this.emit(c.ADD_KEY+t,i)):i=null,i},addAtlas:function(t,e,r,i){return Array.isArray(r.textures)||Array.isArray(r.frames)?this.addAtlasJSONArray(t,e,r,i):this.addAtlasJSONHash(t,e,r,i)},addAtlasJSONArray:function(t,e,r,i){var n=null;if(e instanceof x?(t=e.key,n=e):this.checkKey(t)&&(n=this.create(t,e)),n){if(Array.isArray(r))for(var o=1===r.length,s=0;s<n.source.length;s++){var a=o?r[0]:r[s];g.JSONArray(n,s,a)}else g.JSONArray(n,0,r);i&&n.setDataSource(i),this.emit(c.ADD,t,n),this.emit(c.ADD_KEY+t,n)}return n},addAtlasJSONHash:function(t,e,r,i){var n=null;if(e instanceof x?(t=e.key,n=e):this.checkKey(t)&&(n=this.create(t,e)),n){if(Array.isArray(r))for(var o=0;o<r.length;o++)g.JSONHash(n,o,r[o]);else g.JSONHash(n,0,r);i&&n.setDataSource(i),this.emit(c.ADD,t,n),this.emit(c.ADD_KEY+t,n)}return n},addAtlasXML:function(t,e,r,i){var n=null;return e instanceof x?(t=e.key,n=e):this.checkKey(t)&&(n=this.create(t,e)),n&&(g.AtlasXML(n,0,r),i&&n.setDataSource(i),this.emit(c.ADD,t,n),this.emit(c.ADD_KEY+t,n)),n},addUnityAtlas:function(t,e,r,i){var n=null;return e instanceof x?(t=e.key,n=e):this.checkKey(t)&&(n=this.create(t,e)),n&&(g.UnityYAML(n,0,r),i&&n.setDataSource(i),this.emit(c.ADD,t,n),this.emit(c.ADD_KEY+t,n)),n},addSpriteSheet:function(t,e,r,i){var n=null;if(e instanceof x?(t=e.key,n=e):this.checkKey(t)&&(n=this.create(t,e)),n){var o=n.source[0].width,s=n.source[0].height;g.SpriteSheet(n,0,0,0,o,s,r),i&&n.setDataSource(i),this.emit(c.ADD,t,n),this.emit(c.ADD_KEY+t,n)}return n},addSpriteSheetFromAtlas:function(t,e){if(!this.checkKey(t))return null;var r=d(e,"atlas",null),i=d(e,"frame",null);if(r&&i){var n=this.get(r).get(i);if(n){var o=n.source.image;o||(o=n.source.glTexture);var s=this.create(t,o);return n.trimmed?g.SpriteSheetFromAtlas(s,n,e):g.SpriteSheet(s,0,n.cutX,n.cutY,n.cutWidth,n.cutHeight,e),this.emit(c.ADD,t,s),this.emit(c.ADD_KEY+t,s),s}}},addUint8Array:function(t,e,r,i){if(!this.checkKey(t)||e.length/4!=r*i)return null;var n=this.create(t,e,r,i);return n.add("__BASE",0,0,0,r,i),this.emit(c.ADD,t,n),this.emit(c.ADD_KEY+t,n),n},create:function(t,e,r,i){var n=null;return this.checkKey(t)&&(n=new x(this,t,e,r,i),this.list[t]=n),n},exists:function(t){return this.list.hasOwnProperty(t)},get:function(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:t instanceof x?t:t instanceof l?t.texture:this.list.__MISSING},cloneFrame:function(t,e){if(this.list[t])return this.list[t].get(e).clone()},getFrame:function(t,e){if(this.list[t])return this.list[t].get(e)},parseFrame:function(t){if(t)return"string"==typeof t?this.getFrame(t):Array.isArray(t)&&2===t.length?this.getFrame(t[0],t[1]):y(t)?this.getFrame(t.key,t.frame):t instanceof x?t.get():t instanceof l?t:void 0},getTextureKeys:function(){var t=[];for(var e in this.list)"__DEFAULT"!==e&&"__MISSING"!==e&&"__WHITE"!==e&&"__NORMAL"!==e&&t.push(e);return t},getPixel:function(t,e,r,i){var n=this.getFrame(r,i);if(n){t-=n.x,e-=n.y;var o=n.data.cut;if(t+=o.x,e+=o.y,t>=o.x&&t<o.r&&e>=o.y&&e<o.b){var a=this._tempContext;a.clearRect(0,0,1,1),a.drawImage(n.source.image,t,e,1,1,0,0,1,1);var h=a.getImageData(0,0,1,1);return new s(h.data[0],h.data[1],h.data[2],h.data[3])}}return null},getPixelAlpha:function(t,e,r,i){var n=this.getFrame(r,i);if(n){t-=n.x,e-=n.y;var o=n.data.cut;if(t+=o.x,e+=o.y,t>=o.x&&t<o.r&&e>=o.y&&e<o.b){var s=this._tempContext;return s.clearRect(0,0,1,1),s.drawImage(n.source.image,t,e,1,1,0,0,1,1),s.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(t,e,r){return this.list[e]&&(t.texture=this.list[e],t.frame=t.texture.get(r)),t},renameTexture:function(t,e){var r=this.get(t);return!(!r||t===e||(r.key=e,this.list[e]=r,delete this.list[t],0))},each:function(t,e){for(var r=[null],i=1;i<arguments.length;i++)r.push(arguments[i]);for(var n in this.list)r[0]=this.list[n],t.apply(e,r)},resetStamp:function(t,e){void 0===t&&(t=1),void 0===e&&(e=16777215);var r=this.stamp;return r.setCrop(),r.setPosition(0),r.setAngle(0),r.setScale(1),r.setAlpha(t),r.setTint(e),r.setTexture("__WHITE"),r},destroy:function(){for(var t in this.list)this.list[t].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,i.remove(this._tempCanvas)}});t.exports=b},11876:(t,e,r)=>{var i=r(27919),n=r(83419),o=r(50030),s=r(29795),a=r(82751),h=new n({initialize:function(t,e,r,i,n){void 0===n&&(n=!1);var h=t.manager.game;this.renderer=h.renderer,this.texture=t,this.source=e,this.image=e.compressed?null:e,this.compressionAlgorithm=e.compressed?e.format:null,this.resolution=1,this.width=r||e.naturalWidth||e.videoWidth||e.width||0,this.height=i||e.naturalHeight||e.videoHeight||e.height||0,this.scaleMode=s.DEFAULT,this.isCanvas=e instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&e instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===e.type||"DynamicTexture"===e.type,this.isGLTexture=e instanceof a,this.isPowerOf2=o(this.width,this.height),this.glTexture=null,this.flipY=n,this.init(h)},init:function(t){var e=this.renderer;if(e){var r=this.source;if(e.gl){var i=this.image,n=this.flipY,o=this.width,s=this.height,a=this.scaleMode;this.isCanvas?this.glTexture=e.createCanvasTexture(i,!1,n):this.isVideo?this.glTexture=e.createVideoTexture(i,!1,n):this.isRenderTexture?this.glTexture=e.createTextureFromSource(null,o,s,a):this.isGLTexture?this.glTexture=r:this.compressionAlgorithm?this.glTexture=e.createTextureFromSource(r,void 0,void 0,a):r instanceof Uint8Array?this.glTexture=e.createUint8ArrayTexture(r,o,s,a):this.glTexture=e.createTextureFromSource(i,o,s,a)}else this.isRenderTexture&&(this.image=r.canvas)}t.config.antialias||this.setFilter(1)},setFilter:function(t){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,t),this.scaleMode=t},setFlipY:function(t){return void 0===t&&(t=!0),t===this.flipY||(this.flipY=t,this.update()),this},update:function(){var t=this.renderer,e=this.image,r=this.flipY,i=t.gl;i&&this.isCanvas?t.updateCanvasTexture(e,this.glTexture,r):i&&this.isVideo&&t.updateVideoTexture(e,this.glTexture,r)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&i.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=h},19673:t=>{t.exports={LINEAR:0,NEAREST:1}},44538:t=>{t.exports="addtexture"},63486:t=>{t.exports="addtexture-"},94851:t=>{t.exports="onerror"},29099:t=>{t.exports="onload"},8678:t=>{t.exports="ready"},86415:t=>{t.exports="removetexture"},30879:t=>{t.exports="removetexture-"},69442:(t,e,r)=>{t.exports={ADD:r(44538),ADD_KEY:r(63486),ERROR:r(94851),LOAD:r(29099),READY:r(8678),REMOVE:r(86415),REMOVE_KEY:r(30879)}},27458:(t,e,r)=>{var i=r(79291),n=r(19673),o={CanvasTexture:r(57382),DynamicTexture:r(81320),Events:r(69442),FilterMode:n,Frame:r(4327),Parsers:r(61309),Texture:r(79237),TextureManager:r(17130),TextureSource:r(11876)};o=i(!1,o,n),t.exports=o},89905:t=>{t.exports=function(t,e,r){if(r.getElementsByTagName("TextureAtlas")){var i=t.source[e];t.add("__BASE",e,0,0,i.width,i.height);for(var n,o=r.getElementsByTagName("SubTexture"),s=0;s<o.length;s++){var a=o[s].attributes,h=a.name.value,u=parseInt(a.x.value,10),c=parseInt(a.y.value,10),l=parseInt(a.width.value,10),f=parseInt(a.height.value,10);if(n=t.add(h,e,u,c,l,f),a.frameX){var p=Math.abs(parseInt(a.frameX.value,10)),d=Math.abs(parseInt(a.frameY.value,10)),v=parseInt(a.frameWidth.value,10),y=parseInt(a.frameHeight.value,10);n.setTrim(l,f,p,d,v,y)}}return t}console.warn("Invalid Texture Atlas XML given")}},72893:t=>{t.exports=function(t,e){var r=t.source[e];return t.add("__BASE",e,0,0,r.width,r.height),t}},4832:t=>{t.exports=function(t,e){var r=t.source[e];return t.add("__BASE",e,0,0,r.width,r.height),t}},78566:(t,e,r)=>{var i=r(41786);t.exports=function(t,e,r){if(r.frames||r.textures){var n=t.source[e];t.add("__BASE",e,0,0,n.width,n.height);for(var o,s=Array.isArray(r.textures)?r.textures[e].frames:r.frames,a=0;a<s.length;a++){var h=s[a];if(o=t.add(h.filename,e,h.frame.x,h.frame.y,h.frame.w,h.frame.h)){h.trimmed&&o.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(o.rotated=!0,o.updateUVsInverted());var u=h.anchor||h.pivot;u&&(o.customPivot=!0,o.pivotX=u.x,o.pivotY=u.y),h.scale9Borders&&o.setScale9(h.scale9Borders.x,h.scale9Borders.y,h.scale9Borders.w,h.scale9Borders.h),o.customData=i(h)}else console.warn("Invalid atlas json, frame already exists: "+h.filename)}for(var c in r)"frames"!==c&&(Array.isArray(r[c])?t.customData[c]=r[c].slice(0):t.customData[c]=r[c]);return t}console.warn("Invalid Texture Atlas JSON Array")}},39711:(t,e,r)=>{var i=r(41786);t.exports=function(t,e,r){if(r.frames){var n=t.source[e];t.add("__BASE",e,0,0,n.width,n.height);var o,s=r.frames;for(var a in s)if(s.hasOwnProperty(a)){var h=s[a];if(o=t.add(a,e,h.frame.x,h.frame.y,h.frame.w,h.frame.h)){h.trimmed&&o.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(o.rotated=!0,o.updateUVsInverted());var u=h.anchor||h.pivot;u&&(o.customPivot=!0,o.pivotX=u.x,o.pivotY=u.y),h.scale9Borders&&o.setScale9(h.scale9Borders.x,h.scale9Borders.y,h.scale9Borders.w,h.scale9Borders.h),o.customData=i(h)}else console.warn("Invalid atlas json, frame already exists: "+a)}for(var c in r)"frames"!==c&&(Array.isArray(r[c])?t.customData[c]=r[c].slice(0):t.customData[c]=r[c]);return t}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},31403:t=>{t.exports=function(t){var e,r=[171,75,84,88,32,49,49,187,13,10,26,10],i=new Uint8Array(t,0,12);for(e=0;e<i.length;e++)if(i[e]!==r[e])return void console.warn("KTXParser - Invalid file format");var n=Uint32Array.BYTES_PER_ELEMENT,o=new DataView(t,12,13*n),s=67305985===o.getUint32(0,!0);if(0===o.getUint32(1*n,s)){var a=o.getUint32(4*n,s),h=o.getUint32(6*n,s),u=o.getUint32(7*n,s),c=Math.max(1,o.getUint32(11*n,s)),l=o.getUint32(12*n,s),f=new Array(c),p=64+l,d=h,v=u;for(e=0;e<c;e++){var y=new Int32Array(t,p,1)[0];p+=4,f[e]={data:new Uint8Array(t,p,y),width:d,height:v},d=Math.max(1,d>>1),v=Math.max(1,v>>1),p+=y}return{mipmaps:f,width:h,height:u,internalFormat:a,compressed:!0,generateMipmap:!1}}console.warn("KTXParser - Only compressed formats supported")}},82038:t=>{function e(t,e,r,i,n,o,s){return void 0===s&&(s=16),Math.floor((t+r)/n)*Math.floor((e+i)/o)*s}function r(t,e){return(t=Math.max(t,16))*(e=Math.max(e,8))/4}function i(t,e){return(t=Math.max(t,8))*(e=Math.max(e,8))/2}function n(t,e){return Math.ceil(t/4)*Math.ceil(e/4)*16}function o(t,r){return e(t,r,3,3,4,4,8)}function s(t,r){return e(t,r,3,3,4,4)}var a={0:{sizeFunc:r,glFormat:[35841]},1:{sizeFunc:r,glFormat:[35843]},2:{sizeFunc:i,glFormat:[35840]},3:{sizeFunc:i,glFormat:[35842]},6:{sizeFunc:o,glFormat:[36196]},7:{sizeFunc:o,glFormat:[33776,35916]},8:{sizeFunc:s,glFormat:[33777,35917]},9:{sizeFunc:s,glFormat:[33778,35918]},11:{sizeFunc:s,glFormat:[33779,35919]},14:{sizeFunc:n,glFormat:[36494,36495]},15:{sizeFunc:n,glFormat:[36492,36493]},22:{sizeFunc:o,glFormat:[37492,37493]},23:{sizeFunc:s,glFormat:[37496,37497]},24:{sizeFunc:o,glFormat:[37494,37495]},25:{sizeFunc:o,glFormat:[37488]},26:{sizeFunc:s,glFormat:[37490]},27:{sizeFunc:s,glFormat:[37808,37840]},28:{sizeFunc:function(t,r){return e(t,r,4,3,5,4)},glFormat:[37809,37841]},29:{sizeFunc:function(t,r){return e(t,r,4,4,5,5)},glFormat:[37810,37842]},30:{sizeFunc:function(t,r){return e(t,r,5,4,6,5)},glFormat:[37811,37843]},31:{sizeFunc:function(t,r){return e(t,r,5,5,6,6)},glFormat:[37812,37844]},32:{sizeFunc:function(t,r){return e(t,r,7,4,8,5)},glFormat:[37813,37845]},33:{sizeFunc:function(t,r){return e(t,r,7,5,8,6)},glFormat:[37814,37846]},34:{sizeFunc:function(t,r){return e(t,r,7,7,8,8)},glFormat:[37815,37847]},35:{sizeFunc:function(t,r){return e(t,r,9,4,10,5)},glFormat:[37816,37848]},36:{sizeFunc:function(t,r){return e(t,r,9,5,10,6)},glFormat:[37817,37849]},37:{sizeFunc:function(t,r){return e(t,r,9,7,10,8)},glFormat:[37818,37850]},38:{sizeFunc:function(t,r){return e(t,r,9,9,10,10)},glFormat:[37819,37851]},39:{sizeFunc:function(t,r){return e(t,r,11,9,12,10)},glFormat:[37820,37852]},40:{sizeFunc:function(t,r){return e(t,r,11,11,12,12)},glFormat:[37821,37853]}};t.exports=function(t){for(var e=new Uint32Array(t,0,13),r=55727696===e[0]?e[2]:e[3],i=e[4],n=a[r].glFormat[i],o=a[r].sizeFunc,s=e[11],h=e[7],u=e[6],c=52+e[12],l=new Uint8Array(t,c),f=new Array(s),p=0,d=h,v=u,y=0;y<s;y++){var g=o(d,v);f[y]={data:new Uint8Array(l.buffer,l.byteOffset+p,g),width:d,height:v},d=Math.max(1,d>>1),v=Math.max(1,v>>1),p+=g}return{mipmaps:f,width:h,height:u,internalFormat:n,compressed:!0,generateMipmap:!1}}},75549:(t,e,r)=>{var i=r(95540);t.exports=function(t,e,r,n,o,s,a){var h=i(a,"frameWidth",null),u=i(a,"frameHeight",h);if(null===h)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var c=t.source[e];t.add("__BASE",e,0,0,c.width,c.height);var l=i(a,"startFrame",0),f=i(a,"endFrame",-1),p=i(a,"margin",0),d=i(a,"spacing",0),v=Math.floor((o-p+d)/(h+d))*Math.floor((s-p+d)/(u+d));0===v&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",t.key),(l>v||l<-v)&&(l=0),l<0&&(l=v+l),(-1===f||f>v||f<l)&&(f=v);for(var y=p,g=p,m=0,x=0,b=0,w=0;w<v;w++){m=0,x=0;var E=y+h,T=g+u;E>o&&(m=E-o),T>s&&(x=T-s),w>=l&&w<=f&&(t.add(b,e,r+y,n+g,h-m,u-x),b++),(y+=h+d)+h>o&&(y=p,g+=u+d)}return t}},47534:(t,e,r)=>{var i=r(95540);t.exports=function(t,e,r){var n=i(r,"frameWidth",null),o=i(r,"frameHeight",n);if(!n)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var s=t.source[0];t.add("__BASE",0,0,0,s.width,s.height);var a,h=i(r,"startFrame",0),u=i(r,"endFrame",-1),c=i(r,"margin",0),l=i(r,"spacing",0),f=e.cutX,p=e.cutY,d=e.cutWidth,v=e.cutHeight,y=e.realWidth,g=e.realHeight,m=Math.floor((y-c+l)/(n+l)),x=Math.floor((g-c+l)/(o+l)),b=m*x,w=e.x,E=n-w,T=n-(y-d-w),S=e.y,_=o-S,O=o-(g-v-S);(h>b||h<-b)&&(h=0),h<0&&(h=b+h),-1!==u&&(b=h+(u+1));for(var P=c,M=c,A=0,L=0;L<x;L++){for(var C=0===L,R=L===x-1,k=0;k<m;k++){var F=0===k,I=k===m-1;if(a=t.add(A,0,f+P,p+M,n,o),F||C||I||R){var D=F?w:0,j=C?S:0,B=0,N=0;F&&(B+=n-E),I&&(B+=n-T),C&&(N+=o-_),R&&(N+=o-O);var G=n-B,U=o-N;a.cutWidth=G,a.cutHeight=U,a.setTrim(n,o,D,j,G,U)}P+=l,P+=F?E:I?T:n,A++}P=c,M+=l,M+=C?_:R?O:o}return t}},86147:t=>{var e=0,r=function(t,r,i,n){var o=e-n.y-n.height;t.add(i,r,n.x,o,n.width,n.height)};t.exports=function(t,i,n){var o=t.source[i];t.add("__BASE",i,0,0,o.width,o.height),e=o.height;for(var s=n.split("\n"),a=/^[ ]*(- )*(\w+)+[: ]+(.*)/,h="",u="",c={x:0,y:0,width:0,height:0},l=0;l<s.length;l++){var f=s[l].match(a);if(f){var p="- "===f[1],d=f[2],v=f[3];if(p&&(u!==h&&(r(t,i,u,c),h=u),c={x:0,y:0,width:0,height:0}),"name"!==d)switch(d){case"x":case"y":case"width":case"height":c[d]=parseInt(v,10)}else u=v}}return u!==h&&r(t,i,u,c),t}},55222:(t,e,r)=>{var i=r(50030);function n(t){for(var e=t.mipmaps,r=0;r<e.length;r++){var i=e[r].width,n=e[r].height;if((i<<r)%4!=0||(n<<r)%4!=0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+r+" is "+i+"x"+n),!1}return!0}function o(){return!0}function s(t){var e=t.mipmaps[0];return!!i(e.width,e.height)||(console.warn("PVRTC base dimensions must be power of two. Base level is "+e.width+"x"+e.height),!1)}function a(t){var e=t.mipmaps[0];return e.width%4==0&&e.height%4==0||(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+e.width+"x"+e.height+" pixels"),!1)}var h={37488:o,37489:o,37490:o,37491:o,37492:o,37493:o,37494:o,37495:o,37496:o,37497:o,36196:o,37808:o,37809:o,37810:o,37811:o,37812:o,37813:o,37814:o,37815:o,37816:o,37817:o,37818:o,37819:o,37820:o,37821:o,37840:o,37841:o,37842:o,37843:o,37844:o,37845:o,37846:o,37847:o,37848:o,37849:o,37850:o,37851:o,37852:o,37853:o,36492:n,36493:n,36494:n,36495:n,36283:n,36284:n,36285:n,36286:n,35840:s,35841:s,35842:s,35843:s,33776:n,33777:n,33778:n,33779:n,35916:a,35917:a,35918:a,35919:a};t.exports=function(t){for(var e=t.mipmaps,r=1;r<e.length;r++){var n=e[r].width,o=e[r].height;if(!i(n,o))return console.warn("Mip level "+r+" is not a power-of-two size: "+n+"x"+o),!1}var s=h[t.internalFormat];return s?s(t):(console.warn("No format checker found for internal format "+t.internalFormat+". Assuming valid."),!0)}},61309:(t,e,r)=>{t.exports={AtlasXML:r(89905),Canvas:r(72893),Image:r(4832),JSONArray:r(78566),JSONHash:r(39711),KTXParser:r(31403),PVRParser:r(82038),SpriteSheet:r(75549),SpriteSheetFromAtlas:r(47534),UnityYAML:r(86147)}},80341:t=>{t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},16536:(t,e,r)=>{var i=new(r(83419))({initialize:function(t,e,r,i,n,o,s){(void 0===r||r<=0)&&(r=32),(void 0===i||i<=0)&&(i=32),void 0===n&&(n=0),void 0===o&&(o=0),this.name=t,this.firstgid=0|e,this.imageWidth=0|r,this.imageHeight=0|i,this.imageMargin=0|n,this.imageSpacing=0|o,this.properties=s||{},this.images=[],this.total=0},containsImageIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},addImage:function(t,e){return this.images.push({gid:t,image:e}),this.total++,this}});t.exports=i},27462:(t,e,r)=>{var i=new(r(83419))({initialize:function(t){if(this.gids=[],void 0!==t)for(var e=0;e<t.length;++e)for(var r=t[e],i=0;i<r.total;++i)this.gids[r.firstgid+i]=r;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(t){this.gids=t?this._gids:void 0}},getTypeIncludingTile:function(t){if(void 0!==t.type&&""!==t.type)return t.type;if(this.gids&&void 0!==t.gid){var e=this.gids[t.gid];if(e){var r=e.getTileData(t.gid);if(r)return r.type}}},setTextureAndFrame:function(t,e,r,i){if(null===e&&this.gids&&void 0!==i.gid){var n=this.gids[i.gid];n&&(null===e&&void 0!==n.image&&(e=n.image.key),null===r&&(r=i.gid-n.firstgid),t.scene.textures.getFrame(e,r)||(e=null,r=null))}t.setTexture(e,r)},setPropertiesFromTiledObject:function(t,e){if(void 0!==this.gids&&void 0!==e.gid){var r=this.gids[e.gid];void 0!==r&&this.setFromJSON(t,r.getTileProperties(e.gid))}this.setFromJSON(t,e.properties)},setFromJSON:function(t,e){if(e)if(Array.isArray(e))for(var r=0;r<e.length;r++){var i=e[r];void 0!==t[i.name]?t[i.name]=i.value:t.setData(i.name,i.value)}else for(var n in e)void 0!==t[n]?t[n]=e[n]:t.setData(n,e[n])}});t.exports=i},31989:(t,e,r)=>{var i=r(80341),n=r(87010),o=r(46177),s=r(49075);t.exports=function(t,e,r,a,h,u,c,l){void 0===r&&(r=32),void 0===a&&(a=32),void 0===h&&(h=10),void 0===u&&(u=10),void 0===l&&(l=!1);var f=null;if(Array.isArray(c))f=o(void 0!==e?e:"map",i.ARRAY_2D,c,r,a,l);else if(void 0!==e){var p=t.cache.tilemap.get(e);p?f=o(e,p.format,p.data,r,a,l):console.warn("No map data found for key "+e)}return null===f&&(f=new n({tileWidth:r,tileHeight:a,width:h,height:u})),new s(t,f)}},23029:(t,e,r)=>{var i=r(83419),n=r(31401),o=r(91907),s=r(62644),a=r(93232),h=new i({Mixins:[n.AlphaSingle,n.Flip,n.Visible],initialize:function(t,e,r,i,n,o,s,a){this.layer=t,this.index=e,this.x=r,this.y=i,this.width=n,this.height=o,this.right,this.bottom,this.baseWidth=void 0!==s?s:n,this.baseHeight=void 0!==a?a:o,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(t,e){return!(t<this.pixelX||e<this.pixelY||t>this.right||e>this.bottom)},copy:function(t){return this.index=t.index,this.alpha=t.alpha,this.properties=s(t.properties),this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(t){var e=this.tilemapLayer;return e?e.tileToWorldXY(this.x,this.y,void 0,t).x:this.x*this.baseWidth},getRight:function(t){var e=this.tilemapLayer;return e?this.getLeft(t)+this.width*e.scaleX:this.getLeft(t)+this.width},getTop:function(t){var e=this.tilemapLayer;return e?e.tileToWorldXY(this.x,this.y,void 0,t).y:this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(t){var e=this.tilemapLayer;return e?this.getTop(t)+this.height*e.scaleY:this.getTop(t)+this.height},getBounds:function(t,e){return void 0===e&&(e=new a),e.x=this.getLeft(t),e.y=this.getTop(t),e.width=this.getRight(t)-e.x,e.height=this.getBottom(t)-e.y,e},getCenterX:function(t){return(this.getLeft(t)+this.getRight(t))/2},getCenterY:function(t){return(this.getTop(t)+this.getBottom(t))/2},intersects:function(t,e,r,i){return!(r<=this.pixelX||i<=this.pixelY||t>=this.right||e>=this.bottom)},isInteresting:function(t,e){return t&&e?this.canCollide||this.hasInterestingFace:t?this.collides:!!e&&this.hasInterestingFace},resetCollision:function(t){return void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(t,e,r,i,n){return void 0===e&&(e=t),void 0===r&&(r=t),void 0===i&&(i=t),void 0===n&&(n=!0),this.collideLeft=t,this.collideRight=e,this.collideUp=r,this.collideDown=i,this.faceLeft=t,this.faceRight=e,this.faceTop=r,this.faceBottom=i,n&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(t,e){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=e),this},setSize:function(t,e,r,i){return void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==r&&(this.baseWidth=r),void 0!==i&&(this.baseHeight=i),this.updatePixelXY(),this},updatePixelXY:function(){var t=this.layer.orientation;if(t===o.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(t===o.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(t===o.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(t===o.HEXAGONAL){var e,r,i=this.layer.staggerAxis,n=this.layer.staggerIndex,s=this.layer.hexSideLength;"y"===i?(r=(this.baseHeight-s)/2+s,this.pixelX="odd"===n?this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*r):"x"===i&&(e=(this.baseWidth-s)/2+s,this.pixelX=this.x*e,this.pixelY="odd"===n?this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var t=this.layer.tilemapLayer;if(t){var e=t.gidMap[this.index];if(e)return e}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var t=this.tilemapLayer;return t?t.tilemap:null}}});t.exports=h},49075:(t,e,r)=>{var i=r(84101),n=r(83419),o=r(39506),s=r(80341),a=r(95540),h=r(14977),u=r(27462),c=r(91907),l=r(36305),f=r(19133),p=r(68287),d=r(23029),v=r(81086),y=r(20442),g=r(33629),m=new n({initialize:function(t,e){this.scene=t,this.tileWidth=e.tileWidth,this.tileHeight=e.tileHeight,this.width=e.width,this.height=e.height,this.orientation=e.orientation,this.renderOrder=e.renderOrder,this.format=e.format,this.version=e.version,this.properties=e.properties,this.widthInPixels=e.widthInPixels,this.heightInPixels=e.heightInPixels,this.imageCollections=e.imageCollections,this.images=e.images,this.layers=e.layers,this.tiles=e.tiles,this.tilesets=e.tilesets,this.objects=e.objects,this.currentLayerIndex=0,this.hexSideLength=e.hexSideLength;var r=this.orientation;this._convert={WorldToTileXY:v.GetWorldToTileXYFunction(r),WorldToTileX:v.GetWorldToTileXFunction(r),WorldToTileY:v.GetWorldToTileYFunction(r),TileToWorldXY:v.GetTileToWorldXYFunction(r),TileToWorldX:v.GetTileToWorldXFunction(r),TileToWorldY:v.GetTileToWorldYFunction(r),GetTileCorners:v.GetTileCornersFunction(r)}},setRenderOrder:function(t){var e=["right-down","left-down","right-up","left-up"];return"number"==typeof t&&(t=e[t]),e.indexOf(t)>-1&&(this.renderOrder=t),this},addTilesetImage:function(t,e,r,n,o,a,h,u){if(void 0===t)return null;null==e&&(e=t);var c=this.scene.sys.textures;if(!c.exists(e))return console.warn('Texture key "%s" not found',e),null;var l=c.get(e),f=this.getTilesetIndex(t);if(null===f&&this.format===s.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',t,this.tilesets),null;var p=this.tilesets[f];return p?(p.setTileSize(r,n),p.setSpacing(o,a),p.setImage(l),p):(void 0===r&&(r=this.tileWidth),void 0===n&&(n=this.tileHeight),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===u&&(u={x:0,y:0}),(p=new g(t,h,r,n,o,a,void 0,void 0,u)).setImage(l),this.tilesets.push(p),this.tiles=i(this),p)},copy:function(t,e,r,i,n,o,s,a){return null!==(a=this.getLayer(a))?(v.Copy(t,e,r,i,n,o,s,a),this):null},createBlankLayer:function(t,e,r,i,n,o,s,a){if(void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=this.width),void 0===o&&(o=this.height),void 0===s&&(s=this.tileWidth),void 0===a&&(a=this.tileHeight),null!==this.getLayerIndex(t))return console.warn("Invalid Tilemap Layer ID: "+t),null;for(var u,c=new h({name:t,tileWidth:s,tileHeight:a,width:n,height:o,orientation:this.orientation}),l=0;l<o;l++){u=[];for(var f=0;f<n;f++)u.push(new d(c,-1,f,l,s,a,this.tileWidth,this.tileHeight));c.data.push(u)}this.layers.push(c),this.currentLayerIndex=this.layers.length-1;var p=new y(this.scene,this,this.currentLayerIndex,e,r,i);return p.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(p),p},createLayer:function(t,e,r,i){var n=this.getLayerIndex(t);if(null===n)return console.warn("Invalid Tilemap Layer ID: "+t),"string"==typeof t&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var o=this.layers[n];if(o.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+t),null;this.currentLayerIndex=n,void 0===r&&(r=o.x),void 0===i&&(i=o.y);var s=new y(this.scene,this,n,e,r,i);return s.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(s),s},createFromObjects:function(t,e,r){void 0===r&&(r=!0);var i=[],n=this.getObjectLayer(t);if(!n)return console.warn("createFromObjects: Invalid objectLayerName given: "+t),i;var s=new u(r?this.tilesets:void 0);Array.isArray(e)||(e=[e]);for(var h=n.objects,f=0;f<e.length;f++){var d,v=e[f],y=a(v,"id",null),g=a(v,"gid",null),m=a(v,"name",null),x=a(v,"type",null);s.enabled=!a(v,"ignoreTileset",null);for(var b=[],w=0;w<h.length;w++)d=h[w],(null===y&&null===g&&null===m&&null===x||null!==y&&d.id===y||null!==g&&d.gid===g||null!==m&&d.name===m||null!==x&&s.getTypeIncludingTile(d)===x)&&b.push(d);for(var E=a(v,"classType",p),T=a(v,"scene",this.scene),S=a(v,"container",null),_=a(v,"key",null),O=a(v,"frame",null),P=0;P<b.length;P++){d=b[P];var M=new E(T);if(M.setName(d.name),M.setPosition(d.x,d.y),s.setTextureAndFrame(M,_,O,d),d.width&&(M.displayWidth=d.width),d.height&&(M.displayHeight=d.height),this.orientation===c.ISOMETRIC){var A=this.tileWidth/this.tileHeight,L={x:M.x-M.y,y:(M.x+M.y)/A};M.x=L.x,M.y=L.y}var C={x:M.originX*d.width,y:(M.originY-(d.gid?1:0))*d.height};if(d.rotation){var R=o(d.rotation);l(C,R),M.rotation=R}M.x+=C.x,M.y+=C.y,void 0===d.flippedHorizontal&&void 0===d.flippedVertical||M.setFlip(d.flippedHorizontal,d.flippedVertical),d.visible||(M.visible=!1),s.setPropertiesFromTiledObject(M,d),S?S.add(M):T.add.existing(M),i.push(M)}}return i},createFromTiles:function(t,e,r,i,n,o){return null===(o=this.getLayer(o))?null:v.CreateFromTiles(t,e,r,i,n,o)},fill:function(t,e,r,i,n,o,s){return void 0===o&&(o=!0),null===(s=this.getLayer(s))?null:(v.Fill(t,e,r,i,n,o,s),this)},filterObjects:function(t,e,r){if("string"==typeof t){var i=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+i),null}return t.objects.filter(e,r)},filterTiles:function(t,e,r,i,n,o,s,a){return null===(a=this.getLayer(a))?null:v.FilterTiles(t,e,r,i,n,o,s,a)},findByIndex:function(t,e,r,i){return null===(i=this.getLayer(i))?null:v.FindByIndex(t,e,r,i)},findObject:function(t,e,r){if("string"==typeof t){var i=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+i),null}return t.objects.find(e,r)||null},findTile:function(t,e,r,i,n,o,s,a){return null===(a=this.getLayer(a))?null:v.FindTile(t,e,r,i,n,o,s,a)},forEachTile:function(t,e,r,i,n,o,s,a){return null===(a=this.getLayer(a))?null:(v.ForEachTile(t,e,r,i,n,o,s,a),this)},getImageIndex:function(t){return this.getIndex(this.images,t)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map((function(t){return t.name})):[]},getIndex:function(t,e){for(var r=0;r<t.length;r++)if(t[r].name===e)return r;return null},getLayer:function(t){var e=this.getLayerIndex(t);return null!==e?this.layers[e]:null},getObjectLayer:function(t){var e=this.getIndex(this.objects,t);return null!==e?this.objects[e]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map((function(t){return t.name})):[]},getLayerIndex:function(t){return void 0===t?this.currentLayerIndex:"string"==typeof t?this.getLayerIndexByName(t):"number"==typeof t&&t<this.layers.length?t:t instanceof y&&t.tilemap===this?t.layerIndex:null},getLayerIndexByName:function(t){return this.getIndex(this.layers,t)},getTileAt:function(t,e,r,i){return null===(i=this.getLayer(i))?null:v.GetTileAt(t,e,r,i)},getTileAtWorldXY:function(t,e,r,i,n){return null===(n=this.getLayer(n))?null:v.GetTileAtWorldXY(t,e,r,i,n)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map((function(t){return t.name})):[]},getTilesWithin:function(t,e,r,i,n,o){return null===(o=this.getLayer(o))?null:v.GetTilesWithin(t,e,r,i,n,o)},getTilesWithinShape:function(t,e,r,i){return null===(i=this.getLayer(i))?null:v.GetTilesWithinShape(t,e,r,i)},getTilesWithinWorldXY:function(t,e,r,i,n,o,s){return null===(s=this.getLayer(s))?null:v.GetTilesWithinWorldXY(t,e,r,i,n,o,s)},getTileset:function(t){var e=this.getIndex(this.tilesets,t);return null!==e?this.tilesets[e]:null},getTilesetIndex:function(t){return this.getIndex(this.tilesets,t)},hasTileAt:function(t,e,r){return null===(r=this.getLayer(r))?null:v.HasTileAt(t,e,r)},hasTileAtWorldXY:function(t,e,r,i){return null===(i=this.getLayer(i))?null:v.HasTileAtWorldXY(t,e,r,i)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(t){this.setLayer(t)}},putTileAt:function(t,e,r,i,n){return void 0===i&&(i=!0),null===(n=this.getLayer(n))?null:v.PutTileAt(t,e,r,i,n)},putTileAtWorldXY:function(t,e,r,i,n,o){return void 0===i&&(i=!0),null===(o=this.getLayer(o))?null:v.PutTileAtWorldXY(t,e,r,i,n,o)},putTilesAt:function(t,e,r,i,n){return void 0===i&&(i=!0),null===(n=this.getLayer(n))?null:(v.PutTilesAt(t,e,r,i,n),this)},randomize:function(t,e,r,i,n,o){return null===(o=this.getLayer(o))?null:(v.Randomize(t,e,r,i,n,o),this)},calculateFacesAt:function(t,e,r){return null===(r=this.getLayer(r))?null:(v.CalculateFacesAt(t,e,r),this)},calculateFacesWithin:function(t,e,r,i,n){return null===(n=this.getLayer(n))?null:(v.CalculateFacesWithin(t,e,r,i,n),this)},removeLayer:function(t){var e=this.getLayerIndex(t);if(null!==e){f(this.layers,e);for(var r=e;r<this.layers.length;r++)this.layers[r].tilemapLayer&&this.layers[r].tilemapLayer.layerIndex--;return this.currentLayerIndex===e&&(this.currentLayerIndex=0),this}return null},destroyLayer:function(t){var e=this.getLayerIndex(t);return null!==e?((t=this.layers[e]).tilemapLayer.destroy(),f(this.layers,e),this.currentLayerIndex===e&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var t=this.layers,e=0;e<t.length;e++)t[e].tilemapLayer&&t[e].tilemapLayer.destroy(!1);return t.length=0,this.currentLayerIndex=0,this},removeTile:function(t,e,r){void 0===e&&(e=-1),void 0===r&&(r=!0);var i=[];Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var o=t[n];i.push(this.removeTileAt(o.x,o.y,!0,r,o.tilemapLayer)),e>-1&&this.putTileAt(e,o.x,o.y,r,o.tilemapLayer)}return i},removeTileAt:function(t,e,r,i,n){return void 0===r&&(r=!0),void 0===i&&(i=!0),null===(n=this.getLayer(n))?null:v.RemoveTileAt(t,e,r,i,n)},removeTileAtWorldXY:function(t,e,r,i,n,o){return void 0===r&&(r=!0),void 0===i&&(i=!0),null===(o=this.getLayer(o))?null:v.RemoveTileAtWorldXY(t,e,r,i,n,o)},renderDebug:function(t,e,r){return null===(r=this.getLayer(r))?null:(this.orientation===c.ORTHOGONAL&&v.RenderDebug(t,e,r),this)},renderDebugFull:function(t,e){for(var r=this.layers,i=0;i<r.length;i++)v.RenderDebug(t,e,r[i]);return this},replaceByIndex:function(t,e,r,i,n,o,s){return null===(s=this.getLayer(s))?null:(v.ReplaceByIndex(t,e,r,i,n,o,s),this)},setCollision:function(t,e,r,i,n){return void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===n&&(n=!0),null===(i=this.getLayer(i))?null:(v.SetCollision(t,e,r,i,n),this)},setCollisionBetween:function(t,e,r,i,n){return void 0===r&&(r=!0),void 0===i&&(i=!0),null===(n=this.getLayer(n))?null:(v.SetCollisionBetween(t,e,r,i,n),this)},setCollisionByProperty:function(t,e,r,i){return void 0===e&&(e=!0),void 0===r&&(r=!0),null===(i=this.getLayer(i))?null:(v.SetCollisionByProperty(t,e,r,i),this)},setCollisionByExclusion:function(t,e,r,i){return void 0===e&&(e=!0),void 0===r&&(r=!0),null===(i=this.getLayer(i))?null:(v.SetCollisionByExclusion(t,e,r,i),this)},setCollisionFromCollisionGroup:function(t,e,r){return void 0===t&&(t=!0),void 0===e&&(e=!0),null===(r=this.getLayer(r))?null:(v.SetCollisionFromCollisionGroup(t,e,r),this)},setTileIndexCallback:function(t,e,r,i){return null===(i=this.getLayer(i))?null:(v.SetTileIndexCallback(t,e,r,i),this)},setTileLocationCallback:function(t,e,r,i,n,o,s){return null===(s=this.getLayer(s))?null:(v.SetTileLocationCallback(t,e,r,i,n,o,s),this)},setLayer:function(t){var e=this.getLayerIndex(t);return null!==e&&(this.currentLayerIndex=e),this},setBaseTileSize:function(t,e){this.tileWidth=t,this.tileHeight=e,this.widthInPixels=this.width*t,this.heightInPixels=this.height*e;for(var r=0;r<this.layers.length;r++){this.layers[r].baseTileWidth=t,this.layers[r].baseTileHeight=e;for(var i=this.layers[r].data,n=this.layers[r].width,o=this.layers[r].height,s=0;s<o;s++)for(var a=0;a<n;a++){var h=i[s][a];null!==h&&h.setSize(void 0,void 0,t,e)}}return this},setLayerTileSize:function(t,e,r){if(null===(r=this.getLayer(r)))return this;r.tileWidth=t,r.tileHeight=e;for(var i=r.data,n=r.width,o=r.height,s=0;s<o;s++)for(var a=0;a<n;a++){var h=i[s][a];null!==h&&h.setSize(t,e)}return this},shuffle:function(t,e,r,i,n){return null===(n=this.getLayer(n))?null:(v.Shuffle(t,e,r,i,n),this)},swapByIndex:function(t,e,r,i,n,o,s){return null===(s=this.getLayer(s))?null:(v.SwapByIndex(t,e,r,i,n,o,s),this)},tileToWorldX:function(t,e,r){return null===(r=this.getLayer(r))?null:this._convert.TileToWorldX(t,e,r)},tileToWorldY:function(t,e,r){return null===(r=this.getLayer(r))?null:this._convert.TileToWorldY(t,e,r)},tileToWorldXY:function(t,e,r,i,n){return null===(n=this.getLayer(n))?null:this._convert.TileToWorldXY(t,e,r,i,n)},getTileCorners:function(t,e,r,i){return null===(i=this.getLayer(i))?null:this._convert.GetTileCorners(t,e,r,i)},weightedRandomize:function(t,e,r,i,n,o){return null===(o=this.getLayer(o))?null:(v.WeightedRandomize(e,r,i,n,t,o),this)},worldToTileX:function(t,e,r,i){return null===(i=this.getLayer(i))?null:this._convert.WorldToTileX(t,e,r,i)},worldToTileY:function(t,e,r,i){return null===(i=this.getLayer(i))?null:this._convert.WorldToTileY(t,e,r,i)},worldToTileXY:function(t,e,r,i,n,o){return null===(o=this.getLayer(o))?null:this._convert.WorldToTileXY(t,e,r,i,n,o)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});t.exports=m},45939:(t,e,r)=>{var i=r(44603),n=r(31989);i.register("tilemap",(function(t){var e=void 0!==t?t:{};return n(this.scene,e.key,e.tileWidth,e.tileHeight,e.width,e.height,e.data,e.insertNull)}))},46029:(t,e,r)=>{var i=r(39429),n=r(31989);i.register("tilemap",(function(t,e,r,i,o,s,a){return null===t&&(t=void 0),null===e&&(e=void 0),null===r&&(r=void 0),null===i&&(i=void 0),null===o&&(o=void 0),n(this.scene,t,e,r,i,o,s,a)}))},20442:(t,e,r)=>{var i=r(83419),n=r(78389),o=r(31401),s=r(95643),a=r(81086),h=r(19218),u=r(26099),c=new i({Extends:s,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.Transform,o.Visible,o.ScrollFactor,n,h],initialize:function(t,e,r,i,n,o){s.call(this,t,"TilemapLayer"),this.isTilemap=!0,this.tilemap=e,this.layerIndex=r,this.layer=e.layers[r],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new u,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(i),this.setAlpha(this.layer.alpha),this.setPosition(n,o),this.setOrigin(0,0),this.setSize(e.tileWidth*this.layer.width,e.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(t){var e=[],r=[],i=this.tilemap;Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var o=t[n];if("string"==typeof o&&(o=i.getTileset(o)),o){r.push(o);for(var s=o.firstgid,a=0;a<o.total;a++)e[s+a]=o}}this.gidMap=e,this.tileset=r},setRenderOrder:function(t){return"string"==typeof t&&(t=["right-down","left-down","right-up","left-up"].indexOf(t)),t>=0&&t<4&&(this._renderOrder=t),this},calculateFacesAt:function(t,e){return a.CalculateFacesAt(t,e,this.layer),this},calculateFacesWithin:function(t,e,r,i){return a.CalculateFacesWithin(t,e,r,i,this.layer),this},createFromTiles:function(t,e,r,i,n){return a.CreateFromTiles(t,e,r,i,n,this.layer)},cull:function(t){return this.cullCallback(this.layer,t,this.culledTiles,this._renderOrder)},copy:function(t,e,r,i,n,o,s){return a.Copy(t,e,r,i,n,o,s,this.layer),this},fill:function(t,e,r,i,n,o){return a.Fill(t,e,r,i,n,o,this.layer),this},filterTiles:function(t,e,r,i,n,o,s){return a.FilterTiles(t,e,r,i,n,o,s,this.layer)},findByIndex:function(t,e,r){return a.FindByIndex(t,e,r,this.layer)},findTile:function(t,e,r,i,n,o,s){return a.FindTile(t,e,r,i,n,o,s,this.layer)},forEachTile:function(t,e,r,i,n,o,s){return a.ForEachTile(t,e,r,i,n,o,s,this.layer),this},setTint:function(t,e,r,i,n,o){return void 0===t&&(t=16777215),this.forEachTile((function(e){e.tint=t,e.tintFill=!1}),this,e,r,i,n,o)},setTintFill:function(t,e,r,i,n,o){return void 0===t&&(t=16777215),this.forEachTile((function(e){e.tint=t,e.tintFill=!0}),this,e,r,i,n,o)},getTileAt:function(t,e,r){return a.GetTileAt(t,e,r,this.layer)},getTileAtWorldXY:function(t,e,r,i){return a.GetTileAtWorldXY(t,e,r,i,this.layer)},getIsoTileAtWorldXY:function(t,e,r,i,n){void 0===r&&(r=!0);var o=this.tempVec;return a.IsometricWorldToTileXY(t,e,!0,o,n,this.layer,r),this.getTileAt(o.x,o.y,i)},getTilesWithin:function(t,e,r,i,n){return a.GetTilesWithin(t,e,r,i,n,this.layer)},getTilesWithinShape:function(t,e,r){return a.GetTilesWithinShape(t,e,r,this.layer)},getTilesWithinWorldXY:function(t,e,r,i,n,o){return a.GetTilesWithinWorldXY(t,e,r,i,n,o,this.layer)},hasTileAt:function(t,e){return a.HasTileAt(t,e,this.layer)},hasTileAtWorldXY:function(t,e,r){return a.HasTileAtWorldXY(t,e,r,this.layer)},putTileAt:function(t,e,r,i){return a.PutTileAt(t,e,r,i,this.layer)},putTileAtWorldXY:function(t,e,r,i,n){return a.PutTileAtWorldXY(t,e,r,i,n,this.layer)},putTilesAt:function(t,e,r,i){return a.PutTilesAt(t,e,r,i,this.layer),this},randomize:function(t,e,r,i,n){return a.Randomize(t,e,r,i,n,this.layer),this},removeTileAt:function(t,e,r,i){return a.RemoveTileAt(t,e,r,i,this.layer)},removeTileAtWorldXY:function(t,e,r,i,n){return a.RemoveTileAtWorldXY(t,e,r,i,n,this.layer)},renderDebug:function(t,e){return a.RenderDebug(t,e,this.layer),this},replaceByIndex:function(t,e,r,i,n,o){return a.ReplaceByIndex(t,e,r,i,n,o,this.layer),this},setSkipCull:function(t){return void 0===t&&(t=!0),this.skipCull=t,this},setCullPadding:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=1),this.cullPaddingX=t,this.cullPaddingY=e,this},setCollision:function(t,e,r,i){return a.SetCollision(t,e,r,this.layer,i),this},setCollisionBetween:function(t,e,r,i){return a.SetCollisionBetween(t,e,r,i,this.layer),this},setCollisionByProperty:function(t,e,r){return a.SetCollisionByProperty(t,e,r,this.layer),this},setCollisionByExclusion:function(t,e,r){return a.SetCollisionByExclusion(t,e,r,this.layer),this},setCollisionFromCollisionGroup:function(t,e){return a.SetCollisionFromCollisionGroup(t,e,this.layer),this},setTileIndexCallback:function(t,e,r){return a.SetTileIndexCallback(t,e,r,this.layer),this},setTileLocationCallback:function(t,e,r,i,n,o){return a.SetTileLocationCallback(t,e,r,i,n,o,this.layer),this},shuffle:function(t,e,r,i){return a.Shuffle(t,e,r,i,this.layer),this},swapByIndex:function(t,e,r,i,n,o){return a.SwapByIndex(t,e,r,i,n,o,this.layer),this},tileToWorldX:function(t,e){return this.tilemap.tileToWorldX(t,e,this)},tileToWorldY:function(t,e){return this.tilemap.tileToWorldY(t,e,this)},tileToWorldXY:function(t,e,r,i){return this.tilemap.tileToWorldXY(t,e,r,i,this)},getTileCorners:function(t,e,r){return this.tilemap.getTileCorners(t,e,r,this)},weightedRandomize:function(t,e,r,i,n){return a.WeightedRandomize(e,r,i,n,t,this.layer),this},worldToTileX:function(t,e,r){return this.tilemap.worldToTileX(t,e,r,this)},worldToTileY:function(t,e,r){return this.tilemap.worldToTileY(t,e,r,this)},worldToTileXY:function(t,e,r,i,n){return this.tilemap.worldToTileXY(t,e,r,i,n,this)},destroy:function(t){void 0===t&&(t=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],s.prototype.destroy.call(this))}});t.exports=c},16153:(t,e,r)=>{var i=r(61340),n=new i,o=new i,s=new i;t.exports=function(t,e,r,i){var a=e.cull(r),h=a.length,u=r.alpha*e.alpha;if(!(0===h||u<=0)){var c=n,l=o,f=s;l.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),c.copyFrom(r.matrix);var p=t.currentContext,d=e.gidMap;p.save(),i?(c.multiplyWithOffset(i,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),l.e=e.x,l.f=e.y,c.multiply(l,f),f.copyToContext(p)):(l.e-=r.scrollX*e.scrollFactorX,l.f-=r.scrollY*e.scrollFactorY,l.copyToContext(p)),(!t.antialias||e.scaleX>1||e.scaleY>1)&&(p.imageSmoothingEnabled=!1);for(var v=0;v<h;v++){var y=a[v],g=d[y.index];if(g){var m=g.image.getSourceImage(),x=g.getTileTextureCoordinates(y.index),b=g.tileWidth,w=g.tileHeight;if(null!==x&&0!==b&&0!==w){var E=.5*b,T=.5*w;x.x+=g.tileOffset.x,x.y+=g.tileOffset.y,p.save(),p.translate(y.pixelX+E,y.pixelY+T),0!==y.rotation&&p.rotate(y.rotation),(y.flipX||y.flipY)&&p.scale(y.flipX?-1:1,y.flipY?-1:1),p.globalAlpha=u*y.alpha,p.drawImage(m,x.x,x.y,b,w,-E,-T,b,w),p.restore()}}}p.restore()}}},19218:(t,e,r)=>{var i,n,o=r(29747);i=r(99558),n=r(16153),t.exports={renderWebGL:i,renderCanvas:n}},99558:(t,e,r)=>{var i=r(70554);t.exports=function(t,e,r){var n=e.cull(r),o=n.length,s=r.alpha*e.alpha;if(!(0===o||s<=0)){var a=e.gidMap,h=t.pipelines.set(e.pipeline,e),u=i.getTintAppendFloatAlpha,c=e.scrollFactorX,l=e.scrollFactorY,f=e.x,p=e.y,d=e.scaleX,v=e.scaleY;t.pipelines.preBatch(e);for(var y=0;y<o;y++){var g=n[y],m=a[g.index];if(m){var x=m.getTileTextureCoordinates(g.index),b=m.tileWidth,w=m.tileHeight;if(x&&0!==b&&0!==w){var E=.5*b,T=.5*w,S=m.glTexture,_=h.setTexture2D(S,e),O=b,P=w,M=x.x,A=x.y,L=m.tileOffset.x,C=m.tileOffset.y,R=u(g.tint,s*g.alpha);h.batchTexture(e,S,S.width,S.height,f+g.pixelX*d+(E*d-L),p+g.pixelY*v+(T*v-C),b,w,d,v,g.rotation,g.flipX,g.flipY,c,l,E,T,M,A,O,P,R,R,R,R,g.tintFill,0,0,r,null,!0,_,!0)}}}t.pipelines.postBatch(e)}}},33629:(t,e,r)=>{var i=r(83419),n=r(26099),o=new i({initialize:function(t,e,r,i,o,s,a,h,u){(void 0===r||r<=0)&&(r=32),(void 0===i||i<=0)&&(i=32),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a={}),void 0===h&&(h={}),this.name=t,this.firstgid=e,this.tileWidth=r,this.tileHeight=i,this.tileMargin=o,this.tileSpacing=s,this.tileProperties=a,this.tileData=h,this.tileOffset=new n,void 0!==u&&this.tileOffset.set(u.x,u.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(t){return this.containsTileIndex(t)?this.tileProperties[t-this.firstgid]:null},getTileData:function(t){return this.containsTileIndex(t)?this.tileData[t-this.firstgid]:null},getTileCollisionGroup:function(t){var e=this.getTileData(t);return e&&e.objectgroup?e.objectgroup:null},containsTileIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},getTileTextureCoordinates:function(t){return this.containsTileIndex(t)?this.texCoordinates[t-this.firstgid]:null},setImage:function(t){this.image=t;var e=t.get(),r=t.getFrameBounds();return this.glTexture=e.source.glTexture,e.width>r.width||e.height>r.height?this.updateTileData(e.width,e.height):this.updateTileData(r.width,r.height,r.x,r.y),this},setTileSize:function(t,e){return void 0!==t&&(this.tileWidth=t),void 0!==e&&(this.tileHeight=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(t,e){return void 0!==t&&(this.tileMargin=t),void 0!==e&&(this.tileSpacing=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var n=(e-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),o=(t-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);n%1==0&&o%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),n=Math.floor(n),o=Math.floor(o),this.rows=n,this.columns=o,this.total=n*o,this.texCoordinates.length=0;for(var s=this.tileMargin+r,a=this.tileMargin+i,h=0;h<this.rows;h++){for(var u=0;u<this.columns;u++)this.texCoordinates.push({x:s,y:a}),s+=this.tileWidth+this.tileSpacing;s=this.tileMargin+r,a+=this.tileHeight+this.tileSpacing}return this}});t.exports=o},72023:(t,e,r)=>{var i=r(7423);t.exports=function(t,e,r){var n=i(t,e,!0,r),o=i(t,e-1,!0,r),s=i(t,e+1,!0,r),a=i(t-1,e,!0,r),h=i(t+1,e,!0,r),u=n&&n.collides;return u&&(n.faceTop=!0,n.faceBottom=!0,n.faceLeft=!0,n.faceRight=!0),o&&o.collides&&(u&&(n.faceTop=!1),o.faceBottom=!u),s&&s.collides&&(u&&(n.faceBottom=!1),s.faceTop=!u),a&&a.collides&&(u&&(n.faceLeft=!1),a.faceRight=!u),h&&h.collides&&(u&&(n.faceRight=!1),h.faceLeft=!u),n&&!n.collides&&n.resetFaces(),n}},42573:(t,e,r)=>{var i=r(7423),n=r(7386);t.exports=function(t,e,r,o,s){for(var a=null,h=null,u=null,c=null,l=n(t,e,r,o,null,s),f=0;f<l.length;f++){var p=l[f];p&&(p.collides?(a=i(p.x,p.y-1,!0,s),h=i(p.x,p.y+1,!0,s),u=i(p.x-1,p.y,!0,s),c=i(p.x+1,p.y,!0,s),p.faceTop=!a||!a.collides,p.faceBottom=!h||!h.collides,p.faceLeft=!u||!u.collides,p.faceRight=!c||!c.collides):p.resetFaces())}}},33528:(t,e,r)=>{var i=new(r(26099));t.exports=function(t,e,r,n){var o=r.tilemapLayer,s=o.cullPaddingX,a=o.cullPaddingY,h=o.tilemap.tileToWorldXY(t,e,i,n,o);return h.x>n.worldView.x+o.scaleX*r.tileWidth*(-s-.5)&&h.x<n.worldView.right+o.scaleX*r.tileWidth*(s-.5)&&h.y>n.worldView.y+o.scaleY*r.tileHeight*(-a-1)&&h.y<n.worldView.bottom+o.scaleY*r.tileHeight*(a-.5)}},1785:(t,e,r)=>{var i=r(42573),n=r(7386),o=r(62991),s=r(23029);t.exports=function(t,e,r,a,h,u,c,l){void 0===c&&(c=!0);var f=n(t,e,r,a,null,l),p=[];f.forEach((function(t){var e=new s(t.layer,t.index,t.x,t.y,t.width,t.height,t.baseWidth,t.baseHeight);e.copy(t),p.push(e)}));for(var d=h-t,v=u-e,y=0;y<p.length;y++){var g=p[y],m=g.x+d,x=g.y+v;o(m,x,l)&&l.data[x][m]&&(g.x=m,g.y=x,g.updatePixelXY(),l.data[x][m]=g)}c&&i(h-1,u-1,r+2,a+2,l),f.length=0,p.length=0}},78419:(t,e,r)=>{var i=r(62644),n=r(7386),o=r(27987);t.exports=function(t,e,r,s,a,h){r||(r={}),Array.isArray(t)||(t=[t]);var u=h.tilemapLayer;s||(s=u.scene),a||(a=s.cameras.main);var c,l=h.width,f=h.height,p=n(0,0,l,f,null,h),d=[],v=function(t,e,r){for(var i=0;i<r.length;i++){var n=r[i];t.hasOwnProperty(n)||(t[n]=e[n])}};for(c=0;c<p.length;c++){var y=p[c],g=i(r);if(-1!==t.indexOf(y.index)){var m=u.tileToWorldXY(y.x,y.y,void 0,a,h);g.x=m.x,g.y=m.y,v(g,y,["rotation","flipX","flipY","alpha","visible","tint"]),g.hasOwnProperty("origin")||(g.x+=.5*y.width,g.y+=.5*y.height),g.hasOwnProperty("useSpriteSheet")&&(g.key=y.tileset.image,g.frame=y.index-1),d.push(s.make.sprite(g))}}if(Array.isArray(e))for(c=0;c<t.length;c++)o(t[c],e[c],0,0,l,f,h);else if(null!==e)for(c=0;c<t.length;c++)o(t[c],e,0,0,l,f,h);return d}},19545:(t,e,r)=>{var i=r(87841),n=r(63448),o=r(56583),s=new i;t.exports=function(t,e){var r=t.tilemapLayer.tilemap,i=t.tilemapLayer,a=Math.floor(r.tileWidth*i.scaleX),h=Math.floor(r.tileHeight*i.scaleY),u=o(e.worldView.x-i.x,a,0,!0)-i.cullPaddingX,c=n(e.worldView.right-i.x,a,0,!0)+i.cullPaddingX,l=o(e.worldView.y-i.y,h,0,!0)-i.cullPaddingY,f=n(e.worldView.bottom-i.y,h,0,!0)+i.cullPaddingY;return s.setTo(u,l,c-u,f-l)}},30003:(t,e,r)=>{var i=r(19545),n=r(32483);t.exports=function(t,e,r,o){void 0===r&&(r=[]),void 0===o&&(o=0),r.length=0;var s=t.tilemapLayer,a=i(t,e);return(s.skipCull||1!==s.scrollFactorX||1!==s.scrollFactorY)&&(a.left=0,a.right=t.width,a.top=0,a.bottom=t.height),n(t,a,o,r),r}},35137:(t,e,r)=>{var i=r(7386),n=r(42573),o=r(20576);t.exports=function(t,e,r,s,a,h,u){for(var c=-1!==u.collideIndexes.indexOf(t),l=i(e,r,s,a,null,u),f=0;f<l.length;f++)l[f].index=t,o(l[f],c);h&&n(e-1,r-1,s+2,a+2,u)}},40253:(t,e,r)=>{var i=r(7386);t.exports=function(t,e,r,n,o,s,a,h){return i(r,n,o,s,a,h).filter(t,e)}},52692:t=>{t.exports=function(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=!1);var n,o,s,a=0;if(r){for(o=i.height-1;o>=0;o--)for(n=i.width-1;n>=0;n--)if((s=i.data[o][n])&&s.index===t){if(a===e)return s;a+=1}}else for(o=0;o<i.height;o++)for(n=0;n<i.width;n++)if((s=i.data[o][n])&&s.index===t){if(a===e)return s;a+=1}return null}},66151:(t,e,r)=>{var i=r(7386);t.exports=function(t,e,r,n,o,s,a,h){return i(r,n,o,s,a,h).find(t,e)||null}},97560:(t,e,r)=>{var i=r(7386);t.exports=function(t,e,r,n,o,s,a,h){i(r,n,o,s,a,h).forEach(t,e)}},43305:(t,e,r)=>{var i=r(91907),n=r(30003),o=r(9474),s=r(14018),a=r(29747),h=r(54503);t.exports=function(t){return t===i.ORTHOGONAL?n:t===i.HEXAGONAL?o:t===i.STAGGERED?h:t===i.ISOMETRIC?s:a}},7423:(t,e,r)=>{var i=r(62991);t.exports=function(t,e,r,n){if(void 0===r&&(r=!1),i(t,e,n)){var o=n.data[e][t]||null;return o?-1===o.index?r?o:null:o:null}return null}},60540:(t,e,r)=>{var i=r(7423),n=new(r(26099));t.exports=function(t,e,r,o,s){return s.tilemapLayer.worldToTileXY(t,e,!0,n,o),i(n.x,n.y,r,s)}},55826:(t,e,r)=>{var i=r(26099);t.exports=function(t,e,r,n){var o=n.baseTileWidth,s=n.baseTileHeight,a=n.tilemapLayer,h=0,u=0;a&&(r||(r=a.scene.cameras.main),h=a.x+r.scrollX*(1-a.scrollFactorX),u=a.y+r.scrollY*(1-a.scrollFactorY),o*=a.scaleX,s*=a.scaleY);var c=h+t*o,l=u+e*s;return[new i(c,l),new i(c+o,l),new i(c+o,l+s),new i(c,l+s)]}},11758:(t,e,r)=>{var i=r(91907),n=r(27229),o=r(29747),s=r(55826);t.exports=function(t){return t===i.ORTHOGONAL?s:t===i.ISOMETRIC?o:t===i.HEXAGONAL?n:(i.STAGGERED,o)}},39167:(t,e,r)=>{var i=r(91907),n=r(29747),o=r(97281);t.exports=function(t){return t===i.ORTHOGONAL?o:n}},62e3:(t,e,r)=>{var i=r(91907),n=r(19951),o=r(14127),s=r(29747),a=r(97202),h=r(70326);t.exports=function(t){return t===i.ORTHOGONAL?h:t===i.ISOMETRIC?o:t===i.HEXAGONAL?n:t===i.STAGGERED?a:s}},5984:(t,e,r)=>{var i=r(91907),n=r(29747),o=r(28054),s=r(29650);t.exports=function(t){return t===i.ORTHOGONAL?s:t===i.STAGGERED?o:n}},7386:(t,e,r)=>{var i=r(95540);t.exports=function(t,e,r,n,o,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=s.width),void 0===n&&(n=s.height),o||(o={});var a=i(o,"isNotEmpty",!1),h=i(o,"isColliding",!1),u=i(o,"hasInterestingFace",!1);t<0&&(r+=t,t=0),e<0&&(n+=e,e=0),t+r>s.width&&(r=Math.max(s.width-t,0)),e+n>s.height&&(n=Math.max(s.height-e,0));for(var c=[],l=e;l<e+n;l++)for(var f=t;f<t+r;f++){var p=s.data[l][f];if(null!==p){if(a&&-1===p.index)continue;if(h&&!p.collides)continue;if(u&&!p.hasInterestingFace)continue;c.push(p)}}return c}},91141:(t,e,r)=>{var i=r(55738),n=r(7386),o=r(91865),s=r(29747),a=r(26099),h=function(t,e){return o.RectangleToTriangle(e,t)},u=new a,c=new a,l=new a;t.exports=function(t,e,r,a){if(void 0===t)return[];var f=s;t instanceof i.Circle?f=o.CircleToRectangle:t instanceof i.Rectangle?f=o.RectangleToRectangle:t instanceof i.Triangle?f=h:t instanceof i.Line&&(f=o.LineToRectangle),a.tilemapLayer.worldToTileXY(t.left,t.top,!0,c,r);var p=c.x,d=c.y;a.tilemapLayer.worldToTileXY(t.right,t.bottom,!1,l,r);var v=Math.ceil(l.x),y=Math.ceil(l.y),g=Math.max(v-p,1),m=Math.max(y-d,1),x=n(p,d,g,m,e,a),b=a.tileWidth,w=a.tileHeight;a.tilemapLayer&&(b*=a.tilemapLayer.scaleX,w*=a.tilemapLayer.scaleY);for(var E=[],T=new i.Rectangle(0,0,b,w),S=0;S<x.length;S++){var _=x[S];a.tilemapLayer.tileToWorldXY(_.x,_.y,u,r),T.x=u.x,T.y=u.y,f(t,T)&&E.push(_)}return E}},96523:(t,e,r)=>{var i=r(7386),n=r(26099),o=new n,s=new n;t.exports=function(t,e,r,n,a,h,u){var c=u.tilemapLayer.tilemap._convert.WorldToTileXY;c(t,e,!0,o,h,u);var l=o.x,f=o.y;c(t+r,e+n,!1,s,h,u);var p=Math.ceil(s.x),d=Math.ceil(s.y);return i(l,f,p-l,d-f,a,u)}},96113:(t,e,r)=>{var i=r(91907),n=r(20242),o=r(10095);t.exports=function(t){return t===i.ORTHOGONAL?o:n}},16926:(t,e,r)=>{var i=r(91907),n=r(86625),o=r(96897),s=r(29747),a=r(15108),h=r(85896);t.exports=function(t){return t===i.ORTHOGONAL?h:t===i.ISOMETRIC?o:t===i.HEXAGONAL?n:t===i.STAGGERED?a:s}},55762:(t,e,r)=>{var i=r(91907),n=r(20242),o=r(51900),s=r(63288);t.exports=function(t){return t===i.ORTHOGONAL?s:t===i.STAGGERED?o:n}},45091:(t,e,r)=>{var i=r(62991);t.exports=function(t,e,r){if(i(t,e,r)){var n=r.data[e][t];return null!==n&&n.index>-1}return!1}},24152:(t,e,r)=>{var i=r(45091),n=new(r(26099));t.exports=function(t,e,r,o){o.tilemapLayer.worldToTileXY(t,e,!0,n,r);var s=n.x,a=n.y;return i(s,a,o)}},90454:(t,e,r)=>{var i=r(63448),n=r(56583);t.exports=function(t,e){var r,o,s,a,h=t.tilemapLayer.tilemap,u=t.tilemapLayer,c=Math.floor(h.tileWidth*u.scaleX),l=Math.floor(h.tileHeight*u.scaleY),f=t.hexSideLength;if("y"===t.staggerAxis){var p=(l-f)/2+f;r=n(e.worldView.x-u.x,c,0,!0)-u.cullPaddingX,o=i(e.worldView.right-u.x,c,0,!0)+u.cullPaddingX,s=n(e.worldView.y-u.y,p,0,!0)-u.cullPaddingY,a=i(e.worldView.bottom-u.y,p,0,!0)+u.cullPaddingY}else{var d=(c-f)/2+f;r=n(e.worldView.x-u.x,d,0,!0)-u.cullPaddingX,o=i(e.worldView.right-u.x,d,0,!0)+u.cullPaddingX,s=n(e.worldView.y-u.y,l,0,!0)-u.cullPaddingY,a=i(e.worldView.bottom-u.y,l,0,!0)+u.cullPaddingY}return{left:r,right:o,top:s,bottom:a}}},9474:(t,e,r)=>{var i=r(90454),n=r(32483);t.exports=function(t,e,r,o){void 0===r&&(r=[]),void 0===o&&(o=0),r.length=0;var s=t.tilemapLayer,a=i(t,e);return s.skipCull&&1===s.scrollFactorX&&1===s.scrollFactorY&&(a.left=0,a.right=t.width,a.top=0,a.bottom=t.height),n(t,a,o,r),r}},27229:(t,e,r)=>{var i=r(19951),n=r(26099),o=new n;t.exports=function(t,e,r,s){var a=s.baseTileWidth,h=s.baseTileHeight,u=s.tilemapLayer;u&&(a*=u.scaleX,h*=u.scaleY);var c,l,f=i(t,e,o,r,s),p=[],d=.5773502691896257;"y"===s.staggerAxis?(c=d*a,l=h/2):(c=a/2,l=d*h);for(var v=0;v<6;v++){var y=2*Math.PI*(.5-v)/6;p.push(new n(f.x+c*Math.cos(y),f.y+l*Math.sin(y)))}return p}},19951:(t,e,r)=>{var i=r(26099);t.exports=function(t,e,r,n,o){r||(r=new i);var s=o.baseTileWidth,a=o.baseTileHeight,h=o.tilemapLayer,u=0,c=0;h&&(n||(n=h.scene.cameras.main),u=h.x+n.scrollX*(1-h.scrollFactorX),c=h.y+n.scrollY*(1-h.scrollFactorY),s*=h.scaleX,a*=h.scaleY);var l,f,p=s/2,d=a/2;return"y"===o.staggerAxis?(l=u+s*t+s,f=c+1.5*e*d+d,e%2==0&&("odd"===this.staggerIndex?l-=p:l+=p)):"x"===this.staggerAxis&&"odd"===this.staggerIndex&&(l=u+1.5*t*p+p,f=c+a*t+a,t%2==0&&("odd"===this.staggerIndex?f-=d:f+=d)),r.set(l,f)}},86625:(t,e,r)=>{var i=r(26099);t.exports=function(t,e,r,n,o,s){n||(n=new i);var a=s.baseTileWidth,h=s.baseTileHeight,u=s.tilemapLayer;u&&(o||(o=u.scene.cameras.main),t-=u.x+o.scrollX*(1-u.scrollFactorX),e-=u.y+o.scrollY*(1-u.scrollFactorY),a*=u.scaleX,h*=u.scaleY);var c,l,f,p,d,v=.5773502691896257,y=-.3333333333333333,g=.6666666666666666,m=a/2,x=h/2;"y"===s.staggerAxis?(f=v*(c=(t-m)/(v*a))+y*(l=(e-x)/x),p=0*c+g*l):(f=y*(c=(t-m)/m)+v*(l=(e-x)/(v*h)),p=g*c+0*l),d=-f-p;var b,w=Math.round(f),E=Math.round(p),T=Math.round(d),S=Math.abs(w-f),_=Math.abs(E-p),O=Math.abs(T-d);S>_&&S>O?w=-E-T:_>O&&(E=-w-T);var P=E;return b="odd"===s.staggerIndex?P%2==0?E/2+w:E/2+w-.5:P%2==0?E/2+w:E/2+w+.5,n.set(b,P)}},62991:t=>{t.exports=function(t,e,r){return t>=0&&t<r.width&&e>=0&&e<r.height}},14018:(t,e,r)=>{var i=r(33528);t.exports=function(t,e,r,n){void 0===r&&(r=[]),void 0===n&&(n=0),r.length=0;var o,s,a,h=t.tilemapLayer,u=t.data,c=t.width,l=t.height,f=h.skipCull,p=c,d=l;if(0===n)for(s=0;s<d;s++)for(o=0;o<p;o++)(a=u[s][o])&&-1!==a.index&&a.visible&&0!==a.alpha&&(f||i(o,s,t,e))&&r.push(a);else if(1===n)for(s=0;s<d;s++)for(o=p;o>=0;o--)(a=u[s][o])&&-1!==a.index&&a.visible&&0!==a.alpha&&(f||i(o,s,t,e))&&r.push(a);else if(2===n)for(s=d;s>=0;s--)for(o=0;o<p;o++)(a=u[s][o])&&-1!==a.index&&a.visible&&0!==a.alpha&&(f||i(o,s,t,e))&&r.push(a);else if(3===n)for(s=d;s>=0;s--)for(o=p;o>=0;o--)(a=u[s][o])&&-1!==a.index&&a.visible&&0!==a.alpha&&(f||i(o,s,t,e))&&r.push(a);return h.tilesDrawn=r.length,h.tilesTotal=c*l,r}},14127:(t,e,r)=>{var i=r(26099);t.exports=function(t,e,r,n,o){r||(r=new i);var s=o.baseTileWidth,a=o.baseTileHeight,h=o.tilemapLayer,u=0,c=0;h&&(n||(n=h.scene.cameras.main),u=h.x+n.scrollX*(1-h.scrollFactorX),s*=h.scaleX,c=h.y+n.scrollY*(1-h.scrollFactorY),a*=h.scaleY);var l=u+s/2*(t-e),f=c+(t+e)*(a/2);return r.set(l,f)}},96897:(t,e,r)=>{var i=r(26099);t.exports=function(t,e,r,n,o,s,a){n||(n=new i);var h=s.baseTileWidth,u=s.baseTileHeight,c=s.tilemapLayer;c&&(o||(o=c.scene.cameras.main),e-=c.y+o.scrollY*(1-c.scrollFactorY),u*=c.scaleY,t-=c.x+o.scrollX*(1-c.scrollFactorX),h*=c.scaleX);var l=h/2,f=u/2;a||(e-=u);var p=.5*((t-=l)/l+e/f),d=.5*(-t/l+e/f);return r&&(p=Math.floor(p),d=Math.floor(d)),n.set(p,d)}},71558:(t,e,r)=>{var i=r(23029),n=r(62991),o=r(72023),s=r(20576);t.exports=function(t,e,r,a,h){if(void 0===a&&(a=!0),!n(e,r,h))return null;var u,c=h.data[r][e],l=c&&c.collides;t instanceof i?(null===h.data[r][e]&&(h.data[r][e]=new i(h,t.index,e,r,h.tileWidth,h.tileHeight)),h.data[r][e].copy(t)):(u=t,null===h.data[r][e]?h.data[r][e]=new i(h,u,e,r,h.tileWidth,h.tileHeight):h.data[r][e].index=u);var f=h.data[r][e],p=-1!==h.collideIndexes.indexOf(f.index);if(-1===(u=t instanceof i?t.index:t))f.width=h.tileWidth,f.height=h.tileHeight;else{var d=h.tilemapLayer.tilemap,v=d.tiles[u][2],y=d.tilesets[v];f.width=y.tileWidth,f.height=y.tileHeight}return s(f,p),a&&l!==f.collides&&o(e,r,h),f}},26303:(t,e,r)=>{var i=r(71558),n=new(r(26099));t.exports=function(t,e,r,o,s,a){return a.tilemapLayer.worldToTileXY(e,r,!0,n,s,a),i(t,n.x,n.y,o,a)}},14051:(t,e,r)=>{var i=r(42573),n=r(71558);t.exports=function(t,e,r,o,s){if(void 0===o&&(o=!0),!Array.isArray(t))return null;Array.isArray(t[0])||(t=[t]);for(var a=t.length,h=t[0].length,u=0;u<a;u++)for(var c=0;c<h;c++){var l=t[u][c];n(l,e+c,r+u,!1,s)}o&&i(e-1,r-1,h+2,a+2,s)}},77389:(t,e,r)=>{var i=r(7386),n=r(26546);t.exports=function(t,e,r,o,s,a){var h,u=i(t,e,r,o,{},a);if(!s)for(s=[],h=0;h<u.length;h++)-1===s.indexOf(u[h].index)&&s.push(u[h].index);for(h=0;h<u.length;h++)u[h].index=n(s)}},63557:(t,e,r)=>{var i=r(23029),n=r(62991),o=r(72023);t.exports=function(t,e,r,s,a){if(void 0===r&&(r=!0),void 0===s&&(s=!0),!n(t,e,a))return null;var h=a.data[e][t];return h?(a.data[e][t]=r?null:new i(a,-1,t,e,a.tileWidth,a.tileHeight),s&&h&&h.collides&&o(t,e,a),h):null}},94178:(t,e,r)=>{var i=r(63557),n=new(r(26099));t.exports=function(t,e,r,o,s,a){return a.tilemapLayer.worldToTileXY(t,e,!0,n,s,a),i(n.x,n.y,r,o,a)}},15533:(t,e,r)=>{var i=r(7386),n=r(3956),o=new n(105,210,231,150),s=new n(243,134,48,200),a=new n(40,39,37,150);t.exports=function(t,e,r){void 0===e&&(e={});var n=void 0!==e.tileColor?e.tileColor:o,h=void 0!==e.collidingTileColor?e.collidingTileColor:s,u=void 0!==e.faceColor?e.faceColor:a,c=i(0,0,r.width,r.height,null,r);t.translateCanvas(r.tilemapLayer.x,r.tilemapLayer.y),t.scaleCanvas(r.tilemapLayer.scaleX,r.tilemapLayer.scaleY);for(var l=0;l<c.length;l++){var f=c[l],p=f.width,d=f.height,v=f.pixelX,y=f.pixelY,g=f.collides?h:n;null!==g&&(t.fillStyle(g.color,g.alpha/255),t.fillRect(v,y,p,d)),v+=1,y+=1,p-=2,d-=2,null!==u&&(t.lineStyle(1,u.color,u.alpha/255),f.faceTop&&t.lineBetween(v,y,v+p,y),f.faceRight&&t.lineBetween(v+p,y,v+p,y+d),f.faceBottom&&t.lineBetween(v,y+d,v+p,y+d),f.faceLeft&&t.lineBetween(v,y,v,y+d))}}},27987:(t,e,r)=>{var i=r(7386);t.exports=function(t,e,r,n,o,s,a){for(var h=i(r,n,o,s,null,a),u=0;u<h.length;u++)h[u]&&h[u].index===t&&(h[u].index=e)}},32483:t=>{t.exports=function(t,e,r,i){var n,o,s,a=t.data,h=t.width,u=t.height,c=t.tilemapLayer,l=Math.max(0,e.left),f=Math.min(h,e.right),p=Math.max(0,e.top),d=Math.min(u,e.bottom);if(0===r)for(o=p;o<d;o++)for(n=l;a[o]&&n<f;n++)(s=a[o][n])&&-1!==s.index&&s.visible&&0!==s.alpha&&i.push(s);else if(1===r)for(o=p;o<d;o++)for(n=f;a[o]&&n>=l;n--)(s=a[o][n])&&-1!==s.index&&s.visible&&0!==s.alpha&&i.push(s);else if(2===r)for(o=d;o>=p;o--)for(n=l;a[o]&&n<f;n++)(s=a[o][n])&&-1!==s.index&&s.visible&&0!==s.alpha&&i.push(s);else if(3===r)for(o=d;o>=p;o--)for(n=f;a[o]&&n>=l;n--)(s=a[o][n])&&-1!==s.index&&s.visible&&0!==s.alpha&&i.push(s);return c.tilesDrawn=i.length,c.tilesTotal=h*u,i}},57068:(t,e,r)=>{var i=r(20576),n=r(42573),o=r(9589);t.exports=function(t,e,r,s,a){void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===a&&(a=!0),Array.isArray(t)||(t=[t]);for(var h=0;h<t.length;h++)o(t[h],e,s);if(a)for(var u=0;u<s.height;u++)for(var c=0;c<s.width;c++){var l=s.data[u][c];l&&-1!==t.indexOf(l.index)&&i(l,e)}r&&n(0,0,s.width,s.height,s)}},37266:(t,e,r)=>{var i=r(20576),n=r(42573),o=r(9589);t.exports=function(t,e,r,s,a,h){if(void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===h&&(h=!0),!(t>e)){for(var u=t;u<=e;u++)o(u,r,a);if(h)for(var c=0;c<a.height;c++)for(var l=0;l<a.width;l++){var f=a.data[c][l];f&&f.index>=t&&f.index<=e&&i(f,r)}s&&n(0,0,a.width,a.height,a)}}},75661:(t,e,r)=>{var i=r(20576),n=r(42573),o=r(9589);t.exports=function(t,e,r,s){void 0===e&&(e=!0),void 0===r&&(r=!0),Array.isArray(t)||(t=[t]);for(var a=0;a<s.height;a++)for(var h=0;h<s.width;h++){var u=s.data[a][h];u&&-1===t.indexOf(u.index)&&(i(u,e),o(u.index,e,s))}r&&n(0,0,s.width,s.height,s)}},64740:(t,e,r)=>{var i=r(20576),n=r(42573),o=r(97022);t.exports=function(t,e,r,s){void 0===e&&(e=!0),void 0===r&&(r=!0);for(var a=0;a<s.height;a++)for(var h=0;h<s.width;h++){var u=s.data[a][h];if(u)for(var c in t)if(o(u.properties,c)){var l=t[c];Array.isArray(l)||(l=[l]);for(var f=0;f<l.length;f++)u.properties[c]===l[f]&&i(u,e)}}r&&n(0,0,s.width,s.height,s)}},63307:(t,e,r)=>{var i=r(20576),n=r(42573);t.exports=function(t,e,r){void 0===t&&(t=!0),void 0===e&&(e=!0);for(var o=0;o<r.height;o++)for(var s=0;s<r.width;s++){var a=r.data[o][s];if(a){var h=a.getCollisionGroup();h&&h.objects&&h.objects.length>0&&i(a,t)}}e&&n(0,0,r.width,r.height,r)}},9589:t=>{t.exports=function(t,e,r){var i=r.collideIndexes.indexOf(t);e&&-1===i?r.collideIndexes.push(t):e||-1===i||r.collideIndexes.splice(i,1)}},20576:t=>{t.exports=function(t,e){e?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},79583:t=>{t.exports=function(t,e,r,i){if("number"==typeof t)i.callbacks[t]=null!==e?{callback:e,callbackContext:r}:void 0;else for(var n=0,o=t.length;n<o;n++)i.callbacks[t[n]]=null!==e?{callback:e,callbackContext:r}:void 0}},93254:(t,e,r)=>{var i=r(7386);t.exports=function(t,e,r,n,o,s,a){for(var h=i(t,e,r,n,null,a),u=0;u<h.length;u++)h[u].setCollisionCallback(o,s)}},32903:(t,e,r)=>{var i=r(7386),n=r(33680);t.exports=function(t,e,r,o,s){var a=i(t,e,r,o,null,s),h=a.map((function(t){return t.index}));n(h);for(var u=0;u<a.length;u++)a[u].index=h[u]}},61325:(t,e,r)=>{var i=r(63448),n=r(56583);t.exports=function(t,e){var r=t.tilemapLayer.tilemap,o=t.tilemapLayer,s=Math.floor(r.tileWidth*o.scaleX),a=Math.floor(r.tileHeight*o.scaleY);return{left:n(e.worldView.x-o.x,s,0,!0)-o.cullPaddingX,right:i(e.worldView.right-o.x,s,0,!0)+o.cullPaddingX,top:n(e.worldView.y-o.y,a/2,0,!0)-o.cullPaddingY,bottom:i(e.worldView.bottom-o.y,a/2,0,!0)+o.cullPaddingY}}},54503:(t,e,r)=>{var i=r(61325),n=r(32483);t.exports=function(t,e,r,o){void 0===r&&(r=[]),void 0===o&&(o=0),r.length=0;var s=t.tilemapLayer,a=i(t,e);return s.skipCull&&1===s.scrollFactorX&&1===s.scrollFactorY&&(a.left=0,a.right=t.width,a.top=0,a.bottom=t.height),n(t,a,o,r),r}},97202:(t,e,r)=>{var i=r(26099);t.exports=function(t,e,r,n,o){r||(r=new i);var s=o.baseTileWidth,a=o.baseTileHeight,h=o.tilemapLayer,u=0,c=0;h&&(n||(n=h.scene.cameras.main),u=h.x+n.scrollX*(1-h.scrollFactorX),s*=h.scaleX,c=h.y+n.scrollY*(1-h.scrollFactorY),a*=h.scaleY);var l=u+t*s+e%2*(s/2),f=c+e*(a/2);return r.set(l,f)}},28054:t=>{t.exports=function(t,e,r){var i=r.baseTileHeight,n=r.tilemapLayer,o=0;return n&&(void 0===e&&(e=n.scene.cameras.main),o=n.y+e.scrollY*(1-n.scrollFactorY),i*=n.scaleY),o+t*(i/2)+i}},15108:(t,e,r)=>{var i=r(26099);t.exports=function(t,e,r,n,o,s){n||(n=new i);var a=s.baseTileWidth,h=s.baseTileHeight,u=s.tilemapLayer;u&&(o||(o=u.scene.cameras.main),e-=u.y+o.scrollY*(1-u.scrollFactorY),h*=u.scaleY,t-=u.x+o.scrollX*(1-u.scrollFactorX),a*=u.scaleX);var c=r?Math.floor(e/(h/2)):e/(h/2),l=r?Math.floor((t+c%2*.5*a)/a):(t+c%2*.5*a)/a;return n.set(l,c)}},51900:t=>{t.exports=function(t,e,r,i){var n=i.baseTileHeight,o=i.tilemapLayer;return o&&(r||(r=o.scene.cameras.main),t-=o.y+r.scrollY*(1-o.scrollFactorY),n*=o.scaleY),e?Math.floor(t/(n/2)):t/(n/2)}},86560:(t,e,r)=>{var i=r(7386);t.exports=function(t,e,r,n,o,s,a){for(var h=i(r,n,o,s,null,a),u=0;u<h.length;u++)h[u]&&(h[u].index===t?h[u].index=e:h[u].index===e&&(h[u].index=t))}},97281:t=>{t.exports=function(t,e,r){var i=r.baseTileWidth,n=r.tilemapLayer,o=0;return n&&(e||(e=n.scene.cameras.main),o=n.x+e.scrollX*(1-n.scrollFactorX),i*=n.scaleX),o+t*i}},70326:(t,e,r)=>{var i=r(97281),n=r(29650),o=r(26099);t.exports=function(t,e,r,s,a){return r||(r=new o(0,0)),r.x=i(t,s,a),r.y=n(e,s,a),r}},29650:t=>{t.exports=function(t,e,r){var i=r.baseTileHeight,n=r.tilemapLayer,o=0;return n&&(e||(e=n.scene.cameras.main),o=n.y+e.scrollY*(1-n.scrollFactorY),i*=n.scaleY),o+t*i}},77366:(t,e,r)=>{var i=r(7386),n=r(75508);t.exports=function(t,e,r,o,s,a){if(s){var h,u=i(t,e,r,o,null,a),c=0;for(h=0;h<s.length;h++)c+=s[h].weight;if(!(c<=0))for(h=0;h<u.length;h++){for(var l=n.RND.frac()*c,f=0,p=-1,d=0;d<s.length;d++)if(l<=(f+=s[d].weight)){var v=s[d].index;p=Array.isArray(v)?v[Math.floor(n.RND.frac()*v.length)]:v;break}u[h].index=p}}}},10095:(t,e,r)=>{var i=r(85896),n=new(r(26099));t.exports=function(t,e,r,o){return i(t,0,e,n,r,o),n.x}},85896:(t,e,r)=>{var i=r(26099);t.exports=function(t,e,r,n,o,s){void 0===r&&(r=!0),n||(n=new i);var a=s.baseTileWidth,h=s.baseTileHeight,u=s.tilemapLayer;u&&(o||(o=u.scene.cameras.main),t-=u.x+o.scrollX*(1-u.scrollFactorX),e-=u.y+o.scrollY*(1-u.scrollFactorY),a*=u.scaleX,h*=u.scaleY);var c=t/a,l=e/h;return r&&(c=Math.floor(c),l=Math.floor(l)),n.set(c,l)}},63288:(t,e,r)=>{var i=r(85896),n=new(r(26099));t.exports=function(t,e,r,o){return i(0,t,e,n,r,o),n.y}},81086:(t,e,r)=>{t.exports={CalculateFacesAt:r(72023),CalculateFacesWithin:r(42573),CheckIsoBounds:r(33528),Copy:r(1785),CreateFromTiles:r(78419),CullBounds:r(19545),CullTiles:r(30003),Fill:r(35137),FilterTiles:r(40253),FindByIndex:r(52692),FindTile:r(66151),ForEachTile:r(97560),GetCullTilesFunction:r(43305),GetTileAt:r(7423),GetTileAtWorldXY:r(60540),GetTileCorners:r(55826),GetTileCornersFunction:r(11758),GetTilesWithin:r(7386),GetTilesWithinShape:r(91141),GetTilesWithinWorldXY:r(96523),GetTileToWorldXFunction:r(39167),GetTileToWorldXYFunction:r(62e3),GetTileToWorldYFunction:r(5984),GetWorldToTileXFunction:r(96113),GetWorldToTileXYFunction:r(16926),GetWorldToTileYFunction:r(55762),HasTileAt:r(45091),HasTileAtWorldXY:r(24152),HexagonalCullBounds:r(90454),HexagonalCullTiles:r(9474),HexagonalGetTileCorners:r(27229),HexagonalTileToWorldXY:r(19951),HexagonalWorldToTileXY:r(86625),IsInLayerBounds:r(62991),IsometricCullTiles:r(14018),IsometricTileToWorldXY:r(14127),IsometricWorldToTileXY:r(96897),PutTileAt:r(71558),PutTileAtWorldXY:r(26303),PutTilesAt:r(14051),Randomize:r(77389),RemoveTileAt:r(63557),RemoveTileAtWorldXY:r(94178),RenderDebug:r(15533),ReplaceByIndex:r(27987),RunCull:r(32483),SetCollision:r(57068),SetCollisionBetween:r(37266),SetCollisionByExclusion:r(75661),SetCollisionByProperty:r(64740),SetCollisionFromCollisionGroup:r(63307),SetLayerCollisionIndex:r(9589),SetTileCollision:r(20576),SetTileIndexCallback:r(79583),SetTileLocationCallback:r(93254),Shuffle:r(32903),StaggeredCullBounds:r(61325),StaggeredCullTiles:r(54503),StaggeredTileToWorldXY:r(97202),StaggeredTileToWorldY:r(28054),StaggeredWorldToTileXY:r(15108),StaggeredWorldToTileY:r(51900),SwapByIndex:r(86560),TileToWorldX:r(97281),TileToWorldXY:r(70326),TileToWorldY:r(29650),WeightedRandomize:r(77366),WorldToTileX:r(10095),WorldToTileXY:r(85896),WorldToTileY:r(63288)}},91907:t=>{t.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},21829:(t,e,r)=>{var i={ORIENTATION:r(91907)};t.exports=i},62501:(t,e,r)=>{var i=r(79291),n=r(21829),o={Components:r(81086),Parsers:r(57442),Formats:r(80341),ImageCollection:r(16536),ParseToTilemap:r(31989),Tile:r(23029),Tilemap:r(49075),TilemapCreator:r(45939),TilemapFactory:r(46029),Tileset:r(33629),TilemapLayer:r(20442),Orientation:r(91907),LayerData:r(14977),MapData:r(87010),ObjectLayer:r(48700)};o=i(!1,o,n.ORIENTATION),t.exports=o},14977:(t,e,r)=>{var i=r(83419),n=r(91907),o=r(95540),s=new i({initialize:function(t){void 0===t&&(t={}),this.name=o(t,"name","layer"),this.id=o(t,"id",0),this.x=o(t,"x",0),this.y=o(t,"y",0),this.width=o(t,"width",0),this.height=o(t,"height",0),this.tileWidth=o(t,"tileWidth",0),this.tileHeight=o(t,"tileHeight",0),this.baseTileWidth=o(t,"baseTileWidth",this.tileWidth),this.baseTileHeight=o(t,"baseTileHeight",this.tileHeight),this.orientation=o(t,"orientation",n.ORTHOGONAL),this.widthInPixels=o(t,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=o(t,"heightInPixels",this.height*this.baseTileHeight),this.alpha=o(t,"alpha",1),this.visible=o(t,"visible",!0),this.properties=o(t,"properties",[]),this.indexes=o(t,"indexes",[]),this.collideIndexes=o(t,"collideIndexes",[]),this.callbacks=o(t,"callbacks",[]),this.bodies=o(t,"bodies",[]),this.data=o(t,"data",[]),this.tilemapLayer=o(t,"tilemapLayer",null),this.hexSideLength=o(t,"hexSideLength",0),this.staggerAxis=o(t,"staggerAxis","y"),this.staggerIndex=o(t,"staggerIndex","odd")}});t.exports=s},87010:(t,e,r)=>{var i=r(83419),n=r(91907),o=r(95540),s=new i({initialize:function(t){void 0===t&&(t={}),this.name=o(t,"name","map"),this.width=o(t,"width",0),this.height=o(t,"height",0),this.infinite=o(t,"infinite",!1),this.tileWidth=o(t,"tileWidth",0),this.tileHeight=o(t,"tileHeight",0),this.widthInPixels=o(t,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=o(t,"heightInPixels",this.height*this.tileHeight),this.format=o(t,"format",null),this.orientation=o(t,"orientation",n.ORTHOGONAL),this.renderOrder=o(t,"renderOrder","right-down"),this.version=o(t,"version","1"),this.properties=o(t,"properties",{}),this.layers=o(t,"layers",[]),this.images=o(t,"images",[]),this.objects=o(t,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=o(t,"collision",{}),this.tilesets=o(t,"tilesets",[]),this.imageCollections=o(t,"imageCollections",[]),this.tiles=o(t,"tiles",[]),this.hexSideLength=o(t,"hexSideLength",0),this.staggerAxis=o(t,"staggerAxis","y"),this.staggerIndex=o(t,"staggerIndex","odd")}});t.exports=s},48700:(t,e,r)=>{var i=r(83419),n=r(95540),o=new i({initialize:function(t){void 0===t&&(t={}),this.name=n(t,"name","object layer"),this.id=n(t,"id",0),this.opacity=n(t,"opacity",1),this.properties=n(t,"properties",{}),this.propertyTypes=n(t,"propertytypes",{}),this.type=n(t,"type","objectgroup"),this.visible=n(t,"visible",!0),this.objects=n(t,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});t.exports=o},6641:(t,e,r)=>{var i=r(91907);t.exports=function(t){return"isometric"===(t=t.toLowerCase())?i.ISOMETRIC:"staggered"===t?i.STAGGERED:"hexagonal"===t?i.HEXAGONAL:i.ORTHOGONAL}},46177:(t,e,r)=>{var i=r(80341),n=r(2342),o=r(82593),s=r(46594),a=r(87021);t.exports=function(t,e,r,h,u,c){var l;switch(e){case i.ARRAY_2D:l=n(t,r,h,u,c);break;case i.CSV:l=o(t,r,h,u,c);break;case i.TILED_JSON:l=s(t,r,c);break;case i.WELTMEISTER:l=a(t,r,c);break;default:console.warn("Unrecognized tilemap data format: "+e),l=null}return l}},2342:(t,e,r)=>{var i=r(80341),n=r(14977),o=r(87010),s=r(23029);t.exports=function(t,e,r,a,h){for(var u=new n({tileWidth:r,tileHeight:a}),c=new o({name:t,tileWidth:r,tileHeight:a,format:i.ARRAY_2D,layers:[u]}),l=[],f=e.length,p=0,d=0;d<e.length;d++){l[d]=[];for(var v=e[d],y=0;y<v.length;y++){var g=parseInt(v[y],10);isNaN(g)||-1===g?l[d][y]=h?null:new s(u,-1,y,d,r,a):l[d][y]=new s(u,g,y,d,r,a)}0===p&&(p=v.length)}return c.width=u.width=p,c.height=u.height=f,c.widthInPixels=u.widthInPixels=p*r,c.heightInPixels=u.heightInPixels=f*a,u.data=l,c}},82593:(t,e,r)=>{var i=r(80341),n=r(2342);t.exports=function(t,e,r,o,s){var a=e.trim().split("\n").map((function(t){return t.split(",")})),h=n(t,a,r,o,s);return h.format=i.CSV,h}},6656:(t,e,r)=>{var i=r(14977),n=r(23029);t.exports=function(t,e){for(var r=[],o=0;o<t.layer.length;o++){for(var s=t.layer[o],a=new i({name:s.name,width:s.width,height:s.height,tileWidth:s.tilesize,tileHeight:s.tilesize,visible:1===s.visible}),h=[],u=[],c=0;c<s.data.length;c++){for(var l=0;l<s.data[c].length;l++){var f,p=s.data[c][l]-1;f=p>-1?new n(a,p,l,c,s.tilesize,s.tilesize):e?null:new n(a,-1,l,c,s.tilesize,s.tilesize),h.push(f)}u.push(h),h=[]}a.data=u,r.push(a)}return r}},96483:(t,e,r)=>{var i=r(33629);t.exports=function(t){for(var e=[],r=[],n=0;n<t.layer.length;n++){var o=t.layer[n],s=o.tilesetName;""!==s&&-1===r.indexOf(s)&&(r.push(s),e.push(new i(s,0,o.tilesize,o.tilesize,0,0)))}return e}},87021:(t,e,r)=>{var i=r(80341),n=r(87010),o=r(6656),s=r(96483);t.exports=function(t,e,r){if(0===e.layer.length)return console.warn("No layers found in the Weltmeister map: "+t),null;for(var a=0,h=0,u=0;u<e.layer.length;u++)e.layer[u].width>a&&(a=e.layer[u].width),e.layer[u].height>h&&(h=e.layer[u].height);var c=new n({width:a,height:h,name:t,tileWidth:e.layer[0].tilesize,tileHeight:e.layer[0].tilesize,format:i.WELTMEISTER});return c.layers=o(e,r),c.tilesets=s(e),c}},52833:(t,e,r)=>{t.exports={ParseTileLayers:r(6656),ParseTilesets:r(96483),ParseWeltmeister:r(87021)}},57442:(t,e,r)=>{t.exports={FromOrientationString:r(6641),Parse:r(46177),Parse2DArray:r(2342),ParseCSV:r(82593),Impact:r(52833),Tiled:r(96761)}},51233:(t,e,r)=>{var i=r(79291);t.exports=function(t){for(var e,r,n,o,s,a=0;a<t.layers.length;a++){e=t.layers[a],o=null;for(var h=0;h<e.data.length;h++){s=e.data[h];for(var u=0;u<s.length;u++)null===(r=s[u])||r.index<0||(n=t.tiles[r.index][2],o=t.tilesets[n],r.width=o.tileWidth,r.height=o.tileHeight,o.tileProperties&&o.tileProperties[r.index-o.firstgid]&&(r.properties=i(r.properties,o.tileProperties[r.index-o.firstgid])))}}}},41868:t=>{t.exports=function(t){for(var e=window.atob(t),r=e.length,i=new Array(r/4),n=0;n<r;n+=4)i[n/4]=(e.charCodeAt(n)|e.charCodeAt(n+1)<<8|e.charCodeAt(n+2)<<16|e.charCodeAt(n+3)<<24)>>>0;return i}},84101:(t,e,r)=>{var i=r(33629);t.exports=function(t){var e,r,n=[];for(e=0;e<t.imageCollections.length;e++)for(var o=t.imageCollections[e],s=o.images,a=0;a<s.length;a++){var h=s[a];(r=new i(h.image,h.gid,o.imageWidth,o.imageHeight,0,0)).updateTileData(o.imageWidth,o.imageHeight),t.tilesets.push(r)}for(e=0;e<t.tilesets.length;e++)for(var u=(r=t.tilesets[e]).tileMargin,c=r.tileMargin,l=0,f=0,p=0,d=r.firstgid;d<r.firstgid+r.total&&(n[d]=[u,c,e],u+=r.tileWidth+r.tileSpacing,++l!==r.total)&&(++f!==r.columns||(u=r.tileMargin,c+=r.tileHeight+r.tileSpacing,f=0,++p!==r.rows));d++);return n}},79677:(t,e,r)=>{var i=r(95540);t.exports=function(t,e,r){if(!e)return{i:0,layers:t.layers,name:"",opacity:1,visible:!0,x:0,y:0};var n=e.x+i(e,"startx",0)*t.tilewidth+i(e,"offsetx",0),o=e.y+i(e,"starty",0)*t.tileheight+i(e,"offsety",0);return{i:0,layers:e.layers,name:r.name+e.name+"/",opacity:r.opacity*e.opacity,visible:r.visible&&e.visible,x:r.x+n,y:r.y+o}}},29920:t=>{t.exports=function(t){var e=Boolean(2147483648&t),r=Boolean(1073741824&t),i=Boolean(536870912&t);t&=536870911;var n=0,o=!1;return e&&r&&i?(n=Math.PI/2,o=!0):e&&r&&!i?(n=Math.PI,o=!1):e&&!r&&i?(n=Math.PI/2,o=!1):!e||r||i?!e&&r&&i?(n=3*Math.PI/2,o=!1):e||!r||i?e||r||!i?e||r||i||(n=0,o=!1):(n=3*Math.PI/2,o=!0):(n=Math.PI,o=!0):(n=0,o=!0),{gid:t,flippedHorizontal:e,flippedVertical:r,flippedAntiDiagonal:i,rotation:n,flipped:o}}},12635:(t,e,r)=>{var i=r(95540),n=r(79677);t.exports=function(t){for(var e=[],r=[],o=n(t);o.i<o.layers.length||r.length>0;)if(o.i>=o.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=r.pop()}else{var s=o.layers[o.i];if(o.i++,"imagelayer"===s.type){var a=i(s,"offsetx",0)+i(s,"startx",0),h=i(s,"offsety",0)+i(s,"starty",0);e.push({name:o.name+s.name,image:s.image,x:o.x+a+s.x,y:o.y+h+s.y,alpha:o.opacity*s.opacity,visible:o.visible&&s.visible,properties:i(s,"properties",{})})}else if("group"===s.type){var u=n(t,s,o);r.push(o),o=u}}return e}},46594:(t,e,r)=>{var i=r(51233),n=r(84101),o=r(91907),s=r(62644),a=r(80341),h=r(6641),u=r(87010),c=r(12635),l=r(22611),f=r(28200),p=r(24619);t.exports=function(t,e,r){var d=s(e),v=new u({width:d.width,height:d.height,name:t,tileWidth:d.tilewidth,tileHeight:d.tileheight,orientation:h(d.orientation),format:a.TILED_JSON,version:d.version,properties:d.properties,renderOrder:d.renderorder,infinite:d.infinite});v.orientation===o.HEXAGONAL&&(v.hexSideLength=d.hexsidelength,v.staggerAxis=d.staggeraxis,v.staggerIndex=d.staggerindex),v.layers=f(d,r),v.images=c(d);var y=p(d);return v.tilesets=y.tilesets,v.imageCollections=y.imageCollections,v.objects=l(d),v.tiles=n(v),i(v),v}},52205:(t,e,r)=>{var i=r(18254),n=r(29920),o=function(t){return{x:t.x,y:t.y}},s=["id","name","type","rotation","properties","visible","x","y","width","height"];t.exports=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0);var a=i(t,s);if(a.x+=e,a.y+=r,t.gid){var h=n(t.gid);a.gid=h.gid,a.flippedHorizontal=h.flippedHorizontal,a.flippedVertical=h.flippedVertical,a.flippedAntiDiagonal=h.flippedAntiDiagonal}else t.polyline?a.polyline=t.polyline.map(o):t.polygon?a.polygon=t.polygon.map(o):t.ellipse?a.ellipse=t.ellipse:t.text?a.text=t.text:t.point?a.point=!0:a.rectangle=!0;return a}},22611:(t,e,r)=>{var i=r(95540),n=r(52205),o=r(48700),s=r(79677);t.exports=function(t){for(var e=[],r=[],a=s(t);a.i<a.layers.length||r.length>0;)if(a.i>=a.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=r.pop()}else{var h=a.layers[a.i];if(a.i++,h.opacity*=a.opacity,h.visible=a.visible&&h.visible,"objectgroup"===h.type){h.name=a.name+h.name;for(var u=a.x+i(h,"startx",0)+i(h,"offsetx",0),c=a.y+i(h,"starty",0)+i(h,"offsety",0),l=[],f=0;f<h.objects.length;f++){var p=n(h.objects[f],u,c);l.push(p)}var d=new o(h);d.objects=l,e.push(d)}else if("group"===h.type){var v=s(t,h,a);r.push(a),a=v}}return e}},28200:(t,e,r)=>{var i=r(41868),n=r(91907),o=r(79677),s=r(6641),a=r(95540),h=r(14977),u=r(29920),c=r(23029);t.exports=function(t,e){for(var r=a(t,"infinite",!1),l=[],f=[],p=o(t);p.i<p.layers.length||f.length>0;)if(p.i>=p.layers.length){if(f.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}p=f.pop()}else{var d=p.layers[p.i];if(p.i++,"tilelayer"===d.type)if(d.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+d.name+"'");else{if(d.encoding&&"base64"===d.encoding){if(d.chunks)for(var v=0;v<d.chunks.length;v++)d.chunks[v].data=i(d.chunks[v].data);d.data&&(d.data=i(d.data)),delete d.encoding}var y,g,m,x,b=[],w=0;if(r){var E=a(d,"startx",0)+d.x,T=a(d,"starty",0)+d.y;(y=new h({name:p.name+d.name,id:d.id,x:p.x+a(d,"offsetx",0)+E*t.tilewidth,y:p.y+a(d,"offsety",0)+T*t.tileheight,width:d.width,height:d.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:p.opacity*d.opacity,visible:p.visible&&d.visible,properties:a(d,"properties",[]),orientation:s(t.orientation)})).orientation===n.HEXAGONAL&&(y.hexSideLength=t.hexsidelength,y.staggerAxis=t.staggeraxis,y.staggerIndex=t.staggerindex);for(var S=0;S<d.height;S++){b[S]=[null];for(var _=0;_<d.width;_++)b[S][_]=null}for(S=0,D=d.chunks.length;S<D;S++)for(var O=d.chunks[S],P=O.x-E,M=O.y-T,A=0,L=0,C=O.data.length;L<C;L++){var R=w+P,k=A+M;(g=u(O.data[L])).gid>0?((m=new c(y,g.gid,R,k,t.tilewidth,t.tileheight)).rotation=g.rotation,m.flipX=g.flipped,b[k][R]=m):(x=e?null:new c(y,-1,R,k,t.tilewidth,t.tileheight),b[k][R]=x),++w===O.width&&(A++,w=0)}}else{(y=new h({name:p.name+d.name,id:d.id,x:p.x+a(d,"offsetx",0)+d.x,y:p.y+a(d,"offsety",0)+d.y,width:d.width,height:d.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:p.opacity*d.opacity,visible:p.visible&&d.visible,properties:a(d,"properties",[]),orientation:s(t.orientation)})).orientation===n.HEXAGONAL&&(y.hexSideLength=t.hexsidelength,y.staggerAxis=t.staggeraxis,y.staggerIndex=t.staggerindex);for(var F=[],I=0,D=d.data.length;I<D;I++)(g=u(d.data[I])).gid>0?((m=new c(y,g.gid,w,b.length,t.tilewidth,t.tileheight)).rotation=g.rotation,m.flipX=g.flipped,F.push(m)):(x=e?null:new c(y,-1,w,b.length,t.tilewidth,t.tileheight),F.push(x)),++w===d.width&&(b.push(F),w=0,F=[])}y.data=b,l.push(y)}else if("group"===d.type){var j=o(t,d,p);f.push(p),p=j}}return l}},24619:(t,e,r)=>{var i=r(33629),n=r(16536),o=r(52205),s=r(57880);t.exports=function(t){for(var e,r=[],a=[],h=null,u=0;u<t.tilesets.length;u++){var c=t.tilesets[u];if(c.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(c.image){var l=new i(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing,void 0,void 0,c.tileoffset);if(t.version>1){var f=void 0,p=void 0;if(Array.isArray(c.tiles)){f=f||{},p=p||{};for(var d=0;d<c.tiles.length;d++){var v=c.tiles[d];if(v.properties){var y={};v.properties.forEach((function(t){y[t.name]=t.value})),p[v.id]=y}if(v.objectgroup&&((f[v.id]||(f[v.id]={})).objectgroup=v.objectgroup,v.objectgroup.objects)){var g=v.objectgroup.objects.map((function(t){return o(t)}));f[v.id].objectgroup.objects=g}v.animation&&((f[v.id]||(f[v.id]={})).animation=v.animation),v.type&&((f[v.id]||(f[v.id]={})).type=v.type)}}Array.isArray(c.wangsets)&&(f=f||{},p=p||{},s(c.wangsets,f)),f&&(l.tileData=f,l.tileProperties=p)}else if(c.tileproperties&&(l.tileProperties=c.tileproperties),c.tiles)for(e in l.tileData=c.tiles,l.tileData){var m=l.tileData[e].objectgroup;if(m&&m.objects){var x=m.objects.map((function(t){return o(t)}));l.tileData[e].objectgroup.objects=x}}l.updateTileData(c.imagewidth,c.imageheight),r.push(l)}else{var b=new n(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing,c.properties),w=0;for(d=0;d<c.tiles.length;d++){var E=(v=c.tiles[d]).image,T=parseInt(v.id,10),S=c.firstgid+T;b.addImage(S,E),w=Math.max(T,w)}b.maxId=w,a.push(b)}h&&(h.lastgid=c.firstgid-1),h=c}return{tilesets:r,imageCollections:a}}},57880:t=>{t.exports=function(t,e){for(var r=0;r<t.length;r++){var i=t[r],n=r;if(i.name&&""!==i.name&&(n=i.name),Array.isArray(i.wangtiles)&&i.wangtiles.length>0){var o,s,a,h={},u={};if(Array.isArray(i.edgecolors))for(o=0;o<i.edgecolors.length;o++)a=1+o,""!==(s=i.edgecolors[o]).name&&(h[a]=s.name);if(Array.isArray(i.cornercolors))for(o=0;o<i.cornercolors.length;o++)a=1+o,""!==(s=i.cornercolors[o]).name&&(u[a]=s.name);if(Array.isArray(i.colors))for(o=0;o<i.colors.length;o++)a=1+o,""!==(s=i.colors[o]).name&&(h[a]=u[a]=s.name);for(var c=[h,u,h,u,h,u,h,u],l=0;l<i.wangtiles.length;l++){var f=i.wangtiles[l],p=e[f.tileid]||(e[f.tileid]={});p=p.wangid||(p.wangid={});for(var d=[],v=0;v<Math.min(c.length,f.wangid.length);v++)if(0!==(s=f.wangid[v])){var y=c[v][s];void 0===y?d.push(s):d.push(y)}else d.push(void 0);p[n]=d}}}}},96761:(t,e,r)=>{t.exports={AssignTileProperties:r(51233),Base64Decode:r(41868),BuildTilesetIndex:r(84101),CreateGroupLayer:r(79677),ParseGID:r(29920),ParseImageLayers:r(12635),ParseJSONTiled:r(46594),ParseObject:r(52205),ParseObjectLayers:r(22611),ParseTileLayers:r(28200),ParseTilesets:r(24619)}},33385:(t,e,r)=>{var i=r(83419),n=r(37277),o=r(44594),s=r(94880),a=r(72905),h=new i({initialize:function(t){this.scene=t,this.systems=t.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var t=this.systems.events;t.on(o.PRE_UPDATE,this.preUpdate,this),t.on(o.UPDATE,this.update,this),t.once(o.SHUTDOWN,this.shutdown,this)},addEvent:function(t){var e;return t instanceof s?(e=t,this.removeEvent(e),e.elapsed=e.startAt,e.hasDispatched=!1,e.repeatCount=-1===e.repeat||e.loop?999999999999:e.repeat):e=new s(t),this._pendingInsertion.push(e),e},delayedCall:function(t,e,r,i){return this.addEvent({delay:t,callback:e,args:r,callbackScope:i})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var r=t[e];a(this._pendingRemoval,r),a(this._pendingInsertion,r),a(this._active,r)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var t=this._pendingRemoval.length,e=this._pendingInsertion.length;if(0!==t||0!==e){var r,i;for(r=0;r<t;r++){i=this._pendingRemoval[r];var n=this._active.indexOf(i);n>-1&&this._active.splice(n,1),i.destroy()}for(r=0;r<e;r++)i=this._pendingInsertion[r],this._active.push(i);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(t,e){if(this.now=t,!this.paused){e*=this.timeScale;for(var r=0;r<this._active.length;r++){var i=this._active[r];if(!i.paused&&(i.elapsed+=e*i.timeScale,i.elapsed>=i.delay)){var n=i.elapsed-i.delay;if(i.elapsed=i.delay,!i.hasDispatched&&i.callback&&(i.hasDispatched=!0,i.callback.apply(i.callbackScope,i.args)),i.repeatCount>0){if(i.repeatCount--,n>=i.delay)for(;n>=i.delay&&i.repeatCount>0;)i.callback&&i.callback.apply(i.callbackScope,i.args),n-=i.delay,i.repeatCount--;i.elapsed=n,i.hasDispatched=!1}else i.hasDispatched&&this._pendingRemoval.push(i)}}}},shutdown:function(){var t;for(t=0;t<this._pendingInsertion.length;t++)this._pendingInsertion[t].destroy();for(t=0;t<this._active.length;t++)this._active[t].destroy();for(t=0;t<this._pendingRemoval.length;t++)this._pendingRemoval[t].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var e=this.systems.events;e.off(o.PRE_UPDATE,this.preUpdate,this),e.off(o.UPDATE,this.update,this),e.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});n.register("Clock",h,"time"),t.exports=h},96120:(t,e,r)=>{var i=r(83419),n=r(50792),o=r(39429),s=r(95540),a=r(44594),h=r(89809),u=new i({Extends:n,initialize:function(t,e){n.call(this),this.scene=t,this.systems=t.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var r=this.systems.events;r.on(a.PRE_UPDATE,this.preUpdate,this),r.on(a.UPDATE,this.update,this),r.once(a.SHUTDOWN,this.destroy,this),e&&this.add(e)},preUpdate:function(t,e){this.paused||(this.elapsed+=e)},update:function(){if(!this.paused&&!this.complete){var t,e,r=this.events,i=!1,n=this.systems;for(t=0;t<r.length;t++){var o=r[t];if(!o.complete&&o.time<=this.elapsed){if(o.complete=!0,this.totalComplete++,e=o.target?o.target:this,o.if&&!o.if.call(e,o))continue;if(o.once&&(i=!0),o.set&&o.target)for(var s in o.set)o.target[s]=o.set[s];this.iteration&&o.repeat++,o.loop&&o.repeat&&o.loop.call(e),o.tween&&n.tweens.add(o.tween),o.sound&&("string"==typeof o.sound?n.sound.play(o.sound):n.sound.play(o.sound.key,o.sound.config)),o.event&&this.emit(o.event,e),o.run&&o.run.call(e),o.stop&&this.stop()}}if(i)for(t=0;t<r.length;t++)r[t].complete&&r[t].once&&(r.splice(t,1),t--);this.totalComplete>=r.length&&(0!==this.loop&&(-1===this.loop||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(h.COMPLETE,this)}},play:function(t){return void 0===t&&(t=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,t&&this.reset(),this},pause:function(){return this.paused=!0,this},repeat:function(t){return void 0!==t&&!0!==t||(t=-1),!1===t&&(t=0),this.loop=t,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(t){void 0===t&&(t=!1),this.elapsed=0,t||(this.iteration=0);for(var e=0;e<this.events.length;e++)this.events[e].complete=!1,t||(this.events[e].repeat=0);return this.play(!1)},add:function(t){Array.isArray(t)||(t=[t]);var e=this.events,r=0;e.length>0&&(r=e[e.length-1].time);for(var i=0;i<t.length;i++){var n=t[i],o=s(n,"at",0),a=s(n,"in",null);null!==a&&(o=this.elapsed+a);var h=s(n,"from",null);null!==h&&(o=r+h),e.push({complete:!1,time:o,repeat:0,if:s(n,"if",null),run:s(n,"run",null),loop:s(n,"loop",null),event:s(n,"event",null),target:s(n,"target",null),set:s(n,"set",null),tween:s(n,"tween",null),sound:s(n,"sound",null),once:s(n,"once",!1),stop:s(n,"stop",!1)}),r=o}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){return Math.min(this.totalComplete,this.events.length)/this.events.length},destroy:function(){var t=this.systems.events;t.off(a.PRE_UPDATE,this.preUpdate,this),t.off(a.UPDATE,this.update,this),t.off(a.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});o.register("timeline",(function(t){return new u(this.scene,t)})),t.exports=u},94880:(t,e,r)=>{var i=r(83419),n=r(95540),o=new i({initialize:function(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(t){if(this.delay=n(t,"delay",0),this.repeat=n(t,"repeat",0),this.loop=n(t,"loop",!1),this.callback=n(t,"callback",void 0),this.callbackScope=n(t,"callbackScope",this),this.args=n(t,"args",[]),this.timeScale=n(t,"timeScale",1),this.startAt=n(t,"startAt",0),this.paused=n(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,0===this.delay&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return.001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return.001*this.getOverallRemaining()},remove:function(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=o},35945:t=>{t.exports="complete"},89809:(t,e,r)=>{t.exports={COMPLETE:r(35945)}},90291:(t,e,r)=>{t.exports={Clock:r(33385),Events:r(89809),Timeline:r(96120),TimerEvent:r(94880)}},40382:(t,e,r)=>{var i=r(72905),n=r(83419),o=r(43491),s=r(88032),a=r(37277),h=r(44594),u=r(93109),c=r(86081),l=r(8357),f=r(43960),p=r(26012),d=new n({initialize:function(t){this.scene=t,this.events=t.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(h.UPDATE,this.update,this),this.events.once(h.SHUTDOWN,this.shutdown,this)},create:function(t){Array.isArray(t)||(t=[t]);for(var e=[],r=0;r<t.length;r++){var i=t[r];i instanceof c||i instanceof f?e.push(i):Array.isArray(i.tweens)?e.push(p(this,i)):e.push(l(this,i))}return 1===e.length?e[0]:e},add:function(t){var e=t,r=this.tweens;return e instanceof c||e instanceof f||(e=Array.isArray(e.tweens)?p(this,e):l(this,e)),r.push(e.reset()),e},addMultiple:function(t){for(var e,r=[],i=this.tweens,n=0;n<t.length;n++)(e=t[n])instanceof c||e instanceof f||(e=Array.isArray(e.tweens)?p(this,e):l(this,e)),i.push(e.reset()),r.push(e);return r},chain:function(t){var e=p(this,t);return this.tweens.push(e.init()),e},getChainedTweens:function(t){return t.getChainedTweens()},has:function(t){return this.tweens.indexOf(t)>-1},existing:function(t){return this.has(t)||this.tweens.push(t.reset()),this},addCounter:function(t){var e=s(this,t);return this.tweens.push(e.reset()),e},stagger:function(t,e){return u(t,e)},setLagSmooth:function(t,e){return void 0===t&&(t=1/1e-8),void 0===e&&(e=0),this.maxLag=t,this.lagSkip=Math.min(e,this.maxLag),this},setFps:function(t){return void 0===t&&(t=240),this.gap=1e3/t,this.nextTime=1e3*this.time+this.gap,this},getDelta:function(t){var e=Date.now()-this.prevTime;e>this.maxLag&&(this.startTime+=e-this.lagSkip),this.prevTime+=e;var r=this.prevTime-this.startTime,i=r-this.nextTime,n=r-1e3*this.time;return i>0||t?(r/=1e3,this.time=r,this.nextTime+=i+(i>=this.gap?4:this.gap-i)):n=0,n},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(t){void 0===t&&(t=!1);var e=this.getDelta(t);if(!(e<=0)){var r,i;this.processing=!0;var n=[],o=this.tweens;for(r=0;r<o.length;r++)(i=o[r]).update(e)&&n.push(i);var s=n.length;if(s&&o.length>0){for(r=0;r<s;r++){i=n[r];var a=o.indexOf(i);a>-1&&(i.isPendingRemove()||i.isDestroyed())&&(o.splice(a,1),i.destroy())}n.length=0}this.processing=!1}},remove:function(t){return this.processing?t.setPendingRemoveState():(i(this.tweens,t),t.setRemovedState()),this},reset:function(t){return this.existing(t),t.seek(),t.setActiveState(),this},makeActive:function(t){return this.existing(t),t.setActiveState(),this},each:function(t,e){var r,i=[null];for(r=1;r<arguments.length;r++)i.push(arguments[r]);return this.tweens.forEach((function(r){i[0]=r,t.apply(e,i)})),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(t){for(var e=[],r=this.tweens,i=(t=Array.isArray(t)?o(t):[t]).length,n=0;n<r.length;n++)for(var s=r[n],a=0;a<i;a++)!s.isDestroyed()&&s.hasTarget(t[a])&&e.push(s);return e},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(t){return this.timeScale=t,this},isTweening:function(t){for(var e,r=this.tweens,i=0;i<r.length;i++)if((e=r[i]).isPlaying()&&e.hasTarget(t))return!0;return!1},killAll:function(){for(var t=this.processing?this.getTweens():this.tweens,e=0;e<t.length;e++)t[e].destroy();return this.processing||(t.length=0),this},killTweensOf:function(t){for(var e=this.getTweensOf(t),r=0;r<e.length;r++)e[r].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(h.UPDATE,this.update,this),this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.events=null}});a.register("TweenManager",d,"tweens"),t.exports=d},57355:t=>{t.exports=function(t,e,r){return t&&t.hasOwnProperty(e)?t[e]:r}},6113:(t,e,r)=>{var i=r(62640),n=r(35355);t.exports=function(t,e){var r=i.Power0;if("string"==typeof t)if(i.hasOwnProperty(t))r=i[t];else{var o="";if(t.indexOf(".")){var s=(o=t.substring(t.indexOf(".")+1)).toLowerCase();"in"===s?o="easeIn":"out"===s?o="easeOut":"inout"===s&&(o="easeInOut")}t=n(t.substring(0,t.indexOf(".")+1)+o),i.hasOwnProperty(t)&&(r=i[t])}else"function"==typeof t&&(r=t);if(!e)return r;var a=e.slice(0);return a.unshift(0),function(t){return a[0]=t,r.apply(this,a)}}},91389:(t,e,r)=>{var i=r(89318),n=r(77259),o={bezier:i,catmull:n,catmullrom:n,linear:r(28392)};t.exports=function(t){if(null===t)return null;var e=o.linear;return"string"==typeof t?o.hasOwnProperty(t)&&(e=o[t]):"function"==typeof t&&(e=t),e}},55292:t=>{t.exports=function(t,e,r){return t.hasOwnProperty(e)?"function"==typeof t[e]?function(r,i,n,o,s,a){return t[e](r,i,n,o,s,a)}:function(){return t[e]}:"function"==typeof r?r:function(){return r}}},82985:(t,e,r)=>{var i=r(81076);t.exports=function(t){var e,r=[];if(t.hasOwnProperty("props"))for(e in t.props)"_"!==e.substring(0,1)&&r.push({key:e,value:t.props[e]});else for(e in t)-1===i.indexOf(e)&&"_"!==e.substring(0,1)&&r.push({key:e,value:t[e]});return r}},62329:(t,e,r)=>{var i=r(35154);t.exports=function(t){var e=i(t,"targets",null);return null===e||("function"==typeof e&&(e=e.call()),Array.isArray(e)||(e=[e])),e}},17777:(t,e,r)=>{var i=r(30976),n=r(99472);function o(t){return!!t.getActive&&"function"==typeof t.getActive}function s(t){return!!t.getStart&&"function"==typeof t.getStart}function a(t){return!!t.getEnd&&"function"==typeof t.getEnd}var h=function(t,e){var r,u,c=function(t,e,r){return r},l=function(t,e,r){return r},f=null,p=typeof e;if("number"===p)c=function(){return e};else if(Array.isArray(e))l=function(){return e[0]},c=function(){return e[e.length-1]};else if("string"===p){var d=e.toLowerCase(),v="random"===d.substring(0,6),y="int"===d.substring(0,3);if(v||y){var g=d.indexOf("("),m=d.indexOf(")"),x=d.indexOf(",");if(!(g&&m&&x))throw new Error("invalid random() format");var b=parseFloat(d.substring(g+1,x)),w=parseFloat(d.substring(x+1,m));c=v?function(){return n(b,w)}:function(){return i(b,w)}}else{d=d[0];var E=parseFloat(e.substr(2));switch(d){case"+":c=function(t,e,r){return r+E};break;case"-":c=function(t,e,r){return r-E};break;case"*":c=function(t,e,r){return r*E};break;case"/":c=function(t,e,r){return r/E};break;default:c=function(){return parseFloat(e)}}}}else if("function"===p)c=e;else if("object"===p)if(s(u=e)||a(u)||o(u))o(e)&&(f=e.getActive),a(e)&&(c=e.getEnd),s(e)&&(l=e.getStart);else if(e.hasOwnProperty("value"))r=h(t,e.value);else{var T=e.hasOwnProperty("to"),S=e.hasOwnProperty("from"),_=e.hasOwnProperty("start");if(T&&(S||_)){if(r=h(t,e.to),_){var O=h(t,e.start);r.getActive=O.getEnd}if(S){var P=h(t,e.from);r.getStart=P.getEnd}}}return r||(r={getActive:f,getEnd:c,getStart:l}),r};t.exports=h},88032:(t,e,r)=>{var i=r(70402),n=r(69902),o=r(23568),s=r(57355),a=r(6113),h=r(55292),u=r(35154),c=r(17777),l=r(269),f=r(86081);t.exports=function(t,e,r){if(e instanceof f)return e.parent=t,e;r=void 0===r?n:l(n,r);var p=u(e,"from",0),d=u(e,"to",1),v=[{value:p}],y=u(e,"delay",r.delay),g=u(e,"easeParams",r.easeParams),m=u(e,"ease",r.ease),x=c("value",d),b=new f(t,v),w=b.add(0,"value",x.getEnd,x.getStart,x.getActive,a(u(e,"ease",m),u(e,"easeParams",g)),h(e,"delay",y),u(e,"duration",r.duration),s(e,"yoyo",r.yoyo),u(e,"hold",r.hold),u(e,"repeat",r.repeat),u(e,"repeatDelay",r.repeatDelay),!1,!1);w.start=p,w.current=p,b.completeDelay=o(e,"completeDelay",0),b.loop=Math.round(o(e,"loop",0)),b.loopDelay=Math.round(o(e,"loopDelay",0)),b.paused=s(e,"paused",!1),b.persist=s(e,"persist",!1),b.callbackScope=u(e,"callbackScope",b);for(var E=i.TYPES,T=0;T<E.length;T++){var S=E[T],_=u(e,S,!1);if(_){var O=u(e,S+"Params",[]);b.setCallback(S,_,O)}}return b}},93109:(t,e,r)=>{var i=r(6113),n=r(35154),o=r(36383);t.exports=function(t,e){var r;void 0===e&&(e={});var s=n(e,"start",0),a=n(e,"ease",null),h=n(e,"grid",null),u=n(e,"from",0),c="first"===u,l="center"===u,f="last"===u,p="number"==typeof u,d=Array.isArray(t),v=d?parseFloat(t[0]):parseFloat(t),y=d?parseFloat(t[1]):0,g=Math.max(v,y);if(d&&(s+=v),h){var m=h[0],x=h[1],b=0,w=0,E=0,T=0,S=[];f?(b=m-1,w=x-1):p?(b=u%m,w=Math.floor(u/m)):l&&(b=(m-1)/2,w=(x-1)/2);for(var _=o.MIN_SAFE_INTEGER,O=0;O<x;O++){S[O]=[];for(var P=0;P<m;P++){E=b-P,T=w-O;var M=Math.sqrt(E*E+T*T);M>_&&(_=M),S[O][P]=M}}}var A=a?i(a):null;return r=h?function(t,e,r,i){var n,o=0,a=i%m,h=Math.floor(i/m);if(a>=0&&a<m&&h>=0&&h<x&&(o=S[h][a]),d){var u=y-v;n=A?o/_*u*A(o/_):o/_*u}else n=A?o*v*A(o/_):o*v;return n+s}:function(t,e,r,i,n){var o,a,h;return n--,c?o=i:l?o=Math.abs(n/2-i):f?o=n-i:p&&(o=Math.abs(u-i)),d?(h=l?(y-v)/n*(2*o):(y-v)/n*o,a=A?h*A(o/n):h):a=A?n*g*A(o/n):o*v,a+s},r}},8357:(t,e,r)=>{var i=r(70402),n=r(69902),o=r(23568),s=r(57355),a=r(6113),h=r(91389),u=r(55292),c=r(82985),l=r(62329),f=r(35154),p=r(17777),d=r(269),v=r(86081);t.exports=function(t,e,r){if(e instanceof v)return e.parent=t,e;r=void 0===r?n:d(n,r);var y=l(e);!y&&r.targets&&(y=r.targets);for(var g=c(e),m=f(e,"delay",r.delay),x=f(e,"duration",r.duration),b=f(e,"easeParams",r.easeParams),w=f(e,"ease",r.ease),E=f(e,"hold",r.hold),T=f(e,"repeat",r.repeat),S=f(e,"repeatDelay",r.repeatDelay),_=s(e,"yoyo",r.yoyo),O=s(e,"flipX",r.flipX),P=s(e,"flipY",r.flipY),M=f(e,"interpolation",r.interpolation),A=function(t,e,r,i){if("texture"===r){var n=i,o=void 0;Array.isArray(i)?(n=i[0],o=i[1]):i.hasOwnProperty("value")?(n=i.value,Array.isArray(i.value)?(n=i.value[0],o=i.value[1]):"string"==typeof i.value&&(n=i.value)):"string"==typeof i&&(n=i),t.addFrame(e,n,o,u(i,"delay",m),f(i,"duration",x),f(i,"hold",E),f(i,"repeat",T),f(i,"repeatDelay",S),s(i,"flipX",O),s(i,"flipY",P))}else{var c=p(r,i),l=h(f(i,"interpolation",M));t.add(e,r,c.getEnd,c.getStart,c.getActive,a(f(i,"ease",w),f(i,"easeParams",b)),u(i,"delay",m),f(i,"duration",x),s(i,"yoyo",_),f(i,"hold",E),f(i,"repeat",T),f(i,"repeatDelay",S),s(i,"flipX",O),s(i,"flipY",P),l,l?i:null)}},L=new v(t,y),C=0;C<g.length;C++)for(var R=g[C].key,k=g[C].value,F=0;F<y.length;F++)"scale"!==R||y[F].hasOwnProperty("scale")?A(L,F,R,k):(A(L,F,"scaleX",k),A(L,F,"scaleY",k));L.completeDelay=o(e,"completeDelay",0),L.loop=Math.round(o(e,"loop",0)),L.loopDelay=Math.round(o(e,"loopDelay",0)),L.paused=s(e,"paused",!1),L.persist=s(e,"persist",!1),L.callbackScope=f(e,"callbackScope",L);for(var I=i.TYPES,D=0;D<I.length;D++){var j=I[D],B=f(e,j,!1);if(B){var N=f(e,j+"Params",[]);L.setCallback(j,B,N)}}return L}},26012:(t,e,r)=>{var i=r(70402),n=r(23568),o=r(57355),s=r(62329),a=r(35154),h=r(8357),u=r(43960);t.exports=function(t,e){if(e instanceof u)return e.parent=t,e;var r,c=new u(t);c.startDelay=a(e,"delay",0),c.completeDelay=n(e,"completeDelay",0),c.loop=Math.round(n(e,"loop",a(e,"repeat",0))),c.loopDelay=Math.round(n(e,"loopDelay",a(e,"repeatDelay",0))),c.paused=o(e,"paused",!1),c.persist=o(e,"persist",!1),c.callbackScope=a(e,"callbackScope",c);var l=i.TYPES;for(r=0;r<l.length;r++){var f=l[r],p=a(e,f,!1);if(p){var d=a(e,f+"Params",[]);c.setCallback(f,p,d)}}var v=a(e,"tweens",null);if(Array.isArray(v)){var y=[],g=s(e),m=void 0;for(g&&(m={targets:g}),r=0;r<v.length;r++)y.push(h(c,v[r],m));c.add(y)}return c}},30231:(t,e,r)=>{t.exports={GetBoolean:r(57355),GetEaseFunction:r(6113),GetInterpolationFunction:r(91389),GetNewValue:r(55292),GetProps:r(82985),GetTargets:r(62329),GetValueOp:r(17777),NumberTweenBuilder:r(88032),StaggerBuilder:r(93109),TweenBuilder:r(8357)}},73685:t=>{t.exports="active"},98540:t=>{t.exports="complete"},67233:t=>{t.exports="loop"},2859:t=>{t.exports="pause"},98336:t=>{t.exports="repeat"},25764:t=>{t.exports="resume"},32193:t=>{t.exports="start"},84371:t=>{t.exports="stop"},70766:t=>{t.exports="update"},55659:t=>{t.exports="yoyo"},842:(t,e,r)=>{t.exports={TWEEN_ACTIVE:r(73685),TWEEN_COMPLETE:r(98540),TWEEN_LOOP:r(67233),TWEEN_PAUSE:r(2859),TWEEN_RESUME:r(25764),TWEEN_REPEAT:r(98336),TWEEN_START:r(32193),TWEEN_STOP:r(84371),TWEEN_UPDATE:r(70766),TWEEN_YOYO:r(55659)}},43066:(t,e,r)=>{var i={States:r(86353),Builders:r(30231),Events:r(842),TweenManager:r(40382),Tween:r(86081),TweenData:r(48177),TweenFrameData:r(42220),BaseTween:r(70402),TweenChain:r(43960)};t.exports=i},70402:(t,e,r)=>{var i=r(83419),n=r(50792),o=r(842),s=r(86353),a=new i({Extends:n,initialize:function(t){n.call(this),this.parent=t,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=s.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(o.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(o.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(o.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(o.TWEEN_COMPLETE,"onComplete")},complete:function(t){return void 0===t&&(t=0),t?(this.setCompleteDelayState(),this.countdown=t):this.onCompleteHandler(),this},completeAfterLoop:function(t){return void 0===t&&(t=0),this.loopCounter>t&&(this.loopCounter=t),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return!this.parent||this.isRemoved()||this.isPendingRemove()||this.isDestroyed()||(this.dispatchEvent(o.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(t){this.countdown-=t,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(o.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(t){return this.countdown-=t,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(o.TWEEN_START,"onStart"),t=0),t},updateCompleteDelay:function(t){this.countdown-=t,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(t,e,r){return void 0===r&&(r=[]),this.callbacks.hasOwnProperty(t)&&(this.callbacks[t]={func:e,params:r}),this},setPendingState:function(){this.state=s.PENDING},setActiveState:function(){this.state=s.ACTIVE},setLoopDelayState:function(){this.state=s.LOOP_DELAY},setCompleteDelayState:function(){this.state=s.COMPLETE_DELAY},setStartDelayState:function(){this.state=s.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=s.PENDING_REMOVE},setRemovedState:function(){this.state=s.REMOVED},setFinishedState:function(){this.state=s.FINISHED},setDestroyedState:function(){this.state=s.DESTROYED},isPending:function(){return this.state===s.PENDING},isActive:function(){return this.state===s.ACTIVE},isLoopDelayed:function(){return this.state===s.LOOP_DELAY},isCompleteDelayed:function(){return this.state===s.COMPLETE_DELAY},isStartDelayed:function(){return this.state===s.START_DELAY},isPendingRemove:function(){return this.state===s.PENDING_REMOVE},isRemoved:function(){return this.state===s.REMOVED},isFinished:function(){return this.state===s.FINISHED},isDestroyed:function(){return this.state===s.DESTROYED},destroy:function(){this.data&&this.data.forEach((function(t){t.destroy()})),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});a.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],t.exports=a},95042:(t,e,r)=>{var i=r(83419),n=r(842),o=r(86353),s=new i({initialize:function(t,e,r,i,n,o,s,a,h,u){this.tween=t,this.targetIndex=e,this.duration=i,this.totalDuration=0,this.delay=0,this.getDelay=r,this.yoyo=n,this.hold=o,this.repeat=s,this.repeatDelay=a,this.repeatCounter=0,this.flipX=h,this.flipY=u,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(t){void 0===t&&(t=this.current),this.tween.targets[this.targetIndex][this.key]=t},setCreatedState:function(){this.state=o.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=o.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=o.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=o.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=o.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=o.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=o.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=o.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===o.CREATED},isDelayed:function(){return this.state===o.DELAY},isPendingRender:function(){return this.state===o.PENDING_RENDER},isPlayingForward:function(){return this.state===o.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===o.PLAYING_BACKWARD},isHolding:function(){return this.state===o.HOLD_DELAY},isRepeating:function(){return this.state===o.REPEAT_DELAY},isComplete:function(){return this.state===o.COMPLETE},setStateFromEnd:function(t){this.yoyo?this.onRepeat(t,!0,!0):this.repeatCounter>0?this.onRepeat(t,!0,!1):this.setCompleteState()},setStateFromStart:function(t){this.repeatCounter>0?this.onRepeat(t,!1):this.setCompleteState()},reset:function(){var t=this.tween,e=t.totalTargets,r=this.targetIndex,i=t.targets[r],n=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(i,n,0,r,e,t),this.repeatCounter=-1===this.repeat?o.MAX:this.repeat,this.setPendingRenderState();var s=this.duration+this.hold;this.yoyo&&(s+=this.duration);var a=s+this.repeatDelay;this.totalDuration=this.delay+s,-1===this.repeat?(this.totalDuration+=a*o.MAX,t.isInfinite=!0):this.repeat>0&&(this.totalDuration+=a*this.repeat),this.totalDuration>t.duration&&(t.duration=this.totalDuration),this.delay<t.startDelay&&(t.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(t,e,r){var i=this.tween,o=i.totalTargets,s=this.targetIndex,a=i.targets[s],h=this.key,u="texture"!==h;if(this.elapsed=t,this.progress=t/this.duration,this.flipX&&a.toggleFlipX(),this.flipY&&a.toggleFlipY(),u&&(e||r)&&(this.start=this.getStartValue(a,h,this.start,s,o,i)),r)return this.setPlayingBackwardState(),void this.dispatchEvent(n.TWEEN_YOYO,"onYoyo");this.repeatCounter--,u&&(this.end=this.getEndValue(a,h,this.start,s,o,i)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-t,u&&(this.current=this.start,a[h]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(n.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});t.exports=s},69902:t=>{t.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null}},81076:t=>{t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},86081:(t,e,r)=>{var i=r(70402),n=r(83419),o=r(842),s=r(44603),a=r(39429),h=r(36383),u=r(86353),c=r(48177),l=r(42220),f=new n({Extends:i,initialize:function(t,e){i.call(this,t),this.targets=e,this.totalTargets=e.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(t,e,r,i,n,o,s,a,h,u,l,f,p,d,v,y){var g=new c(this,t,e,r,i,n,o,s,a,h,u,l,f,p,d,v,y);return this.totalData=this.data.push(g),g},addFrame:function(t,e,r,i,n,o,s,a,h,u){var c=new l(this,t,e,r,i,n,o,s,a,h,u);return this.totalData=this.data.push(c),c},getValue:function(t){void 0===t&&(t=0);var e=null;return this.data&&(e=this.data[t].current),e},hasTarget:function(t){return this.targets&&-1!==this.targets.indexOf(t)},updateTo:function(t,e,r){if(void 0===r&&(r=!1),"texture"!==t)for(var i=0;i<this.totalData;i++){var n=this.data[i];n.key===t&&(n.isPlayingForward()||n.isPlayingBackward())&&(n.end=e,r&&(n.start=n.current))}return this},restart:function(){switch(this.state){case u.REMOVED:case u.FINISHED:this.seek(),this.parent.makeActive(this);break;case u.PENDING:case u.PENDING_REMOVE:this.parent.reset(this);break;case u.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek()}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(o.TWEEN_LOOP,"onLoop"));else{if(!(this.completeDelay>0))return this.onCompleteHandler(),!0;this.countdown=this.completeDelay,this.setCompleteDelayState()}return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,i.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(t,e,r){if(void 0===t&&(t=0),void 0===e&&(e=16.6),void 0===r&&(r=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;r||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(o.TWEEN_ACTIVE,"onActive");var i=this.paused;if(this.paused=!1,t>0){for(var n=Math.floor(t/e),s=t-n*e,a=0;a<n;a++)this.update(e);s>0&&this.update(s)}return this.paused=i,this.isSeeking=!1,this},initTweenData:function(t){void 0===t&&(t=!1),this.duration=0,this.startDelay=h.MAX_SAFE_INTEGER;for(var e=this.data,r=0;r<this.totalData;r++)e[r].reset(t);this.duration=Math.max(this.duration,.01);var i=this.duration,n=this.completeDelay,o=this.loopCounter,s=this.loopDelay;this.totalDuration=o>0?i+n+(i+s)*o:i+n},reset:function(t){return void 0===t&&(t=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,-1===this.loop&&(this.isInfinite=!0,this.loopCounter=u.MAX),t||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(o.TWEEN_ACTIVE,"onActive")),this},update:function(t){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(t*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(t),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(t),!1;this.hasStarted||(this.startDelay-=t,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(o.TWEEN_START,"onStart"),t=0));var e=!1;if(this.isActive())for(var r=this.data,i=0;i<this.totalData;i++)r[i].update(t)&&(e=!0);this.elapsed+=t,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=t,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),e||this.nextState();var n=this.isPendingRemove();return n&&this.persist&&(this.setFinishedState(),n=!1),n},forward:function(t){return this.update(t),this},rewind:function(t){return this.update(-t),this},dispatchEvent:function(t,e){if(!this.isSeeking){this.emit(t,this,this.targets);var r=this.callbacks[e];r&&r.func.apply(this.callbackScope,[this,this.targets].concat(r.params))}},destroy:function(){i.prototype.destroy.call(this),this.targets=null}});a.register("tween",(function(t){return this.scene.sys.tweens.add(t)})),s.register("tween",(function(t){return this.scene.sys.tweens.create(t)})),t.exports=f},43960:(t,e,r)=>{var i=r(72905),n=r(70402),o=r(83419),s=r(842),a=r(44603),h=r(39429),u=r(86353),c=new o({Extends:n,initialize:function(t){n.call(this,t),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=-1===this.loop?u.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(s.TWEEN_ACTIVE,"onActive"),this},add:function(t){var e=this.parent.create(t);Array.isArray(e)||(e=[e]);for(var r=this.data,i=0;i<e.length;i++){var n=e[i];n.parent=this,r.push(n.reset())}return this.totalData=r.length,this},remove:function(t){return i(this.data,t),t.setRemovedState(),t===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(t){for(var e=this.data,r=0;r<this.totalData;r++)if(e[r].hasTarget(t))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(t){return t.seek(),t.setActiveState(),this},makeActive:function(t){return t.reset(),t.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(s.TWEEN_LOOP,"onLoop"));else{if(!(this.completeDelay>0))return this.onCompleteHandler(),!0;this.countdown=this.completeDelay,this.setCompleteDelayState()}return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var t=this.data,e=this.totalData,r=0;r<e;r++)t[r].reset(!1);this.currentIndex=0,this.currentTween=t[0]},update:function(t){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;t*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(t):this.isCompleteDelayed()?this.updateCompleteDelay(t):this.isStartDelayed()&&(t=this.updateStartCountdown(t));var e=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(t)&&this.nextTween()&&this.nextState(),(e=this.isPendingRemove())&&this.persist&&(this.setFinishedState(),e=!1)),e},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData||(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(t){this.currentIndex=t,this.currentTween=this.data[t],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(s.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(t,e){this.emit(t,this);var r=this.callbacks[e];r&&r.func.apply(this.callbackScope,[this].concat(r.params))},destroy:function(){n.prototype.destroy.call(this),this.currentTween=null}});h.register("tweenchain",(function(t){return this.scene.sys.tweens.chain(t)})),a.register("tweenchain",(function(t){return this.scene.sys.tweens.create(t)})),t.exports=c},48177:(t,e,r)=>{var i=r(95042),n=r(45319),o=r(83419),s=r(842),a=new o({Extends:i,initialize:function(t,e,r,n,o,s,a,h,u,c,l,f,p,d,v,y,g){i.call(this,t,e,h,u,c,l,f,p,d,v),this.key=r,this.getActiveValue=s,this.getEndValue=n,this.getStartValue=o,this.ease=a,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=y,this.interpolationData=g},reset:function(t){i.prototype.reset.call(this);var e=this.tween.targets[this.targetIndex],r=this.key;t&&(e[r]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(e[r]=this.getActiveValue(e,r,0))},update:function(t){var e=this.tween,r=e.totalTargets,i=this.targetIndex,o=e.targets[i],a=this.key;if(!o)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=t,this.elapsed<=0&&(this.elapsed=0,t=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(s.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(o,a,o[a],i,r,e),this.end=this.getEndValue(o,a,this.start,i,r,e),this.current=this.start,o[a]=this.start,this.setPlayingForwardState(),!0;var h=this.isPlayingForward(),u=this.isPlayingBackward();if(h||u){var c=this.elapsed,l=this.duration,f=0,p=!1;(c+=t)>=l?(f=c-l,c=l,p=!0):c<0&&(c=0);var d=n(c/l,0,1);if(this.elapsed=c,this.progress=d,this.previous=this.current,p)h?(this.current=this.end,o[a]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(f)):(this.current=this.start,o[a]=this.start,this.setStateFromStart(f));else{h||(d=1-d);var v=this.ease(d);this.interpolation?this.current=this.interpolation(this.interpolationData,v):this.current=this.start+(this.end-this.start)*v,o[a]=this.current}this.dispatchEvent(s.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(t,e){var r=this.tween;if(!r.isSeeking){var i=r.targets[this.targetIndex],n=this.key,o=this.current,s=this.previous;r.emit(t,r,n,i,o,s);var a=r.callbacks[e];a&&a.func.apply(r.callbackScope,[r,i,n,o,s].concat(a.params))}},destroy:function(){i.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});t.exports=a},42220:(t,e,r)=>{var i=r(95042),n=r(45319),o=r(83419),s=r(842),a=new o({Extends:i,initialize:function(t,e,r,n,o,s,a,h,u,c,l){i.call(this,t,e,o,s,!1,a,h,u,c,l),this.key="texture",this.startTexture=null,this.endTexture=r,this.startFrame=null,this.endFrame=n,this.yoyo=0!==h},reset:function(t){i.prototype.reset.call(this);var e=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=e.texture.key,this.startFrame=e.frame.name),t&&e.setTexture(this.startTexture,this.startFrame)},update:function(t){var e=this.tween,r=this.targetIndex,i=e.targets[r];if(!i)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=t,this.elapsed<=0&&(this.elapsed=0,t=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(s.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&i.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var o=this.isPlayingForward(),a=this.isPlayingBackward();if(o||a){var h=this.elapsed,u=this.duration,c=0,l=!1;(h+=t)>=u?(c=h-u,h=u,l=!0):h<0&&(h=0);var f=n(h/u,0,1);this.elapsed=h,this.progress=f,l&&(o?(i.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(c)):(i.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(c))),this.dispatchEvent(s.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(t,e){var r=this.tween;if(!r.isSeeking){var i=r.targets[this.targetIndex],n=this.key;r.emit(t,r,n,i);var o=r.callbacks[e];o&&o.func.apply(r.callbackScope,[r,i,n].concat(o.params))}},destroy:function(){i.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});t.exports=a},86353:t=>{t.exports={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999}},83419:t=>{function e(t,e,r){var i=r?t[e]:Object.getOwnPropertyDescriptor(t,e);return!r&&i.value&&"object"==typeof i.value&&(i=i.value),!(!i||!function(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(i))&&(void 0===i.enumerable&&(i.enumerable=!0),void 0===i.configurable&&(i.configurable=!0),i)}function r(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!!r&&(r.value&&"object"==typeof r.value&&(r=r.value),!1===r.configurable)}function i(t,i,n,s){for(var a in i)if(i.hasOwnProperty(a)){var h=e(i,a,n);if(!1!==h){if(r((s||t).prototype,a)){if(o.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,a,h)}else t.prototype[a]=i[a]}}function n(t,e){if(e){Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++)i(t,e[r].prototype||e[r])}}function o(t){var e,r;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");e=t.initialize,delete t.initialize}else if(t.Extends){var o=t.Extends;e=function(){o.apply(this,arguments)}}else e=function(){};t.Extends?(e.prototype=Object.create(t.Extends.prototype),e.prototype.constructor=e,r=t.Extends,delete t.Extends):e.prototype.constructor=e;var s=null;return t.Mixins&&(s=t.Mixins,delete t.Mixins),n(e,s),i(e,t,!0,r),e}o.extend=i,o.mixin=n,o.ignoreFinals=!1,t.exports=o},29747:t=>{t.exports=function(){}},20242:t=>{t.exports=function(){return null}},71146:t=>{t.exports=function(t,e,r,i,n){if(void 0===n&&(n=t),r>0){var o=r-t.length;if(o<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.push(e),i&&i.call(n,e),e):null;for(var s=e.length-1;s>=0;)-1!==t.indexOf(e[s])&&e.splice(s,1),s--;if(0===(s=e.length))return null;r>0&&s>o&&(e.splice(o),s=o);for(var a=0;a<s;a++){var h=e[a];t.push(h),i&&i.call(n,h)}return e}},51067:t=>{t.exports=function(t,e,r,i,n,o){if(void 0===r&&(r=0),void 0===o&&(o=t),i>0){var s=i-t.length;if(s<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.splice(r,0,e),n&&n.call(o,e),e):null;for(var a=e.length-1;a>=0;)-1!==t.indexOf(e[a])&&e.pop(),a--;if(0===(a=e.length))return null;i>0&&a>s&&(e.splice(s),a=s);for(var h=a-1;h>=0;h--){var u=e[h];t.splice(r,0,u),n&&n.call(o,u)}return e}},66905:t=>{t.exports=function(t,e){var r=t.indexOf(e);return-1!==r&&r<t.length&&(t.splice(r,1),t.push(e)),e}},21612:(t,e,r)=>{var i=r(82011);t.exports=function(t,e,r,n,o){void 0===n&&(n=0),void 0===o&&(o=t.length);var s=0;if(i(t,n,o))for(var a=n;a<o;a++)t[a][e]===r&&s++;return s}},95428:t=>{t.exports=function(t,e,r){var i,n=[null];for(i=3;i<arguments.length;i++)n.push(arguments[i]);for(i=0;i<t.length;i++)n[0]=t[i],e.apply(r,n);return t}},36914:(t,e,r)=>{var i=r(82011);t.exports=function(t,e,r,n,o){if(void 0===n&&(n=0),void 0===o&&(o=t.length),i(t,n,o)){var s,a=[null];for(s=5;s<arguments.length;s++)a.push(arguments[s]);for(s=n;s<o;s++)a[0]=t[s],e.apply(r,a)}return t}},81957:t=>{t.exports=function(t,e,r){if(!e.length)return NaN;if(1===e.length)return e[0];var i,n,o=1;if(r){if(t<e[0][r])return e[0];for(;e[o][r]<t;)o++}else for(;e[o]<t;)o++;return o>e.length&&(o=e.length),r?(i=e[o-1][r],(n=e[o][r])-t<=t-i?e[o]:e[o-1]):(i=e[o-1],(n=e[o])-t<=t-i?n:i)}},43491:t=>{var e=function(t,r){void 0===r&&(r=[]);for(var i=0;i<t.length;i++)Array.isArray(t[i])?e(t[i],r):r.push(t[i]);return r};t.exports=e},46710:(t,e,r)=>{var i=r(82011);t.exports=function(t,e,r,n,o){void 0===n&&(n=0),void 0===o&&(o=t.length);var s=[];if(i(t,n,o))for(var a=n;a<o;a++){var h=t[a];(!e||e&&void 0===r&&h.hasOwnProperty(e)||e&&void 0!==r&&h[e]===r)&&s.push(h)}return s}},58731:(t,e,r)=>{var i=r(82011);t.exports=function(t,e,r,n,o){if(void 0===n&&(n=0),void 0===o&&(o=t.length),i(t,n,o))for(var s=n;s<o;s++){var a=t[s];if(!e||e&&void 0===r&&a.hasOwnProperty(e)||e&&void 0!==r&&a[e]===r)return a}return null}},26546:t=>{t.exports=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length);var i=e+Math.floor(Math.random()*r);return void 0===t[i]?null:t[i]}},85835:t=>{t.exports=function(t,e,r){if(e===r)return t;var i=t.indexOf(e),n=t.indexOf(r);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");return i>n||(t.splice(i,1),n===t.length-1?t.push(e):t.splice(n,0,e)),t}},83371:t=>{t.exports=function(t,e,r){if(e===r)return t;var i=t.indexOf(e),n=t.indexOf(r);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");return i<n||(t.splice(i,1),0===n?t.unshift(e):t.splice(n,0,e)),t}},70864:t=>{t.exports=function(t,e){var r=t.indexOf(e);if(r>0){var i=t[r-1],n=t.indexOf(i);t[r]=i,t[n]=e}return t}},69693:t=>{t.exports=function(t,e,r){var i=t.indexOf(e);if(-1===i||r<0||r>=t.length)throw new Error("Supplied index out of bounds");return i!==r&&(t.splice(i,1),t.splice(r,0,e)),e}},40853:t=>{t.exports=function(t,e){var r=t.indexOf(e);if(-1!==r&&r<t.length-1){var i=t[r+1],n=t.indexOf(i);t[r]=i,t[n]=e}return t}},20283:t=>{t.exports=function(t,e,r,i){var n,o=[],s=!1;if((r||i)&&(s=!0,r||(r=""),i||(i="")),e<t)for(n=t;n>=e;n--)s?o.push(r+n.toString()+i):o.push(n);else for(n=t;n<=e;n++)s?o.push(r+n.toString()+i):o.push(n);return o}},593:(t,e,r)=>{var i=r(2284);t.exports=function(t,e,r){void 0===t&&(t=0),void 0===e&&(e=null),void 0===r&&(r=1),null===e&&(e=t,t=0);for(var n=[],o=Math.max(i((e-t)/(r||1)),0),s=0;s<o;s++)n.push(t),t+=r;return n}},43886:t=>{function e(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function r(t,e){return t<e?-1:t>e?1:0}var i=function(t,n,o,s,a){for(void 0===o&&(o=0),void 0===s&&(s=t.length-1),void 0===a&&(a=r);s>o;){if(s-o>600){var h=s-o+1,u=n-o+1,c=Math.log(h),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(h-l)/h)*(u-h/2<0?-1:1),p=Math.max(o,Math.floor(n-u*l/h+f)),d=Math.min(s,Math.floor(n+(h-u)*l/h+f));i(t,n,p,d,a)}var v=t[n],y=o,g=s;for(e(t,o,n),a(t[s],v)>0&&e(t,o,s);y<g;){for(e(t,y,g),y++,g--;a(t[y],v)<0;)y++;for(;a(t[g],v)>0;)g--}0===a(t[o],v)?e(t,o,g):e(t,++g,s),g<=n&&(o=g+1),n<=g&&(s=g-1)}};t.exports=i},88492:(t,e,r)=>{var i=r(35154),n=r(33680),o=function(t,e,r){for(var i=[],n=0;n<t.length;n++)for(var o=0;o<e.length;o++)for(var s=0;s<r;s++)i.push({a:t[n],b:e[o]});return i};t.exports=function(t,e,r){var s=i(r,"max",0),a=i(r,"qty",1),h=i(r,"random",!1),u=i(r,"randomB",!1),c=i(r,"repeat",0),l=i(r,"yoyo",!1),f=[];if(u&&n(e),-1===c)if(0===s)c=0;else{var p=t.length*e.length*a;l&&(p*=2),c=Math.ceil(s/p)}for(var d=0;d<=c;d++){var v=o(t,e,a);h&&n(v),f=f.concat(v),l&&(v.reverse(),f=f.concat(v))}return s&&f.splice(s),f}},72905:(t,e,r)=>{var i=r(19133);t.exports=function(t,e,r,n){var o;if(void 0===n&&(n=t),!Array.isArray(e))return-1!==(o=t.indexOf(e))?(i(t,o),r&&r.call(n,e),e):null;for(var s=e.length-1,a=[];s>=0;){var h=e[s];-1!==(o=t.indexOf(h))&&(i(t,o),a.push(h),r&&r.call(n,h)),s--}return a}},60248:(t,e,r)=>{var i=r(19133);t.exports=function(t,e,r,n){if(void 0===n&&(n=t),e<0||e>t.length-1)throw new Error("Index out of bounds");var o=i(t,e);return r&&r.call(n,o),o}},81409:(t,e,r)=>{var i=r(82011);t.exports=function(t,e,r,n,o){if(void 0===e&&(e=0),void 0===r&&(r=t.length),void 0===o&&(o=t),i(t,e,r)){var s=r-e,a=t.splice(e,s);if(n)for(var h=0;h<a.length;h++){var u=a[h];n.call(o,u)}return a}return[]}},31856:(t,e,r)=>{var i=r(19133);t.exports=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length);var n=e+Math.floor(Math.random()*r);return i(t,n)}},42169:t=>{t.exports=function(t,e,r){var i=t.indexOf(e),n=t.indexOf(r);return-1!==i&&-1===n&&(t[i]=r,!0)}},86003:t=>{t.exports=function(t,e){void 0===e&&(e=1);for(var r=null,i=0;i<e;i++)r=t.shift(),t.push(r);return r}},49498:t=>{t.exports=function(t,e){void 0===e&&(e=1);for(var r=null,i=0;i<e;i++)r=t.pop(),t.unshift(r);return r}},82011:t=>{t.exports=function(t,e,r,i){var n=t.length;if(e<0||e>n||e>=r||r>n){if(i)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},89545:t=>{t.exports=function(t,e){var r=t.indexOf(e);return-1!==r&&r>0&&(t.splice(r,1),t.unshift(e)),e}},17810:(t,e,r)=>{var i=r(82011);t.exports=function(t,e,r,n,o){if(void 0===n&&(n=0),void 0===o&&(o=t.length),i(t,n,o))for(var s=n;s<o;s++){var a=t[s];a.hasOwnProperty(e)&&(a[e]=r)}return t}},33680:t=>{t.exports=function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[r],t[r]=i}return t}},90126:t=>{t.exports=function(t){var e=/\D/g;return t.sort((function(t,r){return parseInt(t.replace(e,""),10)-parseInt(r.replace(e,""),10)})),t}},19133:t=>{t.exports=function(t,e){if(!(e>=t.length)){for(var r=t.length-1,i=t[e],n=e;n<r;n++)t[n]=t[n+1];return t.length=r,i}}},19186:(t,e,r)=>{var i=r(82264);function n(t,e){return String(t).localeCompare(e)}function o(t,e,r,i){var n,o,s,a,h,u=t.length,c=0,l=2*r;for(n=0;n<u;n+=l)for(s=(o=n+r)+r,o>u&&(o=u),s>u&&(s=u),a=n,h=o;;)if(a<o&&h<s)e(t[a],t[h])<=0?i[c++]=t[a++]:i[c++]=t[h++];else if(a<o)i[c++]=t[a++];else{if(!(h<s))break;i[c++]=t[h++]}}t.exports=function(t,e){if(void 0===e&&(e=n),!t||t.length<2)return t;if(i.features.stableSort)return t.sort(e);var r=function(t,e){var r=t.length;if(r<=1)return t;for(var i=new Array(r),n=1;n<r;n*=2){o(t,e,n,i);var s=t;t=i,i=s}return t}(t,e);return r!==t&&o(r,null,t.length,t),t}},25630:t=>{t.exports=function(t,e,r){if(e===r)return t;var i=t.indexOf(e),n=t.indexOf(r);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");return t[i]=r,t[n]=e,t}},37105:(t,e,r)=>{t.exports={Matrix:r(54915),Add:r(71146),AddAt:r(51067),BringToTop:r(66905),CountAllMatching:r(21612),Each:r(95428),EachInRange:r(36914),FindClosestInSorted:r(81957),Flatten:r(43491),GetAll:r(46710),GetFirst:r(58731),GetRandom:r(26546),MoveDown:r(70864),MoveTo:r(69693),MoveUp:r(40853),MoveAbove:r(85835),MoveBelow:r(83371),NumberArray:r(20283),NumberArrayStep:r(593),QuickSelect:r(43886),Range:r(88492),Remove:r(72905),RemoveAt:r(60248),RemoveBetween:r(81409),RemoveRandomElement:r(31856),Replace:r(42169),RotateLeft:r(86003),RotateRight:r(49498),SafeRange:r(82011),SendToBack:r(89545),SetAll:r(17810),Shuffle:r(33680),SortByDigits:r(90126),SpliceOne:r(19133),StableSort:r(19186),Swap:r(25630)}},86922:t=>{t.exports=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))return!1;for(var e=t[0].length,r=1;r<t.length;r++)if(t[r].length!==e)return!1;return!0}},63362:(t,e,r)=>{var i=r(41836),n=r(86922);t.exports=function(t){var e="";if(!n(t))return e;for(var r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++){var s=t[r][o].toString();e+="undefined"!==s?i(s,2):"?",o<t[r].length-1&&(e+=" |")}if(r<t.length-1){e+="\n";for(var a=0;a<t[r].length;a++)e+="---",a<t[r].length-1&&(e+="+");e+="\n"}}return e}},92598:t=>{t.exports=function(t){return t.reverse()}},21224:t=>{t.exports=function(t){for(var e=0;e<t.length;e++)t[e].reverse();return t}},98717:(t,e,r)=>{var i=r(37829);t.exports=function(t){return i(t,180)}},44657:(t,e,r)=>{var i=r(37829);t.exports=function(t,e){void 0===e&&(e=1);for(var r=0;r<e;r++)t=i(t,90);return t}},37829:(t,e,r)=>{var i=r(86922),n=r(2429);t.exports=function(t,e){if(void 0===e&&(e=90),!i(t))return null;if("string"!=typeof e&&(e=(e%360+360)%360),90===e||-270===e||"rotateLeft"===e)(t=n(t)).reverse();else if(-90===e||270===e||"rotateRight"===e)t.reverse(),t=n(t);else if(180===Math.abs(e)||"rotate180"===e){for(var r=0;r<t.length;r++)t[r].reverse();t.reverse()}return t}},92632:(t,e,r)=>{var i=r(37829);t.exports=function(t,e){void 0===e&&(e=1);for(var r=0;r<e;r++)t=i(t,-90);return t}},69512:(t,e,r)=>{var i=r(86003),n=r(49498);t.exports=function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),0!==r&&(r<0?i(t,Math.abs(r)):n(t,r)),0!==e)for(var o=0;o<t.length;o++){var s=t[o];e<0?i(s,Math.abs(e)):n(s,e)}return t}},2429:t=>{t.exports=function(t){for(var e=t.length,r=t[0].length,i=new Array(r),n=0;n<r;n++){i[n]=new Array(e);for(var o=e-1;o>-1;o--)i[n][o]=t[o][n]}return i}},54915:(t,e,r)=>{t.exports={CheckMatrix:r(86922),MatrixToString:r(63362),ReverseColumns:r(92598),ReverseRows:r(21224),Rotate180:r(98717),RotateLeft:r(44657),RotateMatrix:r(37829),RotateRight:r(92632),Translate:r(69512),TransposeMatrix:r(2429)}},71334:t=>{var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function(t,r){for(var i=new Uint8Array(t),n=i.length,o=r?"data:"+r+";base64,":"",s=0;s<n;s+=3)o+=e[i[s]>>2],o+=e[(3&i[s])<<4|i[s+1]>>4],o+=e[(15&i[s+1])<<2|i[s+2]>>6],o+=e[63&i[s+2]];return n%3==2?o=o.substring(0,o.length-1)+"=":n%3==1&&(o=o.substring(0,o.length-2)+"=="),o}},53134:t=>{for(var e=new Uint8Array(256),r=0;r<64;r++)e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(r)]=r;t.exports=function(t){var r,i,n,o,s=(t=t.substr(t.indexOf(",")+1)).length,a=.75*s,h=0;"="===t[s-1]&&(a--,"="===t[s-2]&&a--);for(var u=new ArrayBuffer(a),c=new Uint8Array(u),l=0;l<s;l+=4)r=e[t.charCodeAt(l)],i=e[t.charCodeAt(l+1)],n=e[t.charCodeAt(l+2)],o=e[t.charCodeAt(l+3)],c[h++]=r<<2|i>>4,c[h++]=(15&i)<<4|n>>2,c[h++]=(3&n)<<6|63&o;return u}},65839:(t,e,r)=>{t.exports={ArrayBufferToBase64:r(71334),Base64ToArrayBuffer:r(53134)}},91799:(t,e,r)=>{t.exports={Array:r(37105),Base64:r(65839),Objects:r(1183),String:r(31749),NOOP:r(29747),NULL:r(20242)}},41786:t=>{t.exports=function(t){var e={};for(var r in t)Array.isArray(t[r])?e[r]=t[r].slice(0):e[r]=t[r];return e}},62644:t=>{var e=function(t){var r,i,n;if("object"!=typeof t||null===t)return t;for(n in r=Array.isArray(t)?[]:{},t)i=t[n],r[n]=e(i);return r};t.exports=e},79291:(t,e,r)=>{var i=r(41212),n=function(){var t,e,r,o,s,a,h=arguments[0]||{},u=1,c=arguments.length,l=!1;for("boolean"==typeof h&&(l=h,h=arguments[1]||{},u=2),c===u&&(h=this,--u);u<c;u++)if(null!=(t=arguments[u]))for(e in t)r=h[e],h!==(o=t[e])&&(l&&o&&(i(o)||(s=Array.isArray(o)))?(s?(s=!1,a=r&&Array.isArray(r)?r:[]):a=r&&i(r)?r:{},h[e]=n(l,a,o)):void 0!==o&&(h[e]=o));return h};t.exports=n},23568:(t,e,r)=>{var i=r(75508),n=r(35154);t.exports=function(t,e,r){var o=n(t,e,null);if(null===o)return r;if(Array.isArray(o))return i.RND.pick(o);if("object"==typeof o){if(o.hasOwnProperty("randInt"))return i.RND.integerInRange(o.randInt[0],o.randInt[1]);if(o.hasOwnProperty("randFloat"))return i.RND.realInRange(o.randFloat[0],o.randFloat[1])}else if("function"==typeof o)return o(e);return o}},95540:t=>{t.exports=function(t,e,r){var i=typeof t;return t&&"number"!==i&&"string"!==i&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:r}},82840:(t,e,r)=>{var i=r(35154),n=r(45319);t.exports=function(t,e,r,o,s){void 0===s&&(s=r);var a=i(t,e,s);return n(a,r,o)}},35154:t=>{t.exports=function(t,e,r,i){if(!t&&!i||"number"==typeof t)return r;if(t&&t.hasOwnProperty(e))return t[e];if(i&&i.hasOwnProperty(e))return i[e];if(-1!==e.indexOf(".")){for(var n=e.split("."),o=t,s=i,a=r,h=r,u=!0,c=!0,l=0;l<n.length;l++)o&&o.hasOwnProperty(n[l])?(a=o[n[l]],o=o[n[l]]):u=!1,s&&s.hasOwnProperty(n[l])?(h=s[n[l]],s=s[n[l]]):c=!1;return u?a:c?h:r}return r}},69036:t=>{t.exports=function(t,e){for(var r=0;r<e.length;r++)if(!t.hasOwnProperty(e[r]))return!1;return!0}},1985:t=>{t.exports=function(t,e){for(var r=0;r<e.length;r++)if(t.hasOwnProperty(e[r]))return!0;return!1}},97022:t=>{t.exports=function(t,e){return t.hasOwnProperty(e)}},41212:t=>{t.exports=function(t){if(!t||"object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},46975:(t,e,r)=>{var i=r(41786);t.exports=function(t,e){var r=i(t);for(var n in e)r.hasOwnProperty(n)||(r[n]=e[n]);return r}},269:(t,e,r)=>{var i=r(41786);t.exports=function(t,e){var r=i(t);for(var n in e)r.hasOwnProperty(n)&&(r[n]=e[n]);return r}},18254:(t,e,r)=>{var i=r(97022);t.exports=function(t,e){for(var r={},n=0;n<e.length;n++){var o=e[n];i(t,o)&&(r[o]=t[o])}return r}},61622:t=>{t.exports=function(t,e,r){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(e))return t[e]=r,!0;if(-1!==e.indexOf(".")){for(var i=e.split("."),n=t,o=t,s=0;s<i.length;s++){if(!n.hasOwnProperty(i[s]))return!1;o=n,n=n[i[s]]}return o[i[i.length-1]]=r,!0}return!1}},1183:(t,e,r)=>{t.exports={Clone:r(41786),DeepCopy:r(62644),Extend:r(79291),GetAdvancedValue:r(23568),GetFastValue:r(95540),GetMinMaxValue:r(82840),GetValue:r(35154),HasAll:r(69036),HasAny:r(1985),HasValue:r(97022),IsPlainObject:r(41212),Merge:r(46975),MergeRight:r(269),Pick:r(18254),SetValue:r(61622)}},27902:t=>{t.exports=function(t,e){return t.replace(/%([0-9]+)/g,(function(t,r){return e[Number(r)-1]}))}},41836:t=>{t.exports=function(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=" "),void 0===i&&(i=3);var n=0;if(e+1>=(t=t.toString()).length)switch(i){case 1:t=new Array(e+1-t.length).join(r)+t;break;case 3:var o=Math.ceil((n=e-t.length)/2);t=new Array(n-o+1).join(r)+t+new Array(o+1).join(r);break;default:t+=new Array(e+1-t.length).join(r)}return t}},33628:t=>{t.exports=function(t,e){return 0===e?t.slice(1):t.slice(0,e-1)+t.slice(e)}},27671:t=>{t.exports=function(t){return t.split("").reverse().join("")}},45650:t=>{t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},35355:t=>{t.exports=function(t){return t&&t[0].toUpperCase()+t.slice(1)}},31749:(t,e,r)=>{t.exports={Format:r(27902),Pad:r(41836),RemoveAt:r(33628),Reverse:r(27671),UppercaseFirst:r(35355),UUID:r(45650)}}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,r),o.exports}return r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r(85454)})(),t.exports=e()},4254:()=>{(()=>{var t={4399:t=>{"use strict";var e=Object.prototype.hasOwnProperty,r="~";function i(){}function n(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new n(i,o||t,s),h=r?r+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)e.call(t,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,o=i.length,s=new Array(o);n<o;n++)s[n]=i[n].fn;return s},a.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,n,o,s){var a=r?r+t:t;if(!this._events[a])return!1;var h,u,c=this._events[a],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,n),!0;case 5:return c.fn.call(c.context,e,i,n,o),!0;case 6:return c.fn.call(c.context,e,i,n,o,s),!0}for(u=1,h=new Array(l-1);u<l;u++)h[u-1]=arguments[u];c.fn.apply(c.context,h)}else{var f,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),l){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,i);break;case 4:c[u].fn.call(c[u].context,e,i,n);break;default:if(!h)for(f=1,h=new Array(l-1);f<l;f++)h[f-1]=arguments[f];c[u].fn.apply(c[u].context,h)}}return!0},a.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,i,n){var o=r?r+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||n&&!a.once||i&&a.context!==i||s(this,o);else{for(var h=0,u=[],c=a.length;h<c;h++)(a[h].fn!==e||n&&!a[h].once||i&&a[h].context!==i)&&u.push(a[h]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a},1847:t=>{(function(){var e,r,i,n=this&&this.__extends||(e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},e(t,r)},function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)});!function(t){var e,r,i,o=function(){function t(t,e,r){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var i=0;i<e.length;i++)this.timelineIds[e[i].getPropertyId()]=!0;this.duration=r}return t.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},t.prototype.apply=function(t,e,r,i,n,o,s,a){if(null==t)throw new Error("skeleton cannot be null.");i&&0!=this.duration&&(r%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,u=0,c=h.length;u<c;u++)h[u].apply(t,e,r,n,o,s,a)},t.binarySearch=function(t,e,r){void 0===r&&(r=1);var i=0,n=t.length/r-2;if(0==n)return r;for(var o=n>>>1;;){if(t[(o+1)*r]<=e?i=o+1:n=o,i==n)return(i+1)*r;o=i+n>>>1}},t.linearSearch=function(t,e,r){for(var i=0,n=t.length-r;i<=n;i+=r)if(t[i]>e)return i;return-1},t}();t.Animation=o,function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(e=t.MixBlend||(t.MixBlend={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(r=t.MixDirection||(t.MixDirection={})),function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(i=t.TimelineType||(t.TimelineType={}));var s=function(){function e(r){if(r<=0)throw new Error("frameCount must be > 0: "+r);this.curves=t.Utils.newFloatArray((r-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){var r=t*e.BEZIER_SIZE;if(r==this.curves.length)return e.LINEAR;var i=this.curves[r];return i==e.LINEAR?e.LINEAR:i==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,r,i,n,o){var s=.03*(2*-r+n),a=.03*(2*-i+o),h=.006*(3*(r-n)+1),u=.006*(3*(i-o)+1),c=2*s+h,l=2*a+u,f=.3*r+s+.16666667*h,p=.3*i+a+.16666667*u,d=t*e.BEZIER_SIZE,v=this.curves;v[d++]=e.BEZIER;for(var y=f,g=p,m=d+e.BEZIER_SIZE-1;d<m;d+=2)v[d]=y,v[d+1]=g,f+=c,p+=l,c+=h,l+=u,y+=f,g+=p},e.prototype.getCurvePercent=function(r,i){i=t.MathUtils.clamp(i,0,1);var n=this.curves,o=r*e.BEZIER_SIZE,s=n[o];if(s==e.LINEAR)return i;if(s==e.STEPPED)return 0;for(var a=0,h=++o,u=o+e.BEZIER_SIZE-1;o<u;o+=2)if((a=n[o])>=i){var c=void 0,l=void 0;return o==h?(c=0,l=0):(c=n[o-2],l=n[o-1]),l+(n[o+1]-l)*(i-c)/(a-c)}var f=n[o-1];return f+(1-f)*(i-a)/(1-a)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=19,e}();t.CurveTimeline=s;var a=function(r){function s(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e<<1),i}return n(s,r),s.prototype.getPropertyId=function(){return(i.rotate<<24)+this.boneIndex},s.prototype.setFrame=function(t,e,r){t<<=1,this.frames[t]=e,this.frames[t+s.ROTATION]=r},s.prototype.apply=function(t,r,i,n,a,h,u){var c=this.frames,l=t.bones[this.boneIndex];if(l.active)if(i<c[0])switch(h){case e.setup:return void(l.rotation=l.data.rotation);case e.first:var f=l.data.rotation-l.rotation;l.rotation+=(f-360*(16384-(16384.499999999996-f/360|0)))*a}else if(i>=c[c.length-s.ENTRIES]){var p=c[c.length+s.PREV_ROTATION];switch(h){case e.setup:l.rotation=l.data.rotation+p*a;break;case e.first:case e.replace:p+=l.data.rotation-l.rotation,p-=360*(16384-(16384.499999999996-p/360|0));case e.add:l.rotation+=p*a}}else{var d=o.binarySearch(c,i,s.ENTRIES),v=c[d+s.PREV_ROTATION],y=c[d],g=this.getCurvePercent((d>>1)-1,1-(i-y)/(c[d+s.PREV_TIME]-y)),m=c[d+s.ROTATION]-v;switch(m=v+(m-360*(16384-(16384.499999999996-m/360|0)))*g,h){case e.setup:l.rotation=l.data.rotation+(m-360*(16384-(16384.499999999996-m/360|0)))*a;break;case e.first:case e.replace:m+=l.data.rotation-l.rotation;case e.add:l.rotation+=(m-360*(16384-(16384.499999999996-m/360|0)))*a}}},s.ENTRIES=2,s.PREV_TIME=-2,s.PREV_ROTATION=-1,s.ROTATION=1,s}(s);t.RotateTimeline=a;var h=function(r){function s(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return n(s,r),s.prototype.getPropertyId=function(){return(i.translate<<24)+this.boneIndex},s.prototype.setFrame=function(t,e,r,i){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.X]=r,this.frames[t+s.Y]=i},s.prototype.apply=function(t,r,i,n,a,h,u){var c=this.frames,l=t.bones[this.boneIndex];if(l.active)if(i<c[0])switch(h){case e.setup:return l.x=l.data.x,void(l.y=l.data.y);case e.first:l.x+=(l.data.x-l.x)*a,l.y+=(l.data.y-l.y)*a}else{var f=0,p=0;if(i>=c[c.length-s.ENTRIES])f=c[c.length+s.PREV_X],p=c[c.length+s.PREV_Y];else{var d=o.binarySearch(c,i,s.ENTRIES);f=c[d+s.PREV_X],p=c[d+s.PREV_Y];var v=c[d],y=this.getCurvePercent(d/s.ENTRIES-1,1-(i-v)/(c[d+s.PREV_TIME]-v));f+=(c[d+s.X]-f)*y,p+=(c[d+s.Y]-p)*y}switch(h){case e.setup:l.x=l.data.x+f*a,l.y=l.data.y+p*a;break;case e.first:case e.replace:l.x+=(l.data.x+f-l.x)*a,l.y+=(l.data.y+p-l.y)*a;break;case e.add:l.x+=f*a,l.y+=p*a}}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_X=-2,s.PREV_Y=-1,s.X=1,s.Y=2,s}(s);t.TranslateTimeline=h;var u=function(s){function a(t){return s.call(this,t)||this}return n(a,s),a.prototype.getPropertyId=function(){return(i.scale<<24)+this.boneIndex},a.prototype.apply=function(i,n,s,h,u,c,l){var f=this.frames,p=i.bones[this.boneIndex];if(p.active)if(s<f[0])switch(c){case e.setup:return p.scaleX=p.data.scaleX,void(p.scaleY=p.data.scaleY);case e.first:p.scaleX+=(p.data.scaleX-p.scaleX)*u,p.scaleY+=(p.data.scaleY-p.scaleY)*u}else{var d=0,v=0;if(s>=f[f.length-a.ENTRIES])d=f[f.length+a.PREV_X]*p.data.scaleX,v=f[f.length+a.PREV_Y]*p.data.scaleY;else{var y=o.binarySearch(f,s,a.ENTRIES);d=f[y+a.PREV_X],v=f[y+a.PREV_Y];var g=f[y],m=this.getCurvePercent(y/a.ENTRIES-1,1-(s-g)/(f[y+a.PREV_TIME]-g));d=(d+(f[y+a.X]-d)*m)*p.data.scaleX,v=(v+(f[y+a.Y]-v)*m)*p.data.scaleY}if(1==u)c==e.add?(p.scaleX+=d-p.data.scaleX,p.scaleY+=v-p.data.scaleY):(p.scaleX=d,p.scaleY=v);else{var x=0,b=0;if(l==r.mixOut)switch(c){case e.setup:x=p.data.scaleX,b=p.data.scaleY,p.scaleX=x+(Math.abs(d)*t.MathUtils.signum(x)-x)*u,p.scaleY=b+(Math.abs(v)*t.MathUtils.signum(b)-b)*u;break;case e.first:case e.replace:x=p.scaleX,b=p.scaleY,p.scaleX=x+(Math.abs(d)*t.MathUtils.signum(x)-x)*u,p.scaleY=b+(Math.abs(v)*t.MathUtils.signum(b)-b)*u;break;case e.add:x=p.scaleX,b=p.scaleY,p.scaleX=x+(Math.abs(d)*t.MathUtils.signum(x)-p.data.scaleX)*u,p.scaleY=b+(Math.abs(v)*t.MathUtils.signum(b)-p.data.scaleY)*u}else switch(c){case e.setup:x=Math.abs(p.data.scaleX)*t.MathUtils.signum(d),b=Math.abs(p.data.scaleY)*t.MathUtils.signum(v),p.scaleX=x+(d-x)*u,p.scaleY=b+(v-b)*u;break;case e.first:case e.replace:x=Math.abs(p.scaleX)*t.MathUtils.signum(d),b=Math.abs(p.scaleY)*t.MathUtils.signum(v),p.scaleX=x+(d-x)*u,p.scaleY=b+(v-b)*u;break;case e.add:x=t.MathUtils.signum(d),b=t.MathUtils.signum(v),p.scaleX=Math.abs(p.scaleX)*x+(d-Math.abs(p.data.scaleX)*x)*u,p.scaleY=Math.abs(p.scaleY)*b+(v-Math.abs(p.data.scaleY)*b)*u}}}},a}(h);t.ScaleTimeline=u;var c=function(t){function r(e){return t.call(this,e)||this}return n(r,t),r.prototype.getPropertyId=function(){return(i.shear<<24)+this.boneIndex},r.prototype.apply=function(t,i,n,s,a,h,u){var c=this.frames,l=t.bones[this.boneIndex];if(l.active)if(n<c[0])switch(h){case e.setup:return l.shearX=l.data.shearX,void(l.shearY=l.data.shearY);case e.first:l.shearX+=(l.data.shearX-l.shearX)*a,l.shearY+=(l.data.shearY-l.shearY)*a}else{var f=0,p=0;if(n>=c[c.length-r.ENTRIES])f=c[c.length+r.PREV_X],p=c[c.length+r.PREV_Y];else{var d=o.binarySearch(c,n,r.ENTRIES);f=c[d+r.PREV_X],p=c[d+r.PREV_Y];var v=c[d],y=this.getCurvePercent(d/r.ENTRIES-1,1-(n-v)/(c[d+r.PREV_TIME]-v));f+=(c[d+r.X]-f)*y,p+=(c[d+r.Y]-p)*y}switch(h){case e.setup:l.shearX=l.data.shearX+f*a,l.shearY=l.data.shearY+p*a;break;case e.first:case e.replace:l.shearX+=(l.data.shearX+f-l.shearX)*a,l.shearY+=(l.data.shearY+p-l.shearY)*a;break;case e.add:l.shearX+=f*a,l.shearY+=p*a}}},r}(h);t.ShearTimeline=c;var l=function(r){function s(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return n(s,r),s.prototype.getPropertyId=function(){return(i.color<<24)+this.slotIndex},s.prototype.setFrame=function(t,e,r,i,n,o){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.R]=r,this.frames[t+s.G]=i,this.frames[t+s.B]=n,this.frames[t+s.A]=o},s.prototype.apply=function(t,r,i,n,a,h,u){var c=t.slots[this.slotIndex];if(c.bone.active){var l=this.frames;if(i<l[0])switch(h){case e.setup:return void c.color.setFromColor(c.data.color);case e.first:var f=c.color,p=c.data.color;f.add((p.r-f.r)*a,(p.g-f.g)*a,(p.b-f.b)*a,(p.a-f.a)*a)}else{var d=0,v=0,y=0,g=0;if(i>=l[l.length-s.ENTRIES]){var m=l.length;d=l[m+s.PREV_R],v=l[m+s.PREV_G],y=l[m+s.PREV_B],g=l[m+s.PREV_A]}else{var x=o.binarySearch(l,i,s.ENTRIES);d=l[x+s.PREV_R],v=l[x+s.PREV_G],y=l[x+s.PREV_B],g=l[x+s.PREV_A];var b=l[x],w=this.getCurvePercent(x/s.ENTRIES-1,1-(i-b)/(l[x+s.PREV_TIME]-b));d+=(l[x+s.R]-d)*w,v+=(l[x+s.G]-v)*w,y+=(l[x+s.B]-y)*w,g+=(l[x+s.A]-g)*w}1==a?c.color.set(d,v,y,g):(f=c.color,h==e.setup&&f.setFromColor(c.data.color),f.add((d-f.r)*a,(v-f.g)*a,(y-f.b)*a,(g-f.a)*a))}}},s.ENTRIES=5,s.PREV_TIME=-5,s.PREV_R=-4,s.PREV_G=-3,s.PREV_B=-2,s.PREV_A=-1,s.R=1,s.G=2,s.B=3,s.A=4,s}(s);t.ColorTimeline=l;var f=function(r){function s(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return n(s,r),s.prototype.getPropertyId=function(){return(i.twoColor<<24)+this.slotIndex},s.prototype.setFrame=function(t,e,r,i,n,o,a,h,u){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.R]=r,this.frames[t+s.G]=i,this.frames[t+s.B]=n,this.frames[t+s.A]=o,this.frames[t+s.R2]=a,this.frames[t+s.G2]=h,this.frames[t+s.B2]=u},s.prototype.apply=function(t,r,i,n,a,h,u){var c=t.slots[this.slotIndex];if(c.bone.active){var l=this.frames;if(i<l[0])switch(h){case e.setup:return c.color.setFromColor(c.data.color),void c.darkColor.setFromColor(c.data.darkColor);case e.first:var f=c.color,p=c.darkColor,d=c.data.color,v=c.data.darkColor;f.add((d.r-f.r)*a,(d.g-f.g)*a,(d.b-f.b)*a,(d.a-f.a)*a),p.add((v.r-p.r)*a,(v.g-p.g)*a,(v.b-p.b)*a,0)}else{var y=0,g=0,m=0,x=0,b=0,w=0,E=0;if(i>=l[l.length-s.ENTRIES]){var T=l.length;y=l[T+s.PREV_R],g=l[T+s.PREV_G],m=l[T+s.PREV_B],x=l[T+s.PREV_A],b=l[T+s.PREV_R2],w=l[T+s.PREV_G2],E=l[T+s.PREV_B2]}else{var S=o.binarySearch(l,i,s.ENTRIES);y=l[S+s.PREV_R],g=l[S+s.PREV_G],m=l[S+s.PREV_B],x=l[S+s.PREV_A],b=l[S+s.PREV_R2],w=l[S+s.PREV_G2],E=l[S+s.PREV_B2];var _=l[S],O=this.getCurvePercent(S/s.ENTRIES-1,1-(i-_)/(l[S+s.PREV_TIME]-_));y+=(l[S+s.R]-y)*O,g+=(l[S+s.G]-g)*O,m+=(l[S+s.B]-m)*O,x+=(l[S+s.A]-x)*O,b+=(l[S+s.R2]-b)*O,w+=(l[S+s.G2]-w)*O,E+=(l[S+s.B2]-E)*O}1==a?(c.color.set(y,g,m,x),c.darkColor.set(b,w,E,1)):(f=c.color,p=c.darkColor,h==e.setup&&(f.setFromColor(c.data.color),p.setFromColor(c.data.darkColor)),f.add((y-f.r)*a,(g-f.g)*a,(m-f.b)*a,(x-f.a)*a),p.add((b-p.r)*a,(w-p.g)*a,(E-p.b)*a,0))}}},s.ENTRIES=8,s.PREV_TIME=-8,s.PREV_R=-7,s.PREV_G=-6,s.PREV_B=-5,s.PREV_A=-4,s.PREV_R2=-3,s.PREV_G2=-2,s.PREV_B2=-1,s.R=1,s.G=2,s.B=3,s.A=4,s.R2=5,s.G2=6,s.B2=7,s}(s);t.TwoColorTimeline=f;var p=function(){function n(e){this.frames=t.Utils.newFloatArray(e),this.attachmentNames=new Array(e)}return n.prototype.getPropertyId=function(){return(i.attachment<<24)+this.slotIndex},n.prototype.getFrameCount=function(){return this.frames.length},n.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r},n.prototype.apply=function(t,i,n,s,a,h,u){var c=t.slots[this.slotIndex];if(c.bone.active)if(u!=r.mixOut){var l=this.frames;if(n<l[0])h!=e.setup&&h!=e.first||this.setAttachment(t,c,c.data.attachmentName);else{var f;f=n>=l[l.length-1]?l.length-1:o.binarySearch(l,n,1)-1;var p=this.attachmentNames[f];t.slots[this.slotIndex].setAttachment(null==p?null:t.getAttachment(this.slotIndex,p))}}else h==e.setup&&this.setAttachment(t,c,c.data.attachmentName)},n.prototype.setAttachment=function(t,e,r){e.setAttachment(null==r?null:t.getAttachment(this.slotIndex,r))},n}();t.AttachmentTimeline=p;var d=null,v=function(r){function s(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e),i.frameVertices=new Array(e),null==d&&(d=t.Utils.newFloatArray(64)),i}return n(s,r),s.prototype.getPropertyId=function(){return(i.deform<<27)+ +this.attachment.id+this.slotIndex},s.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.frameVertices[t]=r},s.prototype.apply=function(r,i,n,s,a,h,u){var c=r.slots[this.slotIndex];if(c.bone.active){var l=c.getAttachment();if(l instanceof t.VertexAttachment&&l.deformAttachment==this.attachment){var f=c.deform;0==f.length&&(h=e.setup);var p=this.frameVertices,d=p[0].length,v=this.frames;if(n<v[0]){var y=l;switch(h){case e.setup:return void(f.length=0);case e.first:if(1==a){f.length=0;break}var g=t.Utils.setArraySize(f,d);if(null==y.bones)for(var m=y.vertices,x=0;x<d;x++)g[x]+=(m[x]-g[x])*a;else for(a=1-a,x=0;x<d;x++)g[x]*=a}}else{var b=t.Utils.setArraySize(f,d);if(n>=v[v.length-1]){var w=p[v.length-1];if(1==a)if(h==e.add)if(null==(y=l).bones){m=y.vertices;for(var E=0;E<d;E++)b[E]+=w[E]-m[E]}else for(var T=0;T<d;T++)b[T]+=w[T];else t.Utils.arrayCopy(w,0,b,0,d);else switch(h){case e.setup:var S=l;if(null==S.bones){m=S.vertices;for(var _=0;_<d;_++){var O=m[_];b[_]=O+(w[_]-O)*a}}else for(var P=0;P<d;P++)b[P]=w[P]*a;break;case e.first:case e.replace:for(var M=0;M<d;M++)b[M]+=(w[M]-b[M])*a;break;case e.add:if(null==(y=l).bones){m=y.vertices;for(var A=0;A<d;A++)b[A]+=(w[A]-m[A])*a}else for(var L=0;L<d;L++)b[L]+=w[L]*a}}else{var C=o.binarySearch(v,n),R=p[C-1],k=p[C],F=v[C],I=this.getCurvePercent(C-1,1-(n-F)/(v[C-1]-F));if(1==a)if(h==e.add)if(null==(y=l).bones){m=y.vertices;for(var D=0;D<d;D++){var j=R[D];b[D]+=j+(k[D]-j)*I-m[D]}}else for(var B=0;B<d;B++)j=R[B],b[B]+=j+(k[B]-j)*I;else for(var N=0;N<d;N++)j=R[N],b[N]=j+(k[N]-j)*I;else switch(h){case e.setup:var G=l;if(null==G.bones){m=G.vertices;for(var U=0;U<d;U++)j=R[U],O=m[U],b[U]=O+(j+(k[U]-j)*I-O)*a}else for(var Y=0;Y<d;Y++)j=R[Y],b[Y]=(j+(k[Y]-j)*I)*a;break;case e.first:case e.replace:for(var z=0;z<d;z++)j=R[z],b[z]+=(j+(k[z]-j)*I-b[z])*a;break;case e.add:if(null==(y=l).bones){m=y.vertices;for(var X=0;X<d;X++)j=R[X],b[X]+=(j+(k[X]-j)*I-m[X])*a}else for(var V=0;V<d;V++)j=R[V],b[V]+=(j+(k[V]-j)*I)*a}}}}}},s}(s);t.DeformTimeline=v;var y=function(){function e(e){this.frames=t.Utils.newFloatArray(e),this.events=new Array(e)}return e.prototype.getPropertyId=function(){return i.event<<24},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},e.prototype.apply=function(t,e,r,i,n,s,a){if(null!=i){var h=this.frames,u=this.frames.length;if(e>r)this.apply(t,e,Number.MAX_VALUE,i,n,s,a),e=-1;else if(e>=h[u-1])return;if(!(r<h[0])){var c=0;if(e<h[0])c=0;else for(var l=h[c=o.binarySearch(h,e)];c>0&&h[c-1]==l;)c--;for(;c<u&&r>=h[c];c++)i.push(this.events[c])}}},e}();t.EventTimeline=y;var g=function(){function n(e){this.frames=t.Utils.newFloatArray(e),this.drawOrders=new Array(e)}return n.prototype.getPropertyId=function(){return i.drawOrder<<24},n.prototype.getFrameCount=function(){return this.frames.length},n.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.drawOrders[t]=r},n.prototype.apply=function(i,n,s,a,h,u,c){var l=i.drawOrder,f=i.slots;if(c!=r.mixOut){var p=this.frames;if(s<p[0])u!=e.setup&&u!=e.first||t.Utils.arrayCopy(i.slots,0,i.drawOrder,0,i.slots.length);else{var d;d=s>=p[p.length-1]?p.length-1:o.binarySearch(p,s)-1;var v=this.drawOrders[d];if(null==v)t.Utils.arrayCopy(f,0,l,0,f.length);else for(var y=0,g=v.length;y<g;y++)l[y]=f[v[y]]}}else u==e.setup&&t.Utils.arrayCopy(i.slots,0,i.drawOrder,0,i.slots.length)},n}();t.DrawOrderTimeline=g;var m=function(s){function a(e){var r=s.call(this,e)||this;return r.frames=t.Utils.newFloatArray(e*a.ENTRIES),r}return n(a,s),a.prototype.getPropertyId=function(){return(i.ikConstraint<<24)+this.ikConstraintIndex},a.prototype.setFrame=function(t,e,r,i,n,o,s){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.MIX]=r,this.frames[t+a.SOFTNESS]=i,this.frames[t+a.BEND_DIRECTION]=n,this.frames[t+a.COMPRESS]=o?1:0,this.frames[t+a.STRETCH]=s?1:0},a.prototype.apply=function(t,i,n,s,h,u,c){var l=this.frames,f=t.ikConstraints[this.ikConstraintIndex];if(f.active)if(n<l[0])switch(u){case e.setup:return f.mix=f.data.mix,f.softness=f.data.softness,f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,void(f.stretch=f.data.stretch);case e.first:f.mix+=(f.data.mix-f.mix)*h,f.softness+=(f.data.softness-f.softness)*h,f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch}else if(n>=l[l.length-a.ENTRIES])u==e.setup?(f.mix=f.data.mix+(l[l.length+a.PREV_MIX]-f.data.mix)*h,f.softness=f.data.softness+(l[l.length+a.PREV_SOFTNESS]-f.data.softness)*h,c==r.mixOut?(f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch):(f.bendDirection=l[l.length+a.PREV_BEND_DIRECTION],f.compress=0!=l[l.length+a.PREV_COMPRESS],f.stretch=0!=l[l.length+a.PREV_STRETCH])):(f.mix+=(l[l.length+a.PREV_MIX]-f.mix)*h,f.softness+=(l[l.length+a.PREV_SOFTNESS]-f.softness)*h,c==r.mixIn&&(f.bendDirection=l[l.length+a.PREV_BEND_DIRECTION],f.compress=0!=l[l.length+a.PREV_COMPRESS],f.stretch=0!=l[l.length+a.PREV_STRETCH]));else{var p=o.binarySearch(l,n,a.ENTRIES),d=l[p+a.PREV_MIX],v=l[p+a.PREV_SOFTNESS],y=l[p],g=this.getCurvePercent(p/a.ENTRIES-1,1-(n-y)/(l[p+a.PREV_TIME]-y));u==e.setup?(f.mix=f.data.mix+(d+(l[p+a.MIX]-d)*g-f.data.mix)*h,f.softness=f.data.softness+(v+(l[p+a.SOFTNESS]-v)*g-f.data.softness)*h,c==r.mixOut?(f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch):(f.bendDirection=l[p+a.PREV_BEND_DIRECTION],f.compress=0!=l[p+a.PREV_COMPRESS],f.stretch=0!=l[p+a.PREV_STRETCH])):(f.mix+=(d+(l[p+a.MIX]-d)*g-f.mix)*h,f.softness+=(v+(l[p+a.SOFTNESS]-v)*g-f.softness)*h,c==r.mixIn&&(f.bendDirection=l[p+a.PREV_BEND_DIRECTION],f.compress=0!=l[p+a.PREV_COMPRESS],f.stretch=0!=l[p+a.PREV_STRETCH]))}},a.ENTRIES=6,a.PREV_TIME=-6,a.PREV_MIX=-5,a.PREV_SOFTNESS=-4,a.PREV_BEND_DIRECTION=-3,a.PREV_COMPRESS=-2,a.PREV_STRETCH=-1,a.MIX=1,a.SOFTNESS=2,a.BEND_DIRECTION=3,a.COMPRESS=4,a.STRETCH=5,a}(s);t.IkConstraintTimeline=m;var x=function(r){function s(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return n(s,r),s.prototype.getPropertyId=function(){return(i.transformConstraint<<24)+this.transformConstraintIndex},s.prototype.setFrame=function(t,e,r,i,n,o){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.ROTATE]=r,this.frames[t+s.TRANSLATE]=i,this.frames[t+s.SCALE]=n,this.frames[t+s.SHEAR]=o},s.prototype.apply=function(t,r,i,n,a,h,u){var c=this.frames,l=t.transformConstraints[this.transformConstraintIndex];if(l.active)if(i<c[0]){var f=l.data;switch(h){case e.setup:return l.rotateMix=f.rotateMix,l.translateMix=f.translateMix,l.scaleMix=f.scaleMix,void(l.shearMix=f.shearMix);case e.first:l.rotateMix+=(f.rotateMix-l.rotateMix)*a,l.translateMix+=(f.translateMix-l.translateMix)*a,l.scaleMix+=(f.scaleMix-l.scaleMix)*a,l.shearMix+=(f.shearMix-l.shearMix)*a}}else{var p=0,d=0,v=0,y=0;if(i>=c[c.length-s.ENTRIES]){var g=c.length;p=c[g+s.PREV_ROTATE],d=c[g+s.PREV_TRANSLATE],v=c[g+s.PREV_SCALE],y=c[g+s.PREV_SHEAR]}else{var m=o.binarySearch(c,i,s.ENTRIES);p=c[m+s.PREV_ROTATE],d=c[m+s.PREV_TRANSLATE],v=c[m+s.PREV_SCALE],y=c[m+s.PREV_SHEAR];var x=c[m],b=this.getCurvePercent(m/s.ENTRIES-1,1-(i-x)/(c[m+s.PREV_TIME]-x));p+=(c[m+s.ROTATE]-p)*b,d+=(c[m+s.TRANSLATE]-d)*b,v+=(c[m+s.SCALE]-v)*b,y+=(c[m+s.SHEAR]-y)*b}h==e.setup?(f=l.data,l.rotateMix=f.rotateMix+(p-f.rotateMix)*a,l.translateMix=f.translateMix+(d-f.translateMix)*a,l.scaleMix=f.scaleMix+(v-f.scaleMix)*a,l.shearMix=f.shearMix+(y-f.shearMix)*a):(l.rotateMix+=(p-l.rotateMix)*a,l.translateMix+=(d-l.translateMix)*a,l.scaleMix+=(v-l.scaleMix)*a,l.shearMix+=(y-l.shearMix)*a)}},s.ENTRIES=5,s.PREV_TIME=-5,s.PREV_ROTATE=-4,s.PREV_TRANSLATE=-3,s.PREV_SCALE=-2,s.PREV_SHEAR=-1,s.ROTATE=1,s.TRANSLATE=2,s.SCALE=3,s.SHEAR=4,s}(s);t.TransformConstraintTimeline=x;var b=function(r){function s(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return n(s,r),s.prototype.getPropertyId=function(){return(i.pathConstraintPosition<<24)+this.pathConstraintIndex},s.prototype.setFrame=function(t,e,r){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.VALUE]=r},s.prototype.apply=function(t,r,i,n,a,h,u){var c=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(l.active)if(i<c[0])switch(h){case e.setup:return void(l.position=l.data.position);case e.first:l.position+=(l.data.position-l.position)*a}else{var f=0;if(i>=c[c.length-s.ENTRIES])f=c[c.length+s.PREV_VALUE];else{var p=o.binarySearch(c,i,s.ENTRIES);f=c[p+s.PREV_VALUE];var d=c[p],v=this.getCurvePercent(p/s.ENTRIES-1,1-(i-d)/(c[p+s.PREV_TIME]-d));f+=(c[p+s.VALUE]-f)*v}h==e.setup?l.position=l.data.position+(f-l.data.position)*a:l.position+=(f-l.position)*a}},s.ENTRIES=2,s.PREV_TIME=-2,s.PREV_VALUE=-1,s.VALUE=1,s}(s);t.PathConstraintPositionTimeline=b;var w=function(t){function r(e){return t.call(this,e)||this}return n(r,t),r.prototype.getPropertyId=function(){return(i.pathConstraintSpacing<<24)+this.pathConstraintIndex},r.prototype.apply=function(t,i,n,s,a,h,u){var c=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(l.active)if(n<c[0])switch(h){case e.setup:return void(l.spacing=l.data.spacing);case e.first:l.spacing+=(l.data.spacing-l.spacing)*a}else{var f=0;if(n>=c[c.length-r.ENTRIES])f=c[c.length+r.PREV_VALUE];else{var p=o.binarySearch(c,n,r.ENTRIES);f=c[p+r.PREV_VALUE];var d=c[p],v=this.getCurvePercent(p/r.ENTRIES-1,1-(n-d)/(c[p+r.PREV_TIME]-d));f+=(c[p+r.VALUE]-f)*v}h==e.setup?l.spacing=l.data.spacing+(f-l.data.spacing)*a:l.spacing+=(f-l.spacing)*a}},r}(b);t.PathConstraintSpacingTimeline=w;var E=function(r){function s(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return n(s,r),s.prototype.getPropertyId=function(){return(i.pathConstraintMix<<24)+this.pathConstraintIndex},s.prototype.setFrame=function(t,e,r,i){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.ROTATE]=r,this.frames[t+s.TRANSLATE]=i},s.prototype.apply=function(t,r,i,n,a,h,u){var c=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(l.active)if(i<c[0])switch(h){case e.setup:return l.rotateMix=l.data.rotateMix,void(l.translateMix=l.data.translateMix);case e.first:l.rotateMix+=(l.data.rotateMix-l.rotateMix)*a,l.translateMix+=(l.data.translateMix-l.translateMix)*a}else{var f=0,p=0;if(i>=c[c.length-s.ENTRIES])f=c[c.length+s.PREV_ROTATE],p=c[c.length+s.PREV_TRANSLATE];else{var d=o.binarySearch(c,i,s.ENTRIES);f=c[d+s.PREV_ROTATE],p=c[d+s.PREV_TRANSLATE];var v=c[d],y=this.getCurvePercent(d/s.ENTRIES-1,1-(i-v)/(c[d+s.PREV_TIME]-v));f+=(c[d+s.ROTATE]-f)*y,p+=(c[d+s.TRANSLATE]-p)*y}h==e.setup?(l.rotateMix=l.data.rotateMix+(f-l.data.rotateMix)*a,l.translateMix=l.data.translateMix+(p-l.data.translateMix)*a):(l.rotateMix+=(f-l.rotateMix)*a,l.translateMix+=(p-l.translateMix)*a)}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_ROTATE=-2,s.PREV_TRANSLATE=-1,s.ROTATE=1,s.TRANSLATE=2,s}(s);t.PathConstraintMixTimeline=E}(i||(i={})),function(t){var e=function(){function e(e){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new n(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.trackEntryPool=new t.Pool((function(){return new r})),this.data=e}return e.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,r=0,i=e.length;r<i;r++){var n=e[r];if(null!=n){n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;var o=t*n.timeScale;if(n.delay>0){if(n.delay-=o,n.delay>0)continue;o=-n.delay,n.delay=0}var s=n.next;if(null!=s){var a=n.trackLast-s.delay;if(a>=0){for(s.delay=0,s.trackTime+=0==n.timeScale?0:(a/n.timeScale+t)*s.timeScale,n.trackTime+=o,this.setCurrent(r,s,!0);null!=s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&null==n.mixingFrom){e[r]=null,this.queue.end(n),this.disposeNext(n);continue}if(null!=n.mixingFrom&&this.updateMixingFrom(n,t)){var h=n.mixingFrom;for(n.mixingFrom=null,null!=h&&(h.mixingTo=null);null!=h;)this.queue.end(h),h=h.mixingFrom}n.trackTime+=o}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,e){var r=t.mixingFrom;if(null==r)return!0;var i=this.updateMixingFrom(r,e);return r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=r.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=r.mixingFrom,null!=r.mixingFrom&&(r.mixingFrom.mixingTo=t),t.interruptAlpha=r.interruptAlpha,this.queue.end(r)),i):(r.trackTime+=e*r.timeScale,t.mixTime+=e,!1)},e.prototype.apply=function(r){if(null==r)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var i=this.events,n=this.tracks,o=!1,s=0,a=n.length;s<a;s++){var h=n[s];if(!(null==h||h.delay>0)){o=!0;var u=0==s?t.MixBlend.first:h.mixBlend,c=h.alpha;null!=h.mixingFrom?c*=this.applyMixingFrom(h,r,u):h.trackTime>=h.trackEnd&&null==h.next&&(c=0);var l=h.animationLast,f=h.getAnimationTime(),p=h.animation.timelines.length,d=h.animation.timelines;if(0==s&&1==c||u==t.MixBlend.add)for(var v=0;v<p;v++){t.Utils.webkit602BugfixHelper(c,u);var y=d[v];y instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(y,r,f,u,!0):y.apply(r,l,f,i,c,u,t.MixDirection.mixIn)}else{var g=h.timelineMode,m=0==h.timelinesRotation.length;m&&t.Utils.setArraySize(h.timelinesRotation,p<<1,null);var x=h.timelinesRotation;for(v=0;v<p;v++){var b=d[v],w=g[v]==e.SUBSEQUENT?u:t.MixBlend.setup;b instanceof t.RotateTimeline?this.applyRotateTimeline(b,r,f,c,w,x,v<<1,m):b instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(b,r,f,u,!0):(t.Utils.webkit602BugfixHelper(c,u),b.apply(r,l,f,i,c,w,t.MixDirection.mixIn))}}this.queueEvents(h,f),i.length=0,h.nextAnimationLast=f,h.nextTrackLast=h.trackTime}}for(var E=this.unkeyedState+e.SETUP,T=r.slots,S=0,_=r.slots.length;S<_;S++){var O=T[S];if(O.attachmentState==E){var P=O.data.attachmentName;O.setAttachment(null==P?null:r.getAttachment(O.data.index,P))}}return this.unkeyedState+=2,this.queue.drain(),o},e.prototype.applyMixingFrom=function(r,i,n){var o=r.mixingFrom;null!=o.mixingFrom&&this.applyMixingFrom(o,i,n);var s=0;0==r.mixDuration?(s=1,n==t.MixBlend.first&&(n=t.MixBlend.setup)):((s=r.mixTime/r.mixDuration)>1&&(s=1),n!=t.MixBlend.first&&(n=o.mixBlend));var a=s<o.eventThreshold?this.events:null,h=s<o.attachmentThreshold,u=s<o.drawOrderThreshold,c=o.animationLast,l=o.getAnimationTime(),f=o.animation.timelines.length,p=o.animation.timelines,d=o.alpha*r.interruptAlpha,v=d*(1-s);if(n==t.MixBlend.add)for(var y=0;y<f;y++)p[y].apply(i,c,l,a,v,n,t.MixDirection.mixOut);else{var g=o.timelineMode,m=o.timelineHoldMix,x=0==o.timelinesRotation.length;x&&t.Utils.setArraySize(o.timelinesRotation,f<<1,null);var b=o.timelinesRotation;for(o.totalAlpha=0,y=0;y<f;y++){var w=p[y],E=t.MixDirection.mixOut,T=void 0,S=0;switch(g[y]){case e.SUBSEQUENT:if(!u&&w instanceof t.DrawOrderTimeline)continue;T=n,S=v;break;case e.FIRST:T=t.MixBlend.setup,S=v;break;case e.HOLD_SUBSEQUENT:T=n,S=d;break;case e.HOLD_FIRST:T=t.MixBlend.setup,S=d;break;default:T=t.MixBlend.setup;var _=m[y];S=d*Math.max(0,1-_.mixTime/_.mixDuration)}o.totalAlpha+=S,w instanceof t.RotateTimeline?this.applyRotateTimeline(w,i,l,S,T,b,y<<1,x):w instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(w,i,l,T,h):(t.Utils.webkit602BugfixHelper(S,n),u&&w instanceof t.DrawOrderTimeline&&T==t.MixBlend.setup&&(E=t.MixDirection.mixIn),w.apply(i,c,l,a,S,T,E))}}return r.mixDuration>0&&this.queueEvents(o,l),this.events.length=0,o.nextAnimationLast=l,o.nextTrackLast=o.trackTime,s},e.prototype.applyAttachmentTimeline=function(r,i,n,o,s){var a=i.slots[r.slotIndex];if(a.bone.active){var h,u=r.frames;n<u[0]?o!=t.MixBlend.setup&&o!=t.MixBlend.first||this.setAttachment(i,a,a.data.attachmentName,s):(h=n>=u[u.length-1]?u.length-1:t.Animation.binarySearch(u,n)-1,this.setAttachment(i,a,r.attachmentNames[h],s)),a.attachmentState<=this.unkeyedState&&(a.attachmentState=this.unkeyedState+e.SETUP)}},e.prototype.setAttachment=function(t,r,i,n){r.setAttachment(null==i?null:t.getAttachment(r.data.index,i)),n&&(r.attachmentState=this.unkeyedState+e.CURRENT)},e.prototype.applyRotateTimeline=function(e,r,i,n,o,s,a,h){if(h&&(s[a]=0),1!=n){var u=e,c=u.frames,l=r.bones[u.boneIndex];if(l.active){var f=0,p=0;if(i<c[0])switch(o){case t.MixBlend.setup:l.rotation=l.data.rotation;default:return;case t.MixBlend.first:f=l.rotation,p=l.data.rotation}else if(f=o==t.MixBlend.setup?l.data.rotation:l.rotation,i>=c[c.length-t.RotateTimeline.ENTRIES])p=l.data.rotation+c[c.length+t.RotateTimeline.PREV_ROTATION];else{var d=t.Animation.binarySearch(c,i,t.RotateTimeline.ENTRIES),v=c[d+t.RotateTimeline.PREV_ROTATION],y=c[d],g=u.getCurvePercent((d>>1)-1,1-(i-y)/(c[d+t.RotateTimeline.PREV_TIME]-y));p=c[d+t.RotateTimeline.ROTATION]-v,p=v+(p-=360*(16384-(16384.499999999996-p/360|0)))*g+l.data.rotation,p-=360*(16384-(16384.499999999996-p/360|0))}var m=0,x=p-f;if(0==(x-=360*(16384-(16384.499999999996-x/360|0))))m=s[a];else{var b=0,w=0;h?(b=0,w=x):(b=s[a],w=s[a+1]);var E=x>0,T=b>=0;t.MathUtils.signum(w)!=t.MathUtils.signum(x)&&Math.abs(w)<=90&&(Math.abs(b)>180&&(b+=360*t.MathUtils.signum(b)),T=E),m=x+b-b%360,T!=E&&(m+=360*t.MathUtils.signum(b)),s[a]=m}s[a+1]=x,f+=m*n,l.rotation=f-360*(16384-(16384.499999999996-f/360|0))}}else e.apply(r,0,i,null,1,o,t.MixDirection.mixIn)},e.prototype.queueEvents=function(t,e){for(var r=t.animationStart,i=t.animationEnd,n=i-r,o=t.trackLast%n,s=this.events,a=0,h=s.length;a<h;a++){var u=s[a];if(u.time<o)break;u.time>i||this.queue.event(t,u)}for((t.loop?0==n||o>t.trackTime%n:e>=i&&t.animationLast<i)&&this.queue.complete(t);a<h;a++)s[a].time<r||this.queue.event(t,s[a])},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,r=this.tracks.length;e<r;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var r=e;;){var i=r.mixingFrom;if(null==i)break;this.queue.end(i),r.mixingFrom=null,r.mixingTo=null,r=i}this.tracks[e.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,e,r){var i=this.expandToIndex(t);this.tracks[t]=e,null!=i&&(r&&this.queue.interrupt(i),e.mixingFrom=i,i.mixingTo=e,e.mixTime=0,null!=i.mixingFrom&&i.mixDuration>0&&(e.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(e)},e.prototype.setAnimation=function(t,e,r){var i=this.data.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,i,r)},e.prototype.setAnimationWith=function(t,e,r){if(null==e)throw new Error("animation cannot be null.");var i=!0,n=this.expandToIndex(t);null!=n&&(-1==n.nextTrackLast?(this.tracks[t]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.disposeNext(n),n=n.mixingFrom,i=!1):this.disposeNext(n));var o=this.trackEntry(t,e,r,n);return this.setCurrent(t,o,i),this.queue.drain(),o},e.prototype.addAnimation=function(t,e,r,i){var n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,n,r,i)},e.prototype.addAnimationWith=function(t,e,r,i){if(null==e)throw new Error("animation cannot be null.");var n=this.expandToIndex(t);if(null!=n)for(;null!=n.next;)n=n.next;var o=this.trackEntry(t,e,r,n);if(null==n)this.setCurrent(t,o,!0),this.queue.drain();else if(n.next=o,i<=0){var s=n.animationEnd-n.animationStart;0!=s?(n.loop?i+=s*(1+(n.trackTime/s|0)):i+=Math.max(s,n.trackTime),i-=this.data.getMix(n.animation,e)):i=n.trackTime}return o.delay=i,o},e.prototype.setEmptyAnimation=function(t,r){var i=this.setAnimationWith(t,e.emptyAnimation,!1);return i.mixDuration=r,i.trackEnd=r,i},e.prototype.addEmptyAnimation=function(t,r,i){i<=0&&(i-=r);var n=this.addAnimationWith(t,e.emptyAnimation,!1,i);return n.mixDuration=r,n.trackEnd=r,n},e.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,i=this.tracks.length;r<i;r++){var n=this.tracks[r];null!=n&&this.setEmptyAnimation(n.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},e.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(t.Utils.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},e.prototype.trackEntry=function(e,r,i,n){var o=this.trackEntryPool.obtain();return o.trackIndex=e,o.animation=r,o.loop=i,o.holdPrevious=!1,o.eventThreshold=0,o.attachmentThreshold=0,o.drawOrderThreshold=0,o.animationStart=0,o.animationEnd=r.duration,o.animationLast=-1,o.nextAnimationLast=-1,o.delay=0,o.trackTime=0,o.trackLast=-1,o.nextTrackLast=-1,o.trackEnd=Number.MAX_VALUE,o.timeScale=1,o.alpha=1,o.interruptAlpha=1,o.mixTime=0,o.mixDuration=null==n?0:this.data.getMix(n.animation,r),o.mixBlend=t.MixBlend.replace,o},e.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,r=this.tracks.length;e<r;e++){var i=this.tracks[e];if(null!=i){for(;null!=i.mixingFrom;)i=i.mixingFrom;do{null!=i.mixingFrom&&i.mixBlend==t.MixBlend.add||this.computeHold(i),i=i.mixingTo}while(null!=i)}}},e.prototype.computeHold=function(r){var i=r.mixingTo,n=r.animation.timelines,o=r.animation.timelines.length,s=t.Utils.setArraySize(r.timelineMode,o);r.timelineHoldMix.length=0;var a=t.Utils.setArraySize(r.timelineHoldMix,o),h=this.propertyIDs;if(null!=i&&i.holdPrevious)for(var u=0;u<o;u++)s[u]=h.add(n[u].getPropertyId())?e.HOLD_FIRST:e.HOLD_SUBSEQUENT;else t:for(u=0;u<o;u++){var c=n[u],l=c.getPropertyId();if(h.add(l))if(null==i||c instanceof t.AttachmentTimeline||c instanceof t.DrawOrderTimeline||c instanceof t.EventTimeline||!i.animation.hasTimeline(l))s[u]=e.FIRST;else{for(var f=i.mixingTo;null!=f;f=f.mixingTo)if(!f.animation.hasTimeline(l)){if(r.mixDuration>0){s[u]=e.HOLD_MIX,a[u]=f;continue t}break}s[u]=e.HOLD_FIRST}else s[u]=e.SUBSEQUENT}},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.emptyAnimation=new t.Animation("<empty>",[],0),e.SUBSEQUENT=0,e.FIRST=1,e.HOLD_SUBSEQUENT=2,e.HOLD_FIRST=3,e.HOLD_MIX=4,e.SETUP=1,e.CURRENT=2,e}();t.AnimationState=e;var r=function(){function e(){this.mixBlend=t.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return e.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},e.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},e.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},e.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},e.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},e}();t.TrackEntry=r;var i,n=function(){function t(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return t.prototype.start=function(t){this.objects.push(i.start),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.interrupt=function(t){this.objects.push(i.interrupt),this.objects.push(t)},t.prototype.end=function(t){this.objects.push(i.end),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.dispose=function(t){this.objects.push(i.dispose),this.objects.push(t)},t.prototype.complete=function(t){this.objects.push(i.complete),this.objects.push(t)},t.prototype.event=function(t,e){this.objects.push(i.event),this.objects.push(t),this.objects.push(e)},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,r=0;r<t.length;r+=2){var n=t[r],o=t[r+1];switch(n){case i.start:null!=o.listener&&o.listener.start&&o.listener.start(o);for(var s=0;s<e.length;s++)e[s].start&&e[s].start(o);break;case i.interrupt:for(null!=o.listener&&o.listener.interrupt&&o.listener.interrupt(o),s=0;s<e.length;s++)e[s].interrupt&&e[s].interrupt(o);break;case i.end:for(null!=o.listener&&o.listener.end&&o.listener.end(o),s=0;s<e.length;s++)e[s].end&&e[s].end(o);case i.dispose:for(null!=o.listener&&o.listener.dispose&&o.listener.dispose(o),s=0;s<e.length;s++)e[s].dispose&&e[s].dispose(o);this.animState.trackEntryPool.free(o);break;case i.complete:for(null!=o.listener&&o.listener.complete&&o.listener.complete(o),s=0;s<e.length;s++)e[s].complete&&e[s].complete(o);break;case i.event:var a=t[2+r++];for(null!=o.listener&&o.listener.event&&o.listener.event(o,a),s=0;s<e.length;s++)e[s].event&&e[s].event(o,a)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t}();t.EventQueue=n,function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(i=t.EventType||(t.EventType={}));var o=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();t.AnimationStateAdapter=o}(i||(i={})),function(t){var e=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,r){var i=this.skeletonData.findAnimation(t);if(null==i)throw new Error("Animation not found: "+t);var n=this.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);this.setMixWith(i,n,r)},t.prototype.setMixWith=function(t,e,r){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var i=t.name+"."+e.name;this.animationToMixTime[i]=r},t.prototype.getMix=function(t,e){var r=t.name+"."+e.name,i=this.animationToMixTime[r];return void 0===i?this.defaultMix:i},t}();t.AnimationStateData=e}(i||(i={})),function(t){var e=function(){function e(t,e){void 0===e&&(e=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=t,this.pathPrefix=e}return e.prototype.downloadText=function(t,e,r){var i=new XMLHttpRequest;i.overrideMimeType("text/html"),this.rawDataUris[t]&&(t=this.rawDataUris[t]),i.open("GET",t,!0),i.onload=function(){200==i.status?e(i.responseText):r(i.status,i.responseText)},i.onerror=function(){r(i.status,i.responseText)},i.send()},e.prototype.downloadBinary=function(t,e,r){var i=new XMLHttpRequest;this.rawDataUris[t]&&(t=this.rawDataUris[t]),i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status?e(new Uint8Array(i.response)):r(i.status,i.responseText)},i.onerror=function(){r(i.status,i.responseText)},i.send()},e.prototype.setRawDataURI=function(t,e){this.rawDataUris[this.pathPrefix+t]=e},e.prototype.loadBinary=function(t,e,r){var i=this;void 0===e&&(e=null),void 0===r&&(r=null),t=this.pathPrefix+t,this.toLoad++,this.downloadBinary(t,(function(r){i.assets[t]=r,e&&e(t,r),i.toLoad--,i.loaded++}),(function(e,n){i.errors[t]="Couldn't load binary ".concat(t,": status ").concat(status,", ").concat(n),r&&r(t,"Couldn't load binary ".concat(t,": status ").concat(status,", ").concat(n)),i.toLoad--,i.loaded++}))},e.prototype.loadText=function(t,e,r){var i=this;void 0===e&&(e=null),void 0===r&&(r=null),t=this.pathPrefix+t,this.toLoad++,this.downloadText(t,(function(r){i.assets[t]=r,e&&e(t,r),i.toLoad--,i.loaded++}),(function(e,n){i.errors[t]="Couldn't load text ".concat(t,": status ").concat(status,", ").concat(n),r&&r(t,"Couldn't load text ".concat(t,": status ").concat(status,", ").concat(n)),i.toLoad--,i.loaded++}))},e.prototype.loadTexture=function(t,e,r){var i=this;void 0===e&&(e=null),void 0===r&&(r=null);var n=t=this.pathPrefix+t;this.toLoad++;var o=new Image;o.crossOrigin="anonymous",o.onload=function(r){var s=i.textureLoader(o);i.assets[n]=s,i.toLoad--,i.loaded++,e&&e(t,o)},o.onerror=function(e){i.errors[t]="Couldn't load image ".concat(t),i.toLoad--,i.loaded++,r&&r(t,"Couldn't load image ".concat(t))},this.rawDataUris[t]&&(t=this.rawDataUris[t]),o.src=t},e.prototype.loadTextureAtlas=function(e,r,i){var n=this;void 0===r&&(r=null),void 0===i&&(i=null);var o=e.lastIndexOf("/")>=0?e.substring(0,e.lastIndexOf("/")):"";e=this.pathPrefix+e,this.toLoad++,this.downloadText(e,(function(s){var a={count:0},h=new Array;try{new t.TextureAtlas(s,(function(e){h.push(""==o?e:o+"/"+e);var r=document.createElement("img");return r.width=16,r.height=16,new t.FakeTexture(r)}))}catch(t){var u=t;return n.errors[e]="Couldn't load texture atlas ".concat(e,": ").concat(u.message),i&&i(e,"Couldn't load texture atlas ".concat(e,": ").concat(u.message)),n.toLoad--,void n.loaded++}for(var c=function(u){var c=!1;n.loadTexture(u,(function(u,l){if(a.count++,a.count==h.length)if(c)n.errors[e]="Couldn't load texture atlas page ".concat(u,"} of atlas ").concat(e),i&&i(e,"Couldn't load texture atlas page ".concat(u," of atlas ").concat(e)),n.toLoad--,n.loaded++;else try{var f=new t.TextureAtlas(s,(function(t){return n.get(""==o?t:o+"/"+t)}));n.assets[e]=f,r&&r(e,f),n.toLoad--,n.loaded++}catch(t){var p=t;n.errors[e]="Couldn't load texture atlas ".concat(e,": ").concat(p.message),i&&i(e,"Couldn't load texture atlas ".concat(e,": ").concat(p.message)),n.toLoad--,n.loaded++}}),(function(t,r){c=!0,a.count++,a.count==h.length&&(n.errors[e]="Couldn't load texture atlas page ".concat(t,"} of atlas ").concat(e),i&&i(e,"Couldn't load texture atlas page ".concat(t," of atlas ").concat(e)),n.toLoad--,n.loaded++)}))},l=0,f=h;l<f.length;l++)c(f[l])}),(function(t,r){n.errors[e]="Couldn't load texture atlas ".concat(e,": status ").concat(status,", ").concat(r),i&&i(e,"Couldn't load texture atlas ".concat(e,": status ").concat(status,", ").concat(r)),n.toLoad--,n.loaded++}))},e.prototype.get=function(t){return t=this.pathPrefix+t,this.assets[t]},e.prototype.remove=function(t){t=this.pathPrefix+t;var e=this.assets[t];e.dispose&&e.dispose(),this.assets[t]=null},e.prototype.removeAll=function(){for(var t in this.assets){var e=this.assets[t];e.dispose&&e.dispose()}this.assets={}},e.prototype.isLoadingComplete=function(){return 0==this.toLoad},e.prototype.getToLoad=function(){return this.toLoad},e.prototype.getLoaded=function(){return this.loaded},e.prototype.dispose=function(){this.removeAll()},e.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},e.prototype.getErrors=function(){return this.errors},e}();t.AssetManager=e}(i||(i={})),function(t){var e=function(){function e(t){this.atlas=t}return e.prototype.newRegionAttachment=function(e,r,i){var n=this.atlas.findRegion(i);if(null==n)throw new Error("Region not found in atlas: "+i+" (region attachment: "+r+")");n.renderObject=n;var o=new t.RegionAttachment(r);return o.setRegion(n),o},e.prototype.newMeshAttachment=function(e,r,i){var n=this.atlas.findRegion(i);if(null==n)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+r+")");n.renderObject=n;var o=new t.MeshAttachment(r);return o.region=n,o},e.prototype.newBoundingBoxAttachment=function(e,r){return new t.BoundingBoxAttachment(r)},e.prototype.newPathAttachment=function(e,r){return new t.PathAttachment(r)},e.prototype.newPointAttachment=function(e,r){return new t.PointAttachment(r)},e.prototype.newClippingAttachment=function(e,r){return new t.ClippingAttachment(r)},e}();t.AtlasAttachmentLoader=e}(i||(i={})),function(t){var e;(e=t.BlendMode||(t.BlendMode={}))[e.Normal=0]="Normal",e[e.Additive=1]="Additive",e[e.Multiply=2]="Multiply",e[e.Screen=3]="Screen"}(i||(i={})),function(t){var e=function(){function e(t,e,r){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=r,this.setToSetupPose()}return e.prototype.isActive=function(){return this.active},e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(e,r,i,n,o,s,a){this.ax=e,this.ay=r,this.arotation=i,this.ascaleX=n,this.ascaleY=o,this.ashearX=s,this.ashearY=a,this.appliedValid=!0;var h=this.parent;if(null==h){var u=this.skeleton,c=i+90+a,l=u.scaleX,f=u.scaleY;return this.a=t.MathUtils.cosDeg(i+s)*n*l,this.b=t.MathUtils.cosDeg(c)*o*l,this.c=t.MathUtils.sinDeg(i+s)*n*f,this.d=t.MathUtils.sinDeg(c)*o*f,this.worldX=e*l+u.x,void(this.worldY=r*f+u.y)}var p=h.a,d=h.b,v=h.c,y=h.d;switch(this.worldX=p*e+d*r+h.worldX,this.worldY=v*e+y*r+h.worldY,this.data.transformMode){case t.TransformMode.Normal:c=i+90+a;var g=t.MathUtils.cosDeg(i+s)*n,m=t.MathUtils.cosDeg(c)*o,x=t.MathUtils.sinDeg(i+s)*n,b=t.MathUtils.sinDeg(c)*o;return this.a=p*g+d*x,this.b=p*m+d*b,this.c=v*g+y*x,void(this.d=v*m+y*b);case t.TransformMode.OnlyTranslation:c=i+90+a,this.a=t.MathUtils.cosDeg(i+s)*n,this.b=t.MathUtils.cosDeg(c)*o,this.c=t.MathUtils.sinDeg(i+s)*n,this.d=t.MathUtils.sinDeg(c)*o;break;case t.TransformMode.NoRotationOrReflection:var w=0;(S=p*p+v*v)>1e-4?(S=Math.abs(p*y-d*v)/S,p/=this.skeleton.scaleX,d=(v/=this.skeleton.scaleY)*S,y=p*S,w=Math.atan2(v,p)*t.MathUtils.radDeg):(p=0,v=0,w=90-Math.atan2(y,d)*t.MathUtils.radDeg);var E=i+s-w,T=i+a-w+90;g=t.MathUtils.cosDeg(E)*n,m=t.MathUtils.cosDeg(T)*o,x=t.MathUtils.sinDeg(E)*n,b=t.MathUtils.sinDeg(T)*o,this.a=p*g-d*x,this.b=p*m-d*b,this.c=v*g+y*x,this.d=v*m+y*b;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var S,_=t.MathUtils.cosDeg(i),O=t.MathUtils.sinDeg(i),P=(p*_+d*O)/this.skeleton.scaleX,M=(v*_+y*O)/this.skeleton.scaleY;(S=Math.sqrt(P*P+M*M))>1e-5&&(S=1/S),P*=S,M*=S,S=Math.sqrt(P*P+M*M),this.data.transformMode==t.TransformMode.NoScale&&p*y-d*v<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(S=-S);var A=Math.PI/2+Math.atan2(M,P),L=Math.cos(A)*S,C=Math.sin(A)*S;g=t.MathUtils.cosDeg(s)*n,m=t.MathUtils.cosDeg(90+a)*o,x=t.MathUtils.sinDeg(s)*n,b=t.MathUtils.sinDeg(90+a)*o,this.a=P*g+L*x,this.b=P*m+L*b,this.c=M*g+C*x,this.d=M*m+C*b}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*t.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*t.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},e.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent;if(null==e)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*t.MathUtils.radDeg);var r=e.a,i=e.b,n=e.c,o=e.d,s=1/(r*o-i*n),a=this.worldX-e.worldX,h=this.worldY-e.worldY;this.ax=a*o*s-h*i*s,this.ay=h*r*s-a*n*s;var u=s*o,c=s*r,l=s*i,f=s*n,p=u*this.a-l*this.c,d=u*this.b-l*this.d,v=c*this.c-f*this.a,y=c*this.d-f*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(p*p+v*v),this.ascaleX>1e-4){var g=p*y-d*v;this.ascaleY=g/this.ascaleX,this.ashearY=Math.atan2(p*d+v*y,g)*t.MathUtils.radDeg,this.arotation=Math.atan2(v,p)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(d*d+y*y),this.ashearY=0,this.arotation=90-Math.atan2(y,d)*t.MathUtils.radDeg},e.prototype.worldToLocal=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,o=1/(e*n-r*i),s=t.x-this.worldX,a=t.y-this.worldY;return t.x=s*n*o-a*r*o,t.y=a*e*o-s*i*o,t},e.prototype.localToWorld=function(t){var e=t.x,r=t.y;return t.x=e*this.a+r*this.b+this.worldX,t.y=e*this.c+r*this.d+this.worldY,t},e.prototype.worldToLocalRotation=function(e){var r=t.MathUtils.sinDeg(e),i=t.MathUtils.cosDeg(e);return Math.atan2(this.a*r-this.c*i,this.d*i-this.b*r)*t.MathUtils.radDeg+this.rotation-this.shearX},e.prototype.localToWorldRotation=function(e){e-=this.rotation-this.shearX;var r=t.MathUtils.sinDeg(e),i=t.MathUtils.cosDeg(e);return Math.atan2(i*this.c+r*this.d,i*this.a+r*this.b)*t.MathUtils.radDeg},e.prototype.rotateWorld=function(e){var r=this.a,i=this.b,n=this.c,o=this.d,s=t.MathUtils.cosDeg(e),a=t.MathUtils.sinDeg(e);this.a=s*r-a*n,this.b=s*i-a*o,this.c=a*r+s*n,this.d=a*i+s*o,this.appliedValid=!1},e}();t.Bone=e}(i||(i={})),function(t){var e;t.BoneData=function(r,i,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=e.Normal,this.skinRequired=!1,this.color=new t.Color,r<0)throw new Error("index must be >= 0.");if(null==i)throw new Error("name cannot be null.");this.index=r,this.name=i,this.parent=n},function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(e=t.TransformMode||(t.TransformMode={}))}(i||(i={})),function(t){t.ConstraintData=function(t,e,r){this.name=t,this.order=e,this.skinRequired=r}}(i||(i={})),function(t){t.Event=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e}}(i||(i={})),function(t){t.EventData=function(t){this.name=t}}(i||(i={})),function(t){var e=function(){function e(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var r=0;r<t.bones.length;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},e.prototype.apply1=function(e,r,i,n,o,s,a){e.appliedValid||e.updateAppliedTransform();var h=e.parent,u=h.a,c=h.b,l=h.c,f=h.d,p=-e.ashearX-e.arotation,d=0,v=0;switch(e.data.transformMode){case t.TransformMode.OnlyTranslation:d=r-e.worldX,v=i-e.worldY;break;case t.TransformMode.NoRotationOrReflection:var y=Math.abs(u*f-c*l)/(u*u+l*l),g=u/e.skeleton.scaleX,m=l/e.skeleton.scaleY;c=-m*y*e.skeleton.scaleX,f=g*y*e.skeleton.scaleY,p+=Math.atan2(m,g)*t.MathUtils.radDeg;default:var x=r-h.worldX,b=i-h.worldY,w=u*f-c*l;d=(x*f-b*c)/w-e.ax,v=(b*u-x*l)/w-e.ay}p+=Math.atan2(v,d)*t.MathUtils.radDeg,e.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);var E=e.ascaleX,T=e.ascaleY;if(n||o){switch(e.data.transformMode){case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:d=r-e.worldX,v=i-e.worldY}var S=e.data.length*E,_=Math.sqrt(d*d+v*v);(n&&_<S||o&&_>S&&S>1e-4)&&(E*=y=(_/S-1)*a+1,s&&(T*=y))}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+p*a,E,T,e.ashearX,e.ashearY)},e.prototype.apply2=function(e,r,i,n,o,s,a,h){if(0!=h){e.appliedValid||e.updateAppliedTransform(),r.appliedValid||r.updateAppliedTransform();var u=e.ax,c=e.ay,l=e.ascaleX,f=l,p=e.ascaleY,d=r.ascaleX,v=0,y=0,g=0;l<0?(l=-l,v=180,g=-1):(v=0,g=1),p<0&&(p=-p,g=-g),d<0?(d=-d,y=180):y=0;var m=r.ax,x=0,b=0,w=0,E=e.a,T=e.b,S=e.c,_=e.d,O=Math.abs(l-p)<=1e-4;O?(b=E*m+T*(x=r.ay)+e.worldX,w=S*m+_*x+e.worldY):(x=0,b=E*m+e.worldX,w=S*m+e.worldY);var P=e.parent;E=P.a,T=P.b,S=P.c;var M,A,L=1/(E*(_=P.d)-T*S),C=b-P.worldX,R=w-P.worldY,k=(C*_-R*T)*L-u,F=(R*E-C*S)*L-c,I=Math.sqrt(k*k+F*F),D=r.data.length*d;if(I<1e-4)return this.apply1(e,i,n,!1,s,!1,h),void r.updateWorldTransformWith(m,x,0,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY);var j=((C=i-P.worldX)*_-(R=n-P.worldY)*T)*L-u,B=(R*E-C*S)*L-c,N=j*j+B*B;if(0!=a){a*=l*(d+1)/2;var G=Math.sqrt(N),U=G-I-D*l+a;if(U>0){var Y=Math.min(1,U/(2*a))-1;N=(j-=(Y=(U-a*(1-Y*Y))/G)*j)*j+(B-=Y*B)*B}}t:if(O){var z=(N-I*I-(D*=l)*D)/(2*I*D);z<-1?z=-1:z>1&&(z=1,s&&(f*=(Math.sqrt(N)/(I+D)-1)*h+1)),A=Math.acos(z)*o,E=I+D*z,T=D*Math.sin(A),M=Math.atan2(B*E-j*T,j*E+B*T)}else{var X=(E=l*D)*E,V=(T=p*D)*T,W=Math.atan2(B,j),H=-2*V*I,q=V-X;if((_=H*H-4*q*(S=V*I*I+X*N-X*V))>=0){var K=Math.sqrt(_);H<0&&(K=-K);var Z=(K=-(H+K)/2)/q,J=S/K,Q=Math.abs(Z)<Math.abs(J)?Z:J;if(Q*Q<=N){R=Math.sqrt(N-Q*Q)*o,M=W-Math.atan2(R,Q),A=Math.atan2(R/p,(Q-I)/l);break t}}var $=t.MathUtils.PI,tt=I-E,et=tt*tt,rt=0,it=0,nt=I+E,ot=nt*nt,st=0;(S=-E*I/(X-V))>=-1&&S<=1&&(S=Math.acos(S),(_=(C=E*Math.cos(S)+I)*C+(R=T*Math.sin(S))*R)<et&&($=S,et=_,tt=C,rt=R),_>ot&&(it=S,ot=_,nt=C,st=R)),N<=(et+ot)/2?(M=W-Math.atan2(rt*o,tt),A=$*o):(M=W-Math.atan2(st*o,nt),A=it*o)}var at=Math.atan2(x,m)*g,ht=e.arotation;(M=(M-at)*t.MathUtils.radDeg+v-ht)>180?M-=360:M<-180&&(M+=360),e.updateWorldTransformWith(u,c,ht+M*h,f,e.ascaleY,0,0),ht=r.arotation,(A=((A+at)*t.MathUtils.radDeg-r.ashearX)*g+y-ht)>180?A-=360:A<-180&&(A+=360),r.updateWorldTransformWith(m,x,ht+A*h,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)}else r.updateWorldTransform()},e}();t.IkConstraint=e}(i||(i={})),function(t){var e=function(t){function e(e){var r=t.call(this,e,0,!1)||this;return r.bones=new Array,r.bendDirection=1,r.compress=!1,r.stretch=!1,r.uniform=!1,r.mix=1,r.softness=0,r}return n(e,t),e}(t.ConstraintData);t.IkConstraintData=e}(i||(i={})),function(t){var e=function(){function e(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var r=0,i=t.bones.length;r<i;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var r=this.target.getAttachment();if(r instanceof t.PathAttachment){var i=this.rotateMix,n=this.translateMix,o=i>0;if(n>0||o){var s=this.data,a=s.spacingMode==t.SpacingMode.Percent,h=s.rotateMode,u=h==t.RotateMode.Tangent,c=h==t.RotateMode.ChainScale,l=this.bones.length,f=u?l:l+1,p=this.bones,d=t.Utils.setArraySize(this.spaces,f),v=null,y=this.spacing;if(c||!a){c&&(v=t.Utils.setArraySize(this.lengths,l));for(var g=s.spacingMode==t.SpacingMode.Length,m=0,x=f-1;m<x;){var b=(C=p[m]).data.length;if(b<e.epsilon)c&&(v[m]=0),d[++m]=0;else if(a){if(c){var w=b*C.a,E=b*C.c,T=Math.sqrt(w*w+E*E);v[m]=T}d[++m]=y}else{w=b*C.a,E=b*C.c;var S=Math.sqrt(w*w+E*E);c&&(v[m]=S),d[++m]=(g?b+y:y)*S/b}}}else for(m=1;m<f;m++)d[m]=y;var _=this.computeWorldPositions(r,f,u,s.positionMode==t.PositionMode.Percent,a),O=_[0],P=_[1],M=s.offsetRotation,A=!1;0==M?A=h==t.RotateMode.Chain:(A=!1,M*=(L=this.target.bone).a*L.d-L.b*L.c>0?t.MathUtils.degRad:-t.MathUtils.degRad),m=0;for(var L=3;m<l;m++,L+=3){var C;(C=p[m]).worldX+=(O-C.worldX)*n,C.worldY+=(P-C.worldY)*n;var R=(w=_[L])-O,k=(E=_[L+1])-P;if(c){var F=v[m];if(0!=F){var I=(Math.sqrt(R*R+k*k)/F-1)*i+1;C.a*=I,C.c*=I}}if(O=w,P=E,o){var D=C.a,j=C.b,B=C.c,N=C.d,G=0,U=0,Y=0;if(G=u?_[L-1]:0==d[m+1]?_[L+2]:Math.atan2(k,R),G-=Math.atan2(B,D),A){U=Math.cos(G),Y=Math.sin(G);var z=C.data.length;O+=(z*(U*D-Y*B)-R)*i,P+=(z*(Y*D+U*B)-k)*i}else G+=M;G>t.MathUtils.PI?G-=t.MathUtils.PI2:G<-t.MathUtils.PI&&(G+=t.MathUtils.PI2),G*=i,U=Math.cos(G),Y=Math.sin(G),C.a=U*D-Y*B,C.b=U*j-Y*N,C.c=Y*D+U*B,C.d=Y*j+U*N}C.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(r,i,n,o,s){var a=this.target,h=this.position,u=this.spaces,c=t.Utils.setArraySize(this.positions,3*i+2),l=null,f=r.closed,p=r.worldVerticesLength,d=p/6,v=e.NONE;if(!r.constantSpeed){var y=r.lengths,g=y[d-=f?1:2];if(o&&(h*=g),s)for(var m=1;m<i;m++)u[m]*=g;l=t.Utils.setArraySize(this.world,8),m=0;for(var x=0,b=0;m<i;m++,x+=3){var w=h+=V=u[m];if(f)(w%=g)<0&&(w+=g),b=0;else{if(w<0){v!=e.BEFORE&&(v=e.BEFORE,r.computeWorldVertices(a,2,4,l,0,2)),this.addBeforePosition(w,l,0,c,x);continue}if(w>g){v!=e.AFTER&&(v=e.AFTER,r.computeWorldVertices(a,p-6,4,l,0,2)),this.addAfterPosition(w-g,l,0,c,x);continue}}for(;;b++){var E=y[b];if(!(w>E)){0==b?w/=E:w=(w-(K=y[b-1]))/(E-K);break}}b!=v&&(v=b,f&&b==d?(r.computeWorldVertices(a,p-4,4,l,0,2),r.computeWorldVertices(a,0,4,l,4,2)):r.computeWorldVertices(a,6*b+2,8,l,0,2)),this.addCurvePosition(w,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],c,x,n||m>0&&0==V)}return c}f?(p+=2,l=t.Utils.setArraySize(this.world,p),r.computeWorldVertices(a,2,p-4,l,0,2),r.computeWorldVertices(a,0,2,l,p-4,2),l[p-2]=l[0],l[p-1]=l[1]):(d--,p-=4,l=t.Utils.setArraySize(this.world,p),r.computeWorldVertices(a,2,p,l,0,2));for(var T=t.Utils.setArraySize(this.curves,d),S=0,_=l[0],O=l[1],P=0,M=0,A=0,L=0,C=0,R=0,k=0,F=0,I=0,D=0,j=0,B=0,N=0,G=0,U=(m=0,2);m<d;m++,U+=6)P=l[U],M=l[U+1],A=l[U+2],L=l[U+3],j=2*(k=.1875*(_-2*P+A))+(I=.09375*(3*(P-A)-_+(C=l[U+4]))),B=2*(F=.1875*(O-2*M+L))+(D=.09375*(3*(M-L)-O+(R=l[U+5]))),N=.75*(P-_)+k+.16666667*I,G=.75*(M-O)+F+.16666667*D,S+=Math.sqrt(N*N+G*G),N+=j,G+=B,j+=I,B+=D,S+=Math.sqrt(N*N+G*G),N+=j,G+=B,S+=Math.sqrt(N*N+G*G),N+=j+I,G+=B+D,S+=Math.sqrt(N*N+G*G),T[m]=S,_=C,O=R;if(h*=o?S:S/r.lengths[d-1],s)for(m=1;m<i;m++)u[m]*=S;for(var Y=this.segments,z=0,X=(m=0,x=0,b=0,0);m<i;m++,x+=3){var V;if(w=h+=V=u[m],f)(w%=S)<0&&(w+=S),b=0;else{if(w<0){this.addBeforePosition(w,l,0,c,x);continue}if(w>S){this.addAfterPosition(w-S,l,p-4,c,x);continue}}for(;;b++){var W=T[b];if(!(w>W)){0==b?w/=W:w=(w-(K=T[b-1]))/(W-K);break}}if(b!=v){v=b;var H=6*b;for(_=l[H],O=l[H+1],P=l[H+2],M=l[H+3],A=l[H+4],L=l[H+5],j=2*(k=.03*(_-2*P+A))+(I=.006*(3*(P-A)-_+(C=l[H+6]))),B=2*(F=.03*(O-2*M+L))+(D=.006*(3*(M-L)-O+(R=l[H+7]))),N=.3*(P-_)+k+.16666667*I,G=.3*(M-O)+F+.16666667*D,z=Math.sqrt(N*N+G*G),Y[0]=z,H=1;H<8;H++)N+=j,G+=B,j+=I,B+=D,z+=Math.sqrt(N*N+G*G),Y[H]=z;N+=j,G+=B,z+=Math.sqrt(N*N+G*G),Y[8]=z,N+=j+I,G+=B+D,z+=Math.sqrt(N*N+G*G),Y[9]=z,X=0}for(w*=z;;X++){var q=Y[X];if(!(w>q)){var K;0==X?w/=q:w=X+(w-(K=Y[X-1]))/(q-K);break}}this.addCurvePosition(.1*w,_,O,P,M,A,L,C,R,c,x,n||m>0&&0==V)}return c},e.prototype.addBeforePosition=function(t,e,r,i,n){var o=e[r],s=e[r+1],a=e[r+2]-o,h=e[r+3]-s,u=Math.atan2(h,a);i[n]=o+t*Math.cos(u),i[n+1]=s+t*Math.sin(u),i[n+2]=u},e.prototype.addAfterPosition=function(t,e,r,i,n){var o=e[r+2],s=e[r+3],a=o-e[r],h=s-e[r+1],u=Math.atan2(h,a);i[n]=o+t*Math.cos(u),i[n+1]=s+t*Math.sin(u),i[n+2]=u},e.prototype.addCurvePosition=function(t,e,r,i,n,o,s,a,h,u,c,l){if(0==t||isNaN(t))return u[c]=e,u[c+1]=r,void(u[c+2]=Math.atan2(n-r,i-e));var f=t*t,p=f*t,d=1-t,v=d*d,y=v*d,g=d*t,m=3*g,x=d*m,b=m*t,w=e*y+i*x+o*b+a*p,E=r*y+n*x+s*b+h*p;u[c]=w,u[c+1]=E,l&&(u[c+2]=t<.001?Math.atan2(n-r,i-e):Math.atan2(E-(r*v+n*g*2+s*f),w-(e*v+i*g*2+o*f)))},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e.epsilon=1e-5,e}();t.PathConstraint=e}(i||(i={})),function(t){var e,r,i,o=function(t){function e(e){var r=t.call(this,e,0,!1)||this;return r.bones=new Array,r}return n(e,t),e}(t.ConstraintData);t.PathConstraintData=o,(i=t.PositionMode||(t.PositionMode={}))[i.Fixed=0]="Fixed",i[i.Percent=1]="Percent",(r=t.SpacingMode||(t.SpacingMode={}))[r.Length=0]="Length",r[r.Fixed=1]="Fixed",r[r.Percent=2]="Percent",(e=t.RotateMode||(t.RotateMode={}))[e.Tangent=0]="Tangent",e[e.Chain=1]="Chain",e[e.ChainScale=2]="ChainScale"}(i||(i={})),function(t){var e=function(){function t(t){this.toLoad=new Array,this.assets={},this.clientId=t}return t.prototype.loaded=function(){var t=0;for(var e in this.assets)t++;return t},t}(),r=function(){function t(t){void 0===t&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}return t.prototype.queueAsset=function(t,r,i){var n=this.clientAssets[t];return null==n&&(n=new e(t),this.clientAssets[t]=n),null!==r&&(n.textureLoader=r),n.toLoad.push(i),this.queuedAssets[i]!==i&&(this.queuedAssets[i]=i,!0)},t.prototype.loadText=function(t,e){var r=this;if(e=this.pathPrefix+e,this.queueAsset(t,null,e)){var i=new XMLHttpRequest;i.overrideMimeType("text/html"),i.onreadystatechange=function(){i.readyState==XMLHttpRequest.DONE&&(i.status>=200&&i.status<300?r.rawAssets[e]=i.responseText:r.errors[e]="Couldn't load text ".concat(e,": status ").concat(i.status,", ").concat(i.responseText))},i.open("GET",e,!0),i.send()}},t.prototype.loadJson=function(t,e){var r=this;if(e=this.pathPrefix+e,this.queueAsset(t,null,e)){var i=new XMLHttpRequest;i.overrideMimeType("text/html"),i.onreadystatechange=function(){i.readyState==XMLHttpRequest.DONE&&(i.status>=200&&i.status<300?r.rawAssets[e]=JSON.parse(i.responseText):r.errors[e]="Couldn't load text ".concat(e,": status ").concat(i.status,", ").concat(i.responseText))},i.open("GET",e,!0),i.send()}},t.prototype.loadTexture=function(t,e,r){var i=this;if(r=this.pathPrefix+r,this.queueAsset(t,e,r))if("undefined"!=typeof window&&"undefined"!=typeof navigator&&window.document||"undefined"==typeof importScripts){var n=new Image;n.crossOrigin="anonymous",n.onload=function(t){i.rawAssets[r]=n},n.onerror=function(t){i.errors[r]="Couldn't load image ".concat(r)},n.src=r}else fetch(r,{mode:"cors"}).then((function(t){return t.ok||(i.errors[r]="Couldn't load image "+r),t.blob()})).then((function(t){return createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(t){i.rawAssets[r]=t}))},t.prototype.get=function(t,e){e=this.pathPrefix+e;var r=this.clientAssets[t];return null==r||r.assets[e]},t.prototype.updateClientAssets=function(t){for(var e=!("undefined"!=typeof window&&"undefined"!=typeof navigator&&window.document)&&"undefined"!=typeof importScripts,r=0;r<t.toLoad.length;r++){var i=t.toLoad[r];if(null==t.assets[i]){var n=this.rawAssets[i];if(null==n)continue;e?n instanceof ImageBitmap?t.assets[i]=t.textureLoader(n):t.assets[i]=n:n instanceof HTMLImageElement?t.assets[i]=t.textureLoader(n):t.assets[i]=n}}},t.prototype.isLoadingComplete=function(t){var e=this.clientAssets[t];return null==e||(this.updateClientAssets(e),e.toLoad.length==e.loaded())},t.prototype.dispose=function(){},t.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},t.prototype.getErrors=function(){return this.errors},t}();t.SharedAssetManager=r}(i||(i={})),function(t){var e=function(){function e(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var r=0;r<e.bones.length;r++){var i=e.bones[r],n=void 0;if(null==i.parent)n=new t.Bone(i,this,null);else{var o=this.bones[i.parent.index];n=new t.Bone(i,this,o),o.children.push(n)}this.bones.push(n)}for(this.slots=new Array,this.drawOrder=new Array,r=0;r<e.slots.length;r++){var s=e.slots[r],a=(n=this.bones[s.boneData.index],new t.Slot(s,n));this.slots.push(a),this.drawOrder.push(a)}for(this.ikConstraints=new Array,r=0;r<e.ikConstraints.length;r++){var h=e.ikConstraints[r];this.ikConstraints.push(new t.IkConstraint(h,this))}for(this.transformConstraints=new Array,r=0;r<e.transformConstraints.length;r++){var u=e.transformConstraints[r];this.transformConstraints.push(new t.TransformConstraint(u,this))}for(this.pathConstraints=new Array,r=0;r<e.pathConstraints.length;r++){var c=e.pathConstraints[r];this.pathConstraints.push(new t.PathConstraint(c,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,r=t.length;e<r;e++)(n=t[e]).sorted=n.data.skinRequired,n.active=!n.sorted;if(null!=this.skin){var i=this.skin.bones;for(e=0,r=this.skin.bones.length;e<r;e++){var n=this.bones[i[e].index];do{n.sorted=!1,n.active=!0,n=n.parent}while(null!=n)}}var o=this.ikConstraints,s=this.transformConstraints,a=this.pathConstraints,h=o.length,u=s.length,c=a.length,l=h+u+c;t:for(e=0;e<l;e++){for(var f=0;f<h;f++)if((p=o[f]).data.order==e){this.sortIkConstraint(p);continue t}for(f=0;f<u;f++)if((p=s[f]).data.order==e){this.sortTransformConstraint(p);continue t}for(f=0;f<c;f++){var p;if((p=a[f]).data.order==e){this.sortPathConstraint(p);continue t}}}for(e=0,r=t.length;e<r;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var r=e.target;this.sortBone(r);var i=e.bones,n=i[0];if(this.sortBone(n),i.length>1){var o=i[i.length-1];this._updateCache.indexOf(o)>-1||this.updateCacheReset.push(o)}this._updateCache.push(e),this.sortReset(n.children),i[i.length-1].sorted=!0}},e.prototype.sortPathConstraint=function(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var r=e.target,i=r.data.index,n=r.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,i,n),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,n);for(var o=0,s=this.data.skins.length;o<s;o++)this.sortPathConstraintAttachment(this.data.skins[o],i,n);var a=r.getAttachment();a instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(a,n);var h=e.bones,u=h.length;for(o=0;o<u;o++)this.sortBone(h[o]);for(this._updateCache.push(e),o=0;o<u;o++)this.sortReset(h[o].children);for(o=0;o<u;o++)h[o].sorted=!0}},e.prototype.sortTransformConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){this.sortBone(e.target);var r=e.bones,i=r.length;if(e.data.local)for(var n=0;n<i;n++){var o=r[n];this.sortBone(o.parent),this._updateCache.indexOf(o)>-1||this.updateCacheReset.push(o)}else for(n=0;n<i;n++)this.sortBone(r[n]);this._updateCache.push(e);for(var s=0;s<i;s++)this.sortReset(r[s].children);for(s=0;s<i;s++)r[s].sorted=!0}},e.prototype.sortPathConstraintAttachment=function(t,e,r){var i=t.attachments[e];if(i)for(var n in i)this.sortPathConstraintAttachmentWith(i[n],r)},e.prototype.sortPathConstraintAttachmentWith=function(e,r){if(e instanceof t.PathAttachment){var i=e.bones;if(null==i)this.sortBone(r);else for(var n=this.bones,o=0;o<i.length;)for(var s=i[o++],a=o+s;o<a;o++){var h=i[o];this.sortBone(n[h])}}},e.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var e=0,r=t.length;e<r;e++){var i=t[e];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,r=t.length;e<r;e++){var i=t[e];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}var n=this._updateCache;for(e=0,r=n.length;e<r;e++)n[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,r=t.length;e<r;e++)t[e].setToSetupPose();var i=this.ikConstraints;for(e=0,r=i.length;e<r;e++)(a=i[e]).mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch;var n=this.transformConstraints;for(e=0,r=n.length;e<r;e++){var o=(a=n[e]).data;a.rotateMix=o.rotateMix,a.translateMix=o.translateMix,a.scaleMix=o.scaleMix,a.shearMix=o.shearMix}var s=this.pathConstraints;for(e=0,r=s.length;e<r;e++){var a;o=(a=s[e]).data,a.position=o.position,a.spacing=o.spacing,a.rotateMix=o.rotateMix,a.translateMix=o.translateMix}},e.prototype.setSlotsToSetupPose=function(){var e=this.slots;t.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(var r=0,i=e.length;r<i;r++)e[r].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,i=e.length;r<i;r++){var n=e[r];if(n.data.name==t)return n}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,i=e.length;r<i;r++)if(e[r].data.name==t)return r;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,i=e.length;r<i;r++){var n=e[r];if(n.data.name==t)return n}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,i=e.length;r<i;r++)if(e[r].data.name==t)return r;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,r=0,i=e.length;r<i;r++){var n=e[r],o=n.data.attachmentName;if(null!=o){var s=t.getAttachment(r,o);null!=s&&n.setAttachment(s)}}this.skin=t,this.updateCache()}},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var r=this.skin.getAttachment(t,e);if(null!=r)return r}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var r=this.slots,i=0,n=r.length;i<n;i++){var o=r[i];if(o.data.name==t){var s=null;if(null!=e&&null==(s=this.getAttachment(i,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void o.setAttachment(s)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,i=e.length;r<i;r++){var n=e[r];if(n.data.name==t)return n}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,i=e.length;r<i;r++){var n=e[r];if(n.data.name==t)return n}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,i=e.length;r<i;r++){var n=e[r];if(n.data.name==t)return n}return null},e.prototype.getBounds=function(e,r,i){if(void 0===i&&(i=new Array(2)),null==e)throw new Error("offset cannot be null.");if(null==r)throw new Error("size cannot be null.");for(var n=this.drawOrder,o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,u=0,c=n.length;u<c;u++){var l=n[u];if(l.bone.active){var f=0,p=null,d=l.getAttachment();if(d instanceof t.RegionAttachment)f=8,p=t.Utils.setArraySize(i,f,0),d.computeWorldVertices(l.bone,p,0,2);else if(d instanceof t.MeshAttachment){var v=d;f=v.worldVerticesLength,p=t.Utils.setArraySize(i,f,0),v.computeWorldVertices(l,0,f,p,0,2)}if(null!=p)for(var y=0,g=p.length;y<g;y+=2){var m=p[y],x=p[y+1];o=Math.min(o,m),s=Math.min(s,x),a=Math.max(a,m),h=Math.max(h,x)}}}e.set(o,s),r.set(a-o,h-s)},e.prototype.update=function(t){this.time+=t},e}();t.Skeleton=e}(i||(i={})),function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(i){var n=this.scale,o=new t.SkeletonData;o.name="";var s=new r(i);if(o.hash=s.readString(),o.version=s.readString(),"3.8.75"==o.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");o.x=s.readFloat(),o.y=s.readFloat(),o.width=s.readFloat(),o.height=s.readFloat();var a=s.readBoolean();a&&(o.fps=s.readFloat(),o.imagesPath=s.readString(),o.audioPath=s.readString());var h=0;h=s.readInt(!0);for(var u=0;u<h;u++)s.strings.push(s.readString());for(h=s.readInt(!0),u=0;u<h;u++){var c=s.readString(),l=0==u?null:o.bones[s.readInt(!0)];(d=new t.BoneData(u,c,l)).rotation=s.readFloat(),d.x=s.readFloat()*n,d.y=s.readFloat()*n,d.scaleX=s.readFloat(),d.scaleY=s.readFloat(),d.shearX=s.readFloat(),d.shearY=s.readFloat(),d.length=s.readFloat()*n,d.transformMode=e.TransformModeValues[s.readInt(!0)],d.skinRequired=s.readBoolean(),a&&t.Color.rgba8888ToColor(d.color,s.readInt32()),o.bones.push(d)}for(h=s.readInt(!0),u=0;u<h;u++){var f=s.readString(),p=o.bones[s.readInt(!0)],d=new t.SlotData(u,f,p);t.Color.rgba8888ToColor(d.color,s.readInt32());var v=s.readInt32();-1!=v&&t.Color.rgb888ToColor(d.darkColor=new t.Color,v),d.attachmentName=s.readStringRef(),d.blendMode=e.BlendModeValues[s.readInt(!0)],o.slots.push(d)}h=s.readInt(!0),u=0;for(var y=void 0;u<h;u++){(d=new t.IkConstraintData(s.readString())).order=s.readInt(!0),d.skinRequired=s.readBoolean(),y=s.readInt(!0);for(var g=0;g<y;g++)d.bones.push(o.bones[s.readInt(!0)]);d.target=o.bones[s.readInt(!0)],d.mix=s.readFloat(),d.softness=s.readFloat()*n,d.bendDirection=s.readByte(),d.compress=s.readBoolean(),d.stretch=s.readBoolean(),d.uniform=s.readBoolean(),o.ikConstraints.push(d)}for(h=s.readInt(!0),u=0,y=void 0;u<h;u++){for((d=new t.TransformConstraintData(s.readString())).order=s.readInt(!0),d.skinRequired=s.readBoolean(),y=s.readInt(!0),g=0;g<y;g++)d.bones.push(o.bones[s.readInt(!0)]);d.target=o.bones[s.readInt(!0)],d.local=s.readBoolean(),d.relative=s.readBoolean(),d.offsetRotation=s.readFloat(),d.offsetX=s.readFloat()*n,d.offsetY=s.readFloat()*n,d.offsetScaleX=s.readFloat(),d.offsetScaleY=s.readFloat(),d.offsetShearY=s.readFloat(),d.rotateMix=s.readFloat(),d.translateMix=s.readFloat(),d.scaleMix=s.readFloat(),d.shearMix=s.readFloat(),o.transformConstraints.push(d)}for(h=s.readInt(!0),u=0,y=void 0;u<h;u++){for((d=new t.PathConstraintData(s.readString())).order=s.readInt(!0),d.skinRequired=s.readBoolean(),y=s.readInt(!0),g=0;g<y;g++)d.bones.push(o.bones[s.readInt(!0)]);d.target=o.slots[s.readInt(!0)],d.positionMode=e.PositionModeValues[s.readInt(!0)],d.spacingMode=e.SpacingModeValues[s.readInt(!0)],d.rotateMode=e.RotateModeValues[s.readInt(!0)],d.offsetRotation=s.readFloat(),d.position=s.readFloat(),d.positionMode==t.PositionMode.Fixed&&(d.position*=n),d.spacing=s.readFloat(),d.spacingMode!=t.SpacingMode.Length&&d.spacingMode!=t.SpacingMode.Fixed||(d.spacing*=n),d.rotateMix=s.readFloat(),d.translateMix=s.readFloat(),o.pathConstraints.push(d)}var m=this.readSkin(s,o,!0,a);for(null!=m&&(o.defaultSkin=m,o.skins.push(m)),u=o.skins.length,t.Utils.setArraySize(o.skins,h=u+s.readInt(!0));u<h;u++)o.skins[u]=this.readSkin(s,o,!1,a);for(h=this.linkedMeshes.length,u=0;u<h;u++){var x=this.linkedMeshes[u],b=null==x.skin?o.defaultSkin:o.findSkin(x.skin);if(null==b)throw new Error("Skin not found: "+x.skin);var w=b.getAttachment(x.slotIndex,x.parent);if(null==w)throw new Error("Parent mesh not found: "+x.parent);x.mesh.deformAttachment=x.inheritDeform?w:x.mesh,x.mesh.setParentMesh(w),x.mesh.updateUVs()}for(this.linkedMeshes.length=0,h=s.readInt(!0),u=0;u<h;u++)(d=new t.EventData(s.readStringRef())).intValue=s.readInt(!1),d.floatValue=s.readFloat(),d.stringValue=s.readString(),d.audioPath=s.readString(),null!=d.audioPath&&(d.volume=s.readFloat(),d.balance=s.readFloat()),o.events.push(d);for(h=s.readInt(!0),u=0;u<h;u++)o.animations.push(this.readAnimation(s,s.readString(),o));return o},e.prototype.readSkin=function(e,r,i,n){var o=null,s=0;if(i){if(0==(s=e.readInt(!0)))return null;o=new t.Skin("default")}else{(o=new t.Skin(e.readStringRef())).bones.length=e.readInt(!0);for(var a=0,h=o.bones.length;a<h;a++)o.bones[a]=r.bones[e.readInt(!0)];for(a=0,h=e.readInt(!0);a<h;a++)o.constraints.push(r.ikConstraints[e.readInt(!0)]);for(a=0,h=e.readInt(!0);a<h;a++)o.constraints.push(r.transformConstraints[e.readInt(!0)]);for(a=0,h=e.readInt(!0);a<h;a++)o.constraints.push(r.pathConstraints[e.readInt(!0)]);s=e.readInt(!0)}for(a=0;a<s;a++)for(var u=e.readInt(!0),c=0,l=e.readInt(!0);c<l;c++){var f=e.readStringRef(),p=this.readAttachment(e,r,o,u,f,n);null!=p&&o.setAttachment(u,f,p)}return o},e.prototype.readAttachment=function(r,n,o,s,a,h){var u=this.scale,c=r.readStringRef();null==c&&(c=a);var l=r.readByte();switch(e.AttachmentTypeValues[l]){case t.AttachmentType.Region:var f=r.readStringRef(),p=r.readFloat(),d=r.readFloat(),v=r.readFloat(),y=r.readFloat(),g=r.readFloat(),m=r.readFloat(),x=r.readFloat(),b=r.readInt32();null==f&&(f=c);var w=this.attachmentLoader.newRegionAttachment(o,c,f);return null==w?null:(w.path=f,w.x=d*u,w.y=v*u,w.scaleX=y,w.scaleY=g,w.rotation=p,w.width=m*u,w.height=x*u,t.Color.rgba8888ToColor(w.color,b),w.updateOffset(),w);case t.AttachmentType.BoundingBox:var E=r.readInt(!0),T=this.readVertices(r,E),S=(b=h?r.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(o,c));return null==S?null:(S.worldVerticesLength=E<<1,S.vertices=T.vertices,S.bones=T.bones,h&&t.Color.rgba8888ToColor(S.color,b),S);case t.AttachmentType.Mesh:f=r.readStringRef(),b=r.readInt32(),E=r.readInt(!0);var _=this.readFloatArray(r,E<<1,1),O=this.readShortArray(r),P=(T=this.readVertices(r,E),r.readInt(!0)),M=null;return m=0,x=0,h&&(M=this.readShortArray(r),m=r.readFloat(),x=r.readFloat()),null==f&&(f=c),null==(A=this.attachmentLoader.newMeshAttachment(o,c,f))?null:(A.path=f,t.Color.rgba8888ToColor(A.color,b),A.bones=T.bones,A.vertices=T.vertices,A.worldVerticesLength=E<<1,A.triangles=O,A.regionUVs=_,A.updateUVs(),A.hullLength=P<<1,h&&(A.edges=M,A.width=m*u,A.height=x*u),A);case t.AttachmentType.LinkedMesh:f=r.readStringRef(),b=r.readInt32();var A,L=r.readStringRef(),C=r.readStringRef(),R=r.readBoolean();return m=0,x=0,h&&(m=r.readFloat(),x=r.readFloat()),null==f&&(f=c),null==(A=this.attachmentLoader.newMeshAttachment(o,c,f))?null:(A.path=f,t.Color.rgba8888ToColor(A.color,b),h&&(A.width=m*u,A.height=x*u),this.linkedMeshes.push(new i(A,L,s,C,R)),A);case t.AttachmentType.Path:for(var k=r.readBoolean(),F=r.readBoolean(),I=(E=r.readInt(!0),T=this.readVertices(r,E),t.Utils.newArray(E/3,0)),D=0,j=I.length;D<j;D++)I[D]=r.readFloat()*u;return b=h?r.readInt32():0,null==(f=this.attachmentLoader.newPathAttachment(o,c))?null:(f.closed=k,f.constantSpeed=F,f.worldVerticesLength=E<<1,f.vertices=T.vertices,f.bones=T.bones,f.lengths=I,h&&t.Color.rgba8888ToColor(f.color,b),f);case t.AttachmentType.Point:p=r.readFloat(),d=r.readFloat(),v=r.readFloat(),b=h?r.readInt32():0;var B=this.attachmentLoader.newPointAttachment(o,c);return null==B?null:(B.x=d*u,B.y=v*u,B.rotation=p,h&&t.Color.rgba8888ToColor(B.color,b),B);case t.AttachmentType.Clipping:var N=r.readInt(!0),G=(E=r.readInt(!0),T=this.readVertices(r,E),b=h?r.readInt32():0,this.attachmentLoader.newClippingAttachment(o,c));return null==G?null:(G.endSlot=n.slots[N],G.worldVerticesLength=E<<1,G.vertices=T.vertices,G.bones=T.bones,h&&t.Color.rgba8888ToColor(G.color,b),G)}return null},e.prototype.readVertices=function(e,r){var i=r<<1,o=new n,s=this.scale;if(!e.readBoolean())return o.vertices=this.readFloatArray(e,i,s),o;for(var a=new Array,h=new Array,u=0;u<r;u++){var c=e.readInt(!0);h.push(c);for(var l=0;l<c;l++)h.push(e.readInt(!0)),a.push(e.readFloat()*s),a.push(e.readFloat()*s),a.push(e.readFloat())}return o.vertices=t.Utils.toFloatArray(a),o.bones=h,o},e.prototype.readFloatArray=function(t,e,r){var i=new Array(e);if(1==r)for(var n=0;n<e;n++)i[n]=t.readFloat();else for(n=0;n<e;n++)i[n]=t.readFloat()*r;return i},e.prototype.readShortArray=function(t){for(var e=t.readInt(!0),r=new Array(e),i=0;i<e;i++)r[i]=t.readShort();return r},e.prototype.readAnimation=function(r,i,n){for(var o=new Array,s=this.scale,a=0,h=new t.Color,u=new t.Color,c=0,l=r.readInt(!0);c<l;c++)for(var f=r.readInt(!0),p=0,d=r.readInt(!0);p<d;p++){var v=r.readByte(),y=r.readInt(!0);switch(v){case e.SLOT_ATTACHMENT:(b=new t.AttachmentTimeline(y)).slotIndex=f;for(var g=0;g<y;g++)b.setFrame(g,r.readFloat(),r.readStringRef());o.push(b),a=Math.max(a,b.frames[y-1]);break;case e.SLOT_COLOR:for((b=new t.ColorTimeline(y)).slotIndex=f,g=0;g<y;g++){var m=r.readFloat();t.Color.rgba8888ToColor(h,r.readInt32()),b.setFrame(g,m,h.r,h.g,h.b,h.a),g<y-1&&this.readCurve(r,g,b)}o.push(b),a=Math.max(a,b.frames[(y-1)*t.ColorTimeline.ENTRIES]);break;case e.SLOT_TWO_COLOR:for((b=new t.TwoColorTimeline(y)).slotIndex=f,g=0;g<y;g++)m=r.readFloat(),t.Color.rgba8888ToColor(h,r.readInt32()),t.Color.rgb888ToColor(u,r.readInt32()),b.setFrame(g,m,h.r,h.g,h.b,h.a,u.r,u.g,u.b),g<y-1&&this.readCurve(r,g,b);o.push(b),a=Math.max(a,b.frames[(y-1)*t.TwoColorTimeline.ENTRIES])}}for(c=0,l=r.readInt(!0);c<l;c++){var x=r.readInt(!0);for(p=0,d=r.readInt(!0);p<d;p++)switch(v=r.readByte(),y=r.readInt(!0),v){case e.BONE_ROTATE:for((b=new t.RotateTimeline(y)).boneIndex=x,g=0;g<y;g++)b.setFrame(g,r.readFloat(),r.readFloat()),g<y-1&&this.readCurve(r,g,b);o.push(b),a=Math.max(a,b.frames[(y-1)*t.RotateTimeline.ENTRIES]);break;case e.BONE_TRANSLATE:case e.BONE_SCALE:case e.BONE_SHEAR:var b=void 0,w=1;for(v==e.BONE_SCALE?b=new t.ScaleTimeline(y):v==e.BONE_SHEAR?b=new t.ShearTimeline(y):(b=new t.TranslateTimeline(y),w=s),b.boneIndex=x,g=0;g<y;g++)b.setFrame(g,r.readFloat(),r.readFloat()*w,r.readFloat()*w),g<y-1&&this.readCurve(r,g,b);o.push(b),a=Math.max(a,b.frames[(y-1)*t.TranslateTimeline.ENTRIES])}}for(c=0,l=r.readInt(!0);c<l;c++){var E=r.readInt(!0);for(y=r.readInt(!0),(b=new t.IkConstraintTimeline(y)).ikConstraintIndex=E,g=0;g<y;g++)b.setFrame(g,r.readFloat(),r.readFloat(),r.readFloat()*s,r.readByte(),r.readBoolean(),r.readBoolean()),g<y-1&&this.readCurve(r,g,b);o.push(b),a=Math.max(a,b.frames[(y-1)*t.IkConstraintTimeline.ENTRIES])}for(c=0,l=r.readInt(!0);c<l;c++){for(E=r.readInt(!0),y=r.readInt(!0),(b=new t.TransformConstraintTimeline(y)).transformConstraintIndex=E,g=0;g<y;g++)b.setFrame(g,r.readFloat(),r.readFloat(),r.readFloat(),r.readFloat(),r.readFloat()),g<y-1&&this.readCurve(r,g,b);o.push(b),a=Math.max(a,b.frames[(y-1)*t.TransformConstraintTimeline.ENTRIES])}for(c=0,l=r.readInt(!0);c<l;c++){E=r.readInt(!0);var T=n.pathConstraints[E];for(p=0,d=r.readInt(!0);p<d;p++)switch(v=r.readByte(),y=r.readInt(!0),v){case e.PATH_POSITION:case e.PATH_SPACING:for(b=void 0,w=1,v==e.PATH_SPACING?(b=new t.PathConstraintSpacingTimeline(y),T.spacingMode!=t.SpacingMode.Length&&T.spacingMode!=t.SpacingMode.Fixed||(w=s)):(b=new t.PathConstraintPositionTimeline(y),T.positionMode==t.PositionMode.Fixed&&(w=s)),b.pathConstraintIndex=E,g=0;g<y;g++)b.setFrame(g,r.readFloat(),r.readFloat()*w),g<y-1&&this.readCurve(r,g,b);o.push(b),a=Math.max(a,b.frames[(y-1)*t.PathConstraintPositionTimeline.ENTRIES]);break;case e.PATH_MIX:for((b=new t.PathConstraintMixTimeline(y)).pathConstraintIndex=E,g=0;g<y;g++)b.setFrame(g,r.readFloat(),r.readFloat(),r.readFloat()),g<y-1&&this.readCurve(r,g,b);o.push(b),a=Math.max(a,b.frames[(y-1)*t.PathConstraintMixTimeline.ENTRIES])}}for(c=0,l=r.readInt(!0);c<l;c++){var S=n.skins[r.readInt(!0)];for(p=0,d=r.readInt(!0);p<d;p++){f=r.readInt(!0);for(var _=0,O=r.readInt(!0);_<O;_++){var P=S.getAttachment(f,r.readStringRef()),M=null!=P.bones,A=P.vertices,L=M?A.length/3*2:A.length;for(y=r.readInt(!0),(b=new t.DeformTimeline(y)).slotIndex=f,b.attachment=P,g=0;g<y;g++){m=r.readFloat();var C=void 0,R=r.readInt(!0);if(0==R)C=M?t.Utils.newFloatArray(L):A;else{C=t.Utils.newFloatArray(L);var k=r.readInt(!0);if(R+=k,1==s)for(var F=k;F<R;F++)C[F]=r.readFloat();else for(F=k;F<R;F++)C[F]=r.readFloat()*s;if(!M){F=0;for(var I=C.length;F<I;F++)C[F]+=A[F]}}b.setFrame(g,m,C),g<y-1&&this.readCurve(r,g,b)}o.push(b),a=Math.max(a,b.frames[y-1])}}}var D=r.readInt(!0);if(D>0){b=new t.DrawOrderTimeline(D);var j=n.slots.length;for(c=0;c<D;c++){m=r.readFloat();var B=r.readInt(!0),N=t.Utils.newArray(j,0);for(p=j-1;p>=0;p--)N[p]=-1;var G=t.Utils.newArray(j-B,0),U=0,Y=0;for(p=0;p<B;p++){for(f=r.readInt(!0);U!=f;)G[Y++]=U++;N[U+r.readInt(!0)]=U++}for(;U<j;)G[Y++]=U++;for(p=j-1;p>=0;p--)-1==N[p]&&(N[p]=G[--Y]);b.setFrame(c,m,N)}o.push(b),a=Math.max(a,b.frames[D-1])}var z=r.readInt(!0);if(z>0){for(b=new t.EventTimeline(z),c=0;c<z;c++){m=r.readFloat();var X=n.events[r.readInt(!0)],V=new t.Event(m,X);V.intValue=r.readInt(!1),V.floatValue=r.readFloat(),V.stringValue=r.readBoolean()?r.readString():X.stringValue,null!=V.data.audioPath&&(V.volume=r.readFloat(),V.balance=r.readFloat()),b.setFrame(c,V)}o.push(b),a=Math.max(a,b.frames[z-1])}return new t.Animation(i,o,a)},e.prototype.readCurve=function(t,r,i){switch(t.readByte()){case e.CURVE_STEPPED:i.setStepped(r);break;case e.CURVE_BEZIER:this.setCurve(i,r,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},e.prototype.setCurve=function(t,e,r,i,n,o){t.setCurve(e,r,i,n,o)},e.AttachmentTypeValues=[0,1,2,3,4,5,6],e.TransformModeValues=[t.TransformMode.Normal,t.TransformMode.OnlyTranslation,t.TransformMode.NoRotationOrReflection,t.TransformMode.NoScale,t.TransformMode.NoScaleOrReflection],e.PositionModeValues=[t.PositionMode.Fixed,t.PositionMode.Percent],e.SpacingModeValues=[t.SpacingMode.Length,t.SpacingMode.Fixed,t.SpacingMode.Percent],e.RotateModeValues=[t.RotateMode.Tangent,t.RotateMode.Chain,t.RotateMode.ChainScale],e.BlendModeValues=[t.BlendMode.Normal,t.BlendMode.Additive,t.BlendMode.Multiply,t.BlendMode.Screen],e.BONE_ROTATE=0,e.BONE_TRANSLATE=1,e.BONE_SCALE=2,e.BONE_SHEAR=3,e.SLOT_ATTACHMENT=0,e.SLOT_COLOR=1,e.SLOT_TWO_COLOR=2,e.PATH_POSITION=0,e.PATH_SPACING=1,e.PATH_MIX=2,e.CURVE_LINEAR=0,e.CURVE_STEPPED=1,e.CURVE_BEZIER=2,e}();t.SkeletonBinary=e;var r=function(){function t(t,e,r,i){void 0===e&&(e=new Array),void 0===r&&(r=0),void 0===i&&(i=new DataView(t.buffer)),this.strings=e,this.index=r,this.buffer=i}return t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},t.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},t.prototype.readInt=function(t){var e=this.readByte(),r=127&e;return 128&e&&(r|=(127&(e=this.readByte()))<<7,128&e&&(r|=(127&(e=this.readByte()))<<14,128&e&&(r|=(127&(e=this.readByte()))<<21,128&e&&(r|=(127&(e=this.readByte()))<<28)))),t?r:r>>>1^-(1&r)},t.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},t.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",r=0;r<t;){var i=this.readByte();switch(i>>4){case 12:case 13:e+=String.fromCharCode((31&i)<<6|63&this.readByte()),r+=2;break;case 14:e+=String.fromCharCode((15&i)<<12|(63&this.readByte())<<6|63&this.readByte()),r+=3;break;default:e+=String.fromCharCode(i),r++}}return e},t.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},t.prototype.readBoolean=function(){return 0!=this.readByte()},t}(),i=function(t,e,r,i,n){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=i,this.inheritDeform=n},n=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e}}(i||(i={})),function(t){var e=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool((function(){return t.Utils.newFloatArray(16)}))}return e.prototype.update=function(e,r){if(null==e)throw new Error("skeleton cannot be null.");var i=this.boundingBoxes,n=this.polygons,o=this.polygonPool,s=e.slots,a=s.length;i.length=0,o.freeAll(n),n.length=0;for(var h=0;h<a;h++){var u=s[h];if(u.bone.active){var c=u.getAttachment();if(c instanceof t.BoundingBoxAttachment){var l=c;i.push(l);var f=o.obtain();f.length!=l.worldVerticesLength&&(f=t.Utils.newFloatArray(l.worldVerticesLength)),n.push(f),l.computeWorldVertices(u,0,l.worldVerticesLength,f,0,2)}}}r?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=this.polygons,o=0,s=n.length;o<s;o++)for(var a=n[o],h=a,u=0,c=a.length;u<c;u+=2){var l=h[u],f=h[u+1];t=Math.min(t,l),e=Math.min(e,f),r=Math.max(r,l),i=Math.max(i,f)}this.minX=t,this.minY=e,this.maxX=r,this.maxY=i},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,r,i){var n=this.minX,o=this.minY,s=this.maxX,a=this.maxY;if(t<=n&&r<=n||e<=o&&i<=o||t>=s&&r>=s||e>=a&&i>=a)return!1;var h=(i-e)/(r-t),u=h*(n-t)+e;if(u>o&&u<a)return!0;if((u=h*(s-t)+e)>o&&u<a)return!0;var c=(o-e)/h+t;return c>n&&c<s||(c=(a-e)/h+t)>n&&c<s},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var r=this.polygons,i=0,n=r.length;i<n;i++)if(this.containsPointPolygon(r[i],t,e))return this.boundingBoxes[i];return null},e.prototype.containsPointPolygon=function(t,e,r){for(var i=t,n=t.length,o=n-2,s=!1,a=0;a<n;a+=2){var h=i[a+1],u=i[o+1];if(h<r&&u>=r||u<r&&h>=r){var c=i[a];c+(r-h)/(u-h)*(i[o]-c)<e&&(s=!s)}o=a}return s},e.prototype.intersectsSegment=function(t,e,r,i){for(var n=this.polygons,o=0,s=n.length;o<s;o++)if(this.intersectsSegmentPolygon(n[o],t,e,r,i))return this.boundingBoxes[o];return null},e.prototype.intersectsSegmentPolygon=function(t,e,r,i,n){for(var o=t,s=t.length,a=e-i,h=r-n,u=e*n-r*i,c=o[s-2],l=o[s-1],f=0;f<s;f+=2){var p=o[f],d=o[f+1],v=c*d-l*p,y=c-p,g=l-d,m=a*g-h*y,x=(u*y-a*v)/m;if((x>=c&&x<=p||x>=p&&x<=c)&&(x>=e&&x<=i||x>=i&&x<=e)){var b=(u*g-h*v)/m;if((b>=l&&b<=d||b>=d&&b<=l)&&(b>=r&&b<=n||b>=n&&b<=r))return!0}c=p,l=d}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}();t.SkeletonBounds=e}(i||(i={})),function(t){var e=function(){function e(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return e.prototype.clipStart=function(r,i){if(null!=this.clipAttachment)return 0;this.clipAttachment=i;var n=i.worldVerticesLength,o=t.Utils.setArraySize(this.clippingPolygon,n);i.computeWorldVertices(r,0,n,o,0,2);var s=this.clippingPolygon;e.makeClockwise(s);for(var a=this.clippingPolygons=this.triangulator.decompose(s,this.triangulator.triangulate(s)),h=0,u=a.length;h<u;h++){var c=a[h];e.makeClockwise(c),c.push(c[0]),c.push(c[1])}return a.length},e.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},e.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},e.prototype.isClipping=function(){return null!=this.clipAttachment},e.prototype.clipTriangles=function(e,r,i,n,o,s,a,h){var u=this.clipOutput,c=this.clippedVertices,l=this.clippedTriangles,f=this.clippingPolygons,p=this.clippingPolygons.length,d=h?12:8,v=0;c.length=0,l.length=0;t:for(var y=0;y<n;y+=3)for(var g=i[y]<<1,m=e[g],x=e[g+1],b=o[g],w=o[g+1],E=e[g=i[y+1]<<1],T=e[g+1],S=o[g],_=o[g+1],O=e[g=i[y+2]<<1],P=e[g+1],M=o[g],A=o[g+1],L=0;L<p;L++){var C=c.length;if(!this.clip(m,x,E,T,O,P,f[L],u)){(G=t.Utils.setArraySize(c,C+3*d))[C]=m,G[C+1]=x,G[C+2]=s.r,G[C+3]=s.g,G[C+4]=s.b,G[C+5]=s.a,h?(G[C+6]=b,G[C+7]=w,G[C+8]=a.r,G[C+9]=a.g,G[C+10]=a.b,G[C+11]=a.a,G[C+12]=E,G[C+13]=T,G[C+14]=s.r,G[C+15]=s.g,G[C+16]=s.b,G[C+17]=s.a,G[C+18]=S,G[C+19]=_,G[C+20]=a.r,G[C+21]=a.g,G[C+22]=a.b,G[C+23]=a.a,G[C+24]=O,G[C+25]=P,G[C+26]=s.r,G[C+27]=s.g,G[C+28]=s.b,G[C+29]=s.a,G[C+30]=M,G[C+31]=A,G[C+32]=a.r,G[C+33]=a.g,G[C+34]=a.b,G[C+35]=a.a):(G[C+6]=b,G[C+7]=w,G[C+8]=E,G[C+9]=T,G[C+10]=s.r,G[C+11]=s.g,G[C+12]=s.b,G[C+13]=s.a,G[C+14]=S,G[C+15]=_,G[C+16]=O,G[C+17]=P,G[C+18]=s.r,G[C+19]=s.g,G[C+20]=s.b,G[C+21]=s.a,G[C+22]=M,G[C+23]=A),C=l.length,(K=t.Utils.setArraySize(l,C+3))[C]=v,K[C+1]=v+1,K[C+2]=v+2,v+=3;continue t}var R=u.length;if(0!=R){for(var k=T-P,F=O-E,I=m-O,D=P-x,j=1/(k*I+F*(x-P)),B=R>>1,N=this.clipOutput,G=t.Utils.setArraySize(c,C+B*d),U=0;U<R;U+=2){var Y=N[U],z=N[U+1];G[C]=Y,G[C+1]=z,G[C+2]=s.r,G[C+3]=s.g,G[C+4]=s.b,G[C+5]=s.a;var X=Y-O,V=z-P,W=(k*X+F*V)*j,H=(D*X+I*V)*j,q=1-W-H;G[C+6]=b*W+S*H+M*q,G[C+7]=w*W+_*H+A*q,h&&(G[C+8]=a.r,G[C+9]=a.g,G[C+10]=a.b,G[C+11]=a.a),C+=d}C=l.length;var K=t.Utils.setArraySize(l,C+3*(B-2));for(B--,U=1;U<B;U++)K[C]=v,K[C+1]=v+U,K[C+2]=v+U+1,C+=3;v+=B+1}}},e.prototype.clip=function(t,e,r,i,n,o,s,a){var h=a,u=!1,c=null;s.length%4>=2?(c=a,a=this.scratch):c=this.scratch,c.length=0,c.push(t),c.push(e),c.push(r),c.push(i),c.push(n),c.push(o),c.push(t),c.push(e),a.length=0;for(var l=s,f=s.length-4,p=0;;p+=2){for(var d=l[p],v=l[p+1],y=l[p+2],g=l[p+3],m=d-y,x=v-g,b=c,w=c.length-2,E=a.length,T=0;T<w;T+=2){var S=b[T],_=b[T+1],O=b[T+2],P=b[T+3],M=m*(P-g)-x*(O-y)>0;if(m*(_-g)-x*(S-y)>0){if(M){a.push(O),a.push(P);continue}var A=(C=P-_)*(y-d)-(R=O-S)*(g-v);if(Math.abs(A)>1e-6){var L=(R*(v-_)-C*(d-S))/A;a.push(d+(y-d)*L),a.push(v+(g-v)*L)}else a.push(d),a.push(v)}else if(M){var C,R;A=(C=P-_)*(y-d)-(R=O-S)*(g-v),Math.abs(A)>1e-6?(L=(R*(v-_)-C*(d-S))/A,a.push(d+(y-d)*L),a.push(v+(g-v)*L)):(a.push(d),a.push(v)),a.push(O),a.push(P)}u=!0}if(E==a.length)return h.length=0,!0;if(a.push(a[0]),a.push(a[1]),p==f)break;var k=a;(a=c).length=0,c=k}if(h!=a){h.length=0,p=0;for(var F=a.length-2;p<F;p++)h[p]=a[p]}else h.length=h.length-2;return u},e.makeClockwise=function(t){for(var e=t,r=t.length,i=e[r-2]*e[1]-e[0]*e[r-1],n=0,o=0,s=0,a=0,h=r-3;a<h;a+=2)n=e[a],o=e[a+1],s=e[a+2],i+=n*e[a+3]-s*o;if(!(i<0)){a=0;var u=r-2;for(h=r>>1;a<h;a+=2){var c=e[a],l=e[a+1],f=u-a;e[a]=e[f],e[a+1]=e[f+1],e[f]=c,e[f+1]=l}}},e}();t.SkeletonClipping=e}(i||(i={})),function(t){var e=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,i=e.length;r<i;r++){var n=e[r];if(n.name==t)return n}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,i=e.length;r<i;r++)if(e[r].name==t)return r;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,i=e.length;r<i;r++){var n=e[r];if(n.name==t)return n}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,i=e.length;r<i;r++)if(e[r].name==t)return r;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,r=0,i=e.length;r<i;r++){var n=e[r];if(n.name==t)return n}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,r=0,i=e.length;r<i;r++){var n=e[r];if(n.name==t)return n}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,r=0,i=e.length;r<i;r++){var n=e[r];if(n.name==t)return n}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,i=e.length;r<i;r++){var n=e[r];if(n.name==t)return n}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,i=e.length;r<i;r++){var n=e[r];if(n.name==t)return n}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,i=e.length;r<i;r++){var n=e[r];if(n.name==t)return n}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,r=0,i=e.length;r<i;r++)if(e[r].name==t)return r;return-1},t}();t.SkeletonData=e}(i||(i={})),function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(r){var i=this.scale,n=new t.SkeletonData,o="string"==typeof r?JSON.parse(r):r,s=o.skeleton;if(null!=s){if(n.hash=s.hash,n.version=s.spine,"3.8.75"==n.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");n.x=s.x,n.y=s.y,n.width=s.width,n.height=s.height,n.fps=s.fps,n.imagesPath=s.images}if(o.bones)for(var a=0;a<o.bones.length;a++){var h=o.bones[a],u=null,c=this.getValue(h,"parent",null);if(null!=c&&null==(u=n.findBone(c)))throw new Error("Parent bone not found: "+c);(d=new t.BoneData(n.bones.length,h.name,u)).length=this.getValue(h,"length",0)*i,d.x=this.getValue(h,"x",0)*i,d.y=this.getValue(h,"y",0)*i,d.rotation=this.getValue(h,"rotation",0),d.scaleX=this.getValue(h,"scaleX",1),d.scaleY=this.getValue(h,"scaleY",1),d.shearX=this.getValue(h,"shearX",0),d.shearY=this.getValue(h,"shearY",0),d.transformMode=e.transformModeFromString(this.getValue(h,"transform","normal")),d.skinRequired=this.getValue(h,"skin",!1),n.bones.push(d)}if(o.slots)for(a=0;a<o.slots.length;a++){var l=(O=o.slots[a]).name,f=O.bone,p=n.findBone(f);if(null==p)throw new Error("Slot bone not found: "+f);var d=new t.SlotData(n.slots.length,l,p),v=this.getValue(O,"color",null);null!=v&&d.color.setFromString(v);var y=this.getValue(O,"dark",null);null!=y&&(d.darkColor=new t.Color(1,1,1,1),d.darkColor.setFromString(y)),d.attachmentName=this.getValue(O,"attachment",null),d.blendMode=e.blendModeFromString(this.getValue(O,"blend","normal")),n.slots.push(d)}if(o.ik)for(a=0;a<o.ik.length;a++){var g=o.ik[a];(d=new t.IkConstraintData(g.name)).order=this.getValue(g,"order",0),d.skinRequired=this.getValue(g,"skin",!1);for(var m=0;m<g.bones.length;m++){if(f=g.bones[m],null==(T=n.findBone(f)))throw new Error("IK bone not found: "+f);d.bones.push(T)}var x=g.target;if(d.target=n.findBone(x),null==d.target)throw new Error("IK target bone not found: "+x);d.mix=this.getValue(g,"mix",1),d.softness=this.getValue(g,"softness",0)*i,d.bendDirection=this.getValue(g,"bendPositive",!0)?1:-1,d.compress=this.getValue(g,"compress",!1),d.stretch=this.getValue(g,"stretch",!1),d.uniform=this.getValue(g,"uniform",!1),n.ikConstraints.push(d)}if(o.transform)for(a=0;a<o.transform.length;a++){for(g=o.transform[a],(d=new t.TransformConstraintData(g.name)).order=this.getValue(g,"order",0),d.skinRequired=this.getValue(g,"skin",!1),m=0;m<g.bones.length;m++){if(f=g.bones[m],null==(T=n.findBone(f)))throw new Error("Transform constraint bone not found: "+f);d.bones.push(T)}if(x=g.target,d.target=n.findBone(x),null==d.target)throw new Error("Transform constraint target bone not found: "+x);d.local=this.getValue(g,"local",!1),d.relative=this.getValue(g,"relative",!1),d.offsetRotation=this.getValue(g,"rotation",0),d.offsetX=this.getValue(g,"x",0)*i,d.offsetY=this.getValue(g,"y",0)*i,d.offsetScaleX=this.getValue(g,"scaleX",0),d.offsetScaleY=this.getValue(g,"scaleY",0),d.offsetShearY=this.getValue(g,"shearY",0),d.rotateMix=this.getValue(g,"rotateMix",1),d.translateMix=this.getValue(g,"translateMix",1),d.scaleMix=this.getValue(g,"scaleMix",1),d.shearMix=this.getValue(g,"shearMix",1),n.transformConstraints.push(d)}if(o.path)for(a=0;a<o.path.length;a++){for(g=o.path[a],(d=new t.PathConstraintData(g.name)).order=this.getValue(g,"order",0),d.skinRequired=this.getValue(g,"skin",!1),m=0;m<g.bones.length;m++){if(f=g.bones[m],null==(T=n.findBone(f)))throw new Error("Transform constraint bone not found: "+f);d.bones.push(T)}if(x=g.target,d.target=n.findSlot(x),null==d.target)throw new Error("Path target slot not found: "+x);d.positionMode=e.positionModeFromString(this.getValue(g,"positionMode","percent")),d.spacingMode=e.spacingModeFromString(this.getValue(g,"spacingMode","length")),d.rotateMode=e.rotateModeFromString(this.getValue(g,"rotateMode","tangent")),d.offsetRotation=this.getValue(g,"rotation",0),d.position=this.getValue(g,"position",0),d.positionMode==t.PositionMode.Fixed&&(d.position*=i),d.spacing=this.getValue(g,"spacing",0),d.spacingMode!=t.SpacingMode.Length&&d.spacingMode!=t.SpacingMode.Fixed||(d.spacing*=i),d.rotateMix=this.getValue(g,"rotateMix",1),d.translateMix=this.getValue(g,"translateMix",1),n.pathConstraints.push(d)}if(o.skins)for(a=0;a<o.skins.length;a++){var b=o.skins[a],w=new t.Skin(b.name);if(b.bones)for(var E=0;E<b.bones.length;E++){var T;if(null==(T=n.findBone(b.bones[E])))throw new Error("Skin bone not found: "+b.bones[a]);w.bones.push(T)}if(b.ik)for(E=0;E<b.ik.length;E++){if(null==(S=n.findIkConstraint(b.ik[E])))throw new Error("Skin IK constraint not found: "+b.ik[a]);w.constraints.push(S)}if(b.transform)for(E=0;E<b.transform.length;E++){if(null==(S=n.findTransformConstraint(b.transform[E])))throw new Error("Skin transform constraint not found: "+b.transform[a]);w.constraints.push(S)}if(b.path)for(E=0;E<b.path.length;E++){var S;if(null==(S=n.findPathConstraint(b.path[E])))throw new Error("Skin path constraint not found: "+b.path[a]);w.constraints.push(S)}for(var l in b.attachments){var _=n.findSlot(l);if(null==_)throw new Error("Slot not found: "+l);var O=b.attachments[l];for(var P in O){var M=this.readAttachment(O[P],w,_.index,P,n);null!=M&&w.setAttachment(_.index,P,M)}}n.skins.push(w),"default"==w.name&&(n.defaultSkin=w)}a=0;for(var A=this.linkedMeshes.length;a<A;a++){var L=this.linkedMeshes[a];if(null==(w=null==L.skin?n.defaultSkin:n.findSkin(L.skin)))throw new Error("Skin not found: "+L.skin);var C=w.getAttachment(L.slotIndex,L.parent);if(null==C)throw new Error("Parent mesh not found: "+L.parent);L.mesh.deformAttachment=L.inheritDeform?C:L.mesh,L.mesh.setParentMesh(C),L.mesh.updateUVs()}if(this.linkedMeshes.length=0,o.events)for(var R in o.events){var k=o.events[R];(d=new t.EventData(R)).intValue=this.getValue(k,"int",0),d.floatValue=this.getValue(k,"float",0),d.stringValue=this.getValue(k,"string",""),d.audioPath=this.getValue(k,"audio",null),null!=d.audioPath&&(d.volume=this.getValue(k,"volume",1),d.balance=this.getValue(k,"balance",0)),n.events.push(d)}if(o.animations)for(var F in o.animations){var I=o.animations[F];this.readAnimation(I,F,n)}return n},e.prototype.readAttachment=function(e,i,n,o,s){var a=this.scale;switch(o=this.getValue(e,"name",o),this.getValue(e,"type","region")){case"region":var h=this.getValue(e,"path",o),u=this.attachmentLoader.newRegionAttachment(i,o,h);return null==u?null:(u.path=h,u.x=this.getValue(e,"x",0)*a,u.y=this.getValue(e,"y",0)*a,u.scaleX=this.getValue(e,"scaleX",1),u.scaleY=this.getValue(e,"scaleY",1),u.rotation=this.getValue(e,"rotation",0),u.width=e.width*a,u.height=e.height*a,null!=(x=this.getValue(e,"color",null))&&u.color.setFromString(x),u.updateOffset(),u);case"boundingbox":var c=this.attachmentLoader.newBoundingBoxAttachment(i,o);return null==c?null:(this.readVertices(e,c,e.vertexCount<<1),null!=(x=this.getValue(e,"color",null))&&c.color.setFromString(x),c);case"mesh":case"linkedmesh":h=this.getValue(e,"path",o);var l=this.attachmentLoader.newMeshAttachment(i,o,h);if(null==l)return null;l.path=h,null!=(x=this.getValue(e,"color",null))&&l.color.setFromString(x),l.width=this.getValue(e,"width",0)*a,l.height=this.getValue(e,"height",0)*a;var f=this.getValue(e,"parent",null);if(null!=f)return this.linkedMeshes.push(new r(l,this.getValue(e,"skin",null),n,f,this.getValue(e,"deform",!0))),l;var p=e.uvs;return this.readVertices(e,l,p.length),l.triangles=e.triangles,l.regionUVs=p,l.updateUVs(),l.edges=this.getValue(e,"edges",null),l.hullLength=2*this.getValue(e,"hull",0),l;case"path":if(null==(h=this.attachmentLoader.newPathAttachment(i,o)))return null;h.closed=this.getValue(e,"closed",!1),h.constantSpeed=this.getValue(e,"constantSpeed",!0);var d=e.vertexCount;this.readVertices(e,h,d<<1);for(var v=t.Utils.newArray(d/3,0),y=0;y<e.lengths.length;y++)v[y]=e.lengths[y]*a;return h.lengths=v,null!=(x=this.getValue(e,"color",null))&&h.color.setFromString(x),h;case"point":var g=this.attachmentLoader.newPointAttachment(i,o);return null==g?null:(g.x=this.getValue(e,"x",0)*a,g.y=this.getValue(e,"y",0)*a,g.rotation=this.getValue(e,"rotation",0),null!=(x=this.getValue(e,"color",null))&&g.color.setFromString(x),g);case"clipping":var m=this.attachmentLoader.newClippingAttachment(i,o);if(null==m)return null;var x,b=this.getValue(e,"end",null);if(null!=b){var w=s.findSlot(b);if(null==w)throw new Error("Clipping end slot not found: "+b);m.endSlot=w}return d=e.vertexCount,this.readVertices(e,m,d<<1),null!=(x=this.getValue(e,"color",null))&&m.color.setFromString(x),m}return null},e.prototype.readVertices=function(e,r,i){var n=this.scale;r.worldVerticesLength=i;var o=e.vertices;if(i!=o.length){var s=new Array,a=new Array;for(l=0,f=o.length;l<f;){var h=o[l++];a.push(h);for(var u=l+4*h;l<u;l+=4)a.push(o[l]),s.push(o[l+1]*n),s.push(o[l+2]*n),s.push(o[l+3])}r.bones=a,r.vertices=t.Utils.toFloatArray(s)}else{var c=t.Utils.toFloatArray(o);if(1!=n)for(var l=0,f=o.length;l<f;l++)c[l]*=n;r.vertices=c}},e.prototype.readAnimation=function(e,r,i){var n=this.scale,o=new Array,s=0;if(e.slots)for(var a in e.slots){var h=e.slots[a];if(-1==(Z=i.findSlotIndex(a)))throw new Error("Slot not found: "+a);for(var u in h){var c=h[u];if("attachment"==u){(b=new t.AttachmentTimeline(c.length)).slotIndex=Z;for(var l=0,f=0;f<c.length;f++){var p=c[f];b.setFrame(l++,this.getValue(p,"time",0),p.name)}o.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}else if("color"==u){for((b=new t.ColorTimeline(c.length)).slotIndex=Z,l=0,f=0;f<c.length;f++){p=c[f];var d=new t.Color;d.setFromString(p.color),b.setFrame(l,this.getValue(p,"time",0),d.r,d.g,d.b,d.a),this.readCurve(p,b,l),l++}o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=u)throw new Error("Invalid timeline type for a slot: "+u+" ("+a+")");for((b=new t.TwoColorTimeline(c.length)).slotIndex=Z,l=0,f=0;f<c.length;f++){p=c[f];var v=new t.Color,y=new t.Color;v.setFromString(p.light),y.setFromString(p.dark),b.setFrame(l,this.getValue(p,"time",0),v.r,v.g,v.b,v.a,y.r,y.g,y.b),this.readCurve(p,b,l),l++}o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(e.bones)for(var g in e.bones){var m=e.bones[g],x=i.findBoneIndex(g);if(-1==x)throw new Error("Bone not found: "+g);for(var u in m)if(c=m[u],"rotate"===u){for((b=new t.RotateTimeline(c.length)).boneIndex=x,l=0,f=0;f<c.length;f++)p=c[f],b.setFrame(l,this.getValue(p,"time",0),this.getValue(p,"angle",0)),this.readCurve(p,b,l),l++;o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==u&&"scale"!==u&&"shear"!==u)throw new Error("Invalid timeline type for a bone: "+u+" ("+g+")");var b=null,w=1,E=0;for("scale"===u?(b=new t.ScaleTimeline(c.length),E=1):"shear"===u?b=new t.ShearTimeline(c.length):(b=new t.TranslateTimeline(c.length),w=n),b.boneIndex=x,l=0,f=0;f<c.length;f++){p=c[f];var T=this.getValue(p,"x",E),S=this.getValue(p,"y",E);b.setFrame(l,this.getValue(p,"time",0),T*w,S*w),this.readCurve(p,b,l),l++}o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}if(e.ik)for(var _ in e.ik){var O=e.ik[_],P=i.findIkConstraint(_);for((b=new t.IkConstraintTimeline(O.length)).ikConstraintIndex=i.ikConstraints.indexOf(P),l=0,f=0;f<O.length;f++)p=O[f],b.setFrame(l,this.getValue(p,"time",0),this.getValue(p,"mix",1),this.getValue(p,"softness",0)*n,this.getValue(p,"bendPositive",!0)?1:-1,this.getValue(p,"compress",!1),this.getValue(p,"stretch",!1)),this.readCurve(p,b,l),l++;o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(e.transform)for(var _ in e.transform){for(O=e.transform[_],P=i.findTransformConstraint(_),(b=new t.TransformConstraintTimeline(O.length)).transformConstraintIndex=i.transformConstraints.indexOf(P),l=0,f=0;f<O.length;f++)p=O[f],b.setFrame(l,this.getValue(p,"time",0),this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1),this.getValue(p,"scaleMix",1),this.getValue(p,"shearMix",1)),this.readCurve(p,b,l),l++;o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(e.path)for(var _ in e.path){O=e.path[_];var M=i.findPathConstraintIndex(_);if(-1==M)throw new Error("Path constraint not found: "+_);var A=i.pathConstraints[M];for(var u in O)if(c=O[u],"position"===u||"spacing"===u){for(b=null,w=1,"spacing"===u?(b=new t.PathConstraintSpacingTimeline(c.length),A.spacingMode!=t.SpacingMode.Length&&A.spacingMode!=t.SpacingMode.Fixed||(w=n)):(b=new t.PathConstraintPositionTimeline(c.length),A.positionMode==t.PositionMode.Fixed&&(w=n)),b.pathConstraintIndex=M,l=0,f=0;f<c.length;f++)p=c[f],b.setFrame(l,this.getValue(p,"time",0),this.getValue(p,u,0)*w),this.readCurve(p,b,l),l++;o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===u){for((b=new t.PathConstraintMixTimeline(c.length)).pathConstraintIndex=M,l=0,f=0;f<c.length;f++)p=c[f],b.setFrame(l,this.getValue(p,"time",0),this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1)),this.readCurve(p,b,l),l++;o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}if(e.deform)for(var L in e.deform){var C=e.deform[L],R=i.findSkin(L);if(null==R)throw new Error("Skin not found: "+L);for(var a in C){if(h=C[a],-1==(Z=i.findSlotIndex(a)))throw new Error("Slot not found: "+h.name);for(var u in h){c=h[u];var k=R.getAttachment(Z,u);if(null==k)throw new Error("Deform attachment not found: "+c.name);var F=null!=k.bones,I=k.vertices,D=F?I.length/3*2:I.length;(b=new t.DeformTimeline(c.length)).slotIndex=Z,b.attachment=k,l=0;for(var j=0;j<c.length;j++){p=c[j];var B=void 0,N=this.getValue(p,"vertices",null);if(null==N)B=F?t.Utils.newFloatArray(D):I;else{B=t.Utils.newFloatArray(D);var G=this.getValue(p,"offset",0);if(t.Utils.arrayCopy(N,0,B,G,N.length),1!=n)for(var U=(f=G)+N.length;f<U;f++)B[f]*=n;if(!F)for(f=0;f<D;f++)B[f]+=I[f]}b.setFrame(l,this.getValue(p,"time",0),B),this.readCurve(p,b,l),l++}o.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}}}var Y=e.drawOrder;if(null==Y&&(Y=e.draworder),null!=Y){b=new t.DrawOrderTimeline(Y.length);var z=i.slots.length;for(l=0,j=0;j<Y.length;j++){var X=Y[j],V=null,W=this.getValue(X,"offsets",null);if(null!=W){V=t.Utils.newArray(z,-1);var H=t.Utils.newArray(z-W.length,0),q=0,K=0;for(f=0;f<W.length;f++){var Z,J=W[f];if(-1==(Z=i.findSlotIndex(J.slot)))throw new Error("Slot not found: "+J.slot);for(;q!=Z;)H[K++]=q++;V[q+J.offset]=q++}for(;q<z;)H[K++]=q++;for(f=z-1;f>=0;f--)-1==V[f]&&(V[f]=H[--K])}b.setFrame(l++,this.getValue(X,"time",0),V)}o.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}if(e.events){for(b=new t.EventTimeline(e.events.length),l=0,f=0;f<e.events.length;f++){var Q=e.events[f],$=i.findEvent(Q.name);if(null==$)throw new Error("Event not found: "+Q.name);var tt=new t.Event(t.Utils.toSinglePrecision(this.getValue(Q,"time",0)),$);tt.intValue=this.getValue(Q,"int",$.intValue),tt.floatValue=this.getValue(Q,"float",$.floatValue),tt.stringValue=this.getValue(Q,"string",$.stringValue),null!=tt.data.audioPath&&(tt.volume=this.getValue(Q,"volume",1),tt.balance=this.getValue(Q,"balance",0)),b.setFrame(l++,tt)}o.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");i.animations.push(new t.Animation(r,o,s))},e.prototype.readCurve=function(t,e,r){if(t.hasOwnProperty("curve"))if("stepped"==t.curve)e.setStepped(r);else{var i=t.curve;e.setCurve(r,i,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},e.prototype.getValue=function(t,e,r){return void 0!==t[e]?t[e]:r},e.blendModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.BlendMode.Normal;if("additive"==e)return t.BlendMode.Additive;if("multiply"==e)return t.BlendMode.Multiply;if("screen"==e)return t.BlendMode.Screen;throw new Error("Unknown blend mode: ".concat(e))},e.positionModeFromString=function(e){if("fixed"==(e=e.toLowerCase()))return t.PositionMode.Fixed;if("percent"==e)return t.PositionMode.Percent;throw new Error("Unknown position mode: ".concat(e))},e.spacingModeFromString=function(e){if("length"==(e=e.toLowerCase()))return t.SpacingMode.Length;if("fixed"==e)return t.SpacingMode.Fixed;if("percent"==e)return t.SpacingMode.Percent;throw new Error("Unknown position mode: ".concat(e))},e.rotateModeFromString=function(e){if("tangent"==(e=e.toLowerCase()))return t.RotateMode.Tangent;if("chain"==e)return t.RotateMode.Chain;if("chainscale"==e)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: ".concat(e))},e.transformModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==e)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return t.TransformMode.NoRotationOrReflection;if("noscale"==e)return t.TransformMode.NoScale;if("noscaleorreflection"==e)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: ".concat(e))},e}();t.SkeletonJson=e;var r=function(t,e,r,i,n){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=i,this.inheritDeform=n}}(i||(i={})),function(t){var e=function(t,e,r){this.slotIndex=t,this.name=e,this.attachment=r};t.SkinEntry=e;var r=function(){function r(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return r.prototype.setAttachment=function(t,e,r){if(null==r)throw new Error("attachment cannot be null.");var i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][e]=r},r.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var r=t.bones[e],i=!1,n=0;n<this.bones.length;n++)if(this.bones[n]==r){i=!0;break}i||this.bones.push(r)}for(e=0;e<t.constraints.length;e++){var o=t.constraints[e];for(i=!1,n=0;n<this.constraints.length;n++)if(this.constraints[n]==o){i=!0;break}i||this.constraints.push(o)}var s=t.getAttachments();for(e=0;e<s.length;e++){var a=s[e];this.setAttachment(a.slotIndex,a.name,a.attachment)}},r.prototype.copySkin=function(e){for(var r=0;r<e.bones.length;r++){for(var i=e.bones[r],n=!1,o=0;o<this.bones.length;o++)if(this.bones[o]==i){n=!0;break}n||this.bones.push(i)}for(r=0;r<e.constraints.length;r++){var s=e.constraints[r];for(n=!1,o=0;o<this.constraints.length;o++)if(this.constraints[o]==s){n=!0;break}n||this.constraints.push(s)}var a=e.getAttachments();for(r=0;r<a.length;r++){var h=a[r];null!=h.attachment&&(h.attachment instanceof t.MeshAttachment?(h.attachment=h.attachment.newLinkedMesh(),this.setAttachment(h.slotIndex,h.name,h.attachment)):(h.attachment=h.attachment.copy(),this.setAttachment(h.slotIndex,h.name,h.attachment)))}},r.prototype.getAttachment=function(t,e){var r=this.attachments[t];return r?r[e]:null},r.prototype.removeAttachment=function(t,e){var r=this.attachments[t];r&&(r[e]=null)},r.prototype.getAttachments=function(){for(var t=new Array,r=0;r<this.attachments.length;r++){var i=this.attachments[r];if(i)for(var n in i){var o=i[n];o&&t.push(new e(r,n,o))}}return t},r.prototype.getAttachmentsForSlot=function(t,r){var i=this.attachments[t];if(i)for(var n in i){var o=i[n];o&&r.push(new e(t,n,o))}},r.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},r.prototype.attachAll=function(t,e){for(var r=0,i=0;i<t.slots.length;i++){var n=t.slots[i],o=n.getAttachment();if(o&&r<e.attachments.length){var s=e.attachments[r];for(var a in s)if(o==s[a]){var h=this.getAttachment(r,a);null!=h&&n.setAttachment(h);break}}r++}},r}();t.Skin=r}(i||(i={})),function(t){var e=function(){function e(e,r){if(this.deform=new Array,null==e)throw new Error("data cannot be null.");if(null==r)throw new Error("bone cannot be null.");this.data=e,this.bone=r,this.color=new t.Color,this.darkColor=null==e.darkColor?null:new t.Color,this.setToSetupPose()}return e.prototype.getSkeleton=function(){return this.bone.skeleton},e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}();t.Slot=e}(i||(i={})),function(t){t.SlotData=function(e,r,i){if(this.color=new t.Color(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(null==r)throw new Error("name cannot be null.");if(null==i)throw new Error("boneData cannot be null.");this.index=e,this.name=r,this.boneData=i}}(i||(i={})),function(t){var e,r,i=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return e.Nearest;case"linear":return e.Linear;case"mipmap":return e.MipMap;case"mipmapnearestnearest":return e.MipMapNearestNearest;case"mipmaplinearnearest":return e.MipMapLinearNearest;case"mipmapnearestlinear":return e.MipMapNearestLinear;case"mipmaplinearlinear":return e.MipMapLinearLinear;default:throw new Error("Unknown texture filter ".concat(t))}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return r.MirroredRepeat;case"clamptoedge":return r.ClampToEdge;case"repeat":return r.Repeat;default:throw new Error("Unknown texture wrap ".concat(t))}},t}();t.Texture=i,function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(e=t.TextureFilter||(t.TextureFilter={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(r=t.TextureWrap||(t.TextureWrap={}));t.TextureRegion=function(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0};var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.setFilters=function(t,e){},e.prototype.setWraps=function(t,e){},e.prototype.dispose=function(){},e}(i);t.FakeTexture=o}(i||(i={})),function(t){var e=function(){function e(t,e){this.pages=new Array,this.regions=new Array,this.load(t,e)}return e.prototype.load=function(e,n){if(null==n)throw new Error("textureLoader cannot be null.");for(var s=new r(e),a=new Array(4),h=null;;){var u=s.readLine();if(null==u)break;if(0==(u=u.trim()).length)h=null;else if(h){var c=new o;c.name=u,c.page=h;var l=s.readValue();"true"==l.toLocaleLowerCase()?c.degrees=90:"false"==l.toLocaleLowerCase()?c.degrees=0:c.degrees=parseFloat(l),c.rotate=90==c.degrees,s.readTuple(a);var f=parseInt(a[0]),p=parseInt(a[1]);s.readTuple(a);var d=parseInt(a[0]),v=parseInt(a[1]);c.u=f/h.width,c.v=p/h.height,c.rotate?(c.u2=(f+v)/h.width,c.v2=(p+d)/h.height):(c.u2=(f+d)/h.width,c.v2=(p+v)/h.height),c.x=f,c.y=p,c.width=Math.abs(d),c.height=Math.abs(v),4==s.readTuple(a)&&4==s.readTuple(a)&&s.readTuple(a),c.originalWidth=parseInt(a[0]),c.originalHeight=parseInt(a[1]),s.readTuple(a),c.offsetX=parseInt(a[0]),c.offsetY=parseInt(a[1]),c.index=parseInt(s.readValue()),c.texture=h.texture,this.regions.push(c)}else{(h=new i).name=u,2==s.readTuple(a)&&(h.width=parseInt(a[0]),h.height=parseInt(a[1]),s.readTuple(a)),s.readTuple(a),h.minFilter=t.Texture.filterFromString(a[0]),h.magFilter=t.Texture.filterFromString(a[1]);var y=s.readValue();h.uWrap=t.TextureWrap.ClampToEdge,h.vWrap=t.TextureWrap.ClampToEdge,"x"==y?h.uWrap=t.TextureWrap.Repeat:"y"==y?h.vWrap=t.TextureWrap.Repeat:"xy"==y&&(h.uWrap=h.vWrap=t.TextureWrap.Repeat),h.texture=n(u),h.texture.setFilters(h.minFilter,h.magFilter),h.texture.setWraps(h.uWrap,h.vWrap),h.width=h.texture.getImage().width,h.height=h.texture.getImage().height,this.pages.push(h)}}},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},e}();t.TextureAtlas=e;var r=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),r=e.indexOf(":");if(-1==r)throw new Error("Invalid line: "+e);for(var i=0,n=r+1;i<3;i++){var o=e.indexOf(",",n);if(-1==o)break;t[i]=e.substr(n,o-n).trim(),n=o+1}return t[i]=e.substring(n).trim(),i+1},t}(),i=function(){};t.TextureAtlasPage=i;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(t.TextureRegion);t.TextureAtlasRegion=o}(i||(i={})),function(t){var e=function(){function e(e,r){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==r)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var i=0;i<e.bones.length;i++)this.bones.push(r.findBone(e.bones[i].name));this.target=r.findBone(e.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,r=this.translateMix,i=this.scaleMix,n=this.shearMix,o=this.target,s=o.a,a=o.b,h=o.c,u=o.d,c=s*u-a*h>0?t.MathUtils.degRad:-t.MathUtils.degRad,l=this.data.offsetRotation*c,f=this.data.offsetShearY*c,p=this.bones,d=0,v=p.length;d<v;d++){var y=p[d],g=!1;if(0!=e){var m=y.a,x=y.b,b=y.c,w=y.d;(P=Math.atan2(h,s)-Math.atan2(b,m)+l)>t.MathUtils.PI?P-=t.MathUtils.PI2:P<-t.MathUtils.PI&&(P+=t.MathUtils.PI2),P*=e;var E=Math.cos(P),T=Math.sin(P);y.a=E*m-T*b,y.b=E*x-T*w,y.c=T*m+E*b,y.d=T*x+E*w,g=!0}if(0!=r){var S=this.temp;o.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),y.worldX+=(S.x-y.worldX)*r,y.worldY+=(S.y-y.worldY)*r,g=!0}if(i>0){var _=Math.sqrt(y.a*y.a+y.c*y.c),O=Math.sqrt(s*s+h*h);_>1e-5&&(_=(_+(O-_+this.data.offsetScaleX)*i)/_),y.a*=_,y.c*=_,_=Math.sqrt(y.b*y.b+y.d*y.d),O=Math.sqrt(a*a+u*u),_>1e-5&&(_=(_+(O-_+this.data.offsetScaleY)*i)/_),y.b*=_,y.d*=_,g=!0}if(n>0){x=y.b,w=y.d;var P,M=Math.atan2(w,x);(P=Math.atan2(u,a)-Math.atan2(h,s)-(M-Math.atan2(y.c,y.a)))>t.MathUtils.PI?P-=t.MathUtils.PI2:P<-t.MathUtils.PI&&(P+=t.MathUtils.PI2),P=M+(P+f)*n,_=Math.sqrt(x*x+w*w),y.b=Math.cos(P)*_,y.d=Math.sin(P)*_,g=!0}g&&(y.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,r=this.translateMix,i=this.scaleMix,n=this.shearMix,o=this.target,s=o.a,a=o.b,h=o.c,u=o.d,c=s*u-a*h>0?t.MathUtils.degRad:-t.MathUtils.degRad,l=this.data.offsetRotation*c,f=this.data.offsetShearY*c,p=this.bones,d=0,v=p.length;d<v;d++){var y,g=p[d],m=!1;if(0!=e){var x=g.a,b=g.b,w=g.c,E=g.d;(y=Math.atan2(h,s)+l)>t.MathUtils.PI?y-=t.MathUtils.PI2:y<-t.MathUtils.PI&&(y+=t.MathUtils.PI2),y*=e;var T=Math.cos(y),S=Math.sin(y);g.a=T*x-S*w,g.b=T*b-S*E,g.c=S*x+T*w,g.d=S*b+T*E,m=!0}if(0!=r){var _=this.temp;o.localToWorld(_.set(this.data.offsetX,this.data.offsetY)),g.worldX+=_.x*r,g.worldY+=_.y*r,m=!0}if(i>0){var O=(Math.sqrt(s*s+h*h)-1+this.data.offsetScaleX)*i+1;g.a*=O,g.c*=O,O=(Math.sqrt(a*a+u*u)-1+this.data.offsetScaleY)*i+1,g.b*=O,g.d*=O,m=!0}if(n>0)(y=Math.atan2(u,a)-Math.atan2(h,s))>t.MathUtils.PI?y-=t.MathUtils.PI2:y<-t.MathUtils.PI&&(y+=t.MathUtils.PI2),b=g.b,E=g.d,y=Math.atan2(E,b)+(y-t.MathUtils.PI/2+f)*n,O=Math.sqrt(b*b+E*E),g.b=Math.cos(y)*O,g.d=Math.sin(y)*O,m=!0;m&&(g.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,r=this.scaleMix,i=this.shearMix,n=this.target;n.appliedValid||n.updateAppliedTransform();for(var o=this.bones,s=0,a=o.length;s<a;s++){var h=o[s];h.appliedValid||h.updateAppliedTransform();var u=h.arotation;if(0!=t){var c=n.arotation-u+this.data.offsetRotation;u+=(c-=360*(16384-(16384.499999999996-c/360|0)))*t}var l=h.ax,f=h.ay;0!=e&&(l+=(n.ax-l+this.data.offsetX)*e,f+=(n.ay-f+this.data.offsetY)*e);var p=h.ascaleX,d=h.ascaleY;0!=r&&(p>1e-5&&(p=(p+(n.ascaleX-p+this.data.offsetScaleX)*r)/p),d>1e-5&&(d=(d+(n.ascaleY-d+this.data.offsetScaleY)*r)/d));var v=h.ashearY;0!=i&&(c=n.ashearY-v+this.data.offsetShearY,c-=360*(16384-(16384.499999999996-c/360|0)),h.shearY+=c*i),h.updateWorldTransformWith(l,f,u,p,d,h.ashearX,v)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,r=this.scaleMix,i=this.shearMix,n=this.target;n.appliedValid||n.updateAppliedTransform();for(var o=this.bones,s=0,a=o.length;s<a;s++){var h=o[s];h.appliedValid||h.updateAppliedTransform();var u=h.arotation;0!=t&&(u+=(n.arotation+this.data.offsetRotation)*t);var c=h.ax,l=h.ay;0!=e&&(c+=(n.ax+this.data.offsetX)*e,l+=(n.ay+this.data.offsetY)*e);var f=h.ascaleX,p=h.ascaleY;0!=r&&(f>1e-5&&(f*=(n.ascaleX-1+this.data.offsetScaleX)*r+1),p>1e-5&&(p*=(n.ascaleY-1+this.data.offsetScaleY)*r+1));var d=h.ashearY;0!=i&&(d+=(n.ashearY+this.data.offsetShearY)*i),h.updateWorldTransformWith(c,l,u,f,p,h.ashearX,d)}},e}();t.TransformConstraint=e}(i||(i={})),function(t){var e=function(t){function e(e){var r=t.call(this,e,0,!1)||this;return r.bones=new Array,r.rotateMix=0,r.translateMix=0,r.scaleMix=0,r.shearMix=0,r.offsetRotation=0,r.offsetX=0,r.offsetY=0,r.offsetScaleX=0,r.offsetScaleY=0,r.offsetShearY=0,r.relative=!1,r.local=!1,r}return n(e,t),e}(t.ConstraintData);t.TransformConstraintData=e}(i||(i={})),function(t){var e=function(){function e(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool((function(){return new Array})),this.polygonIndicesPool=new t.Pool((function(){return new Array}))}return e.prototype.triangulate=function(t){var r=t,i=t.length>>1,n=this.indicesArray;n.length=0;for(var o=0;o<i;o++)n[o]=o;var s=this.isConcaveArray;s.length=0,o=0;for(var a=i;o<a;++o)s[o]=e.isConcave(o,i,r,n);var h=this.triangles;for(h.length=0;i>3;){for(var u=i-1,c=(o=0,1);;){t:if(!s[o]){for(var l=n[u]<<1,f=n[o]<<1,p=n[c]<<1,d=r[l],v=r[l+1],y=r[f],g=r[f+1],m=r[p],x=r[p+1],b=(c+1)%i;b!=u;b=(b+1)%i)if(s[b]){var w=n[b]<<1,E=r[w],T=r[w+1];if(e.positiveArea(m,x,d,v,E,T)&&e.positiveArea(d,v,y,g,E,T)&&e.positiveArea(y,g,m,x,E,T))break t}break}if(0==c){do{if(!s[o])break;o--}while(o>0);break}u=o,o=c,c=(c+1)%i}h.push(n[(i+o-1)%i]),h.push(n[o]),h.push(n[(o+1)%i]),n.splice(o,1),s.splice(o,1);var S=(--i+o-1)%i,_=o==i?0:o;s[S]=e.isConcave(S,i,r,n),s[_]=e.isConcave(_,i,r,n)}return 3==i&&(h.push(n[2]),h.push(n[0]),h.push(n[1])),h},e.prototype.decompose=function(t,r){var i=t,n=this.convexPolygons;this.polygonPool.freeAll(n),n.length=0;var o=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(o),o.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;var a=this.polygonPool.obtain();a.length=0;for(var h=-1,u=0,c=0,l=r.length;c<l;c+=3){var f=r[c]<<1,p=r[c+1]<<1,d=r[c+2]<<1,v=i[f],y=i[f+1],g=i[p],m=i[p+1],x=i[d],b=i[d+1],w=!1;if(h==f){var E=a.length-4,T=e.winding(a[E],a[E+1],a[E+2],a[E+3],x,b),S=e.winding(x,b,a[0],a[1],a[2],a[3]);T==u&&S==u&&(a.push(x),a.push(b),s.push(d),w=!0)}w||(a.length>0?(n.push(a),o.push(s)):(this.polygonPool.free(a),this.polygonIndicesPool.free(s)),(a=this.polygonPool.obtain()).length=0,a.push(v),a.push(y),a.push(g),a.push(m),a.push(x),a.push(b),(s=this.polygonIndicesPool.obtain()).length=0,s.push(f),s.push(p),s.push(d),u=e.winding(v,y,g,m,x,b),h=f)}for(a.length>0&&(n.push(a),o.push(s)),c=0,l=n.length;c<l;c++)if(0!=(s=o[c]).length)for(var _=s[0],O=s[s.length-1],P=(a=n[c])[E=a.length-4],M=a[E+1],A=a[E+2],L=a[E+3],C=a[0],R=a[1],k=a[2],F=a[3],I=e.winding(P,M,A,L,C,R),D=0;D<l;D++)if(D!=c){var j=o[D];if(3==j.length){var B=j[0],N=j[1],G=j[2],U=n[D];x=U[U.length-2],b=U[U.length-1],B==_&&N==O&&(T=e.winding(P,M,A,L,x,b),S=e.winding(x,b,C,R,k,F),T==I&&S==I&&(U.length=0,j.length=0,a.push(x),a.push(b),s.push(G),P=A,M=L,A=x,L=b,D=0))}}for(c=n.length-1;c>=0;c--)0==(a=n[c]).length&&(n.splice(c,1),this.polygonPool.free(a),s=o[c],o.splice(c,1),this.polygonIndicesPool.free(s));return n},e.isConcave=function(t,e,r,i){var n=i[(e+t-1)%e]<<1,o=i[t]<<1,s=i[(t+1)%e]<<1;return!this.positiveArea(r[n],r[n+1],r[o],r[o+1],r[s],r[s+1])},e.positiveArea=function(t,e,r,i,n,o){return t*(o-i)+r*(e-o)+n*(i-e)>=0},e.winding=function(t,e,r,i,n,o){var s=r-t,a=i-e;return n*a-o*s+s*e-t*a>=0?1:-1},e}();t.Triangulator=e}(i||(i={})),function(t){var e=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return null!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e;var r=function(){function t(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.r=t,this.g=e,this.b=r,this.a=i}return t.prototype.set=function(t,e,r,i){return this.r=t,this.g=e,this.b=r,this.a=i,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,r,i){return this.r+=t,this.g+=e,this.b+=r,this.a+=i,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.rgba8888ToColor=function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255},t.rgb888ToColor=function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();t.Color=r;var i=function(){function t(){}return t.clamp=function(t,e,r){return t<e?e:t>r?r:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>0?1:t<0?-1:0},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.randomTriangular=function(e,r){return t.randomTriangularWith(e,r,.5*(e+r))},t.randomTriangularWith=function(t,e,r){var i=Math.random(),n=e-t;return i<=(r-t)/n?t+Math.sqrt(i*n*(r-t)):e-Math.sqrt((1-i)*n*(e-r))},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}();t.MathUtils=i;var o=function(){function t(){}return t.prototype.apply=function(t,e,r){return t+(e-t)*this.applyInternal(r)},t}();t.Interpolation=o;var s=function(t){function e(e){var r=t.call(this)||this;return r.power=2,r.power=e,r}return n(e,t),e.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},e}(o);t.Pow=s;var a=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},e}(s);t.PowOut=a;var h=function(){function t(){}return t.arrayCopy=function(t,e,r,i,n){for(var o=e,s=i;o<e+n;o++,s++)r[s]=t[o]},t.setArraySize=function(t,e,r){void 0===r&&(r=0);var i=t.length;if(i==e)return t;if(t.length=e,i<e)for(var n=i;n<e;n++)t[n]=r;return t},t.ensureArrayCapacity=function(e,r,i){return void 0===i&&(i=0),e.length>=r?e:t.setArraySize(e,r,i)},t.newArray=function(t,e){for(var r=new Array(t),i=0;i<t;i++)r[i]=e;return r},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var r=new Array(e),i=0;i<r.length;i++)r[i]=0;return r},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var r=new Array(e),i=0;i<r.length;i++)r[i]=0;return r},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e},t.webkit602BugfixHelper=function(t,e){},t.contains=function(t,e,r){void 0===r&&(r=!0);for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}();t.Utils=h;var u=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var r=t.bones[e];console.log(r.data.name+", "+r.a+", "+r.b+", "+r.c+", "+r.d+", "+r.worldX+", "+r.worldY)}},t}();t.DebugUtils=u;var c=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)this.free(t[e])},t.prototype.clear=function(){this.items.length=0},t}();t.Pool=c;var l=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();t.Vector2=l;var f=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();t.TimeKeeper=f;var p=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}();t.WindowedMean=p}(i||(i={})),Math.fround||(Math.fround=(r=new Float32Array(1),function(t){return r[0]=t,r[0]})),function(t){var e=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t};t.Attachment=e;var r=function(e){function r(t){var i=e.call(this,t)||this;return i.id=(65535&r.nextID++)<<11,i.worldVerticesLength=0,i.deformAttachment=i,i}return n(r,e),r.prototype.computeWorldVertices=function(t,e,r,i,n,o){r=n+(r>>1)*o;var s=t.bone.skeleton,a=t.deform,h=this.vertices,u=this.bones;if(null!=u){for(var c=0,l=0,f=0;f<e;f+=2)c+=(y=u[c])+1,l+=y;var p=s.bones;if(0==a.length)for(M=n,S=3*l;M<r;M+=o){var d=0,v=0,y=u[c++];for(y+=c;c<y;c++,S+=3){b=p[u[c]],A=h[S],L=h[S+1];var g=h[S+2];d+=(A*b.a+L*b.b+b.worldX)*g,v+=(A*b.c+L*b.d+b.worldY)*g}i[M]=d,i[M+1]=v}else for(var m=a,x=(M=n,S=3*l,l<<1);M<r;M+=o){for(d=0,v=0,y=u[c++],y+=c;c<y;c++,S+=3,x+=2)b=p[u[c]],A=h[S]+m[x],L=h[S+1]+m[x+1],g=h[S+2],d+=(A*b.a+L*b.b+b.worldX)*g,v+=(A*b.c+L*b.d+b.worldY)*g;i[M]=d,i[M+1]=v}}else{a.length>0&&(h=a);for(var b,w=(b=t.bone).worldX,E=b.worldY,T=b.a,S=b.b,_=b.c,O=b.d,P=e,M=n;M<r;P+=2,M+=o){var A=h[P],L=h[P+1];i[M]=A*T+L*S+w,i[M+1]=A*_+L*O+E}}},r.prototype.copyTo=function(e){null!=this.bones?(e.bones=new Array(this.bones.length),t.Utils.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,null!=this.vertices?(e.vertices=t.Utils.newFloatArray(this.vertices.length),t.Utils.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)):e.vertices=null,e.worldVerticesLength=this.worldVerticesLength,e.deformAttachment=this.deformAttachment},r.nextID=0,r}(e);t.VertexAttachment=r}(i||(i={})),function(t){var e;(e=t.AttachmentType||(t.AttachmentType={}))[e.Region=0]="Region",e[e.BoundingBox=1]="BoundingBox",e[e.Mesh=2]="Mesh",e[e.LinkedMesh=3]="LinkedMesh",e[e.Path=4]="Path",e[e.Point=5]="Point",e[e.Clipping=6]="Clipping"}(i||(i={})),function(t){var e=function(e){function r(r){var i=e.call(this,r)||this;return i.color=new t.Color(1,1,1,1),i}return n(r,e),r.prototype.copy=function(){var t=new r(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},r}(t.VertexAttachment);t.BoundingBoxAttachment=e}(i||(i={})),function(t){var e=function(e){function r(r){var i=e.call(this,r)||this;return i.color=new t.Color(.2275,.2275,.8078,1),i}return n(r,e),r.prototype.copy=function(){var t=new r(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},r}(t.VertexAttachment);t.ClippingAttachment=e}(i||(i={})),function(t){var e=function(e){function r(r){var i=e.call(this,r)||this;return i.color=new t.Color(1,1,1,1),i.tempColor=new t.Color(0,0,0,0),i}return n(r,e),r.prototype.updateUVs=function(){var e=this.regionUVs;null!=this.uvs&&this.uvs.length==e.length||(this.uvs=t.Utils.newFloatArray(e.length));var r=this.uvs,i=this.uvs.length,n=this.region.u,o=this.region.v,s=0,a=0;if(this.region instanceof t.TextureAtlasRegion){var h=this.region,u=h.texture.getImage().width,c=h.texture.getImage().height;switch(h.degrees){case 90:n-=(h.originalHeight-h.offsetY-h.height)/u,o-=(h.originalWidth-h.offsetX-h.width)/c,s=h.originalHeight/u,a=h.originalWidth/c;for(var l=0;l<i;l+=2)r[l]=n+e[l+1]*s,r[l+1]=o+(1-e[l])*a;return;case 180:for(n-=(h.originalWidth-h.offsetX-h.width)/u,o-=h.offsetY/c,s=h.originalWidth/u,a=h.originalHeight/c,l=0;l<i;l+=2)r[l]=n+(1-e[l])*s,r[l+1]=o+(1-e[l+1])*a;return;case 270:for(n-=h.offsetY/u,o-=h.offsetX/c,s=h.originalHeight/u,a=h.originalWidth/c,l=0;l<i;l+=2)r[l]=n+(1-e[l+1])*s,r[l+1]=o+e[l]*a;return}n-=h.offsetX/u,o-=(h.originalHeight-h.offsetY-h.height)/c,s=h.originalWidth/u,a=h.originalHeight/c}else null==this.region?(n=o=0,s=a=1):(s=this.region.u2-n,a=this.region.v2-o);for(l=0;l<i;l+=2)r[l]=n+e[l]*s,r[l+1]=o+e[l+1]*a},r.prototype.getParentMesh=function(){return this.parentMesh},r.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},r.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var e=new r(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Array(this.regionUVs.length),t.Utils.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.uvs=new Array(this.uvs.length),t.Utils.arrayCopy(this.uvs,0,e.uvs,0,this.uvs.length),e.triangles=new Array(this.triangles.length),t.Utils.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,null!=this.edges&&(e.edges=new Array(this.edges.length),t.Utils.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e},r.prototype.newLinkedMesh=function(){var t=new r(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t.updateUVs(),t},r}(t.VertexAttachment);t.MeshAttachment=e}(i||(i={})),function(t){var e=function(e){function r(r){var i=e.call(this,r)||this;return i.closed=!1,i.constantSpeed=!1,i.color=new t.Color(1,1,1,1),i}return n(r,e),r.prototype.copy=function(){var e=new r(this.name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),t.Utils.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e},r}(t.VertexAttachment);t.PathAttachment=e}(i||(i={})),function(t){var e=function(e){function r(r){var i=e.call(this,r)||this;return i.color=new t.Color(.38,.94,0,1),i}return n(r,e),r.prototype.computeWorldPosition=function(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e},r.prototype.computeWorldRotation=function(e){var r=t.MathUtils.cosDeg(this.rotation),i=t.MathUtils.sinDeg(this.rotation),n=r*e.a+i*e.b,o=r*e.c+i*e.d;return Math.atan2(o,n)*t.MathUtils.radDeg},r.prototype.copy=function(){var t=new r(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},r}(t.VertexAttachment);t.PointAttachment=e}(i||(i={})),function(t){var e=function(e){function r(r){var i=e.call(this,r)||this;return i.x=0,i.y=0,i.scaleX=1,i.scaleY=1,i.rotation=0,i.width=0,i.height=0,i.color=new t.Color(1,1,1,1),i.offset=t.Utils.newFloatArray(8),i.uvs=t.Utils.newFloatArray(8),i.tempColor=new t.Color(1,1,1,1),i}return n(r,e),r.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,o=i+this.region.width*t,s=n+this.region.height*e,a=this.rotation*Math.PI/180,h=Math.cos(a),u=Math.sin(a),c=i*h+this.x,l=i*u,f=n*h+this.y,p=n*u,d=o*h+this.x,v=o*u,y=s*h+this.y,g=s*u,m=this.offset;m[r.OX1]=c-p,m[r.OY1]=f+l,m[r.OX2]=c-g,m[r.OY2]=y+l,m[r.OX3]=d-g,m[r.OY3]=y+v,m[r.OX4]=d-p,m[r.OY4]=f+v},r.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},r.prototype.computeWorldVertices=function(t,e,i,n){var o=this.offset,s=t.worldX,a=t.worldY,h=t.a,u=t.b,c=t.c,l=t.d,f=0,p=0;f=o[r.OX1],p=o[r.OY1],e[i]=f*h+p*u+s,e[i+1]=f*c+p*l+a,i+=n,f=o[r.OX2],p=o[r.OY2],e[i]=f*h+p*u+s,e[i+1]=f*c+p*l+a,i+=n,f=o[r.OX3],p=o[r.OY3],e[i]=f*h+p*u+s,e[i+1]=f*c+p*l+a,i+=n,f=o[r.OX4],p=o[r.OY4],e[i]=f*h+p*u+s,e[i+1]=f*c+p*l+a},r.prototype.copy=function(){var e=new r(this.name);return e.region=this.region,e.rendererObject=this.rendererObject,e.path=this.path,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,t.Utils.arrayCopy(this.uvs,0,e.uvs,0,8),t.Utils.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e},r.OX1=0,r.OY1=1,r.OX2=2,r.OY2=3,r.OX3=4,r.OY3=5,r.OX4=6,r.OY4=7,r.X1=0,r.Y1=1,r.C1R=2,r.C1G=3,r.C1B=4,r.C1A=5,r.U1=6,r.V1=7,r.X2=8,r.Y2=9,r.C2R=10,r.C2G=11,r.C2B=12,r.C2A=13,r.U2=14,r.V2=15,r.X3=16,r.Y3=17,r.C3R=18,r.C3G=19,r.C3B=20,r.C3A=21,r.U3=22,r.V3=23,r.X4=24,r.Y4=25,r.C4R=26,r.C4G=27,r.C4B=28,r.C4A=29,r.U4=30,r.V4=31,r}(t.Attachment);t.RegionAttachment=e}(i||(i={})),function(t){var e=function(){function e(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return e.prototype.begin=function(t){},e.prototype.transform=function(e,r,i,n){e.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),e.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e}();t.JitterEffect=e}(i||(i={})),function(t){var e=function(){function e(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return e.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},e.prototype.transform=function(r,i,n,o){var s=this.angle*t.MathUtils.degreesToRadians,a=r.x-this.worldX,h=r.y-this.worldY,u=Math.sqrt(a*a+h*h);if(u<this.radius){var c=e.interpolation.apply(0,s,(this.radius-u)/this.radius),l=Math.cos(c),f=Math.sin(c);r.x=l*a-f*h+this.worldX,r.y=f*a+l*h+this.worldY}},e.prototype.end=function(){},e.interpolation=new t.PowOut(2),e}();t.SwirlEffect=e}(i||(i={})),function(t){var e,r;e=t.canvas||(t.canvas={}),r=function(e){function r(r){return void 0===r&&(r=""),e.call(this,(function(e){return new t.canvas.CanvasTexture(e)}),r)||this}return n(r,e),r}(t.AssetManager),e.AssetManager=r}(i||(i={})),function(t){var e,r;e=t.canvas||(t.canvas={}),r=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.setFilters=function(t,e){},e.prototype.setWraps=function(t,e){},e.prototype.dispose=function(){},e}(t.Texture),e.CanvasTexture=r}(i||(i={})),function(t){var e,r;e=t.canvas||(t.canvas={}),r=function(){function e(e){this.triangleRendering=!1,this.debugRendering=!1,this.vertices=t.Utils.newFloatArray(8192),this.tempColor=new t.Color,this.ctx=e}return e.prototype.draw=function(t){this.triangleRendering?this.drawTriangles(t):this.drawImages(t)},e.prototype.drawImages=function(e){var r=this.ctx,i=e.drawOrder;this.debugRendering&&(r.strokeStyle="green"),r.save();for(var n=0,o=i.length;n<o;n++){var s=i[n];if(s.bone.active){var a=s.getAttachment(),h=null,u=null,c=null;if(a instanceof t.RegionAttachment){c=(u=(h=a).region).texture.getImage();var l=s.bone.skeleton.color,f=s.color,p=h.color,d=l.a*f.a*p.a,v=this.tempColor;v.set(l.r*f.r*p.r,l.g*f.g*p.g,l.b*f.b*p.b,d);var y=a,g=s.bone,m=u.width,x=u.height;r.save(),r.transform(g.a,g.c,g.b,g.d,g.worldX,g.worldY),r.translate(a.offset[0],a.offset[1]),r.rotate(a.rotation*Math.PI/180);var b=y.width/m;if(r.scale(b*a.scaleX,b*a.scaleY),r.translate(m/2,x/2),a.region.rotate){var w=m;m=x,x=w,r.rotate(-Math.PI/2)}r.scale(1,-1),r.translate(-m/2,-x/2),r.globalAlpha=v.a,r.drawImage(c,u.x,u.y,m,x,0,0,m,x),this.debugRendering&&r.strokeRect(0,0,m,x),r.restore()}}}r.restore()},e.prototype.drawTriangles=function(r){for(var i=null,n=this.vertices,o=null,s=r.drawOrder,a=0,h=s.length;a<h;a++){var u=s[a],c=u.getAttachment(),l=null;if(c instanceof t.RegionAttachment){var f=c;n=this.computeRegionVertices(u,f,!1),o=e.QUAD_TRIANGLES,l=f.region.texture.getImage()}else{if(!(c instanceof t.MeshAttachment))continue;var p=c;n=this.computeMeshVertices(u,p,!1),o=p.triangles,l=p.region.renderObject.texture.getImage()}if(null!=l){var d=u.data.blendMode;d!=i&&(i=d);var v=u.bone.skeleton.color,y=u.color,g=c.color,m=v.a*y.a*g.a,x=this.tempColor;x.set(v.r*y.r*g.r,v.g*y.g*g.g,v.b*y.b*g.b,m);var b=this.ctx;b.globalAlpha=x.a;for(var w=0;w<o.length;w+=3){var E=8*o[w],T=8*o[w+1],S=8*o[w+2],_=n[E],O=n[E+1],P=n[E+6],M=n[E+7],A=n[T],L=n[T+1],C=n[T+6],R=n[T+7],k=n[S],F=n[S+1],I=n[S+6],D=n[S+7];this.drawTriangle(l,_,O,P,M,A,L,C,R,k,F,I,D),this.debugRendering&&(b.strokeStyle="green",b.beginPath(),b.moveTo(_,O),b.lineTo(A,L),b.lineTo(k,F),b.lineTo(_,O),b.stroke())}}}this.ctx.globalAlpha=1},e.prototype.drawTriangle=function(t,e,r,i,n,o,s,a,h,u,c,l,f){var p=this.ctx;i*=t.width,n*=t.height,a*=t.width,h*=t.height,l*=t.width,f*=t.height,p.beginPath(),p.moveTo(e,r),p.lineTo(o,s),p.lineTo(u,c),p.closePath();var d=1/((a-=i)*(f-=n)-(l-=i)*(h-=n)),v=(f*(o-=e)-h*(u-=e))*d,y=(f*(s-=r)-h*(c-=r))*d,g=(a*u-l*o)*d,m=(a*c-l*s)*d,x=e-v*i-g*n,b=r-y*i-m*n;p.save(),p.transform(v,y,g,m,x,b),p.clip(),p.drawImage(t,0,0),p.restore()},e.prototype.computeRegionVertices=function(r,i,n){var o=r.bone.skeleton.color,s=r.color,a=i.color,h=o.a*s.a*a.a,u=n?h:1,c=this.tempColor;c.set(o.r*s.r*a.r*u,o.g*s.g*a.g*u,o.b*s.b*a.b*u,h),i.computeWorldVertices(r.bone,this.vertices,0,e.VERTEX_SIZE);var l=this.vertices,f=i.uvs;return l[t.RegionAttachment.C1R]=c.r,l[t.RegionAttachment.C1G]=c.g,l[t.RegionAttachment.C1B]=c.b,l[t.RegionAttachment.C1A]=c.a,l[t.RegionAttachment.U1]=f[0],l[t.RegionAttachment.V1]=f[1],l[t.RegionAttachment.C2R]=c.r,l[t.RegionAttachment.C2G]=c.g,l[t.RegionAttachment.C2B]=c.b,l[t.RegionAttachment.C2A]=c.a,l[t.RegionAttachment.U2]=f[2],l[t.RegionAttachment.V2]=f[3],l[t.RegionAttachment.C3R]=c.r,l[t.RegionAttachment.C3G]=c.g,l[t.RegionAttachment.C3B]=c.b,l[t.RegionAttachment.C3A]=c.a,l[t.RegionAttachment.U3]=f[4],l[t.RegionAttachment.V3]=f[5],l[t.RegionAttachment.C4R]=c.r,l[t.RegionAttachment.C4G]=c.g,l[t.RegionAttachment.C4B]=c.b,l[t.RegionAttachment.C4A]=c.a,l[t.RegionAttachment.U4]=f[6],l[t.RegionAttachment.V4]=f[7],l},e.prototype.computeMeshVertices=function(r,i,n){var o=r.bone.skeleton.color,s=r.color,a=i.color,h=o.a*s.a*a.a,u=n?h:1,c=this.tempColor;c.set(o.r*s.r*a.r*u,o.g*s.g*a.g*u,o.b*s.b*a.b*u,h);var l=i.worldVerticesLength/2;this.vertices.length<i.worldVerticesLength&&(this.vertices=t.Utils.newFloatArray(i.worldVerticesLength));var f=this.vertices;i.computeWorldVertices(r,0,i.worldVerticesLength,f,0,e.VERTEX_SIZE);for(var p=i.uvs,d=0,v=l,y=0,g=2;d<v;d++)f[g++]=c.r,f[g++]=c.g,f[g++]=c.b,f[g++]=c.a,f[g++]=p[y++],f[g++]=p[y++],g+=2;return f},e.QUAD_TRIANGLES=[0,1,2,2,3,0],e.VERTEX_SIZE=8,e}(),e.SkeletonRenderer=r}(i||(i={})),function(t){var e,r;e=t.webgl||(t.webgl={}),r=function(e){function r(r,i){return void 0===i&&(i=""),e.call(this,(function(e){return new t.webgl.GLTexture(r,e)}),i)||this}return n(r,e),r}(t.AssetManager),e.AssetManager=r}(i||(i={})),function(t){var e,r;e=t.webgl||(t.webgl={}),r=function(){function t(t,r){this.position=new e.Vector3(0,0,0),this.direction=new e.Vector3(0,0,-1),this.up=new e.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new e.Matrix4,this.inverseProjectionView=new e.Matrix4,this.projection=new e.Matrix4,this.view=new e.Matrix4,this.tmp=new e.Vector3,this.viewportWidth=t,this.viewportHeight=r,this.update()}return t.prototype.update=function(){var t=this.projection,e=this.view,r=this.projectionView,i=this.inverseProjectionView,n=this.zoom,o=this.viewportWidth,s=this.viewportHeight;t.ortho(n*(-o/2),n*(o/2),n*(-s/2),n*(s/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),r.set(t.values),r.multiply(e),i.set(r.values).invert()},t.prototype.screenToWorld=function(t,e,r){var i=t.x,n=r-t.y-1,o=this.tmp;return o.x=2*i/e-1,o.y=2*n/r-1,o.z=2*t.z-1,o.project(this.inverseProjectionView),t.set(o.x,o.y,o.z),t},t.prototype.setViewport=function(t,e){this.viewportWidth=t,this.viewportHeight=e},t}(),e.OrthoCamera=r}(i||(i={})),function(t){var e,r;e=t.webgl||(t.webgl={}),r=function(r){function i(t,i,n){void 0===n&&(n=!1);var o=r.call(this,i)||this;return o.texture=null,o.boundUnit=0,o.useMipMaps=!1,o.context=t instanceof e.ManagedWebGLRenderingContext?t:new e.ManagedWebGLRenderingContext(t),o.useMipMaps=n,o.restore(),o.context.addRestorable(o),o}return n(i,r),i.prototype.setFilters=function(t,e){var r=this.context.gl;this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,i.validateMagFilter(e))},i.validateMagFilter=function(e){switch(e){case t.TextureFilter.MipMap:case t.TextureFilter.MipMapLinearLinear:case t.TextureFilter.MipMapLinearNearest:case t.TextureFilter.MipMapNearestLinear:case t.TextureFilter.MipMapNearestNearest:return t.TextureFilter.Linear;default:return e}},i.prototype.setWraps=function(t,e){var r=this.context.gl;this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e)},i.prototype.update=function(t){var e=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),i.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._image),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&e.generateMipmap(e.TEXTURE_2D)},i.prototype.restore=function(){this.texture=null,this.update(this.useMipMaps)},i.prototype.bind=function(t){void 0===t&&(t=0);var e=this.context.gl;this.boundUnit=t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},i.prototype.unbind=function(){var t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)},i.prototype.dispose=function(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)},i.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1,i}(t.Texture),e.GLTexture=r}(i||(i={})),function(t){!function(t){t.M00=0,t.M01=4,t.M02=8,t.M03=12,t.M10=1,t.M11=5,t.M12=9,t.M13=13,t.M20=2,t.M21=6,t.M22=10,t.M23=14,t.M30=3,t.M31=7,t.M32=11,t.M33=15;var e=function(){function e(){this.temp=new Float32Array(16),this.values=new Float32Array(16);var e=this.values;e[t.M00]=1,e[t.M11]=1,e[t.M22]=1,e[t.M33]=1}return e.prototype.set=function(t){return this.values.set(t),this},e.prototype.transpose=function(){var e=this.temp,r=this.values;return e[t.M00]=r[t.M00],e[t.M01]=r[t.M10],e[t.M02]=r[t.M20],e[t.M03]=r[t.M30],e[t.M10]=r[t.M01],e[t.M11]=r[t.M11],e[t.M12]=r[t.M21],e[t.M13]=r[t.M31],e[t.M20]=r[t.M02],e[t.M21]=r[t.M12],e[t.M22]=r[t.M22],e[t.M23]=r[t.M32],e[t.M30]=r[t.M03],e[t.M31]=r[t.M13],e[t.M32]=r[t.M23],e[t.M33]=r[t.M33],this.set(e)},e.prototype.identity=function(){var e=this.values;return e[t.M00]=1,e[t.M01]=0,e[t.M02]=0,e[t.M03]=0,e[t.M10]=0,e[t.M11]=1,e[t.M12]=0,e[t.M13]=0,e[t.M20]=0,e[t.M21]=0,e[t.M22]=1,e[t.M23]=0,e[t.M30]=0,e[t.M31]=0,e[t.M32]=0,e[t.M33]=1,this},e.prototype.invert=function(){var e=this.values,r=this.temp,i=e[t.M30]*e[t.M21]*e[t.M12]*e[t.M03]-e[t.M20]*e[t.M31]*e[t.M12]*e[t.M03]-e[t.M30]*e[t.M11]*e[t.M22]*e[t.M03]+e[t.M10]*e[t.M31]*e[t.M22]*e[t.M03]+e[t.M20]*e[t.M11]*e[t.M32]*e[t.M03]-e[t.M10]*e[t.M21]*e[t.M32]*e[t.M03]-e[t.M30]*e[t.M21]*e[t.M02]*e[t.M13]+e[t.M20]*e[t.M31]*e[t.M02]*e[t.M13]+e[t.M30]*e[t.M01]*e[t.M22]*e[t.M13]-e[t.M00]*e[t.M31]*e[t.M22]*e[t.M13]-e[t.M20]*e[t.M01]*e[t.M32]*e[t.M13]+e[t.M00]*e[t.M21]*e[t.M32]*e[t.M13]+e[t.M30]*e[t.M11]*e[t.M02]*e[t.M23]-e[t.M10]*e[t.M31]*e[t.M02]*e[t.M23]-e[t.M30]*e[t.M01]*e[t.M12]*e[t.M23]+e[t.M00]*e[t.M31]*e[t.M12]*e[t.M23]+e[t.M10]*e[t.M01]*e[t.M32]*e[t.M23]-e[t.M00]*e[t.M11]*e[t.M32]*e[t.M23]-e[t.M20]*e[t.M11]*e[t.M02]*e[t.M33]+e[t.M10]*e[t.M21]*e[t.M02]*e[t.M33]+e[t.M20]*e[t.M01]*e[t.M12]*e[t.M33]-e[t.M00]*e[t.M21]*e[t.M12]*e[t.M33]-e[t.M10]*e[t.M01]*e[t.M22]*e[t.M33]+e[t.M00]*e[t.M11]*e[t.M22]*e[t.M33];if(0==i)throw new Error("non-invertible matrix");var n=1/i;return r[t.M00]=e[t.M12]*e[t.M23]*e[t.M31]-e[t.M13]*e[t.M22]*e[t.M31]+e[t.M13]*e[t.M21]*e[t.M32]-e[t.M11]*e[t.M23]*e[t.M32]-e[t.M12]*e[t.M21]*e[t.M33]+e[t.M11]*e[t.M22]*e[t.M33],r[t.M01]=e[t.M03]*e[t.M22]*e[t.M31]-e[t.M02]*e[t.M23]*e[t.M31]-e[t.M03]*e[t.M21]*e[t.M32]+e[t.M01]*e[t.M23]*e[t.M32]+e[t.M02]*e[t.M21]*e[t.M33]-e[t.M01]*e[t.M22]*e[t.M33],r[t.M02]=e[t.M02]*e[t.M13]*e[t.M31]-e[t.M03]*e[t.M12]*e[t.M31]+e[t.M03]*e[t.M11]*e[t.M32]-e[t.M01]*e[t.M13]*e[t.M32]-e[t.M02]*e[t.M11]*e[t.M33]+e[t.M01]*e[t.M12]*e[t.M33],r[t.M03]=e[t.M03]*e[t.M12]*e[t.M21]-e[t.M02]*e[t.M13]*e[t.M21]-e[t.M03]*e[t.M11]*e[t.M22]+e[t.M01]*e[t.M13]*e[t.M22]+e[t.M02]*e[t.M11]*e[t.M23]-e[t.M01]*e[t.M12]*e[t.M23],r[t.M10]=e[t.M13]*e[t.M22]*e[t.M30]-e[t.M12]*e[t.M23]*e[t.M30]-e[t.M13]*e[t.M20]*e[t.M32]+e[t.M10]*e[t.M23]*e[t.M32]+e[t.M12]*e[t.M20]*e[t.M33]-e[t.M10]*e[t.M22]*e[t.M33],r[t.M11]=e[t.M02]*e[t.M23]*e[t.M30]-e[t.M03]*e[t.M22]*e[t.M30]+e[t.M03]*e[t.M20]*e[t.M32]-e[t.M00]*e[t.M23]*e[t.M32]-e[t.M02]*e[t.M20]*e[t.M33]+e[t.M00]*e[t.M22]*e[t.M33],r[t.M12]=e[t.M03]*e[t.M12]*e[t.M30]-e[t.M02]*e[t.M13]*e[t.M30]-e[t.M03]*e[t.M10]*e[t.M32]+e[t.M00]*e[t.M13]*e[t.M32]+e[t.M02]*e[t.M10]*e[t.M33]-e[t.M00]*e[t.M12]*e[t.M33],r[t.M13]=e[t.M02]*e[t.M13]*e[t.M20]-e[t.M03]*e[t.M12]*e[t.M20]+e[t.M03]*e[t.M10]*e[t.M22]-e[t.M00]*e[t.M13]*e[t.M22]-e[t.M02]*e[t.M10]*e[t.M23]+e[t.M00]*e[t.M12]*e[t.M23],r[t.M20]=e[t.M11]*e[t.M23]*e[t.M30]-e[t.M13]*e[t.M21]*e[t.M30]+e[t.M13]*e[t.M20]*e[t.M31]-e[t.M10]*e[t.M23]*e[t.M31]-e[t.M11]*e[t.M20]*e[t.M33]+e[t.M10]*e[t.M21]*e[t.M33],r[t.M21]=e[t.M03]*e[t.M21]*e[t.M30]-e[t.M01]*e[t.M23]*e[t.M30]-e[t.M03]*e[t.M20]*e[t.M31]+e[t.M00]*e[t.M23]*e[t.M31]+e[t.M01]*e[t.M20]*e[t.M33]-e[t.M00]*e[t.M21]*e[t.M33],r[t.M22]=e[t.M01]*e[t.M13]*e[t.M30]-e[t.M03]*e[t.M11]*e[t.M30]+e[t.M03]*e[t.M10]*e[t.M31]-e[t.M00]*e[t.M13]*e[t.M31]-e[t.M01]*e[t.M10]*e[t.M33]+e[t.M00]*e[t.M11]*e[t.M33],r[t.M23]=e[t.M03]*e[t.M11]*e[t.M20]-e[t.M01]*e[t.M13]*e[t.M20]-e[t.M03]*e[t.M10]*e[t.M21]+e[t.M00]*e[t.M13]*e[t.M21]+e[t.M01]*e[t.M10]*e[t.M23]-e[t.M00]*e[t.M11]*e[t.M23],r[t.M30]=e[t.M12]*e[t.M21]*e[t.M30]-e[t.M11]*e[t.M22]*e[t.M30]-e[t.M12]*e[t.M20]*e[t.M31]+e[t.M10]*e[t.M22]*e[t.M31]+e[t.M11]*e[t.M20]*e[t.M32]-e[t.M10]*e[t.M21]*e[t.M32],r[t.M31]=e[t.M01]*e[t.M22]*e[t.M30]-e[t.M02]*e[t.M21]*e[t.M30]+e[t.M02]*e[t.M20]*e[t.M31]-e[t.M00]*e[t.M22]*e[t.M31]-e[t.M01]*e[t.M20]*e[t.M32]+e[t.M00]*e[t.M21]*e[t.M32],r[t.M32]=e[t.M02]*e[t.M11]*e[t.M30]-e[t.M01]*e[t.M12]*e[t.M30]-e[t.M02]*e[t.M10]*e[t.M31]+e[t.M00]*e[t.M12]*e[t.M31]+e[t.M01]*e[t.M10]*e[t.M32]-e[t.M00]*e[t.M11]*e[t.M32],r[t.M33]=e[t.M01]*e[t.M12]*e[t.M20]-e[t.M02]*e[t.M11]*e[t.M20]+e[t.M02]*e[t.M10]*e[t.M21]-e[t.M00]*e[t.M12]*e[t.M21]-e[t.M01]*e[t.M10]*e[t.M22]+e[t.M00]*e[t.M11]*e[t.M22],e[t.M00]=r[t.M00]*n,e[t.M01]=r[t.M01]*n,e[t.M02]=r[t.M02]*n,e[t.M03]=r[t.M03]*n,e[t.M10]=r[t.M10]*n,e[t.M11]=r[t.M11]*n,e[t.M12]=r[t.M12]*n,e[t.M13]=r[t.M13]*n,e[t.M20]=r[t.M20]*n,e[t.M21]=r[t.M21]*n,e[t.M22]=r[t.M22]*n,e[t.M23]=r[t.M23]*n,e[t.M30]=r[t.M30]*n,e[t.M31]=r[t.M31]*n,e[t.M32]=r[t.M32]*n,e[t.M33]=r[t.M33]*n,this},e.prototype.determinant=function(){var e=this.values;return e[t.M30]*e[t.M21]*e[t.M12]*e[t.M03]-e[t.M20]*e[t.M31]*e[t.M12]*e[t.M03]-e[t.M30]*e[t.M11]*e[t.M22]*e[t.M03]+e[t.M10]*e[t.M31]*e[t.M22]*e[t.M03]+e[t.M20]*e[t.M11]*e[t.M32]*e[t.M03]-e[t.M10]*e[t.M21]*e[t.M32]*e[t.M03]-e[t.M30]*e[t.M21]*e[t.M02]*e[t.M13]+e[t.M20]*e[t.M31]*e[t.M02]*e[t.M13]+e[t.M30]*e[t.M01]*e[t.M22]*e[t.M13]-e[t.M00]*e[t.M31]*e[t.M22]*e[t.M13]-e[t.M20]*e[t.M01]*e[t.M32]*e[t.M13]+e[t.M00]*e[t.M21]*e[t.M32]*e[t.M13]+e[t.M30]*e[t.M11]*e[t.M02]*e[t.M23]-e[t.M10]*e[t.M31]*e[t.M02]*e[t.M23]-e[t.M30]*e[t.M01]*e[t.M12]*e[t.M23]+e[t.M00]*e[t.M31]*e[t.M12]*e[t.M23]+e[t.M10]*e[t.M01]*e[t.M32]*e[t.M23]-e[t.M00]*e[t.M11]*e[t.M32]*e[t.M23]-e[t.M20]*e[t.M11]*e[t.M02]*e[t.M33]+e[t.M10]*e[t.M21]*e[t.M02]*e[t.M33]+e[t.M20]*e[t.M01]*e[t.M12]*e[t.M33]-e[t.M00]*e[t.M21]*e[t.M12]*e[t.M33]-e[t.M10]*e[t.M01]*e[t.M22]*e[t.M33]+e[t.M00]*e[t.M11]*e[t.M22]*e[t.M33]},e.prototype.translate=function(e,r,i){var n=this.values;return n[t.M03]+=e,n[t.M13]+=r,n[t.M23]+=i,this},e.prototype.copy=function(){return(new e).set(this.values)},e.prototype.projection=function(e,r,i,n){this.identity();var o=1/Math.tan(i*(Math.PI/180)/2),s=(r+e)/(e-r),a=2*r*e/(e-r),h=this.values;return h[t.M00]=o/n,h[t.M10]=0,h[t.M20]=0,h[t.M30]=0,h[t.M01]=0,h[t.M11]=o,h[t.M21]=0,h[t.M31]=0,h[t.M02]=0,h[t.M12]=0,h[t.M22]=s,h[t.M32]=-1,h[t.M03]=0,h[t.M13]=0,h[t.M23]=a,h[t.M33]=0,this},e.prototype.ortho2d=function(t,e,r,i){return this.ortho(t,t+r,e,e+i,0,1)},e.prototype.ortho=function(e,r,i,n,o,s){this.identity();var a=2/(r-e),h=2/(n-i),u=-2/(s-o),c=-(r+e)/(r-e),l=-(n+i)/(n-i),f=-(s+o)/(s-o),p=this.values;return p[t.M00]=a,p[t.M10]=0,p[t.M20]=0,p[t.M30]=0,p[t.M01]=0,p[t.M11]=h,p[t.M21]=0,p[t.M31]=0,p[t.M02]=0,p[t.M12]=0,p[t.M22]=u,p[t.M32]=0,p[t.M03]=c,p[t.M13]=l,p[t.M23]=f,p[t.M33]=1,this},e.prototype.multiply=function(e){var r=this.temp,i=this.values,n=e.values;return r[t.M00]=i[t.M00]*n[t.M00]+i[t.M01]*n[t.M10]+i[t.M02]*n[t.M20]+i[t.M03]*n[t.M30],r[t.M01]=i[t.M00]*n[t.M01]+i[t.M01]*n[t.M11]+i[t.M02]*n[t.M21]+i[t.M03]*n[t.M31],r[t.M02]=i[t.M00]*n[t.M02]+i[t.M01]*n[t.M12]+i[t.M02]*n[t.M22]+i[t.M03]*n[t.M32],r[t.M03]=i[t.M00]*n[t.M03]+i[t.M01]*n[t.M13]+i[t.M02]*n[t.M23]+i[t.M03]*n[t.M33],r[t.M10]=i[t.M10]*n[t.M00]+i[t.M11]*n[t.M10]+i[t.M12]*n[t.M20]+i[t.M13]*n[t.M30],r[t.M11]=i[t.M10]*n[t.M01]+i[t.M11]*n[t.M11]+i[t.M12]*n[t.M21]+i[t.M13]*n[t.M31],r[t.M12]=i[t.M10]*n[t.M02]+i[t.M11]*n[t.M12]+i[t.M12]*n[t.M22]+i[t.M13]*n[t.M32],r[t.M13]=i[t.M10]*n[t.M03]+i[t.M11]*n[t.M13]+i[t.M12]*n[t.M23]+i[t.M13]*n[t.M33],r[t.M20]=i[t.M20]*n[t.M00]+i[t.M21]*n[t.M10]+i[t.M22]*n[t.M20]+i[t.M23]*n[t.M30],r[t.M21]=i[t.M20]*n[t.M01]+i[t.M21]*n[t.M11]+i[t.M22]*n[t.M21]+i[t.M23]*n[t.M31],r[t.M22]=i[t.M20]*n[t.M02]+i[t.M21]*n[t.M12]+i[t.M22]*n[t.M22]+i[t.M23]*n[t.M32],r[t.M23]=i[t.M20]*n[t.M03]+i[t.M21]*n[t.M13]+i[t.M22]*n[t.M23]+i[t.M23]*n[t.M33],r[t.M30]=i[t.M30]*n[t.M00]+i[t.M31]*n[t.M10]+i[t.M32]*n[t.M20]+i[t.M33]*n[t.M30],r[t.M31]=i[t.M30]*n[t.M01]+i[t.M31]*n[t.M11]+i[t.M32]*n[t.M21]+i[t.M33]*n[t.M31],r[t.M32]=i[t.M30]*n[t.M02]+i[t.M31]*n[t.M12]+i[t.M32]*n[t.M22]+i[t.M33]*n[t.M32],r[t.M33]=i[t.M30]*n[t.M03]+i[t.M31]*n[t.M13]+i[t.M32]*n[t.M23]+i[t.M33]*n[t.M33],this.set(this.temp)},e.prototype.multiplyLeft=function(e){var r=this.temp,i=this.values,n=e.values;return r[t.M00]=n[t.M00]*i[t.M00]+n[t.M01]*i[t.M10]+n[t.M02]*i[t.M20]+n[t.M03]*i[t.M30],r[t.M01]=n[t.M00]*i[t.M01]+n[t.M01]*i[t.M11]+n[t.M02]*i[t.M21]+n[t.M03]*i[t.M31],r[t.M02]=n[t.M00]*i[t.M02]+n[t.M01]*i[t.M12]+n[t.M02]*i[t.M22]+n[t.M03]*i[t.M32],r[t.M03]=n[t.M00]*i[t.M03]+n[t.M01]*i[t.M13]+n[t.M02]*i[t.M23]+n[t.M03]*i[t.M33],r[t.M10]=n[t.M10]*i[t.M00]+n[t.M11]*i[t.M10]+n[t.M12]*i[t.M20]+n[t.M13]*i[t.M30],r[t.M11]=n[t.M10]*i[t.M01]+n[t.M11]*i[t.M11]+n[t.M12]*i[t.M21]+n[t.M13]*i[t.M31],r[t.M12]=n[t.M10]*i[t.M02]+n[t.M11]*i[t.M12]+n[t.M12]*i[t.M22]+n[t.M13]*i[t.M32],r[t.M13]=n[t.M10]*i[t.M03]+n[t.M11]*i[t.M13]+n[t.M12]*i[t.M23]+n[t.M13]*i[t.M33],r[t.M20]=n[t.M20]*i[t.M00]+n[t.M21]*i[t.M10]+n[t.M22]*i[t.M20]+n[t.M23]*i[t.M30],r[t.M21]=n[t.M20]*i[t.M01]+n[t.M21]*i[t.M11]+n[t.M22]*i[t.M21]+n[t.M23]*i[t.M31],r[t.M22]=n[t.M20]*i[t.M02]+n[t.M21]*i[t.M12]+n[t.M22]*i[t.M22]+n[t.M23]*i[t.M32],r[t.M23]=n[t.M20]*i[t.M03]+n[t.M21]*i[t.M13]+n[t.M22]*i[t.M23]+n[t.M23]*i[t.M33],r[t.M30]=n[t.M30]*i[t.M00]+n[t.M31]*i[t.M10]+n[t.M32]*i[t.M20]+n[t.M33]*i[t.M30],r[t.M31]=n[t.M30]*i[t.M01]+n[t.M31]*i[t.M11]+n[t.M32]*i[t.M21]+n[t.M33]*i[t.M31],r[t.M32]=n[t.M30]*i[t.M02]+n[t.M31]*i[t.M12]+n[t.M32]*i[t.M22]+n[t.M33]*i[t.M32],r[t.M33]=n[t.M30]*i[t.M03]+n[t.M31]*i[t.M13]+n[t.M32]*i[t.M23]+n[t.M33]*i[t.M33],this.set(this.temp)},e.prototype.lookAt=function(r,i,n){e.initTemps();var o=e.xAxis,s=e.yAxis,a=e.zAxis;a.setFrom(i).normalize(),o.setFrom(i).normalize(),o.cross(n).normalize(),s.setFrom(o).cross(a).normalize(),this.identity();var h=this.values;return h[t.M00]=o.x,h[t.M01]=o.y,h[t.M02]=o.z,h[t.M10]=s.x,h[t.M11]=s.y,h[t.M12]=s.z,h[t.M20]=-a.x,h[t.M21]=-a.y,h[t.M22]=-a.z,e.tmpMatrix.identity(),e.tmpMatrix.values[t.M03]=-r.x,e.tmpMatrix.values[t.M13]=-r.y,e.tmpMatrix.values[t.M23]=-r.z,this.multiply(e.tmpMatrix),this},e.initTemps=function(){null===e.xAxis&&(e.xAxis=new t.Vector3),null===e.yAxis&&(e.yAxis=new t.Vector3),null===e.zAxis&&(e.zAxis=new t.Vector3)},e.xAxis=null,e.yAxis=null,e.zAxis=null,e.tmpMatrix=new e,e}();t.Matrix4=e}(t.webgl||(t.webgl={}))}(i||(i={})),function(t){!function(t){var e=function(){function e(e,r,i,n){this.attributes=r,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=e instanceof t.ManagedWebGLRenderingContext?e:new t.ManagedWebGLRenderingContext(e),this.elementsPerVertex=0;for(var o=0;o<r.length;o++)this.elementsPerVertex+=r[o].numElements;this.vertices=new Float32Array(i*this.elementsPerVertex),this.indices=new Uint16Array(n),this.context.addRestorable(this)}return e.prototype.getAttributes=function(){return this.attributes},e.prototype.maxVertices=function(){return this.vertices.length/this.elementsPerVertex},e.prototype.numVertices=function(){return this.verticesLength/this.elementsPerVertex},e.prototype.setVerticesLength=function(t){this.dirtyVertices=!0,this.verticesLength=t},e.prototype.getVertices=function(){return this.vertices},e.prototype.maxIndices=function(){return this.indices.length},e.prototype.numIndices=function(){return this.indicesLength},e.prototype.setIndicesLength=function(t){this.dirtyIndices=!0,this.indicesLength=t},e.prototype.getIndices=function(){return this.indices},e.prototype.getVertexSizeInFloats=function(){for(var t=0,e=0;e<this.attributes.length;e++)t+=this.attributes[e].numElements;return t},e.prototype.setVertices=function(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length},e.prototype.setIndices=function(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length},e.prototype.draw=function(t,e){this.drawWithOffset(t,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)},e.prototype.drawWithOffset=function(t,e,r,i){var n=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?n.drawElements(e,i,n.UNSIGNED_SHORT,2*r):n.drawArrays(e,r,i),this.unbind(t)},e.prototype.bind=function(t){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);for(var r=0,i=0;i<this.attributes.length;i++){var n=this.attributes[i],o=t.getAttributeLocation(n.name);e.enableVertexAttribArray(o),e.vertexAttribPointer(o,n.numElements,e.FLOAT,!1,4*this.elementsPerVertex,4*r),r+=n.numElements}this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)},e.prototype.unbind=function(t){for(var e=this.context.gl,r=0;r<this.attributes.length;r++){var i=this.attributes[r],n=t.getAttributeLocation(i.name);e.disableVertexAttribArray(n)}e.bindBuffer(e.ARRAY_BUFFER,null),this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)},e.prototype.update=function(){var t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)},e.prototype.restore=function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()},e.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)},e}();t.Mesh=e;var r=function(t,e,r){this.name=t,this.type=e,this.numElements=r};t.VertexAttribute=r;var i=function(e){function r(){return e.call(this,t.Shader.POSITION,h.Float,2)||this}return n(r,e),r}(r);t.Position2Attribute=i;var o=function(e){function r(){return e.call(this,t.Shader.POSITION,h.Float,3)||this}return n(r,e),r}(r);t.Position3Attribute=o;var s=function(e){function r(r){return void 0===r&&(r=0),e.call(this,t.Shader.TEXCOORDS+(0==r?"":r),h.Float,2)||this}return n(r,e),r}(r);t.TexCoordAttribute=s;var a=function(e){function r(){return e.call(this,t.Shader.COLOR,h.Float,4)||this}return n(r,e),r}(r);t.ColorAttribute=a;var h,u=function(e){function r(){return e.call(this,t.Shader.COLOR2,h.Float,4)||this}return n(r,e),r}(r);t.Color2Attribute=u,function(t){t[t.Float=0]="Float"}(h=t.VertexAttributeType||(t.VertexAttributeType={}))}(t.webgl||(t.webgl={}))}(i||(i={})),function(t){var e,r;e=t.webgl||(t.webgl={}),r=function(){function t(t,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=10920),this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,i>10920)throw new Error("Can't have more than 10920 triangles per batch: "+i);this.context=t instanceof e.ManagedWebGLRenderingContext?t:new e.ManagedWebGLRenderingContext(t);var n=r?[new e.Position2Attribute,new e.ColorAttribute,new e.TexCoordAttribute,new e.Color2Attribute]:[new e.Position2Attribute,new e.ColorAttribute,new e.TexCoordAttribute];this.mesh=new e.Mesh(t,n,i,3*i),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return t.prototype.begin=function(t){var e=this.context.gl;if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0,e.enable(e.BLEND),e.blendFunc(this.srcBlend,this.dstBlend)},t.prototype.setBlendMode=function(t,e){var r=this.context.gl;this.srcBlend=t,this.dstBlend=e,this.isDrawing&&(this.flush(),r.blendFunc(this.srcBlend,this.dstBlend))},t.prototype.draw=function(t,e,r){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+e.length>this.mesh.getVertices().length||this.indicesLength+r.length>this.mesh.getIndices().length)&&this.flush();var i=this.mesh.numVertices();this.mesh.getVertices().set(e,this.verticesLength),this.verticesLength+=e.length,this.mesh.setVerticesLength(this.verticesLength);for(var n=this.mesh.getIndices(),o=this.indicesLength,s=0;s<r.length;o++,s++)n[o]=r[s]+i;this.indicesLength+=r.length,this.mesh.setIndicesLength(this.indicesLength)},t.prototype.flush=function(){var t=this.context.gl;0!=this.verticesLength&&(this.lastTexture.bind(),this.mesh.draw(this.shader,t.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)},t.prototype.end=function(){var t=this.context.gl;if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1,t.disable(t.BLEND)},t.prototype.getDrawCalls=function(){return this.drawCalls},t.prototype.dispose=function(){this.mesh.dispose()},t}(),e.PolygonBatcher=r}(i||(i={})),function(t){var e,r,i;e=t.webgl||(t.webgl={}),i=function(){function i(r,i,n){void 0===n&&(n=!0),this.twoColorTint=!1,this.activeRenderer=null,this.QUAD=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],this.QUAD_TRIANGLES=[0,1,2,2,3,0],this.WHITE=new t.Color(1,1,1,1),this.canvas=r,this.context=i instanceof e.ManagedWebGLRenderingContext?i:new e.ManagedWebGLRenderingContext(i),this.twoColorTint=n,this.camera=new e.OrthoCamera(r.width,r.height),this.batcherShader=n?e.Shader.newTwoColoredTextured(this.context):e.Shader.newColoredTextured(this.context),this.batcher=new e.PolygonBatcher(this.context,n),this.shapesShader=e.Shader.newColored(this.context),this.shapes=new e.ShapeRenderer(this.context),this.skeletonRenderer=new e.SkeletonRenderer(this.context,n),this.skeletonDebugRenderer=new e.SkeletonDebugRenderer(this.context)}return i.prototype.begin=function(){this.camera.update(),this.enableRenderer(this.batcher)},i.prototype.drawSkeleton=function(t,e,r,i){void 0===e&&(e=!1),void 0===r&&(r=-1),void 0===i&&(i=-1),this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,t,r,i)},i.prototype.drawSkeletonDebug=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=null),this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,t,r)},i.prototype.drawTexture=function(t,e,r,i,n,o){void 0===o&&(o=null),this.enableRenderer(this.batcher),null===o&&(o=this.WHITE);var s=this.QUAD,a=0;s[a++]=e,s[a++]=r,s[a++]=o.r,s[a++]=o.g,s[a++]=o.b,s[a++]=o.a,s[a++]=0,s[a++]=1,this.twoColorTint&&(s[a++]=0,s[a++]=0,s[a++]=0,s[a++]=0),s[a++]=e+i,s[a++]=r,s[a++]=o.r,s[a++]=o.g,s[a++]=o.b,s[a++]=o.a,s[a++]=1,s[a++]=1,this.twoColorTint&&(s[a++]=0,s[a++]=0,s[a++]=0,s[a++]=0),s[a++]=e+i,s[a++]=r+n,s[a++]=o.r,s[a++]=o.g,s[a++]=o.b,s[a++]=o.a,s[a++]=1,s[a++]=0,this.twoColorTint&&(s[a++]=0,s[a++]=0,s[a++]=0,s[a++]=0),s[a++]=e,s[a++]=r+n,s[a++]=o.r,s[a++]=o.g,s[a++]=o.b,s[a++]=o.a,s[a++]=0,s[a++]=0,this.twoColorTint&&(s[a++]=0,s[a++]=0,s[a++]=0,s[a++]=0),this.batcher.draw(t,s,this.QUAD_TRIANGLES)},i.prototype.drawTextureUV=function(t,e,r,i,n,o,s,a,h,u){void 0===u&&(u=null),this.enableRenderer(this.batcher),null===u&&(u=this.WHITE);var c=this.QUAD,l=0;c[l++]=e,c[l++]=r,c[l++]=u.r,c[l++]=u.g,c[l++]=u.b,c[l++]=u.a,c[l++]=o,c[l++]=s,this.twoColorTint&&(c[l++]=0,c[l++]=0,c[l++]=0,c[l++]=0),c[l++]=e+i,c[l++]=r,c[l++]=u.r,c[l++]=u.g,c[l++]=u.b,c[l++]=u.a,c[l++]=a,c[l++]=s,this.twoColorTint&&(c[l++]=0,c[l++]=0,c[l++]=0,c[l++]=0),c[l++]=e+i,c[l++]=r+n,c[l++]=u.r,c[l++]=u.g,c[l++]=u.b,c[l++]=u.a,c[l++]=a,c[l++]=h,this.twoColorTint&&(c[l++]=0,c[l++]=0,c[l++]=0,c[l++]=0),c[l++]=e,c[l++]=r+n,c[l++]=u.r,c[l++]=u.g,c[l++]=u.b,c[l++]=u.a,c[l++]=o,c[l++]=h,this.twoColorTint&&(c[l++]=0,c[l++]=0,c[l++]=0,c[l++]=0),this.batcher.draw(t,c,this.QUAD_TRIANGLES)},i.prototype.drawTextureRotated=function(e,r,i,n,o,s,a,h,u,c){void 0===u&&(u=null),void 0===c&&(c=!1),this.enableRenderer(this.batcher),null===u&&(u=this.WHITE);var l=this.QUAD,f=r+s,p=i+a,d=-s,v=-a,y=n-s,g=o-a,m=d,x=v,b=d,w=g,E=y,T=g,S=y,_=v,O=0,P=0,M=0,A=0,L=0,C=0,R=0,k=0;if(0!=h){var F=t.MathUtils.cosDeg(h),I=t.MathUtils.sinDeg(h);M=(L=F*E-I*T)+((O=F*m-I*x)-(R=F*b-I*w)),A=(C=I*E+F*T)+((P=I*m+F*x)-(k=I*b+F*w))}else O=m,P=x,R=b,k=w,L=E,C=T,M=S,A=_;O+=f,P+=p,M+=f,A+=p,L+=f,C+=p,R+=f,k+=p;var D=0;l[D++]=O,l[D++]=P,l[D++]=u.r,l[D++]=u.g,l[D++]=u.b,l[D++]=u.a,l[D++]=0,l[D++]=1,this.twoColorTint&&(l[D++]=0,l[D++]=0,l[D++]=0,l[D++]=0),l[D++]=M,l[D++]=A,l[D++]=u.r,l[D++]=u.g,l[D++]=u.b,l[D++]=u.a,l[D++]=1,l[D++]=1,this.twoColorTint&&(l[D++]=0,l[D++]=0,l[D++]=0,l[D++]=0),l[D++]=L,l[D++]=C,l[D++]=u.r,l[D++]=u.g,l[D++]=u.b,l[D++]=u.a,l[D++]=1,l[D++]=0,this.twoColorTint&&(l[D++]=0,l[D++]=0,l[D++]=0,l[D++]=0),l[D++]=R,l[D++]=k,l[D++]=u.r,l[D++]=u.g,l[D++]=u.b,l[D++]=u.a,l[D++]=0,l[D++]=0,this.twoColorTint&&(l[D++]=0,l[D++]=0,l[D++]=0,l[D++]=0),this.batcher.draw(e,l,this.QUAD_TRIANGLES)},i.prototype.drawRegion=function(t,e,r,i,n,o,s){void 0===o&&(o=null),void 0===s&&(s=!1),this.enableRenderer(this.batcher),null===o&&(o=this.WHITE);var a=this.QUAD,h=0;a[h++]=e,a[h++]=r,a[h++]=o.r,a[h++]=o.g,a[h++]=o.b,a[h++]=o.a,a[h++]=t.u,a[h++]=t.v2,this.twoColorTint&&(a[h++]=0,a[h++]=0,a[h++]=0,a[h++]=0),a[h++]=e+i,a[h++]=r,a[h++]=o.r,a[h++]=o.g,a[h++]=o.b,a[h++]=o.a,a[h++]=t.u2,a[h++]=t.v2,this.twoColorTint&&(a[h++]=0,a[h++]=0,a[h++]=0,a[h++]=0),a[h++]=e+i,a[h++]=r+n,a[h++]=o.r,a[h++]=o.g,a[h++]=o.b,a[h++]=o.a,a[h++]=t.u2,a[h++]=t.v,this.twoColorTint&&(a[h++]=0,a[h++]=0,a[h++]=0,a[h++]=0),a[h++]=e,a[h++]=r+n,a[h++]=o.r,a[h++]=o.g,a[h++]=o.b,a[h++]=o.a,a[h++]=t.u,a[h++]=t.v,this.twoColorTint&&(a[h++]=0,a[h++]=0,a[h++]=0,a[h++]=0),this.batcher.draw(t.texture,a,this.QUAD_TRIANGLES)},i.prototype.line=function(t,e,r,i,n,o){void 0===n&&(n=null),void 0===o&&(o=null),this.enableRenderer(this.shapes),this.shapes.line(t,e,r,i,n)},i.prototype.triangle=function(t,e,r,i,n,o,s,a,h,u){void 0===a&&(a=null),void 0===h&&(h=null),void 0===u&&(u=null),this.enableRenderer(this.shapes),this.shapes.triangle(t,e,r,i,n,o,s,a,h,u)},i.prototype.quad=function(t,e,r,i,n,o,s,a,h,u,c,l,f){void 0===u&&(u=null),void 0===c&&(c=null),void 0===l&&(l=null),void 0===f&&(f=null),this.enableRenderer(this.shapes),this.shapes.quad(t,e,r,i,n,o,s,a,h,u,c,l,f)},i.prototype.rect=function(t,e,r,i,n,o){void 0===o&&(o=null),this.enableRenderer(this.shapes),this.shapes.rect(t,e,r,i,n,o)},i.prototype.rectLine=function(t,e,r,i,n,o,s){void 0===s&&(s=null),this.enableRenderer(this.shapes),this.shapes.rectLine(t,e,r,i,n,o,s)},i.prototype.polygon=function(t,e,r,i){void 0===i&&(i=null),this.enableRenderer(this.shapes),this.shapes.polygon(t,e,r,i)},i.prototype.circle=function(t,e,r,i,n,o){void 0===n&&(n=null),void 0===o&&(o=0),this.enableRenderer(this.shapes),this.shapes.circle(t,e,r,i,n,o)},i.prototype.curve=function(t,e,r,i,n,o,s,a,h,u){void 0===u&&(u=null),this.enableRenderer(this.shapes),this.shapes.curve(t,e,r,i,n,o,s,a,h,u)},i.prototype.end=function(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null},i.prototype.resize=function(t){var e=this.canvas,i=e.clientWidth,n=e.clientHeight;if(e.width==i&&e.height==n||(e.width=i,e.height=n),this.context.gl.viewport(0,0,e.width,e.height),t===r.Stretch);else if(t===r.Expand)this.camera.setViewport(i,n);else if(t===r.Fit){var o=e.width,s=e.height,a=this.camera.viewportWidth,h=this.camera.viewportHeight,u=h/a<s/o?a/o:h/s;this.camera.viewportWidth=o*u,this.camera.viewportHeight=s*u}this.camera.update()},i.prototype.enableRenderer=function(t){this.activeRenderer!==t&&(this.end(),t instanceof e.PolygonBatcher?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(e.Shader.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof e.ShapeRenderer?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(e.Shader.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)},i.prototype.dispose=function(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()},i}(),e.SceneRenderer=i,function(t){t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit"}(r=e.ResizeMode||(e.ResizeMode={}))}(i||(i={})),function(t){var e,r;e=t.webgl||(t.webgl={}),r=function(){function t(t,r,i){this.vertexShader=r,this.fragmentShader=i,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=r,this.fsSource=i,this.context=t instanceof e.ManagedWebGLRenderingContext?t:new e.ManagedWebGLRenderingContext(t),this.context.addRestorable(this),this.compile()}return t.prototype.getProgram=function(){return this.program},t.prototype.getVertexShader=function(){return this.vertexShader},t.prototype.getFragmentShader=function(){return this.fragmentShader},t.prototype.getVertexShaderSource=function(){return this.vsSource},t.prototype.getFragmentSource=function(){return this.fsSource},t.prototype.compile=function(){var t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(t){throw this.dispose(),t}},t.prototype.compileShader=function(t,e){var r=this.context.gl,i=r.createShader(t);if(r.shaderSource(i,e),r.compileShader(i),!r.getShaderParameter(i,r.COMPILE_STATUS)){var n="Couldn't compile shader: "+r.getShaderInfoLog(i);if(r.deleteShader(i),!r.isContextLost())throw new Error(n)}return i},t.prototype.compileProgram=function(t,e){var r=this.context.gl,i=r.createProgram();if(r.attachShader(i,t),r.attachShader(i,e),r.linkProgram(i),!r.getProgramParameter(i,r.LINK_STATUS)){var n="Couldn't compile shader program: "+r.getProgramInfoLog(i);if(r.deleteProgram(i),!r.isContextLost())throw new Error(n)}return i},t.prototype.restore=function(){this.compile()},t.prototype.bind=function(){this.context.gl.useProgram(this.program)},t.prototype.unbind=function(){this.context.gl.useProgram(null)},t.prototype.setUniformi=function(t,e){this.context.gl.uniform1i(this.getUniformLocation(t),e)},t.prototype.setUniformf=function(t,e){this.context.gl.uniform1f(this.getUniformLocation(t),e)},t.prototype.setUniform2f=function(t,e,r){this.context.gl.uniform2f(this.getUniformLocation(t),e,r)},t.prototype.setUniform3f=function(t,e,r,i){this.context.gl.uniform3f(this.getUniformLocation(t),e,r,i)},t.prototype.setUniform4f=function(t,e,r,i,n){this.context.gl.uniform4f(this.getUniformLocation(t),e,r,i,n)},t.prototype.setUniform2x2f=function(t,e){var r=this.context.gl;this.tmp2x2.set(e),r.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)},t.prototype.setUniform3x3f=function(t,e){var r=this.context.gl;this.tmp3x3.set(e),r.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)},t.prototype.setUniform4x4f=function(t,e){var r=this.context.gl;this.tmp4x4.set(e),r.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)},t.prototype.getUniformLocation=function(t){var e=this.context.gl,r=e.getUniformLocation(this.program,t);if(!r&&!e.isContextLost())throw new Error("Couldn't find location for uniform ".concat(t));return r},t.prototype.getAttributeLocation=function(t){var e=this.context.gl,r=e.getAttribLocation(this.program,t);if(-1==r&&!e.isContextLost())throw new Error("Couldn't find location for attribute ".concat(t));return r},t.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)},t.newColoredTextured=function(e){return new t(e,"\n\t\t\t\tattribute vec4 ".concat(t.POSITION,";\n\t\t\t\tattribute vec4 ").concat(t.COLOR,";\n\t\t\t\tattribute vec2 ").concat(t.TEXCOORDS,";\n\t\t\t\tuniform mat4 ").concat(t.MVP_MATRIX,";\n\t\t\t\tvarying vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = ").concat(t.COLOR,";\n\t\t\t\t\tv_texCoords = ").concat(t.TEXCOORDS,";\n\t\t\t\t\tgl_Position = ").concat(t.MVP_MATRIX," * ").concat(t.POSITION,";\n\t\t\t\t}\n\t\t\t"),"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n\t\t\t\t}\n\t\t\t")},t.newTwoColoredTextured=function(e){return new t(e,"\n\t\t\t\tattribute vec4 ".concat(t.POSITION,";\n\t\t\t\tattribute vec4 ").concat(t.COLOR,";\n\t\t\t\tattribute vec4 ").concat(t.COLOR2,";\n\t\t\t\tattribute vec2 ").concat(t.TEXCOORDS,";\n\t\t\t\tuniform mat4 ").concat(t.MVP_MATRIX,";\n\t\t\t\tvarying vec4 v_light;\n\t\t\t\tvarying vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_light = ").concat(t.COLOR,";\n\t\t\t\t\tv_dark = ").concat(t.COLOR2,";\n\t\t\t\t\tv_texCoords = ").concat(t.TEXCOORDS,";\n\t\t\t\t\tgl_Position = ").concat(t.MVP_MATRIX," * ").concat(t.POSITION,";\n\t\t\t\t}\n\t\t\t"),"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_light;\n\t\t\t\tvarying LOWP vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\t\t\t\t\tgl_FragColor.a = texColor.a * v_light.a;\n\t\t\t\t\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n\t\t\t\t}\n\t\t\t")},t.newColored=function(e){return new t(e,"\n\t\t\t\tattribute vec4 ".concat(t.POSITION,";\n\t\t\t\tattribute vec4 ").concat(t.COLOR,";\n\t\t\t\tuniform mat4 ").concat(t.MVP_MATRIX,";\n\t\t\t\tvarying vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = ").concat(t.COLOR,";\n\t\t\t\t\tgl_Position = ").concat(t.MVP_MATRIX," * ").concat(t.POSITION,";\n\t\t\t\t}\n\t\t\t"),"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color;\n\t\t\t\t}\n\t\t\t")},t.MVP_MATRIX="u_projTrans",t.POSITION="a_position",t.COLOR="a_color",t.COLOR2="a_color2",t.TEXCOORDS="a_texCoords",t.SAMPLER="u_texture",t}(),e.Shader=r}(i||(i={})),function(t){var e,r,i;e=t.webgl||(t.webgl={}),i=function(){function i(i,n){if(void 0===n&&(n=10920),this.isDrawing=!1,this.shapeType=r.Filled,this.color=new t.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new t.Vector2,n>10920)throw new Error("Can't have more than 10920 triangles per batch: "+n);this.context=i instanceof e.ManagedWebGLRenderingContext?i:new e.ManagedWebGLRenderingContext(i),this.mesh=new e.Mesh(i,[new e.Position2Attribute,new e.ColorAttribute],n,0),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return i.prototype.begin=function(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;var e=this.context.gl;e.enable(e.BLEND),e.blendFunc(this.srcBlend,this.dstBlend)},i.prototype.setBlendMode=function(t,e){var r=this.context.gl;this.srcBlend=t,this.dstBlend=e,this.isDrawing&&(this.flush(),r.blendFunc(this.srcBlend,this.dstBlend))},i.prototype.setColor=function(t){this.color.setFromColor(t)},i.prototype.setColorWith=function(t,e,r,i){this.color.set(t,e,r,i)},i.prototype.point=function(t,e,i){void 0===i&&(i=null),this.check(r.Point,1),null===i&&(i=this.color),this.vertex(t,e,i)},i.prototype.line=function(t,e,i,n,o){void 0===o&&(o=null),this.check(r.Line,2),this.mesh.getVertices(),this.vertexIndex,null===o&&(o=this.color),this.vertex(t,e,o),this.vertex(i,n,o)},i.prototype.triangle=function(t,e,i,n,o,s,a,h,u,c){void 0===h&&(h=null),void 0===u&&(u=null),void 0===c&&(c=null),this.check(t?r.Filled:r.Line,3),this.mesh.getVertices(),this.vertexIndex,null===h&&(h=this.color),null===u&&(u=this.color),null===c&&(c=this.color),t?(this.vertex(e,i,h),this.vertex(n,o,u),this.vertex(s,a,c)):(this.vertex(e,i,h),this.vertex(n,o,u),this.vertex(n,o,h),this.vertex(s,a,u),this.vertex(s,a,h),this.vertex(e,i,u))},i.prototype.quad=function(t,e,i,n,o,s,a,h,u,c,l,f,p){void 0===c&&(c=null),void 0===l&&(l=null),void 0===f&&(f=null),void 0===p&&(p=null),this.check(t?r.Filled:r.Line,3),this.mesh.getVertices(),this.vertexIndex,null===c&&(c=this.color),null===l&&(l=this.color),null===f&&(f=this.color),null===p&&(p=this.color),t?(this.vertex(e,i,c),this.vertex(n,o,l),this.vertex(s,a,f),this.vertex(s,a,f),this.vertex(h,u,p),this.vertex(e,i,c)):(this.vertex(e,i,c),this.vertex(n,o,l),this.vertex(n,o,l),this.vertex(s,a,f),this.vertex(s,a,f),this.vertex(h,u,p),this.vertex(h,u,p),this.vertex(e,i,c))},i.prototype.rect=function(t,e,r,i,n,o){void 0===o&&(o=null),this.quad(t,e,r,e+i,r,e+i,r+n,e,r+n,o,o,o,o)},i.prototype.rectLine=function(t,e,i,n,o,s,a){void 0===a&&(a=null),this.check(t?r.Filled:r.Line,8),null===a&&(a=this.color);var h=this.tmp.set(o-i,e-n);h.normalize(),s*=.5;var u=h.x*s,c=h.y*s;t?(this.vertex(e+u,i+c,a),this.vertex(e-u,i-c,a),this.vertex(n+u,o+c,a),this.vertex(n-u,o-c,a),this.vertex(n+u,o+c,a),this.vertex(e-u,i-c,a)):(this.vertex(e+u,i+c,a),this.vertex(e-u,i-c,a),this.vertex(n+u,o+c,a),this.vertex(n-u,o-c,a),this.vertex(n+u,o+c,a),this.vertex(e+u,i+c,a),this.vertex(n-u,o-c,a),this.vertex(e-u,i-c,a))},i.prototype.x=function(t,e,r){this.line(t-r,e-r,t+r,e+r),this.line(t-r,e+r,t+r,e-r)},i.prototype.polygon=function(t,e,i,n){if(void 0===n&&(n=null),i<3)throw new Error("Polygon must contain at least 3 vertices");this.check(r.Line,2*i),null===n&&(n=this.color),this.mesh.getVertices(),this.vertexIndex,i<<=1;for(var o=t[e<<=1],s=t[e+1],a=e+i,h=e,u=e+i-2;h<u;h+=2){var c=t[h],l=t[h+1],f=0,p=0;h+2>=a?(f=o,p=s):(f=t[h+2],p=t[h+3]),this.vertex(c,l,n),this.vertex(f,p,n)}},i.prototype.circle=function(e,i,n,o,s,a){if(void 0===s&&(s=null),void 0===a&&(a=0),0===a&&(a=Math.max(1,6*t.MathUtils.cbrt(o)|0)),a<=0)throw new Error("segments must be > 0.");null===s&&(s=this.color);var h=2*t.MathUtils.PI/a,u=Math.cos(h),c=Math.sin(h),l=o,f=0;if(e){for(this.check(r.Filled,3*a+3),a--,d=0;d<a;d++){this.vertex(i,n,s),this.vertex(i+l,n+f,s);var p=l;l=u*l-c*f,f=c*p+u*f,this.vertex(i+l,n+f,s)}this.vertex(i,n,s),this.vertex(i+l,n+f,s)}else{this.check(r.Line,2*a+2);for(var d=0;d<a;d++){this.vertex(i+l,n+f,s);var v=l;l=u*l-c*f,f=c*v+u*f,this.vertex(i+l,n+f,s)}this.vertex(i+l,n+f,s)}l=o,f=0,this.vertex(i+l,n+f,s)},i.prototype.curve=function(t,e,i,n,o,s,a,h,u,c){void 0===c&&(c=null),this.check(r.Line,2*u+2),null===c&&(c=this.color);for(var l=1/u,f=l*l,p=l*l*l,d=3*l,v=3*f,y=6*f,g=6*p,m=t-2*i+o,x=e-2*n+s,b=3*(i-o)-t+a,w=3*(n-s)-e+h,E=t,T=e,S=(i-t)*d+m*v+b*p,_=(n-e)*d+x*v+w*p,O=m*y+b*g,P=x*y+w*g,M=b*g,A=w*g;u-- >0;)this.vertex(E,T,c),E+=S,T+=_,S+=O,_+=P,O+=M,P+=A,this.vertex(E,T,c);this.vertex(E,T,c),this.vertex(a,h,c)},i.prototype.vertex=function(t,e,r){var i=this.vertexIndex,n=this.mesh.getVertices();n[i++]=t,n[i++]=e,n[i++]=r.r,n[i++]=r.g,n[i++]=r.b,n[i++]=r.a,this.vertexIndex=i},i.prototype.end=function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush(),this.context.gl.disable(this.context.gl.BLEND),this.isDrawing=!1},i.prototype.flush=function(){0!=this.vertexIndex&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)},i.prototype.check=function(t,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<e))return;this.flush()}else this.flush(),this.shapeType=t},i.prototype.dispose=function(){this.mesh.dispose()},i}(),e.ShapeRenderer=i,function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled"}(r=e.ShapeType||(e.ShapeType={}))}(i||(i={})),function(t){var e,r;e=t.webgl||(t.webgl={}),r=function(){function r(r){this.boneLineColor=new t.Color(1,0,0,1),this.boneOriginColor=new t.Color(0,1,0,1),this.attachmentLineColor=new t.Color(0,0,1,.5),this.triangleLineColor=new t.Color(1,.64,0,.5),this.pathColor=(new t.Color).setFromString("FF7F00"),this.clipColor=new t.Color(.8,0,0,2),this.aabbColor=new t.Color(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new t.SkeletonBounds,this.temp=new Array,this.vertices=t.Utils.newFloatArray(2048),this.context=r instanceof e.ManagedWebGLRenderingContext?r:new e.ManagedWebGLRenderingContext(r)}return r.prototype.draw=function(e,i,n){void 0===n&&(n=null);var o=i.x,s=i.y,a=this.context.gl,h=this.premultipliedAlpha?a.ONE:a.SRC_ALPHA;e.setBlendMode(h,a.ONE_MINUS_SRC_ALPHA);var u=i.bones;if(this.drawBones){e.setColor(this.boneLineColor);for(var c=0,l=u.length;c<l;c++){var f=u[c];if(!(n&&n.indexOf(f.data.name)>-1)&&null!=f.parent){var p=o+f.data.length*f.a+f.worldX,d=s+f.data.length*f.c+f.worldY;e.rectLine(!0,o+f.worldX,s+f.worldY,p,d,this.boneWidth*this.scale)}}this.drawSkeletonXY&&e.x(o,s,4*this.scale)}if(this.drawRegionAttachments)for(e.setColor(this.attachmentLineColor),c=0,l=(Y=i.slots).length;c<l;c++)if((X=(z=Y[c]).getAttachment())instanceof t.RegionAttachment){var v=X,y=this.vertices;v.computeWorldVertices(z.bone,y,0,2),e.line(y[0],y[1],y[2],y[3]),e.line(y[2],y[3],y[4],y[5]),e.line(y[4],y[5],y[6],y[7]),e.line(y[6],y[7],y[0],y[1])}if(this.drawMeshHull||this.drawMeshTriangles)for(c=0,l=(Y=i.slots).length;c<l;c++)if((z=Y[c]).bone.active&&(X=z.getAttachment())instanceof t.MeshAttachment){var g=X;y=this.vertices,g.computeWorldVertices(z,0,g.worldVerticesLength,y,0,2);var m=g.triangles,x=g.hullLength;if(this.drawMeshTriangles){e.setColor(this.triangleLineColor);for(var b=0,w=m.length;b<w;b+=3){var E=2*m[b],T=2*m[b+1],S=2*m[b+2];e.triangle(!1,y[E],y[E+1],y[T],y[T+1],y[S],y[S+1])}}if(this.drawMeshHull&&x>0){e.setColor(this.attachmentLineColor);var _=y[(x=2*(x>>1))-2],O=y[x-1];for(b=0,w=x;b<w;b+=2)p=y[b],d=y[b+1],e.line(p,d,_,O),_=p,O=d}}if(this.drawBoundingBoxes){var P=this.bounds;P.update(i,!0),e.setColor(this.aabbColor),e.rect(!1,P.minX,P.minY,P.getWidth(),P.getHeight());var M=P.polygons,A=P.boundingBoxes;for(c=0,l=M.length;c<l;c++){var L=M[c];e.setColor(A[c].color),e.polygon(L,0,L.length)}}if(this.drawPaths)for(c=0,l=(Y=i.slots).length;c<l;c++)if((z=Y[c]).bone.active&&(X=z.getAttachment())instanceof t.PathAttachment){var C=X,R=(w=C.worldVerticesLength,this.temp=t.Utils.setArraySize(this.temp,w,0));C.computeWorldVertices(z,0,w,R,0,2);var k=this.pathColor,F=R[2],I=R[3],D=0,j=0;if(C.closed){e.setColor(k);var B=R[0],N=R[1],G=R[w-2],U=R[w-1];D=R[w-4],j=R[w-3],e.curve(F,I,B,N,G,U,D,j,32),e.setColor(r.LIGHT_GRAY),e.line(F,I,B,N),e.line(D,j,G,U)}for(w-=4,b=4;b<w;b+=6)B=R[b],N=R[b+1],G=R[b+2],U=R[b+3],D=R[b+4],j=R[b+5],e.setColor(k),e.curve(F,I,B,N,G,U,D,j,32),e.setColor(r.LIGHT_GRAY),e.line(F,I,B,N),e.line(D,j,G,U),F=D,I=j}if(this.drawBones)for(e.setColor(this.boneOriginColor),c=0,l=u.length;c<l;c++)f=u[c],n&&n.indexOf(f.data.name)>-1||e.circle(!0,o+f.worldX,s+f.worldY,3*this.scale,r.GREEN,8);if(this.drawClipping){var Y=i.slots;for(e.setColor(this.clipColor),c=0,l=Y.length;c<l;c++){var z,X;if((z=Y[c]).bone.active&&(X=z.getAttachment())instanceof t.ClippingAttachment){var V=X;w=V.worldVerticesLength,R=this.temp=t.Utils.setArraySize(this.temp,w,0),V.computeWorldVertices(z,0,w,R,0,2);for(var W=0,H=R.length;W<H;W+=2)p=R[W],d=R[W+1],D=R[(W+2)%R.length],j=R[(W+3)%R.length],e.line(p,d,D,j)}}}},r.prototype.dispose=function(){},r.LIGHT_GRAY=new t.Color(192/255,192/255,192/255,1),r.GREEN=new t.Color(0,1,0,1),r}(),e.SkeletonDebugRenderer=r}(i||(i={})),function(t){var e,r,i;e=t.webgl||(t.webgl={}),r=function(t,e,r){this.vertices=t,this.numVertices=e,this.numFloats=r},i=function(){function i(e,i){void 0===i&&(i=!0),this.premultipliedAlpha=!1,this.vertexEffect=null,this.tempColor=new t.Color,this.tempColor2=new t.Color,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new r(null,0,0),this.clipper=new t.SkeletonClipping,this.temp=new t.Vector2,this.temp2=new t.Vector2,this.temp3=new t.Color,this.temp4=new t.Color,this.twoColorTint=i,i&&(this.vertexSize+=4),this.vertices=t.Utils.newFloatArray(1024*this.vertexSize)}return i.prototype.draw=function(r,n,o,s){void 0===o&&(o=-1),void 0===s&&(s=-1);var a=this.clipper,h=this.premultipliedAlpha,u=this.twoColorTint,c=null,l=this.temp,f=this.temp2,p=this.temp3,d=this.temp4,v=this.renderable,y=null,g=null,m=n.drawOrder,x=null,b=n.color,w=u?12:8,E=!1;-1==o&&(E=!0);for(var T=0,S=m.length;T<S;T++){var _=a.isClipping()?2:w,O=m[T];if(O.bone.active)if(o>=0&&o==O.data.index&&(E=!0),E){s>=0&&s==O.data.index&&(E=!1);var P=O.getAttachment(),M=null;if(P instanceof t.RegionAttachment){var A=P;v.vertices=this.vertices,v.numVertices=4,v.numFloats=_<<2,A.computeWorldVertices(O.bone,v.vertices,0,_),g=i.QUAD_TRIANGLES,y=A.uvs,M=A.region.renderObject.texture,x=A.color}else{if(!(P instanceof t.MeshAttachment)){if(P instanceof t.ClippingAttachment){var L=P;a.clipStart(O,L);continue}a.clipEndWithSlot(O);continue}var C=P;v.vertices=this.vertices,v.numVertices=C.worldVerticesLength>>1,v.numFloats=v.numVertices*_,v.numFloats>v.vertices.length&&(v.vertices=this.vertices=t.Utils.newFloatArray(v.numFloats)),C.computeWorldVertices(O,0,C.worldVerticesLength,v.vertices,0,_),g=C.triangles,M=C.region.renderObject.texture,y=C.uvs,x=C.color}if(null!=M){var R=O.color,k=this.tempColor;k.r=b.r*R.r*x.r,k.g=b.g*R.g*x.g,k.b=b.b*R.b*x.b,k.a=b.a*R.a*x.a,h&&(k.r*=k.a,k.g*=k.a,k.b*=k.a);var F=this.tempColor2;null==O.darkColor?F.set(0,0,0,1):(h?(F.r=O.darkColor.r*k.a,F.g=O.darkColor.g*k.a,F.b=O.darkColor.b*k.a):F.setFromColor(O.darkColor),F.a=h?1:0);var I=O.data.blendMode;if(I!=c&&(c=I,r.setBlendMode(e.WebGLBlendModeConverter.getSourceGLBlendMode(c,h),e.WebGLBlendModeConverter.getDestGLBlendMode(c))),a.isClipping()){a.clipTriangles(v.vertices,v.numFloats,g,g.length,y,k,F,u);var D=new Float32Array(a.clippedVertices),j=a.clippedTriangles;if(null!=this.vertexEffect){var B=this.vertexEffect,N=D;if(u){U=0;for(var G=D.length;U<G;U+=w)l.x=N[U],l.y=N[U+1],p.set(N[U+2],N[U+3],N[U+4],N[U+5]),f.x=N[U+6],f.y=N[U+7],d.set(N[U+8],N[U+9],N[U+10],N[U+11]),B.transform(l,f,p,d),N[U]=l.x,N[U+1]=l.y,N[U+2]=p.r,N[U+3]=p.g,N[U+4]=p.b,N[U+5]=p.a,N[U+6]=f.x,N[U+7]=f.y,N[U+8]=d.r,N[U+9]=d.g,N[U+10]=d.b,N[U+11]=d.a}else for(var U=0,Y=D.length;U<Y;U+=w)l.x=N[U],l.y=N[U+1],p.set(N[U+2],N[U+3],N[U+4],N[U+5]),f.x=N[U+6],f.y=N[U+7],d.set(0,0,0,0),B.transform(l,f,p,d),N[U]=l.x,N[U+1]=l.y,N[U+2]=p.r,N[U+3]=p.g,N[U+4]=p.b,N[U+5]=p.a,N[U+6]=f.x,N[U+7]=f.y}r.draw(M,D,j)}else{if(N=v.vertices,null!=this.vertexEffect)if(B=this.vertexEffect,u){U=0,X=0;for(var z=v.numFloats;U<z;U+=w,X+=2)l.x=N[U],l.y=N[U+1],f.x=y[X],f.y=y[X+1],p.setFromColor(k),d.setFromColor(F),B.transform(l,f,p,d),N[U]=l.x,N[U+1]=l.y,N[U+2]=p.r,N[U+3]=p.g,N[U+4]=p.b,N[U+5]=p.a,N[U+6]=f.x,N[U+7]=f.y,N[U+8]=d.r,N[U+9]=d.g,N[U+10]=d.b,N[U+11]=d.a}else{U=0;for(var X=0,V=v.numFloats;U<V;U+=w,X+=2)l.x=N[U],l.y=N[U+1],f.x=y[X],f.y=y[X+1],p.setFromColor(k),d.set(0,0,0,0),B.transform(l,f,p,d),N[U]=l.x,N[U+1]=l.y,N[U+2]=p.r,N[U+3]=p.g,N[U+4]=p.b,N[U+5]=p.a,N[U+6]=f.x,N[U+7]=f.y}else if(u){U=2,X=0;for(var W=v.numFloats;U<W;U+=w,X+=2)N[U]=k.r,N[U+1]=k.g,N[U+2]=k.b,N[U+3]=k.a,N[U+4]=y[X],N[U+5]=y[X+1],N[U+6]=F.r,N[U+7]=F.g,N[U+8]=F.b,N[U+9]=F.a}else{U=2,X=0;for(var H=v.numFloats;U<H;U+=w,X+=2)N[U]=k.r,N[U+1]=k.g,N[U+2]=k.b,N[U+3]=k.a,N[U+4]=y[X],N[U+5]=y[X+1]}var q=v.vertices.subarray(0,v.numFloats);r.draw(M,q,g)}}a.clipEndWithSlot(O)}else a.clipEndWithSlot(O);else a.clipEndWithSlot(O)}a.clipEnd()},i.QUAD_TRIANGLES=[0,1,2,2,3,0],i}(),e.SkeletonRenderer=i}(i||(i={})),function(t){var e,r;e=t.webgl||(t.webgl={}),r=function(){function t(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=r}return t.prototype.setFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},t.prototype.set=function(t,e,r){return this.x=t,this.y=e,this.z=r,this},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},t.prototype.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},t.prototype.normalize=function(){var t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this},t.prototype.cross=function(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},t.prototype.multiply=function(t){var r=t.values;return this.set(this.x*r[e.M00]+this.y*r[e.M01]+this.z*r[e.M02]+r[e.M03],this.x*r[e.M10]+this.y*r[e.M11]+this.z*r[e.M12]+r[e.M13],this.x*r[e.M20]+this.y*r[e.M21]+this.z*r[e.M22]+r[e.M23])},t.prototype.project=function(t){var r=t.values,i=1/(this.x*r[e.M30]+this.y*r[e.M31]+this.z*r[e.M32]+r[e.M33]);return this.set((this.x*r[e.M00]+this.y*r[e.M01]+this.z*r[e.M02]+r[e.M03])*i,(this.x*r[e.M10]+this.y*r[e.M11]+this.z*r[e.M12]+r[e.M13])*i,(this.x*r[e.M20]+this.y*r[e.M21]+this.z*r[e.M22]+r[e.M23])*i)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.distance=function(t){var e=t.x-this.x,r=t.y-this.y,i=t.z-this.z;return Math.sqrt(e*e+r*r+i*i)},t}(),e.Vector3=r}(i||(i={})),function(t){!function(e){var r=function(){function t(t,e){void 0===e&&(e={alpha:"true"}),this.restorables=new Array,t instanceof WebGLRenderingContext||t instanceof WebGL2RenderingContext?(this.gl=t,this.canvas=this.gl.canvas):this.setupCanvas(t,e)}return t.prototype.setupCanvas=function(t,e){var r=this;this.gl=t.getContext("webgl2",e)||t.getContext("webgl",e),this.canvas=t,t.addEventListener("webglcontextlost",(function(t){t&&t.preventDefault()})),t.addEventListener("webglcontextrestored",(function(t){for(var e=0,i=r.restorables.length;e<i;e++)r.restorables[e].restore()}))},t.prototype.addRestorable=function(t){this.restorables.push(t)},t.prototype.removeRestorable=function(t){var e=this.restorables.indexOf(t);e>-1&&this.restorables.splice(e,1)},t}();e.ManagedWebGLRenderingContext=r;var i=function(){function e(){}return e.getDestGLBlendMode=function(r){switch(r){case t.BlendMode.Normal:return e.ONE_MINUS_SRC_ALPHA;case t.BlendMode.Additive:return e.ONE;case t.BlendMode.Multiply:case t.BlendMode.Screen:return e.ONE_MINUS_SRC_ALPHA;default:throw new Error("Unknown blend mode: "+r)}},e.getSourceGLBlendMode=function(r,i){switch(void 0===i&&(i=!1),r){case t.BlendMode.Normal:case t.BlendMode.Additive:return i?e.ONE:e.SRC_ALPHA;case t.BlendMode.Multiply:return e.DST_COLOR;case t.BlendMode.Screen:return e.ONE;default:throw new Error("Unknown blend mode: "+r)}},e.ZERO=0,e.ONE=1,e.SRC_COLOR=768,e.ONE_MINUS_SRC_COLOR=769,e.SRC_ALPHA=770,e.ONE_MINUS_SRC_ALPHA=771,e.DST_ALPHA=772,e.ONE_MINUS_DST_ALPHA=773,e.DST_COLOR=774,e}();e.WebGLBlendModeConverter=i}(t.webgl||(t.webgl={}))}(i||(i={})),t.exports=i}).call(window)},3524:(t,e,r)=>{var i=r(7473),n=r(4597),o=r(6732),s=r(2482),a=r(704),h=r(3137),u=r(1192),c=new i({Extends:h,initialize:function(t,e,r,i,o,c,l){var f,p,d,v=[],y=t.cacheManager.custom.spine;if(s(e)){var g=e;for(e=n(g,"key"),p=new a(t,{key:e,url:n(g,"jsonURL"),extension:n(g,"jsonExtension","json"),xhrSettings:n(g,"jsonXhrSettings")}),i=n(g,"atlasURL"),o=n(g,"preMultipliedAlpha"),Array.isArray(i)||(i=[i]),f=0;f<i.length;f++)(d=new u(t,{key:e+"!"+f,url:i[f],extension:n(g,"atlasExtension","atlas"),xhrSettings:n(g,"atlasXhrSettings")})).cache=y,v.push(d)}else for(p=new a(t,e,r,c),Array.isArray(i)||(i=[i]),f=0;f<i.length;f++)(d=new u(t,e+"!"+f,i[f],l)).cache=y,v.push(d);v.unshift(p),h.call(this,t,"spine",e,v),this.config.preMultipliedAlpha=o},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"text"===t.type)){for(var e=t.data.split("\n"),r=[],i=0;i<e.length;i++){var s=e[i];""===s.trim()&&i<e.length-1&&(s=e[i+1],r.push(s))}var a=this.config,h=this.loader,u=h.baseURL,c=h.path,l=h.prefix,f=n(a,"baseURL",this.baseURL),p=n(a,"path",t.src.match(/^.*\//))[0],d=n(a,"prefix",this.prefix),v=n(a,"textureXhrSettings");h.setBaseURL(f),h.setPath(p),h.setPrefix(d);for(var y=0;y<r.length;y++){var g=r[y],m=this.key+":"+g,x=new o(h,m,g,v);h.keyExists(x)||(this.addToMultiFile(x),h.addFile(x))}h.setBaseURL(u),h.setPath(c),h.setPrefix(l)}},addToCache:function(){if(this.isReadyToProcess()){var t;this.files[0].addToCache();for(var e="",r="",i=!!this.config.preMultipliedAlpha,n=this.loader.textureManager,o=1;o<this.files.length;o++){var s=this.files[o];if("text"===s.type)e=s.key.replace(/![\d]$/,""),t=s.cache,r=r.concat(s.data);else{var a=s.key.trim(),h=a.indexOf("!"),u=a.substr(h+1);n.exists(u)||n.addImage(u,s.data)}s.pendingDestroy()}t.add(e,{preMultipliedAlpha:i,data:r,prefix:this.prefix}),this.complete=!0}}});t.exports=c},4513:(t,e,r)=>{var i=r(2494),n=r(7473),o=r(5851),s=r(3527),a=r(5722),h=r(1847),u=r(3524),c=r(8332),l=r(5782),f=r(1984),p=new n({Extends:a,initialize:function(t,e,r){a.call(this,t,e,r);var n=e.game;this.isWebGL=2===n.config.renderType,this.cache=n.cache.addCustom("spine"),this.spineTextures=n.cache.addCustom("spineTextures"),this.json=n.cache.json,this.textures=n.textures,this.drawDebug=!1,this.gl,this.renderer,this.sceneRenderer,this.skeletonRenderer,this.skeletonDebugRenderer,this.plugin=h,this.temp1,this.temp2,this.isWebGL?(this.runtime=h.webgl,this.renderer=n.renderer,this.gl=n.renderer.gl,this.getAtlas=this.getAtlasWebGL):(this.runtime=h.canvas,this.renderer=n.renderer,this.getAtlas=this.getAtlasCanvas),this.renderer||(this.renderer={width:n.scale.width,height:n.scale.height,preRender:f,postRender:f,render:f,destroy:f});var s=this.isWebGL;e.registerFileType("spine",this.spineFileCallback,t),e.registerGameObject("spine",(function(t,e,i,n,o){s&&this.scene.sys.renderer.pipelines.clear();var a=this.scene.sys[r],h=new c(this.scene,a,t,e,i,n,o);return this.displayList.add(h),this.updateList.add(h),s&&this.scene.sys.renderer.pipelines.rebind(),h}),(function(t,e){void 0===t&&(t={}),s&&this.scene.sys.renderer.pipelines.clear();var n=o(t,"key",null),a=o(t,"animationName",null),h=o(t,"loop",!1),u=this.scene.sys[r],l=new c(this.scene,u,0,0,n,a,h);void 0!==e&&(t.add=e),i(this.scene,l,t);var f=o(t,"skinName",!1);f&&l.setSkinByName(f);var p=o(t,"slotName",!1),d=o(t,"attachmentName",null);return p&&l.setAttachment(p,d),s&&this.scene.sys.renderer.pipelines.rebind(),l.refresh()})),e.registerGameObject("spineContainer",(function(t,e,i){var n=this.scene.sys[r],o=new l(this.scene,n,t,e,i);return this.displayList.add(o),o}),(function(t,e){void 0===t&&(t={});var n=o(t,"x",0),s=o(t,"y",0),a=o(t,"children",null),h=this.scene.sys[r],u=new l(this.scene,h,n,s,a);return void 0!==e&&(t.add=e),i(this.scene,u,t),u}))},boot:function(){this.isWebGL?(this.bootWebGL(),this.onResize(),this.game.scale.on(s,this.onResize,this)):this.bootCanvas();var t=this.systems.events;t.once("shutdown",this.shutdown,this),t.once("destroy",this.destroy,this),this.game.events.once("destroy",this.gameDestroy,this)},bootCanvas:function(){this.skeletonRenderer=new h.canvas.SkeletonRenderer(this.scene.sys.context)},bootWebGL:function(){var t=function(t,e){if(t!==this.srcBlend||e!==this.dstBlend){var r=this.context.gl;this.srcBlend=t,this.dstBlend=e,this.isDrawing&&(this.flush(),r.blendFunc(this.srcBlend,this.dstBlend))}},e=this.renderer.spineSceneRenderer;e||((e=new h.webgl.SceneRenderer(this.renderer.canvas,this.gl,!0)).batcher.setBlendMode=t,e.shapes.setBlendMode=t,this.renderer.spineSceneRenderer=e),this.sceneRenderer=e,this.skeletonRenderer=e.skeletonRenderer,this.skeletonDebugRenderer=e.skeletonDebugRenderer,this.temp1=new h.webgl.Vector3(0,0,0),this.temp2=new h.webgl.Vector3(0,0,0)},getAtlasCanvas:function(t){var e=this.cache.get(t);if(e){var r,i=this.spineTextures;if(i.has(t))r=i.get(t);else{var n=this.textures;r=new h.TextureAtlas(e.data,(function(r){return new h.canvas.CanvasTexture(n.get(e.prefix+t+":"+r).getSourceImage())}))}return r}console.warn("No atlas data for: "+t)},getAtlasWebGL:function(t){var e=this.cache.get(t);if(e){var r,i=this.spineTextures;if(i.has(t))r=i.get(t);else{var n=this.textures,o=this.sceneRenderer.context.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r=new h.TextureAtlas(e.data,(function(r){return new h.webgl.GLTexture(o,n.get(e.prefix+t+":"+r).getSourceImage(),!1)}))}return r}console.warn("No atlas data for: "+t)},spineFileCallback:function(t,e,r,i,n,o,s){var a;if(s=s||{},Array.isArray(t))for(var h=0;h<t.length;h++)(a=new u(this,t[h])).prefix=a.prefix||s.prefix||"",this.addFile(a.files);else(a=new u(this,t,e,r,i,n,o)).prefix=a.prefix||s.prefix||"",this.addFile(a.files);return this},worldToLocal:function(t,e,r,i){var n=this.temp1,o=this.temp2,s=this.sceneRenderer.camera;n.set(t+r.x,e-r.y,0);var a=s.viewportWidth,u=s.viewportHeight;return s.screenToWorld(n,a,u),i&&null!==i.parent?(i.parent.worldToLocal(o.set(n.x-r.x,n.y-r.y,0)),new h.Vector2(o.x,o.y)):i?new h.Vector2(n.x-r.x,n.y-r.y):new h.Vector2(n.x,n.y)},getVector2:function(t,e){return new h.Vector2(t,e)},getVector3:function(t,e,r){return new h.webgl.Vector3(t,e,r)},setDebugBones:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBones=t,this},setDebugRegionAttachments:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawRegionAttachments=t,this},setDebugBoundingBoxes:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBoundingBoxes=t,this},setDebugMeshHull:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshHull=t,this},setDebugMeshTriangles:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshTriangles=t,this},setDebugPaths:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawPaths=t,this},setDebugSkeletonXY:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawSkeletonXY=t,this},setDebugClipping:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawClipping=t,this},setEffect:function(t){return this.sceneRenderer.skeletonRenderer.vertexEffect=t,this},createSkeleton:function(t,e){var r=t,i=t,n=-1!==t.indexOf(".");if(n){var s=t.split(".");r=s.shift(),i=s.join(".")}var a=this.cache.get(r),u=this.getAtlas(r);if(!u)return null;this.spineTextures.has(r)||this.spineTextures.add(r,u);var c,l=a.preMultipliedAlpha,f=new h.AtlasAttachmentLoader(u),p=new h.SkeletonJson(f);if(e)c=e;else{var d=this.json.get(r);c=n?o(d,i):d}if(c){var v=p.readSkeletonData(c);return{skeletonData:v,skeleton:new h.Skeleton(v),preMultipliedAlpha:l}}return null},createAnimationState:function(t){var e=new h.AnimationStateData(t.data);return{stateData:e,state:new h.AnimationState(e)}},getBounds:function(t){var e=new h.Vector2,r=new h.Vector2;return t.getBounds(e,r,[]),{offset:e,size:r}},onResize:function(){var t=this.renderer,e=this.sceneRenderer,r=t.width,i=t.height;e.camera.position.x=r/2,e.camera.position.y=i/2,e.camera.setViewport(r,i)},shutdown:function(){this.systems.events.off("shutdown",this.shutdown,this),this.isWebGL&&this.game.scale.off(s,this.onResize,this)},destroy:function(){this.shutdown(),this.game=null,this.scene=null,this.systems=null,this.cache=null,this.spineTextures=null,this.json=null,this.textures=null,this.skeletonRenderer=null,this.gl=null},gameDestroy:function(){this.pluginManager.removeGameObject("spine",!0,!0),this.pluginManager.removeGameObject("spineContainer",!0,!0),this.pluginManager=null;var t=this.renderer.spineSceneRenderer;t&&t.dispose(),this.renderer.spineSceneRenderer=null,this.sceneRenderer=null}});p.SpineGameObject=c,p.SpineContainer=l,t.exports=p},5782:(t,e,r)=>{var i=r(7473),n=r(7361),o=r(7738),s=new i({Extends:n,Mixins:[o],initialize:function(t,e,r,i,o){n.call(this,t,r,i,o),this.type="Spine",this.plugin=e},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null,this.plugin=null}});t.exports=s},8064:t=>{t.exports=function(t,e,r,i){var n=e.list;if(0!==n.length){r.addToRenderList(e);var o=e.localTransform;i?(o.loadIdentity(),o.multiply(i),o.translate(e.x,e.y),o.rotate(e.rotation),o.scale(e.scaleX,e.scaleY)):o.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var s=-1!==e.blendMode;s||t.setBlendMode(0);var a=e._alpha,h=e.scrollFactorX,u=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,r);for(var c=0;c<n.length;c++){var l=n[c];if(l.willRender(r)){var f=l.alpha,p=l.scrollFactorX,d=l.scrollFactorY;s||l.blendMode===t.currentBlendMode||t.setBlendMode(l.blendMode),l.setScrollFactor(p*h,d*u),l.setAlpha(f*a),l.renderCanvas(t,l,r,o),l.setAlpha(f),l.setScrollFactor(p,d)}}e.mask&&e.mask.postRenderCanvas(t)}}},7738:(t,e,r)=>{var i=r(1984),n=r(1984);i=r(434),n=r(8064),t.exports={renderWebGL:i,renderCanvas:n}},434:t=>{t.exports=function(t,e,r,i){var n=e.plugin.sceneRenderer,o=e.list;if(0!==o.length){r.addToRenderList(e);var s=e.localTransform;i?(s.loadIdentity(),s.multiply(i),s.translate(e.x,e.y),s.rotate(e.rotation),s.scale(e.scaleX,e.scaleY)):s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.newType&&(t.pipelines.clear(),n.begin());var a=t.nextTypeMatch;t.nextTypeMatch=!0,t.newType=!1;for(var h=0;h<o.length;h++){var u=o[h];if(u.willRender(r,e)){var c=u.mask;c&&(n.end(),t.pipelines.rebind(),c.preRenderWebGL(t,u,r),t.pipelines.clear(),n.begin()),u.renderWebGL(t,u,r,s,e),c&&(n.end(),t.pipelines.rebind(),c.postRenderWebGL(t,r),t.pipelines.clear(),n.begin())}}t.nextTypeMatch=a,a&&!e.mask||(n.end(),t.pipelines.rebind())}else n.batcher.isDrawing&&t.finalType&&(n.end(),t.pipelines.rebind())}},6576:t=>{t.exports="complete"},8621:t=>{t.exports="dispose"},8944:t=>{t.exports="end"},7494:t=>{t.exports="event"},1908:t=>{t.exports="interrupted"},5591:t=>{t.exports="start"},5146:(t,e,r)=>{t.exports={COMPLETE:r(6576),DISPOSE:r(8621),END:r(8944),EVENT:r(7494),INTERRUPTED:r(1908),START:r(5591)}},8332:(t,e,r)=>{var i=r(6412),n=r(2915),o=r(7473),s=r(1991),a=r(3131),h=r(9660),u=r(4627),c=r(3212),l=r(8414),f=r(3426),p=r(7149),d=r(2273),v=r(4208),y=r(5146),g=r(2762),m=new o({Extends:d,Mixins:[s,a,h,u,c,l,g],initialize:function(t,e,r,i,n,o,s){d.call(this,t,"Spine"),this.plugin=e,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null,this.root=null,this.bounds=null,this.drawDebug=!1,this.timeScale=1,this.displayOriginX=0,this.displayOriginY=0,this.preMultipliedAlpha=!1,this.blendMode=-1,this.setPosition(r,i),n&&this.setSkeleton(n,o,s)},willRender:function(t,e){var r=!this.skeleton||!(15!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id);if(!e&&!r&&this.parentContainer){var i=this.plugin,n=i.sceneRenderer;i.gl&&n.batcher.isDrawing&&(n.end(),i.renderer.pipelines.rebind())}return r},setAlpha:function(t,e){if(void 0===t&&(t=1),e){var r=this.findSlot(e);r&&(r.color.a=n(t,0,1))}else this.alpha=t;return this},alpha:{get:function(){return this.skeleton.color.a},set:function(t){var e=n(t,0,1);this.skeleton&&(this.skeleton.color.a=e),0===e?this.renderFlags&=-3:this.renderFlags|=2}},red:{get:function(){return this.skeleton.color.r},set:function(t){var e=n(t,0,1);this.skeleton&&(this.skeleton.color.r=e)}},green:{get:function(){return this.skeleton.color.g},set:function(t){var e=n(t,0,1);this.skeleton&&(this.skeleton.color.g=e)}},blue:{get:function(){return this.skeleton.color.b},set:function(t){var e=n(t,0,1);this.skeleton&&(this.skeleton.color.b=e)}},setColor:function(t,e){void 0===t&&(t=16777215);var r=(t>>16&255)/255,i=(t>>8&255)/255,n=(255&t)/255,o=t>16777215?(t>>>24)/255:null,s=this.skeleton;if(e){var a=this.findSlot(e);a&&(s=a)}return s.color.r=r,s.color.g=i,s.color.b=n,null!==o&&(s.color.a=o),this},setSkeletonFromJSON:function(t,e,r,i){return this.setSkeleton(t,r,i,e)},setSkeleton:function(t,e,r,i){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications());var n=this.plugin.createSkeleton(t,i);this.skeletonData=n.skeletonData,this.preMultipliedAlpha=n.preMultipliedAlpha;var o=n.skeleton;return o.setSkin(),o.setToSetupPose(),this.skeleton=o,n=this.plugin.createAnimationState(o),this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.state=n.state,this.stateData=n.stateData,this.state.addListener({event:this.onEvent.bind(this),complete:this.onComplete.bind(this),start:this.onStart.bind(this),end:this.onEnd.bind(this),dispose:this.onDispose.bind(this),interrupted:this.onInterrupted.bind(this)}),e&&this.setAnimation(0,e,r),this.root=this.getRootBone(),this.root&&(this.root.rotation=v(f(this.rotation))+90),this.state.apply(o),o.updateCache(),this.updateSize()},onComplete:function(t){this.emit(y.COMPLETE,t)},onDispose:function(t){this.emit(y.DISPOSE,t)},onEnd:function(t){this.emit(y.END,t)},onEvent:function(t,e){this.emit(y.EVENT,t,e)},onInterrupted:function(t){this.emit(y.INTERRUPTED,t)},onStart:function(t){this.emit(y.START,t)},refresh:function(){return this.root&&(this.root.rotation=v(f(this.rotation))+90),this.updateSize(),this.skeleton.updateCache(),this},setSize:function(t,e,r,i){var n=this.skeleton;return void 0===t&&(t=n.data.width),void 0===e&&(e=n.data.height),void 0===r&&(r=0),void 0===i&&(i=0),this.width=t,this.height=e,this.displayOriginX=n.x-r,this.displayOriginY=n.y-i,this},setOffset:function(t,e){var r=this.skeleton;return void 0===t&&(t=0),void 0===e&&(e=0),this.displayOriginX=r.x-t,this.displayOriginY=r.y-e,this},updateSize:function(){var t=this.skeleton,e=this.plugin.renderer.height,r=this.scaleX,i=this.scaleY;t.x=this.x,t.y=e-this.y,t.scaleX=1,t.scaleY=1,t.updateWorldTransform();var n=this.getBounds();return this.width=n.size.x,this.height=n.size.y,this.displayOriginX=this.x-n.offset.x,this.displayOriginY=this.y-(e-(this.height+n.offset.y)),t.scaleX=r,t.scaleY=i,t.updateWorldTransform(),this},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,this.refresh()}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,this.refresh()}},getBoneList:function(){var t=[],e=this.skeletonData;if(e)for(var r=0;r<e.bones.length;r++)t.push(e.bones[r].name);return t},getSkinList:function(){var t=[],e=this.skeletonData;if(e)for(var r=0;r<e.skins.length;r++)t.push(e.skins[r].name);return t},getSlotList:function(){for(var t=[],e=this.skeleton,r=0;r<e.slots.length;r++)t.push(e.slots[r].data.name);return t},getAnimationList:function(){var t=[],e=this.skeletonData;if(e)for(var r=0;r<e.animations.length;r++)t.push(e.animations[r].name);return t},getCurrentAnimation:function(t){void 0===t&&(t=0);var e=this.state.getCurrent(t);if(e)return e.animation},play:function(t,e,r){return this.setAnimation(0,t,e,r),this},setAnimation:function(t,e,r,i){if(void 0===r&&(r=!1),void 0===i&&(i=!1),i&&this.state){var n=this.state.getCurrent(t);if(n&&n.animation.name===e&&!n.isComplete())return}if(this.findAnimation(e))return this.state.setAnimation(t,e,r)},addAnimation:function(t,e,r,i){return void 0===r&&(r=!1),void 0===i&&(i=0),this.state.addAnimation(t,e,r,i)},setEmptyAnimation:function(t,e){return this.state.setEmptyAnimation(t,e)},clearTrack:function(t){return this.state.clearTrack(t),this},clearTracks:function(){return this.state.clearTracks(),this},setSkinByName:function(t){var e=this.skeleton;return e.setSkinByName(t),e.setSlotsToSetupPose(),this.state.apply(e),this},setSkin:function(t){var e=this.skeleton;return e.setSkin(t),e.setSlotsToSetupPose(),this.state.apply(e),this},setMix:function(t,e,r){return this.stateData.setMix(t,e,r),this},getAttachment:function(t,e){return this.skeleton.getAttachment(t,e)},getAttachmentByName:function(t,e){return this.skeleton.getAttachmentByName(t,e)},setAttachment:function(t,e){if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length)for(var r=0;r<t.length;r++)this.skeleton.setAttachment(t[r],e[r]);else this.skeleton.setAttachment(t,e);return this},setToSetupPose:function(){return this.skeleton.setToSetupPose(),this},setSlotsToSetupPose:function(){return this.skeleton.setSlotsToSetupPose(),this},setBonesToSetupPose:function(){return this.skeleton.setBonesToSetupPose(),this},getRootBone:function(){return this.skeleton.getRootBone()},angleBoneToXY:function(t,e,r,o,s,a){void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=360);var h=this.plugin.renderer.height,u=f(i(t.worldX,h-t.worldY,e,r)+p(o));return t.rotation=n(v(u),s,a),this},findBone:function(t){return this.skeleton.findBone(t)},findBoneIndex:function(t){return this.skeleton.findBoneIndex(t)},findSlot:function(t){return this.skeleton.findSlot(t)},findSlotIndex:function(t){return this.skeleton.findSlotIndex(t)},findSkin:function(t){return this.skeletonData.findSkin(t)},findEvent:function(t){return this.skeletonData.findEvent(t)},findAnimation:function(t){return this.skeletonData.findAnimation(t)},findIkConstraint:function(t){return this.skeletonData.findIkConstraint(t)},findTransformConstraint:function(t){return this.skeletonData.findTransformConstraint(t)},findPathConstraint:function(t){return this.skeletonData.findPathConstraint(t)},findPathConstraintIndex:function(t){return this.skeletonData.findPathConstraintIndex(t)},getBounds:function(){return this.plugin.getBounds(this.skeleton)},preUpdate:function(t,e){var r=this.skeleton;this.state.update(e/1e3*this.timeScale),this.state.apply(r)},preDestroy:function(){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.plugin=null,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null}});t.exports=m},2753:(t,e,r)=>{var i=r(3426),n=r(4208),o=r(8445);t.exports=function(t,e,r,s){var a=t.currentContext,h=e.plugin,u=e.skeleton,c=h.skeletonRenderer,l=t._tempMatrix1,f=t._tempMatrix2,p=t._tempMatrix3;r.addToRenderList(e),f.applyITRS(e.x,e.y,e.rotation,Math.abs(e.scaleX),Math.abs(e.scaleY)),l.copyFrom(r.matrix),s?(l.multiplyWithOffset(s,-r.scrollX*e.scrollFactorX,-r.scrollY*e.scrollFactorY),f.e=e.x,f.f=e.y,l.multiply(f,p)):(f.e-=r.scrollX*e.scrollFactorX,f.f-=r.scrollY*e.scrollFactorY,l.multiply(f,p)),u.x=p.tx,u.y=p.ty,u.scaleX=p.scaleX,u.scaleY=-1*p.scaleY,e.scaleX<0?(u.scaleX*=-1,e.root.rotation=n(p.rotationNormalized)):e.root.rotation=o(n(i(p.rotationNormalized))+90,0,360),e.scaleY<0&&(u.scaleY*=-1,e.scaleX<0?e.root.rotation-=2*n(p.rotationNormalized):e.root.rotation+=2*n(p.rotationNormalized)),r.renderToTexture&&(u.y=p.ty,u.scaleY*=-1),u.updateWorldTransform(),c.ctx=a,c.debugRendering=h.drawDebug||e.drawDebug,a.save(),c.draw(u),a.restore()}},2762:(t,e,r)=>{var i=r(1984),n=r(1984),o=r(1984);i=r(4290),o=r(780),n=r(2753),t.exports={renderWebGL:i,renderCanvas:n,renderDirect:o}},780:(t,e,r)=>{var i=r(2915),n=r(3426),o=r(2208),s=r(4208),a=r(8445);t.exports=function(t,e,r,h,u){var c=e.plugin,l=e.skeleton,f=c.sceneRenderer;t.pipelines.clear(),f.begin();var p=e.scrollFactorX,d=e.scrollFactorY,v=l.color.a;u&&(e.scrollFactorX=u.scrollFactorX,e.scrollFactorY=u.scrollFactorY,l.color.a=i(v*u.alpha,0,1)),r.addToRenderList(e);var y=o(e,r,h).calc,g=t.height;if(l.x=y.tx,l.y=g-y.ty,l.scaleX=y.scaleX,l.scaleY=y.scaleY,e.scaleX<0?(l.scaleX*=-1,e.root.rotation=a(s(y.rotationNormalized)-180,0,360)):e.root.rotation=a(s(n(y.rotationNormalized))+90,0,360),e.scaleY<0&&(l.scaleY*=-1,e.scaleX<0?e.root.rotation-=2*s(y.rotationNormalized):e.root.rotation+=2*s(y.rotationNormalized)),l.updateWorldTransform(),f.drawSkeleton(l,e.preMultipliedAlpha),u&&(e.scrollFactorX=p,e.scrollFactorY=d,l.color.a=v),c.drawDebug||e.drawDebug){var m=l.x,x=l.y;l.x=0,l.y=0,f.drawSkeletonDebug(l,e.preMultipliedAlpha),l.x=m,l.y=x}f.end(),t.pipelines.rebind()}},4290:(t,e,r)=>{var i=r(2915),n=r(3426),o=r(2208),s=r(4208),a=r(8445);t.exports=function(t,e,r,h,u){var c=e.plugin,l=e.skeleton,f=c.sceneRenderer;t.newType&&(t.pipelines.clear(),f.begin());var p=e.scrollFactorX,d=e.scrollFactorY,v=l.color.a;u&&(e.scrollFactorX=u.scrollFactorX,e.scrollFactorY=u.scrollFactorY,l.color.a=i(v*u.alpha,0,1)),r.addToRenderList(e);var y=o(e,r,h).calc,g=t.height;if(l.x=y.tx,l.y=g-y.ty,l.scaleX=y.scaleX,l.scaleY=y.scaleY,e.scaleX<0?(l.scaleX*=-1,e.root.rotation=a(s(y.rotationNormalized)-180,0,360)):e.root.rotation=a(s(n(y.rotationNormalized))+90,0,360),e.scaleY<0&&(l.scaleY*=-1,e.scaleX<0?e.root.rotation-=2*s(y.rotationNormalized):e.root.rotation+=2*s(y.rotationNormalized)),l.updateWorldTransform(),f.drawSkeleton(l,e.preMultipliedAlpha),u&&(e.scrollFactorX=p,e.scrollFactorY=d,l.color.a=v),c.drawDebug||e.drawDebug){var m=l.x,x=l.y;l.x=0,l.y=0,f.drawSkeletonDebug(l,e.preMultipliedAlpha),l.x=m,l.y=x,f.end(),t.pipelines.rebind()}else t.nextTypeMatch||(f.end(),t.pipelines.rebind())}},9454:(t,e,r)=>{var i={VERSION:"3.70.0",BlendModes:r(8351),ScaleModes:r(8196),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=i},1081:(t,e,r)=>{var i=r(7473),n=r(6748),o=new i({initialize:function(t,e){this.parent=t,this.events=e,e||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(n.DESTROY,this.destroy,this)},get:function(t){var e=this.list;if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++)r.push(e[t[i]]);return r}return e[t]},getAll:function(){var t={};for(var e in this.list)this.list.hasOwnProperty(e)&&(t[e]=this.list[e]);return t},query:function(t){var e={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(t)&&(e[r]=this.list[r]);return e},set:function(t,e){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,e);for(var r in t)this.setValue(r,t[r]);return this},inc:function(t,e){if(this._frozen)return this;void 0===e&&(e=1);var r=this.get(t);return void 0===r&&(r=0),this.set(t,r+e),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,e){if(this._frozen)return this;if(this.has(t))this.values[t]=e;else{var r=this,i=this.list,o=this.events,s=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return i[t]},set:function(e){if(!r._frozen){var a=i[t];i[t]=e,o.emit(n.CHANGE_DATA,s,t,e,a),o.emit(n.CHANGE_DATA_KEY+t,s,e,a)}}}),i[t]=e,o.emit(n.SET_DATA,s,t,e)}return this},each:function(t,e){for(var r=[this.parent,null,void 0],i=1;i<arguments.length;i++)r.push(arguments[i]);for(var n in this.list)r[1]=n,r[2]=this.list[n],t.apply(e,r);return this},merge:function(t,e){for(var r in void 0===e&&(e=!0),t)t.hasOwnProperty(r)&&(e||!e&&!this.has(r))&&this.setValue(r,t[r]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var e=0;e<t.length;e++)this.removeValue(t[e]);return this},removeValue:function(t){if(this.has(t)){var e=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(n.REMOVE_DATA,this.parent,t,e)}return this},pop:function(t){var e=void 0;return!this._frozen&&this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(n.REMOVE_DATA,this.parent,t,e)),e},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(n.CHANGE_DATA),this.events.off(n.SET_DATA),this.events.off(n.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var e in this.list)void 0!==this.list[e]&&t++;return t}}});t.exports=o},9044:t=>{t.exports="changedata"},7801:t=>{t.exports="changedata-"},4873:t=>{t.exports="destroy"},9966:t=>{t.exports="removedata"},4586:t=>{t.exports="setdata"},6748:(t,e,r)=>{t.exports={CHANGE_DATA:r(9044),CHANGE_DATA_KEY:r(7801),DESTROY:r(4873),REMOVE_DATA:r(9966),SET_DATA:r(4586)}},3004:(t,e,r)=>{var i=r(2776),n={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function(){if("function"==typeof importScripts)return n;n.audioData=!!window.Audio,n.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),e=!!t.canPlayType;try{if(e){var r=function(e,r){var i=t.canPlayType("audio/"+e).replace(/^no$/,"");return r?Boolean(i||t.canPlayType("audio/"+r).replace(/^no$/,"")):Boolean(i)};if(n.ogg=r('ogg; codecs="vorbis"'),n.opus=r('ogg; codecs="opus"',"opus"),n.mp3=r("mpeg"),n.wav=r("wav"),n.m4a=r("x-m4a"),n.aac=r("aac"),n.flac=r("flac","x-flac"),n.webm=r('webm; codecs="vorbis"'),""!==t.canPlayType('audio/mp4; codecs="ec-3"'))if(i.edge)n.dolby=!0;else if(i.safari&&i.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var o=parseInt(RegExp.$1,10),s=parseInt(RegExp.$2,10);(10===o&&s>=11||o>10)&&(n.dolby=!0)}}}catch(t){}return n}()},2776:(t,e,r)=>{var i,n=r(5203),o={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};t.exports=(i=navigator.userAgent,/Edg\/\d+/.test(i)?(o.edge=!0,o.es2019=!0):/OPR/.test(i)?(o.opera=!0,o.es2019=!0):/Chrome\/(\d+)/.test(i)&&!n.windowsPhone?(o.chrome=!0,o.chromeVersion=parseInt(RegExp.$1,10),o.es2019=o.chromeVersion>69):/Firefox\D+(\d+)/.test(i)?(o.firefox=!0,o.firefoxVersion=parseInt(RegExp.$1,10),o.es2019=o.firefoxVersion>10):/AppleWebKit/.test(i)&&n.iOS?(o.mobileSafari=!0,o.es2019=!0):/MSIE (\d+\.\d+);/.test(i)?(o.ie=!0,o.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+) Safari/.test(i)&&!n.windowsPhone?(o.safari=!0,o.safariVersion=parseInt(RegExp.$1,10),o.es2019=o.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(i)&&(o.ie=!0,o.trident=!0,o.tridentVersion=parseInt(RegExp.$1,10),o.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(i)&&(o.silk=!0),o)},6505:(t,e,r)=>{var i,n,o,s=r(8073),a={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=("function"!=typeof importScripts&&void 0!==document&&(a.supportNewBlendModes=(i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(o=new Image).onload=function(){var t=new Image;t.onload=function(){var e=s.create2D(t,6).getContext("2d",{willReadFrequently:!0});if(e.globalCompositeOperation="multiply",e.drawImage(o,0,0),e.drawImage(t,2,0),!e.getImageData(2,0,1,1))return!1;var r=e.getImageData(2,0,1,1).data;s.remove(t),a.supportNewBlendModes=255===r[0]&&0===r[1]&&0===r[2]},t.src=i+"/wCKxvRF"+n},o.src=i+"AP804Oa6"+n,!1),a.supportInverseAlpha=function(){var t=s.create2D(this,2).getContext("2d",{willReadFrequently:!0});t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var e=t.getImageData(0,0,1,1);if(null===e)return!1;t.putImageData(e,1,0);var r=t.getImageData(1,0,1,1),i=r.data[0]===e.data[0]&&r.data[1]===e.data[1]&&r.data[2]===e.data[2]&&r.data[3]===e.data[3];return s.remove(this),i}()),a)},6543:(t,e,r)=>{var i=r(5203),n=r(2776),o=r(8073),s={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function(){if("function"==typeof importScripts)return s;s.canvas=!!window.CanvasRenderingContext2D;try{s.localStorage=!!localStorage.getItem}catch(t){s.localStorage=!1}s.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),s.fileSystem=!!window.requestFileSystem;var t,e,r,a=!1;return s.webGL=function(){if(window.WebGLRenderingContext)try{var t=o.createWebGL(this),e=t.getContext("webgl")||t.getContext("experimental-webgl"),r=o.create2D(this),i=r.getContext("2d",{willReadFrequently:!0}).createImageData(1,1);return a=i.data instanceof Uint8ClampedArray,o.remove(t),o.remove(r),!!e}catch(t){return!1}return!1}(),s.worker=!!window.Worker,s.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,s.getUserMedia=s.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,n.firefox&&n.firefoxVersion<21&&(s.getUserMedia=!1),!i.iOS&&(n.ie||n.firefox||n.chrome)&&(s.canvasBitBltShift=!0),(n.safari||n.mobileSafari)&&(s.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(s.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(s.littleEndian=(t=new ArrayBuffer(4),e=new Uint8Array(t),r=new Uint32Array(t),e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041===r[0]||2712847316!==r[0]&&null)),s.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==s.littleEndian&&a,s}()},3922:t=>{var e={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function(){if("function"==typeof importScripts)return e;var t,r="Fullscreen",i="FullScreen",n=["request"+r,"request"+i,"webkitRequest"+r,"webkitRequest"+i,"msRequest"+r,"msRequest"+i,"mozRequest"+i,"mozRequest"+r];for(t=0;t<n.length;t++)if(document.documentElement[n[t]]){e.available=!0,e.request=n[t];break}var o=["cancel"+i,"exit"+r,"webkitCancel"+i,"webkitExit"+r,"msCancel"+i,"msExit"+r,"mozCancel"+i,"mozExit"+r];if(e.available)for(t=0;t<o.length;t++)if(document[o[t]]){e.cancel=o[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(e.keyboard=!0),Object.defineProperty(e,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),e}()},1454:(t,e,r)=>{var i=r(2776),n={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=("function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(n.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(n.mspointer=!0),navigator.getGamepads&&(n.gamepads=!0),"onwheel"in window||i.ie&&"WheelEvent"in window?n.wheelEvent="wheel":"onmousewheel"in window?n.wheelEvent="mousewheel":i.firefox&&"MouseScrollEvent"in window&&(n.wheelEvent="DOMMouseScroll")),n)},5203:t=>{var e={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function(){if("function"==typeof importScripts)return e;var t=navigator.userAgent;/Windows/.test(t)?e.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(e.iOS=!0,e.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),e.iOSVersion=parseInt(RegExp.$1,10)):e.macOS=!0:/Android/.test(t)?e.android=!0:/Linux/.test(t)?e.linux=!0:/iP[ao]d|iPhone/i.test(t)?(e.iOS=!0,navigator.appVersion.match(/OS (\d+)/),e.iOSVersion=parseInt(RegExp.$1,10),e.iPhone=-1!==t.toLowerCase().indexOf("iphone"),e.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?e.kindle=!0:/CrOS/.test(t)&&(e.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(e.android=!1,e.iOS=!1,e.macOS=!1,e.windows=!0,e.windowsPhone=!0);var r=/Silk/.test(t);return(e.windows||e.macOS||e.linux&&!r||e.chromeOS)&&(e.desktop=!0),(e.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(e.desktop=!1),navigator.standalone&&(e.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(e.cordova=!0),void 0!==window.ejecta&&(e.ejecta=!0)),"undefined"!=typeof process&&process.versions&&process.versions.node&&(e.node=!0),e.node&&"object"==typeof process.versions&&(e.nodeWebkit=!!process.versions["node-webkit"],e.electron=!!process.versions.electron),/Crosswalk/.test(t)&&(e.crosswalk=!0),e.pixelRatio=window.devicePixelRatio||1,e}()},2131:(t,e,r)=>{var i=r(4597),n={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};t.exports=function(){if("function"==typeof importScripts)return n;var t=document.createElement("video"),e=!!t.canPlayType,r=/^no$/;try{e&&(t.canPlayType('video/ogg; codecs="theora"').replace(r,"")&&(n.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(r,"")&&(n.h264=!0,n.mp4=!0),t.canPlayType("video/x-m4v").replace(r,"")&&(n.m4v=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(r,"")&&(n.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(r,"")&&(n.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(r,"")&&(n.hls=!0))}catch(t){}return t.parentNode&&t.parentNode.removeChild(t),n.getVideoURL=function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var r,o=i(t[e],"url",t[e]);if(0===o.indexOf("blob:"))return{url:o,type:""};if(r=0===o.indexOf("data:")?o.split(",")[0].match(/\/(.*?);/):o.match(/\.([a-zA-Z0-9]+)($|\?)/),r=i(t[e],"type",r?r[1]:"").toLowerCase(),n[r])return{url:o,type:r}}return null},n}()},9356:(t,e,r)=>{t.exports={os:r(5203),browser:r(2776),features:r(6543),input:r(1454),audio:r(3004),video:r(2131),fullscreen:r(3922),canvasFeatures:r(6505)}},5686:(t,e,r)=>{var i=r(7473),n=new Float32Array(20),o=new i({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(t){return this._matrix.set(t),this._dirty=!0,this},reset:function(){var t=this._matrix;return t.fill(0),t[0]=1,t[6]=1,t[12]=1,t[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var t=this._data;return this._dirty&&(t.set(this._matrix),t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._dirty=!1),t},brightness:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var r=t;return this.multiply([r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],e)},saturate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var r=2*t/3+1,i=-.5*(r-1);return this.multiply([r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0],e)},desaturate:function(t){return void 0===t&&(t=!1),this.saturate(-1,t)},hue:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1),t=t/180*Math.PI;var r=Math.cos(t),i=Math.sin(t),n=.213,o=.715,s=.072;return this.multiply([n+.787*r+i*-n,o+r*-o+i*-o,s+r*-s+.928*i,0,0,n+r*-n+.143*i,o+r*(1-o)+.14*i,s+r*-s+-.283*i,0,0,n+r*-n+-.787*i,o+r*-o+i*o,s+.928*r+i*s,0,0,0,0,0,1,0],e)},grayscale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!1),this.saturate(-t,e)},blackWhite:function(t){return void 0===t&&(t=!1),this.multiply(o.BLACK_WHITE,t)},contrast:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var r=t+1,i=-.5*(r-1);return this.multiply([r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0],e)},negative:function(t){return void 0===t&&(t=!1),this.multiply(o.NEGATIVE,t)},desaturateLuminance:function(t){return void 0===t&&(t=!1),this.multiply(o.DESATURATE_LUMINANCE,t)},sepia:function(t){return void 0===t&&(t=!1),this.multiply(o.SEPIA,t)},night:function(t,e){return void 0===t&&(t=.1),void 0===e&&(e=!1),this.multiply([-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e)},lsd:function(t){return void 0===t&&(t=!1),this.multiply(o.LSD,t)},brown:function(t){return void 0===t&&(t=!1),this.multiply(o.BROWN,t)},vintagePinhole:function(t){return void 0===t&&(t=!1),this.multiply(o.VINTAGE,t)},kodachrome:function(t){return void 0===t&&(t=!1),this.multiply(o.KODACHROME,t)},technicolor:function(t){return void 0===t&&(t=!1),this.multiply(o.TECHNICOLOR,t)},polaroid:function(t){return void 0===t&&(t=!1),this.multiply(o.POLAROID,t)},shiftToBGR:function(t){return void 0===t&&(t=!1),this.multiply(o.SHIFT_BGR,t)},multiply:function(t,e){void 0===e&&(e=!1),e||this.reset();var r=this._matrix,i=n;return i.set(r),r.set([i[0]*t[0]+i[1]*t[5]+i[2]*t[10]+i[3]*t[15],i[0]*t[1]+i[1]*t[6]+i[2]*t[11]+i[3]*t[16],i[0]*t[2]+i[1]*t[7]+i[2]*t[12]+i[3]*t[17],i[0]*t[3]+i[1]*t[8]+i[2]*t[13]+i[3]*t[18],i[0]*t[4]+i[1]*t[9]+i[2]*t[14]+i[3]*t[19]+i[4],i[5]*t[0]+i[6]*t[5]+i[7]*t[10]+i[8]*t[15],i[5]*t[1]+i[6]*t[6]+i[7]*t[11]+i[8]*t[16],i[5]*t[2]+i[6]*t[7]+i[7]*t[12]+i[8]*t[17],i[5]*t[3]+i[6]*t[8]+i[7]*t[13]+i[8]*t[18],i[5]*t[4]+i[6]*t[9]+i[7]*t[14]+i[8]*t[19]+i[9],i[10]*t[0]+i[11]*t[5]+i[12]*t[10]+i[13]*t[15],i[10]*t[1]+i[11]*t[6]+i[12]*t[11]+i[13]*t[16],i[10]*t[2]+i[11]*t[7]+i[12]*t[12]+i[13]*t[17],i[10]*t[3]+i[11]*t[8]+i[12]*t[13]+i[13]*t[18],i[10]*t[4]+i[11]*t[9]+i[12]*t[14]+i[13]*t[19]+i[14],i[15]*t[0]+i[16]*t[5]+i[17]*t[10]+i[18]*t[15],i[15]*t[1]+i[16]*t[6]+i[17]*t[11]+i[18]*t[16],i[15]*t[2]+i[16]*t[7]+i[17]*t[12]+i[18]*t[17],i[15]*t[3]+i[16]*t[8]+i[17]*t[13]+i[18]*t[18],i[15]*t[4]+i[16]*t[9]+i[17]*t[14]+i[18]*t[19]+i[19]]),this._dirty=!0,this}});o.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],o.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],o.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],o.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],o.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],o.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],o.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],o.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],o.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],o.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],o.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t.exports=o},8073:(t,e,r)=>{var i,n,o,s=r(9454),a=r(2150),h=[],u=!1;t.exports=(o=function(){var t=0;return h.forEach((function(e){e.parent&&t++})),t},{create2D:function(t,e,r){return i(t,e,r,s.CANVAS)},create:i=function(t,e,r,i,o){var c;void 0===e&&(e=1),void 0===r&&(r=1),void 0===i&&(i=s.CANVAS),void 0===o&&(o=!1);var l=n(i);return null===l?(l={parent:t,canvas:document.createElement("canvas"),type:i},i===s.CANVAS&&h.push(l),c=l.canvas):(l.parent=t,c=l.canvas),o&&(l.parent=c),c.width=e,c.height=r,u&&i===s.CANVAS&&a.disable(c.getContext("2d",{willReadFrequently:!1})),c},createWebGL:function(t,e,r){return i(t,e,r,s.WEBGL)},disableSmoothing:function(){u=!0},enableSmoothing:function(){u=!1},first:n=function(t){if(void 0===t&&(t=s.CANVAS),t===s.WEBGL)return null;for(var e=0;e<h.length;e++){var r=h[e];if(!r.parent&&r.type===t)return r}return null},free:function(){return h.length-o()},pool:h,remove:function(t){var e=t instanceof HTMLCanvasElement;h.forEach((function(r){(e&&r.canvas===t||!e&&r.parent===t)&&(r.parent=null,r.canvas.width=1,r.canvas.height=1)}))},total:o})},2150:t=>{var e,r="";t.exports={disable:function(t){return""===r&&(r=e(t)),r&&(t[r]=!1),t},enable:function(t){return""===r&&(r=e(t)),r&&(t[r]=!0),t},getPrefix:e=function(t){for(var e=["i","webkitI","msI","mozI","oI"],r=0;r<e.length;r++){var i=e[r]+"mageSmoothingEnabled";if(i in t)return i}return null},isEnabled:function(t){return null!==r?t[r]:null}}},7499:(t,e,r)=>{var i=r(7473),n=r(3649),o=new i({initialize:function(t,e,r,i,n,o){e||(e=t.sys.make.image({x:r,y:i,key:n,frame:o,add:!1})),this.bitmapMask=e,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,e,r){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,e,r)},postRenderWebGL:function(t,e,r){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,e,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});n.register("bitmapMask",(function(t,e,r,i,n){return new o(this.scene,t,e,r,i,n)})),t.exports=o},6726:(t,e,r)=>{var i=new(r(7473))({initialize:function(t,e){this.geometryMask=e,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,e,r){var i=t.gl;t.flush(),0===t.maskStack.length&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:r}),this.applyStencil(t,r,!0),t.maskCount++},applyStencil:function(t,e,r){var i=t.gl,n=this.geometryMask,o=t.maskCount,s=255;i.colorMask(!1,!1,!1,!1),r?(i.stencilFunc(i.EQUAL,o,s),i.stencilOp(i.KEEP,i.KEEP,i.INCR),o++):(i.stencilFunc(i.EQUAL,o+1,s),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),this.level=o,n.renderWebGL(t,n,e),t.flush(),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),this.invertAlpha?i.stencilFunc(i.NOTEQUAL,o,s):i.stencilFunc(i.EQUAL,o,s)},postRenderWebGL:function(t){var e=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var r=t.currentMask;if(0===t.maskStack.length)r.mask=null,e.disable(e.STENCIL_TEST);else{var i=t.maskStack[t.maskStack.length-1];i.mask.applyStencil(t,i.camera,!1),t.currentCameraMask.mask!==i.mask?(r.mask=i.mask,r.camera=i.camera):r.mask=null}},preRenderCanvas:function(t,e,r){var i=this.geometryMask;t.currentContext.save(),i.renderCanvas(t,i,r,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=i},7340:(t,e,r)=>{var i=r(7473),n=r(6128),o=r(1571),s=new i({Extends:n,initialize:function(t,e){void 0===e&&(e=1),n.call(this,o.BARREL,t),this.amount=e}});t.exports=s},5170:(t,e,r)=>{var i=r(7473),n=r(6128),o=r(1571),s=new i({Extends:n,initialize:function(t,e,r,i,s,a,h){void 0===r&&(r=1),void 0===i&&(i=1),void 0===s&&(s=1),void 0===a&&(a=1),void 0===h&&(h=4),n.call(this,o.BLOOM,t),this.steps=h,this.offsetX=r,this.offsetY=i,this.blurStrength=s,this.strength=a,this.glcolor=[1,1,1],null!=e&&(this.color=e)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=s},4199:(t,e,r)=>{var i=r(7473),n=r(6128),o=r(1571),s=new i({Extends:n,initialize:function(t,e,r,i,s,a,h){void 0===e&&(e=0),void 0===r&&(r=2),void 0===i&&(i=2),void 0===s&&(s=1),void 0===h&&(h=4),n.call(this,o.BLUR,t),this.quality=e,this.x=r,this.y=i,this.steps=h,this.strength=s,this.glcolor=[1,1,1],null!=a&&(this.color=a)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=s},3132:(t,e,r)=>{var i=r(7473),n=r(6128),o=r(1571),s=new i({Extends:n,initialize:function(t,e,r,i,s,a,h,u){void 0===e&&(e=.5),void 0===r&&(r=1),void 0===i&&(i=.2),void 0===s&&(s=!1),void 0===a&&(a=1),void 0===h&&(h=1),void 0===u&&(u=1),n.call(this,o.BOKEH,t),this.radius=e,this.amount=r,this.contrast=i,this.isTiltShift=s,this.strength=u,this.blurX=a,this.blurY=h}});t.exports=s},6610:(t,e,r)=>{var i=r(7473),n=r(6128),o=r(1571),s=new i({Extends:n,initialize:function(t,e,r,i,s,a){void 0===e&&(e=8),void 0===s&&(s=1),void 0===a&&(a=.005),n.call(this,o.CIRCLE,t),this.scale=s,this.feather=a,this.thickness=e,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],null!=r&&(this.color=r),null!=i&&(this.backgroundColor=i)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}},backgroundColor:{get:function(){var t=this.glcolor2;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor2;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(t){this.glcolor2[3]=t}}});t.exports=s},4931:(t,e,r)=>{var i=r(7473),n=r(5686),o=r(1571),s=new i({Extends:n,initialize:function(t){n.call(this),this.type=o.COLOR_MATRIX,this.gameObject=t,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});t.exports=s},6128:(t,e,r)=>{var i=new(r(7473))({initialize:function(t,e){this.type=t,this.gameObject=e,this.active=!0},setActive:function(t){return this.active=t,this},destroy:function(){this.gameObject=null,this.active=!1}});t.exports=i},9195:(t,e,r)=>{var i=r(7473),n=r(6128),o=r(1571),s=new i({Extends:n,initialize:function(t,e,r,i){void 0===e&&(e="__WHITE"),void 0===r&&(r=.005),void 0===i&&(i=.005),n.call(this,o.DISPLACEMENT,t),this.x=r,this.y=i,this.glTexture,this.setTexture(e)},setTexture:function(t){var e=this.gameObject.scene.sys.textures.getFrame(t);return e&&(this.glTexture=e.glTexture),this}});t.exports=s},445:(t,e,r)=>{var i=r(7473),n=r(6128),o=r(1571),s=new i({Extends:n,initialize:function(t,e,r,i,s){void 0===r&&(r=4),void 0===i&&(i=0),void 0===s&&(s=!1),n.call(this,o.GLOW,t),this.outerStrength=r,this.innerStrength=i,this.knockout=s,this.glcolor=[1,1,1,1],void 0!==e&&(this.color=e)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=s},7724:(t,e,r)=>{var i=r(7473),n=r(6128),o=r(1571),s=new i({Extends:n,initialize:function(t,e,r,i,s,a,h,u,c){void 0===i&&(i=.2),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===u&&(u=1),void 0===c&&(c=0),n.call(this,o.GRADIENT,t),this.alpha=i,this.size=c,this.fromX=s,this.fromY=a,this.toX=h,this.toY=u,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],null!=e&&(this.color1=e),null!=r&&(this.color2=r)},color1:{get:function(){var t=this.glcolor1;return(t[0]<<16)+(t[1]<<8)+(0|t[2])},set:function(t){var e=this.glcolor1;e[0]=t>>16&255,e[1]=t>>8&255,e[2]=255&t}},color2:{get:function(){var t=this.glcolor2;return(t[0]<<16)+(t[1]<<8)+(0|t[2])},set:function(t){var e=this.glcolor2;e[0]=t>>16&255,e[1]=t>>8&255,e[2]=255&t}}});t.exports=s},4412:(t,e,r)=>{var i=r(7473),n=r(6128),o=r(1571),s=new i({Extends:n,initialize:function(t,e){void 0===e&&(e=1),n.call(this,o.PIXELATE,t),this.amount=e}});t.exports=s},75:(t,e,r)=>{var i=r(7473),n=r(6128),o=r(1571),s=new i({Extends:n,initialize:function(t,e,r,i,s,a,h,u){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=.1),void 0===s&&(s=1),void 0===h&&(h=6),void 0===u&&(u=1),n.call(this,o.SHADOW,t),this.x=e,this.y=r,this.decay=i,this.power=s,this.glcolor=[0,0,0,1],this.samples=h,this.intensity=u,void 0!==a&&(this.color=a)},color:{get:function(){var t=this.glcolor;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},set:function(t){var e=this.glcolor;e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}}});t.exports=s},8734:(t,e,r)=>{var i=r(7473),n=r(6128),o=r(1571),s=new i({Extends:n,initialize:function(t,e,r,i,s){void 0===e&&(e=.5),void 0===r&&(r=.5),void 0===i&&(i=3),void 0===s&&(s=!1),n.call(this,o.SHINE,t),this.speed=e,this.lineWidth=r,this.gradient=i,this.reveal=s}});t.exports=s},2437:(t,e,r)=>{var i=r(7473),n=r(6128),o=r(1571),s=new i({Extends:n,initialize:function(t,e,r,i,s){void 0===e&&(e=.5),void 0===r&&(r=.5),void 0===i&&(i=.5),void 0===s&&(s=.5),n.call(this,o.VIGNETTE,t),this.x=e,this.y=r,this.radius=i,this.strength=s}});t.exports=s},5984:(t,e,r)=>{var i=r(7473),n=r(6128),o=r(1571),s=new i({Extends:n,initialize:function(t,e,r,i,s){void 0===e&&(e=.1),void 0===r&&(r=0),void 0===i&&(i=0),void 0===s&&(s=!1),n.call(this,o.WIPE,t),this.progress=0,this.wipeWidth=e,this.direction=r,this.axis=i,this.reveal=s}});t.exports=s},1571:t=>{t.exports={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19}},7347:(t,e,r)=>{var i=r(1030),n=r(1571),o={Barrel:r(7340),Controller:r(6128),Bloom:r(5170),Blur:r(4199),Bokeh:r(3132),Circle:r(6610),ColorMatrix:r(4931),Displacement:r(9195),Glow:r(445),Gradient:r(7724),Pixelate:r(4412),Shadow:r(75),Shine:r(8734),Vignette:r(2437),Wipe:r(5984)};o=i(!1,o,n),t.exports=o},2494:(t,e,r)=>{var i=r(8351),n=r(8361);t.exports=function(t,e,r){e.x=n(r,"x",0),e.y=n(r,"y",0),e.depth=n(r,"depth",0),e.flipX=n(r,"flipX",!1),e.flipY=n(r,"flipY",!1);var o=n(r,"scale",null);"number"==typeof o?e.setScale(o):null!==o&&(e.scaleX=n(o,"x",1),e.scaleY=n(o,"y",1));var s=n(r,"scrollFactor",null);"number"==typeof s?e.setScrollFactor(s):null!==s&&(e.scrollFactorX=n(s,"x",1),e.scrollFactorY=n(s,"y",1)),e.rotation=n(r,"rotation",0);var a=n(r,"angle",null);null!==a&&(e.angle=a),e.alpha=n(r,"alpha",1);var h=n(r,"origin",null);if("number"==typeof h)e.setOrigin(h);else if(null!==h){var u=n(h,"x",.5),c=n(h,"y",.5);e.setOrigin(u,c)}return e.blendMode=n(r,"blendMode",i.NORMAL),e.visible=n(r,"visible",!0),n(r,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},2273:(t,e,r)=>{var i=r(7473),n=r(6125),o=r(1081),s=r(4399),a=r(3389),h=r(204),u=new i({Extends:s,initialize:function(t,e){s.call(this),this.scene=t,this.displayList=null,this.type=e,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new o(this)),this},setData:function(t,e){return this.data||(this.data=new o(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new o(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new o(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new o(this)),this.data.get(t)},setInteractive:function(t,e,r){return this.scene.sys.input.enable(this,t,e,r),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return n(this)},willRender:function(t){return!(this.displayList&&this.displayList.active&&!this.displayList.willRender(t)||u.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,r=[];e&&(r.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return this.displayList?r.unshift(this.displayList.getIndex(t)):r.unshift(this.scene.sys.displayList.getIndex(t)),r},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),t.events.emit(h.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t&&t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(h.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(a.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});u.RENDER_MASK=15,t.exports=u},3649:(t,e,r)=>{var i=r(7473),n=r(8456),o=r(204),s=new i({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});s.register=function(t,e){s.prototype.hasOwnProperty(t)||(s.prototype[t]=e)},s.remove=function(t){s.prototype.hasOwnProperty(t)&&delete s.prototype[t]},n.register("GameObjectFactory",s,"add"),t.exports=s},2208:(t,e,r)=>{var i=r(4227),n=new i,o=new i,s=new i,a={camera:n,sprite:o,calc:s};t.exports=function(t,e,r){var i=n,h=o,u=s;return h.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),i.copyFrom(e.matrix),r?(i.multiplyWithOffset(r,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),h.e=t.x,h.f=t.y):(h.e-=e.scrollX*t.scrollFactorX,h.f-=e.scrollY*t.scrollFactorY),i.multiply(h,u),a}},4344:(t,e,r)=>{var i=r(2915),n={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,e,r,n){return void 0===t&&(t=1),void 0===e?this.alpha=t:(this._alphaTL=i(t,0,1),this._alphaTR=i(e,0,1),this._alphaBL=i(r,0,1),this._alphaBR=i(n,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){var e=i(t,0,1);this._alpha=e,this._alphaTL=e,this._alphaTR=e,this._alphaBL=e,this._alphaBR=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){var e=i(t,0,1);this._alphaTL=e,0!==e&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){var e=i(t,0,1);this._alphaTR=e,0!==e&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){var e=i(t,0,1);this._alphaBL=e,0!==e&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){var e=i(t,0,1);this._alphaBR=e,0!==e&&(this.renderFlags|=2)}}};t.exports=n},4518:(t,e,r)=>{var i=r(2915),n={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function(){return this._alpha},set:function(t){var e=i(t,0,1);this._alpha=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=n},5173:(t,e,r)=>{var i=r(8351),n={_blendMode:i.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=i[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=n},1991:t=>{t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},8305:t=>{t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,r,i){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,r,i,this.flipX,this.flipY);else{var n=t;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},3131:t=>{t.exports={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}}},1626:(t,e,r)=>{var i=r(7473),n=r(7347),o=r(8935),s=new i({initialize:function(t,e){this.gameObject=t,this.isPost=e,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(t){return void 0===t&&(t=0),this.padding=t,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(t){if(!this.isPost){var e=this.gameObject.scene.sys.renderer;e&&e.pipelines?(this.gameObject.pipeline=e.pipelines.FX_PIPELINE,void 0!==t&&(this.padding=t),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var t=this.list,e=0;e<t.length;e++)t[e].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(t){var e;if(this.isPost){var r=this.gameObject.getPostPipeline(String(t.type));for(Array.isArray(r)||(r=[r]),e=0;e<r.length;e++){var i=r[e];if(i.controller===t){this.gameObject.removePostPipeline(i),t.destroy();break}}}else{var n=this.list;for(e=0;e<n.length;e++)n[e]===t&&(o(n,e),t.destroy())}return this.gameObject},disable:function(t){return void 0===t&&(t=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,t&&this.clear(),this.gameObject},add:function(t,e){if(!this.isPost)return this.enabled||this.enable(),this.list.push(t),t;var r=String(t.type);this.gameObject.setPostPipeline(r,e);var i=this.gameObject.getPostPipeline(r);return i?(Array.isArray(i)&&(i=i.pop()),i.controller=t,t):void 0},addGlow:function(t,e,r,i,o,s){return this.add(new n.Glow(this.gameObject,t,e,r,i),{quality:o,distance:s})},addShadow:function(t,e,r,i,o,s,a){return this.add(new n.Shadow(this.gameObject,t,e,r,i,o,s,a))},addPixelate:function(t){return this.add(new n.Pixelate(this.gameObject,t))},addVignette:function(t,e,r,i){return this.add(new n.Vignette(this.gameObject,t,e,r,i))},addShine:function(t,e,r,i){return this.add(new n.Shine(this.gameObject,t,e,r,i))},addBlur:function(t,e,r,i,o,s){return this.add(new n.Blur(this.gameObject,t,e,r,i,o,s))},addGradient:function(t,e,r,i,o,s,a,h){return this.add(new n.Gradient(this.gameObject,t,e,r,i,o,s,a,h))},addBloom:function(t,e,r,i,o,s){return this.add(new n.Bloom(this.gameObject,t,e,r,i,o,s))},addColorMatrix:function(){return this.add(new n.ColorMatrix(this.gameObject))},addCircle:function(t,e,r,i,o){return this.add(new n.Circle(this.gameObject,t,e,r,i,o))},addBarrel:function(t){return this.add(new n.Barrel(this.gameObject,t))},addDisplacement:function(t,e,r){return this.add(new n.Displacement(this.gameObject,t,e,r))},addWipe:function(t,e,r){return this.add(new n.Wipe(this.gameObject,t,e,r))},addReveal:function(t,e,r){return this.add(new n.Wipe(this.gameObject,t,e,r,!0))},addBokeh:function(t,e,r){return this.add(new n.Bokeh(this.gameObject,t,e,r))},addTiltShift:function(t,e,r,i,o,s){return this.add(new n.Bokeh(this.gameObject,t,e,r,!0,i,o,s))},destroy:function(){this.clear(),this.gameObject=null}});t.exports=s},9660:t=>{t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},3671:(t,e,r)=>{var i=r(1392),n=r(9876),o=r(2529),s={prepareBoundsOutput:function(t,e){return void 0===e&&(e=!1),0!==this.rotation&&n(t,this.x,this.y,this.rotation),e&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function(t,e){return void 0===t&&(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getTopLeft:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopRight:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getLeftCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getRightCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getBottomLeft:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomRight:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBounds:function(t){var e,r,n,o,s,a,h,u;if(void 0===t&&(t=new i),this.parentContainer){var c=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),c.transformPoint(t.x,t.y,t),e=t.x,r=t.y,this.getTopRight(t),c.transformPoint(t.x,t.y,t),n=t.x,o=t.y,this.getBottomLeft(t),c.transformPoint(t.x,t.y,t),s=t.x,a=t.y,this.getBottomRight(t),c.transformPoint(t.x,t.y,t),h=t.x,u=t.y}else this.getTopLeft(t),e=t.x,r=t.y,this.getTopRight(t),n=t.x,o=t.y,this.getBottomLeft(t),s=t.x,a=t.y,this.getBottomRight(t),h=t.x,u=t.y;return t.x=Math.min(e,n,s,h),t.y=Math.min(r,o,a,u),t.width=Math.max(e,n,s,h)-t.x,t.height=Math.max(r,o,a,u)-t.y,t}};t.exports=s},2246:(t,e,r)=>{var i=r(7499),n=r(6726),o={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t,e,r,n,o){return void 0===t&&(this.texture||this.shader||this.geom)&&(t=this),new i(this.scene,t,e,r,n,o)},createGeometryMask:function(t){return void 0!==t||"Graphics"!==this.type&&!this.geom||(t=this),new n(this.scene,t)}};t.exports=o},5085:t=>{t.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displayOriginX=t,this.displayOriginY=e,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},77:(t,e,r)=>{var i=r(7149),n=r(1864),o=r(5851),s=r(3747),a=r(2529),h={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:s.PLAYING_FORWARD,setPath:function(t,e){void 0===e&&(e=this.pathConfig);var r=this.pathTween;return r&&r.isPlaying()&&r.stop(),this.path=t,e&&this.startFollow(e),this},setRotateToPath:function(t,e){return void 0===e&&(e=0),this.rotateToPath=t,this.pathRotationOffset=e,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,e){void 0===t&&(t={}),void 0===e&&(e=0);var r=this.pathTween;r&&r.isPlaying()&&r.stop(),"number"==typeof t&&(t={duration:t}),t.from=o(t,"from",0),t.to=o(t,"to",1);var h=n(t,"positionOnPath",!1);this.rotateToPath=n(t,"rotateToPath",!1),this.pathRotationOffset=o(t,"rotationOffset",0);var u=o(t,"startAt",e);if(u&&(t.onStart=function(t){var e=t.data[0];e.progress=u,e.elapsed=e.duration*u;var r=e.ease(e.progress);e.current=e.start+(e.end-e.start)*r,e.setTargetValue()}),this.pathOffset||(this.pathOffset=new a(this.x,this.y)),this.pathVector||(this.pathVector=new a),this.pathDelta||(this.pathDelta=new a),this.pathDelta.reset(),t.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),h&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=s.PLAYING_FORWARD,this.rotateToPath){var c=this.path.getPoint(.1);this.rotation=Math.atan2(c.y-this.y,c.x-this.x)+i(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t&&t.data){var e=t.data[0],r=this.pathDelta,n=this.pathVector;if(r.copy(n).negate(),e.state===s.COMPLETE)return this.path.getPoint(e.end,n),r.add(n),n.add(this.pathOffset),void this.setPosition(n.x,n.y);if(e.state!==s.PLAYING_FORWARD&&e.state!==s.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),n),r.add(n),n.add(this.pathOffset);var o=this.x,a=this.y;this.setPosition(n.x,n.y);var h=this.x-o,u=this.y-a;if(0===h&&0===u)return;if(e.state!==this._prevDirection)return void(this._prevDirection=e.state);this.rotateToPath&&(this.rotation=Math.atan2(u,h)+i(this.pathRotationOffset))}}};t.exports=h},986:(t,e,r)=>{var i=r(3911),n={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(t){this.pipelineData={};var e=this.scene.sys.renderer;if(!e)return!1;var r=e.pipelines;if(r){void 0===t&&(t=r.default);var i=r.get(t);if(i)return this.defaultPipeline=i,this.pipeline=i,!0}return!1},setPipeline:function(t,e,r){var n=this.scene.sys.renderer;if(!n)return this;var o=n.pipelines;if(o){var s=o.get(t);s&&(this.pipeline=s),e&&(this.pipelineData=r?i(e):e)}return this},setPipelineData:function(t,e){var r=this.pipelineData;return void 0===e?delete r[t]:r[t]=e,this},resetPipeline:function(t){return void 0===t&&(t=!1),this.pipeline=this.defaultPipeline,t&&(this.pipelineData={}),null!==this.pipeline},getPipelineName:function(){return this.pipeline.name}};t.exports=n},4461:(t,e,r)=>{var i=r(3911),n=r(1626),o=r(8935),s={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(t){this.postPipelines=[],this.postPipelineData={},this.postFX=new n(this,!0),t&&(this.preFX=new n(this,!1))},setPostPipeline:function(t,e,r){var n=this.scene.sys.renderer;if(!n)return this;var o=n.pipelines;if(o){Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++){var a=o.getPostPipeline(t[s],this,e);a&&this.postPipelines.push(a)}e&&(this.postPipelineData=r?i(e):e)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(t,e){var r=this.postPipelineData;return void 0===e?delete r[t]:r[t]=e,this},getPostPipeline:function(t){for(var e="string"==typeof t,r=this.postPipelines,i=[],n=0;n<r.length;n++){var o=r[n];(e&&o.name===t||!e&&o instanceof t)&&i.push(o)}return 1===i.length?i[0]:i},resetPostPipeline:function(t){void 0===t&&(t=!1);for(var e=this.postPipelines,r=0;r<e.length;r++)e[r].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.postPipelineData={})},removePostPipeline:function(t){for(var e="string"==typeof t,r=this.postPipelines,i=r.length-1;i>=0;i--){var n=r[i];(e&&n.name===t||!e&&n===t)&&(n.destroy(),o(r,i))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};t.exports=s},4627:t=>{t.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,e){return void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this}}},1868:t=>{var e={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){t||(t=this.frame),this.width=t.realWidth,this.height=t.realHeight;var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=this.width,e.hitArea.height=this.height),this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}};t.exports=e},4976:(t,e,r)=>{var i=r(2362),n={texture:null,frame:null,isCropped:!1,setTexture:function(t,e,r,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e,r,i)},setFrame:function(t,e,r){return void 0===e&&(e=!0),void 0===r&&(r=!0),t instanceof i?(this.texture=this.scene.sys.textures.get(t.texture.key),this.frame=t):this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=n},9243:(t,e,r)=>{var i=r(2362),n={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,r,i){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,e,r,i,this.flipX,this.flipY);else{var n=t;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,r){return void 0===e&&(e=!0),void 0===r&&(r=!0),t instanceof i?(this.texture=this.scene.sys.textures.get(t.texture.key),this.frame=t):this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=n},5693:t=>{t.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,e,r,i){return void 0===t&&(t=16777215),void 0===e&&(e=t,r=t,i=t),this.tintTopLeft=t,this.tintTopRight=e,this.tintBottomLeft=r,this.tintBottomRight=i,this.tintFill=!1,this},setTintFill:function(t,e,r,i){return this.setTint(t,e,r,i),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}}},6125:t=>{t.exports=function(t){var e={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(e.textureKey=t.texture.key,e.frameKey=t.frame.name),e}},3212:(t,e,r)=>{var i=r(7425),n=r(4227),o=r(7556),s=r(3692),a=r(2820),h=r(2529),u={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===t?this.renderFlags&=-5:0!==this._scaleY&&(this.renderFlags|=4)}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===t?this.renderFlags&=-5:0!==this._scaleX&&(this.renderFlags|=4)}},angle:{get:function(){return a(this._rotation*i.RAD_TO_DEG)},set:function(t){this.rotation=a(t)*i.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=s(t)}},setPosition:function(t,e,r,i){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=r,this.w=i,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,e,r,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=this.scene.sys.scale.width),void 0===i&&(i=this.scene.sys.scale.height),this.x=t+Math.random()*r,this.y=e+Math.random()*i,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new n),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,e){void 0===t&&(t=new n);var r=this.parentContainer;if(!r)return this.getLocalTransformMatrix(t);for(e||(e=new n),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);r;)e.applyITRS(r.x,r.y,r._rotation,r._scaleX,r._scaleY),e.multiply(t,t),r=r.parentContainer;return t},getLocalPoint:function(t,e,r,i){r||(r=new h),i||(i=this.scene.sys.cameras.main);var n=i.scrollX,s=i.scrollY,a=t+n*this.scrollFactorX-n,u=e+s*this.scrollFactorY-s;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(a,u,r):o(a,u,this.x,this.y,this.rotation,this.scaleX,this.scaleY,r),this._originComponent&&(r.x+=this._displayOriginX,r.y+=this._displayOriginY),r},getParentRotation:function(){for(var t=0,e=this.parentContainer;e;)t+=e.rotation,e=e.parentContainer;return t}};t.exports=u},4227:(t,e,r)=>{var i=r(7473),n=r(7425),o=r(2529),s=new i({initialize:function(t,e,r,i,n,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=0),this.matrix=new Float32Array([t,e,r,i,n,o,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,e=t[0],r=t[1],i=t[2],o=t[3];return e||r?r>0?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):i||o?n.TAU-(o>0?Math.acos(-i/this.scaleY):-Math.acos(i/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,e){var r=this.matrix;return r[4]=r[0]*t+r[2]*e+r[4],r[5]=r[1]*t+r[3]*e+r[5],this},scale:function(t,e){var r=this.matrix;return r[0]*=t,r[1]*=t,r[2]*=e,r[3]*=e,this},rotate:function(t){var e=Math.sin(t),r=Math.cos(t),i=this.matrix,n=i[0],o=i[1],s=i[2],a=i[3];return i[0]=n*r+s*e,i[1]=o*r+a*e,i[2]=n*-e+s*r,i[3]=o*-e+a*r,this},multiply:function(t,e){var r=this.matrix,i=t.matrix,n=r[0],o=r[1],s=r[2],a=r[3],h=r[4],u=r[5],c=i[0],l=i[1],f=i[2],p=i[3],d=i[4],v=i[5],y=void 0===e?r:e.matrix;return y[0]=c*n+l*s,y[1]=c*o+l*a,y[2]=f*n+p*s,y[3]=f*o+p*a,y[4]=d*n+v*s+h,y[5]=d*o+v*a+u,y},multiplyWithOffset:function(t,e,r){var i=this.matrix,n=t.matrix,o=i[0],s=i[1],a=i[2],h=i[3],u=e*o+r*a+i[4],c=e*s+r*h+i[5],l=n[0],f=n[1],p=n[2],d=n[3],v=n[4],y=n[5];return i[0]=l*o+f*a,i[1]=l*s+f*h,i[2]=p*o+d*a,i[3]=p*s+d*h,i[4]=v*o+y*a+u,i[5]=v*s+y*h+c,this},transform:function(t,e,r,i,n,o){var s=this.matrix,a=s[0],h=s[1],u=s[2],c=s[3],l=s[4],f=s[5];return s[0]=t*a+e*u,s[1]=t*h+e*c,s[2]=r*a+i*u,s[3]=r*h+i*c,s[4]=n*a+o*u+l,s[5]=n*h+o*c+f,this},transformPoint:function(t,e,r){void 0===r&&(r={x:0,y:0});var i=this.matrix,n=i[0],o=i[1],s=i[2],a=i[3],h=i[4],u=i[5];return r.x=t*n+e*s+h,r.y=t*o+e*a+u,r},invert:function(){var t=this.matrix,e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],a=e*n-r*i;return t[0]=n/a,t[1]=-r/a,t[2]=-i/a,t[3]=e/a,t[4]=(i*s-n*o)/a,t[5]=-(e*s-r*o)/a,this},copyFrom:function(t){var e=this.matrix;return e[0]=t.a,e[1]=t.b,e[2]=t.c,e[3]=t.d,e[4]=t.e,e[5]=t.f,this},copyFromArray:function(t){var e=this.matrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},copyToContext:function(t){var e=this.matrix;return t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t},setToContext:function(t){return t.setTransform(this),t},copyToArray:function(t){var e=this.matrix;return void 0===t?t=[e[0],e[1],e[2],e[3],e[4],e[5]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]),t},setTransform:function(t,e,r,i,n,o){var s=this.matrix;return s[0]=t,s[1]=e,s[2]=r,s[3]=i,s[4]=n,s[5]=o,this},decomposeMatrix:function(){var t=this.decomposedMatrix,e=this.matrix,r=e[0],i=e[1],n=e[2],o=e[3],s=r*o-i*n;if(t.translateX=e[4],t.translateY=e[5],r||i){var a=Math.sqrt(r*r+i*i);t.rotation=i>0?Math.acos(r/a):-Math.acos(r/a),t.scaleX=a,t.scaleY=s/a}else if(n||o){var h=Math.sqrt(n*n+o*o);t.rotation=.5*Math.PI-(o>0?Math.acos(-n/h):-Math.acos(n/h)),t.scaleX=s/h,t.scaleY=h}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,e,r,i,n){var o=this.matrix,s=Math.sin(r),a=Math.cos(r);return o[4]=t,o[5]=e,o[0]=a*i,o[1]=s*i,o[2]=-s*n,o[3]=a*n,this},applyInverse:function(t,e,r){void 0===r&&(r=new o);var i=this.matrix,n=i[0],s=i[1],a=i[2],h=i[3],u=i[4],c=i[5],l=1/(n*h+a*-s);return r.x=h*l*t+-a*l*e+(c*a-u*h)*l,r.y=n*l*e+-s*l*t+(-c*n+u*s)*l,r},setQuad:function(t,e,r,i,n,o){void 0===n&&(n=!1),void 0===o&&(o=this.quad);var s=this.matrix,a=s[0],h=s[1],u=s[2],c=s[3],l=s[4],f=s[5];return n?(o[0]=Math.round(t*a+e*u+l),o[1]=Math.round(t*h+e*c+f),o[2]=Math.round(t*a+i*u+l),o[3]=Math.round(t*h+i*c+f),o[4]=Math.round(r*a+i*u+l),o[5]=Math.round(r*h+i*c+f),o[6]=Math.round(r*a+e*u+l),o[7]=Math.round(r*h+e*c+f)):(o[0]=t*a+e*u+l,o[1]=t*h+e*c+f,o[2]=t*a+i*u+l,o[3]=t*h+i*c+f,o[4]=r*a+i*u+l,o[5]=r*h+i*c+f,o[6]=r*a+e*u+l,o[7]=r*h+e*c+f),o},getX:function(t,e){return t*this.a+e*this.c+this.e},getY:function(t,e){return t*this.b+e*this.d+this.f},getXRound:function(t,e,r){var i=this.getX(t,e);return r&&(i=Math.round(i)),i},getYRound:function(t,e,r){var i=this.getY(t,e);return r&&(i=Math.round(i)),i},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});t.exports=s},8414:t=>{t.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}}},4286:(t,e,r)=>{t.exports={Alpha:r(4344),AlphaSingle:r(4518),BlendMode:r(5173),ComputedSize:r(1991),Crop:r(8305),Depth:r(3131),Flip:r(9660),FX:r(1626),GetBounds:r(3671),Mask:r(2246),Origin:r(5085),PathFollower:r(77),Pipeline:r(986),PostPipeline:r(4461),ScrollFactor:r(4627),Size:r(1868),Texture:r(4976),TextureCrop:r(9243),Tint:r(5693),ToJSON:r(6125),Transform:r(3212),TransformMatrix:r(4227),Visible:r(8414)}},7361:(t,e,r)=>{var i=r(1953),n=r(8351),o=r(7473),s=r(4286),a=r(3389),h=r(2273),u=r(1392),c=r(3232),l=r(9422),f=r(2529),p=new o({Extends:h,Mixins:[s.AlphaSingle,s.BlendMode,s.ComputedSize,s.Depth,s.Mask,s.PostPipeline,s.Transform,s.Visible,c],initialize:function(t,e,r,i){h.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new s.TransformMatrix,this.tempTransformMatrix=new s.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(e,r),this.setBlendMode(n.SKIP_CHECK),i&&this.add(i)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new u),t.setTo(this.x,this.y,0,0),this.parentContainer){var e=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(e.x,e.y,0,0)}if(this.list.length>0){var r=this.list,i=new u,n=!1;t.setEmpty();for(var o=0;o<r.length;o++){var s=r[o];s.getBounds&&(s.getBounds(i),n?l(i,t,t):(t.setTo(i.x,i.y,i.width,i.height),n=!0))}}return t},addHandler:function(t){t.once(a.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.parentContainer=this,t.removeFromDisplayList(),t.addedToScene())},removeHandler:function(t){t.off(a.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer=null,t.removedFromScene(),t.addToDisplayList())},pointToContainer:function(t,e){void 0===e&&(e=new f),this.parentContainer?this.parentContainer.pointToContainer(t,e):(e.x=t.x,e.y=t.y);var r=this.tempTransformMatrix;return r.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),r.invert(),r.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return i.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return i.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,r){return e[t]-r[t]}),i.StableSort(this.list,e),this):this},getByName:function(t){return i.GetFirst(this.list,"name",t)},getRandom:function(t,e){return i.GetRandom(this.list,t,e)},getFirst:function(t,e,r,n){return i.GetFirst(this.list,t,e,r,n)},getAll:function(t,e,r,n){return i.GetAll(this.list,t,e,r,n)},count:function(t,e,r,n){return i.CountAllMatching(this.list,t,e,r,n)},swap:function(t,e){return i.Swap(this.list,t,e),this},moveTo:function(t,e){return i.MoveTo(this.list,t,e),this},moveAbove:function(t,e){return i.MoveAbove(this.list,t,e),this},moveBelow:function(t,e){return i.MoveBelow(this.list,t,e),this},remove:function(t,e){var r=i.Remove(this.list,t,this.removeHandler,this);if(e&&r){Array.isArray(r)||(r=[r]);for(var n=0;n<r.length;n++)r[n].destroy()}return this},removeAt:function(t,e){var r=i.RemoveAt(this.list,t,this.removeHandler,this);return e&&r&&r.destroy(),this},removeBetween:function(t,e,r){var n=i.RemoveBetween(this.list,t,e,this.removeHandler,this);if(r)for(var o=0;o<n.length;o++)n[o].destroy();return this},removeAll:function(t){var e=this.list;if(t){for(var r=0;r<e.length;r++)e[r]&&e[r].scene&&(e[r].off(a.DESTROY,this.remove,this),e[r].destroy());this.list=[]}else i.RemoveBetween(e,0,e.length,this.removeHandler,this);return this},bringToTop:function(t){return i.BringToTop(this.list,t),this},sendToBack:function(t){return i.SendToBack(this.list,t),this},moveUp:function(t){return i.MoveUp(this.list,t),this},moveDown:function(t){return i.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return i.Shuffle(this.list),this},replace:function(t,e,r){return i.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),r&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,r,n){return i.SetAll(this.list,t,e,r,n),this},each:function(t,e){var r,i=[null],n=this.list.slice(),o=n.length;for(r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<o;r++)i[0]=n[r],t.apply(e,i);return this},iterate:function(t,e){var r,i=[null];for(r=2;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<this.list.length;r++)i[0]=this.list[r],t.apply(e,i);return this},setScrollFactor:function(t,e,r){return void 0===e&&(e=t),void 0===r&&(r=!1),this.scrollFactorX=t,this.scrollFactorY=e,r&&(i.SetAll(this.list,"scrollFactorX",t),i.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=p},2840:t=>{t.exports=function(t,e,r,i){r.addToRenderList(e);var n=e.list;if(0!==n.length){var o=e.localTransform;i?(o.loadIdentity(),o.multiply(i),o.translate(e.x,e.y),o.rotate(e.rotation),o.scale(e.scaleX,e.scaleY)):o.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var s=-1!==e.blendMode;s||t.setBlendMode(0);var a=e._alpha,h=e.scrollFactorX,u=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,r);for(var c=0;c<n.length;c++){var l=n[c];if(l.willRender(r)){var f=l.alpha,p=l.scrollFactorX,d=l.scrollFactorY;s||l.blendMode===t.currentBlendMode||t.setBlendMode(l.blendMode),l.setScrollFactor(p*h,d*u),l.setAlpha(f*a),l.renderCanvas(t,l,r,o),l.setAlpha(f),l.setScrollFactor(p,d)}}e.mask&&e.mask.postRenderCanvas(t)}}},3232:(t,e,r)=>{var i,n,o=r(1984);i=r(4343),n=r(2840),t.exports={renderWebGL:i,renderCanvas:n}},4343:t=>{t.exports=function(t,e,r,i){r.addToRenderList(e);var n=e.list,o=n.length;if(0!==o){var s=e.localTransform;i?(s.loadIdentity(),s.multiply(i),s.translate(e.x,e.y),s.rotate(e.rotation),s.scale(e.scaleX,e.scaleY)):s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.pipelines.preBatch(e);var a=-1!==e.blendMode;a||t.setBlendMode(0);for(var h=e.alpha,u=e.scrollFactorX,c=e.scrollFactorY,l=0;l<o;l++){var f=n[l];if(f.willRender(r)){var p,d,v,y;if(void 0!==f.alphaTopLeft)p=f.alphaTopLeft,d=f.alphaTopRight,v=f.alphaBottomLeft,y=f.alphaBottomRight;else{var g=f.alpha;p=g,d=g,v=g,y=g}var m=f.scrollFactorX,x=f.scrollFactorY;a||f.blendMode===t.currentBlendMode||t.setBlendMode(f.blendMode);var b=f.mask;b&&b.preRenderWebGL(t,f,r);var w=f.type;w!==t.currentType&&(t.newType=!0,t.currentType=w),t.nextTypeMatch=l<o-1&&n[l+1].type===t.currentType,f.setScrollFactor(m*u,x*c),f.setAlpha(p*h,d*h,v*h,y*h),f.renderWebGL(t,f,r,s,e),f.setAlpha(p,d,v,y),f.setScrollFactor(m,x),b&&b.postRenderWebGL(t,r),t.newType=!1}}t.pipelines.postBatch(e)}}},6608:t=>{t.exports="addedtoscene"},4265:t=>{t.exports="destroy"},8671:t=>{t.exports="removedfromscene"},3420:t=>{t.exports="complete"},601:t=>{t.exports="created"},7919:t=>{t.exports="error"},6231:t=>{t.exports="locked"},5241:t=>{t.exports="loop"},8325:t=>{t.exports="playing"},3356:t=>{t.exports="play"},7513:t=>{t.exports="seeked"},5788:t=>{t.exports="seeking"},7111:t=>{t.exports="stalled"},8118:t=>{t.exports="stop"},9184:t=>{t.exports="textureready"},4287:t=>{t.exports="unlocked"},857:t=>{t.exports="unsupported"},3389:(t,e,r)=>{t.exports={ADDED_TO_SCENE:r(6608),DESTROY:r(4265),REMOVED_FROM_SCENE:r(8671),VIDEO_COMPLETE:r(3420),VIDEO_CREATED:r(601),VIDEO_ERROR:r(7919),VIDEO_LOCKED:r(6231),VIDEO_LOOP:r(5241),VIDEO_PLAY:r(3356),VIDEO_PLAYING:r(8325),VIDEO_SEEKED:r(7513),VIDEO_SEEKING:r(5788),VIDEO_STALLED:r(7111),VIDEO_STOP:r(8118),VIDEO_TEXTURE:r(9184),VIDEO_UNLOCKED:r(4287),VIDEO_UNSUPPORTED:r(857)}},1643:t=>{t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},8881:(t,e,r)=>{var i=r(7655);t.exports=function(t,e,r){return void 0===r&&(r=new i),r.x=t.x1+(t.x2-t.x1)*e,r.y=t.y1+(t.y2-t.y1)*e,r}},4479:(t,e,r)=>{var i=r(4771),n=r(7655);t.exports=function(t,e,r,o){void 0===o&&(o=[]),!e&&r>0&&(e=i(t)/r);for(var s=t.x1,a=t.y1,h=t.x2,u=t.y2,c=0;c<e;c++){var l=c/e,f=s+(h-s)*l,p=a+(u-a)*l;o.push(new n(f,p))}return o}},4771:t=>{t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},284:(t,e,r)=>{var i=r(7473),n=r(8881),o=r(4479),s=r(1643),a=r(3915),h=r(2529),u=new i({initialize:function(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.type=s.LINE,this.x1=t,this.y1=e,this.x2=r,this.y2=i},getPoint:function(t,e){return n(this,t,e)},getPoints:function(t,e,r){return o(this,t,e,r)},getRandomPoint:function(t){return a(this,t)},setTo:function(t,e,r,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x1=t,this.y1=e,this.x2=r,this.y2=i,this},setFromObjects:function(t,e){return this.x1=t.x,this.y1=t.y,this.x2=e.x,this.y2=e.y,this},getPointA:function(t){return void 0===t&&(t=new h),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new h),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=u},3915:(t,e,r)=>{var i=r(7655);t.exports=function(t,e){void 0===e&&(e=new i);var r=Math.random();return e.x=t.x1+r*(t.x2-t.x1),e.y=t.y1+r*(t.y2-t.y1),e}},7655:(t,e,r)=>{var i=r(7473),n=r(1643),o=new i({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.type=n.POINT,this.x=t,this.y=e},setTo:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}});t.exports=o},5956:t=>{t.exports=function(t,e,r){return!(t.width<=0||t.height<=0)&&t.x<=e&&t.x+t.width>=e&&t.y<=r&&t.y+t.height>=r}},716:(t,e,r)=>{var i=r(7120),n=r(7655);t.exports=function(t,e,r){if(void 0===r&&(r=new n),e<=0||e>=1)return r.x=t.x,r.y=t.y,r;var o=i(t)*e;return e>.5?(o-=t.width+t.height)<=t.width?(r.x=t.right-o,r.y=t.bottom):(r.x=t.x,r.y=t.bottom-(o-t.width)):o<=t.width?(r.x=t.x+o,r.y=t.y):(r.x=t.right,r.y=t.y+(o-t.width)),r}},8151:(t,e,r)=>{var i=r(716),n=r(7120);t.exports=function(t,e,r,o){void 0===o&&(o=[]),!e&&r>0&&(e=n(t)/r);for(var s=0;s<e;s++){var a=s/e;o.push(i(t,a))}return o}},7120:t=>{t.exports=function(t){return 2*(t.width+t.height)}},2161:(t,e,r)=>{var i=r(7655);t.exports=function(t,e){return void 0===e&&(e=new i),e.x=t.x+Math.random()*t.width,e.y=t.y+Math.random()*t.height,e}},1392:(t,e,r)=>{var i=r(7473),n=r(5956),o=r(716),s=r(8151),a=r(1643),h=r(284),u=r(2161),c=new i({initialize:function(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.type=a.RECTANGLE,this.x=t,this.y=e,this.width=r,this.height=i},contains:function(t,e){return n(this,t,e)},getPoint:function(t,e){return o(this,t,e)},getPoints:function(t,e,r){return s(this,t,e,r)},getRandomPoint:function(t){return u(this,t)},setTo:function(t,e,r,i){return this.x=t,this.y=e,this.width=r,this.height=i,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new h),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new h),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=c},9422:(t,e,r)=>{var i=r(1392);t.exports=function(t,e,r){void 0===r&&(r=new i);var n=Math.min(t.x,e.x),o=Math.min(t.y,e.y),s=Math.max(t.right,e.right)-n,a=Math.max(t.bottom,e.bottom)-o;return r.setTo(n,o,s,a)}},1593:(t,e,r)=>{var i=r(7473),n=r(4359),o=r(1179),s=r(4597),a=r(5593),h=r(7410),u=r(5874),c=r(707),l=new i({initialize:function(t,e){if(this.loader=t,this.cache=s(e,"cache",!1),this.type=s(e,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=s(e,"key",!1);var r=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+r),!this.key)throw new Error("Invalid File key: "+this.key);var i=s(e,"url");void 0===i?i=t.path+r+"."+s(e,"extension",""):"string"!=typeof i||i.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)||(i=t.path+i),this.url=i,this.src="",this.xhrSettings=c(s(e,"responseType",void 0)),s(e,"xhrSettings",!1)&&(this.xhrSettings=h(this.xhrSettings,s(e,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?n.FILE_POPULATED:n.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=s(e,"config",{}),this.multiFile,this.linkFile},setLink:function(t){this.linkFile=t,t.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===n.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=n.FILE_LOADING,this.src=a(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=u(this,this.loader.xhr))},onLoad:function(t,e){var r=t.responseURL&&this.loader.localSchemes.some((function(e){return 0===t.responseURL.indexOf(e)}))&&0===e.target.status,i=!(e.target&&200!==e.target.status)||r;4===t.readyState&&t.status>=400&&t.status<=599&&(i=!1),this.state=n.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,i)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(o.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=n.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=n.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=n.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(t){if(this.state!==n.FILE_PENDING_DESTROY){void 0===t&&(t=this.data);var e=this.key,r=this.type;this.loader.emit(o.FILE_COMPLETE,e,r,t),this.loader.emit(o.FILE_KEY_COMPLETE+r+"-"+e,e,r,t),this.loader.flagForRemoval(this),this.state=n.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});l.createObjectURL=function(t,e,r){if("function"==typeof URL)t.src=URL.createObjectURL(e);else{var i=new FileReader;i.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||r)+";base64,"+i.result.split(",")[1]},i.onerror=t.onerror,i.readAsDataURL(e)}},l.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=l},9845:t=>{var e={},r={install:function(t){for(var r in e)t[r]=e[r]},register:function(t,r){e[t]=r},destroy:function(){e={}}};t.exports=r},5593:t=>{t.exports=function(t,e){return!!t.url&&(t.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?t.url:e+t.url)}},7410:(t,e,r)=>{var i=r(1030),n=r(707);t.exports=function(t,e){var r=void 0===t?n():i({},t);if(e)for(var o in e)void 0!==e[o]&&(r[o]=e[o]);return r}},3137:(t,e,r)=>{var i=r(7473),n=r(4359),o=r(1179),s=new i({initialize:function(t,e,r,i){var o=[];i.forEach((function(t){t&&o.push(t)})),this.loader=t,this.type=e,this.key=r;var s=this.key;t.prefix&&""!==t.prefix&&(this.key=t.prefix+s),this.multiKeyIndex=t.multiKeyIndex++,this.files=o,this.state=n.FILE_PENDING,this.complete=!1,this.pending=o.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var a=0;a<o.length;a++)o[a].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,t.type,t.key))},pendingDestroy:function(){if(this.state!==n.FILE_PENDING_DESTROY){var t=this.key,e=this.type;this.loader.emit(o.FILE_COMPLETE,t,e),this.loader.emit(o.FILE_KEY_COMPLETE+e+"-"+t,t,e),this.loader.flagForRemoval(this);for(var r=0;r<this.files.length;r++)this.files[r].pendingDestroy();this.state=n.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});t.exports=s},5874:(t,e,r)=>{var i=r(7410);t.exports=function(t,e){var r=i(e,t.xhrSettings),n=new XMLHttpRequest;if(n.open("GET",t.src,r.async,r.user,r.password),n.responseType=t.xhrSettings.responseType,n.timeout=r.timeout,r.headers)for(var o in r.headers)n.setRequestHeader(o,r.headers[o]);return r.header&&r.headerValue&&n.setRequestHeader(r.header,r.headerValue),r.requestedWith&&n.setRequestHeader("X-Requested-With",r.requestedWith),r.overrideMimeType&&n.overrideMimeType(r.overrideMimeType),r.withCredentials&&(n.withCredentials=!0),n.onload=t.onLoad.bind(t,n),n.onerror=t.onError.bind(t,n),n.onprogress=t.onProgress.bind(t),n.send(),n}},707:t=>{t.exports=function(t,e,r,i,n,o){return void 0===t&&(t=""),void 0===e&&(e=!0),void 0===r&&(r=""),void 0===i&&(i=""),void 0===n&&(n=0),void 0===o&&(o=!1),{responseType:t,async:e,user:r,password:i,timeout:n,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:o}}},4359:t=>{t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20}},462:t=>{t.exports="addfile"},7297:t=>{t.exports="complete"},8660:t=>{t.exports="filecomplete"},6484:t=>{t.exports="filecomplete-"},7972:t=>{t.exports="loaderror"},1906:t=>{t.exports="load"},1441:t=>{t.exports="fileprogress"},1072:t=>{t.exports="postprocess"},1927:t=>{t.exports="progress"},6597:t=>{t.exports="start"},1179:(t,e,r)=>{t.exports={ADD:r(462),COMPLETE:r(7297),FILE_COMPLETE:r(8660),FILE_KEY_COMPLETE:r(6484),FILE_LOAD_ERROR:r(7972),FILE_LOAD:r(1906),FILE_PROGRESS:r(1441),POST_PROCESS:r(1072),PROGRESS:r(1927),START:r(6597)}},6732:(t,e,r)=>{var i=r(7473),n=r(4359),o=r(1593),s=r(9845),a=r(4597),h=r(2482),u=r(5593),c=new i({Extends:o,initialize:function t(e,r,i,n,s){var u,c="png";if(h(r)){var l=r;r=a(l,"key"),i=a(l,"url"),u=a(l,"normalMap"),n=a(l,"xhrSettings"),c=a(l,"extension",c),s=a(l,"frameConfig")}Array.isArray(i)&&(u=i[1],i=i[0]);var f={type:"image",cache:e.textureManager,extension:c,responseType:"blob",key:r,url:i,xhrSettings:n,config:s};if(o.call(this,e,f),u){var p=new t(e,this.key,u,n,s);p.type="normalMap",this.setLink(p),e.addFile(p)}this.useImageElementLoad="HTMLImageElement"===e.imageLoadType,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){o.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){o.revokeObjectURL(t.data),t.onProcessError()},o.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var t=this.state;this.state=n.FILE_PROCESSING,t===n.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){if(this.state=n.FILE_LOADING,this.src=u(this,this.loader.baseURL),0===this.src.indexOf("data:"))console.warn("Local data URIs are not supported: "+this.key);else{this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){t.state=n.FILE_LOADED,t.loader.nextFile(t,!0)},this.data.onerror=function(){t.loader.nextFile(t,!1)},this.data.src=this.src}},addToCache:function(){var t=this.linkFile;t?t.state>=n.FILE_COMPLETE&&("spritesheet"===t.type?t.addToCache():"normalMap"===this.type?this.cache.addImage(this.key,t.data,this.data):this.cache.addImage(this.key,this.data,t.data)):this.cache.addImage(this.key,this.data)}});s.register("image",(function(t,e,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new c(this,t[i]));else this.addFile(new c(this,t,e,r));return this})),t.exports=c},704:(t,e,r)=>{var i=r(7473),n=r(4359),o=r(1593),s=r(9845),a=r(4597),h=r(5851),u=r(2482),c=new i({Extends:o,initialize:function(t,e,r,i,s){var c="json";if(u(e)){var l=e;e=a(l,"key"),r=a(l,"url"),i=a(l,"xhrSettings"),c=a(l,"extension",c),s=a(l,"dataKey",s)}var f={type:"json",cache:t.cacheManager.json,extension:c,responseType:"text",key:e,url:r,xhrSettings:i,config:s};o.call(this,t,f),u(r)&&(this.data=s?h(r,s):r,this.state=n.FILE_POPULATED)},onProcess:function(){if(this.state!==n.FILE_POPULATED){this.state=n.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(t){throw this.onProcessError(),t}var e=this.config;this.data="string"==typeof e?h(t,e,t):t}this.onProcessComplete()}});s.register("json",(function(t,e,r,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addFile(new c(this,t[n]));else this.addFile(new c(this,t,e,i,r));return this})),t.exports=c},1192:(t,e,r)=>{var i=r(7473),n=r(4359),o=r(1593),s=r(9845),a=r(4597),h=r(2482),u=new i({Extends:o,initialize:function(t,e,r,i){var n="text",s="txt",u=t.cacheManager.text;if(h(e)){var c=e;e=a(c,"key"),r=a(c,"url"),i=a(c,"xhrSettings"),s=a(c,"extension",s),n=a(c,"type",n),u=a(c,"cache",u)}var l={type:n,cache:u,extension:s,responseType:"text",key:e,url:r,xhrSettings:i};o.call(this,t,l)},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});s.register("text",(function(t,e,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new u(this,t[i]));else this.addFile(new u(this,t,e,r));return this})),t.exports=u},3136:t=>{t.exports=function(t){for(var e=0,r=0;r<t.length;r++)e+=+t[r];return e/t.length}},785:(t,e,r)=>{var i=r(3916);t.exports=function(t,e){return i(t)/i(e)/i(t-e)}},7025:t=>{t.exports=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},48:t=>{t.exports=function(t,e,r,i,n){var o=.5*(i-e),s=.5*(n-r),a=t*t;return(2*r-2*i+o+s)*(t*a)+(-3*r+3*i-2*o-s)*a+o*t+r}},5035:t=>{t.exports=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=10);var i=Math.pow(r,-e);return Math.ceil(t*i)/i}},2915:t=>{t.exports=function(t,e,r){return Math.max(e,Math.min(r,t))}},7149:(t,e,r)=>{var i=r(7425);t.exports=function(t){return t*i.DEG_TO_RAD}},2975:t=>{t.exports=function(t,e){return Math.abs(t-e)}},2107:(t,e,r)=>{var i=r(2915),n=r(7473),o=r(9652),s=r(1984),a=new o,h=new n({initialize:function t(e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=t.DefaultOrder),this._x=e,this._y=r,this._z=i,this._order=n,this.onChangeCallback=s},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,e,r,i){return void 0===i&&(i=this._order),this._x=t,this._y=e,this._z=r,this._order=i,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,e,r){return void 0===e&&(e=this._order),void 0===r&&(r=!1),a.fromQuat(t),this.setFromRotationMatrix(a,e,r)},setFromRotationMatrix:function(t,e,r){void 0===e&&(e=this._order),void 0===r&&(r=!1);var n=t.val,o=n[0],s=n[4],a=n[8],h=n[1],u=n[5],c=n[9],l=n[2],f=n[6],p=n[10],d=0,v=0,y=0,g=.99999;switch(e){case"XYZ":v=Math.asin(i(a,-1,1)),Math.abs(a)<g?(d=Math.atan2(-c,p),y=Math.atan2(-s,o)):d=Math.atan2(f,u);break;case"YXZ":d=Math.asin(-i(c,-1,1)),Math.abs(c)<g?(v=Math.atan2(a,p),y=Math.atan2(h,u)):v=Math.atan2(-l,o);break;case"ZXY":d=Math.asin(i(f,-1,1)),Math.abs(f)<g?(v=Math.atan2(-l,p),y=Math.atan2(-s,u)):y=Math.atan2(h,o);break;case"ZYX":v=Math.asin(-i(l,-1,1)),Math.abs(l)<g?(d=Math.atan2(f,p),y=Math.atan2(h,o)):y=Math.atan2(-s,u);break;case"YZX":y=Math.asin(i(h,-1,1)),Math.abs(h)<g?(d=Math.atan2(-c,u),v=Math.atan2(-l,o)):v=Math.atan2(a,p);break;case"XZY":y=Math.asin(-i(s,-1,1)),Math.abs(s)<g?(d=Math.atan2(f,u),v=Math.atan2(a,o)):d=Math.atan2(-c,p)}return this._x=d,this._y=v,this._z=y,this._order=e,r&&this.onChangeCallback(this),this}});h.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],h.DefaultOrder="XYZ",t.exports=h},3916:t=>{t.exports=function(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}},104:t=>{t.exports=function(t,e){return Math.random()*(e-t)+t}},4941:t=>{t.exports=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=10);var i=Math.pow(r,-e);return Math.floor(t*i)/i}},1555:(t,e,r)=>{var i=r(2915);t.exports=function(t,e,r){return(r-e)*(t=i(t,0,1))+e}},5005:t=>{t.exports=function(t,e){return t/e/1e3}},3702:t=>{t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},8820:t=>{t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},1743:t=>{t.exports=function(t,e,r){return(e-t)*r+t}},3416:t=>{t.exports=function(t,e,r){return void 0===r&&(r=0),t.clone().lerp(e,r)}},2149:(t,e,r)=>{var i=new(r(7473))({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new i(this)},set:function(t){return this.copy(t)},copy:function(t){var e=this.val,r=t.val;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this},fromMat4:function(t){var e=t.val,r=this.val;return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],this},fromArray:function(t){var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,e=t[1],r=t[2],i=t[5];return t[1]=t[3],t[2]=t[6],t[3]=e,t[5]=t[7],t[6]=r,t[7]=i,this},invert:function(){var t=this.val,e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],a=t[6],h=t[7],u=t[8],c=u*o-s*h,l=-u*n+s*a,f=h*n-o*a,p=e*c+r*l+i*f;return p?(p=1/p,t[0]=c*p,t[1]=(-u*r+i*h)*p,t[2]=(s*r-i*o)*p,t[3]=l*p,t[4]=(u*e-i*a)*p,t[5]=(-s*e+i*n)*p,t[6]=f*p,t[7]=(-h*e+r*a)*p,t[8]=(o*e-r*n)*p,this):null},adjoint:function(){var t=this.val,e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],a=t[6],h=t[7],u=t[8];return t[0]=o*u-s*h,t[1]=i*h-r*u,t[2]=r*s-i*o,t[3]=s*a-n*u,t[4]=e*u-i*a,t[5]=i*n-e*s,t[6]=n*h-o*a,t[7]=r*a-e*h,t[8]=e*o-r*n,this},determinant:function(){var t=this.val,e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],a=t[6],h=t[7],u=t[8];return e*(u*o-s*h)+r*(-u*n+s*a)+i*(h*n-o*a)},multiply:function(t){var e=this.val,r=e[0],i=e[1],n=e[2],o=e[3],s=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=t.val,f=l[0],p=l[1],d=l[2],v=l[3],y=l[4],g=l[5],m=l[6],x=l[7],b=l[8];return e[0]=f*r+p*o+d*h,e[1]=f*i+p*s+d*u,e[2]=f*n+p*a+d*c,e[3]=v*r+y*o+g*h,e[4]=v*i+y*s+g*u,e[5]=v*n+y*a+g*c,e[6]=m*r+x*o+b*h,e[7]=m*i+x*s+b*u,e[8]=m*n+x*a+b*c,this},translate:function(t){var e=this.val,r=t.x,i=t.y;return e[6]=r*e[0]+i*e[3]+e[6],e[7]=r*e[1]+i*e[4]+e[7],e[8]=r*e[2]+i*e[5]+e[8],this},rotate:function(t){var e=this.val,r=e[0],i=e[1],n=e[2],o=e[3],s=e[4],a=e[5],h=Math.sin(t),u=Math.cos(t);return e[0]=u*r+h*o,e[1]=u*i+h*s,e[2]=u*n+h*a,e[3]=u*o-h*r,e[4]=u*s-h*i,e[5]=u*a-h*n,this},scale:function(t){var e=this.val,r=t.x,i=t.y;return e[0]=r*e[0],e[1]=r*e[1],e[2]=r*e[2],e[3]=i*e[3],e[4]=i*e[4],e[5]=i*e[5],this},fromQuat:function(t){var e=t.x,r=t.y,i=t.z,n=t.w,o=e+e,s=r+r,a=i+i,h=e*o,u=e*s,c=e*a,l=r*s,f=r*a,p=i*a,d=n*o,v=n*s,y=n*a,g=this.val;return g[0]=1-(l+p),g[3]=u+y,g[6]=c-v,g[1]=u-y,g[4]=1-(h+p),g[7]=f+d,g[2]=c+v,g[5]=f-d,g[8]=1-(h+l),this},normalFromMat4:function(t){var e=t.val,r=this.val,i=e[0],n=e[1],o=e[2],s=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],f=e[9],p=e[10],d=e[11],v=e[12],y=e[13],g=e[14],m=e[15],x=i*h-n*a,b=i*u-o*a,w=i*c-s*a,E=n*u-o*h,T=n*c-s*h,S=o*c-s*u,_=l*y-f*v,O=l*g-p*v,P=l*m-d*v,M=f*g-p*y,A=f*m-d*y,L=p*m-d*g,C=x*L-b*A+w*M+E*P-T*O+S*_;return C?(C=1/C,r[0]=(h*L-u*A+c*M)*C,r[1]=(u*P-a*L-c*O)*C,r[2]=(a*A-h*P+c*_)*C,r[3]=(o*A-n*L-s*M)*C,r[4]=(i*L-o*P+s*O)*C,r[5]=(n*P-i*A-s*_)*C,r[6]=(y*S-g*T+m*E)*C,r[7]=(g*w-v*S-m*b)*C,r[8]=(v*T-y*w+m*x)*C,this):null}});t.exports=i},9652:(t,e,r)=>{var i=r(7473),n=r(5689),o=1e-6,s=new i({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new s(this)},set:function(t){return this.copy(t)},setValues:function(t,e,r,i,n,o,s,a,h,u,c,l,f,p,d,v){var y=this.val;return y[0]=t,y[1]=e,y[2]=r,y[3]=i,y[4]=n,y[5]=o,y[6]=s,y[7]=a,y[8]=h,y[9]=u,y[10]=c,y[11]=l,y[12]=f,y[13]=p,y[14]=d,y[15]=v,this},copy:function(t){var e=t.val;return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,e,r){var i=a.fromQuat(r).val,n=e.x,o=e.y,s=e.z;return this.setValues(i[0]*n,i[1]*n,i[2]*n,0,i[4]*o,i[5]*o,i[6]*o,0,i[8]*s,i[9]*s,i[10]*s,0,t.x,t.y,t.z,1)},xyz:function(t,e,r){this.identity();var i=this.val;return i[12]=t,i[13]=e,i[14]=r,this},scaling:function(t,e,r){this.zero();var i=this.val;return i[0]=t,i[5]=e,i[10]=r,i[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var t=this.val,e=t[1],r=t[2],i=t[3],n=t[6],o=t[7],s=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=r,t[9]=n,t[11]=t[14],t[12]=i,t[13]=o,t[14]=s,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){var t=this.val,e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],a=t[6],h=t[7],u=t[8],c=t[9],l=t[10],f=t[11],p=t[12],d=t[13],v=t[14],y=t[15],g=e*s-r*o,m=e*a-i*o,x=e*h-n*o,b=r*a-i*s,w=r*h-n*s,E=i*h-n*a,T=u*d-c*p,S=u*v-l*p,_=u*y-f*p,O=c*v-l*d,P=c*y-f*d,M=l*y-f*v,A=g*M-m*P+x*O+b*_-w*S+E*T;return A?(A=1/A,this.setValues((s*M-a*P+h*O)*A,(i*P-r*M-n*O)*A,(d*E-v*w+y*b)*A,(l*w-c*E-f*b)*A,(a*_-o*M-h*S)*A,(e*M-i*_+n*S)*A,(v*x-p*E-y*m)*A,(u*E-l*x+f*m)*A,(o*P-s*_+h*T)*A,(r*_-e*P-n*T)*A,(p*w-d*x+y*g)*A,(c*x-u*w-f*g)*A,(s*S-o*O-a*T)*A,(e*O-r*S+i*T)*A,(d*m-p*b-v*g)*A,(u*b-c*m+l*g)*A)):this},adjoint:function(){var t=this.val,e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],a=t[6],h=t[7],u=t[8],c=t[9],l=t[10],f=t[11],p=t[12],d=t[13],v=t[14],y=t[15];return this.setValues(s*(l*y-f*v)-c*(a*y-h*v)+d*(a*f-h*l),-(r*(l*y-f*v)-c*(i*y-n*v)+d*(i*f-n*l)),r*(a*y-h*v)-s*(i*y-n*v)+d*(i*h-n*a),-(r*(a*f-h*l)-s*(i*f-n*l)+c*(i*h-n*a)),-(o*(l*y-f*v)-u*(a*y-h*v)+p*(a*f-h*l)),e*(l*y-f*v)-u*(i*y-n*v)+p*(i*f-n*l),-(e*(a*y-h*v)-o*(i*y-n*v)+p*(i*h-n*a)),e*(a*f-h*l)-o*(i*f-n*l)+u*(i*h-n*a),o*(c*y-f*d)-u*(s*y-h*d)+p*(s*f-h*c),-(e*(c*y-f*d)-u*(r*y-n*d)+p*(r*f-n*c)),e*(s*y-h*d)-o*(r*y-n*d)+p*(r*h-n*s),-(e*(s*f-h*c)-o*(r*f-n*c)+u*(r*h-n*s)),-(o*(c*v-l*d)-u*(s*v-a*d)+p*(s*l-a*c)),e*(c*v-l*d)-u*(r*v-i*d)+p*(r*l-i*c),-(e*(s*v-a*d)-o*(r*v-i*d)+p*(r*a-i*s)),e*(s*l-a*c)-o*(r*l-i*c)+u*(r*a-i*s))},determinant:function(){var t=this.val,e=t[0],r=t[1],i=t[2],n=t[3],o=t[4],s=t[5],a=t[6],h=t[7],u=t[8],c=t[9],l=t[10],f=t[11],p=t[12],d=t[13],v=t[14],y=t[15];return(e*s-r*o)*(l*y-f*v)-(e*a-i*o)*(c*y-f*d)+(e*h-n*o)*(c*v-l*d)+(r*a-i*s)*(u*y-f*p)-(r*h-n*s)*(u*v-l*p)+(i*h-n*a)*(u*d-c*p)},multiply:function(t){var e=this.val,r=e[0],i=e[1],n=e[2],o=e[3],s=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=e[9],f=e[10],p=e[11],d=e[12],v=e[13],y=e[14],g=e[15],m=t.val,x=m[0],b=m[1],w=m[2],E=m[3];return e[0]=x*r+b*s+w*c+E*d,e[1]=x*i+b*a+w*l+E*v,e[2]=x*n+b*h+w*f+E*y,e[3]=x*o+b*u+w*p+E*g,x=m[4],b=m[5],w=m[6],E=m[7],e[4]=x*r+b*s+w*c+E*d,e[5]=x*i+b*a+w*l+E*v,e[6]=x*n+b*h+w*f+E*y,e[7]=x*o+b*u+w*p+E*g,x=m[8],b=m[9],w=m[10],E=m[11],e[8]=x*r+b*s+w*c+E*d,e[9]=x*i+b*a+w*l+E*v,e[10]=x*n+b*h+w*f+E*y,e[11]=x*o+b*u+w*p+E*g,x=m[12],b=m[13],w=m[14],E=m[15],e[12]=x*r+b*s+w*c+E*d,e[13]=x*i+b*a+w*l+E*v,e[14]=x*n+b*h+w*f+E*y,e[15]=x*o+b*u+w*p+E*g,this},multiplyLocal:function(t){var e=this.val,r=t.val;return this.setValues(e[0]*r[0]+e[1]*r[4]+e[2]*r[8]+e[3]*r[12],e[0]*r[1]+e[1]*r[5]+e[2]*r[9]+e[3]*r[13],e[0]*r[2]+e[1]*r[6]+e[2]*r[10]+e[3]*r[14],e[0]*r[3]+e[1]*r[7]+e[2]*r[11]+e[3]*r[15],e[4]*r[0]+e[5]*r[4]+e[6]*r[8]+e[7]*r[12],e[4]*r[1]+e[5]*r[5]+e[6]*r[9]+e[7]*r[13],e[4]*r[2]+e[5]*r[6]+e[6]*r[10]+e[7]*r[14],e[4]*r[3]+e[5]*r[7]+e[6]*r[11]+e[7]*r[15],e[8]*r[0]+e[9]*r[4]+e[10]*r[8]+e[11]*r[12],e[8]*r[1]+e[9]*r[5]+e[10]*r[9]+e[11]*r[13],e[8]*r[2]+e[9]*r[6]+e[10]*r[10]+e[11]*r[14],e[8]*r[3]+e[9]*r[7]+e[10]*r[11]+e[11]*r[15],e[12]*r[0]+e[13]*r[4]+e[14]*r[8]+e[15]*r[12],e[12]*r[1]+e[13]*r[5]+e[14]*r[9]+e[15]*r[13],e[12]*r[2]+e[13]*r[6]+e[14]*r[10]+e[15]*r[14],e[12]*r[3]+e[13]*r[7]+e[14]*r[11]+e[15]*r[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.val,i=e.val,n=r[0],o=r[4],s=r[8],a=r[12],h=r[1],u=r[5],c=r[9],l=r[13],f=r[2],p=r[6],d=r[10],v=r[14],y=r[3],g=r[7],m=r[11],x=r[15],b=i[0],w=i[4],E=i[8],T=i[12],S=i[1],_=i[5],O=i[9],P=i[13],M=i[2],A=i[6],L=i[10],C=i[14],R=i[3],k=i[7],F=i[11],I=i[15];return this.setValues(n*b+o*S+s*M+a*R,h*b+u*S+c*M+l*R,f*b+p*S+d*M+v*R,y*b+g*S+m*M+x*R,n*w+o*_+s*A+a*k,h*w+u*_+c*A+l*k,f*w+p*_+d*A+v*k,y*w+g*_+m*A+x*k,n*E+o*O+s*L+a*F,h*E+u*O+c*L+l*F,f*E+p*O+d*L+v*F,y*E+g*O+m*L+x*F,n*T+o*P+s*C+a*I,h*T+u*P+c*C+l*I,f*T+p*P+d*C+v*I,y*T+g*P+m*C+x*I)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,e,r){var i=this.val;return i[12]=i[0]*t+i[4]*e+i[8]*r+i[12],i[13]=i[1]*t+i[5]*e+i[9]*r+i[13],i[14]=i[2]*t+i[6]*e+i[10]*r+i[14],i[15]=i[3]*t+i[7]*e+i[11]*r+i[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,e,r){var i=this.val;return i[0]=i[0]*t,i[1]=i[1]*t,i[2]=i[2]*t,i[3]=i[3]*t,i[4]=i[4]*e,i[5]=i[5]*e,i[6]=i[6]*e,i[7]=i[7]*e,i[8]=i[8]*r,i[9]=i[9]*r,i[10]=i[10]*r,i[11]=i[11]*r,this},makeRotationAxis:function(t,e){var r=Math.cos(e),i=Math.sin(e),n=1-r,o=t.x,s=t.y,a=t.z,h=n*o,u=n*s;return this.setValues(h*o+r,h*s-i*a,h*a+i*s,0,h*s+i*a,u*s+r,u*a-i*o,0,h*a-i*s,u*a+i*o,n*a*a+r,0,0,0,0,1)},rotate:function(t,e){var r=this.val,i=e.x,n=e.y,s=e.z,a=Math.sqrt(i*i+n*n+s*s);if(Math.abs(a)<o)return this;i*=a=1/a,n*=a,s*=a;var h=Math.sin(t),u=Math.cos(t),c=1-u,l=r[0],f=r[1],p=r[2],d=r[3],v=r[4],y=r[5],g=r[6],m=r[7],x=r[8],b=r[9],w=r[10],E=r[11],T=r[12],S=r[13],_=r[14],O=r[15],P=i*i*c+u,M=n*i*c+s*h,A=s*i*c-n*h,L=i*n*c-s*h,C=n*n*c+u,R=s*n*c+i*h,k=i*s*c+n*h,F=n*s*c-i*h,I=s*s*c+u;return this.setValues(l*P+v*M+x*A,f*P+y*M+b*A,p*P+g*M+w*A,d*P+m*M+E*A,l*L+v*C+x*R,f*L+y*C+b*R,p*L+g*C+w*R,d*L+m*C+E*R,l*k+v*F+x*I,f*k+y*F+b*I,p*k+g*F+w*I,d*k+m*F+E*I,T,S,_,O)},rotateX:function(t){var e=this.val,r=Math.sin(t),i=Math.cos(t),n=e[4],o=e[5],s=e[6],a=e[7],h=e[8],u=e[9],c=e[10],l=e[11];return e[4]=n*i+h*r,e[5]=o*i+u*r,e[6]=s*i+c*r,e[7]=a*i+l*r,e[8]=h*i-n*r,e[9]=u*i-o*r,e[10]=c*i-s*r,e[11]=l*i-a*r,this},rotateY:function(t){var e=this.val,r=Math.sin(t),i=Math.cos(t),n=e[0],o=e[1],s=e[2],a=e[3],h=e[8],u=e[9],c=e[10],l=e[11];return e[0]=n*i-h*r,e[1]=o*i-u*r,e[2]=s*i-c*r,e[3]=a*i-l*r,e[8]=n*r+h*i,e[9]=o*r+u*i,e[10]=s*r+c*i,e[11]=a*r+l*i,this},rotateZ:function(t){var e=this.val,r=Math.sin(t),i=Math.cos(t),n=e[0],o=e[1],s=e[2],a=e[3],h=e[4],u=e[5],c=e[6],l=e[7];return e[0]=n*i+h*r,e[1]=o*i+u*r,e[2]=s*i+c*r,e[3]=a*i+l*r,e[4]=h*i-n*r,e[5]=u*i-o*r,e[6]=c*i-s*r,e[7]=l*i-a*r,this},fromRotationTranslation:function(t,e){var r=t.x,i=t.y,n=t.z,o=t.w,s=r+r,a=i+i,h=n+n,u=r*s,c=r*a,l=r*h,f=i*a,p=i*h,d=n*h,v=o*s,y=o*a,g=o*h;return this.setValues(1-(f+d),c+g,l-y,0,c-g,1-(u+d),p+v,0,l+y,p-v,1-(u+f),0,e.x,e.y,e.z,1)},fromQuat:function(t){var e=t.x,r=t.y,i=t.z,n=t.w,o=e+e,s=r+r,a=i+i,h=e*o,u=e*s,c=e*a,l=r*s,f=r*a,p=i*a,d=n*o,v=n*s,y=n*a;return this.setValues(1-(l+p),u+y,c-v,0,u-y,1-(h+p),f+d,0,c+v,f-d,1-(h+l),0,0,0,0,1)},frustum:function(t,e,r,i,n,o){var s=1/(e-t),a=1/(i-r),h=1/(n-o);return this.setValues(2*n*s,0,0,0,0,2*n*a,0,0,(e+t)*s,(i+r)*a,(o+n)*h,-1,0,0,o*n*2*h,0)},perspective:function(t,e,r,i){var n=1/Math.tan(t/2),o=1/(r-i);return this.setValues(n/e,0,0,0,0,n,0,0,0,0,(i+r)*o,-1,0,0,2*i*r*o,0)},perspectiveLH:function(t,e,r,i){return this.setValues(2*r/t,0,0,0,0,2*r/e,0,0,0,0,-i/(r-i),1,0,0,r*i/(r-i),0)},ortho:function(t,e,r,i,n,o){var s=t-e,a=r-i,h=n-o;return s=0===s?s:1/s,a=0===a?a:1/a,h=0===h?h:1/h,this.setValues(-2*s,0,0,0,0,-2*a,0,0,0,0,2*h,0,(t+e)*s,(i+r)*a,(o+n)*h,1)},lookAtRH:function(t,e,r){var i=this.val;return l.subVectors(t,e),0===l.getLengthSquared()&&(l.z=1),l.normalize(),u.crossVectors(r,l),0===u.getLengthSquared()&&(1===Math.abs(r.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),u.crossVectors(r,l)),u.normalize(),c.crossVectors(l,u),i[0]=u.x,i[1]=u.y,i[2]=u.z,i[4]=c.x,i[5]=c.y,i[6]=c.z,i[8]=l.x,i[9]=l.y,i[10]=l.z,this},lookAt:function(t,e,r){var i=t.x,n=t.y,s=t.z,a=r.x,h=r.y,u=r.z,c=e.x,l=e.y,f=e.z;if(Math.abs(i-c)<o&&Math.abs(n-l)<o&&Math.abs(s-f)<o)return this.identity();var p=i-c,d=n-l,v=s-f,y=1/Math.sqrt(p*p+d*d+v*v),g=h*(v*=y)-u*(d*=y),m=u*(p*=y)-a*v,x=a*d-h*p;(y=Math.sqrt(g*g+m*m+x*x))?(g*=y=1/y,m*=y,x*=y):(g=0,m=0,x=0);var b=d*x-v*m,w=v*g-p*x,E=p*m-d*g;return(y=Math.sqrt(b*b+w*w+E*E))?(b*=y=1/y,w*=y,E*=y):(b=0,w=0,E=0),this.setValues(g,b,p,0,m,w,d,0,x,E,v,0,-(g*i+m*n+x*s),-(b*i+w*n+E*s),-(p*i+d*n+v*s),1)},yawPitchRoll:function(t,e,r){this.zero(),a.zero(),h.zero();var i=this.val,n=a.val,o=h.val,s=Math.sin(r),u=Math.cos(r);return i[10]=1,i[15]=1,i[0]=u,i[1]=s,i[4]=-s,i[5]=u,s=Math.sin(e),u=Math.cos(e),n[0]=1,n[15]=1,n[5]=u,n[10]=u,n[9]=-s,n[6]=s,s=Math.sin(t),u=Math.cos(t),o[5]=1,o[15]=1,o[0]=u,o[2]=-s,o[8]=s,o[10]=u,this.multiplyLocal(a),this.multiplyLocal(h),this},setWorldMatrix:function(t,e,r,i,n){return this.yawPitchRoll(t.y,t.x,t.z),a.scaling(r.x,r.y,r.z),h.xyz(e.x,e.y,e.z),this.multiplyLocal(a),this.multiplyLocal(h),i&&this.multiplyLocal(i),n&&this.multiplyLocal(n),this},multiplyToMat4:function(t,e){var r=this.val,i=t.val,n=r[0],o=r[1],s=r[2],a=r[3],h=r[4],u=r[5],c=r[6],l=r[7],f=r[8],p=r[9],d=r[10],v=r[11],y=r[12],g=r[13],m=r[14],x=r[15],b=i[0],w=i[1],E=i[2],T=i[3],S=i[4],_=i[5],O=i[6],P=i[7],M=i[8],A=i[9],L=i[10],C=i[11],R=i[12],k=i[13],F=i[14],I=i[15];return e.setValues(b*n+w*h+E*f+T*y,w*o+w*u+E*p+T*g,E*s+w*c+E*d+T*m,T*a+w*l+E*v+T*x,S*n+_*h+O*f+P*y,S*o+_*u+O*p+P*g,S*s+_*c+O*d+P*m,S*a+_*l+O*v+P*x,M*n+A*h+L*f+C*y,M*o+A*u+L*p+C*g,M*s+A*c+L*d+C*m,M*a+A*l+L*v+C*x,R*n+k*h+F*f+I*y,R*o+k*u+F*p+I*g,R*s+k*c+F*d+I*m,R*a+k*l+F*v+I*x)},fromRotationXYTranslation:function(t,e,r){var i=e.x,n=e.y,o=e.z,s=Math.sin(t.x),a=Math.cos(t.x),h=Math.sin(t.y),u=Math.cos(t.y),c=i,l=n,f=o,p=-s,d=0-p*h,v=0-a*h,y=p*u,g=a*u;return r||(c=u*i+h*o,l=d*i+a*n+y*o,f=v*i+s*n+g*o),this.setValues(u,d,v,0,0,a,s,0,h,y,g,0,c,l,f,1)},getMaxScaleOnAxis:function(){var t=this.val,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,i))}}),a=new s,h=new s,u=new n,c=new n,l=new n;t.exports=s},3733:t=>{t.exports=function(t,e,r){return Math.min(t+e,r)}},44:t=>{t.exports=function(t){var e=t.length;if(0===e)return 0;t.sort((function(t,e){return t-e}));var r=Math.floor(e/2);return e%2==0?(t[r]+t[r-1])/2:t[r]}},5385:t=>{t.exports=function(t,e,r){return Math.max(t-e,r)}},8585:t=>{t.exports=function(t,e,r,i){void 0===r&&(r=e+1);var n=(t-e)/(r-e);return n>1?void 0!==i?(n=(i-t)/(i-r))<0&&(n=0):n=1:n<0&&(n=0),n}},372:(t,e,r)=>{var i=r(7473),n=r(2149),o=r(1984),s=r(5689),a=1e-6,h=new Int8Array([1,2,0]),u=new Float32Array([0,0,0]),c=new s(1,0,0),l=new s(0,1,0),f=new s,p=new n,d=new i({initialize:function(t,e,r,i){this.onChangeCallback=o,this.set(t,e,r,i)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,e,r,i,n){return void 0===n&&(n=!0),"object"==typeof t?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=e||0,this._z=r||0,this._w=i||0),n&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){var t=this.x,e=this.y,r=this.z,i=this.w;return Math.sqrt(t*t+e*e+r*r+i*i)},lengthSq:function(){var t=this.x,e=this.y,r=this.z,i=this.w;return t*t+e*e+r*r+i*i},normalize:function(){var t=this.x,e=this.y,r=this.z,i=this.w,n=t*t+e*e+r*r+i*i;return n>0&&(n=1/Math.sqrt(n),this._x=t*n,this._y=e*n,this._z=r*n,this._w=i*n),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var r=this.x,i=this.y,n=this.z,o=this.w;return this.set(r+e*(t.x-r),i+e*(t.y-i),n+e*(t.z-n),o+e*(t.w-o))},rotationTo:function(t,e){var r=t.x*e.x+t.y*e.y+t.z*e.z;return r<-.999999?(f.copy(c).cross(t).length()<a&&f.copy(l).cross(t),f.normalize(),this.setAxisAngle(f,Math.PI)):r>.999999?this.set(0,0,0,1):(f.copy(t).cross(e),this._x=f.x,this._y=f.y,this._z=f.z,this._w=1+r,this.normalize())},setAxes:function(t,e,r){var i=p.val;return i[0]=e.x,i[3]=e.y,i[6]=e.z,i[1]=r.x,i[4]=r.y,i[7]=r.z,i[2]=-t.x,i[5]=-t.y,i[8]=-t.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,e){e*=.5;var r=Math.sin(e);return this.set(r*t.x,r*t.y,r*t.z,Math.cos(e))},multiply:function(t){var e=this.x,r=this.y,i=this.z,n=this.w,o=t.x,s=t.y,a=t.z,h=t.w;return this.set(e*h+n*o+r*a-i*s,r*h+n*s+i*o-e*a,i*h+n*a+e*s-r*o,n*h-e*o-r*s-i*a)},slerp:function(t,e){var r=this.x,i=this.y,n=this.z,o=this.w,s=t.x,h=t.y,u=t.z,c=t.w,l=r*s+i*h+n*u+o*c;l<0&&(l=-l,s=-s,h=-h,u=-u,c=-c);var f=1-e,p=e;if(1-l>a){var d=Math.acos(l),v=Math.sin(d);f=Math.sin((1-e)*d)/v,p=Math.sin(e*d)/v}return this.set(f*r+p*s,f*i+p*h,f*n+p*u,f*o+p*c)},invert:function(){var t=this.x,e=this.y,r=this.z,i=this.w,n=t*t+e*e+r*r+i*i,o=n?1/n:0;return this.set(-t*o,-e*o,-r*o,i*o)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;var e=this.x,r=this.y,i=this.z,n=this.w,o=Math.sin(t),s=Math.cos(t);return this.set(e*s+n*o,r*s+i*o,i*s-r*o,n*s-e*o)},rotateY:function(t){t*=.5;var e=this.x,r=this.y,i=this.z,n=this.w,o=Math.sin(t),s=Math.cos(t);return this.set(e*s-i*o,r*s+n*o,i*s+e*o,n*s-r*o)},rotateZ:function(t){t*=.5;var e=this.x,r=this.y,i=this.z,n=this.w,o=Math.sin(t),s=Math.cos(t);return this.set(e*s+r*o,r*s-e*o,i*s+n*o,n*s-i*o)},calculateW:function(){var t=this.x,e=this.y,r=this.z;return this.w=-Math.sqrt(1-t*t-e*e-r*r),this},setFromEuler:function(t,e){var r=t.x/2,i=t.y/2,n=t.z/2,o=Math.cos(r),s=Math.cos(i),a=Math.cos(n),h=Math.sin(r),u=Math.sin(i),c=Math.sin(n);switch(t.order){case"XYZ":this.set(h*s*a+o*u*c,o*u*a-h*s*c,o*s*c+h*u*a,o*s*a-h*u*c,e);break;case"YXZ":this.set(h*s*a+o*u*c,o*u*a-h*s*c,o*s*c-h*u*a,o*s*a+h*u*c,e);break;case"ZXY":this.set(h*s*a-o*u*c,o*u*a+h*s*c,o*s*c+h*u*a,o*s*a-h*u*c,e);break;case"ZYX":this.set(h*s*a-o*u*c,o*u*a+h*s*c,o*s*c-h*u*a,o*s*a+h*u*c,e);break;case"YZX":this.set(h*s*a+o*u*c,o*u*a+h*s*c,o*s*c-h*u*a,o*s*a-h*u*c,e);break;case"XZY":this.set(h*s*a-o*u*c,o*u*a-h*s*c,o*s*c+h*u*a,o*s*a+h*u*c,e)}return this},setFromRotationMatrix:function(t){var e,r=t.val,i=r[0],n=r[4],o=r[8],s=r[1],a=r[5],h=r[9],u=r[2],c=r[6],l=r[10],f=i+a+l;return f>0?(e=.5/Math.sqrt(f+1),this.set((c-h)*e,(o-u)*e,(s-n)*e,.25/e)):i>a&&i>l?(e=2*Math.sqrt(1+i-a-l),this.set(.25*e,(n+s)/e,(o+u)/e,(c-h)/e)):a>l?(e=2*Math.sqrt(1+a-i-l),this.set((n+s)/e,.25*e,(h+c)/e,(o-u)/e)):(e=2*Math.sqrt(1+l-i-a),this.set((o+u)/e,(h+c)/e,.25*e,(s-n)/e)),this},fromMat3:function(t){var e,r=t.val,i=r[0]+r[4]+r[8];if(i>0)e=Math.sqrt(i+1),this.w=.5*e,e=.5/e,this._x=(r[7]-r[5])*e,this._y=(r[2]-r[6])*e,this._z=(r[3]-r[1])*e;else{var n=0;r[4]>r[0]&&(n=1),r[8]>r[3*n+n]&&(n=2);var o=h[n],s=h[o];e=Math.sqrt(r[3*n+n]-r[3*o+o]-r[3*s+s]+1),u[n]=.5*e,e=.5/e,u[o]=(r[3*o+n]+r[3*n+o])*e,u[s]=(r[3*s+n]+r[3*n+s])*e,this._x=u[0],this._y=u[1],this._z=u[2],this._w=(r[3*s+o]-r[3*o+s])*e}return this.onChangeCallback(this),this}});t.exports=d},4208:(t,e,r)=>{var i=r(7425);t.exports=function(t){return t*i.RAD_TO_DEG}},1705:t=>{t.exports=function(t,e){void 0===e&&(e=1);var r=2*Math.random()*Math.PI;return t.x=Math.cos(r)*e,t.y=Math.sin(r)*e,t}},6650:t=>{t.exports=function(t,e){void 0===e&&(e=1);var r=2*Math.random()*Math.PI,i=2*Math.random()-1,n=Math.sqrt(1-i*i)*e;return t.x=Math.cos(r)*n,t.y=Math.sin(r)*n,t.z=i*e,t}},2037:t=>{t.exports=function(t,e){return void 0===e&&(e=1),t.x=(2*Math.random()-1)*e,t.y=(2*Math.random()-1)*e,t.z=(2*Math.random()-1)*e,t.w=(2*Math.random()-1)*e,t}},6283:t=>{t.exports=function(t,e){var r=t.x,i=t.y;return t.x=r*Math.cos(e)-i*Math.sin(e),t.y=r*Math.sin(e)+i*Math.cos(e),t}},9876:t=>{t.exports=function(t,e,r,i){var n=Math.cos(i),o=Math.sin(i),s=t.x-e,a=t.y-r;return t.x=s*n-a*o+e,t.y=s*o+a*n+r,t}},8348:t=>{t.exports=function(t,e,r,i,n){var o=i+Math.atan2(t.y-r,t.x-e);return t.x=e+n*Math.cos(o),t.y=r+n*Math.sin(o),t}},4497:t=>{t.exports=function(t,e,r,i,n){return t.x=e+n*Math.cos(i),t.y=r+n*Math.sin(i),t}},9640:(t,e,r)=>{var i=r(5689),n=r(9652),o=r(372),s=new n,a=new o,h=new i;t.exports=function(t,e,r){return a.setAxisAngle(e,r),s.fromRotationTranslation(a,h.set(0,0,0)),t.transformMat4(s)}},4078:t=>{t.exports=function(t){return t>0?Math.ceil(t):Math.floor(t)}},855:t=>{t.exports=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=10);var i=Math.pow(r,-e);return Math.round(t*i)/i}},4936:t=>{t.exports=function(t,e,r,i){void 0===e&&(e=1),void 0===r&&(r=1),void 0===i&&(i=1),i*=Math.PI/t;for(var n=[],o=[],s=0;s<t;s++)e+=(r-=e*i)*i,n[s]=r,o[s]=e;return{sin:o,cos:n,length:t}}},2733:t=>{t.exports=function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e))*t*(3-2*t)}},278:t=>{t.exports=function(t,e,r){return(t=Math.max(0,Math.min(1,(t-e)/(r-e))))*t*t*(t*(6*t-15)+10)}},163:(t,e,r)=>{var i=r(2529);t.exports=function(t,e,r,n){void 0===n&&(n=new i);var o=0,s=0;return t>0&&t<=e*r&&(o=t>e-1?t-(s=Math.floor(t/e))*e:t),n.set(o,s)}},7556:(t,e,r)=>{var i=r(2529);t.exports=function(t,e,r,n,o,s,a,h){void 0===h&&(h=new i);var u=Math.sin(o),c=Math.cos(o),l=c*s,f=u*s,p=-u*a,d=c*a,v=1/(l*d+p*-f);return h.x=d*v*t+-p*v*e+(n*p-r*d)*v,h.y=l*v*e+-f*v*t+(-n*l+r*f)*v,h}},2529:(t,e,r)=>{var i=r(7473),n=r(12),o=new i({initialize:function(t,e){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===e&&(e=t),this.x=t||0,this.y=e||0)},clone:function(){return new o(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setTo:function(t,e){return this.set(t,e)},setToPolar:function(t,e){return null==e&&(e=1),this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,e){return n(this.x,t.x,e)&&n(this.y,t.y,e)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var e=t.x-this.x,r=t.y-this.y;return Math.sqrt(e*e+r*r)},distanceSq:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,e=this.y;return t*t+e*e},normalize:function(){var t=this.x,e=this.y,r=t*t+e*e;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,e){void 0===e&&(e=0);var r=this.x,i=this.y;return this.x=r+e*(t.x-r),this.y=i+e*(t.y-i),this},transformMat3:function(t){var e=this.x,r=this.y,i=t.val;return this.x=i[0]*e+i[3]*r+i[6],this.y=i[1]*e+i[4]*r+i[7],this},transformMat4:function(t){var e=this.x,r=this.y,i=t.val;return this.x=i[0]*e+i[4]*r+i[12],this.y=i[1]*e+i[5]*r+i[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var e=this.length();return e&&e>t&&this.scale(t/e),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e*this.x-r*this.y,r*this.x+e*this.y)},project:function(t){var e=this.dot(t)/t.dot(t);return this.copy(t).scale(e)}});o.ZERO=new o,o.RIGHT=new o(1,0),o.LEFT=new o(-1,0),o.UP=new o(0,-1),o.DOWN=new o(0,1),o.ONE=new o(1,1),t.exports=o},5689:(t,e,r)=>{var i=new(r(7473))({initialize:function(t,e,r){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new i(this.x,this.y,this.z)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},crossVectors:function(t,e){var r=t.x,i=t.y,n=t.z,o=e.x,s=e.y,a=e.z;return this.x=i*a-n*s,this.y=n*o-r*a,this.z=r*s-i*o,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,e,r){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=r||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,e){return this.fromArray(t.val,4*e)},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var e=t.x-this.x,r=t.y-this.y,i=t.z-this.z||0;return Math.sqrt(e*e+r*r+i*i)},distanceSq:function(t){var e=t.x-this.x,r=t.y-this.y,i=t.z-this.z||0;return e*e+r*r+i*i},length:function(){var t=this.x,e=this.y,r=this.z;return Math.sqrt(t*t+e*e+r*r)},lengthSq:function(){var t=this.x,e=this.y,r=this.z;return t*t+e*e+r*r},normalize:function(){var t=this.x,e=this.y,r=this.z,i=t*t+e*e+r*r;return i>0&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i,this.z=r*i),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var e=this.x,r=this.y,i=this.z,n=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*n-e*s,this.z=e*o-r*n,this},lerp:function(t,e){void 0===e&&(e=0);var r=this.x,i=this.y,n=this.z;return this.x=r+e*(t.x-r),this.y=i+e*(t.y-i),this.z=n+e*(t.z-n),this},applyMatrix3:function(t){var e=this.x,r=this.y,i=this.z,n=t.val;return this.x=n[0]*e+n[3]*r+n[6]*i,this.y=n[1]*e+n[4]*r+n[7]*i,this.z=n[2]*e+n[5]*r+n[8]*i,this},applyMatrix4:function(t){var e=this.x,r=this.y,i=this.z,n=t.val,o=1/(n[3]*e+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*e+n[4]*r+n[8]*i+n[12])*o,this.y=(n[1]*e+n[5]*r+n[9]*i+n[13])*o,this.z=(n[2]*e+n[6]*r+n[10]*i+n[14])*o,this},transformMat3:function(t){var e=this.x,r=this.y,i=this.z,n=t.val;return this.x=e*n[0]+r*n[3]+i*n[6],this.y=e*n[1]+r*n[4]+i*n[7],this.z=e*n[2]+r*n[5]+i*n[8],this},transformMat4:function(t){var e=this.x,r=this.y,i=this.z,n=t.val;return this.x=n[0]*e+n[4]*r+n[8]*i+n[12],this.y=n[1]*e+n[5]*r+n[9]*i+n[13],this.z=n[2]*e+n[6]*r+n[10]*i+n[14],this},transformCoordinates:function(t){var e=this.x,r=this.y,i=this.z,n=t.val,o=e*n[0]+r*n[4]+i*n[8]+n[12],s=e*n[1]+r*n[5]+i*n[9]+n[13],a=e*n[2]+r*n[6]+i*n[10]+n[14],h=e*n[3]+r*n[7]+i*n[11]+n[15];return this.x=o/h,this.y=s/h,this.z=a/h,this},transformQuat:function(t){var e=this.x,r=this.y,i=this.z,n=t.x,o=t.y,s=t.z,a=t.w,h=a*e+o*i-s*r,u=a*r+s*e-n*i,c=a*i+n*r-o*e,l=-n*e-o*r-s*i;return this.x=h*a+l*-n+u*-s-c*-o,this.y=u*a+l*-o+c*-n-h*-s,this.z=c*a+l*-s+h*-o-u*-n,this},project:function(t){var e=this.x,r=this.y,i=this.z,n=t.val,o=n[0],s=n[1],a=n[2],h=n[3],u=n[4],c=n[5],l=n[6],f=n[7],p=n[8],d=n[9],v=n[10],y=n[11],g=n[12],m=n[13],x=n[14],b=1/(e*h+r*f+i*y+n[15]);return this.x=(e*o+r*u+i*p+g)*b,this.y=(e*s+r*c+i*d+m)*b,this.z=(e*a+r*l+i*v+x)*b,this},projectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unprojectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unproject:function(t,e){var r=t.x,i=t.y,n=t.z,o=t.w,s=this.x-r,a=o-this.y-1-i,h=this.z;return this.x=2*s/n-1,this.y=2*a/o-1,this.z=2*h-1,this.project(e)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});i.ZERO=new i,i.RIGHT=new i(1,0,0),i.LEFT=new i(-1,0,0),i.UP=new i(0,-1,0),i.DOWN=new i(0,1,0),i.FORWARD=new i(0,0,1),i.BACK=new i(0,0,-1),i.ONE=new i(1,1,1),t.exports=i},9279:(t,e,r)=>{var i=new(r(7473))({initialize:function(t,e,r,i){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=r||0,this.w=i||0)},clone:function(){return new i(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,e,r,i){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=r||0,this.w=i||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,e=this.y,r=this.z,i=this.w;return Math.sqrt(t*t+e*e+r*r+i*i)},lengthSq:function(){var t=this.x,e=this.y,r=this.z,i=this.w;return t*t+e*e+r*r+i*i},normalize:function(){var t=this.x,e=this.y,r=this.z,i=this.w,n=t*t+e*e+r*r+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=e*n,this.z=r*n,this.w=i*n),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var r=this.x,i=this.y,n=this.z,o=this.w;return this.x=r+e*(t.x-r),this.y=i+e*(t.y-i),this.z=n+e*(t.z-n),this.w=o+e*(t.w-o),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var e=t.x-this.x,r=t.y-this.y,i=t.z-this.z||0,n=t.w-this.w||0;return Math.sqrt(e*e+r*r+i*i+n*n)},distanceSq:function(t){var e=t.x-this.x,r=t.y-this.y,i=t.z-this.z||0,n=t.w-this.w||0;return e*e+r*r+i*i+n*n},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var e=this.x,r=this.y,i=this.z,n=this.w,o=t.val;return this.x=o[0]*e+o[4]*r+o[8]*i+o[12]*n,this.y=o[1]*e+o[5]*r+o[9]*i+o[13]*n,this.z=o[2]*e+o[6]*r+o[10]*i+o[14]*n,this.w=o[3]*e+o[7]*r+o[11]*i+o[15]*n,this},transformQuat:function(t){var e=this.x,r=this.y,i=this.z,n=t.x,o=t.y,s=t.z,a=t.w,h=a*e+o*i-s*r,u=a*r+s*e-n*i,c=a*i+n*r-o*e,l=-n*e-o*r-s*i;return this.x=h*a+l*-n+u*-s-c*-o,this.y=u*a+l*-o+c*-n-h*-s,this.z=c*a+l*-s+h*-o-u*-n,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});i.prototype.sub=i.prototype.subtract,i.prototype.mul=i.prototype.multiply,i.prototype.div=i.prototype.divide,i.prototype.dist=i.prototype.distance,i.prototype.distSq=i.prototype.distanceSq,i.prototype.len=i.prototype.length,i.prototype.lenSq=i.prototype.lengthSq,t.exports=i},4119:t=>{t.exports=function(t,e,r){return Math.abs(t-e)<=r}},8445:t=>{t.exports=function(t,e,r){var i=r-e;return e+((t-e)%i+i)%i}},6412:t=>{t.exports=function(t,e,r,i){return Math.atan2(i-e,r-t)}},760:t=>{t.exports=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},6909:t=>{t.exports=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}},6947:t=>{t.exports=function(t,e,r,i){return Math.atan2(r-t,i-e)}},3426:(t,e,r)=>{var i=r(7425);t.exports=function(t){return t>Math.PI&&(t-=i.PI2),Math.abs(((t+i.TAU)%i.PI2-i.PI2)%i.PI2)}},6906:t=>{t.exports=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},3270:(t,e,r)=>{var i=r(104);t.exports=function(){return i(-Math.PI,Math.PI)}},2748:(t,e,r)=>{var i=r(104);t.exports=function(){return i(-180,180)}},936:(t,e,r)=>{var i=r(6906);t.exports=function(t){return i(t+Math.PI)}},1935:(t,e,r)=>{var i=r(7425);t.exports=function(t,e,r){return void 0===r&&(r=.05),t===e||(Math.abs(e-t)<=r||Math.abs(e-t)>=i.PI2-r?t=e:(Math.abs(e-t)>Math.PI&&(e<t?e+=i.PI2:e-=i.PI2),e>t?t+=r:e<t&&(t-=r))),t}},5393:t=>{t.exports=function(t,e){var r=e-t;return 0===r?0:r-360*Math.floor((r- -180)/360)}},3692:(t,e,r)=>{var i=r(8445);t.exports=function(t){return i(t,-Math.PI,Math.PI)}},2820:(t,e,r)=>{var i=r(8445);t.exports=function(t){return i(t,-180,180)}},1833:(t,e,r)=>{t.exports={Between:r(6412),BetweenPoints:r(760),BetweenPointsY:r(6909),BetweenY:r(6947),CounterClockwise:r(3426),Normalize:r(6906),Random:r(3270),RandomDegrees:r(2748),Reverse:r(936),RotateTo:r(1935),ShortestBetween:r(5393),Wrap:r(3692),WrapDegrees:r(2820)}},7425:t=>{var e={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=e},1518:t=>{t.exports=function(t,e,r,i){var n=t-r,o=e-i;return Math.sqrt(n*n+o*o)}},5372:t=>{t.exports=function(t,e){var r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}},4430:t=>{t.exports=function(t,e){var r=t.x-e.x,i=t.y-e.y;return r*r+i*i}},4361:t=>{t.exports=function(t,e,r,i){return Math.max(Math.abs(t-r),Math.abs(e-i))}},7798:t=>{t.exports=function(t,e,r,i,n){return void 0===n&&(n=2),Math.sqrt(Math.pow(r-t,n)+Math.pow(i-e,n))}},8290:t=>{t.exports=function(t,e,r,i){return Math.abs(t-r)+Math.abs(e-i)}},3788:t=>{t.exports=function(t,e,r,i){var n=t-r,o=e-i;return n*n+o*o}},6338:(t,e,r)=>{t.exports={Between:r(1518),BetweenPoints:r(5372),BetweenPointsSquared:r(4430),Chebyshev:r(4361),Power:r(7798),Snake:r(8290),Squared:r(3788)}},5751:t=>{t.exports=function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)}},6203:t=>{t.exports=function(t,e){void 0===e&&(e=1.70158);var r=1.525*e;return(t*=2)<1?t*t*((r+1)*t-r)*.5:.5*((t-=2)*t*((r+1)*t+r)+2)}},9103:t=>{t.exports=function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1}},4938:(t,e,r)=>{t.exports={In:r(5751),Out:r(9103),InOut:r(6203)}},8677:t=>{t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},4649:t=>{t.exports=function(t){var e=!1;return t<.5?(t=1-2*t,e=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}},504:t=>{t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},8872:(t,e,r)=>{t.exports={In:r(8677),Out:r(504),InOut:r(4649)}},3170:t=>{t.exports=function(t){return 1-Math.sqrt(1-t*t)}},2627:t=>{t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},1349:t=>{t.exports=function(t){return Math.sqrt(1- --t*t)}},5006:(t,e,r)=>{t.exports={In:r(3170),Out:r(1349),InOut:r(2627)}},6046:t=>{t.exports=function(t){return t*t*t}},9531:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},4836:t=>{t.exports=function(t){return--t*t*t+1}},875:(t,e,r)=>{t.exports={In:r(6046),Out:r(4836),InOut:r(9531)}},7619:t=>{t.exports=function(t,e,r){if(void 0===e&&(e=.1),void 0===r&&(r=.1),0===t)return 0;if(1===t)return 1;var i=r/4;return e<1?e=1:i=r*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/r)}},7437:t=>{t.exports=function(t,e,r){if(void 0===e&&(e=.1),void 0===r&&(r=.1),0===t)return 0;if(1===t)return 1;var i=r/4;return e<1?e=1:i=r*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/r)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/r)*.5+1}},8119:t=>{t.exports=function(t,e,r){if(void 0===e&&(e=.1),void 0===r&&(r=.1),0===t)return 0;if(1===t)return 1;var i=r/4;return e<1?e=1:i=r*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/r)+1}},2884:(t,e,r)=>{t.exports={In:r(7619),Out:r(8119),InOut:r(7437)}},5456:t=>{t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},3461:t=>{t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},2711:t=>{t.exports=function(t){return 1-Math.pow(2,-10*t)}},6287:(t,e,r)=>{t.exports={In:r(5456),Out:r(2711),InOut:r(3461)}},8613:(t,e,r)=>{t.exports={Back:r(4938),Bounce:r(8872),Circular:r(5006),Cubic:r(875),Elastic:r(2884),Expo:r(6287),Linear:r(4233),Quadratic:r(6341),Quartic:r(762),Quintic:r(345),Sine:r(8698),Stepped:r(7051)}},744:t=>{t.exports=function(t){return t}},4233:(t,e,r)=>{t.exports=r(744)},9810:t=>{t.exports=function(t){return t*t}},8163:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},6123:t=>{t.exports=function(t){return t*(2-t)}},6341:(t,e,r)=>{t.exports={In:r(9810),Out:r(6123),InOut:r(8163)}},7337:t=>{t.exports=function(t){return t*t*t*t}},4878:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},9012:t=>{t.exports=function(t){return 1- --t*t*t*t}},762:(t,e,r)=>{t.exports={In:r(7337),Out:r(9012),InOut:r(4878)}},303:t=>{t.exports=function(t){return t*t*t*t*t}},553:t=>{t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},1632:t=>{t.exports=function(t){return--t*t*t*t*t+1}},345:(t,e,r)=>{t.exports={In:r(303),Out:r(1632),InOut:r(553)}},8455:t=>{t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},1844:t=>{t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},990:t=>{t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},8698:(t,e,r)=>{t.exports={In:r(8455),Out:r(990),InOut:r(1844)}},6745:t=>{t.exports=function(t,e){return void 0===e&&(e=1),t<=0?0:t>=1?1:1/e*(1+(e*t|0))}},7051:(t,e,r)=>{t.exports=r(6745)},3158:t=>{t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}},12:t=>{t.exports=function(t,e,r){return void 0===r&&(r=1e-4),Math.abs(t-e)<r}},1326:t=>{t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}},7373:t=>{t.exports=function(t,e,r){return void 0===r&&(r=1e-4),t>e-r}},2622:t=>{t.exports=function(t,e,r){return void 0===r&&(r=1e-4),t<e+r}},7927:(t,e,r)=>{t.exports={Ceil:r(3158),Equal:r(12),Floor:r(1326),GreaterThan:r(7373),LessThan:r(2622)}},4675:(t,e,r)=>{var i=r(7425),n=r(1030),o={Angle:r(1833),Distance:r(6338),Easing:r(8613),Fuzzy:r(7927),Interpolation:r(2140),Pow2:r(7897),Snap:r(3943),RandomDataGenerator:r(6957),Average:r(3136),Bernstein:r(785),Between:r(7025),CatmullRom:r(48),CeilTo:r(5035),Clamp:r(2915),DegToRad:r(7149),Difference:r(2975),Euler:r(2107),Factorial:r(3916),FloatBetween:r(104),FloorTo:r(4941),FromPercent:r(1555),GetSpeed:r(5005),IsEven:r(3702),IsEvenStrict:r(8820),Linear:r(1743),LinearXY:r(3416),MaxAdd:r(3733),Median:r(44),MinSub:r(5385),Percent:r(8585),RadToDeg:r(4208),RandomXY:r(1705),RandomXYZ:r(6650),RandomXYZW:r(2037),Rotate:r(6283),RotateAround:r(9876),RotateAroundDistance:r(8348),RotateTo:r(4497),RoundAwayFromZero:r(4078),RoundTo:r(855),SinCosTableGenerator:r(4936),SmootherStep:r(278),SmoothStep:r(2733),ToXY:r(163),TransformXY:r(7556),Within:r(4119),Wrap:r(8445),Vector2:r(2529),Vector3:r(5689),Vector4:r(9279),Matrix3:r(2149),Matrix4:r(9652),Quaternion:r(372),RotateVec3:r(9640)};o=n(!1,o,i),t.exports=o},1640:(t,e,r)=>{var i=r(785);t.exports=function(t,e){for(var r=0,n=t.length-1,o=0;o<=n;o++)r+=Math.pow(1-e,n-o)*Math.pow(e,o)*t[o]*i(n,o);return r}},6105:(t,e,r)=>{var i=r(48);t.exports=function(t,e){var r=t.length-1,n=r*e,o=Math.floor(n);return t[0]===t[r]?(e<0&&(o=Math.floor(n=r*(1+e))),i(n-o,t[(o-1+r)%r],t[o],t[(o+1)%r],t[(o+2)%r])):e<0?t[0]-(i(-n,t[0],t[0],t[1],t[1])-t[0]):e>1?t[r]-(i(n-r,t[r],t[r],t[r-1],t[r-1])-t[r]):i(n-o,t[o?o-1:0],t[o],t[r<o+1?r:o+1],t[r<o+2?r:o+2])}},4002:t=>{t.exports=function(t,e,r,i,n){return function(t,e){var r=1-t;return r*r*r*e}(t,e)+function(t,e){var r=1-t;return 3*r*r*t*e}(t,r)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,n)}},6765:(t,e,r)=>{var i=r(1743);t.exports=function(t,e){var r=t.length-1,n=r*e,o=Math.floor(n);return e<0?i(t[0],t[1],n):e>1?i(t[r],t[r-1],r-n):i(t[o],t[o+1>r?r:o+1],n-o)}},6388:t=>{t.exports=function(t,e,r,i){return function(t,e){var r=1-t;return r*r*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,r)+function(t,e){return t*t*e}(t,i)}},5735:(t,e,r)=>{var i=r(2733);t.exports=function(t,e,r){return e+(r-e)*i(t,0,1)}},8705:(t,e,r)=>{var i=r(278);t.exports=function(t,e,r){return e+(r-e)*i(t,0,1)}},2140:(t,e,r)=>{t.exports={Bezier:r(1640),CatmullRom:r(6105),CubicBezier:r(4002),Linear:r(6765),QuadraticBezier:r(6388),SmoothStep:r(5735),SmootherStep:r(8705)}},5443:t=>{t.exports=function(t){var e=Math.log(t)/.6931471805599453;return 1<<Math.ceil(e)}},725:t=>{t.exports=function(t,e){return t>0&&!(t&t-1)&&e>0&&!(e&e-1)}},167:t=>{t.exports=function(t){return t>0&&!(t&t-1)}},7897:(t,e,r)=>{t.exports={GetNext:r(5443),IsSize:r(725),IsValue:r(167)}},6957:(t,e,r)=>{var i=new(r(7473))({initialize:function(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var e,r=this.n;t=t.toString();for(var i=0;i<t.length;i++)e=.02519603282416938*(r+=t.charCodeAt(i)),e-=r=e>>>0,r=(e*=r)>>>0,r+=4294967296*(e-=r);return this.n=r,2.3283064365386963e-10*(r>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var e=0;e<t.length&&null!=t[e];e++){var r=t[e];this.s0-=this.hash(r),this.s0+=~~(this.s0<0),this.s1-=this.hash(r),this.s1+=~~(this.s1<0),this.s2-=this.hash(r),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},between:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*t.length+.5)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(this.frac()*(e+1)),i=t[r];t[r]=t[e],t[e]=i}return t}});t.exports=i},5659:t=>{t.exports=function(t,e,r,i){return void 0===r&&(r=0),0===e?t:(t-=r,t=e*Math.ceil(t/e),i?(r+t)/e:r+t)}},5461:t=>{t.exports=function(t,e,r,i){return void 0===r&&(r=0),0===e?t:(t-=r,t=e*Math.floor(t/e),i?(r+t)/e:r+t)}},5131:t=>{t.exports=function(t,e,r,i){return void 0===r&&(r=0),0===e?t:(t-=r,t=e*Math.round(t/e),i?(r+t)/e:r+t)}},3943:(t,e,r)=>{t.exports={Ceil:r(5659),Floor:r(5461),To:r(5131)}},8666:(t,e,r)=>{var i=new(r(7473))({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=i},8456:t=>{var e={},r={},i={register:function(t,r,i,n){void 0===n&&(n=!1),e[t]={plugin:r,mapping:i,custom:n}},registerCustom:function(t,e,i,n){r[t]={plugin:e,mapping:i,data:n}},hasCore:function(t){return e.hasOwnProperty(t)},hasCustom:function(t){return r.hasOwnProperty(t)},getCore:function(t){return e[t]},getCustom:function(t){return r[t]},getCustomClass:function(t){return r.hasOwnProperty(t)?r[t].plugin:null},remove:function(t){e.hasOwnProperty(t)&&delete e[t]},removeCustom:function(t){r.hasOwnProperty(t)&&delete r[t]},destroyCorePlugins:function(){for(var t in e)e.hasOwnProperty(t)&&delete e[t]},destroyCustomPlugins:function(){for(var t in r)r.hasOwnProperty(t)&&delete r[t]}};t.exports=i},5722:(t,e,r)=>{var i=r(8666),n=r(7473),o=r(204),s=new n({Extends:i,initialize:function(t,e,r){i.call(this,e),this.scene=t,this.systems=t.sys,this.pluginKey=r,t.sys.events.once(o.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=s},8351:t=>{t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},8196:t=>{t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},3527:t=>{t.exports="resize"},8618:t=>{t.exports="addedtoscene"},4328:t=>{t.exports="boot"},6099:t=>{t.exports="create"},7645:t=>{t.exports="destroy"},2710:t=>{t.exports="pause"},2547:t=>{t.exports="postupdate"},8577:t=>{t.exports="prerender"},8197:t=>{t.exports="preupdate"},8997:t=>{t.exports="ready"},7604:t=>{t.exports="removedfromscene"},8999:t=>{t.exports="render"},9742:t=>{t.exports="resume"},3667:t=>{t.exports="shutdown"},3468:t=>{t.exports="sleep"},7840:t=>{t.exports="start"},9896:t=>{t.exports="transitioncomplete"},5103:t=>{t.exports="transitioninit"},3162:t=>{t.exports="transitionout"},7841:t=>{t.exports="transitionstart"},6454:t=>{t.exports="transitionwake"},6536:t=>{t.exports="update"},3875:t=>{t.exports="wake"},204:(t,e,r)=>{t.exports={ADDED_TO_SCENE:r(8618),BOOT:r(4328),CREATE:r(6099),DESTROY:r(7645),PAUSE:r(2710),POST_UPDATE:r(2547),PRE_RENDER:r(8577),PRE_UPDATE:r(8197),READY:r(8997),REMOVED_FROM_SCENE:r(7604),RENDER:r(8999),RESUME:r(9742),SHUTDOWN:r(3667),SLEEP:r(3468),START:r(7840),TRANSITION_COMPLETE:r(9896),TRANSITION_INIT:r(5103),TRANSITION_OUT:r(3162),TRANSITION_START:r(7841),TRANSITION_WAKE:r(6454),UPDATE:r(6536),WAKE:r(3875)}},2362:(t,e,r)=>{var i=r(7473),n=r(2915),o=r(1030),s=new i({initialize:function(t,e,r,i,n,o,s){this.texture=t,this.name=e,this.source=t.source[r],this.sourceIndex=r,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(o,s,i,n)},setSize:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0),this.cutX=r,this.cutY=i,this.cutWidth=t,this.cutHeight=e,this.width=t,this.height=e,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*e),this.centerX=Math.floor(t/2),this.centerY=Math.floor(e/2);var n=this.data,o=n.cut;o.x=r,o.y=i,o.w=t,o.h=e,o.r=r+t,o.b=i+e,n.sourceSize.w=t,n.sourceSize.h=e,n.spriteSourceSize.w=t,n.spriteSourceSize.h=e,n.radius=.5*Math.sqrt(t*t+e*e);var s=n.drawImage;return s.x=r,s.y=i,s.width=t,s.height=e,this.updateUVs()},setTrim:function(t,e,r,i,n,o){var s=this.data,a=s.spriteSourceSize;return s.trim=!0,s.sourceSize.w=t,s.sourceSize.h=e,a.x=r,a.y=i,a.w=n,a.h=o,a.r=r+n,a.b=i+o,this.x=r,this.y=i,this.width=n,this.height=o,this.halfWidth=.5*n,this.halfHeight=.5*o,this.centerX=Math.floor(n/2),this.centerY=Math.floor(o/2),this.updateUVs()},setScale9:function(t,e,r,i){var n=this.data;return n.scale9=!0,n.is3Slice=0===e&&i===this.height,n.scale9Borders.x=t,n.scale9Borders.y=e,n.scale9Borders.w=r,n.scale9Borders.h=i,this},setCropUVs:function(t,e,r,i,o,s,a){var h=this.cutX,u=this.cutY,c=this.cutWidth,l=this.cutHeight,f=this.realWidth,p=this.realHeight,d=h+(e=n(e,0,f)),v=u+(r=n(r,0,p)),y=i=n(i,0,f-e),g=o=n(o,0,p-r),m=this.data;if(m.trim){var x=m.spriteSourceSize,b=e+(i=n(i,0,c-e)),w=r+(o=n(o,0,l-r));if(x.r<e||x.b<r||x.x>b||x.y>w)d=0,v=0,y=0,g=0;else{var E=Math.max(x.x,e),T=Math.max(x.y,r),S=Math.min(x.r,b)-E,_=Math.min(x.b,w)-T;y=S,g=_,d=s?h+(c-(E-x.x)-S):h+(E-x.x),v=a?u+(l-(T-x.y)-_):u+(T-x.y),e=E,r=T,i=S,o=_}}else s&&(d=h+(c-e-i)),a&&(v=u+(l-r-o));var O=this.source.width,P=this.source.height;return t.u0=Math.max(0,d/O),t.v0=Math.max(0,v/P),t.u1=Math.min(1,(d+y)/O),t.v1=Math.min(1,(v+g)/P),t.x=e,t.y=r,t.cx=d,t.cy=v,t.cw=y,t.ch=g,t.width=i,t.height=o,t.flipX=s,t.flipY=a,t},updateCropUVs:function(t,e,r){return this.setCropUVs(t,t.x,t.y,t.width,t.height,e,r)},setUVs:function(t,e,r,i,n,o){var s=this.data.drawImage;return s.width=t,s.height=e,this.u0=r,this.v0=i,this.u1=n,this.v1=o,this},updateUVs:function(){var t=this.cutX,e=this.cutY,r=this.cutWidth,i=this.cutHeight,n=this.data.drawImage;n.width=r,n.height=i;var o=this.source.width,s=this.source.height;return this.u0=t/o,this.v0=e/s,this.u1=(t+r)/o,this.v1=(e+i)/s,this},updateUVsInverted:function(){var t=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/e,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var t=new s(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=o(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.texture=null,this.source=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=s},1864:t=>{t.exports=function(t,e,r){return t&&t.hasOwnProperty(e)?t[e]:r}},3747:t=>{t.exports={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999}},7473:t=>{function e(t,e,r){var i=r?t[e]:Object.getOwnPropertyDescriptor(t,e);return!r&&i.value&&"object"==typeof i.value&&(i=i.value),!(!i||!function(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(i))&&(void 0===i.enumerable&&(i.enumerable=!0),void 0===i.configurable&&(i.configurable=!0),i)}function r(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!!r&&(r.value&&"object"==typeof r.value&&(r=r.value),!1===r.configurable)}function i(t,i,n,s){for(var a in i)if(i.hasOwnProperty(a)){var h=e(i,a,n);if(!1!==h){if(r((s||t).prototype,a)){if(o.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,a,h)}else t.prototype[a]=i[a]}}function n(t,e){if(e){Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++)i(t,e[r].prototype||e[r])}}function o(t){var e,r;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");e=t.initialize,delete t.initialize}else if(t.Extends){var o=t.Extends;e=function(){o.apply(this,arguments)}}else e=function(){};t.Extends?(e.prototype=Object.create(t.Extends.prototype),e.prototype.constructor=e,r=t.Extends,delete t.Extends):e.prototype.constructor=e;var s=null;return t.Mixins&&(s=t.Mixins,delete t.Mixins),n(e,s),i(e,t,!0,r),e}o.extend=i,o.mixin=n,o.ignoreFinals=!1,t.exports=o},1984:t=>{t.exports=function(){}},1792:t=>{t.exports=function(t,e,r,i,n){if(void 0===n&&(n=t),r>0){var o=r-t.length;if(o<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.push(e),i&&i.call(n,e),e):null;for(var s=e.length-1;s>=0;)-1!==t.indexOf(e[s])&&e.splice(s,1),s--;if(0===(s=e.length))return null;r>0&&s>o&&(e.splice(o),s=o);for(var a=0;a<s;a++){var h=e[a];t.push(h),i&&i.call(n,h)}return e}},2280:t=>{t.exports=function(t,e,r,i,n,o){if(void 0===r&&(r=0),void 0===o&&(o=t),i>0){var s=i-t.length;if(s<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.splice(r,0,e),n&&n.call(o,e),e):null;for(var a=e.length-1;a>=0;)-1!==t.indexOf(e[a])&&e.pop(),a--;if(0===(a=e.length))return null;i>0&&a>s&&(e.splice(s),a=s);for(var h=a-1;h>=0;h--){var u=e[h];t.splice(r,0,u),n&&n.call(o,u)}return e}},2513:t=>{t.exports=function(t,e){var r=t.indexOf(e);return-1!==r&&r<t.length&&(t.splice(r,1),t.push(e)),e}},1771:(t,e,r)=>{var i=r(2497);t.exports=function(t,e,r,n,o){void 0===n&&(n=0),void 0===o&&(o=t.length);var s=0;if(i(t,n,o))for(var a=n;a<o;a++)t[a][e]===r&&s++;return s}},7883:t=>{t.exports=function(t,e,r){var i,n=[null];for(i=3;i<arguments.length;i++)n.push(arguments[i]);for(i=0;i<t.length;i++)n[0]=t[i],e.apply(r,n);return t}},5856:(t,e,r)=>{var i=r(2497);t.exports=function(t,e,r,n,o){if(void 0===n&&(n=0),void 0===o&&(o=t.length),i(t,n,o)){var s,a=[null];for(s=5;s<arguments.length;s++)a.push(arguments[s]);for(s=n;s<o;s++)a[0]=t[s],e.apply(r,a)}return t}},3957:t=>{t.exports=function(t,e,r){if(!e.length)return NaN;if(1===e.length)return e[0];var i,n,o=1;if(r){if(t<e[0][r])return e[0];for(;e[o][r]<t;)o++}else for(;e[o]<t;)o++;return o>e.length&&(o=e.length),r?(i=e[o-1][r],(n=e[o][r])-t<=t-i?e[o]:e[o-1]):(i=e[o-1],(n=e[o])-t<=t-i?n:i)}},4493:t=>{var e=function(t,r){void 0===r&&(r=[]);for(var i=0;i<t.length;i++)Array.isArray(t[i])?e(t[i],r):r.push(t[i]);return r};t.exports=e},6245:(t,e,r)=>{var i=r(2497);t.exports=function(t,e,r,n,o){void 0===n&&(n=0),void 0===o&&(o=t.length);var s=[];if(i(t,n,o))for(var a=n;a<o;a++){var h=t[a];(!e||e&&void 0===r&&h.hasOwnProperty(e)||e&&void 0!==r&&h[e]===r)&&s.push(h)}return s}},1647:(t,e,r)=>{var i=r(2497);t.exports=function(t,e,r,n,o){if(void 0===n&&(n=0),void 0===o&&(o=t.length),i(t,n,o))for(var s=n;s<o;s++){var a=t[s];if(!e||e&&void 0===r&&a.hasOwnProperty(e)||e&&void 0!==r&&a[e]===r)return a}return null}},5301:t=>{t.exports=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length);var i=e+Math.floor(Math.random()*r);return void 0===t[i]?null:t[i]}},8683:t=>{t.exports=function(t,e,r){if(e===r)return t;var i=t.indexOf(e),n=t.indexOf(r);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");return i>n||(t.splice(i,1),n===t.length-1?t.push(e):t.splice(n,0,e)),t}},546:t=>{t.exports=function(t,e,r){if(e===r)return t;var i=t.indexOf(e),n=t.indexOf(r);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");return i<n||(t.splice(i,1),0===n?t.unshift(e):t.splice(n,0,e)),t}},1842:t=>{t.exports=function(t,e){var r=t.indexOf(e);if(r>0){var i=t[r-1],n=t.indexOf(i);t[r]=i,t[n]=e}return t}},1419:t=>{t.exports=function(t,e,r){var i=t.indexOf(e);if(-1===i||r<0||r>=t.length)throw new Error("Supplied index out of bounds");return i!==r&&(t.splice(i,1),t.splice(r,0,e)),e}},6512:t=>{t.exports=function(t,e){var r=t.indexOf(e);if(-1!==r&&r<t.length-1){var i=t[r+1],n=t.indexOf(i);t[r]=i,t[n]=e}return t}},4130:t=>{t.exports=function(t,e,r,i){var n,o=[],s=!1;if((r||i)&&(s=!0,r||(r=""),i||(i="")),e<t)for(n=t;n>=e;n--)s?o.push(r+n.toString()+i):o.push(n);else for(n=t;n<=e;n++)s?o.push(r+n.toString()+i):o.push(n);return o}},1316:(t,e,r)=>{var i=r(4078);t.exports=function(t,e,r){void 0===t&&(t=0),void 0===e&&(e=null),void 0===r&&(r=1),null===e&&(e=t,t=0);for(var n=[],o=Math.max(i((e-t)/(r||1)),0),s=0;s<o;s++)n.push(t),t+=r;return n}},9465:t=>{function e(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function r(t,e){return t<e?-1:t>e?1:0}var i=function(t,n,o,s,a){for(void 0===o&&(o=0),void 0===s&&(s=t.length-1),void 0===a&&(a=r);s>o;){if(s-o>600){var h=s-o+1,u=n-o+1,c=Math.log(h),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(h-l)/h)*(u-h/2<0?-1:1),p=Math.max(o,Math.floor(n-u*l/h+f)),d=Math.min(s,Math.floor(n+(h-u)*l/h+f));i(t,n,p,d,a)}var v=t[n],y=o,g=s;for(e(t,o,n),a(t[s],v)>0&&e(t,o,s);y<g;){for(e(t,y,g),y++,g--;a(t[y],v)<0;)y++;for(;a(t[g],v)>0;)g--}0===a(t[o],v)?e(t,o,g):e(t,++g,s),g<=n&&(o=g+1),n<=g&&(s=g-1)}};t.exports=i},9703:(t,e,r)=>{var i=r(5851),n=r(4912),o=function(t,e,r){for(var i=[],n=0;n<t.length;n++)for(var o=0;o<e.length;o++)for(var s=0;s<r;s++)i.push({a:t[n],b:e[o]});return i};t.exports=function(t,e,r){var s=i(r,"max",0),a=i(r,"qty",1),h=i(r,"random",!1),u=i(r,"randomB",!1),c=i(r,"repeat",0),l=i(r,"yoyo",!1),f=[];if(u&&n(e),-1===c)if(0===s)c=0;else{var p=t.length*e.length*a;l&&(p*=2),c=Math.ceil(s/p)}for(var d=0;d<=c;d++){var v=o(t,e,a);h&&n(v),f=f.concat(v),l&&(v.reverse(),f=f.concat(v))}return s&&f.splice(s),f}},7161:(t,e,r)=>{var i=r(8935);t.exports=function(t,e,r,n){var o;if(void 0===n&&(n=t),!Array.isArray(e))return-1!==(o=t.indexOf(e))?(i(t,o),r&&r.call(n,e),e):null;for(var s=e.length-1,a=[];s>=0;){var h=e[s];-1!==(o=t.indexOf(h))&&(i(t,o),a.push(h),r&&r.call(n,h)),s--}return a}},4725:(t,e,r)=>{var i=r(8935);t.exports=function(t,e,r,n){if(void 0===n&&(n=t),e<0||e>t.length-1)throw new Error("Index out of bounds");var o=i(t,e);return r&&r.call(n,o),o}},8780:(t,e,r)=>{var i=r(2497);t.exports=function(t,e,r,n,o){if(void 0===e&&(e=0),void 0===r&&(r=t.length),void 0===o&&(o=t),i(t,e,r)){var s=r-e,a=t.splice(e,s);if(n)for(var h=0;h<a.length;h++){var u=a[h];n.call(o,u)}return a}return[]}},5744:(t,e,r)=>{var i=r(8935);t.exports=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length);var n=e+Math.floor(Math.random()*r);return i(t,n)}},6960:t=>{t.exports=function(t,e,r){var i=t.indexOf(e),n=t.indexOf(r);return-1!==i&&-1===n&&(t[i]=r,!0)}},1021:t=>{t.exports=function(t,e){void 0===e&&(e=1);for(var r=null,i=0;i<e;i++)r=t.shift(),t.push(r);return r}},4027:t=>{t.exports=function(t,e){void 0===e&&(e=1);for(var r=null,i=0;i<e;i++)r=t.pop(),t.unshift(r);return r}},2497:t=>{t.exports=function(t,e,r,i){var n=t.length;if(e<0||e>n||e>=r||r>n){if(i)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},5361:t=>{t.exports=function(t,e){var r=t.indexOf(e);return-1!==r&&r>0&&(t.splice(r,1),t.unshift(e)),e}},3718:(t,e,r)=>{var i=r(2497);t.exports=function(t,e,r,n,o){if(void 0===n&&(n=0),void 0===o&&(o=t.length),i(t,n,o))for(var s=n;s<o;s++){var a=t[s];a.hasOwnProperty(e)&&(a[e]=r)}return t}},4912:t=>{t.exports=function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[r],t[r]=i}return t}},2071:t=>{t.exports=function(t){var e=/\D/g;return t.sort((function(t,r){return parseInt(t.replace(e,""),10)-parseInt(r.replace(e,""),10)})),t}},8935:t=>{t.exports=function(t,e){if(!(e>=t.length)){for(var r=t.length-1,i=t[e],n=e;n<r;n++)t[n]=t[n+1];return t.length=r,i}}},9992:(t,e,r)=>{var i=r(9356);function n(t,e){return String(t).localeCompare(e)}function o(t,e,r,i){var n,o,s,a,h,u=t.length,c=0,l=2*r;for(n=0;n<u;n+=l)for(s=(o=n+r)+r,o>u&&(o=u),s>u&&(s=u),a=n,h=o;;)if(a<o&&h<s)e(t[a],t[h])<=0?i[c++]=t[a++]:i[c++]=t[h++];else if(a<o)i[c++]=t[a++];else{if(!(h<s))break;i[c++]=t[h++]}}t.exports=function(t,e){if(void 0===e&&(e=n),!t||t.length<2)return t;if(i.features.stableSort)return t.sort(e);var r=function(t,e){var r=t.length;if(r<=1)return t;for(var i=new Array(r),n=1;n<r;n*=2){o(t,e,n,i);var s=t;t=i,i=s}return t}(t,e);return r!==t&&o(r,null,t.length,t),t}},2372:t=>{t.exports=function(t,e,r){if(e===r)return t;var i=t.indexOf(e),n=t.indexOf(r);if(i<0||n<0)throw new Error("Supplied items must be elements of the same array");return t[i]=r,t[n]=e,t}},1953:(t,e,r)=>{t.exports={Matrix:r(1237),Add:r(1792),AddAt:r(2280),BringToTop:r(2513),CountAllMatching:r(1771),Each:r(7883),EachInRange:r(5856),FindClosestInSorted:r(3957),Flatten:r(4493),GetAll:r(6245),GetFirst:r(1647),GetRandom:r(5301),MoveDown:r(1842),MoveTo:r(1419),MoveUp:r(6512),MoveAbove:r(8683),MoveBelow:r(546),NumberArray:r(4130),NumberArrayStep:r(1316),QuickSelect:r(9465),Range:r(9703),Remove:r(7161),RemoveAt:r(4725),RemoveBetween:r(8780),RemoveRandomElement:r(5744),Replace:r(6960),RotateLeft:r(1021),RotateRight:r(4027),SafeRange:r(2497),SendToBack:r(5361),SetAll:r(3718),Shuffle:r(4912),SortByDigits:r(2071),SpliceOne:r(8935),StableSort:r(9992),Swap:r(2372)}},1816:t=>{t.exports=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))return!1;for(var e=t[0].length,r=1;r<t.length;r++)if(t[r].length!==e)return!1;return!0}},6655:(t,e,r)=>{var i=r(7222),n=r(1816);t.exports=function(t){var e="";if(!n(t))return e;for(var r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++){var s=t[r][o].toString();e+="undefined"!==s?i(s,2):"?",o<t[r].length-1&&(e+=" |")}if(r<t.length-1){e+="\n";for(var a=0;a<t[r].length;a++)e+="---",a<t[r].length-1&&(e+="+");e+="\n"}}return e}},582:t=>{t.exports=function(t){return t.reverse()}},6063:t=>{t.exports=function(t){for(var e=0;e<t.length;e++)t[e].reverse();return t}},8321:(t,e,r)=>{var i=r(7116);t.exports=function(t){return i(t,180)}},2597:(t,e,r)=>{var i=r(7116);t.exports=function(t,e){void 0===e&&(e=1);for(var r=0;r<e;r++)t=i(t,90);return t}},7116:(t,e,r)=>{var i=r(1816),n=r(4780);t.exports=function(t,e){if(void 0===e&&(e=90),!i(t))return null;if("string"!=typeof e&&(e=(e%360+360)%360),90===e||-270===e||"rotateLeft"===e)(t=n(t)).reverse();else if(-90===e||270===e||"rotateRight"===e)t.reverse(),t=n(t);else if(180===Math.abs(e)||"rotate180"===e){for(var r=0;r<t.length;r++)t[r].reverse();t.reverse()}return t}},6285:(t,e,r)=>{var i=r(7116);t.exports=function(t,e){void 0===e&&(e=1);for(var r=0;r<e;r++)t=i(t,-90);return t}},7711:(t,e,r)=>{var i=r(1021),n=r(4027);t.exports=function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),0!==r&&(r<0?i(t,Math.abs(r)):n(t,r)),0!==e)for(var o=0;o<t.length;o++){var s=t[o];e<0?i(s,Math.abs(e)):n(s,e)}return t}},4780:t=>{t.exports=function(t){for(var e=t.length,r=t[0].length,i=new Array(r),n=0;n<r;n++){i[n]=new Array(e);for(var o=e-1;o>-1;o--)i[n][o]=t[o][n]}return i}},1237:(t,e,r)=>{t.exports={CheckMatrix:r(1816),MatrixToString:r(6655),ReverseColumns:r(582),ReverseRows:r(6063),Rotate180:r(8321),RotateLeft:r(2597),RotateMatrix:r(7116),RotateRight:r(6285),Translate:r(7711),TransposeMatrix:r(4780)}},3911:t=>{var e=function(t){var r,i,n;if("object"!=typeof t||null===t)return t;for(n in r=Array.isArray(t)?[]:{},t)i=t[n],r[n]=e(i);return r};t.exports=e},1030:(t,e,r)=>{var i=r(2482),n=function(){var t,e,r,o,s,a,h=arguments[0]||{},u=1,c=arguments.length,l=!1;for("boolean"==typeof h&&(l=h,h=arguments[1]||{},u=2),c===u&&(h=this,--u);u<c;u++)if(null!=(t=arguments[u]))for(e in t)r=h[e],h!==(o=t[e])&&(l&&o&&(i(o)||(s=Array.isArray(o)))?(s?(s=!1,a=r&&Array.isArray(r)?r:[]):a=r&&i(r)?r:{},h[e]=n(l,a,o)):void 0!==o&&(h[e]=o));return h};t.exports=n},8361:(t,e,r)=>{var i=r(4675),n=r(5851);t.exports=function(t,e,r){var o=n(t,e,null);if(null===o)return r;if(Array.isArray(o))return i.RND.pick(o);if("object"==typeof o){if(o.hasOwnProperty("randInt"))return i.RND.integerInRange(o.randInt[0],o.randInt[1]);if(o.hasOwnProperty("randFloat"))return i.RND.realInRange(o.randFloat[0],o.randFloat[1])}else if("function"==typeof o)return o(e);return o}},4597:t=>{t.exports=function(t,e,r){var i=typeof t;return t&&"number"!==i&&"string"!==i&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:r}},5851:t=>{t.exports=function(t,e,r,i){if(!t&&!i||"number"==typeof t)return r;if(t&&t.hasOwnProperty(e))return t[e];if(i&&i.hasOwnProperty(e))return i[e];if(-1!==e.indexOf(".")){for(var n=e.split("."),o=t,s=i,a=r,h=r,u=!0,c=!0,l=0;l<n.length;l++)o&&o.hasOwnProperty(n[l])?(a=o[n[l]],o=o[n[l]]):u=!1,s&&s.hasOwnProperty(n[l])?(h=s[n[l]],s=s[n[l]]):c=!1;return u?a:c?h:r}return r}},2482:t=>{t.exports=function(t){if(!t||"object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},7222:t=>{t.exports=function(t,e,r,i){void 0===e&&(e=0),void 0===r&&(r=" "),void 0===i&&(i=3);var n=0;if(e+1>=(t=t.toString()).length)switch(i){case 1:t=new Array(e+1-t.length).join(r)+t;break;case 3:var o=Math.ceil((n=e-t.length)/2);t=new Array(n-o+1).join(r)+t+new Array(o+1).join(r);break;default:t+=new Array(e+1-t.length).join(r)}return t}}},e={},r=function r(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,r),o.exports}(4513);window.SpinePlugin=r})()},7452:t=>{var e=function(t){"use strict";var e,r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(t,e,r){var i=f;return function(n,o){if(i===d)throw new Error("Generator is already running");if(i===v){if("throw"===n)throw o;return R()}for(r.method=n,r.arg=o;;){var s=r.delegate;if(s){var a=P(s,r);if(a){if(a===y)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=d;var h=l(t,e,r);if("normal"===h.type){if(i=r.done?v:p,h.arg===y)continue;return{value:h.arg,done:r.done}}"throw"===h.type&&(i=v,r.method="throw",r.arg=h.arg)}}}function P(t,r){var i=r.method,n=t.iterator[i];if(n===e)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(t){if(t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function r(){for(;++n<t.length;)if(i.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}return{next:R}}function R(){return{value:e,done:!0}}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},t.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(e,r,i,n),o);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},t.values=C,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(i,n){return a.type="throw",a.arg=t,r.next=i,n&&(r.method="next",r.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,i){return this.delegate={iterator:C(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},5371:(t,e,r)=>{var i;!function(){function n(t,e,r){return t.call.apply(t.bind,arguments)}function o(t,e,r){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function s(t,e,r){return(s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?n:o).apply(null,arguments)}var a=Date.now||function(){return+new Date};function h(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var u=!!window.FontFace;function c(t,e,r,i){if(e=t.c.createElement(e),r)for(var n in r)r.hasOwnProperty(n)&&("style"==n?e.style.cssText=r[n]:e.setAttribute(n,r[n]));return i&&e.appendChild(t.c.createTextNode(i)),e}function l(t,e,r){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(r,t.lastChild)}function f(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t,e,r){e=e||[],r=r||[];for(var i=t.className.split(/\s+/),n=0;n<e.length;n+=1){for(var o=!1,s=0;s<i.length;s+=1)if(e[n]===i[s]){o=!0;break}o||i.push(e[n])}for(e=[],n=0;n<i.length;n+=1){for(o=!1,s=0;s<r.length;s+=1)if(i[n]===r[s]){o=!0;break}o||e.push(i[n])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function d(t,e){for(var r=t.className.split(/\s+/),i=0,n=r.length;i<n;i++)if(r[i]==e)return!0;return!1}function v(t,e,r){function i(){a&&n&&o&&(a(s),a=null)}e=c(t,"link",{rel:"stylesheet",href:e,media:"all"});var n=!1,o=!0,s=null,a=r||null;u?(e.onload=function(){n=!0,i()},e.onerror=function(){n=!0,s=Error("Stylesheet failed to load"),i()}):setTimeout((function(){n=!0,i()}),0),l(t,"head",e)}function y(t,e,r,i){var n=t.c.getElementsByTagName("head")[0];if(n){var o=c(t,"script",{src:e}),s=!1;return o.onload=o.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,r&&r(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&n.removeChild(o))},n.appendChild(o),setTimeout((function(){s||(s=!0,r&&r(Error("Script load timeout")))}),i||5e3),o}return null}function g(){this.a=0,this.c=null}function m(t){return t.a++,function(){t.a--,b(t)}}function x(t,e){t.c=e,b(t)}function b(t){0==t.a&&t.c&&(t.c(),t.c=null)}function w(t){this.a=t||"-"}function E(t,e){this.c=t,this.f=4,this.a="n";var r=(e||"n4").match(/^([nio])([1-9])$/i);r&&(this.a=r[1],this.f=parseInt(r[2],10))}function T(t){var e=[];t=t.split(/,\s*/);for(var r=0;r<t.length;r++){var i=t[r].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function S(t){return t.a+t.f}function _(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function O(t){var e=4,r="n",i=null;return t&&((i=t.match(/(normal|oblique|italic)/i))&&i[1]&&(r=i[1].substr(0,1).toLowerCase()),(i=t.match(/([1-9]00|normal|bold)/i))&&i[1]&&(/bold/i.test(i[1])?e=7:/[1-9]00/.test(i[1])&&(e=parseInt(i[1].substr(0,1),10)))),r+e}function P(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new w("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function M(t){if(t.g){var e=d(t.f,t.a.c("wf","active")),r=[],i=[t.a.c("wf","loading")];e||r.push(t.a.c("wf","inactive")),p(t.f,r,i)}A(t,"inactive")}function A(t,e,r){t.j&&t.h[e]&&(r?t.h[e](r.c,S(r)):t.h[e]())}function L(){this.c={}}function C(t,e){this.c=t,this.f=e,this.a=c(this.c,"span",{"aria-hidden":"true"},this.f)}function R(t){l(t.c,"body",t.a)}function k(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+T(t.c)+";font-style:"+_(t)+";font-weight:"+t.f+"00;"}function F(t,e,r,i,n,o){this.g=t,this.j=e,this.a=i,this.c=r,this.f=n||3e3,this.h=o||void 0}function I(t,e,r,i,n,o,s){this.v=t,this.B=e,this.c=r,this.a=i,this.s=s||"BESbswy",this.f={},this.w=n||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new C(this.c,this.s),this.h=new C(this.c,this.s),this.j=new C(this.c,this.s),this.m=new C(this.c,this.s),t=k(t=new E(this.a.c+",serif",S(this.a))),this.g.a.style.cssText=t,t=k(t=new E(this.a.c+",sans-serif",S(this.a))),this.h.a.style.cssText=t,t=k(t=new E("serif",S(this.a))),this.j.a.style.cssText=t,t=k(t=new E("sans-serif",S(this.a))),this.m.a.style.cssText=t,R(this.g),R(this.h),R(this.j),R(this.m)}w.prototype.c=function(t){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},F.prototype.start=function(){var t=this.c.o.document,e=this,r=a(),i=new Promise((function(i,n){!function o(){a()-r>=e.f?n():t.fonts.load(function(t){return _(t)+" "+t.f+"00 300px "+T(t.c)}(e.a),e.h).then((function(t){1<=t.length?i():setTimeout(o,25)}),(function(){n()}))}()})),n=null,o=new Promise((function(t,r){n=setTimeout(r,e.f)}));Promise.race([o,i]).then((function(){n&&(clearTimeout(n),n=null),e.g(e.a)}),(function(){e.j(e.a)}))};var D={D:"serif",C:"sans-serif"},j=null;function B(){if(null===j){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);j=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return j}function N(t,e,r){for(var i in D)if(D.hasOwnProperty(i)&&e===t.f[D[i]]&&r===t.f[D[i]])return!0;return!1}function G(t){var e,r=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(e=r===t.f.serif&&i===t.f["sans-serif"])||(e=B()&&N(t,r,i)),e?a()-t.A>=t.w?B()&&N(t,r,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?U(t,t.v):U(t,t.B):function(t){setTimeout(s((function(){G(this)}),t),50)}(t):U(t,t.v)}function U(t,e){setTimeout(s((function(){f(this.g.a),f(this.h.a),f(this.j.a),f(this.m.a),e(this.a)}),t),0)}function Y(t,e,r){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=r}I.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=a(),G(this)};var z=null;function X(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&p(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),A(t,"active")):M(t.a))}function V(t){this.j=t,this.a=new L,this.h=0,this.f=this.g=!0}function W(t,e,r,i,n){var o=0==--t.h;(t.f||t.g)&&setTimeout((function(){var t=n||null,a=i||{};if(0===r.length&&o)M(e.a);else{e.f+=r.length,o&&(e.j=o);var h,u=[];for(h=0;h<r.length;h++){var c=r[h],l=a[c.c],f=e.a,d=c;if(f.g&&p(f.f,[f.a.c("wf",d.c,S(d).toString(),"loading")]),A(f,"fontloading",d),f=null,null===z)if(window.FontFace){d=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var v=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);z=d?42<parseInt(d[1],10):!v}else z=!1;f=z?new F(s(e.g,e),s(e.h,e),e.c,c,e.s,l):new I(s(e.g,e),s(e.h,e),e.c,c,e.s,t,l),u.push(f)}for(h=0;h<u.length;h++)u[h].start()}}),0)}function H(t,e){this.c=t,this.a=e}function q(t,e){this.c=t,this.a=e}function K(t,e){this.c=t||Z,this.a=[],this.f=[],this.g=e||""}Y.prototype.g=function(t){var e=this.a;e.g&&p(e.f,[e.a.c("wf",t.c,S(t).toString(),"active")],[e.a.c("wf",t.c,S(t).toString(),"loading"),e.a.c("wf",t.c,S(t).toString(),"inactive")]),A(e,"fontactive",t),this.m=!0,X(this)},Y.prototype.h=function(t){var e=this.a;if(e.g){var r=d(e.f,e.a.c("wf",t.c,S(t).toString(),"active")),i=[],n=[e.a.c("wf",t.c,S(t).toString(),"loading")];r||i.push(e.a.c("wf",t.c,S(t).toString(),"inactive")),p(e.f,i,n)}A(e,"fontinactive",t),X(this)},V.prototype.load=function(t){this.c=new h(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,r){var i=[],n=r.timeout;!function(t){t.g&&p(t.f,[t.a.c("wf","loading")]),A(t,"loading")}(e),i=function(t,e,r){var i,n=[];for(i in e)if(e.hasOwnProperty(i)){var o=t.c[i];o&&n.push(o(e[i],r))}return n}(t.a,r,t.c);var o=new Y(t.c,e,n);for(t.h=i.length,e=0,r=i.length;e<r;e++)i[e].load((function(e,r,i){W(t,o,e,r,i)}))}(this,new P(this.c,t),t)},H.prototype.load=function(t){function e(){if(o["__mti_fntLst"+i]){var r,n=o["__mti_fntLst"+i](),s=[];if(n)for(var a=0;a<n.length;a++){var h=n[a].fontfamily;null!=n[a].fontStyle&&null!=n[a].fontWeight?(r=n[a].fontStyle+n[a].fontWeight,s.push(new E(h,r))):s.push(new E(h))}t(s)}else setTimeout((function(){e()}),50)}var r=this,i=r.a.projectId,n=r.a.version;if(i){var o=r.c.o;y(this.c,(r.a.api||"https://fast.fonts.net/jsapi")+"/"+i+".js"+(n?"?v="+n:""),(function(n){n?t([]):(o["__MonotypeConfiguration__"+i]=function(){return r.a},e())})).id="__MonotypeAPIScript__"+i}else t([])},q.prototype.load=function(t){var e,r,i=this.a.urls||[],n=this.a.families||[],o=this.a.testStrings||{},s=new g;for(e=0,r=i.length;e<r;e++)v(this.c,i[e],m(s));var a=[];for(e=0,r=n.length;e<r;e++)if((i=n[e].split(":"))[1])for(var h=i[1].split(","),u=0;u<h.length;u+=1)a.push(new E(i[0],h[u]));else a.push(new E(i[0]));x(s,(function(){t(a,o)}))};var Z="https://fonts.googleapis.com/css";function J(t){this.f=t,this.a=[],this.c={}}var Q={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},$={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},tt={i:"i",italic:"i",n:"n",normal:"n"},et=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function rt(t,e){this.c=t,this.a=e}var it={Arimo:!0,Cousine:!0,Tinos:!0};function nt(t,e){this.c=t,this.a=e}function ot(t,e){this.c=t,this.f=e,this.a=[]}rt.prototype.load=function(t){var e=new g,r=this.c,i=new K(this.a.api,this.a.text),n=this.a.families;!function(t,e){for(var r=e.length,i=0;i<r;i++){var n=e[i].split(":");3==n.length&&t.f.push(n.pop());var o="";2==n.length&&""!=n[1]&&(o=":"),t.a.push(n.join(o))}}(i,n);var o=new J(n);!function(t){for(var e=t.f.length,r=0;r<e;r++){var i=t.f[r].split(":"),n=i[0].replace(/\+/g," "),o=["n4"];if(2<=i.length){var s;if(s=[],a=i[1])for(var a,h=(a=a.split(",")).length,u=0;u<h;u++){var c;if((c=a[u]).match(/^[\w-]+$/))if(null==(l=et.exec(c.toLowerCase())))c="";else{if(c=null==(c=l[2])||""==c?"n":tt[c],null==(l=l[1])||""==l)l="4";else var l=$[l]||(isNaN(l)?"4":l.substr(0,1));c=[c,l].join("")}else c="";c&&s.push(c)}0<s.length&&(o=s),3==i.length&&(s=[],0<(i=(i=i[2])?i.split(","):s).length&&(i=Q[i[0]])&&(t.c[n]=i))}for(t.c[n]||(i=Q[n])&&(t.c[n]=i),i=0;i<o.length;i+=1)t.a.push(new E(n,o[i]))}}(o),v(r,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,r=[],i=0;i<e;i++)r.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+r.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(i),m(e)),x(e,(function(){t(o.a,o.c,it)}))},nt.prototype.load=function(t){var e=this.a.id,r=this.c.o;e?y(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",(function(e){if(e)t([]);else if(r.Typekit&&r.Typekit.config&&r.Typekit.config.fn){e=r.Typekit.config.fn;for(var i=[],n=0;n<e.length;n+=2)for(var o=e[n],s=e[n+1],a=0;a<s.length;a++)i.push(new E(o,s[a]));try{r.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(i)}}),2e3):t([])},ot.prototype.load=function(t){var e=this.f.id,r=this.c.o,i=this;e?(r.__webfontfontdeckmodule__||(r.__webfontfontdeckmodule__={}),r.__webfontfontdeckmodule__[e]=function(e,r){for(var n=0,o=r.fonts.length;n<o;++n){var s=r.fonts[n];i.a.push(new E(s.name,O("font-weight:"+s.weight+";font-style:"+s.style)))}t(i.a)},y(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",(function(e){e&&t([])}))):t([])};var st=new V(window);st.a.c.custom=function(t,e){return new q(e,t)},st.a.c.fontdeck=function(t,e){return new ot(e,t)},st.a.c.monotype=function(t,e){return new H(e,t)},st.a.c.typekit=function(t,e){return new nt(e,t)},st.a.c.google=function(t,e){return new rt(e,t)};var at={load:s(st.load,st)};void 0===(i=function(){return at}.call(e,r,e,t))||(t.exports=i)}()}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";r(4572);var t,e=(t=r(5104))&&t.__esModule?t:{default:t};e.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),e.default._babelPolyfill=!0})(),(()=>{"use strict";var t={};r.r(t),r.d(t,{hasBrowserEnv:()=>Ne,hasStandardBrowserEnv:()=>Ge,hasStandardBrowserWebWorkerEnv:()=>Ye,origin:()=>ze});var e=r(4440),i=r.n(e);function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,s=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},h=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,i){var n=e&&e.prototype instanceof x?e:x,o=Object.create(n.prototype),a=new R(i||[]);return s(o,"_invoke",{value:M(t,r,a)}),o}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var d="suspendedStart",v="suspendedYield",y="executing",g="completed",m={};function x(){}function b(){}function w(){}var E={};l(E,h,(function(){return this}));var T=Object.getPrototypeOf,S=T&&T(T(k([])));S&&S!==r&&i.call(S,h)&&(E=S);var _=w.prototype=x.prototype=Object.create(E);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,s,a,h){var u=p(t[o],t,s);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==n(l)&&i.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,h)}),(function(t){r("throw",t,a,h)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,h)}))}h(u.arg)}var o;s(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function M(e,r,i){var n=d;return function(o,s){if(n===y)throw Error("Generator is already running");if(n===g){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=A(a,i);if(h){if(h===m)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===d)throw n=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=y;var u=p(e,r,i);if("normal"===u.type){if(n=i.done?g:v,u.arg===m)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=g,i.method="throw",i.arg=u.arg)}}}function A(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var o=p(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[h];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=w,s(_,"constructor",{value:w,configurable:!0}),s(w,"constructor",{value:b,configurable:!0}),b.displayName=l(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},O(P.prototype),l(P.prototype,u,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new P(f(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},O(_),l(_,c,"Generator"),l(_,h,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=k,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;C(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:k(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}function s(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function a(t,e){return h.apply(this,arguments)}function h(){var t;return t=o().mark((function t(e,r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.time.addEvent({delay:r,callback:function(){return t()}})})));case 1:case"end":return t.stop()}}),t)})),h=function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function a(t){s(o,i,n,a,h,"next",t)}function h(t){s(o,i,n,a,h,"throw",t)}a(void 0)}))},h.apply(this,arguments)}function u(t){for(var e=0,r=0,i=t.parentContainer,n=[i];i;)e+=i.x,r+=i.y,(i=i.parentContainer)&&n.push(i);return{x:e+=t.x,y:r+=t.y}}function c(t,e,r){return t.sort((function(t,i){return t[r]>i[r]?1*e:t[r]<i[r]?-1*e:0})),t}function l(t){var e=t;return[{count:1e3,prefix:"K"},{count:1e6,prefix:"M"},{count:1e9,prefix:"B"},{count:1e12,prefix:"B"}].forEach((function(r){t>=r.count&&(e=Math.trunc(t/r.count)+r.prefix)})),e}r(4254);var f=r(5371),p=r.n(f);const d=Phaser.Display.Canvas.CanvasPool,v=function(t,e){var r=d.create(),i=r.getContext("2d",{willReadFrequently:!0}),n=`8px ${t}`;i.font=n;var o=Math.ceil(i.measureText(e).width),s=o,a=2*s;o===r.width&&a===r.height||(r.width=o,r.height=a),i.fillStyle="#000",i.fillRect(0,0,o,a),i.textBaseline="alphabetic",i.fillStyle="#fff",i.font=n,i.fillText(e,0,s);for(var h=i.getImageData(0,0,o,a).data,u=!1,c=0,l=h.length;c<l;c+=4)if(h[c]>0){u=!0;break}return d.remove(r),u},y=Phaser.Loader.FILE_POPULATED,g=Phaser.Utils.Objects.GetValue;class m extends Phaser.Loader.File{load(){if(this.state===y)this.loader.nextFile(this,!0);else{var t=this.config;this.testString=g(t,"testString",void 0),void 0!==this.testString&&(this.testInterval=g(t,"testInterval",20),this.fontTests={},delete t.testString,delete t.testInterval),t.active=this.onLoad.bind(this),t.inactive=this.onError.bind(this),t.fontactive=this.onFontActive.bind(this),t.fontinactive=this.onFontInactive.bind(this),p().load(t)}}onLoad(){if(void 0===this.testString)this.loader.nextFile(this,!0);else{var t=function(){this.testFonts()?this.loader.nextFile(this,!0):setTimeout(t,this.testInterval)}.bind(this);t()}}onError(){this.loader.nextFile(this,!1)}onFontActive(t,e){var r;void 0!==this.testString&&void 0!==(r="string"==typeof this.testString?this.testString:this.testString[t])&&(this.fontTests[t]=r),this.loader.emit("webfontactive",this,t,e)}onFontInactive(t,e){this.loader.emit("webfontinactive",this,t,e)}testFonts(){var t=!0;for(var e in this.fontTests)v(e,this.fontTests[e])?delete this.fontTests[e]:t=!1;return t}}const x=m,b=Phaser.Utils.Objects.IsPlainObject,w=function(t,e){return b(t)?(e=t).hasOwnProperty("config")?(e.type="webfont",e.url=""):e={key:"webfont",type:"webfont",url:"",config:e}:e={type:"webfont",url:"",key:t,config:e},this.addFile(new x(this,e)),this};class E extends Phaser.Plugins.BasePlugin{constructor(t){super(t),t.registerFileType("rexWebFont",w)}addToScene(t){t.sys.load.rexWebFont=w}}const T=E,S={type:Phaser.WEBGL,width:720,height:1280,parent:"phaser",audio:{disableWebAudio:!0},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},plugins:{scene:[{key:"SpinePlugin",plugin:SpinePlugin,mapping:"spine"}],global:[{key:"rexWebFontLoader",plugin:T,start:!0}]},prefix:"zoltar"},_="Sofia Sans";function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function P(){P=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new R(i||[]);return n(s,"_invoke",{value:M(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(k([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==O(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function M(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=A(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function A(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(O(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=k,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;C(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:k(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function M(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function A(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){M(o,i,n,s,a,"next",t)}function a(t){M(o,i,n,s,a,"throw",t)}s(void 0)}))}}function L(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,C(i.key),i)}}function C(t){var e=function(t,e){if("object"!=O(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=O(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(e)?e:e+""}var R=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e},e=[{key:"init",value:(l=A(P().mark((function t(){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){t(!0)})));case 1:case"end":return t.stop()}}),t)}))),function(){return l.apply(this,arguments)})},{key:"getUserId",value:(c=A(P().mark((function t(){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){t(999999)})));case 1:case"end":return t.stop()}}),t)}))),function(){return c.apply(this,arguments)})},{key:"getUserName",value:(u=A(P().mark((function t(){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){t("test")})));case 1:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"getUserHandle",value:(h=A(P().mark((function t(){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){t("?")})));case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"getLanguage",value:(a=A(P().mark((function t(){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){t("en")})));case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"getFriends",value:(s=A(P().mark((function t(){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",[]);case 1:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"showInterAd",value:function(){return new Promise((function(t,e){t(!0)}))}},{key:"showRewardAd",value:(o=A(P().mark((function t(){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){t(!0)})));case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"buy",value:(n=A(P().mark((function t(){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){t(!0)})));case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"saveData",value:(i=A(P().mark((function t(e,r){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){localStorage.setItem(e,JSON.stringify(r)),t(!0)})));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return i.apply(this,arguments)})},{key:"loadData",value:(r=A(P().mark((function t(e){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=A(P().mark((function t(r){var i;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=JSON.parse(localStorage.getItem(e)),r(i);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})}],e&&L(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,i,n,o,s,a,h,u,c,l}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function F(){F=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==k(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(k(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function I(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function D(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){I(o,i,n,s,a,"next",t)}function a(t){I(o,i,n,s,a,"throw",t)}s(void 0)}))}}function j(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,B(i.key),i)}}function B(t){var e=function(t,e){if("object"!=k(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=k(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:e+""}var N=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e},e=[{key:"init",value:(h=D(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){t(!0)})));case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"getUserId",value:(a=D(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){t("1")})));case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"getLanguage",value:function(){return"ru"}},{key:"getFriends",value:(s=D(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",[]);case 1:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"showInterAd",value:function(){return new Promise((function(t,e){t(!0)}))}},{key:"showRewardAd",value:(o=D(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){t(!0)})));case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"buy",value:(n=D(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){t(!0)})));case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"saveData",value:(i=D(F().mark((function t(e,r){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){localStorage.setItem(e,JSON.stringify(r)),t(!0)})));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return i.apply(this,arguments)})},{key:"loadData",value:(r=D(F().mark((function t(e){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=D(F().mark((function t(r){var i;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=JSON.parse(localStorage.getItem(e)),r(i);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})}],e&&j(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,i,n,o,s,a,h}();function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function U(){U=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==G(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(G(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Y(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function z(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Y(o,i,n,s,a,"next",t)}function a(t){Y(o,i,n,s,a,"throw",t)}s(void 0)}))}}function X(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,V(i.key),i)}}function V(t){var e=function(t,e){if("object"!=G(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=G(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==G(e)?e:e+""}var W=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.userId=!1,this.userDisplayName=!1,this.userHandle=!1,this.userLanguageCode=!1},e=[{key:"init",value:(l=z(U().mark((function t(){var e=this;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var r=new URLSearchParams(window.location.search);e.userId=r.get("user_id"),e.userDisplayName=r.get("first_name"),e.userHandle=r.get("username"),e.userLanguageCode=r.get("language_code"),t(!0)})));case 1:case"end":return t.stop()}}),t)}))),function(){return l.apply(this,arguments)})},{key:"getUserId",value:(c=z(U().mark((function t(){var e=this;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){t(e.userId)})));case 1:case"end":return t.stop()}}),t)}))),function(){return c.apply(this,arguments)})},{key:"getUserName",value:(u=z(U().mark((function t(){var e=this;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){t(e.userDisplayName)})));case 1:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"getUserHandle",value:(h=z(U().mark((function t(){var e=this;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){t(e.userDisplayName)})));case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"getLanguage",value:(a=z(U().mark((function t(){var e=this;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){t(e.userLanguageCode)})));case 1:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"getFriends",value:(s=z(U().mark((function t(){return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",[]);case 1:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"showInterAd",value:function(){return new Promise((function(t,e){t(!0)}))}},{key:"showRewardAd",value:(o=z(U().mark((function t(){return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){t(!0)})));case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"buy",value:(n=z(U().mark((function t(){return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){t(!0)})));case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"saveData",value:(i=z(U().mark((function t(e,r){return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){localStorage.setItem(e,JSON.stringify(r)),t(!0)})));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return i.apply(this,arguments)})},{key:"loadData",value:(r=z(U().mark((function t(e){return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=z(U().mark((function t(r){var i;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=JSON.parse(localStorage.getItem(e)),r(i);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})}],e&&X(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,i,n,o,s,a,h,u,c,l}();function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function q(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,K(i.key),i)}}function K(t){var e=function(t,e){if("object"!=H(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=H(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==H(e)?e:e+""}var Z=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.API=this.initAPI()},(e=[{key:"current",get:function(){return window.CURRENT_PLAYGROUND}},{key:"initAPI",value:function(){var t=!1;switch(this.current){case"LOCAL":t=new R(this.game);break;case"PLAYDECK":t=new N(this.game);break;case"TELEGRAM":t=new W(this.game)}return t}},{key:"isCurrent",value:function(t){var e=this,r=!1;return t.forEach((function(t){t==e.current&&(r=!0)})),r}}])&&q(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function J(){return{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,count:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,rewards:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]}}function Q(){return{level:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,experience:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,rewards:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]}}function $(){return{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,percent:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,rewards:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]}}function tt(){return{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,color:arguments.length>1&&void 0!==arguments[1]?arguments[1]:16711680,special_type:arguments.length>2&&void 0!==arguments[2]&&arguments[2],cards:arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],rewards:arguments.length>4&&void 0!==arguments[4]?arguments[4]:[]}}function et(){return{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}}function rt(){return{type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,currency_count:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,helper_id:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}function it(){return{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,points:arguments.length>2?arguments[2]:void 0,cards:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,rewards:arguments.length>4&&void 0!==arguments[4]?arguments[4]:[]}}function nt(){return{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,levels:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]}}function ot(){return{number:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,profit:arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,cost:arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,rewards:arguments.length>3&&void 0!==arguments[3]?arguments[3]:[]}}function st(t){return{id:t,cipher:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]}}new Date("2024/08/01 17:00:00"),new Date("2028/08/20 18:00:00"),$(1,50,[rt(1,10)]),$(2,75,[rt(1,25)]),$(3,100,[rt(1,100)]),tt(1,4731729,!1,[et(1),et(2),et(3),et(4),et(5),et(6),et(7),et(8),et(9)],[rt(1,1e3)]),tt(2,6511923,!0,[et(1),et(2),et(3),et(4),et(5),et(6),et(7),et(8),et(9)],[rt(1,1e3)]),tt(3,4731729,!1,[et(1),et(2),et(3),et(4),et(5),et(6),et(7),et(8),et(9)],[rt(1,1e3)]),tt(4,6511923,!1,[et(1),et(2),et(3),et(4),et(5),et(6),et(7),et(8),et(9)],[rt(1,1e3)]),tt(5,3228269,!1,[et(1),et(2),et(3),et(4),et(5),et(6),et(7),et(8),et(9)],[rt(1,1e3)]),tt(6,4731729,!1,[et(1),et(2),et(3),et(4),et(5),et(6),et(7),et(8),et(9)],[rt(1,1e3)]),tt(7,3228269,!1,[et(1),et(2),et(3),et(4),et(5),et(6),et(7),et(8),et(9)],[rt(1,1e3)]),tt(8,6511923,!1,[et(1),et(2),et(3),et(4),et(5),et(6),et(7),et(8),et(9)],[rt(1,1e3)]),tt(9,4731729,!1,[et(1),et(2),et(3),et(4),et(5),et(6),et(7),et(8),et(9)],[rt(1,1e3)]),tt(10,6511923,!1,[et(1),et(2),et(3),et(4),et(5),et(6),et(7),et(8),et(9)],[rt(1,1e3)]),it(1,1,10,1,[rt(1,100)]),it(2,2,15,3,[rt(1,150)]),nt(1,[ot(1,50,10,[rt(2,1)]),ot(2,100,15,[rt(2,1)]),ot(3,200,20,[rt(2,1)]),ot(4,300,25,[rt(2,1)]),ot(5,500,30,[rt(2,1)])]),nt(2,[ot(1,50,10,[rt(2,1)]),ot(2,100,15,[rt(2,1)]),ot(3,200,20,[rt(2,1)]),ot(4,300,25,[rt(2,1)]),ot(5,500,30,[rt(2,1)])]),nt(3,[ot(1,50,10,[rt(2,1)]),ot(2,100,15,[rt(2,1)]),ot(3,200,20,[rt(2,1)]),ot(4,300,25,[rt(2,1)]),ot(5,500,30,[rt(2,1)])]),nt(4,[ot(1,50,10,[rt(2,1)]),ot(2,100,15,[rt(2,1)]),ot(3,200,20,[rt(2,1)]),ot(4,300,25,[rt(2,1)]),ot(5,500,30,[rt(2,1)])]),nt(5,[ot(1,50,10,[rt(2,1)]),ot(2,100,15,[rt(2,1)]),ot(3,200,20,[rt(2,1)]),ot(4,300,25,[rt(2,1)]),ot(5,500,30,[rt(2,1)])]),nt(6,[ot(1,50,10,[rt(2,1)]),ot(2,100,15,[rt(2,1)]),ot(3,200,20,[rt(2,1)]),ot(4,300,25,[rt(2,1)]),ot(5,500,30,[rt(2,1)])]),nt(7,[ot(1,50,10,[rt(2,1)]),ot(2,100,15,[rt(2,1)]),ot(3,200,20,[rt(2,1)]),ot(4,300,25,[rt(2,1)]),ot(5,500,30,[rt(2,1)])]),nt(8,[ot(1,50,10,[rt(2,1)]),ot(2,100,15,[rt(2,1)]),ot(3,200,20,[rt(2,1)]),ot(4,300,25,[rt(2,1)]),ot(5,500,30,[rt(2,1)])]),nt(9,[ot(1,50,10,[rt(2,1)]),ot(2,100,15,[rt(2,1)]),ot(3,200,20,[rt(2,1)]),ot(4,300,25,[rt(2,1)]),ot(5,500,30,[rt(2,1)])]),nt(10,[ot(1,50,10,[rt(2,1)]),ot(2,100,15,[rt(2,1)]),ot(3,200,20,[rt(2,1)]),ot(4,300,25,[rt(2,1)]),ot(5,500,30,[rt(2,1)])]),st(1,[3,7,2,1,5]),st(2,[1,1,1,1,1]),st(2,[2,2,2,2,2]),st(3,[1,1,1]),Q(2,5,[rt(1,10)]),Q(3,10,[rt(1,20)]),Q(4,15,[rt(1,30)]),Q(5,20,[rt(1,40)]),J(1,5,[rt(1,5)]),J(2,10,[rt(1,10)]),J(3,15,[rt(1,15)]),J(4,20,[rt(1,20)]),J(5,25,[rt(1,25)]),J(6,30,[rt(1,30)]),J(7,35,[rt(1,35)]),J(8,40,[rt(1,50)]);const at={play_last_state:!1,can_get_box:!0};function ht(t){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(t)}function ut(){ut=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==ht(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ht(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function ct(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function lt(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){ct(o,i,n,s,a,"next",t)}function a(t){ct(o,i,n,s,a,"throw",t)}s(void 0)}))}}function ft(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,pt(i.key),i)}}function pt(t){var e=function(t,e){if("object"!=ht(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=ht(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ht(e)?e:e+""}var dt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.backend=e,this.userId=!1,this.data={}},e=[{key:"init",value:(l=lt(ut().mark((function t(e,r,i,n){var o,s;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.backend.authenticateTelegram(e,r,i,n);case 2:if(!(o=t.sent)){t.next=10;break}return this.userId=o.user_id,t.next=7,this.backend.getUserData();case 7:return(s=t.sent)&&(this.data=s,this.data.boxes=[]),t.abrupt("return",!0);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,this)}))),function(t,e,r,i){return l.apply(this,arguments)})},{key:"levelUp",value:(c=lt(ut().mark((function t(){var e,r;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.backend.levelUp();case 2:if(!(e=t.sent)){t.next=7;break}return r=e.rewards,e.hasOwnProperty("update")&&this.update(e.update),t.abrupt("return",r);case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"useTicket",value:(u=lt(ut().mark((function t(){var e,r,i;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.backend.useTicket();case 2:if(!(e=t.sent)){t.next=9;break}return r={id:e.user_gift_box_id,gift_box_id:e.gift_box_id},i=e.ticket_text,this.data.user_gift_boxes.push(r),this.update(e),t.abrupt("return",{box:r,ticket_text:i});case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"updateProfit",value:(h=lt(ut().mark((function t(){var e,r;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=0,t.next=3,this.backend.updateProfit();case 3:return(r=t.sent)&&r.hasOwnProperty("update")&&(this.update(r.update),e=r.update.coins_added),t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"rewardGiftBox",value:(a=lt(ut().mark((function t(e){var r,i,n=this;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.backend.rewardGiftBox(e);case 2:if(!(r=t.sent)){t.next=8;break}return i=r.rewards,r.collection_pieces.forEach((function(t){var e=!1;n.data.collections.forEach((function(r){r.id==t.collection_id&&(r.pieces.push(t.piece),e=!0)})),e||n.data.collections.push({id:t.collection_id,pieces:[t.piece],completed:!1,received:!1})})),r.hasOwnProperty("update")&&this.update(r.update),t.abrupt("return",{rewards:i,collection_pieces:r.collection_pieces});case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"rewardFortuneInterval",value:(s=lt(ut().mark((function t(e){var r,i,n;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=0,t.next=3,this.backend.rewardFortuneInterval(e,this.data.experience);case 3:if(!(i=t.sent)){t.next=9;break}return n=i.rewards,-1==this.data.fortune_intervals_received.indexOf(e)&&this.data.fortune_intervals_received.push(e),i.hasOwnProperty("update")&&this.update(i.update),t.abrupt("return",n);case 9:return t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"upgradeHelper",value:(o=lt(ut().mark((function t(e,r,i){var n,o,s;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.backend.upgradeHelper(e,r,i);case 2:if(!(n=t.sent)){t.next=12;break}return o=n.rewards,s=!1,this.data.helpers.forEach((function(t){t.helper_id==n.helper_id&&(t.level=n.new_helper_level,s=!0)})),s||this.data.helpers.push({helper_id:n.helper_id,level:n.new_helper_level}),n.hasOwnProperty("update")&&this.update(n.update),t.abrupt("return",o);case 12:return t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return o.apply(this,arguments)})},{key:"updateCoins",value:(n=lt(ut().mark((function t(){var e,r,i,n=arguments;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:0,r=n.length>1&&void 0!==n[1]?n[1]:0,t.next=4,this.backend.updateData(e,r);case 4:if(!(i=t.sent)){t.next=8;break}return i.hasOwnProperty("update")&&this.update(i.update),t.abrupt("return",!0);case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"rewardCollection",value:(i=lt(ut().mark((function t(e){var r,i;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.backend.rewardCollection(e);case 2:if(!(r=t.sent)){t.next=8;break}return i=r.rewards,this.data.collections.forEach((function(t){t.id==e&&(t.received=!0)})),r.hasOwnProperty("update")&&this.update(r.update),t.abrupt("return",i);case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"rewardSeasonInterval",value:(r=lt(ut().mark((function t(e,r){var i,n,o;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.backend.rewardSeasonInterval(e,r);case 2:if(!(i=t.sent)){t.next=10;break}return n=i.rewards,o=!1,this.data.seasons.forEach((function(t){t.id==e&&-1==t.received_intervals.indexOf(r)&&(t.received_intervals.push(r),o=!0)})),o||this.data.seasons.push({id:e,received_intervals:[r]}),i.hasOwnProperty("update")&&this.update(i.update),t.abrupt("return",n);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"getBox",value:function(t,e){var r={id:t,type_id:e};return this.data.boxes.push(r),r}},{key:"update",value:function(t){for(var e in t)this.data.hasOwnProperty(e)&&(this.data[e]=t[e]);console.log("[User] data",this.data)}}],e&&ft(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,i,n,o,s,a,h,u,c,l}();function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function yt(){yt=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==vt(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(vt(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function gt(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function mt(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,xt(i.key),i)}}function xt(t){var e=function(t,e){if("object"!=vt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=vt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vt(e)?e:e+""}var bt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.backend=e,this.data={}},e=[{key:"init",value:(r=yt().mark((function t(){var e;return yt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.backend.getGeneralData();case 2:(e=t.sent)&&(this.data=e,c(this.data.helpers,1,"id"),c(this.data.collections,1,"id"));case 4:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(i,n){var o=r.apply(t,e);function s(t){gt(o,i,n,s,a,"next",t)}function a(t){gt(o,i,n,s,a,"throw",t)}s(void 0)}))},function(){return i.apply(this,arguments)})}],e&&mt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,i}();function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function Et(){Et=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==wt(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(wt(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Tt(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function St(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Tt(o,i,n,s,a,"next",t)}function a(t){Tt(o,i,n,s,a,"throw",t)}s(void 0)}))}}function _t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ot(i.key),i)}}function Ot(t){var e=function(t,e){if("object"!=wt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=wt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wt(e)?e:e+""}var Pt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=this.defaultData,this.dataKey="XOLTAR_TEMP_DATA_KEY",this.MAX_CLICK_COUNT=10},e=[{key:"init",value:(s=St(Et().mark((function t(){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.load();case 2:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"save",value:(o=St(Et().mark((function t(){var e=this;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=St(Et().mark((function t(r){return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.saveData(),console.log("[Temp]save",e.data),r();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"load",value:(n=St(Et().mark((function t(){var e=this;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=St(Et().mark((function t(r){var i,n,o;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadData();case 2:if(i=t.sent,n=e.defaultData,i)for(o in e.data=i,n)e.data.hasOwnProperty(o)||(e.data[o]=n[o]);console.log("[Temp] load",e.data),r();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"saveData",value:(i=St(Et().mark((function t(){var e=this;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){localStorage.setItem(e.dataKey,JSON.stringify(e.data)),t(!0)})));case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"loadData",value:(r=St(Et().mark((function t(){var e=this;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=St(Et().mark((function t(r){var i;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=JSON.parse(localStorage.getItem(e.dataKey)),r(i);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"boxesUpdate",value:function(t){var e=this;this.data.boxes.forEach((function(r,i){var n=!1;t.forEach((function(t){r.id==t.id&&(n=!0)})),n||e.boxDelete(r.id)})),t.forEach((function(t){var r=!1;e.data.boxes.forEach((function(e,i){e.id==t.id&&(r=!0)})),r||e.boxAdd(t.id,t.gift_box_id)}))}},{key:"boxAdd",value:function(t,e){var r={id:t,type_id:e,points:0};return this.data.boxes.push(r),this.save(),r}},{key:"boxDelete",value:function(t){var e=this;this.data.boxes.forEach((function(r,i){r.id==t&&e.data.boxes.splice(i,1)}))}},{key:"boxClick",value:function(t,e){this.data.coins+=e,this.data.click_count+=1,this.data.boxes.forEach((function(r){r.id==t&&(r.points+=e)})),this.save()}},{key:"checkClickCount",value:function(){return this.data.click_count>=this.MAX_CLICK_COUNT}},{key:"clearClicks",value:function(){this.data.coins=0,this.data.click_count=0,this.save()}},{key:"defaultData",get:function(){return{coins:0,click_count:0,boxes:[]}}}],e&&_t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,i,n,o,s}();function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function At(){At=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Mt(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Mt(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Lt(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Ct(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Lt(o,i,n,s,a,"next",t)}function a(t){Lt(o,i,n,s,a,"throw",t)}s(void 0)}))}}function Rt(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,kt(i.key),i)}}function kt(t){var e=function(t,e){if("object"!=Mt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Mt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mt(e)?e:e+""}var Ft=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.backend=r,this.key="zoltar_data",this.sessionData=at,this.user=new dt(this.backend),this.general=new bt(this.backend),this.temp=new Pt},e=[{key:"init",value:(l=Ct(At().mark((function t(e,r,i,n){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.user.init(e,r,i,n);case 2:return t.next=4,this.general.init();case 4:return t.next=6,this.temp.init();case 6:return t.next=8,this.update();case 8:console.log("[Storage] general",this.general),console.log("[Storage] user",this.user),console.log("[Storage] temp",this.temp);case 11:case"end":return t.stop()}}),t,this)}))),function(t,e,r,i){return l.apply(this,arguments)})},{key:"update",value:(c=Ct(At().mark((function t(){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.temp.boxesUpdate(this.user.data.user_gift_boxes);case 1:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"language",get:function(){return"en"}},{key:"displayName",get:function(){return this.user.data.display_name}},{key:"level",get:function(){return this.user.data.experience_level}},{key:"experience",get:function(){return this.user.data.experience}},{key:"generalDataLevels",get:function(){return this.general.data.experience_levels}},{key:"userDataCodeTrys",get:function(){return this.user.data.code_trys}},{key:"generalDataCollections",get:function(){return this.general.data.collections}},{key:"userDataCollections",get:function(){return this.user.data.collections}},{key:"generalDataSeasons",get:function(){return this.general.data.seasons}},{key:"userDataSeasons",get:function(){return this.user.data.seasons}},{key:"generalDataBoxes",get:function(){return this.general.data.gift_boxes}},{key:"userDataBoxes",get:function(){return this.temp.data.boxes}},{key:"generalDataHelpers",get:function(){return this.general.data.helpers}},{key:"generalDataCodes",get:function(){return this.general.data.game_codes}},{key:"userDataHelpers",get:function(){return this.user.data.helpers}},{key:"userDataCoins",get:function(){return this.user.data.coins+this.temp.data.coins}},{key:"userDataFortuna",get:function(){return this.user.data.experience}},{key:"generalDataFortunometr",get:function(){return this.general.data.fortune_intervals}},{key:"userDataFortunometrReceivedIntervals",get:function(){return this.user.data.fortune_intervals_received}},{key:"userDataProfitLastTime",get:function(){return this.user.data.profit_last_time}},{key:"ticketTime",get:function(){return this.user.data.next_ticket_time}},{key:"getGeneralDataCollection",value:function(t){for(var e in this.general.data.collections)if(this.general.data.collections[e].id==t)return this.general.data.collections[e];return!1}},{key:"getGeneralDataCollectionCard",value:function(t,e){for(var r in this.general.data.collections)if(this.general.data.collections[r].id==t)for(var i in this.general.data.collections[r].cards){var n=this.general.data.collections[r].cards[i];if(n.id==e)return n}return!1}},{key:"getUserDataCollectionCard",value:function(t,e){var r=this.getUserDataCollection(t);return!!r&&-1!==r.pieces.indexOf(e)}},{key:"getUserDataCollection",value:function(t){for(var e in this.user.data.collections)if(this.user.data.collections[e].id==t)return this.user.data.collections[e];return!1}},{key:"getUserDataSeason",value:function(t){for(var e in this.user.data.seasons)if(this.user.data.seasons[e].id==t)return this.user.data.seasons[e];return!1}},{key:"getGeneralDataSeason",value:function(t){for(var e in this.general.data.seasons)if(this.general.data.seasons[e].id==t)return this.general.data.seasons[e];return!1}},{key:"getCurrentSeason",value:function(){var t=!1;return this.general.data.seasons.forEach((function(e){var r=(new Date).getTime(),i=new Date(e.start_time).getTime(),n=new Date(e.end_time).getTime();r>=i&&r<=n&&(t=e)})),t}},{key:"getUserDataHelper",value:function(t){for(var e in this.user.data.helpers)if(this.user.data.helpers[e].helper_id==t)return this.user.data.helpers[e];return!1}},{key:"getGeneralDataHelper",value:function(t){for(var e in this.general.data.helpers)if(this.general.data.helpers[e].id==t)return this.general.data.helpers[e];return!1}},{key:"getUserDataBox",value:function(t){for(var e in this.userDataBoxes)if(this.userDataBoxes[e].id==t)return this.userDataBoxes[e];return!1}},{key:"getGeneralDataBox",value:function(t){for(var e in this.generalDataBoxes)if(this.generalDataBoxes[e].id==t)return this.generalDataBoxes[e];return!1}},{key:"upgradeHelper",value:(u=Ct(At().mark((function t(e,r,i){var n;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.user.upgradeHelper(e,r,i);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return u.apply(this,arguments)})},{key:"getSeasonIntervalReward",value:(h=Ct(At().mark((function t(e,r){var i;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.user.rewardSeasonInterval(e,r);case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"getFortunometrIntervalReward",value:(a=Ct(At().mark((function t(e){var r;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.user.rewardFortuneInterval(e);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"getBoxReward",value:(s=Ct(At().mark((function t(e){var r;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.user.rewardGiftBox(e);case 2:return r=t.sent,this.checkCollectionsComplete(),this.temp.boxDelete(e),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"checkCollectionsComplete",value:function(){var t=this;this.userDataCollections.forEach((function(e){t.generalDataCollections.forEach((function(t){e.id===t.id&&(e.completed||e.pieces.length!=t.pieces||(e.completed=!0))}))}))}},{key:"getCollectionReward",value:(o=Ct(At().mark((function t(e){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.user.rewardCollection(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"spendCodeTry",value:function(){return this.user.data.code_trys-=1}},{key:"addCodeTry",value:function(){return this.user.data.code_trys+=1}},{key:"updateProfit",value:(n=Ct(At().mark((function t(){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.user.updateProfit();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"levelUp",value:(i=Ct(At().mark((function t(){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.user.levelUp();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"useTicket",value:(r=Ct(At().mark((function t(){var e,r,i;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.user.useTicket();case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return",!1);case 5:return r=this.temp.boxAdd(e.box.id,e.box.gift_box_id),i=e.ticket_text,t.abrupt("return",{box:r,ticket_text:i});case 8:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"boxClick",value:function(t,e){var r=this.getUserDataBox(t),i=!1;if(r){var n=this.getGeneralDataBox(r.type_id);this.temp.boxClick(t,e),r.points>=n.points&&(r.points=n.points,i=!0),this.temp.checkClickCount()&&this.updateCoins()}return i}},{key:"updateCoins",value:function(){this.temp.data.coins>0&&(this.user.updateCoins(this.temp.data.coins,this.temp.data.click_count),this.temp.clearClicks())}},{key:"hasCardsInCollection",value:function(t){return this.getUserDataCollection(t).pieces.length>0}},{key:"getProfitPerHour",value:function(){var t=this,e=0;return this.userDataHelpers.forEach((function(r){t.generalDataHelpers.forEach((function(t){r.helper_id==t.id&&t.helper_levels.forEach((function(t){r.level==t.number&&(e+=t.profit)}))}))})),e}},{key:"sessionDataPlayLastState",get:function(){return this.sessionData.play_last_state}},{key:"sessionDataCanGetBox",get:function(){return this.sessionData.can_get_box}},{key:"setSessionDataPlayLastState",value:function(t){this.sessionData.play_last_state=t}},{key:"getSessionDataBox",value:function(){this.sessionData.can_get_box=!1}}],e&&Rt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,i,n,o,s,a,h,u,c,l}();const It="https://assettoapp.iconx.world/xoltar/admin/assets_test";function Dt(t,e){return function(){return t.apply(e,arguments)}}const{toString:jt}=Object.prototype,{getPrototypeOf:Bt}=Object,Nt=(Gt=Object.create(null),t=>{const e=jt.call(t);return Gt[e]||(Gt[e]=e.slice(8,-1).toLowerCase())});var Gt;const Ut=t=>(t=t.toLowerCase(),e=>Nt(e)===t),Yt=t=>e=>typeof e===t,{isArray:zt}=Array,Xt=Yt("undefined"),Vt=Ut("ArrayBuffer"),Wt=Yt("string"),Ht=Yt("function"),qt=Yt("number"),Kt=t=>null!==t&&"object"==typeof t,Zt=t=>{if("object"!==Nt(t))return!1;const e=Bt(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},Jt=Ut("Date"),Qt=Ut("File"),$t=Ut("Blob"),te=Ut("FileList"),ee=Ut("URLSearchParams"),[re,ie,ne,oe]=["ReadableStream","Request","Response","Headers"].map(Ut);function se(t,e,{allOwnKeys:r=!1}={}){if(null==t)return;let i,n;if("object"!=typeof t&&(t=[t]),zt(t))for(i=0,n=t.length;i<n;i++)e.call(null,t[i],i,t);else{const n=r?Object.getOwnPropertyNames(t):Object.keys(t),o=n.length;let s;for(i=0;i<o;i++)s=n[i],e.call(null,t[s],s,t)}}function ae(t,e){e=e.toLowerCase();const r=Object.keys(t);let i,n=r.length;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const he="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,ue=t=>!Xt(t)&&t!==he,ce=(le="undefined"!=typeof Uint8Array&&Bt(Uint8Array),t=>le&&t instanceof le);var le;const fe=Ut("HTMLFormElement"),pe=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),de=Ut("RegExp"),ve=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),i={};se(r,((r,n)=>{let o;!1!==(o=e(r,n,t))&&(i[n]=o||r)})),Object.defineProperties(t,i)},ye="abcdefghijklmnopqrstuvwxyz",ge="0123456789",me={DIGIT:ge,ALPHA:ye,ALPHA_DIGIT:ye+ye.toUpperCase()+ge},xe=Ut("AsyncFunction"),be={isArray:zt,isArrayBuffer:Vt,isBuffer:function(t){return null!==t&&!Xt(t)&&null!==t.constructor&&!Xt(t.constructor)&&Ht(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||Ht(t.append)&&("formdata"===(e=Nt(t))||"object"===e&&Ht(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&Vt(t.buffer),e},isString:Wt,isNumber:qt,isBoolean:t=>!0===t||!1===t,isObject:Kt,isPlainObject:Zt,isReadableStream:re,isRequest:ie,isResponse:ne,isHeaders:oe,isUndefined:Xt,isDate:Jt,isFile:Qt,isBlob:$t,isRegExp:de,isFunction:Ht,isStream:t=>Kt(t)&&Ht(t.pipe),isURLSearchParams:ee,isTypedArray:ce,isFileList:te,forEach:se,merge:function t(){const{caseless:e}=ue(this)&&this||{},r={},i=(i,n)=>{const o=e&&ae(r,n)||n;Zt(r[o])&&Zt(i)?r[o]=t(r[o],i):Zt(i)?r[o]=t({},i):zt(i)?r[o]=i.slice():r[o]=i};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&se(arguments[t],i);return r},extend:(t,e,r,{allOwnKeys:i}={})=>(se(e,((e,i)=>{r&&Ht(e)?t[i]=Dt(e,r):t[i]=e}),{allOwnKeys:i}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,r,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},toFlatObject:(t,e,r,i)=>{let n,o,s;const a={};if(e=e||{},null==t)return e;do{for(n=Object.getOwnPropertyNames(t),o=n.length;o-- >0;)s=n[o],i&&!i(s,t,e)||a[s]||(e[s]=t[s],a[s]=!0);t=!1!==r&&Bt(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},kindOf:Nt,kindOfTest:Ut,endsWith:(t,e,r)=>{t=String(t),(void 0===r||r>t.length)&&(r=t.length),r-=e.length;const i=t.indexOf(e,r);return-1!==i&&i===r},toArray:t=>{if(!t)return null;if(zt(t))return t;let e=t.length;if(!qt(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},forEachEntry:(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const r=i.value;e.call(t,r[0],r[1])}},matchAll:(t,e)=>{let r;const i=[];for(;null!==(r=t.exec(e));)i.push(r);return i},isHTMLForm:fe,hasOwnProperty:pe,hasOwnProp:pe,reduceDescriptors:ve,freezeMethods:t=>{ve(t,((e,r)=>{if(Ht(t)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const i=t[r];Ht(i)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(t,e)=>{const r={},i=t=>{t.forEach((t=>{r[t]=!0}))};return zt(t)?i(t):i(String(t).split(e)),r},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,r){return e.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(t,e)=>null!=t&&Number.isFinite(t=+t)?t:e,findKey:ae,global:he,isContextDefined:ue,ALPHABET:me,generateString:(t=16,e=me.ALPHA_DIGIT)=>{let r="";const{length:i}=e;for(;t--;)r+=e[Math.random()*i|0];return r},isSpecCompliantForm:function(t){return!!(t&&Ht(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),r=(t,i)=>{if(Kt(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[i]=t;const n=zt(t)?[]:{};return se(t,((t,e)=>{const o=r(t,i+1);!Xt(o)&&(n[e]=o)})),e[i]=void 0,n}}return t};return r(t,0)},isAsyncFn:xe,isThenable:t=>t&&(Kt(t)||Ht(t))&&Ht(t.then)&&Ht(t.catch)};function we(t,e,r,i,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),i&&(this.request=i),n&&(this.response=n)}be.inherits(we,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:be.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ee=we.prototype,Te={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{Te[t]={value:t}})),Object.defineProperties(we,Te),Object.defineProperty(Ee,"isAxiosError",{value:!0}),we.from=(t,e,r,i,n,o)=>{const s=Object.create(Ee);return be.toFlatObject(t,s,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),we.call(s,t.message,e,r,i,n),s.cause=t,s.name=t.name,o&&Object.assign(s,o),s};const Se=we;function _e(t){return be.isPlainObject(t)||be.isArray(t)}function Oe(t){return be.endsWith(t,"[]")?t.slice(0,-2):t}function Pe(t,e,r){return t?t.concat(e).map((function(t,e){return t=Oe(t),!r&&e?"["+t+"]":t})).join(r?".":""):e}const Me=be.toFlatObject(be,{},null,(function(t){return/^is[A-Z]/.test(t)})),Ae=function(t,e,r){if(!be.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const i=(r=be.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!be.isUndefined(e[t])}))).metaTokens,n=r.visitor||u,o=r.dots,s=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&be.isSpecCompliantForm(e);if(!be.isFunction(n))throw new TypeError("visitor must be a function");function h(t){if(null===t)return"";if(be.isDate(t))return t.toISOString();if(!a&&be.isBlob(t))throw new Se("Blob is not supported. Use a Buffer instead.");return be.isArrayBuffer(t)||be.isTypedArray(t)?a&&"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}function u(t,r,n){let a=t;if(t&&!n&&"object"==typeof t)if(be.endsWith(r,"{}"))r=i?r:r.slice(0,-2),t=JSON.stringify(t);else if(be.isArray(t)&&function(t){return be.isArray(t)&&!t.some(_e)}(t)||(be.isFileList(t)||be.endsWith(r,"[]"))&&(a=be.toArray(t)))return r=Oe(r),a.forEach((function(t,i){!be.isUndefined(t)&&null!==t&&e.append(!0===s?Pe([r],i,o):null===s?r:r+"[]",h(t))})),!1;return!!_e(t)||(e.append(Pe(n,r,o),h(t)),!1)}const c=[],l=Object.assign(Me,{defaultVisitor:u,convertValue:h,isVisitable:_e});if(!be.isObject(t))throw new TypeError("data must be an object");return function t(r,i){if(!be.isUndefined(r)){if(-1!==c.indexOf(r))throw Error("Circular reference detected in "+i.join("."));c.push(r),be.forEach(r,(function(r,o){!0===(!(be.isUndefined(r)||null===r)&&n.call(e,r,be.isString(o)?o.trim():o,i,l))&&t(r,i?i.concat(o):[o])})),c.pop()}}(t),e};function Le(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function Ce(t,e){this._pairs=[],t&&Ae(t,this,e)}const Re=Ce.prototype;Re.append=function(t,e){this._pairs.push([t,e])},Re.toString=function(t){const e=t?function(e){return t.call(this,e,Le)}:Le;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const ke=Ce;function Fe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ie(t,e,r){if(!e)return t;const i=r&&r.encode||Fe,n=r&&r.serialize;let o;if(o=n?n(e,r):be.isURLSearchParams(e)?e.toString():new ke(e,r).toString(i),o){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}const De=class{constructor(){this.handlers=[]}use(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){be.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},je={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Be={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:ke,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ne="undefined"!=typeof window&&"undefined"!=typeof document,Ge=(Ue="undefined"!=typeof navigator&&navigator.product,Ne&&["ReactNative","NativeScript","NS"].indexOf(Ue)<0);var Ue;const Ye="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ze=Ne&&window.location.href||"http://localhost",Xe={...t,...Be},Ve=function(t){function e(t,r,i,n){let o=t[n++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=n>=t.length;return o=!o&&be.isArray(i)?i.length:o,a?(be.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!s):(i[o]&&be.isObject(i[o])||(i[o]=[]),e(t,r,i[o],n)&&be.isArray(i[o])&&(i[o]=function(t){const e={},r=Object.keys(t);let i;const n=r.length;let o;for(i=0;i<n;i++)o=r[i],e[o]=t[o];return e}(i[o])),!s)}if(be.isFormData(t)&&be.isFunction(t.entries)){const r={};return be.forEachEntry(t,((t,i)=>{e(function(t){return be.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),i,r,0)})),r}return null},We={transitional:je,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const r=e.getContentType()||"",i=r.indexOf("application/json")>-1,n=be.isObject(t);if(n&&be.isHTMLForm(t)&&(t=new FormData(t)),be.isFormData(t))return i?JSON.stringify(Ve(t)):t;if(be.isArrayBuffer(t)||be.isBuffer(t)||be.isStream(t)||be.isFile(t)||be.isBlob(t)||be.isReadableStream(t))return t;if(be.isArrayBufferView(t))return t.buffer;if(be.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(n){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Ae(t,new Xe.classes.URLSearchParams,Object.assign({visitor:function(t,e,r,i){return Xe.isNode&&be.isBuffer(t)?(this.append(e,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((o=be.isFileList(t))||r.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Ae(o?{"files[]":t}:t,e&&new e,this.formSerializer)}}return n||i?(e.setContentType("application/json",!1),function(t,e,r){if(be.isString(t))try{return(0,JSON.parse)(t),be.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(0,JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||We.transitional,r=e&&e.forcedJSONParsing,i="json"===this.responseType;if(be.isResponse(t)||be.isReadableStream(t))return t;if(t&&be.isString(t)&&(r&&!this.responseType||i)){const r=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(t){if(r){if("SyntaxError"===t.name)throw Se.from(t,Se.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xe.classes.FormData,Blob:Xe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};be.forEach(["delete","get","head","post","put","patch"],(t=>{We.headers[t]={}}));const He=We,qe=be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ke=Symbol("internals");function Ze(t){return t&&String(t).trim().toLowerCase()}function Je(t){return!1===t||null==t?t:be.isArray(t)?t.map(Je):String(t)}function Qe(t,e,r,i,n){return be.isFunction(i)?i.call(this,e,r):(n&&(e=r),be.isString(e)?be.isString(i)?-1!==e.indexOf(i):be.isRegExp(i)?i.test(e):void 0:void 0)}class $e{constructor(t){t&&this.set(t)}set(t,e,r){const i=this;function n(t,e,r){const n=Ze(e);if(!n)throw new Error("header name must be a non-empty string");const o=be.findKey(i,n);(!o||void 0===i[o]||!0===r||void 0===r&&!1!==i[o])&&(i[o||e]=Je(t))}const o=(t,e)=>be.forEach(t,((t,r)=>n(t,r,e)));if(be.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(be.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))o((t=>{const e={};let r,i,n;return t&&t.split("\n").forEach((function(t){n=t.indexOf(":"),r=t.substring(0,n).trim().toLowerCase(),i=t.substring(n+1).trim(),!r||e[r]&&qe[r]||("set-cookie"===r?e[r]?e[r].push(i):e[r]=[i]:e[r]=e[r]?e[r]+", "+i:i)})),e})(t),e);else if(be.isHeaders(t))for(const[e,i]of t.entries())n(i,e,r);else null!=t&&n(e,t,r);return this}get(t,e){if(t=Ze(t)){const r=be.findKey(this,t);if(r){const t=this[r];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(t);)e[i[1]]=i[2];return e}(t);if(be.isFunction(e))return e.call(this,t,r);if(be.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Ze(t)){const r=be.findKey(this,t);return!(!r||void 0===this[r]||e&&!Qe(0,this[r],r,e))}return!1}delete(t,e){const r=this;let i=!1;function n(t){if(t=Ze(t)){const n=be.findKey(r,t);!n||e&&!Qe(0,r[n],n,e)||(delete r[n],i=!0)}}return be.isArray(t)?t.forEach(n):n(t),i}clear(t){const e=Object.keys(this);let r=e.length,i=!1;for(;r--;){const n=e[r];t&&!Qe(0,this[n],n,t,!0)||(delete this[n],i=!0)}return i}normalize(t){const e=this,r={};return be.forEach(this,((i,n)=>{const o=be.findKey(r,n);if(o)return e[o]=Je(i),void delete e[n];const s=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,r)=>e.toUpperCase()+r))}(n):String(n).trim();s!==n&&delete e[n],e[s]=Je(i),r[s]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return be.forEach(this,((r,i)=>{null!=r&&!1!==r&&(e[i]=t&&be.isArray(r)?r.join(", "):r)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const r=new this(t);return e.forEach((t=>r.set(t))),r}static accessor(t){const e=(this[Ke]=this[Ke]={accessors:{}}).accessors,r=this.prototype;function i(t){const i=Ze(t);e[i]||(function(t,e){const r=be.toCamelCase(" "+e);["get","set","has"].forEach((i=>{Object.defineProperty(t,i+r,{value:function(t,r,n){return this[i].call(this,e,t,r,n)},configurable:!0})}))}(r,t),e[i]=!0)}return be.isArray(t)?t.forEach(i):i(t),this}}$e.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),be.reduceDescriptors($e.prototype,(({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[r]=t}}})),be.freezeMethods($e);const tr=$e;function er(t,e){const r=this||He,i=e||r,n=tr.from(i.headers);let o=i.data;return be.forEach(t,(function(t){o=t.call(r,o,n.normalize(),e?e.status:void 0)})),n.normalize(),o}function rr(t){return!(!t||!t.__CANCEL__)}function ir(t,e,r){Se.call(this,null==t?"canceled":t,Se.ERR_CANCELED,e,r),this.name="CanceledError"}be.inherits(ir,Se,{__CANCEL__:!0});const nr=ir;function or(t,e,r){const i=r.config.validateStatus;r.status&&i&&!i(r.status)?e(new Se("Request failed with status code "+r.status,[Se.ERR_BAD_REQUEST,Se.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):t(r)}const sr=(t,e,r=3)=>{let i=0;const n=function(t,e){t=t||10;const r=new Array(t),i=new Array(t);let n,o=0,s=0;return e=void 0!==e?e:1e3,function(a){const h=Date.now(),u=i[s];n||(n=h),r[o]=a,i[o]=h;let c=s,l=0;for(;c!==o;)l+=r[c++],c%=t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),h-n<e)return;const f=u&&h-u;return f?Math.round(1e3*l/f):void 0}}(50,250);return function(t,e){let r=0;const i=1e3/e;let n=null;return function(){const e=!0===this,o=Date.now();if(e||o-r>i)return n&&(clearTimeout(n),n=null),r=o,t.apply(null,arguments);n||(n=setTimeout((()=>(n=null,r=Date.now(),t.apply(null,arguments))),i-(o-r)))}}((r=>{const o=r.loaded,s=r.lengthComputable?r.total:void 0,a=o-i,h=n(a);i=o;const u={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:h||void 0,estimated:h&&s&&o<=s?(s-o)/h:void 0,event:r,lengthComputable:null!=s};u[e?"download":"upload"]=!0,t(u)}),r)},ar=Xe.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let r;function i(r){let i=r;return t&&(e.setAttribute("href",i),i=e.href),e.setAttribute("href",i),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return r=i(window.location.href),function(t){const e=be.isString(t)?i(t):t;return e.protocol===r.protocol&&e.host===r.host}}():function(){return!0},hr=Xe.hasStandardBrowserEnv?{write(t,e,r,i,n,o){const s=[t+"="+encodeURIComponent(e)];be.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),be.isString(i)&&s.push("path="+i),be.isString(n)&&s.push("domain="+n),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function ur(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const cr=t=>t instanceof tr?{...t}:t;function lr(t,e){e=e||{};const r={};function i(t,e,r){return be.isPlainObject(t)&&be.isPlainObject(e)?be.merge.call({caseless:r},t,e):be.isPlainObject(e)?be.merge({},e):be.isArray(e)?e.slice():e}function n(t,e,r){return be.isUndefined(e)?be.isUndefined(t)?void 0:i(void 0,t,r):i(t,e,r)}function o(t,e){if(!be.isUndefined(e))return i(void 0,e)}function s(t,e){return be.isUndefined(e)?be.isUndefined(t)?void 0:i(void 0,t):i(void 0,e)}function a(r,n,o){return o in e?i(r,n):o in t?i(void 0,r):void 0}const h={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(t,e)=>n(cr(t),cr(e),!0)};return be.forEach(Object.keys(Object.assign({},t,e)),(function(i){const o=h[i]||n,s=o(t[i],e[i],i);be.isUndefined(s)&&o!==a||(r[i]=s)})),r}const fr=t=>{const e=lr({},t);let r,{data:i,withXSRFToken:n,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:h}=e;if(e.headers=a=tr.from(a),e.url=Ie(ur(e.baseURL,e.url),t.params,t.paramsSerializer),h&&a.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),be.isFormData(i))if(Xe.hasStandardBrowserEnv||Xe.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(r=a.getContentType())){const[t,...e]=r?r.split(";").map((t=>t.trim())).filter(Boolean):[];a.setContentType([t||"multipart/form-data",...e].join("; "))}if(Xe.hasStandardBrowserEnv&&(n&&be.isFunction(n)&&(n=n(e)),n||!1!==n&&ar(e.url))){const t=o&&s&&hr.read(s);t&&a.set(o,t)}return e},pr="undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,r){const i=fr(t);let n=i.data;const o=tr.from(i.headers).normalize();let s,{responseType:a}=i;function h(){i.cancelToken&&i.cancelToken.unsubscribe(s),i.signal&&i.signal.removeEventListener("abort",s)}let u=new XMLHttpRequest;function c(){if(!u)return;const i=tr.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());or((function(t){e(t),h()}),(function(t){r(t),h()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:i,config:t,request:u}),u=null}u.open(i.method.toUpperCase(),i.url,!0),u.timeout=i.timeout,"onloadend"in u?u.onloadend=c:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(c)},u.onabort=function(){u&&(r(new Se("Request aborted",Se.ECONNABORTED,i,u)),u=null)},u.onerror=function(){r(new Se("Network Error",Se.ERR_NETWORK,i,u)),u=null},u.ontimeout=function(){let t=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const e=i.transitional||je;i.timeoutErrorMessage&&(t=i.timeoutErrorMessage),r(new Se(t,e.clarifyTimeoutError?Se.ETIMEDOUT:Se.ECONNABORTED,i,u)),u=null},void 0===n&&o.setContentType(null),"setRequestHeader"in u&&be.forEach(o.toJSON(),(function(t,e){u.setRequestHeader(e,t)})),be.isUndefined(i.withCredentials)||(u.withCredentials=!!i.withCredentials),a&&"json"!==a&&(u.responseType=i.responseType),"function"==typeof i.onDownloadProgress&&u.addEventListener("progress",sr(i.onDownloadProgress,!0)),"function"==typeof i.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",sr(i.onUploadProgress)),(i.cancelToken||i.signal)&&(s=e=>{u&&(r(!e||e.type?new nr(null,t,u):e),u.abort(),u=null)},i.cancelToken&&i.cancelToken.subscribe(s),i.signal&&(i.signal.aborted?s():i.signal.addEventListener("abort",s)));const l=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(i.url);l&&-1===Xe.protocols.indexOf(l)?r(new Se("Unsupported protocol "+l+":",Se.ERR_BAD_REQUEST,t)):u.send(n||null)}))},dr=(t,e)=>{let r,i=new AbortController;const n=function(t){if(!r){r=!0,s();const e=t instanceof Error?t:this.reason;i.abort(e instanceof Se?e:new nr(e instanceof Error?e.message:e))}};let o=e&&setTimeout((()=>{n(new Se(`timeout ${e} of ms exceeded`,Se.ETIMEDOUT))}),e);const s=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach((t=>{t&&(t.removeEventListener?t.removeEventListener("abort",n):t.unsubscribe(n))})),t=null)};t.forEach((t=>t&&t.addEventListener&&t.addEventListener("abort",n)));const{signal:a}=i;return a.unsubscribe=s,[a,()=>{o&&clearTimeout(o),o=null}]},vr=function*(t,e){let r=t.byteLength;if(!e||r<e)return void(yield t);let i,n=0;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},yr=(t,e,r,i,n)=>{const o=async function*(t,e,r){for await(const i of t)yield*vr(ArrayBuffer.isView(i)?i:await r(String(i)),e)}(t,e,n);let s=0;return new ReadableStream({type:"bytes",async pull(t){const{done:e,value:n}=await o.next();if(e)return t.close(),void i();let a=n.byteLength;r&&r(s+=a),t.enqueue(new Uint8Array(n))},cancel:t=>(i(t),o.return())},{highWaterMark:2})},gr=(t,e)=>{const r=null!=t;return i=>setTimeout((()=>e({lengthComputable:r,total:t,loaded:i})))},mr="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,xr=mr&&"function"==typeof ReadableStream,br=mr&&("function"==typeof TextEncoder?(wr=new TextEncoder,t=>wr.encode(t)):async t=>new Uint8Array(await new Response(t).arrayBuffer()));var wr;const Er=xr&&(()=>{let t=!1;const e=new Request(Xe.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})(),Tr=xr&&!!(()=>{try{return be.isReadableStream(new Response("").body)}catch(t){}})(),Sr={stream:Tr&&(t=>t.body)};var _r;mr&&(_r=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((t=>{!Sr[t]&&(Sr[t]=be.isFunction(_r[t])?e=>e[t]():(e,r)=>{throw new Se(`Response type '${t}' is not supported`,Se.ERR_NOT_SUPPORT,r)})})));const Or=mr&&(async t=>{let{url:e,method:r,data:i,signal:n,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:h,responseType:u,headers:c,withCredentials:l="same-origin",fetchOptions:f}=fr(t);u=u?(u+"").toLowerCase():"text";let p,d,[v,y]=n||o||s?dr([n,o],s):[];const g=()=>{!p&&setTimeout((()=>{v&&v.unsubscribe()})),p=!0};let m;try{if(h&&Er&&"get"!==r&&"head"!==r&&0!==(m=await(async(t,e)=>{const r=be.toFiniteNumber(t.getContentLength());return null==r?(async t=>null==t?0:be.isBlob(t)?t.size:be.isSpecCompliantForm(t)?(await new Request(t).arrayBuffer()).byteLength:be.isArrayBufferView(t)?t.byteLength:(be.isURLSearchParams(t)&&(t+=""),be.isString(t)?(await br(t)).byteLength:void 0))(e):r})(c,i))){let t,r=new Request(e,{method:"POST",body:i,duplex:"half"});be.isFormData(i)&&(t=r.headers.get("content-type"))&&c.setContentType(t),r.body&&(i=yr(r.body,65536,gr(m,sr(h)),null,br))}be.isString(l)||(l=l?"cors":"omit"),d=new Request(e,{...f,signal:v,method:r.toUpperCase(),headers:c.normalize().toJSON(),body:i,duplex:"half",withCredentials:l});let n=await fetch(d);const o=Tr&&("stream"===u||"response"===u);if(Tr&&(a||o)){const t={};["status","statusText","headers"].forEach((e=>{t[e]=n[e]}));const e=be.toFiniteNumber(n.headers.get("content-length"));n=new Response(yr(n.body,65536,a&&gr(e,sr(a,!0)),o&&g,br),t)}u=u||"text";let s=await Sr[be.findKey(Sr,u)||"text"](n,t);return!o&&g(),y&&y(),await new Promise(((e,r)=>{or(e,r,{data:s,headers:tr.from(n.headers),status:n.status,statusText:n.statusText,config:t,request:d})}))}catch(e){if(g(),e&&"TypeError"===e.name&&/fetch/i.test(e.message))throw Object.assign(new Se("Network Error",Se.ERR_NETWORK,t,d),{cause:e.cause||e});throw Se.from(e,e&&e.code,t,d)}}),Pr={http:null,xhr:pr,fetch:Or};be.forEach(Pr,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));const Mr=t=>`- ${t}`,Ar=t=>be.isFunction(t)||null===t||!1===t,Lr=t=>{t=be.isArray(t)?t:[t];const{length:e}=t;let r,i;const n={};for(let o=0;o<e;o++){let e;if(r=t[o],i=r,!Ar(r)&&(i=Pr[(e=String(r)).toLowerCase()],void 0===i))throw new Se(`Unknown adapter '${e}'`);if(i)break;n[e||"#"+o]=i}if(!i){const t=Object.entries(n).map((([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build")));let r=e?t.length>1?"since :\n"+t.map(Mr).join("\n"):" "+Mr(t[0]):"as no adapter specified";throw new Se("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return i};function Cr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new nr(null,t)}function Rr(t){return Cr(t),t.headers=tr.from(t.headers),t.data=er.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Lr(t.adapter||He.adapter)(t).then((function(e){return Cr(t),e.data=er.call(t,t.transformResponse,e),e.headers=tr.from(e.headers),e}),(function(e){return rr(e)||(Cr(t),e&&e.response&&(e.response.data=er.call(t,t.transformResponse,e.response),e.response.headers=tr.from(e.response.headers))),Promise.reject(e)}))}const kr={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{kr[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}}));const Fr={};kr.transitional=function(t,e,r){function i(t,e){return"[Axios v1.7.2] Transitional option '"+t+"'"+e+(r?". "+r:"")}return(r,n,o)=>{if(!1===t)throw new Se(i(n," has been removed"+(e?" in "+e:"")),Se.ERR_DEPRECATED);return e&&!Fr[n]&&(Fr[n]=!0,console.warn(i(n," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,n,o)}};const Ir={assertOptions:function(t,e,r){if("object"!=typeof t)throw new Se("options must be an object",Se.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let n=i.length;for(;n-- >0;){const o=i[n],s=e[o];if(s){const e=t[o],r=void 0===e||s(e,o,t);if(!0!==r)throw new Se("option "+o+" must be "+r,Se.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new Se("Unknown option "+o,Se.ERR_BAD_OPTION)}},validators:kr},Dr=Ir.validators;class jr{constructor(t){this.defaults=t,this.interceptors={request:new De,response:new De}}async request(t,e){try{return await this._request(t,e)}catch(t){if(t instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const r=e.stack?e.stack.replace(/^.+\n/,""):"";try{t.stack?r&&!String(t.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(t.stack+="\n"+r):t.stack=r}catch(t){}}throw t}}_request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=lr(this.defaults,e);const{transitional:r,paramsSerializer:i,headers:n}=e;void 0!==r&&Ir.assertOptions(r,{silentJSONParsing:Dr.transitional(Dr.boolean),forcedJSONParsing:Dr.transitional(Dr.boolean),clarifyTimeoutError:Dr.transitional(Dr.boolean)},!1),null!=i&&(be.isFunction(i)?e.paramsSerializer={serialize:i}:Ir.assertOptions(i,{encode:Dr.function,serialize:Dr.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=n&&be.merge(n.common,n[e.method]);n&&be.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete n[t]})),e.headers=tr.concat(o,n);const s=[];let a=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));const h=[];let u;this.interceptors.response.forEach((function(t){h.push(t.fulfilled,t.rejected)}));let c,l=0;if(!a){const t=[Rr.bind(this),void 0];for(t.unshift.apply(t,s),t.push.apply(t,h),c=t.length,u=Promise.resolve(e);l<c;)u=u.then(t[l++],t[l++]);return u}c=s.length;let f=e;for(l=0;l<c;){const t=s[l++],e=s[l++];try{f=t(f)}catch(t){e.call(this,t);break}}try{u=Rr.call(this,f)}catch(t){return Promise.reject(t)}for(l=0,c=h.length;l<c;)u=u.then(h[l++],h[l++]);return u}getUri(t){return Ie(ur((t=lr(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}be.forEach(["delete","get","head","options"],(function(t){jr.prototype[t]=function(e,r){return this.request(lr(r||{},{method:t,url:e,data:(r||{}).data}))}})),be.forEach(["post","put","patch"],(function(t){function e(e){return function(r,i,n){return this.request(lr(n||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:r,data:i}))}}jr.prototype[t]=e(),jr.prototype[t+"Form"]=e(!0)}));const Br=jr;class Nr{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const r=this;this.promise.then((t=>{if(!r._listeners)return;let e=r._listeners.length;for(;e-- >0;)r._listeners[e](t);r._listeners=null})),this.promise.then=t=>{let e;const i=new Promise((t=>{r.subscribe(t),e=t})).then(t);return i.cancel=function(){r.unsubscribe(e)},i},t((function(t,i,n){r.reason||(r.reason=new nr(t,i,n),e(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;return{token:new Nr((function(e){t=e})),cancel:t}}}const Gr=Nr,Ur={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ur).forEach((([t,e])=>{Ur[e]=t}));const Yr=Ur,zr=function t(e){const r=new Br(e),i=Dt(Br.prototype.request,r);return be.extend(i,Br.prototype,r,{allOwnKeys:!0}),be.extend(i,r,null,{allOwnKeys:!0}),i.create=function(r){return t(lr(e,r))},i}(He);zr.Axios=Br,zr.CanceledError=nr,zr.CancelToken=Gr,zr.isCancel=rr,zr.VERSION="1.7.2",zr.toFormData=Ae,zr.AxiosError=Se,zr.Cancel=zr.CanceledError,zr.all=function(t){return Promise.all(t)},zr.spread=function(t){return function(e){return t.apply(null,e)}},zr.isAxiosError=function(t){return be.isObject(t)&&!0===t.isAxiosError},zr.mergeConfig=lr,zr.AxiosHeaders=tr,zr.formToJSON=t=>Ve(be.isHTMLForm(t)?new FormData(t):t),zr.getAdapter=Lr,zr.HttpStatusCode=Yr,zr.default=zr;const Xr=zr;function Vr(t){return Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vr(t)}function Wr(){Wr=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Vr(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Vr(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Hr(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function qr(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Hr(o,i,n,s,a,"next",t)}function a(t){Hr(o,i,n,s,a,"throw",t)}s(void 0)}))}}function Kr(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Zr(i.key),i)}}function Zr(t){var e=function(t,e){if("object"!=Vr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Vr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vr(e)?e:e+""}var Jr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=Xr.create({baseURL:"https://assettoapp.iconx.world/xoltar/api-test",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.assetsURL=It},e=[{key:"request",value:(r=qr(Wr().mark((function t(e){var r,i=this,n=arguments;return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},t.abrupt("return",new Promise(function(){var t=qr(Wr().mark((function t(n){var o,s;return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=!1,t.prev=1,console.log("[Connect] method method",e,r),t.next=5,i.api.post(e,r);case 5:s=t.sent,console.log("[Connect] response",s),o=s.data,t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(1),t.t0;case 13:n(o);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})},{key:"setToken",value:function(t){this.api.defaults.headers.common.Authorization="Bearer ".concat(t)}}],e&&Kr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Qr(t){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qr(t)}function $r(){$r=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Qr(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Qr(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function ti(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function ei(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){ti(o,i,n,s,a,"next",t)}function a(t){ti(o,i,n,s,a,"throw",t)}s(void 0)}))}}function ri(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ii(i.key),i)}}function ii(t){var e=function(t,e){if("object"!=Qr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Qr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qr(e)?e:e+""}var ni=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.connect=new Jr},e=[{key:"authenticateTelegram",value:(p=ei($r().mark((function t(e,r,i,n){var o;return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connect.request("/v1/auth/telegram",{telegram_id:e,telegram_display_name:r,telegram_handle:i,telegram_language_code:n});case 2:if(!(o=t.sent)){t.next=6;break}return this.connect.setToken(o.token),t.abrupt("return",o.user);case 6:return t.abrupt("return",!1);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e,r,i){return p.apply(this,arguments)})},{key:"getUserData",value:(f=ei($r().mark((function t(){var e;return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connect.request("/v1/user/data");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"getGeneralData",value:(l=ei($r().mark((function t(){var e;return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connect.request("/v1/general_data");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"upgradeHelper",value:(c=ei($r().mark((function t(e,r,i){var n;return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connect.request("/v1/user/upgrade-helper",{helper_id:e,current_helper_level:r,cost:i});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return c.apply(this,arguments)})},{key:"updateProfit",value:(u=ei($r().mark((function t(){var e;return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connect.request("/v1/user/update-profit");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"rewardFortuneInterval",value:(h=ei($r().mark((function t(e,r){var i;return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connect.request("/v1/user/reward-fortune-interval",{fortune_interval_id:e,user_fortune:r});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"rewardSeasonInterval",value:(a=ei($r().mark((function t(e,r){var i;return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connect.request("/v1/user/reward-season-interval",{season_id:e,season_interval_id:r});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"rewardCollection",value:(s=ei($r().mark((function t(e){var r;return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connect.request("/v1/user/reward-collection",{collection_id:e});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"rewardGiftBox",value:(o=ei($r().mark((function t(e){var r;return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connect.request("/v1/user/reward-gift-box",{user_gift_box_id:e});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"levelUp",value:(n=ei($r().mark((function t(){var e;return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connect.request("/v1/user/level-up");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"useTicket",value:(i=ei($r().mark((function t(){var e;return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connect.request("/v1/user/use-ticket");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"updateData",value:(r=ei($r().mark((function t(e,r){var i;return $r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connect.request("/v1/user/update-data",{coins_increase:e,user_clicks:r});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"assetsURL",get:function(){return It}}],e&&ri(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,i,n,o,s,a,h,u,c,l,f,p}();const oi=JSON.parse('[{"key":"section_bar_button_collection","ru":"КОЛЛЕКЦИЯ","en":"COLLECTION"},{"key":"section_bar_button_helpers","ru":"АМУЛЕТЫ","en":"CHARM"},{"key":"section_bar_button_play","ru":"ИГРАТЬ","en":"PLAY"},{"key":"section_bar_button_fortuna","ru":"ФОРТУНА","en":"FORTUNE"},{"key":"section_bar_button_airdrop","ru":"ЭЙРДРОП","en":"AIRDROP"},{"key":"fortunometr","ru":"FORTUNOMETR","en":"FORTUNOMETR"},{"key":"fortunometr_description","ru":"FORTUNOMETR","en":"LUCK GROWS WITH ATTITUDE\\nPurchase charms, play with intent, and let fortune reward the bold."},{"key":"complete","ru":"Завершено","en":"Completed"},{"key":"profit_per_hour","ru":"Награда в час","en":"Profit per hour"},{"key":"lvl","ru":"уровень","en":"lvl"},{"key":"click_to_close","ru":"Нажмите чтобы продолжить","en":"click_to_close"},{"key":"tap_to_claim","ru":"Нажмите чтобы забрать","en":"TAP TO CLAIM"},{"key":"reward","ru":"Награда","en":"Reward"},{"key":"get","ru":"Получить","en":"GET"},{"key":"obtain","ru":"Получить","en":"OBTAIN"},{"key":"get_reward","ru":"ПОЛУЧИТЬ НАГРАДУ","en":"GET REWARD"},{"key":"your_reward","ru":"Ваша награда","en":"YOUR REWARD"},{"key":"set_completed","ru":"КОЛЛЕКЦИЯ СОБРАНА!","en":"SET COMPLETED!"},{"key":"complete","ru":"Завершено","en":"Completed"},{"key":"collection_1","ru":"Имя коллекции 1","en":"IconX.World"},{"key":"collection_2","ru":"Имя коллекции 2","en":"Anime"},{"key":"collection_3","ru":"Имя коллекции 3","en":"IconX.Arena"},{"key":"collection_4","ru":"Имя коллекции 4","en":"Fast Food"},{"key":"collection_5","ru":"Имя коллекции 5","en":"Desserts"},{"key":"collection_6","ru":"Имя коллекции 6","en":"Buggy"},{"key":"collection_7","ru":"Имя коллекции 7","en":"Monsters"},{"key":"collection_8","ru":"Имя коллекции 8","en":"Truggy"},{"key":"collection_9","ru":"Имя коллекции 9","en":"Collection 9"},{"key":"collection_10","ru":"Имя коллекции 10","en":"Collection 10"},{"key":"collection_1_card_1","ru":"","en":"Burnout"},{"key":"collection_1_card_2","ru":"","en":"Grid"},{"key":"collection_1_card_3","ru":"","en":"Overtake"},{"key":"collection_1_card_4","ru":"","en":"Pitstop"},{"key":"collection_1_card_5","ru":"","en":"Drift"},{"key":"collection_1_card_6","ru":"","en":"Drag Racing"},{"key":"collection_1_card_7","ru":"","en":"Finish line"},{"key":"collection_1_card_8","ru":"","en":"S-curve"},{"key":"collection_1_card_9","ru":"","en":"Start"},{"key":"collection_4_card_1","ru":"","en":"Burger"},{"key":"collection_4_card_2","ru":"","en":"ChWings"},{"key":"collection_4_card_3","ru":"","en":"Cola"},{"key":"collection_4_card_4","ru":"","en":"Fries"},{"key":"collection_4_card_5","ru":"","en":"Hotdog"},{"key":"collection_4_card_6","ru":"","en":"Wok"},{"key":"collection_4_card_7","ru":"","en":"Pizza"},{"key":"collection_4_card_8","ru":"","en":"Sandwich"},{"key":"collection_4_card_9","ru":"","en":"Tacos"},{"key":"collection_5_card_1","ru":"","en":"Cake"},{"key":"collection_5_card_2","ru":"","en":"Cinnabon"},{"key":"collection_5_card_3","ru":"","en":"Coffee"},{"key":"collection_5_card_4","ru":"","en":"Croissant"},{"key":"collection_5_card_5","ru":"","en":"Cupcake"},{"key":"collection_5_card_6","ru":"","en":"Donut"},{"key":"collection_5_card_7","ru":"","en":"Icecream"},{"key":"collection_5_card_8","ru":"","en":"Macarons"},{"key":"collection_5_card_9","ru":"","en":"Waffles"},{"key":"collection_6_card_1","ru":"","en":"Bounty"},{"key":"collection_6_card_2","ru":"","en":"Bounty2"},{"key":"collection_6_card_3","ru":"","en":"Cobra"},{"key":"collection_6_card_4","ru":"","en":"Cobra2"},{"key":"collection_6_card_5","ru":"","en":"Killer"},{"key":"collection_6_card_6","ru":"","en":"Lozen"},{"key":"collection_6_card_7","ru":"","en":"Raptor"},{"key":"collection_6_card_8","ru":"","en":"Sheriff"},{"key":"collection_6_card_9","ru":"","en":"Thunder"},{"key":"collection_7_card_1","ru":"","en":"96Turbo"},{"key":"collection_7_card_2","ru":"","en":"Arnie"},{"key":"collection_7_card_3","ru":"","en":"ATV"},{"key":"collection_7_card_4","ru":"","en":"IScream"},{"key":"collection_7_card_5","ru":"","en":"IScream2"},{"key":"collection_7_card_6","ru":"","en":"Scool"},{"key":"collection_7_card_7","ru":"","en":"Scool2"},{"key":"collection_7_card_8","ru":"","en":"Stream"},{"key":"collection_7_card_9","ru":"","en":"Uwaga3"},{"key":"collection_8_card_1","ru":"","en":"Lightning"},{"key":"collection_8_card_2","ru":"","en":"Marauder"},{"key":"collection_8_card_3","ru":"","en":"Marauder2"},{"key":"collection_8_card_4","ru":"","en":"MrBoost"},{"key":"collection_8_card_5","ru":"","en":"Punk"},{"key":"collection_8_card_6","ru":"","en":"Punk2"},{"key":"collection_8_card_7","ru":"","en":"Purple"},{"key":"collection_8_card_8","ru":"","en":"Scorpio"},{"key":"collection_8_card_9","ru":"","en":"Spectre"},{"key":"helper_1","ru":"Имя Хелпера 1","en":"Little Buddha"},{"key":"helper_2","ru":"Имя Хелпера 2","en":"the Hand of Fatima"},{"key":"helper_3","ru":"Имя Хелпера 3","en":"Japanese Crane"},{"key":"helper_4","ru":"Имя Хелпера 4","en":"the Amethyst"},{"key":"helper_5","ru":"Имя Хелпера 5","en":"the Pearl"},{"key":"helper_6","ru":"Имя Хелпера 6","en":"Phoenix"},{"key":"helper_7","ru":"Имя Хелпера 7","en":"Maneki Neko"},{"key":"helper_8","ru":"Имя Хелпера 8","en":"Jade"},{"key":"helper_9","ru":"Имя Хелпера 9","en":"Turquoise"},{"key":"helper_10","ru":"Имя Хелпера 10","en":"Money Frog"},{"key":"helper_11","ru":"Имя Хелпера 11","en":"Golden Fish"},{"key":"helper_1_description","ru":"Описание Хелпера 1 ","en":"Meet the Little Buddha Charm!\\nThis serene and smiling talisman brings peace and good fortune for you. Carry him with you for luck in tough challenges and to find hidden treasures.\\nLet his calm presence guide you to success!"},{"key":"helper_2_description","ru":"Описание Хелпера 2 ","en":"Introducing the Hand of Fatima Lucky Charm! This powerful talisman, also known as Hamsa, symbolizes protection and blessings."},{"key":"helper_3_description","ru":"Описание Хелпера 3 ","en":"Here is the Japanese Crane Lucky Charm! This elegant and graceful talisman symbolizes longevity and good fortune. Carry it with you to enhance your luck, navigate through obstacles smoothly, and uncover hidden opportunities. Let the crane\'s grace lead you to prosperity!"},{"key":"helper_4_description","ru":"Описание Хелпера 4 ","en":"the Amethyst Lucky Charm! This beautiful and mystical talisman symbolizes peace and balance. Carry it with you to attract calmness, enhance your spiritual awareness, and protect against negative energies. Let the amethyst\'s soothing presence guide you to tranquility and inner harmony!"},{"key":"helper_5_description","ru":"Описание Хелпера 5 ","en":"Introducing the Pearl Lucky Charm! This timeless and elegant talisman symbolizes purity and wisdom. Keep it close to attract positive energy, enhance your intuition, and bring clarity to your decisions. Let the pearl\'s natural beauty guide you to a prosperous and enlightened path!"},{"key":"helper_6_description","ru":"Описание Хелпера 6 ","en":"Charm 6 description"},{"key":"helper_7_description","ru":"Описание Хелпера 7 ","en":"Charm 7 description"},{"key":"helper_8_description","ru":"Описание Хелпера 8 ","en":"Charm 8 description"},{"key":"helper_9_description","ru":"Описание Хелпера 9 ","en":"Charm 9 description"},{"key":"helper_10_description","ru":"Описание Хелпера 10 ","en":"Charm 10 description"},{"key":"time_until_gift","ru":"Время до подарка","en":"YOUR NEXT XOLTAR\'S FORTUNE WILL BE REVEALED IN:"},{"key":"max_box_count","ru":"Максимум подарков","en":"Max presents limit"},{"key":"level_up","ru":"Уровень получен","en":"LEVEL UP!"},{"key":"level","ru":"Уровень получен","en":"LEVEL"},{"key":"level_title_1","ru":"","en":"Basic Luckster"},{"key":"level_title_2","ru":"","en":"Luck Scout"},{"key":"level_title_3","ru":"","en":"Luck Adept"},{"key":"level_title_4","ru":"","en":"Lucksmith"},{"key":"level_title_5","ru":"","en":"Fortuna Alchemist"}]');function si(t){return si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},si(t)}function ai(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,hi(i.key),i)}}function hi(t){var e=function(t,e){if("object"!=si(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=si(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==si(e)?e:e+""}var ui=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e},(e=[{key:"init",value:function(){}},{key:"language",get:function(){return this.game.storage.language}},{key:"getText",value:function(t){var e="";if(this.language)for(var r in oi)if(oi[r].key===t)return this.language in oi[r]?oi[r][this.language]:oi[r].en;return e}}])&&ai(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function ci(t){return ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ci(t)}function li(){li=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==ci(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ci(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function fi(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function pi(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,di(i.key),i)}}function di(t){var e=function(t,e){if("object"!=ci(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=ci(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ci(e)?e:e+""}function vi(t,e,r){return e=gi(e),function(t,e){if(e&&("object"==ci(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,yi()?Reflect.construct(e,r||[],gi(t).constructor):e.apply(t,r))}function yi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(yi=function(){return!!t})()}function gi(t){return gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gi(t)}function mi(t,e){return mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mi(t,e)}var xi=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),vi(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mi(t,e)}(e,t),r=e,i=[{key:"init",value:function(){this.game.playground=new Z(this.game),this.game.backend=new ni(this.game),this.game.storage=new Ft(this.game,this.game.backend),this.game.localization=new ui(this.game)}},{key:"preload",value:function(){this.load.image("section_bg_violet","assets/images/sections_bg/violet.png")}},{key:"create",value:(n=li().mark((function t(){var e,r,i,n;return li().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("[Boot] scene create"),t.next=3,this.game.playground.API.init();case 3:return t.next=5,this.game.playground.API.getUserId();case 5:return e=t.sent,t.next=8,this.game.playground.API.getUserName();case 8:return r=t.sent,t.next=11,this.game.playground.API.getUserHandle();case 11:return i=t.sent,t.next=14,this.game.playground.API.getLanguage();case 14:return n=t.sent,t.next=17,this.game.storage.init(e,r,i,n);case 17:return t.next=19,this.game.localization.init(n);case 19:this.scene.start("Preload");case 20:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function s(t){fi(o,r,i,s,a,"next",t)}function a(t){fi(o,r,i,s,a,"throw",t)}s(void 0)}))},function(){return o.apply(this,arguments)})}],i&&pi(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,n,o}(i().Scene);function bi(t){return bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bi(t)}function wi(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ei(i.key),i)}}function Ei(t){var e=function(t,e){if("object"!=bi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=bi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bi(e)?e:e+""}function Ti(t,e,r){return e=_i(e),function(t,e){if(e&&("object"==bi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Si()?Reflect.construct(e,r||[],_i(t).constructor):e.apply(t,r))}function Si(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Si=function(){return!!t})()}function _i(t){return _i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_i(t)}function Oi(t,e){return Oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Oi(t,e)}var Pi=function(t){function e(t,r,i,n,o,s,a,h){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=Ti(this,e,[t,r,i])).rectWidth=n,u.rectHeight=o,u.color1=s,u.color2=a,u.roundSize=h,u.create(),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oi(t,e)}(e,t),r=e,(n=[{key:"create",value:function(){var t=new(i().GameObjects.Graphics)(this.scene,0,0);this.add(t);var e=new(i().GameObjects.Graphics)(this.scene,0,0);this.add(e),this.drawRect(t,this.color1,1),this.modules={rect1:t,rect2:e}}},{key:"updateProgress",value:function(t){this.drawRect(this.modules.rect2,this.color2,t)}},{key:"drawRect",value:function(t,e,r){t.clear(),t.fillStyle(e,1);var i=r*this.rectWidth;t.fillRoundedRect(-this.rectWidth/2,0,i,this.rectHeight,this.roundSize)}}])&&wi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Mi(t){return Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mi(t)}function Ai(){Ai=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Mi(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Mi(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Li(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Ci(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ri(i.key),i)}}function Ri(t){var e=function(t,e){if("object"!=Mi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Mi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mi(e)?e:e+""}function ki(t,e,r){return e=Ii(e),function(t,e){if(e&&("object"==Mi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fi()?Reflect.construct(e,r||[],Ii(t).constructor):e.apply(t,r))}function Fi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fi=function(){return!!t})()}function Ii(t){return Ii=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ii(t)}function Di(t,e){return Di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Di(t,e)}var ji=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ki(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Di(t,e)}(e,t),r=e,n=[{key:"init",value:function(){this.cameras.main.setBackgroundColor("#888888");var t=new(i().GameObjects.Sprite)(this,this.cameras.main.centerX,this.cameras.main.centerY,"section_bg_violet");this.add.existing(t),t.setDisplaySize(this.cameras.main.width,this.cameras.main.height);var e=new Pi(this,this.cameras.main.centerX,this.cameras.main.height-100,3*this.cameras.main.width/4,10,16777215,0,3);this.add.existing(e),this.load.on("progress",(function(t){e.updateProgress(t)}))}},{key:"preload",value:function(){var t=this;this.load.crossOrigin="anonymous",this.load.bitmapFont("ticketfont","assets/fonts/ticketfont/ticketfont.png","assets/fonts/ticketfont/ticketfont.fnt"),this.load.image("popup_bg","assets/images/popup_bg.png"),this.load.image("particle_1","assets/images/particle_1.png"),this.load.image("particle_2","assets/images/particle_2.png"),this.load.image("particle_3","assets/images/particle_3.png"),this.load.image("btn_test","assets/images/btn_test.png"),this.load.image("icon_notification","assets/images/icon_notification.png"),this.load.image("coin_icon","assets/images/coins/coin_icon.png"),this.load.image("coin_icon_gray","assets/images/coins/coin_icon_gray.png"),this.load.image("coins_bg","assets/images/coins/bg.png"),this.load.image("fortuna_icon","assets/images/fortuna/fortuna_icon.png"),this.load.image("fortunometr_bg","assets/images/fortunometr/bg.png"),this.load.image("fortunometr_interval_bg_active","assets/images/fortunometr/interval_bg_active.png"),this.load.image("fortunometr_interval_bg_inactive","assets/images/fortunometr/interval_bg_inactive.png"),this.load.image("fortunometr_interval_count_active","assets/images/fortunometr/interval_count_active.png"),this.load.image("fortunometr_interval_count_inactive","assets/images/fortunometr/interval_count_inactive.png"),this.load.image("fortunometr_interval_complete_icon","assets/images/fortunometr/interval_complete_icon.png"),this.load.image("fortunometr_interval_btn_get","assets/images/fortunometr/interval_btn_get.png"),this.load.image("fortunometr_progress_bar_bg","assets/images/fortunometr/progress_bar_bg.png"),this.load.image("fortunometr_progress_bar_bg_part","assets/images/fortunometr/progress_bar_bg_part.png"),this.load.image("fortunometr_progress_bar_img","assets/images/fortunometr/progress_bar_img.png"),this.load.image("fortunometr_progress_bar_img_cup","assets/images/fortunometr/progress_bar_img_cup.png"),this.load.image("fortunometr_progress_bar_back_part","assets/images/fortunometr/progress_bar_back_part.png"),this.load.image("friends_bg","assets/images/friends/bg.png"),this.load.image("airdrop_bg","assets/images/airdrop/bg.png"),this.load.image("season_interval_bg_active","assets/images/season/interval_bg_active.png"),this.load.image("season_interval_interval_bg_inactive","assets/images/season/interval_bg_inactive.png"),this.load.image("season_interval_complete_icon","assets/images/season/interval_complete_icon.png"),this.load.image("season_panel_bg","assets/images/season/panel_bg.png"),this.load.image("season_panel_bg_bot","assets/images/season/panel_bg_bot.png"),this.load.image("icon_box_close","assets/images/play/box/icon_box_close.png"),this.load.image("icon_box_open","assets/images/play/box/icon_box_open.png"),this.load.image("icon_box_type_1","assets/images/play/box/types/1.png"),this.load.image("icon_box_type_2","assets/images/play/box/types/2.png"),this.load.image("xoltar_mashine","assets/images/play/xoltar/xoltar_mashine.png"),this.load.image("xoltar_ball","assets/images/play/xoltar/ball.png"),this.load.image("xoltar_mid_panel","assets/images/play/xoltar/mid_panel.png"),this.load.image("xoltar_top_panel","assets/images/play/xoltar/top_panel.png"),this.load.image("ticket","assets/images/ticket.png"),this.load.image("Ticket_box_icon","assets/images/Ticket_box_icon.png"),this.load.image("btn_friends","assets/images/btn_friends.png"),this.load.image("btn_xoltars","assets/images/btn_xoltars.png"),this.load.image("popup_xoltars_bg","assets/images/popup_xoltars/bg.png"),this.load.image("popup_xoltars_elem_bg","assets/images/popup_xoltars/elem_bg.png"),this.load.image("popup_xoltars_box_bg","assets/images/popup_xoltars/box_bg.png"),this.load.image("popup_xoltars_zolter_bg","assets/images/popup_xoltars/xoltar_bg.png"),this.load.image("popup_xoltars_popup_btn_close","assets/images/popup_xoltars/popup_btn_close.png"),this.load.image("popup_xoltar_game_btn_get_try","assets/images/popup_xoltar_game/btn_get_try.png"),this.load.image("popup_xoltar_game_bg","assets/images/popup_xoltar_game/bg.png"),this.load.image("popup_xoltar_game_button","assets/images/popup_xoltar_game/button.png"),this.load.image("popup_xoltar_game_lamp_passive","assets/images/popup_xoltar_game/lamp_passive.png"),this.load.image("popup_xoltar_game_lamp_active","assets/images/popup_xoltar_game/lamp_active.png"),this.load.image("popup_xoltar_game_btn_close","assets/images/popup_xoltar_game/btn_close.png"),this.load.image("popup_xoltar_game_panel","assets/images/popup_xoltar_game/panel.png"),this.load.image("popup_xoltar_game_top_panel","assets/images/popup_xoltar_game/top_panel.png"),this.load.image("popup_level_up_crown","assets/images/popup_level_up/crown.png"),this.load.image("popup_fortunometr_interval_reward_icon","assets/images/fortunometr/popup_icon.png"),this.load.image("popup_season_interval_reward_icon","assets/images/popup_season_interval_reward/icon.png"),this.load.image("section_bar_bg","assets/images/section_bar/section_bar_bg.png"),this.load.image("section_bar_button_bg","assets/images/section_bar/buttons/bg.png");for(var e=1;e<=5;e++)this.load.image("section_bar_button_"+e,"assets/images/section_bar/buttons/"+e+".png");this.load.image("section_bg_blue","assets/images/sections_bg/blue.png"),this.load.image("section_bg_green","assets/images/sections_bg/green.png"),this.load.image("section_bg_violet","assets/images/sections_bg/violet.png"),this.load.image("collection_bg","assets/images/collection/bg.png"),this.load.image("collection_bg_default","assets/images/collection/bg_default.png"),this.load.image("collection_btn_get_reward","assets/images/collection/btn_get_reward.png"),this.load.image("collection_popup_bg","assets/images/collection/popup_bg.png"),this.load.image("collection_popup_bg_2","assets/images/collection/popup_bg_2.png"),this.load.image("collection_card_empty_bg","assets/images/collection/card_empty_bg.png"),this.load.image("collection_card_bg","assets/images/collection/card_bg.png"),this.load.image("collection_popup_btn_close","assets/images/collection/popup_btn_close.png"),this.load.image("collection_complete_icon","assets/images/collection/complete_icon.png"),this.load.image("collection_popup_bg_border","assets/images/collection/popup_bg_border.png"),this.load.image("collection_popup_btn_empty","assets/images/collection/popup_btn_empty.png"),this.load.image("collection_popup_btn_get_card","assets/images/collection/popup_btn_get_card.png"),this.load.image("collection_popup_btn_get_reward","assets/images/collection/popup_btn_get_reward.png"),this.load.image("collection_puzzle_border","assets/images/collection/puzzle/border.png");for(var r=1;r<=9;r++){var i="collection_mask_"+r,n="assets/images/collection/puzzle/mask_"+r+".png";this.load.image(i,n)}this.game.storage.generalDataCollections.forEach((function(e){var r="collection_"+e.id+"_icon",i="".concat(t.game.backend.assetsURL,"/images/collections/").concat(e.id,".png");t.load.image(r,i)})),this.load.image("popup_get_card_btn_close","assets/images/popup_get_card/btn_close.png"),this.load.image("popup_get_card_btn_get","assets/images/popup_get_card/btn_get.png"),this.load.image("helper_bg","assets/images/helpers/bg.png"),this.load.image("helper_lock","assets/images/helpers/helper_lock.png"),this.load.image("helpers_upgrade_popup_bg","assets/images/helpers/upgrade_popup_bg.png"),this.load.image("helpers_upgrade_popup_btn_buy","assets/images/helpers/upgrade_popup_btn_buy.png"),this.load.image("helpers_upgrade_popup_btn_close","assets/images/helpers/upgrade_popup_close.png"),this.game.storage.generalDataHelpers.forEach((function(e){var r="helper_"+e.id,i="".concat(t.game.backend.assetsURL,"/images/helpers/").concat(e.id,".png");t.load.image(r,i)})),this.load.setPath("assets/spine/"),this.load.setPath("assets/spine/box/"),this.load.spine("spine_box_1","wight_box.json",["wight_box.atlas"],!0),this.load.spine("spine_box_2","Pink_box.json",["Pink_box.atlas"],!0),this.load.spine("spine_box_3","red_box.json",["red_box.atlas"],!0),this.load.spine("spine_coin","coin.json",["coin.atlas"],!0),this.load.setPath("assets/spine/xoltar/"),this.load.spine("Zoltar_fortune_teller_machine _2","Zoltar_fortune_teller_machine _2.json",["Zoltar_fortune_teller_machine _2.atlas"],!0),this.load.setPath("assets/spine/collection_reward/"),this.load.spine("collection_reward_anim","Zoltar_fortune_teller_machine _2.json",["Zoltar_fortune_teller_machine _2.atlas"],!0),this.load.setPath("assets/spine/fx/"),this.load.spine("fx","fx.json",["fx.atlas"],!0),this.load.rexWebFont({google:{families:["Sofia Sans"]}})}},{key:"create",value:(o=Ai().mark((function t(){return Ai().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("[Preload] scene create"),this.scene.start("Game");case 2:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(r,i){var n=o.apply(t,e);function s(t){Li(n,r,i,s,a,"next",t)}function a(t){Li(n,r,i,s,a,"throw",t)}s(void 0)}))},function(){return s.apply(this,arguments)})}],n&&Ci(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}(i().Scene);function Bi(t){return Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bi(t)}function Ni(){Ni=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Bi(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Bi(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Gi(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Ui(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Yi(i.key),i)}}function Yi(t){var e=function(t,e){if("object"!=Bi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Bi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bi(e)?e:e+""}function zi(t,e,r){return e=Vi(e),function(t,e){if(e&&("object"==Bi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xi()?Reflect.construct(e,r||[],Vi(t).constructor):e.apply(t,r))}function Xi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xi=function(){return!!t})()}function Vi(t){return Vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vi(t)}function Wi(t,e){return Wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wi(t,e)}var Hi=function(t){function e(t,r,i,n,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=zi(this,e,[t,r,i])).imageKey=n,s.onClick=o,s.busy=!1,s.assemble(),s.inputEnable(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wi(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(){var t=this,e=new(i().GameObjects.Sprite)(this.scene,0,0,this.imageKey);this.add(e);var r=!1,n=!1;e.setInteractive({useHandCursor:!0}),e.on("pointerdown",(function(t){n=!0})),e.on("pointerover",(function(){r=!0})),e.on("pointerout",(function(){r=!1,n=!1})),e.on("pointerup",function(){var e,i=(e=Ni().mark((function e(i){return Ni().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.busy){e.next=2;break}return e.abrupt("return",!1);case 2:if(r&&n){e.next=4;break}return e.abrupt("return",!1);case 4:if(!t.checkPointerDistance({x:i.downX,y:i.downY},{x:i.upX,y:i.upY})){e.next=6;break}return e.abrupt("return",!1);case 6:return t.busy=!0,e.next=9,t.onClick();case 9:t.busy=!1;case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function s(t){Gi(o,i,n,s,a,"next",t)}function a(t){Gi(o,i,n,s,a,"throw",t)}s(void 0)}))});return function(t){return i.apply(this,arguments)}}(),this),this.modules={button:e}}},{key:"addText",value:function(t,e,r,n){var o=new(i().GameObjects.Text)(this.scene,t,e,r,n);return o.setOrigin(.5),this.add(o),this.modules.text=o,o}},{key:"checkPointerDistance",value:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))>this.maxPointerDistance}},{key:"setTint",value:function(t){this.modules.button.setTint(t)}},{key:"maxPointerDistance",get:function(){return 20}},{key:"setTexture",value:function(t){this.modules.button.setTexture(t)}},{key:"inputEnable",value:function(){this.modules.button.setInteractive()}},{key:"inputDisable",value:function(){this.modules.button.disableInteractive()}}],n&&Ui(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function qi(t){return qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qi(t)}function Ki(){Ki=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==qi(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(qi(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Zi(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Ji(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Zi(o,i,n,s,a,"next",t)}function a(t){Zi(o,i,n,s,a,"throw",t)}s(void 0)}))}}function Qi(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,$i(i.key),i)}}function $i(t){var e=function(t,e){if("object"!=qi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=qi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qi(e)?e:e+""}function tn(t,e,r){return e=rn(e),function(t,e){if(e&&("object"==qi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,en()?Reflect.construct(e,r||[],rn(t).constructor):e.apply(t,r))}function en(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(en=function(){return!!t})()}function rn(t){return rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rn(t)}function nn(t,e){return nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nn(t,e)}var on=function(t){function e(t,r,i,n,o){var s,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,d=arguments.length>12&&void 0!==arguments[12]&&arguments[12],v=arguments.length>13&&void 0!==arguments[13]?arguments[13]:1;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=tn(this,e,[t,r,i])).rectWidth=n,s.rectHeight=o,s.roundAngle=a,s.color1=h,s.color2=u,s.color3=c,s.borderColor=l,s.borderSize=f,s.canReverse=d,s.direction=v,s.currentProgress=p,s.create(),0!==p&&s.setProgress(s.currentProgress),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nn(t,e)}(e,t),r=e,i=[{key:"create",value:(s=Ji(Ki().mark((function t(){var e,r,i,n;return Ki().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(e=this.scene.add.graphics()).fillStyle(this.color1,1),e.fillRoundedRect(-this.rectWidth/2,-this.rectHeight/2,this.rectWidth,this.rectHeight,this.roundAngle),this.add(e),r=this.scene.add.graphics(),this.add(r),i=this.scene.add.graphics(),this.add(i),(n=this.scene.add.graphics()).lineStyle(this.borderSize,this.borderColor,1),n.strokeRoundedRect(-this.rectWidth/2+this.borderSize/2,-this.rectHeight/2+this.borderSize/2,this.rectWidth-this.borderSize,this.rectHeight-this.borderSize,this.roundAngle),this.add(n),this.module={bgProgressLine:e,progressInstantLine:r,progressLine:i};case 13:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"addBorder",value:function(t,e){var r=this.scene.add.graphics();r.lineStyle(e,t,1),r.strokeRoundedRect(-this.rectWidth/2,-this.rectHeight/2,this.rectWidth,this.rectHeight,this.roundAngle),this.add(r)}},{key:"addBlick",value:function(t,e,r,i,n){var o=this.scene.add.graphics({x:t,y:e});o.fillStyle(16777215,.3),o.fillRoundedRect(-r/2,-i/2,r,i,n),this.add(o)}},{key:"setProgress",value:function(t){this.currentProgress=t,this.drawRectProgress(t)}},{key:"updateProgress",value:(o=Ji(Ki().mark((function t(e,r,i){var n;return Ki().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.currentProgress,this.canReverse){t.next=6;break}if(!(e<n)){t.next=6;break}return t.next=5,this.showProgress(n,100,r,i);case 5:n=0;case 6:return this.currentProgress=e,this.showInstantRect(e),t.next=10,this.showProgress(n,this.currentProgress,r,i);case 10:if(1!=this.direction){t.next=14;break}return t.abrupt("return",{x:-this.rectWidth/2+e/100*this.rectWidth,y:-this.rectHeight/2});case 14:return t.abrupt("return",{x:-this.rectWidth/2,y:-this.rectHeight/2+e/100*this.rectHeight});case 15:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return o.apply(this,arguments)})},{key:"showInstantRect",value:function(t){var e=this.module.progressInstantLine;if(e.clear(),1==this.direction){var r=t/100*this.rectWidth;r>this.roundAngle&&(e.fillStyle(this.color2,1),e.fillRoundedRect(-this.rectWidth/2,-this.rectHeight/2,r,this.rectHeight,this.roundAngle))}else{var i=t/100*this.rectHeight;i>this.roundAngle&&(e.fillStyle(this.color2,1),e.fillRoundedRect(-this.rectWidth/2,-this.rectHeight/2,this.rectWidth,i,this.roundAngle))}}},{key:"dropProgress",value:function(){this.currentProgress=0,this.drawRectProgress(0)}},{key:"addRectWord",value:function(t,e,r){this.add(r),r.x=t,r.y=e}},{key:"drawRectProgress",value:function(t){1==this.direction?this.drawRect(t/100*this.rectWidth):this.drawRect(t/100*this.rectHeight)}},{key:"drawRect",value:function(t){var e=this.module.progressLine;e.clear(),1==this.direction?t>this.roundAngle&&(e.fillStyle(this.color3,1),e.fillRoundedRect(-this.rectWidth/2,-this.rectHeight/2,t,this.rectHeight,this.roundAngle)):t>this.roundAngle&&(e.fillStyle(this.color3,1),e.fillRoundedRect(-this.rectWidth/2,-this.rectHeight/2+this.rectHeight-t,this.rectWidth,t,this.roundAngle))}},{key:"showProgress",value:(n=Ji(Ki().mark((function t(e,r){var i,n,o=this,s=arguments;return Ki().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:250,n=s.length>3&&void 0!==s[3]?s[3]:0,t.abrupt("return",new Promise((function(t){o.scene.tweens.addCounter({from:e,to:r,ease:"Linear",duration:i,delay:n,repeat:0,yoyo:!1,onUpdate:function(t,e){o.drawRectProgress(t.getValue())},onComplete:function(){t()}})})));case 3:case"end":return t.stop()}}),t)}))),function(t,e){return n.apply(this,arguments)})}],i&&Qi(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,n,o,s}(i().GameObjects.Container);function sn(t){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sn(t)}function an(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,hn(i.key),i)}}function hn(t){var e=function(t,e){if("object"!=sn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=sn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sn(e)?e:e+""}function un(t,e,r){return e=ln(e),function(t,e){if(e&&("object"==sn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,cn()?Reflect.construct(e,r||[],ln(t).constructor):e.apply(t,r))}function cn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(cn=function(){return!!t})()}function ln(t){return ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ln(t)}function fn(t,e){return fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fn(t,e)}var pn=function(t){function e(t,r,i,n,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=un(this,e,[t,r,i])).assemble(n,o),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fn(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(t,e){var r=new on(this.scene,0,0,200,30,5,1515060,10092397,7322448,16777215,0,t);this.add(r);var n=new(i().GameObjects.Text)(this.scene,r.x,r.y,e,{fontFamily:_,fontSize:"30px",color:"#FFFFFF",align:"center"});n.setOrigin(.5),this.add(n),this.modules={bar:r,text:n}}},{key:"updateProgress",value:function(t,e){this.modules.bar.updateProgress(t,1e3),this.modules.text.setText(e)}}])&&an(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function dn(t){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dn(t)}function vn(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,yn(i.key),i)}}function yn(t){var e=function(t,e){if("object"!=dn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=dn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dn(e)?e:e+""}function gn(t,e,r){return e=xn(e),function(t,e){if(e&&("object"==dn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mn()?Reflect.construct(e,r||[],xn(t).constructor):e.apply(t,r))}function mn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mn=function(){return!!t})()}function xn(t){return xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xn(t)}function bn(t,e){return bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bn(t,e)}var wn=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=gn(this,e,[t,r,i])).assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bn(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,80,0,"collection_complete_icon");this.add(t);var e=new(i().GameObjects.Text)(this.scene,-100,0,this.scene.game.localization.getText("complete"),{fontFamily:_,fontSize:"30px",color:"#FFFFFF",align:"center"});e.setOrigin(0,.5),this.add(e),this.modules={icon:t,text:e}}}])&&vn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function En(t){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},En(t)}function Tn(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Sn(i.key),i)}}function Sn(t){var e=function(t,e){if("object"!=En(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=En(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==En(e)?e:e+""}function _n(t,e,r){return e=Pn(e),function(t,e){if(e&&("object"==En(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,On()?Reflect.construct(e,r||[],Pn(t).constructor):e.apply(t,r))}function On(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(On=function(){return!!t})()}function Pn(t){return Pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pn(t)}function Mn(t,e){return Mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mn(t,e)}var An=function(t){function e(t,r,i,n,o,s){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=_n(this,e,[t,r,i])).allWidth=n,a.allHeight=o,a.rewardData=s,a.assemble(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mn(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){this.addRect();var t=this.allHeight,e=t,r="coin_icon",n=0;1==this.rewardData.type&&(r="coin_icon",n=this.rewardData.currency_count),2==this.rewardData.type&&(r="fortuna_icon",n=this.rewardData.fortune_count);var o={icon:{x:-this.allWidth/2+1*this.allWidth/4,y:0},countText:{x:this.allWidth/2-1*this.allWidth/4,y:0}},s=new(i().GameObjects.Sprite)(this.scene,o.icon.x,o.icon.y,r);this.add(s),s.setOrigin(.5,.5),s.setDisplaySize(t,e);var a=new(i().GameObjects.Text)(this.scene,o.countText.x,o.countText.y,"+"+l(n.toFixed(0)),{fontFamily:_,fontSize:"28px",color:"#FFFFFF",align:"center"});a.setOrigin(.5,.5),this.add(a),a.setScale(this.allHeight/this.originalHeight)}},{key:"originalHeight",get:function(){return 50}},{key:"originalWidth",get:function(){return 150}},{key:"addRect",value:function(){var t=this.scene.add.graphics();this.add(t),t.fillStyle(8947848,.8),t.fillRect(-this.allWidth/2,-this.allHeight/2,this.allWidth,this.allHeight)}}])&&Tn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Ln(t){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ln(t)}function Cn(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Rn(i.key),i)}}function Rn(t){var e=function(t,e){if("object"!=Ln(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Ln(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ln(e)?e:e+""}function kn(t,e,r){return e=In(e),function(t,e){if(e&&("object"==Ln(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fn()?Reflect.construct(e,r||[],In(t).constructor):e.apply(t,r))}function Fn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fn=function(){return!!t})()}function In(t){return In=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},In(t)}function Dn(t,e){return Dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dn(t,e)}var jn=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=kn(this,e,[t,r,i])).rewards=n,o.assemble(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dn(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,0,0,"collection_btn_get_reward");this.add(t),this.addRewards(0),this.modules={icon:t}}},{key:"addRewards",value:function(t){var e=this;this.rewards.forEach((function(r,i){var n=-(310*e.rewards.length/2-150-5)+310*i,o=new An(e.scene,n,t,150,50,r);e.add(o)}))}}])&&Cn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Bn(t){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bn(t)}function Nn(){Nn=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Bn(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Bn(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Gn(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Un(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Yn(i.key),i)}}function Yn(t){var e=function(t,e){if("object"!=Bn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Bn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bn(e)?e:e+""}function zn(t,e,r){return e=Vn(e),function(t,e){if(e&&("object"==Bn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xn()?Reflect.construct(e,r||[],Vn(t).constructor):e.apply(t,r))}function Xn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xn=function(){return!!t})()}function Vn(t){return Vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vn(t)}function Wn(t,e){return Wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wn(t,e)}var Hn=function(t){function e(t,r,i,n,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=zn(this,e,[t,r,i])).buttonWidth=n,s.buttonHeight=o,s.busy=!1,s.inputEnable(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wn(t,e)}(e,t),r=e,n=[{key:"checkPointerDistance",value:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))>this.minClickDistance}},{key:"minClickDistance",get:function(){return 20}},{key:"minDragDistance",get:function(){return 15}},{key:"onClick",value:function(){}},{key:"inputEnable",value:function(){var t=this,e=new(i().Geom.Rectangle)(-this.buttonWidth/2,-this.buttonHeight/2,this.buttonWidth,this.buttonHeight),r=i().Geom.Rectangle.Contains;this.setInteractive({hitArea:e,hitAreaCallback:r,useHandCursor:!0}),this.scene.input.dragDistanceThreshold=this.minDragDistance,this.on("pointerdown",(function(t){})),this.on("pointerover",(function(){})),this.on("pointerout",(function(){})),this.on("pointerup",function(){var e,r=(e=Nn().mark((function e(r){return Nn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.busy){e.next=2;break}return e.abrupt("return",!1);case 2:if(!t.checkPointerDistance({x:r.downX,y:r.downY},{x:r.upX,y:r.upY})){e.next=4;break}return e.abrupt("return",!1);case 4:return t.busy=!0,e.next=7,t.onClick();case 7:t.busy=!1;case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function s(t){Gn(o,i,n,s,a,"next",t)}function a(t){Gn(o,i,n,s,a,"throw",t)}s(void 0)}))});return function(t){return r.apply(this,arguments)}}(),this)}},{key:"inputDisable",value:function(){this.disableInteractive()}}],n&&Un(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function qn(t){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qn(t)}function Kn(){Kn=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==qn(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(qn(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Zn(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Jn(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Qn(i.key),i)}}function Qn(t){var e=function(t,e){if("object"!=qn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=qn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qn(e)?e:e+""}function $n(t,e,r){return e=eo(e),function(t,e){if(e&&("object"==qn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,to()?Reflect.construct(e,r||[],eo(t).constructor):e.apply(t,r))}function to(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(to=function(){return!!t})()}function eo(t){return eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eo(t)}function ro(t,e){return ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ro(t,e)}var io=function(t){function e(t,r,i,n,o,s){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=$n(this,e,[t,r,i,n,o])).generalData=s,a.assemble(n,o),a.updateUI(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ro(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(t,e){var r=new(i().GameObjects.Sprite)(this.scene,0,0,"collection_bg");this.add(r);var n=new(i().GameObjects.Sprite)(this.scene,0,-50,this.iconKey);this.add(n);var o=new(i().GameObjects.Text)(this.scene,0,-20,this.textStr,{fontFamily:_,fontSize:"30px",fontStyle:"bold",color:"#8d613a",align:"center"});o.setOrigin(.5),this.add(o);var s=new pn(this.scene,0,20,this.currentProgress,this.currentProgressStr);this.add(s);var a=new wn(this.scene,0,110);this.add(a);var h=new jn(this.scene,0,110,this.generalData.rewards);this.add(h),this.modules={icon:n,progressBar:s,completed:a,rewards:h,bg:r,text:o}}},{key:"completed",get:function(){return!!this.userData&&this.userData.completed}},{key:"received",get:function(){return!!this.userData&&this.userData.received}},{key:"updateUI",value:function(){this.modules.bg.setTexture("collection_bg_default"),this.modules.progressBar.setVisible(!1),this.modules.completed.setVisible(!1),this.modules.rewards.setVisible(!1),this.modules.icon.setVisible(!1),this.modules.text.setVisible(!1),this.cardsCurrent>0&&(this.modules.bg.setTexture("collection_bg"),this.modules.progressBar.setVisible(!0),this.modules.text.setVisible(!0)),this.completed?(this.modules.icon.setVisible(!0),this.modules.progressBar.setVisible(!1),this.modules.text.setVisible(!1),this.received?this.modules.completed.setVisible(!0):this.modules.rewards.setVisible(!0)):this.cardsCurrent>0&&(this.modules.progressBar.setVisible(!0),this.modules.progressBar.updateProgress(this.currentProgress,this.currentProgressStr))}},{key:"currentProgress",get:function(){return this.cardsCurrent/this.generalData.pieces*100}},{key:"cardsCurrent",get:function(){return this.userData?this.userData.pieces.length:0}},{key:"currentProgressStr",get:function(){return this.cardsCurrent+"/"+this.generalData.pieces}},{key:"iconKey",get:function(){return"collection_"+this.generalData.id+"_icon"}},{key:"textStr",get:function(){var t=["Tap Now!","Who’s There?","See This?","Guess It!","Touch Here!","What’s Inside?","Hmm…Sure?","Try It!","Open Now!","Why Not?","Could It?","Hmm…Who?","Press Here!","Is It Hidden?","Tap Me!","What’s Next?","Go On!","Look Here!","Maybe It?","Hmm…Yes!","Press Me!","What’s Here?","Touch Now!","Hmm…When?","Tap It!","Find Me!","What’s This?","Hmm…Try!","Open Up!","Guess Who?","Check It!","See What?","Is It You?","Tap There!","Look Now!","Hmm…Why Not?","Tap Me!","Could Be?","Press On!","Guess Again!","Touch It!","Who’s Next?","Peek Now!","Try This!","What’s That?","Hmm…Why?","Check Here!","Is It There?","Tap Here?","What’s Under?","Hmm…Look!","Press On!","Find Out!","Why Wait?","Could It Be?","Hmm…Maybe!","Look Inside!","Who Knows?","Guess Now!","Tap Fast!","What’s Hidden?","Tap That!","Any Clues?","Open This!","Find Out!","Can You Guess?","What’s Here!","Press Now!","Is It You!","Uncover It!","Who’s Next?","Guess This!","What’s Beneath?","Touch Now!","Who Could It Be?","Open Quick!","Find Me!","Check Now!","Is It There?","Any Ideas?","Dare Me?","What If!","Peek Now!","Is It True?","Touch It!","What Lies?","Look Inside!","Guess Who?","Why Wait!","Reveal It!","Who’s Next?","Try Now!","Open That!","Who Knows!","Find This!","Can You?","Press Here!","What’s Inside?","Unlock Me!","Take A Peek!","Touch Me!","Who’s There?","Why Wait?","Find It!","See What?","Open Up!","What Now?","Check Me!","Tap Quick!","Who Knows?","Is It Here?","Guess Now!","What’s Next!","Look Here!","Could You?","Why Not!","Hmm…Who?","See This!","Open Me!","Try It!","What If?","Check Now?","Is It True?","Find Me?","What’s Here?","Can It Be?","Hmm…Why?","Try Me?","What’s That?","See This?","Dare You?","Hmm…Yes?","Is It Real?","What’s Next?","Tap Here?","This Way?","Are You Sure?","Hmm…Where?","Think So?","Is It Mine?","Guess What?","Is It?","Really?","What’s This?","Could It?","No Way?","For Real?","This One?","Find Out?","Check This?","Is It Here?","Couldn’t Be?","Tap Now?","What’s Up?","Is It There?","Hmm…Sure?","Look Here?","Could It Be?","Here It?","Think So?","Guess Me!","Is It You?","Surprise!","What’s Up?","Tap It!","Find Me!","What’s This?","Hmm…Why!","Open It?","See Now!","Why Not?","Could Be!","Hmm…What?","Check It!","Is It Here!","Tap Fast!","See It?","Go On!","Maybe?","Hmm…Try!"];return t[i().Math.Between(0,t.length-1)]}},{key:"userData",get:function(){return this.scene.game.storage.getUserDataCollection(this.generalData.id)}},{key:"onClick",value:(o=Kn().mark((function t(){var e=this;return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.completed||this.received){t.next=6;break}return t.next=4,new Promise((function(t){var r={collectionId:e.generalData.id};console.log("there"),e.scene.game.events.emit("popup_open","collection_reward",(function(){t()}),r)}));case 4:t.next=8;break;case 6:return t.next=8,new Promise((function(t){var r={collectionId:e.generalData.id};e.scene.game.events.emit("popup_open","collection",(function(){t()}),r)}));case 8:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(r,i){var n=o.apply(t,e);function s(t){Zn(n,r,i,s,a,"next",t)}function a(t){Zn(n,r,i,s,a,"throw",t)}s(void 0)}))},function(){return s.apply(this,arguments)})}],n&&Jn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}(Hn);function no(t){return no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},no(t)}function oo(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,so(i.key),i)}}function so(t){var e=function(t,e){if("object"!=no(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=no(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==no(e)?e:e+""}function ao(t,e,r){return e=co(e),function(t,e){if(e&&("object"==no(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ho()?Reflect.construct(e,r||[],co(t).constructor):e.apply(t,r))}function ho(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ho=function(){return!!t})()}function uo(){return uo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=co(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},uo.apply(null,arguments)}function co(t){return co=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},co(t)}function lo(t,e){return lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lo(t,e)}var fo=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=ao(this,e,[t,r,i])).collectionsIds=n,o.collections=[],o.assemble(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lo(t,e)}(e,t),r=e,(i=[{key:"assemble",value:function(){this.addCollections()}},{key:"userData",get:function(){return this.scene.game.storage.getUserDataCollection(this.generalData.id)}},{key:"addCollections",value:function(){var t=this,e=0,r=0;this.collectionsData.forEach((function(i,n){r>1&&(r=0,e++);var o=-t.collectionWidth/2-t.collectionWDistance/2;1==r&&(o=t.collectionWidth/2+t.collectionHDistance/2);var s=t.topOffset+t.collectionHeight/2+e*(t.collectionHeight+t.collectionHDistance),a=new io(t.scene,o,s,t.collectionWidth,t.collectionHeight,i);t.add(a),t.collections.push(a),r++}))}},{key:"updateUI",value:function(){this.collections.forEach((function(t){t.updateUI()}))}},{key:"collectionsData",get:function(){var t=this,e=[];return this.scene.game.storage.generalDataCollections.forEach((function(r){t.collectionsIds.forEach((function(t){r.id==t&&e.push(r)}))})),e}},{key:"topOffset",get:function(){return 30}},{key:"collectionWDistance",get:function(){return 30}},{key:"collectionHDistance",get:function(){return 30}},{key:"collectionWidth",get:function(){return 263}},{key:"collectionHeight",get:function(){return 330}},{key:"allWidth",get:function(){return 2*this.collectionWidth+this.collectionWDistance}},{key:"allHeight",get:function(){return this.topOffset+Math.ceil(this.collectionsData.length/2)*(this.collectionHeight+this.collectionHDistance)}},{key:"destroy",value:function(){uo(co(e.prototype),"destroy",this).call(this)}}])&&oo(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i}(i().GameObjects.Container);function po(t){return po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},po(t)}function vo(t,e,r){return e=go(e),function(t,e){if(e&&("object"==po(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,yo()?Reflect.construct(e,r||[],go(t).constructor):e.apply(t,r))}function yo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(yo=function(){return!!t})()}function go(t){return go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},go(t)}function mo(t,e){return mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mo(t,e)}var xo=function(t){function e(t,r,i,n,o,s,a){var h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(h=vo(this,e,[t,{x:r,y:i}])).fillStyle(s,a),h.fillRect(-n/2,-o/2,n,o),h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mo(t,e)}(e,Phaser.GameObjects.Graphics),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}();function bo(t){return bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bo(t)}function wo(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Eo(i.key),i)}}function Eo(t){var e=function(t,e){if("object"!=bo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=bo(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bo(e)?e:e+""}function To(t,e,r){return e=_o(e),function(t,e){if(e&&("object"==bo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,So()?Reflect.construct(e,r||[],_o(t).constructor):e.apply(t,r))}function So(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(So=function(){return!!t})()}function _o(t){return _o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_o(t)}function Oo(t,e){return Oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Oo(t,e)}var Po=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=To(this,e,[t,r,i])).endTime=n,o.assemble(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oo(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new xo(this.scene,0,0,250,70,0,.4);this.add(t);var e=function(t){var e=parseInt(t/1e3%60),r=parseInt(t/6e4%60),i=parseInt(t/36e5%24);return r=r<10?"0"+r:r,e=e<10?"0"+e:e,parseInt(t/864e5)+"d. "+(i=i<10?"0"+i:i)+"h."}(new Date(this.endTime).getTime()-(new Date).getTime()),r=new(i().GameObjects.Text)(this.scene,t.x,t.y-15,"Time Until The Season End:",{fontFamily:_,fontSize:"20px",color:"#FFFFFF",align:"center"});r.setOrigin(.5,.5),this.add(r);var n=new(i().GameObjects.Text)(this.scene,t.x,t.y+15,e,{fontFamily:_,fontSize:"28px",color:"#FFFFFF",align:"center"});n.setOrigin(.5,.5),this.add(n)}}])&&wo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Mo(t){return Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mo(t)}function Ao(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Lo(i.key),i)}}function Lo(t){var e=function(t,e){if("object"!=Mo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Mo(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mo(e)?e:e+""}function Co(t,e,r){return e=ko(e),function(t,e){if(e&&("object"==Mo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ro()?Reflect.construct(e,r||[],ko(t).constructor):e.apply(t,r))}function Ro(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ro=function(){return!!t})()}function ko(t){return ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ko(t)}function Fo(t,e){return Fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fo(t,e)}var Io=function(t){function e(t,r,i,n,o,s){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Co(this,e,[t,r,i])).assemble(n,o,s),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fo(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(t,e,r){var n=new on(this.scene,0,0,r,30,5,1515060,10092397,7322448,16777215,0,t);this.add(n);var o=new(i().GameObjects.Text)(this.scene,n.x+r/2-25,n.y,e,{fontFamily:_,fontSize:"24px",color:"#FFFFFF",align:"center"});o.setOrigin(1,.5),this.add(o),this.modules={bar:n,text:o}}},{key:"updateProgress",value:function(t,e){this.modules.bar.updateProgress(t,1e3),this.modules.text.setText(e)}}])&&Ao(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Do(t){return Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Do(t)}function jo(){jo=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Do(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Do(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Bo(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function No(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Go(i.key),i)}}function Go(t){var e=function(t,e){if("object"!=Do(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Do(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Do(e)?e:e+""}function Uo(t,e,r){return e=zo(e),function(t,e){if(e&&("object"==Do(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Yo()?Reflect.construct(e,r||[],zo(t).constructor):e.apply(t,r))}function Yo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Yo=function(){return!!t})()}function zo(t){return zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zo(t)}function Xo(t,e){return Xo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xo(t,e)}var Vo=function(t){function e(t,r,i,n,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=Uo(this,e,[t,r,i,100,100])).seasonId=n,s.intervalData=o,s.rewards=[],s.assemble(),s.updateUI(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xo(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,0,0,"season_interval_bg_active");this.add(t),t.setOrigin(.5,.5);var e=new(i().GameObjects.Sprite)(this.scene,0,-5,"season_interval_complete_icon");this.add(e),e.setVisible(!1),this.addRewards(-5),this.modules={bg:t,complete_icon:e}}},{key:"updateUI",value:function(){this.modules.bg.setTexture("season_interval_interval_bg_inactive"),this.canRecive&&this.modules.bg.setTexture("season_interval_bg_active"),this.received?(this.rewards.forEach((function(t){t.setVisible(!1)})),this.modules.complete_icon.setVisible(!0)):this.modules.complete_icon.setVisible(!1)}},{key:"seasonUserData",get:function(){return this.scene.game.storage.getUserDataSeason(this.seasonId)}},{key:"seasonGeneralData",get:function(){return this.scene.game.storage.getGeneralDataSeason(this.seasonId)}},{key:"currentProgress",get:function(){return this.cardsCount.userCardsCount/this.cardsCount.generalCardsCount*100}},{key:"cardsCount",get:function(){var t=this,e=0,r=0;return this.seasonGeneralData.collection_ids.forEach((function(i){var n=t.scene.game.storage.getUserDataCollection(i),o=t.scene.game.storage.getGeneralDataCollection(i);r+=o.pieces,n&&(e+=n.pieces.length)})),{userCardsCount:e,generalCardsCount:r}}},{key:"received",get:function(){return!!this.seasonUserData&&-1!==this.seasonUserData.received_intervals.indexOf(this.intervalData.id)}},{key:"canRecive",get:function(){return!this.received&&this.currentProgress>=this.intervalData.percent}},{key:"onClick",value:(o=jo().mark((function t(){var e=this;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.canRecive){t.next=3;break}return t.next=3,new Promise((function(t){var r={seasonId:e.seasonId,intervalId:e.intervalData.id};e.scene.game.events.emit("popup_open","season_interval_reward",(function(){e.updateUI(),t()}),r)}));case 3:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(r,i){var n=o.apply(t,e);function s(t){Bo(n,r,i,s,a,"next",t)}function a(t){Bo(n,r,i,s,a,"throw",t)}s(void 0)}))},function(){return s.apply(this,arguments)})},{key:"addRewards",value:function(t){var e=this;this.intervalData.rewards.forEach((function(r,i){var n=-(310*e.intervalData.rewards.length/2-150-5)+310*i,o=new An(e.scene,n,t,75,25,r);e.add(o),e.rewards.push(o)}))}}],n&&No(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}(Hn);function Wo(t){return Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wo(t)}function Ho(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,qo(i.key),i)}}function qo(t){var e=function(t,e){if("object"!=Wo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Wo(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Wo(e)?e:e+""}function Ko(t,e,r){return e=Jo(e),function(t,e){if(e&&("object"==Wo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Zo()?Reflect.construct(e,r||[],Jo(t).constructor):e.apply(t,r))}function Zo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Zo=function(){return!!t})()}function Jo(t){return Jo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jo(t)}function Qo(t,e){return Qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qo(t,e)}var $o=function(t){function e(t,r,i,n,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=Ko(this,e,[t,r,i])).allHeight=n,s.seasonId=o,s.intervals=[],s.assemble(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qo(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,0,0,"season_panel_bg");this.add(t);var e=new(i().GameObjects.Text)(this.scene,-260,-125,"Season #"+this.seasonId,{fontFamily:_,fontSize:"30px",color:"#FFFFFF",align:"center"});e.setOrigin(0,.5),this.add(e);var r=new Po(this.scene,150,-60,this.generalData.end_time);this.add(r);var n=new Io(this.scene,0,100,this.currentProgress,this.currentProgressStr,480);this.add(n),this.addIntervals(n.x-240,60,480),this.modules={progressBar:n}}},{key:"updateUI",value:function(){this.modules.progressBar.updateProgress(this.currentProgress,this.currentProgressStr),this.intervals.forEach((function(t){t.updateUI()}))}},{key:"addRect",value:function(t,e,r,n,o,s){var a=new(i().GameObjects.Graphics)(this.scene,{x:t,y:e});this.add(a),a.fillStyle(o,s),a.fillRect(-r/2,-n/2,r,n)}},{key:"userData",get:function(){return this.scene.game.storage.getUserDataSeason(this.seasonId)}},{key:"generalData",get:function(){return this.scene.game.storage.getGeneralDataSeason(this.seasonId)}},{key:"currentProgress",get:function(){return this.cardsCount.userCardsCount/this.cardsCount.generalCardsCount*100}},{key:"currentProgressStr",get:function(){return this.cardsCount.userCardsCount+"/"+this.cardsCount.generalCardsCount}},{key:"cardsCount",get:function(){var t=this,e=0,r=0;return this.generalData.collection_ids.forEach((function(i){var n=t.scene.game.storage.getUserDataCollection(i),o=t.scene.game.storage.getGeneralDataCollection(i);r+=o.pieces,n&&(e+=n.pieces.length)})),{userCardsCount:e,generalCardsCount:r}}},{key:"addIntervals",value:function(t,e,r){var i=this;this.generalData.season_intervals.forEach((function(n){var o=new Vo(i.scene,t+r*(n.percent/100),e,i.seasonId,n);i.add(o),i.intervals.push(o)}))}}])&&Ho(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function ts(t){return ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ts(t)}function es(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,rs(i.key),i)}}function rs(t){var e=function(t,e){if("object"!=ts(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=ts(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ts(e)?e:e+""}function is(t,e,r){return e=ss(e),function(t,e){if(e&&("object"==ts(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ns()?Reflect.construct(e,r||[],ss(t).constructor):e.apply(t,r))}function ns(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ns=function(){return!!t})()}function os(){return os="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=ss(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},os.apply(null,arguments)}function ss(t){return ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ss(t)}function as(t,e){return as=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},as(t,e)}var hs=function(t){function e(t,r,i,n,o,s){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=is(this,e,[t,r,i])).dragWidth=n,a.dragHeight=o,a.scroll=s,a.isDraggingNow=!1,a.init(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&as(t,e)}(e,t),r=e,(n=[{key:"init",value:function(){var t=this;this.setSize(this.dragWidth,this.dragHeight);var e=new(i().Geom.Rectangle)(0,0,this.dragWidth,this.dragHeight),r=i().Geom.Rectangle.Contains;this.setInteractive({draggable:!0,hitArea:e,hitAreaCallback:r}),this.childEvents=["pointerdown","pointerup","pointerover","pointerout"],this.childEvents.forEach((function(e){t.on(e,(function(r){var i=t.getAllChildElems();t.scene.input.hitTestPointer(r).forEach((function(n){n!==t&&-1!==i.indexOf(n)&&n.emit(e,r)}))}))})),this.on("drag",(function(e,r,i){t.scroll.onDrag(e,r,i)})),this.on("dragstart",(function(e,r,i){t.scroll.onStart(e,r,i)})),this.on("dragend",(function(e,r,i){t.isDraggingNow=!1,t.scroll.onEnd(e,r,i)}))}},{key:"getAllChildElems",value:function(){for(var t=[],e=[this.scroll.childContainer];e.length>0;){var r=e.shift();t.push(r),r.list&&r.list.forEach((function(t){e.push(t)}))}return t}},{key:"isPointerInRect",value:function(t){u(this)}},{key:"showRectZone",value:function(){var t=new(i().GameObjects.Graphics)(this.scene,this.x,this.y);this.add(t),t.fillStyle(8947848,1),t.fillRect(-this.dragWidth/2,-this.dragHeight/2,this.dragWidth,this.dragHeight),t.fillStyle(3266304,1),t.fillRect(-25,-25,50,50),t.fillStyle(16766720,1),t.fillRect(-this.dragWidth/2,-this.dragHeight/2,50,50),t.fillStyle(16766720,1),t.fillRect(this.dragWidth/2-50,-this.dragHeight/2,50,50),t.fillStyle(16766720,1),t.fillRect(-this.dragWidth/2,this.dragHeight/2-50,50,50),t.fillStyle(16766720,1),t.fillRect(this.dragWidth/2-50,this.dragHeight/2-50,50,50),t.setAlpha(.7)}},{key:"destroy",value:function(){os(ss(e.prototype),"destroy",this).call(this)}}])&&es(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function us(t){return us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},us(t)}function cs(){cs=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==us(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(us(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function ls(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function fs(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ps(i.key),i)}}function ps(t){var e=function(t,e){if("object"!=us(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=us(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==us(e)?e:e+""}function ds(t,e,r){return e=ys(e),function(t,e){if(e&&("object"==us(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vs()?Reflect.construct(e,r||[],ys(t).constructor):e.apply(t,r))}function vs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vs=function(){return!!t})()}function ys(t){return ys=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ys(t)}function gs(t,e){return gs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gs(t,e)}var ms=function(t){function e(t,r,i,n,o,s){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=ds(this,e,[t,r,i])).allWidth=o,a.allHeight=s,a.add(n),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gs(t,e)}(e,t),r=e,n=[{key:"topY",get:function(){return this.y}},{key:"botY",get:function(){return this.y+this.allHeight}},{key:"showRectZone",value:function(){var t=new(i().GameObjects.Graphics)(this.scene,0,0);this.add(t),t.fillStyle(8946760,1),t.fillRect(-this.allWidth/2,0,this.allWidth,this.allHeight),t.fillStyle(3266304,1),t.fillRect(-12.5,-12.5,25,25),t.fillStyle(16766720,1),t.fillRect(-this.allWidth/2,0,25,25),t.fillStyle(16766720,1),t.fillRect(this.allWidth/2-25,0,25,25),t.fillStyle(16766720,1),t.fillRect(-this.allWidth/2,this.allHeight-25,25,25),t.fillStyle(16766720,1),t.fillRect(this.allWidth/2-25,this.allHeight-25,25,25),t.setAlpha(.7)}},{key:"moveLinearTo",value:(o=cs().mark((function t(e,r){var i,n=this,o=arguments;return cs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=o.length>2&&void 0!==o[2]?o[2]:100,t.abrupt("return",new Promise((function(t){n.tween=n.scene.tweens.add({duration:i,targets:n,y:r,x:e,ease:"linier",onComplete:function(){t()}})})));case 2:case"end":return t.stop()}}),t)})),s=function(){var t=this,e=arguments;return new Promise((function(r,i){var n=o.apply(t,e);function s(t){ls(n,r,i,s,a,"next",t)}function a(t){ls(n,r,i,s,a,"throw",t)}s(void 0)}))},function(t,e){return s.apply(this,arguments)})}],n&&fs(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}(i().GameObjects.Container);function xs(t){return xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xs(t)}function bs(t,e,r){return e=Es(e),function(t,e){if(e&&("object"==xs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ws()?Reflect.construct(e,r||[],Es(t).constructor):e.apply(t,r))}function ws(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ws=function(){return!!t})()}function Es(t){return Es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Es(t)}function Ts(t,e){return Ts=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ts(t,e)}var Ss=function(t){function e(t,r,n,o,s){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=bs(this,e,[t,r,n,o,s])).setInteractive(new(i().Geom.Rectangle)(0,0,o,s),i().Geom.Rectangle.Contains),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ts(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(i().GameObjects.Zone);function _s(t){return _s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_s(t)}function Os(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ps(i.key),i)}}function Ps(t){var e=function(t,e){if("object"!=_s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=_s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_s(e)?e:e+""}function Ms(t,e,r){return e=Ls(e),function(t,e){if(e&&("object"==_s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,As()?Reflect.construct(e,r||[],Ls(t).constructor):e.apply(t,r))}function As(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(As=function(){return!!t})()}function Ls(t){return Ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ls(t)}function Cs(t,e){return Cs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cs(t,e)}var Rs=function(t){function e(t,r,i,n,o,s,a,h){var u,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:100;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=Ms(this,e,[t,r,i])).child=n,u.childWidth=o,u.childHeight=s,u.dragWidth=a,u.dragHeight=h,u.maxOffset=c,u.maskRect=!1,u.startPosY=!1,u.startTime=!1,u.assemble(n),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cs(t,e)}(e,t),r=e,(i=[{key:"scrollPanelWidth",get:function(){return this.childWidth}},{key:"scrollPanelHeight",get:function(){return this.childHeight+this.headerHeight+this.bottomHeight>this.scene.cameras.main.height?this.childHeight+this.headerHeight+this.bottomHeight:this.scene.cameras.main.height}},{key:"assemble",value:function(t){this.childContainer=new ms(this.scene,0,this.dragTopY,t,this.childWidth,this.childHeight),this.add(this.childContainer),this.add(new Ss(this.scene,0,0,2*this.scene.cameras.main.width,2*this.scene.cameras.main.height)),this.dragContainer=new hs(this.scene,0,0,this.dragWidth,this.dragHeight,this),this.add(this.dragContainer),this.createMask(),this.startUpdateMask()}},{key:"dragTopY",get:function(){return-this.dragHeight/2}},{key:"dragBotY",get:function(){return this.dragHeight/2}},{key:"onStart",value:function(t,e,r){this.startPosY=this.childContainer.y,this.startPointerY=t.y,this.startTime=new Date}},{key:"onDrag",value:function(t,e,r){if(!(this.dragHeight>this.childHeight)){var i=this.startPosY+r;i+this.childContainer.allHeight>this.dragBotY-this.maxOffset&&i<this.dragTopY+this.maxOffset&&(this.childContainer.y=i)}}},{key:"onEnd",value:function(t,e,r){if(!(this.dragHeight>this.childHeight)){var i=this.childContainer.y,n=new Date-this.startTime,o=Math.abs((this.startPosY-i)/n),s=i+(i-this.startPosY)*o,a=this.childContainer.x,h=s;s+this.childContainer.allHeight<this.dragBotY?h=this.dragBotY-this.childContainer.allHeight:s>this.dragTopY&&(h=this.dragTopY);var u=n*o<100?100:n*o;this.childContainer.moveLinearTo(a,h,u)}}},{key:"setToBot",value:function(){this.childContainer.y=this.dragBotY-this.childContainer.allHeight}},{key:"startUpdateMask",value:function(){var t=this;this.scene.time.addEvent({delay:10,callback:function(){t.onMaskUpdate()},loop:!0})}},{key:"createMask",value:function(){this.maskRect=this.scene.add.graphics(),this.add(this.maskRect),this.maskRect.fillStyle(0,1),this.maskRect.fillRect(-this.dragWidth/2,-this.dragHeight/2,this.dragWidth,this.dragHeight),this.add(this.maskRect);var t=this.maskRect.createGeometryMask();this.childContainer.setMask(t),this.maskRect.setVisible(!1)}},{key:"onMaskUpdate",value:function(){var t=u(this);this.maskRect.setPosition(t.x,t.y)}},{key:"getCurrentDragPercent",value:function(t,e,r,i,n){var o=100*-(-t/2+this.scene.cameras.main.width/2+i)/(t-this.scene.cameras.main.width);return r||(o=100*-(-e/2+this.scene.cameras.main.height/2+n)/(e-this.scene.cameras.main.height)),o>100&&(o=100),o<0&&(o=0),o}},{key:"showMaskZone",value:function(){var t=this.scene.add.graphics();this.add(t),t.fillStyle(101878,1),t.fillRect(-this.scrollPanelWidth/2,-this.scene.cameras.main.height/2+this.headerHeight,this.scrollPanelWidth,this.scene.cameras.main.height-this.bottomHeight-this.headerHeight),t.setAlpha(.4)}}])&&Os(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i}(i().GameObjects.Container);function ks(t){return ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ks(t)}function Fs(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Is(i.key),i)}}function Is(t){var e=function(t,e){if("object"!=ks(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=ks(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ks(e)?e:e+""}function Ds(t,e,r){return e=Ns(e),function(t,e){if(e&&("object"==ks(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,js()?Reflect.construct(e,r||[],Ns(t).constructor):e.apply(t,r))}function js(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(js=function(){return!!t})()}function Bs(){return Bs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Ns(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},Bs.apply(null,arguments)}function Ns(t){return Ns=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ns(t)}function Gs(t,e){return Gs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gs(t,e)}var Us=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Ds(this,e,[t,r,i])).seasonId=n,o.bannerPadding=20,o.topPanelOffset=100,o.assemble(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gs(t,e)}(e,t),r=e,(i=[{key:"assemble",value:function(){var t=this.addCollections(291),e=new $o(this.scene,0,-this.scene.cameras.main.height/2+this.topPanelOffset+145.5+this.bannerPadding,291,this.seasonId);this.add(e),this.scene.game.events.on("season_update",this.updateUI,this),this.modules={collections:t,panel:e}}},{key:"userData",get:function(){return this.scene.game.storage.getUserDataSeason(this.seasonId)}},{key:"generalData",get:function(){return this.scene.game.storage.getGeneralDataSeason(this.seasonId)}},{key:"updateUI",value:function(){this.modules.collections.updateUI(),this.modules.panel.updateUI(),this.scene.game.events.emit("notification_update")}},{key:"addCollections",value:function(t){var e=this.topPanelOffset+t+this.bannerPadding+25,r=new fo(this.scene,0,0,this.generalData.collection_ids),i=this.scene.cameras.main.height-e-200,n=r.allWidth,o=new Rs(this.scene,0,-this.scene.cameras.main.height/2+e+i/2,r,r.allWidth,r.allHeight,n,i);return this.add(o),r}},{key:"destroy",value:function(){this.scene.game.events.off("season_update",this.updateUI,this),Bs(Ns(e.prototype),"destroy",this).call(this)}}])&&Fs(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i}(i().GameObjects.Container);function Ys(t){return Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ys(t)}function zs(){zs=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Ys(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Ys(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Xs(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Vs(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Xs(o,i,n,s,a,"next",t)}function a(t){Xs(o,i,n,s,a,"throw",t)}s(void 0)}))}}function Ws(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Hs(i.key),i)}}function Hs(t){var e=function(t,e){if("object"!=Ys(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Ys(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ys(e)?e:e+""}function qs(t,e,r){return e=Js(e),function(t,e){if(e&&("object"==Ys(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ks()?Reflect.construct(e,r||[],Js(t).constructor):e.apply(t,r))}function Ks(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ks=function(){return!!t})()}function Zs(){return Zs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Js(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},Zs.apply(null,arguments)}function Js(t){return Js=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Js(t)}function Qs(t,e){return Qs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qs(t,e)}var $s=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=qs(this,e,[t,r,0])).id=i,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qs(t,e)}(e,t),r=e,n=[{key:"disappearance",value:function(t){var e=this;return new Promise((function(r){var n;e.scene.tweens.add({targets:e,x:t*e.scene.cameras.main.width,duration:350,delay:0,ease:i().Math.Easing.Expo.InOut,onComplete:(n=Vs(zs().mark((function t(){return zs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onDissappearance();case 2:e.destroy(),r();case 4:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})})}))}},{key:"appearance",value:function(){var t=this;return new Promise((function(e){var r;t.scene.tweens.add({targets:t,x:0,duration:350,delay:0,ease:i().Math.Easing.Expo.InOut,onComplete:(r=Vs(zs().mark((function r(){return zs().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.onAppearance();case 2:e();case 3:case"end":return r.stop()}}),r)}))),function(){return r.apply(this,arguments)})})}))}},{key:"onAppearance",value:function(){}},{key:"onDissappearance",value:function(){}},{key:"destroy",value:function(){Zs(Js(e.prototype),"destroy",this).call(this)}}],n&&Ws(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function ta(t){return ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ta(t)}function ea(){ea=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==ta(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ta(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function ra(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function ia(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,na(i.key),i)}}function na(t){var e=function(t,e){if("object"!=ta(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=ta(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ta(e)?e:e+""}function oa(t,e,r){return e=aa(e),function(t,e){if(e&&("object"==ta(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,sa()?Reflect.construct(e,r||[],aa(t).constructor):e.apply(t,r))}function sa(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(sa=function(){return!!t})()}function aa(t){return aa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},aa(t)}function ha(t,e){return ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ha(t,e)}var ua=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=oa(this,e,[t,r,i])).assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ha(t,e)}(e,t),r=e,n=[{key:"assemble",value:(o=ea().mark((function t(){var e,r,n,o=this;return ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=new(i().GameObjects.Sprite)(this.scene,0,0,"section_bg_blue"),this.add(e),e.setDisplaySize(this.scene.cameras.main.width,this.scene.cameras.main.height),r=new Us(this.scene,0,0,this.currentSeasonId),this.add(r),n=new Hi(this.scene,-this.scene.cameras.main.width/2+25,-this.scene.cameras.main.height/2+25,"btn_test",(function(){o.scene.game.storage.addRandomCollectionCard(),o.scene.game.events.emit("season_update"),o.scene.game.events.emit("notification_update")})),this.add(n);case 7:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(r,i){var n=o.apply(t,e);function s(t){ra(n,r,i,s,a,"next",t)}function a(t){ra(n,r,i,s,a,"throw",t)}s(void 0)}))},function(){return s.apply(this,arguments)})},{key:"currentSeasonId",get:function(){var t=this.scene.game.storage.getCurrentSeason();return t?t.id:(console.error("no season!!"),!1)}}],n&&ia(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}($s);function ca(t){return ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ca(t)}function la(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,fa(i.key),i)}}function fa(t){var e=function(t,e){if("object"!=ca(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=ca(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ca(e)?e:e+""}function pa(t,e,r){return e=va(e),function(t,e){if(e&&("object"==ca(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,da()?Reflect.construct(e,r||[],va(t).constructor):e.apply(t,r))}function da(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(da=function(){return!!t})()}function va(t){return va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},va(t)}function ya(t,e){return ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ya(t,e)}var ga=function(t){function e(t,r,i,n,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=pa(this,e,[t,r,i])).cost=o,s.nextLevel=n,s.assemble(),s.updateUI(n,o),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ya(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,-30,0,"coin_icon");this.add(t),t.setDisplaySize(35,35);var e=new(i().GameObjects.Text)(this.scene,30,0,this.cost,{fontFamily:_,fontSize:"30px",color:"#FFFFFF",align:"center"});e.setOrigin(.5,.5),this.add(e),this.modules={icon:t,countText:e}}},{key:"updateUI",value:function(t,e){this.cost=e,this.nextLevel=t,this.modules.countText.setVisible(!0),this.modules.icon.setVisible(!0),this.modules.countText.setText(e),this.nextLevel||(this.modules.countText.setVisible(!1),this.modules.icon.setVisible(!1))}}])&&la(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function ma(t){return ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ma(t)}function xa(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ba(i.key),i)}}function ba(t){var e=function(t,e){if("object"!=ma(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=ma(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ma(e)?e:e+""}function wa(t,e,r){return e=Ta(e),function(t,e){if(e&&("object"==ma(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ea()?Reflect.construct(e,r||[],Ta(t).constructor):e.apply(t,r))}function Ea(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ea=function(){return!!t})()}function Ta(t){return Ta=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ta(t)}function Sa(t,e){return Sa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sa(t,e)}var _a=function(t){function e(t,r,i,n,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=wa(this,e,[t,r,i])).isBuyed=n,s.count=o,s.assemble(),s.updateUI(n,o),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sa(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Text)(this.scene,0,0,this.rewardPerHourStr,{fontFamily:_,fontSize:"16px",color:"#FFFFFF",align:"center"});t.setOrigin(.5),t.setAlpha(.6),this.add(t);var e=new(i().GameObjects.Text)(this.scene,30,30,"+ "+this.count,{fontFamily:_,fontSize:"30px",color:"#FFFFFF",align:"center"});e.setOrigin(.5),this.add(e);var r=new(i().GameObjects.Sprite)(this.scene,-30,30,"coin_icon");this.add(r),r.setDisplaySize(25,25),this.modules={countText:e,coin_icon:r}}},{key:"rewardPerHourStr",get:function(){return this.scene.game.localization.getText("profit_per_hour")}},{key:"updateUI",value:function(t,e){this.count=e,this.isBuyed=t,this.modules.countText.setText("+ "+this.count),this.isBuyed?(this.modules.countText.setTint(16766720),this.modules.coin_icon.setTexture("coin_icon")):(this.modules.countText.setTint(16777215),this.modules.coin_icon.setTexture("coin_icon_gray"))}}])&&xa(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Oa(t){return Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oa(t)}function Pa(){Pa=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Oa(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Oa(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Ma(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Aa(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,La(i.key),i)}}function La(t){var e=function(t,e){if("object"!=Oa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Oa(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Oa(e)?e:e+""}function Ca(t,e,r){return e=ka(e),function(t,e){if(e&&("object"==Oa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ra()?Reflect.construct(e,r||[],ka(t).constructor):e.apply(t,r))}function Ra(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ra=function(){return!!t})()}function ka(t){return ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ka(t)}function Fa(t,e){return Fa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fa(t,e)}var Ia=function(t){function e(t,r,i,n,o,s){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Ca(this,e,[t,r,i,n,o])).generalData=s,a.assemble(n,o),a.updateUI(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fa(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(t,e){var r=new(i().GameObjects.Sprite)(this.scene,0,0,"helper_bg");this.add(r);var n=new(i().GameObjects.Sprite)(this.scene,-70,-30,this.iconKey);this.add(n),n.setDisplaySize(90,90);var o=new(i().GameObjects.Sprite)(this.scene,n.x,n.y,"helper_lock");this.add(o),o.setDisplaySize(95,95);var s=new(i().GameObjects.Text)(this.scene,70,-70,this.textStr,{fontFamily:_,fontSize:"22px",color:"#FFFFFF",align:"center",wordWrap:{width:120,useAdvancedWrap:!0}});s.setOrigin(.5),this.add(s);var a=new(i().GameObjects.Text)(this.scene,-70,60,this.lvlStr,{fontFamily:_,fontSize:"18px",color:"#FFFFFF",align:"center"});a.setOrigin(.5),this.add(a);var h=new ga(this.scene,60,65,this.nextLevel,this.nextLevelCost);this.add(h);var u=new _a(this.scene,70,-20,this.isBuyed,this.rewardPerHour);this.add(u);var c=new(i().GameObjects.Sprite)(this.scene,0,0,"helper_bg");this.add(c),c.setTint(0),c.setAlpha(.4),c.setVisible(!1),this.modules={bg:r,levelText:a,cost:h,shade:c,profit:u,lock:o}}},{key:"updateUI",value:function(){this.modules.levelText.setText(this.lvlStr),this.modules.cost.updateUI(this.nextLevel,this.nextLevelCost),this.modules.profit.updateUI(this.isBuyed,this.rewardPerHour),this.modules.shade.setVisible(!1),this.modules.lock.setVisible(!1),!this.canBuy&&this.nextLevel&&(this.modules.shade.setVisible(!0),this.modules.lock.setVisible(!0))}},{key:"iconKey",get:function(){return"helper_"+this.generalData.id}},{key:"textStr",get:function(){return this.generalData.title}},{key:"lvlStr",get:function(){return this.scene.game.localization.getText("lvl")+" "+this.userLevel}},{key:"rewardPerHour",get:function(){return this.isBuyed?this.levelData.profit:this.generalData.helper_levels[0].profit}},{key:"nextLevelCost",get:function(){return this.nextLevel?this.nextLevel.cost:""}},{key:"nextLevel",get:function(){var t=this,e=!1;return this.generalData.helper_levels.forEach((function(r){t.userLevel+1===r.number&&(e=r)})),e}},{key:"isBuyed",get:function(){return this.userLevel>0}},{key:"levelData",get:function(){var t=this,e=!1;return this.generalData.helper_levels.forEach((function(r){t.userLevel===r.number&&(e=r)})),e}},{key:"userLevel",get:function(){return this.userData?this.userData.level:0}},{key:"userData",get:function(){return this.scene.game.storage.getUserDataHelper(this.generalData.id)}},{key:"canBuy",get:function(){return this.nextLevelCost<=this.scene.game.storage.userDataCoins}},{key:"onClick",value:(o=Pa().mark((function t(){var e=this;return Pa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){if(e.canBuy){var r={helperId:e.generalData.id};e.scene.game.events.emit("popup_open","helper_upgrade",(function(){t()}),r)}else t()}));case 2:case"end":return t.stop()}}),t)})),s=function(){var t=this,e=arguments;return new Promise((function(r,i){var n=o.apply(t,e);function s(t){Ma(n,r,i,s,a,"next",t)}function a(t){Ma(n,r,i,s,a,"throw",t)}s(void 0)}))},function(){return s.apply(this,arguments)})}],n&&Aa(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}(Hn);function Da(t){return Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Da(t)}function ja(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ba(i.key),i)}}function Ba(t){var e=function(t,e){if("object"!=Da(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Da(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Da(e)?e:e+""}function Na(t,e,r){return e=Ya(e),function(t,e){if(e&&("object"==Da(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ga()?Reflect.construct(e,r||[],Ya(t).constructor):e.apply(t,r))}function Ga(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ga=function(){return!!t})()}function Ua(){return Ua="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Ya(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},Ua.apply(null,arguments)}function Ya(t){return Ya=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ya(t)}function za(t,e){return za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},za(t,e)}var Xa=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Na(this,e,[t,r,i])).helpers=[],n.assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&za(t,e)}(e,t),r=e,(i=[{key:"assemble",value:function(){this.addHelpers(),this.scene.game.events.on("helpers_update",this.onHelpersUpdate,this)}},{key:"userData",get:function(){return this.scene.game.storage.getUserDataHelpers}},{key:"addHelpers",value:function(){var t=this,e=0,r=0;this.helpersData.forEach((function(i,n){r>1&&(r=0,e++);var o=-t.helperWidth/2-t.helperWDistance/2;1==r&&(o=t.helperWidth/2+t.helperHDistance/2);var s=t.topOffset+t.helperHeight/2+e*(t.helperHeight+t.helperHDistance),a=new Ia(t.scene,o,s,t.helperWidth,t.helperHeight,i);t.add(a),t.helpers.push(a),r++}))}},{key:"onHelpersUpdate",value:function(){this.helpers.forEach((function(t){t.updateUI()}))}},{key:"helpersData",get:function(){return this.scene.game.storage.generalDataHelpers}},{key:"topOffset",get:function(){return 30}},{key:"helperWDistance",get:function(){return 30}},{key:"helperHDistance",get:function(){return 30}},{key:"helperWidth",get:function(){return 303}},{key:"helperHeight",get:function(){return 200}},{key:"allWidth",get:function(){return 2*this.helperWidth+this.helperWDistance}},{key:"allHeight",get:function(){return this.topOffset+Math.ceil(this.helpersData.length/2)*(this.helperHeight+this.helperHDistance)}},{key:"destroy",value:function(){this.scene.game.events.off("helpers_update",this.onHelpersUpdate,this),Ua(Ya(e.prototype),"destroy",this).call(this)}}])&&ja(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i}(i().GameObjects.Container);function Va(t){return Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Va(t)}function Wa(){Wa=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Va(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Va(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Ha(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function qa(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ka(i.key),i)}}function Ka(t){var e=function(t,e){if("object"!=Va(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Va(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Va(e)?e:e+""}function Za(t,e,r){return e=Qa(e),function(t,e){if(e&&("object"==Va(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ja()?Reflect.construct(e,r||[],Qa(t).constructor):e.apply(t,r))}function Ja(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ja=function(){return!!t})()}function Qa(t){return Qa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qa(t)}function $a(t,e){return $a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$a(t,e)}var th=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Za(this,e,[t,r,i])).assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$a(t,e)}(e,t),r=e,n=[{key:"assemble",value:(o=Wa().mark((function t(){var e;return Wa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=new(i().GameObjects.Sprite)(this.scene,0,0,"section_bg_green"),this.add(e),e.setDisplaySize(this.scene.cameras.main.width,this.scene.cameras.main.height),this.addHelpers();case 4:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(r,i){var n=o.apply(t,e);function s(t){Ha(n,r,i,s,a,"next",t)}function a(t){Ha(n,r,i,s,a,"throw",t)}s(void 0)}))},function(){return s.apply(this,arguments)})},{key:"addHelpers",value:function(){var t=new Xa(this.scene,0,0),e=this.scene.cameras.main.height-100-200,r=t.allWidth,i=new Rs(this.scene,0,-this.scene.cameras.main.height/2+100+e/2,t,t.allWidth,t.allHeight,r,e);return this.add(i),t}}],n&&qa(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}($s);function eh(t){return eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eh(t)}function rh(t,e,r){return e=nh(e),function(t,e){if(e&&("object"==eh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ih()?Reflect.construct(e,r||[],nh(t).constructor):e.apply(t,r))}function ih(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ih=function(){return!!t})()}function nh(t){return nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nh(t)}function oh(t,e){return oh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oh(t,e)}var sh=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=rh(this,e,[t,r,i,"btn_xoltars",function(){n.scene.game.events.emit("popup_open","xoltars")}])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oh(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(Hi);function ah(t){return ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ah(t)}function hh(t,e,r){return e=ch(e),function(t,e){if(e&&("object"==ah(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,uh()?Reflect.construct(e,r||[],ch(t).constructor):e.apply(t,r))}function uh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(uh=function(){return!!t})()}function ch(t){return ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ch(t)}function lh(t,e){return lh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lh(t,e)}var fh=function(t){function e(t,r,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=hh(this,e,[t,r,n,"btn_friends",function(){o.scene.game.events.emit("popup_open","friends")}]);var s=new(i().GameObjects.Text)(o.scene,0,0,"Friends",{fontFamily:_,fontSize:"28px",color:"#7f86bf",align:"center"});return s.setOrigin(.5,.5),o.add(s),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lh(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(Hi);function ph(t){return ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ph(t)}function dh(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,vh(i.key),i)}}function vh(t){var e=function(t,e){if("object"!=ph(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=ph(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ph(e)?e:e+""}function yh(t,e,r){return e=xh(e),function(t,e){if(e&&("object"==ph(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gh()?Reflect.construct(e,r||[],xh(t).constructor):e.apply(t,r))}function gh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gh=function(){return!!t})()}function mh(){return mh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=xh(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},mh.apply(null,arguments)}function xh(t){return xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xh(t)}function bh(t,e){return bh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bh(t,e)}var wh=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=yh(this,e,[t,r,i])).count=n,o.assemble(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bh(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,-40,0,"coin_icon");this.add(t),t.setDisplaySize(50,50);var e=new(i().GameObjects.Text)(this.scene,40,0,"+"+this.count,{fontFamily:_,fontSize:"50px",color:"#FFFFFF",align:"center"});e.setOrigin(1,.5),this.add(e),this.modules={icon:t,text:e},this.appearance()}},{key:"appearance",value:function(){var t=this;return new Promise((function(e){t.scene.tweens.add({targets:t,y:"-=500",alpha:0,duration:3e3,delay:0,ease:i().Math.Easing.Linear,onComplete:function(){t.destroy(),e()}})}))}},{key:"destroy",value:function(){mh(xh(e.prototype),"destroy",this).call(this)}}])&&dh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Eh(t){return Eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eh(t)}function Th(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Sh(i.key),i)}}function Sh(t){var e=function(t,e){if("object"!=Eh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Eh(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Eh(e)?e:e+""}function _h(t,e,r){return e=Ph(e),function(t,e){if(e&&("object"==Eh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Oh()?Reflect.construct(e,r||[],Ph(t).constructor):e.apply(t,r))}function Oh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Oh=function(){return!!t})()}function Ph(t){return Ph=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ph(t)}function Mh(t,e){return Mh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mh(t,e)}var Ah=function(t){function e(t,r,i,n,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=_h(this,e,[t,r,i])).assemble(n,o),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mh(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(t,e){var r=new on(this.scene,0,0,400,30,10,4080988,9714773,9714773,16777215,0,t);this.add(r);var n=new(i().GameObjects.Text)(this.scene,175,r.y,e,{fontFamily:_,fontSize:"24px",color:"#FFFFFF",align:"center"});n.setOrigin(1,.5),this.add(n);var o=new(i().GameObjects.Sprite)(this.scene,-250,15,"icon_box_close");this.add(o),o.setOrigin(.5,1);var s=new(i().GameObjects.Sprite)(this.scene,250,15,"icon_box_open");this.add(s),s.setOrigin(.5,1),this.modules={bar:r,text:n}}},{key:"updateProgress",value:function(t,e){this.modules.bar.setProgress(t),this.modules.text.setText(e)}}])&&Th(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Lh(t){return Lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lh(t)}function Ch(){Ch=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Lh(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Lh(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Rh(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function kh(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Rh(o,i,n,s,a,"next",t)}function a(t){Rh(o,i,n,s,a,"throw",t)}s(void 0)}))}}function Fh(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ih(i.key),i)}}function Ih(t){var e=function(t,e){if("object"!=Lh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Lh(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Lh(e)?e:e+""}function Dh(t,e,r){return e=Bh(e),function(t,e){if(e&&("object"==Lh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,jh()?Reflect.construct(e,r||[],Bh(t).constructor):e.apply(t,r))}function jh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(jh=function(){return!!t})()}function Bh(t){return Bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bh(t)}function Nh(t,e){return Nh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nh(t,e)}var Gh=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Dh(this,e,[t,r,i])).boxId=n,o.coinsCount=1,o.clickAnimations=["click","click2","click3"],o.busy=!1,o.assemble(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nh(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(){var t=this,e=this.scene.add.spine(0,0,"spine_box_"+this.generalDataBox.id);this.add(e),e.setScale(.8),e.play("static",!0),console.log("box",e);var r=new(i().GameObjects.Text)(this.scene,0,-400,this.boxNameStr,{fontFamily:_,fontSize:"40px",color:"#FFFFFF",align:"center"});r.setOrigin(.5,.5),this.add(r),e.setInteractive({useHandCursor:!0}),e.on("pointerdown",(function(e){t.onClick()}));var n=new Ah(this.scene,0,400,this.currentProgress,this.currentProgressStr);this.add(n),this.modules={box:e,progressBar:n}}},{key:"onClick",value:(h=kh(Ch().mark((function t(){return Ch().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.busy){t.next=2;break}return t.abrupt("return");case 2:return this.modules.box.play(this.clickAnimations[i().Math.Between(0,this.clickAnimations.length-1)],!1),this.onBoxClick(this.coinsCount),this.busy=!0,t.next=7,this.checkComplete();case 7:this.busy=!1;case 8:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"boxNameStr",get:function(){return"Mystery Box"}},{key:"onBoxClick",value:function(t){this.scene.game.storage.boxClick(this.userDataBox.id,t),this.showCoin(t),this.scene.game.events.emit("coins_update"),this.modules.progressBar.updateProgress(this.currentProgress,this.currentProgressStr)}},{key:"checkComplete",value:(s=kh(Ch().mark((function t(){return Ch().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.completed){t.next=3;break}return t.next=3,this.onComplete();case 3:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"completed",get:function(){return this.userDataBox.points==this.generalDataBox.points}},{key:"showCoin",value:function(t){var e=i().Math.Between(-200,200),r=i().Math.Between(-200,200),n=new wh(this.scene,e,r,t);this.add(n)}},{key:"onComplete",value:(o=kh(Ch().mark((function t(){var e=this;return Ch().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(){var t=kh(Ch().mark((function t(r){var i,n;return Ch().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={boxId:e.boxId},n=e.scene.add.spine(0,0,"spine_coin"),e.add(n),n.setScale(.8),e.modules.box.play("open",!1),n.play("coin",!1),t.next=8,a(e.scene,2500);case 8:e.scene.game.events.emit("popup_open","box_reward",(function(){e.scene.game.events.emit("coins_update"),e.scene.game.events.emit("play_show_default"),r()}),i);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"userDataBox",get:function(){return this.scene.game.storage.getUserDataBox(this.boxId)}},{key:"collectionGeneralData",get:function(){return this.scene.game.storage.getGeneralDataCollection(this.userDataBox.collection_id)}},{key:"generalDataBox",get:function(){return this.scene.game.storage.getGeneralDataBox(this.userDataBox.type_id)}},{key:"currentProgress",get:function(){return this.userDataBox.points/this.generalDataBox.points*100}},{key:"currentProgressStr",get:function(){return this.userDataBox.points+"/"+this.generalDataBox.points}}],n&&Fh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s,h}(i().GameObjects.Container);function Uh(t){return Uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uh(t)}function Yh(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,zh(i.key),i)}}function zh(t){var e=function(t,e){if("object"!=Uh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Uh(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Uh(e)?e:e+""}function Xh(t,e,r){return e=Wh(e),function(t,e){if(e&&("object"==Uh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Vh()?Reflect.construct(e,r||[],Wh(t).constructor):e.apply(t,r))}function Vh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Vh=function(){return!!t})()}function Wh(t){return Wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wh(t)}function Hh(t,e){return Hh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hh(t,e)}var qh=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Xh(this,e,[t,r,i])).assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hh(t,e)}(e,t),r=e,(i=[{key:"assemble",value:function(){var t=this,e=this.scene.add.spine(0,0,"Zoltar_fortune_teller_machine _2");this.add(e),e.y+=400,e.play("animation",!0),e.setInteractive({useHandCursor:!0}),e.on("pointerdown",(function(e){t.onBallClick()})),this.modules={}}},{key:"onBallClick",value:function(){this.scene.game.events.emit("popup_open","get_box",(function(){}),{})}},{key:"updateUI",value:function(){}},{key:"reciveBox",value:function(){return this.scene.game.storage.getSessionDataBox()}}])&&Yh(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i}(i().GameObjects.Container);function Kh(t){return Kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kh(t)}function Zh(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Jh(i.key),i)}}function Jh(t){var e=function(t,e){if("object"!=Kh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Kh(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kh(e)?e:e+""}function Qh(t,e,r){return e=tu(e),function(t,e){if(e&&("object"==Kh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$h()?Reflect.construct(e,r||[],tu(t).constructor):e.apply(t,r))}function $h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($h=function(){return!!t})()}function tu(t){return tu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tu(t)}function eu(t,e){return eu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},eu(t,e)}var ru=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Qh(this,e,[t,r,i])).assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eu(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=this,e=new Hi(this.scene,0,0,"xoltar_mashine",(function(){t.onGameClick()}));this.add(e);var r=new(i().GameObjects.Sprite)(this.scene,0,-350,"xoltar_top_panel");this.add(r);var n=new(i().GameObjects.Text)(this.scene,r.x,r.y,this.topTextStr,{fontFamily:_,fontSize:"28px",color:"#FFFFFF",align:"center",wordWrap:{width:500,useAdvancedWrap:!0}});n.setOrigin(.5,.5),this.add(n);var o=new(i().GameObjects.Sprite)(this.scene,0,50,"xoltar_mid_panel");this.add(o);var s=new(i().GameObjects.Text)(this.scene,o.x,o.y-30,this.scene.game.localization.getText("time_until_gift"),{fontFamily:_,fontSize:"18px",color:"#FFFFFF",align:"center",wordWrap:{width:160,useAdvancedWrap:!0}});s.setOrigin(.5,.5),this.add(s);var a=new(i().GameObjects.Text)(this.scene,o.x,o.y+50,function(t){var e=parseInt(t/1e3%60),r=parseInt(t/6e4%60),i=parseInt(t/36e5%24);return parseInt(t/864e5),e=e<10?"0"+e:e,(i=i<10?"0"+i:i)+"h. "+(r=r<10?"0"+r:r)+"min."}(new Date(this.scene.game.storage.ticketTime).getTime()-(new Date).getTime()),{fontFamily:_,fontSize:"32px",color:"#FFFFFF",align:"center"});a.setOrigin(.5,.5),this.add(a),this.modules={topText:n}}},{key:"topTextStr",get:function(){return this.scene.game.storage.userDataCodeTrys>0?"TIME REMAINS TO TEST YOUR LUCK.\n\nPRESS ME TO UNVEIL THE HIDDEN GAME.":"Time until attempts are updated: 24:00"}},{key:"updateUI",value:function(){this.modules.topText.setText(this.topTextStr)}},{key:"onGameClick",value:function(){this.scene.game.events.emit("popup_open","xoltar_game",(function(){}),{})}}])&&Zh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function iu(t){return iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iu(t)}function nu(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ou(i.key),i)}}function ou(t){var e=function(t,e){if("object"!=iu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=iu(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==iu(e)?e:e+""}function su(t,e,r){return e=hu(e),function(t,e){if(e&&("object"==iu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,au()?Reflect.construct(e,r||[],hu(t).constructor):e.apply(t,r))}function au(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(au=function(){return!!t})()}function hu(t){return hu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hu(t)}function uu(t,e){return uu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uu(t,e)}var cu=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=su(this,e,[t,r,i])).assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uu(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,0,0,"xoltar_mashine");this.add(t);var e=new(i().GameObjects.Text)(this.scene,0,140,this.scene.game.localization.getText("max_box_count"),{fontFamily:_,fontSize:"26px",color:"#FFFFFF",align:"center"});e.setOrigin(.5,1),this.add(e),this.modules={}}},{key:"updateUI",value:function(){}}])&&nu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function lu(t){return lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lu(t)}function fu(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,pu(i.key),i)}}function pu(t){var e=function(t,e){if("object"!=lu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=lu(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==lu(e)?e:e+""}function du(t,e,r){return e=gu(e),function(t,e){if(e&&("object"==lu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vu()?Reflect.construct(e,r||[],gu(t).constructor):e.apply(t,r))}function vu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vu=function(){return!!t})()}function yu(){return yu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=gu(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},yu.apply(null,arguments)}function gu(t){return gu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gu(t)}function mu(t,e){return mu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mu(t,e)}var xu=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=du(this,e,[t,r,i])).assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mu(t,e)}(e,t),r=e,(i=[{key:"assemble",value:function(){var t,e=this;t=this.scene.game.storage.userDataBoxes.length>=5?new cu(this.scene,0,0):this.canGetBox?new qh(this.scene,0,0):new ru(this.scene,0,0),this.add(t);var r=new Hi(this.scene,-this.scene.cameras.main.width/2+25,-this.scene.cameras.main.height/2+100,"btn_test",(function(){e.scene.game.storage.addRandomBox()}));this.add(r),this.scene.game.events.on("xoltar_update",this.updateUI,this),this.modules={xoltar:t}}},{key:"updateUI",value:function(){this.modules.xoltar.updateUI()}},{key:"canGetBox",get:function(){return(new Date).getTime()>=new Date(this.scene.game.storage.ticketTime).getTime()}},{key:"destroy",value:function(){this.scene.game.events.off("xoltar_update",this.updateUI,this),yu(gu(e.prototype),"destroy",this).call(this)}}])&&fu(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i}(i().GameObjects.Container);function bu(t){return bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(t)}function wu(){wu=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==bu(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(bu(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Eu(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Tu(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Su(i.key),i)}}function Su(t){var e=function(t,e){if("object"!=bu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=bu(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bu(e)?e:e+""}function _u(t,e,r){return e=Mu(e),function(t,e){if(e&&("object"==bu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ou()?Reflect.construct(e,r||[],Mu(t).constructor):e.apply(t,r))}function Ou(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ou=function(){return!!t})()}function Pu(){return Pu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Mu(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},Pu.apply(null,arguments)}function Mu(t){return Mu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mu(t)}function Au(t,e){return Au=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Au(t,e)}var Lu=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_u(this,e,[t,r,i])).box=!1,n.xoltar=!1,n.mainContainer=!1,n.assemble(),n.scene.game.events.on("play_show_box",n.showBox,n),n.scene.game.events.on("play_show_xoltar",n.showXoltar,n),n.scene.game.events.on("play_show_default",n.showDefault,n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Au(t,e)}(e,t),r=e,n=[{key:"assemble",value:(o=wu().mark((function t(){var e,r,n;return wu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=new(i().GameObjects.Sprite)(this.scene,0,0,"section_bg_violet"),this.add(e),e.setDisplaySize(this.scene.cameras.main.width,this.scene.cameras.main.height),this.mainContainer=new(i().GameObjects.Container)(this.scene,0,0),this.add(this.mainContainer),this.showDefault(),r=new sh(this.scene,this.scene.cameras.main.width/2-85,-this.scene.cameras.main.height/2+150),this.add(r),n=new fh(this.scene,this.scene.cameras.main.width/2-220,-this.scene.cameras.main.height/2+150),this.add(n);case 10:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(r,i){var n=o.apply(t,e);function s(t){Eu(n,r,i,s,a,"next",t)}function a(t){Eu(n,r,i,s,a,"throw",t)}s(void 0)}))},function(){return s.apply(this,arguments)})},{key:"showDefault",value:function(){var t=this.scene.game.storage.userDataBoxes,e="XOLTAR";t.length>0&&this.lastState&&(e=this.lastState),"XOLTAR"==e?this.showXoltar():"BOX"==e&&this.showBox(t[t.length-1].id)}},{key:"lastState",get:function(){return this.scene.game.storage.sessionDataPlayLastState}},{key:"setLastState",value:function(t){return this.scene.game.storage.setSessionDataPlayLastState(t)}},{key:"showXoltar",value:function(){this.hideAll(),this.addXoltar(),this.setLastState("XOLTAR")}},{key:"showBox",value:function(t){this.hideAll(),this.addBox(t),this.setLastState("BOX")}},{key:"hideAll",value:function(){this.box&&(this.box.destroy(),this.box=!1),this.xoltar&&(this.xoltar.destroy(),this.xoltar=!1)}},{key:"addBox",value:function(t){this.box=new Gh(this.scene,0,0,t),this.mainContainer.add(this.box)}},{key:"addXoltar",value:function(){this.xoltar=new xu(this.scene,0,0),this.mainContainer.add(this.xoltar)}},{key:"onAppearance",value:function(){}},{key:"onDissappearance",value:function(){}},{key:"destroy",value:function(){this.scene.game.events.off("play_show_box",this.showBox,this),this.scene.game.events.off("play_show_xoltar",this.showXoltar,this),this.scene.game.events.off("play_show_default",this.showDefault,this),Pu(Mu(e.prototype),"destroy",this).call(this)}}],n&&Tu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}($s);function Cu(t){return Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cu(t)}function Ru(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ku(i.key),i)}}function ku(t){var e=function(t,e){if("object"!=Cu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Cu(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Cu(e)?e:e+""}function Fu(t,e,r){return e=Du(e),function(t,e){if(e&&("object"==Cu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Iu()?Reflect.construct(e,r||[],Du(t).constructor):e.apply(t,r))}function Iu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Iu=function(){return!!t})()}function Du(t){return Du=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Du(t)}function ju(t,e){return ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ju(t,e)}var Bu=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Fu(this,e,[t,r,i])).rewards=n,o.assemble(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ju(t,e)}(e,t),r=e,(i=[{key:"assemble",value:function(){var t=this;this.rewards&&this.rewards.forEach((function(e,r){var i=-(175*t.rewards.length/2-75-12.5)+175*r,n=new An(t.scene,i,0,150,50,e);t.add(n)}))}}])&&Ru(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i}(i().GameObjects.Container);function Nu(t){return Nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nu(t)}function Gu(){Gu=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Nu(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Nu(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Uu(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Yu(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,zu(i.key),i)}}function zu(t){var e=function(t,e){if("object"!=Nu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Nu(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Nu(e)?e:e+""}function Xu(t,e,r){return e=Wu(e),function(t,e){if(e&&("object"==Nu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Vu()?Reflect.construct(e,r||[],Wu(t).constructor):e.apply(t,r))}function Vu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Vu=function(){return!!t})()}function Wu(t){return Wu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wu(t)}function Hu(t,e){return Hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hu(t,e)}var qu=function(t){function e(t,r,i,n,o,s){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Xu(this,e,[t,r,i])).generalData=s,a.assemble(n,o),a.updateUI(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hu(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(t,e){var r=this,n=new(i().GameObjects.Sprite)(this.scene,80,0,"fortunometr_interval_bg_active");this.add(n);var o=new(i().GameObjects.Sprite)(this.scene,-this.scene.cameras.main.width/2+80,0,"fortunometr_interval_count");this.add(o);var s=new(i().GameObjects.Text)(this.scene,o.x,o.y,this.count,{fontFamily:_,fontSize:"28px",color:"#FFFFFF",align:"center"});s.setOrigin(.5),this.add(s);var a=new(i().GameObjects.Sprite)(this.scene,80,0,"fortunometr_interval_complete_icon");this.add(a);var h=new Bu(this.scene,80,0,this.generalData.rewards);this.add(h);var u=new Hi(this.scene,80,70,"fortunometr_interval_btn_get",(function(){r.onGet()}));this.add(u);var c=new(i().GameObjects.Text)(this.scene,0,0,this.scene.game.localization.getText("get_reward"),{fontFamily:_,fontSize:"28px",color:"#FFFFFF",align:"center"});c.setOrigin(.5),u.add(c),this.modules={bg:n,countIcon:o,countText:s,completeIcon:a,btnGet:u,rewards:h}}},{key:"count",get:function(){return this.generalData.fortune_required}},{key:"canGet",get:function(){return!this.received&&this.scene.game.storage.userDataFortuna>=this.count}},{key:"received",get:function(){return-1!==this.scene.game.storage.userDataFortunometrReceivedIntervals.indexOf(this.generalData.id)}},{key:"updateUI",value:function(){this.modules.bg.setTexture("fortunometr_interval_bg_inactive"),this.modules.countIcon.setTexture("fortunometr_interval_count_inactive"),this.modules.rewards.setVisible(!1),this.modules.btnGet.setVisible(!1),this.modules.completeIcon.setVisible(!1),this.received?this.modules.completeIcon.setVisible(!0):this.canGet?(this.modules.bg.setTexture("fortunometr_interval_bg_active"),this.modules.countIcon.setTexture("fortunometr_interval_count_active"),this.modules.rewards.setVisible(!0),this.modules.btnGet.setVisible(!0)):this.modules.rewards.setVisible(!0)}},{key:"onGet",value:(o=Gu().mark((function t(){var e=this;return Gu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){if(e.canGet){var r={intervalId:e.generalData.id};e.scene.game.events.emit("popup_open","fortunometr_interval_reward",(function(){t()}),r)}else t()}));case 2:case"end":return t.stop()}}),t)})),s=function(){var t=this,e=arguments;return new Promise((function(r,i){var n=o.apply(t,e);function s(t){Uu(n,r,i,s,a,"next",t)}function a(t){Uu(n,r,i,s,a,"throw",t)}s(void 0)}))},function(){return s.apply(this,arguments)})}],n&&Yu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}(i().GameObjects.Container);function Ku(t){return Ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(t)}function Zu(){Zu=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Ku(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Ku(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Ju(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Qu(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Ju(o,i,n,s,a,"next",t)}function a(t){Ju(o,i,n,s,a,"throw",t)}s(void 0)}))}}function $u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,tc(i.key),i)}}function tc(t){var e=function(t,e){if("object"!=Ku(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Ku(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ku(e)?e:e+""}function ec(t,e,r){return e=ic(e),function(t,e){if(e&&("object"==Ku(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,rc()?Reflect.construct(e,r||[],ic(t).constructor):e.apply(t,r))}function rc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(rc=function(){return!!t})()}function ic(t){return ic=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ic(t)}function nc(t,e){return nc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nc(t,e)}var oc=function(t){function e(t,r,i,n,o,s,a,h){var u,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]&&arguments[9],f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=ec(this,e,[t,r,i])).rectWidth=n,u.rectHeight=o,u.imageKey=s,u.progressCapH=h,u.capKey=a,u.canReverse=l,u.direction=f,u.currentProgress=c,u.create(),u.setProgress(u.currentProgress),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nc(t,e)}(e,t),r=e,n=[{key:"create",value:(a=Qu(Zu().mark((function t(){var e,r;return Zu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=new(i().GameObjects.Sprite)(this.scene,0,this.rectHeight/2,this.imageKey),this.add(e),e.setOrigin(.5,1),r=new(i().GameObjects.Sprite)(this.scene,0,this.rectHeight/2,this.capKey),this.add(r),r.setOrigin(.5,1),this.module={progressLine:e,cap:r};case 7:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"setProgress",value:function(t){this.currentProgress=t,this.drawRectProgress(t)}},{key:"updateProgress",value:(s=Qu(Zu().mark((function t(e,r,i){var n;return Zu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.currentProgress,this.canReverse){t.next=6;break}if(!(e<n)){t.next=6;break}return t.next=5,this.showProgress(n,100,r,i);case 5:n=0;case 6:return this.currentProgress=e,t.next=9,this.showProgress(n,this.currentProgress,r,i);case 9:if(1!=this.direction){t.next=13;break}return t.abrupt("return",{x:-this.rectWidth/2+e/100*this.rectWidth,y:-this.rectHeight/2});case 13:return t.abrupt("return",{x:-this.rectWidth/2,y:-this.rectHeight/2+e/100*this.rectHeight});case 14:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return s.apply(this,arguments)})},{key:"dropProgress",value:function(){this.currentProgress=0,this.drawRectProgress(0)}},{key:"drawRectProgress",value:function(t){1==this.direction?this.drawRect(t/100*this.rectWidth):this.drawRect(t/100*this.rectHeight)}},{key:"drawRect",value:function(t){var e=this.module.progressLine;1==this.direction?e.setDisplaySize(t,this.rectHeight):(e.setDisplaySize(this.rectWidth,t-this.progressCapH),this.module.cap.setPosition(0,this.rectHeight/2-t+this.progressCapH))}},{key:"showProgress",value:(o=Qu(Zu().mark((function t(e,r){var i,n,o=this,s=arguments;return Zu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:250,n=s.length>3&&void 0!==s[3]?s[3]:0,t.abrupt("return",new Promise((function(t){o.scene.tweens.addCounter({from:e,to:r,ease:"Linear",duration:i,delay:n,repeat:0,yoyo:!1,onUpdate:function(t,e){o.drawRectProgress(t.getValue())},onComplete:function(){t()}})})));case 3:case"end":return t.stop()}}),t)}))),function(t,e){return o.apply(this,arguments)})}],n&&$u(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s,a}(i().GameObjects.Container);function sc(t){return sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sc(t)}function ac(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,hc(i.key),i)}}function hc(t){var e=function(t,e){if("object"!=sc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=sc(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sc(e)?e:e+""}function uc(t,e,r){return e=fc(e),function(t,e){if(e&&("object"==sc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,cc()?Reflect.construct(e,r||[],fc(t).constructor):e.apply(t,r))}function cc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(cc=function(){return!!t})()}function lc(){return lc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=fc(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},lc.apply(null,arguments)}function fc(t){return fc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fc(t)}function pc(t,e){return pc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pc(t,e)}var dc=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=uc(this,e,[t,r,i])).intervals=[],n.assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pc(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){this.addProgressBarBack();var t=this.intervalsData.length*(this.intervalHeight+this.intervalHDistance),e=new oc(this.scene,-this.scene.cameras.main.width/2+80,this.topOffset+t/2+this.intervalHeight/2,35,t,"fortunometr_progress_bar_img","fortunometr_progress_bar_img_cup",17,this.currentProgress,!1,-1);this.add(e),this.addColumns(),this.addIntervals(),this.scene.game.events.on("fortunametr_update",this.onFortunametrUpdate,this),this.modules={bar:e}}},{key:"addProgressBarBack",value:function(){for(var t=Math.round(this.allHeight/400)+1,e=0;e<t;e++){var r=new(i().GameObjects.Sprite)(this.scene,-this.scene.cameras.main.width/2+80,this.allHeight-400*e,"fortunometr_progress_bar_back_part");this.add(r),r.setOrigin(.5,1)}}},{key:"addColumns",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,-this.scene.cameras.main.width/2,this.allHeight+125,"fortunometr_progress_bar_bg");this.add(t),t.setOrigin(0,1);for(var e=Math.round((this.allHeight-790)/390)+1,r=0;r<e;r++){var n=new(i().GameObjects.Sprite)(this.scene,-this.scene.cameras.main.width/2,t.y-790-390*r,"fortunometr_progress_bar_bg_part");this.add(n),n.setOrigin(0,1)}}},{key:"currentProgress",get:function(){return this.scene.game.storage.userDataFortuna/this.maxIntervalCount*100}},{key:"maxIntervalCount",get:function(){var t=0;return this.intervalsData.forEach((function(e){e.fortune_required>t&&(t=e.fortune_required)})),t}},{key:"intervalsData",get:function(){return this.scene.game.storage.generalDataFortunometr}},{key:"addIntervals",value:function(){for(var t=0,e=this.intervalsData.length-1;e>=0;e--){var r=this.intervalsData[e],i=this.topOffset+this.intervalHeight/2+t*(this.intervalHeight+this.intervalHDistance),n=new qu(this.scene,0,i,this.intervalWidth,this.intervalHeight,r);this.add(n),this.intervals.push(n),t++}}},{key:"onFortunametrUpdate",value:function(){this.modules.bar.updateProgress(this.currentProgress,1e3),this.intervals.forEach((function(t){t.updateUI()}))}},{key:"topOffset",get:function(){return 50}},{key:"intervalWDistance",get:function(){return 50}},{key:"intervalHDistance",get:function(){return 50}},{key:"intervalWidth",get:function(){return 489}},{key:"intervalHeight",get:function(){return 138}},{key:"allWidth",get:function(){return this.scene.cameras.main.width}},{key:"allHeight",get:function(){return this.topOffset+this.intervalsData.length*(this.intervalHeight+this.intervalHDistance)}},{key:"destroy",value:function(){this.scene.game.events.off("fortunametr_update",this.onFortunametrUpdate,this),lc(fc(e.prototype),"destroy",this).call(this)}}])&&ac(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function vc(t){return vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vc(t)}function yc(){yc=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==vc(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(vc(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function gc(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function mc(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,xc(i.key),i)}}function xc(t){var e=function(t,e){if("object"!=vc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=vc(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vc(e)?e:e+""}function bc(t,e,r){return e=Ec(e),function(t,e){if(e&&("object"==vc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wc()?Reflect.construct(e,r||[],Ec(t).constructor):e.apply(t,r))}function wc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wc=function(){return!!t})()}function Ec(t){return Ec=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ec(t)}function Tc(t,e){return Tc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Tc(t,e)}var Sc=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bc(this,e,[t,r,i])).assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tc(t,e)}(e,t),r=e,n=[{key:"assemble",value:(o=yc().mark((function t(){var e,r;return yc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("[Fortunometr] create"),e=new(i().GameObjects.Sprite)(this.scene,0,0,"section_bg_green"),this.add(e),e.setDisplaySize(this.scene.cameras.main.width,this.scene.cameras.main.height),r=new(i().GameObjects.Sprite)(this.scene,0,this.scene.cameras.main.height/2-200,"fortunometr_bg"),this.add(r),r.setOrigin(.5,1),this.addIntervals(),this.addTopPanel();case 9:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(r,i){var n=o.apply(t,e);function s(t){gc(n,r,i,s,a,"next",t)}function a(t){gc(n,r,i,s,a,"throw",t)}s(void 0)}))},function(){return s.apply(this,arguments)})},{key:"addTopPanel",value:function(){var t=new(i().GameObjects.Text)(this.scene,0,-this.scene.cameras.main.height/2+100+50,this.nameStr,{fontFamily:_,fontSize:"40px",color:"#FFFFFF",align:"center"});t.setOrigin(.5),this.add(t);var e=new(i().GameObjects.Graphics)(this.scene,{x:0,y:-this.scene.cameras.main.height/2+100+150});this.add(e),e.fillStyle(4210752,1),e.fillRect(-350,-60,700,120);var r=new(i().GameObjects.Text)(this.scene,e.x,e.y,this.descriptionStr,{fontFamily:_,fontSize:"26px",color:"#FFFFFF",align:"center",wordWrap:{width:600,useAdvancedWrap:!0}});r.setOrigin(.5),this.add(r)}},{key:"nameStr",get:function(){return this.scene.game.localization.getText("fortunometr")}},{key:"descriptionStr",get:function(){return this.scene.game.localization.getText("fortunometr_description")}},{key:"addIntervals",value:function(){var t=new dc(this.scene,0,0),e=this.scene.cameras.main.height-335-200,r=t.allWidth,i=new Rs(this.scene,0,-this.scene.cameras.main.height/2+335+e/2,t,t.allWidth,t.allHeight,r,e);return this.add(i),i.setToBot(),t}}],n&&mc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}($s);function _c(t){return _c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_c(t)}function Oc(){Oc=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==_c(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(_c(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Pc(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Mc(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ac(i.key),i)}}function Ac(t){var e=function(t,e){if("object"!=_c(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=_c(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_c(e)?e:e+""}function Lc(t,e,r){return e=Rc(e),function(t,e){if(e&&("object"==_c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Cc()?Reflect.construct(e,r||[],Rc(t).constructor):e.apply(t,r))}function Cc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Cc=function(){return!!t})()}function Rc(t){return Rc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rc(t)}function kc(t,e){return kc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kc(t,e)}var Fc=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Lc(this,e,[t,r,i])).assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kc(t,e)}(e,t),r=e,n=[{key:"assemble",value:(o=Oc().mark((function t(){var e,r;return Oc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("[Airdrop] create"),e=new(i().GameObjects.Sprite)(this.scene,0,0,"section_bg_green"),this.add(e),e.setDisplaySize(this.scene.cameras.main.width,this.scene.cameras.main.height),r=new(i().GameObjects.Sprite)(this.scene,0,0,"airdrop_bg"),this.add(r);case 6:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(r,i){var n=o.apply(t,e);function s(t){Pc(n,r,i,s,a,"next",t)}function a(t){Pc(n,r,i,s,a,"throw",t)}s(void 0)}))},function(){return s.apply(this,arguments)})}],n&&Mc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}($s);function Ic(t){return Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ic(t)}function Dc(){Dc=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Ic(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Ic(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function jc(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Bc(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Nc(i.key),i)}}function Nc(t){var e=function(t,e){if("object"!=Ic(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Ic(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ic(e)?e:e+""}function Gc(t,e,r){return e=zc(e),function(t,e){if(e&&("object"==Ic(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Uc()?Reflect.construct(e,r||[],zc(t).constructor):e.apply(t,r))}function Uc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Uc=function(){return!!t})()}function Yc(){return Yc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=zc(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},Yc.apply(null,arguments)}function zc(t){return zc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zc(t)}function Xc(t,e){return Xc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xc(t,e)}var Vc=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Gc(this,e,[t,r,i])).currentSection=!1,n.busy=!1,n.assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xc(t,e)}(e,t),r=e,i=[{key:"assemble",value:function(){this.currentSection=this.createSection(3,0),this.scene.game.events.on("sections_change",this.changeSection,this)}},{key:"createSection",value:function(t,e){var r=!1;switch(t){case 1:r=new ua(this.scene,e,t);break;case 2:r=new th(this.scene,e,t);break;case 3:r=new Lu(this.scene,e,t);break;case 4:r=new Sc(this.scene,e,t);break;case 5:r=new Fc(this.scene,e,t)}return this.add(r),r}},{key:"changeSection",value:(n=Dc().mark((function t(e){var r,i,n,o;return Dc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.busy){t.next=2;break}return t.abrupt("return");case 2:if(this.currentSection.id!=e){t.next=4;break}return t.abrupt("return");case 4:return this.busy=!0,r=this.currentSection,i=this.scene.cameras.main.width,n=-1,e>r.id&&(n=1),this.currentSection=this.createSection(e,n*i),o=[],r&&o.push(r.disappearance(-n)),o.push(this.currentSection.appearance()),this.scene.game.events.emit("section_bar_on_section_change",e),t.next=16,Promise.all(o);case 16:this.busy=!1;case 17:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function s(t){jc(o,r,i,s,a,"next",t)}function a(t){jc(o,r,i,s,a,"throw",t)}s(void 0)}))},function(t){return o.apply(this,arguments)})},{key:"destroy",value:function(){this.scene.game.events.off("sections_change",this.changeSection,this),Yc(zc(e.prototype),"destroy",this).call(this)}}],i&&Bc(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,n,o}(i().GameObjects.Container);function Wc(t){return Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wc(t)}function Hc(){Hc=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Wc(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Wc(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function qc(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Kc(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Zc(i.key),i)}}function Zc(t){var e=function(t,e){if("object"!=Wc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Wc(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Wc(e)?e:e+""}function Jc(t,e,r){return e=$c(e),function(t,e){if(e&&("object"==Wc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Qc()?Reflect.construct(e,r||[],$c(t).constructor):e.apply(t,r))}function Qc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Qc=function(){return!!t})()}function $c(t){return $c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$c(t)}function tl(t,e){return tl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tl(t,e)}var el=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Jc(this,e,[t,0,0])).assemble(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tl(t,e)}(e,t),r=e,i=[{key:"assemble",value:function(){this.startUpdateGetProfit()}},{key:"startUpdateGetProfit",value:function(){var t=this;this.scene.time.addEvent({delay:1e4,callback:function(){t.updateProfit()},loop:!0})}},{key:"updateProfit",value:(n=Hc().mark((function t(){return Hc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.scene.game.storage.updateProfit();case 2:this.scene.game.events.emit("coins_update");case 3:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function s(t){qc(o,r,i,s,a,"next",t)}function a(t){qc(o,r,i,s,a,"throw",t)}s(void 0)}))},function(){return o.apply(this,arguments)})}],i&&Kc(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,n,o}(i().GameObjects.Container);function rl(t){return rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rl(t)}function il(){il=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==rl(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(rl(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function nl(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function ol(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){nl(o,i,n,s,a,"next",t)}function a(t){nl(o,i,n,s,a,"throw",t)}s(void 0)}))}}function sl(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,al(i.key),i)}}function al(t){var e=function(t,e){if("object"!=rl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=rl(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rl(e)?e:e+""}function hl(t,e,r){return e=cl(e),function(t,e){if(e&&("object"==rl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ul()?Reflect.construct(e,r||[],cl(t).constructor):e.apply(t,r))}function ul(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ul=function(){return!!t})()}function cl(t){return cl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cl(t)}function ll(t,e){return ll=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ll(t,e)}var fl=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),hl(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ll(t,e)}(e,t),r=e,i=[{key:"preload",value:function(){}},{key:"create",value:(o=ol(il().mark((function t(){var e,r;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.cameras.main.setBackgroundColor("#000000"),console.log("[Game] scene create"),e=new el(this),this.add.existing(e),r=new Vc(this,this.cameras.main.centerX,this.cameras.main.centerY),this.add.existing(r),this.scene.launch("GUI"),this.scene.launch("Popup"),this.scene.launch("Effects"),this.start();case 10:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"start",value:(n=ol(il().mark((function t(){var e=this;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(this,100);case 2:return t.next=4,new Promise((function(t){e.game.events.emit("popup_open","get_offline_profit",(function(){t()}),{})}));case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],i&&sl(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,n,o}(i().Scene);function pl(t){return pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pl(t)}function dl(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,vl(i.key),i)}}function vl(t){var e=function(t,e){if("object"!=pl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=pl(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pl(e)?e:e+""}function yl(t,e,r){return e=xl(e),function(t,e){if(e&&("object"==pl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gl()?Reflect.construct(e,r||[],xl(t).constructor):e.apply(t,r))}function gl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gl=function(){return!!t})()}function ml(){return ml="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=xl(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},ml.apply(null,arguments)}function xl(t){return xl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xl(t)}function bl(t,e){return bl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bl(t,e)}var wl=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=yl(this,e,[t,r,i])).status=!1,o.getStatusFuntion=n,o.assemble(),o.updateStatus(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bl(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,0,0,"icon_notification");this.add(t),this.modules={icon:t},this.scene.game.events.on("notification_update",this.updateStatus,this)}},{key:"updateStatus",value:function(){var t=this.getStatusFuntion();this.status=t,this.setVisible(this.status)}},{key:"destroy",value:function(){this.scene.game.events.off("notification_update",this.updateStatus,this),ml(xl(e.prototype),"destroy",this).call(this)}}])&&dl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function El(t){return El="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},El(t)}function Tl(){Tl=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==El(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(El(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Sl(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function _l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ol(i.key),i)}}function Ol(t){var e=function(t,e){if("object"!=El(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=El(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==El(e)?e:e+""}function Pl(t,e,r){return e=Al(e),function(t,e){if(e&&("object"==El(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ml()?Reflect.construct(e,r||[],Al(t).constructor):e.apply(t,r))}function Ml(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ml=function(){return!!t})()}function Al(t){return Al=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Al(t)}function Ll(t,e){return Ll=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ll(t,e)}var Cl=function(t){function e(t,r,i,n,o,s){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Pl(this,e,[t,r,i])).id=s,a.buttonWidth=n,a.buttonHeight=o,a.isCurrent=!1,a.assemble(),a.currentUpdate(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ll(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(){var t=this,e=new(i().GameObjects.Container)(this.scene,0,0);this.add(e);var r=new(i().GameObjects.Sprite)(this.scene,0,0,"section_bar_button_bg");e.add(r);var n=new(i().GameObjects.Sprite)(this.scene,0,24,this.iconKey);e.add(n),n.setAlpha(.2);var o=new(i().GameObjects.Sprite)(this.scene,0,20,this.iconKey);e.add(o);var s=new(i().GameObjects.Text)(this.scene,0,-30,this.textStr,{fontFamily:_,fontSize:"20px",color:"#FFFFFF",align:"center"});s.setOrigin(.5,1),e.add(s);var a=new wl(this.scene,35,35,(function(){return t.getNotificationStatus()}));this.add(a);var h=new(i().Geom.Rectangle)(-this.buttonWidth/2,-this.buttonHeight/2,this.buttonWidth,this.buttonHeight),u=i().Geom.Rectangle.Contains,c=!1,l=!1;this.setInteractive({hitArea:h,hitAreaCallback:u,useHandCursor:!0}),this.on("pointerdown",(function(){l=!0})),this.on("pointerover",(function(){c=!0})),this.on("pointerout",(function(){c=!1,l=!1})),this.on("pointerup",function(){var e,r=(e=Tl().mark((function e(r){return Tl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.busy){e.next=2;break}return e.abrupt("return",!1);case 2:t.busy=!0,c&&l&&t.scene.game.events.emit("sections_change",t.id),t.busy=!1;case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function s(t){Sl(o,i,n,s,a,"next",t)}function a(t){Sl(o,i,n,s,a,"throw",t)}s(void 0)}))});return function(t){return r.apply(this,arguments)}}(),this),this.modules={bg:r,shade:n,icon:o,text:s,buttonContainer:e}}},{key:"getNotificationStatus",value:function(){var t=this,e=!1;switch(this.id){case 1:this.scene.game.storage.userDataCollections.forEach((function(t){t.completed&&!t.received&&(e=!0)}));break;case 4:this.scene.game.storage.generalDataFortunometr.forEach((function(r){-1==t.scene.game.storage.userDataFortunometrReceivedIntervals.indexOf(r.id)&&t.scene.game.storage.userDataFortuna>=r.fortune_required&&(e=!0)}))}return e}},{key:"iconKey",get:function(){return"section_bar_button_"+this.id}},{key:"textStr",get:function(){var t="section_bar_button_";switch(this.id){case 1:t+="collection";break;case 2:t+="helpers";break;case 3:t+="play";break;case 4:t+="fortuna";break;case 5:t+="airdrop"}return this.scene.game.localization.getText(t)}},{key:"currentUpdate",value:function(){this.modules.bg.setVisible(!1),this.modules.shade.setVisible(!1),this.modules.text.setFontSize("18px"),this.modules.text.setAlpha(1),this.modules.buttonContainer.setAlpha(.4),this.isCurrent&&(this.modules.bg.setVisible(!0),this.modules.shade.setVisible(!0),this.modules.text.setFontSize("20px"),this.modules.text.setAlpha(.8),this.modules.buttonContainer.setAlpha(1))}},{key:"changeCurrent",value:function(t){this.isCurrent=t,this.currentUpdate(),this.scene.game.storage.updateCoins()}}],n&&_l(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Rl(t){return Rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(t)}function kl(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Fl(i.key),i)}}function Fl(t){var e=function(t,e){if("object"!=Rl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Rl(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Rl(e)?e:e+""}function Il(t,e,r){return e=Bl(e),function(t,e){if(e&&("object"==Rl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Dl()?Reflect.construct(e,r||[],Bl(t).constructor):e.apply(t,r))}function Dl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Dl=function(){return!!t})()}function jl(){return jl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Bl(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},jl.apply(null,arguments)}function Bl(t){return Bl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bl(t)}function Nl(t,e){return Nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nl(t,e)}var Gl=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Il(this,e,[t,r,i])).buttons=[],n.assemble(),n.onSectionChange(3),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nl(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,0,0,"section_bar_bg");this.add(t),this.addButtons(),this.scene.game.events.on("section_bar_on_section_change",this.onSectionChange,this)}},{key:"onSectionChange",value:function(t){this.buttons.forEach((function(e){e.changeCurrent(e.id===t)}))}},{key:"addButtons",value:function(){for(var t=0;t<5;t++){var e=135*t-270,r=t+1,i=new Cl(this.scene,e,0,125,125,r);this.add(i),this.buttons.push(i)}}},{key:"destroy",value:function(){this.scene.game.events.off("section_bar_on_section_change",this.onSectionChange,this),jl(Bl(e.prototype),"destroy",this).call(this)}}])&&kl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Ul(t){return Ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ul(t)}function Yl(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,zl(i.key),i)}}function zl(t){var e=function(t,e){if("object"!=Ul(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Ul(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ul(e)?e:e+""}function Xl(t,e,r){return e=Hl(e),function(t,e){if(e&&("object"==Ul(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Vl()?Reflect.construct(e,r||[],Hl(t).constructor):e.apply(t,r))}function Vl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Vl=function(){return!!t})()}function Wl(){return Wl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Hl(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},Wl.apply(null,arguments)}function Hl(t){return Hl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hl(t)}function ql(t,e){return ql=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ql(t,e)}var Kl=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Xl(this,e,[t,r,i])).assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ql(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,0,0,"coins_bg");this.add(t);var e=new(i().GameObjects.Sprite)(this.scene,-150,0,"coin_icon");this.add(e),e.setDisplaySize(50,50);var r=new(i().GameObjects.Text)(this.scene,0,-1,this.count,{fontFamily:_,fontSize:"28px",color:"#FFFFFF",align:"center"});r.setOrigin(.5,.5),this.add(r);var n=new(i().GameObjects.Text)(this.scene,0,-35,this.profit,{fontFamily:_,fontSize:"24px",color:"#FFFFFF",align:"center"});n.setOrigin(.5,.5),this.add(n),this.scene.game.events.on("coins_update",this.onCoinsUpdate,this),this.modules={bg:t,icon:e,text:r,profitText:n}}},{key:"count",get:function(){return l(Math.trunc(this.scene.game.storage.userDataCoins))}},{key:"profit",get:function(){return"Profit per hour: "+l(this.scene.game.storage.getProfitPerHour())}},{key:"onCoinsUpdate",value:function(){this.modules.text.setText(this.count),this.modules.profitText.setText(this.profit)}},{key:"destroy",value:function(){this.scene.game.events.off("coins_update",this.onCoinsUpdate,this),Wl(Hl(e.prototype),"destroy",this).call(this)}}])&&Yl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Zl(t){return Zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zl(t)}function Jl(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ql(i.key),i)}}function Ql(t){var e=function(t,e){if("object"!=Zl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Zl(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zl(e)?e:e+""}function $l(t,e,r){return e=ef(e),function(t,e){if(e&&("object"==Zl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,tf()?Reflect.construct(e,r||[],ef(t).constructor):e.apply(t,r))}function tf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tf=function(){return!!t})()}function ef(t){return ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ef(t)}function rf(t,e){return rf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rf(t,e)}var nf=function(t){function e(t,r,i,n,o,s,a){var h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(h=$l(this,e,[t,r,i])).assemble(s,a,n,o),h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rf(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(t,e,r,n){var o=new on(this.scene,0,0,r,n,15,5587034,12351167,15571954,16777215,0,t);this.add(o);var s=new(i().GameObjects.Text)(this.scene,o.x,o.y,e,{fontFamily:_,fontSize:"28px",color:"#FFFFFF",align:"center"});s.setOrigin(.5),this.add(s),this.modules={bar:o,text:s}}},{key:"updateProgress",value:function(t,e){t>100&&(t=100),this.modules.bar.updateProgress(t,1e3),this.modules.text.setText(e)}}])&&Jl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function of(t){return of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(t)}function sf(){sf=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==of(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(of(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function af(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function hf(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){af(o,i,n,s,a,"next",t)}function a(t){af(o,i,n,s,a,"throw",t)}s(void 0)}))}}function uf(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,cf(i.key),i)}}function cf(t){var e=function(t,e){if("object"!=of(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=of(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==of(e)?e:e+""}function lf(t,e,r){return e=df(e),function(t,e){if(e&&("object"==of(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ff()?Reflect.construct(e,r||[],df(t).constructor):e.apply(t,r))}function ff(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ff=function(){return!!t})()}function pf(){return pf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=df(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},pf.apply(null,arguments)}function df(t){return df=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},df(t)}function vf(t,e){return vf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vf(t,e)}var yf=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=lf(this,e,[t,r,i])).lastLevel=n.level,n.assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vf(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(){var t=this,e=new nf(this.scene,0,0,246,37,this.currentProgress,this.currentProgressStr);this.add(e);var r=new(i().GameObjects.Sprite)(this.scene,-123,0,"fortuna_icon");this.add(r);var n=new(i().GameObjects.Text)(this.scene,r.x+10,r.y+25,this.level,{fontFamily:_,fontSize:"28px",color:"#FFFFFF",align:"center"});n.setOrigin(.5,.5),this.add(n);var o=new(i().GameObjects.Text)(this.scene,0,-35,this.levelTitleStr,{fontFamily:_,fontSize:"24px",color:"#FFFFFF",align:"center"});o.setOrigin(.5,.5),this.add(o);var s=new Hi(this.scene,150,0,"btn_test",(function(){t.scene.game.storage.addExperience(2),t.scene.game.events.emit("fortuna_update")}));this.add(s),this.scene.game.events.on("fortuna_update",this.onFortunaUpdate,this),this.modules={icon:r,levelText:n,progressBar:e,levelTitle:o}}},{key:"levelTitleStr",get:function(){return this.scene.game.storage.displayName+":"+this.scene.game.localization.getText("level_title_"+this.level)}},{key:"currentProgress",get:function(){return this.nextLevel?this.experience/(this.nextLevel.experience-this.currentLevel.experience)*100:0}},{key:"currentProgressStr",get:function(){return this.nextLevel?this.experience+"/"+(this.nextLevel.experience-this.currentLevel.experience):""}},{key:"experience",get:function(){var t=this,e=this.scene.game.storage.generalDataLevels,r=this.scene.game.storage.experience;return e.forEach((function(e){e.level==t.level&&t.scene.game.storage.experience>=e.experience&&(r=t.scene.game.storage.experience-e.experience)})),r}},{key:"currentLevelFromExperience",get:function(){var t=this,e=this.scene.game.storage.generalDataLevels,r=this.level;return e.forEach((function(e){t.scene.game.storage.experience>=e.experience&&(r=e.level)})),r}},{key:"checkLevelUp",value:function(){return!(!this.nextLevel||this.level===this.currentLevelFromExperience)}},{key:"currentLevel",get:function(){var t=this,e=this.scene.game.storage.generalDataLevels,r=!1;return e.forEach((function(e){t.level==e.level&&(r=e)})),r}},{key:"nextLevel",get:function(){var t=this,e=this.scene.game.storage.generalDataLevels,r=!1;return e.forEach((function(e){t.level+1==e.level&&(r=e)})),r}},{key:"level",get:function(){return this.scene.game.storage.level}},{key:"onFortunaUpdate",value:(s=hf(sf().mark((function t(){return sf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.checkLevelUp()){t.next=4;break}return this.modules.progressBar.updateProgress(this.currentProgress,""),t.next=4,this.onLevelUp();case 4:return t.next=6,this.modules.progressBar.updateProgress(this.currentProgress,this.currentProgressStr);case 6:this.modules.levelText.setText(this.level),this.modules.levelTitle.setText(this.levelTitleStr),this.scene.game.events.emit("notification_update");case 9:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"onLevelUp",value:(o=hf(sf().mark((function t(){var e=this;return sf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){var r={level:e.level};e.scene.game.events.emit("popup_open","level_up",(function(){t()}),r)}));case 2:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"destroy",value:function(){this.scene.game.events.off("fortuna_update",this.onFortunaUpdate,this),pf(df(e.prototype),"destroy",this).call(this)}}],n&&uf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}(i().GameObjects.Container);function gf(t){return gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gf(t)}function mf(){mf=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==gf(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(gf(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function xf(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function bf(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,wf(i.key),i)}}function wf(t){var e=function(t,e){if("object"!=gf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=gf(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gf(e)?e:e+""}function Ef(t,e,r){return e=Sf(e),function(t,e){if(e&&("object"==gf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Tf()?Reflect.construct(e,r||[],Sf(t).constructor):e.apply(t,r))}function Tf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Tf=function(){return!!t})()}function Sf(t){return Sf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sf(t)}function _f(t,e){return _f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_f(t,e)}var Of=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ef(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_f(t,e)}(e,t),r=e,i=[{key:"preload",value:function(){}},{key:"create",value:(n=mf().mark((function t(){var e,r,i;return mf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("[GUI] scene create"),e=new Gl(this,this.cameras.main.centerX,this.cameras.main.height-90),this.add.existing(e),r=new Kl(this,this.cameras.main.width-180,60),this.add.existing(r),i=new yf(this,165,60),this.add.existing(i);case 7:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function s(t){xf(o,r,i,s,a,"next",t)}function a(t){xf(o,r,i,s,a,"throw",t)}s(void 0)}))},function(){return o.apply(this,arguments)})}],i&&bf(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,n,o}(i().Scene);function Pf(t){return Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pf(t)}function Mf(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Af(i.key),i)}}function Af(t){var e=function(t,e){if("object"!=Pf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Pf(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pf(e)?e:e+""}function Lf(t,e,r){return e=Rf(e),function(t,e){if(e&&("object"==Pf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Cf()?Reflect.construct(e,r||[],Rf(t).constructor):e.apply(t,r))}function Cf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Cf=function(){return!!t})()}function Rf(t){return Rf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rf(t)}function kf(t,e){return kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kf(t,e)}var Ff=function(t){function e(t,r,i,n,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=Lf(this,e,[t,r,i])).assemble(n,o),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kf(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(t,e){var r=new on(this.scene,0,0,500,30,5,263699,7191363,7191363,16777215,0,t);this.add(r);var n=new(i().GameObjects.Text)(this.scene,r.x,r.y,e,{fontFamily:_,fontSize:"30px",color:"#FFFFFF",align:"center"});n.setOrigin(.5),this.add(n),this.modules={bar:r,text:n}}},{key:"updateProgress",value:function(t,e){this.modules.bar.updateProgress(t,1e3),this.modules.text.setText(e)}}])&&Mf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function If(t){return If="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(t)}function Df(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,jf(i.key),i)}}function jf(t){var e=function(t,e){if("object"!=If(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=If(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==If(e)?e:e+""}function Bf(t,e,r){return e=Gf(e),function(t,e){if(e&&("object"==If(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Nf()?Reflect.construct(e,r||[],Gf(t).constructor):e.apply(t,r))}function Nf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Nf=function(){return!!t})()}function Gf(t){return Gf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gf(t)}function Uf(t,e){return Uf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Uf(t,e)}var Yf=function(t){function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Bf(this,e,[t,0,0])).showAlpha=.9,r.assemble(i),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uf(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(t){var e=this.scene.cameras.main.width,r=this.scene.cameras.main.height,n=this.scene.add.graphics();this.add(n),n.fillStyle(0,1),n.fillRect(-e/2,-r/2,e,r),n.setInteractive(new(i().Geom.Rectangle)(-e/2,-r/2,e,r),i().Geom.Rectangle.Contains),n.on("pointerdown",(function(){t&&t()})),this.setAlpha(0)}},{key:"show",value:function(){var t=this;return new Promise((function(e){t.scene.tweens.add({targets:t,alpha:t.showAlpha,duration:100,onComplete:e,onCompleteParams:t})}))}},{key:"hide",value:function(){var t=this;return new Promise((function(e){t.scene.tweens.add({targets:t,alpha:0,duration:100,onComplete:e,onCompleteParams:t})}))}}])&&Df(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function zf(t){return zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(t)}function Xf(){Xf=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==zf(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(zf(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Vf(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Wf(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Vf(o,i,n,s,a,"next",t)}function a(t){Vf(o,i,n,s,a,"throw",t)}s(void 0)}))}}function Hf(t,e){return qf.apply(this,arguments)}function qf(){return qf=Wf(Xf().mark((function t(e,r){var i,n,o,s=arguments;return Xf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:250,n=s.length>3&&void 0!==s[3]?s[3]:0,o=s.length>4&&void 0!==s[4]?s[4]:Phaser.Math.Easing.Back.Out,t.abrupt("return",new Promise((function(t){e.tweens.add({targets:r,scaleX:1,scaleY:1,duration:i,delay:n,ease:o,onComplete:function(){return t()}})})));case 4:case"end":return t.stop()}}),t)}))),qf.apply(this,arguments)}function Kf(t,e){return Zf.apply(this,arguments)}function Zf(){return Zf=Wf(Xf().mark((function t(e,r){var i,n,o,s=arguments;return Xf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:250,n=s.length>3&&void 0!==s[3]?s[3]:0,o=s.length>4&&void 0!==s[4]?s[4]:Phaser.Math.Easing.Back.In,t.abrupt("return",new Promise((function(t){e.tweens.add({targets:r,scaleX:0,scaleY:0,duration:i,delay:n,ease:o,onComplete:function(){return t()}})})));case 4:case"end":return t.stop()}}),t)}))),Zf.apply(this,arguments)}function Jf(t,e){return Qf.apply(this,arguments)}function Qf(){return Qf=Wf(Xf().mark((function t(e,r){var i,n,o,s=arguments;return Xf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:250,n=s.length>3&&void 0!==s[3]?s[3]:0,o=s.length>4&&void 0!==s[4]?s[4]:Phaser.Math.Easing.Linear,t.abrupt("return",new Promise((function(t){e.tweens.add({targets:r,alpha:1,duration:i,delay:n,ease:o,onComplete:function(){return t()}})})));case 4:case"end":return t.stop()}}),t)}))),Qf.apply(this,arguments)}function $f(t,e){return tp.apply(this,arguments)}function tp(){return tp=Wf(Xf().mark((function t(e,r){var i,n,o,s=arguments;return Xf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:250,n=s.length>3&&void 0!==s[3]?s[3]:0,o=s.length>4&&void 0!==s[4]?s[4]:Phaser.Math.Easing.Linear,t.abrupt("return",new Promise((function(t){e.tweens.add({targets:r,alpha:0,duration:i,delay:n,ease:o,onComplete:function(){return t()}})})));case 4:case"end":return t.stop()}}),t)}))),tp.apply(this,arguments)}function ep(t){return ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(t)}function rp(){rp=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==ep(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ep(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function ip(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function np(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){ip(o,i,n,s,a,"next",t)}function a(t){ip(o,i,n,s,a,"throw",t)}s(void 0)}))}}function op(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,sp(i.key),i)}}function sp(t){var e=function(t,e){if("object"!=ep(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=ep(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ep(e)?e:e+""}function ap(t,e,r){return e=cp(e),function(t,e){if(e&&("object"==ep(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,hp()?Reflect.construct(e,r||[],cp(t).constructor):e.apply(t,r))}function hp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(hp=function(){return!!t})()}function up(){return up="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=cp(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},up.apply(null,arguments)}function cp(t){return cp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cp(t)}function lp(t,e){return lp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lp(t,e)}var fp=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ap(this,e,[t,t.cameras.main.centerX,t.cameras.main.centerY])).scene.add.existing(r),r.resolve=null,r.container=null,r.eventsArray=[],r.addFader(),r.addMainContainer(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lp(t,e)}(e,Phaser.GameObjects.Container),r=e,i=[{key:"open",value:(u=np(rp().mark((function t(){var e,r,i,n=this,o=arguments;return rp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=o.length,r=new Array(e),i=0;i<e;i++)r[i]=o[i];return t.abrupt("return",new Promise(function(){var t=np(rp().mark((function t(e){return rp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.resolve=e,t.next=3,n.preOpen();case 3:return n.inputDisable(),t.next=6,n.show();case 6:return n.inputEnable(),t.next=9,n.onOpen.apply(n,r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"close",value:(h=np(rp().mark((function t(){var e,r,i=arguments;return rp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]&&i[0],r=i.length>1&&void 0!==i[1]&&i[1],this.inputDisable(),t.next=5,this.hide();case 5:if(!r){t.next=8;break}return t.next=8,r();case 8:return t.next=10,this.onClose();case 10:this.fader.destroy(),this.container.destroy(),this.resolve&&this.resolve(e),this.destroy();case 14:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"preOpen",value:(a=np(rp().mark((function t(){return rp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"onOpen",value:(s=np(rp().mark((function t(){return rp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"onClose",value:(o=np(rp().mark((function t(){return rp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"onCreate",value:(n=np(rp().mark((function t(){return rp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"addEvent",value:function(t,e){this.scene.events.on(t,e,this),this.eventsArray.push({name:t,func:e})}},{key:"stopEvent",value:function(t,e){this.scene.events.off(t,e,this)}},{key:"clearEvents",value:function(){for(var t in this.eventsArray){var e=this.eventsArray[t];this.scene.events.off(e.name,e.func,this)}}},{key:"addFader",value:function(t){this.fader=new Yf(this.scene),this.add(this.fader)}},{key:"setFaderShowAlpha",value:function(t){this.fader.showAlpha=t}},{key:"addMainContainer",value:function(){this.container=new Phaser.GameObjects.Container(this.scene,0,0),this.add(this.container),this.container.setScale(0)}},{key:"show",value:function(){var t=np(rp().mark((function t(){return rp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.busy){t.next=2;break}return t.abrupt("return");case 2:return this.busy=!0,t.next=5,this.fader.show();case 5:return t.next=7,Hf(this.scene,this.container);case 7:this.busy=!1;case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"hide",value:function(){var t=np(rp().mark((function t(){return rp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.busy){t.next=2;break}return t.abrupt("return");case 2:return this.busy=!0,t.next=5,Kf(this.scene,this.container);case 5:return t.next=7,this.fader.hide();case 7:this.busy=!1;case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"inputEnable",value:function(){}},{key:"inputDisable",value:function(){}},{key:"destroy",value:function(){this.clearEvents(),up(cp(e.prototype),"destroy",this).call(this)}}],i&&op(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,n,o,s,a,h,u}();function pp(t){return pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pp(t)}function dp(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,vp(i.key),i)}}function vp(t){var e=function(t,e){if("object"!=pp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=pp(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pp(e)?e:e+""}function yp(t,e,r){return e=mp(e),function(t,e){if(e&&("object"==pp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gp()?Reflect.construct(e,r||[],mp(t).constructor):e.apply(t,r))}function gp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gp=function(){return!!t})()}function mp(t){return mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mp(t)}function xp(t,e){return xp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xp(t,e)}i().GameObjects.Container;var bp=function(t){function e(t,r,i,n,o,s,a){var h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(h=yp(this,e,[t,r,i])).collectionId=s,h.cardId=a,h.assemble(n,o),h.updateUI(),h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xp(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(t,e){var r=new(i().GameObjects.Sprite)(this.scene,0,0,this.createPieceTexture(t,e));this.add(r),r.setVisible(!1),console.log("this.hasCard",this.hasCard),this.modules={icon:r}}},{key:"updateUI",value:function(){this.modules.icon.setVisible(!1),this.hasCard&&this.modules.icon.setVisible(!0)}},{key:"createPieceTexture",value:function(t,e){var r=this.scene.add.sprite(0,0,this.iconKey).setOrigin(0);r.setDisplaySize(t,e);var n=this.scene.add.sprite(0,0,this.maskKey).setOrigin(0);n.setDisplaySize(t,e);var o=n.createBitmapMask(n);r.setMask(o);var s=this.scene.add.renderTexture(0,0,t,e);s.draw(r,0,0);var a=s.saveTexture("piece_"+Date.now()+i().Math.Between(1e5,999999));return n.destroy(),r.destroy(),s.destroy(),a}},{key:"hasCard",get:function(){return this.scene.game.storage.getUserDataCollectionCard(this.collectionId,this.cardId)}},{key:"iconKey",get:function(){return"collection_"+this.collectionId+"_icon"}},{key:"maskKey",get:function(){return"collection_mask_"+this.cardId}}])&&dp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function wp(t){return wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(t)}function Ep(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Tp(i.key),i)}}function Tp(t){var e=function(t,e){if("object"!=wp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=wp(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wp(e)?e:e+""}function Sp(t,e,r){return e=Op(e),function(t,e){if(e&&("object"==wp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_p()?Reflect.construct(e,r||[],Op(t).constructor):e.apply(t,r))}function _p(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_p=function(){return!!t})()}function Op(t){return Op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Op(t)}function Pp(t,e){return Pp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pp(t,e)}var Mp=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Sp(this,e,[t,r,i])).assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pp(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,80,0,"collection_complete_icon");this.add(t);var e=new(i().GameObjects.Text)(this.scene,-100,0,this.scene.game.localization.getText("complete"),{fontFamily:_,fontSize:"30px",color:"#FFFFFF",align:"center"});e.setOrigin(0,.5),this.add(e),this.modules={icon:t,text:e}}}])&&Ep(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Ap(t){return Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(t)}function Lp(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Cp(i.key),i)}}function Cp(t){var e=function(t,e){if("object"!=Ap(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Ap(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ap(e)?e:e+""}function Rp(t,e,r){return e=Fp(e),function(t,e){if(e&&("object"==Ap(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,kp()?Reflect.construct(e,r||[],Fp(t).constructor):e.apply(t,r))}function kp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kp=function(){return!!t})()}function Fp(t){return Fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fp(t)}function Ip(t,e){return Ip=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ip(t,e)}var Dp=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Rp(this,e,[t,r,i])).rewards=n,o.assemble(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ip(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=this,e=new(i().GameObjects.Text)(this.scene,-150,0,this.scene.game.localization.getText("reward")+":",{fontFamily:_,fontSize:"20px",color:"#FFFFFF",align:"center"});e.setOrigin(.5,.5),this.add(e),e.setAlpha(.6),this.rewards.forEach((function(e,r){var i=-(310*t.rewards.length/2-150-5)+310*r,n=new An(t.scene,i,0,120,40,e);t.add(n)}))}}])&&Lp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function jp(t){return jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(t)}function Bp(){Bp=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==jp(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(jp(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Np(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Gp(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Np(o,i,n,s,a,"next",t)}function a(t){Np(o,i,n,s,a,"throw",t)}s(void 0)}))}}function Up(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Yp(i.key),i)}}function Yp(t){var e=function(t,e){if("object"!=jp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=jp(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jp(e)?e:e+""}function zp(t,e,r){return e=Wp(e),function(t,e){if(e&&("object"==jp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xp()?Reflect.construct(e,r||[],Wp(t).constructor):e.apply(t,r))}function Xp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xp=function(){return!!t})()}function Vp(){return Vp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Wp(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},Vp.apply(null,arguments)}function Wp(t){return Wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wp(t)}function Hp(t,e){return Hp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hp(t,e)}var qp=function(t){function e(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=zp(this,e,[t])).collectionId=r.collectionId,i.cards=[],i.assemble(),i.updateUI(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hp(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(){var t=this,e=new(i().GameObjects.Sprite)(this.scene,0,0,"collection_popup_bg");this.container.add(e);var r=new Ff(this.scene,0,-390,this.currentProgress,this.currentProgressStr);this.container.add(r);var n=new Mp(this.scene,0,-305);this.container.add(n);var o=new Dp(this.scene,0,-305,this.generalData.rewards);this.container.add(o);var s=new Hi(this.scene,300,-480,"collection_popup_btn_close",(function(){t.close()}));this.container.add(s),s.setTint(8357567);var a=new Hi(this.scene,0,450,"collection_popup_btn_get_reward",(function(){t.onReward()}));this.container.add(a);var h=new(i().GameObjects.Sprite)(this.scene,0,55,"collection_puzzle_border");this.container.add(h),h.setDisplaySize(645,645),this.addCards(0,55,645,645);var u=new Hi(this.scene,0,377.5,"collection_popup_btn_get_card",(function(){t.onGetCard()}));this.container.add(u),this.modules={completed:n,btnGetCard:u,btnReward:a,rewards:o,progressBar:r}}},{key:"updateUI",value:function(){this.modules.completed.setVisible(!1),this.modules.rewards.setVisible(!1),this.modules.btnGetCard.setVisible(!1),this.modules.btnReward.setVisible(!1),this.completed?this.completed&&(this.modules.completed.setVisible(!0),this.received||this.modules.btnReward.setVisible(!0)):(this.modules.btnGetCard.setVisible(!0),this.modules.rewards.setVisible(!0)),this.cards.forEach((function(t){t.updateUI()})),this.modules.progressBar.updateProgress(this.currentProgress,this.currentProgressStr),this.scene.game.events.emit("season_update")}},{key:"generalData",get:function(){return this.scene.game.storage.getGeneralDataCollection(this.collectionId)}},{key:"userData",get:function(){return this.scene.game.storage.getUserDataCollection(this.collectionId)}},{key:"addImage",value:function(t,e,r,n){var o=new(i().GameObjects.Sprite)(this.scene,t,e,this.iconKey);this.container.add(o),o.setDisplaySize(r,n),o.preFX.addColorMatrix().grayscale(1)}},{key:"currentProgress",get:function(){return this.cardsCurrent/this.generalData.pieces*100}},{key:"currentProgressStr",get:function(){return this.cardsCurrent+"/"+this.generalData.pieces}},{key:"cardsCurrent",get:function(){return this.userData?this.userData.pieces.length:0}},{key:"onGetCard",value:(a=Gp(Bp().mark((function t(){var e=this;return Bp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){console.log("there"),e.scene.game.events.emit("popup_open","collection_get_card",(function(r){console.log(r),r&&(e.scene.game.storage.addRandomCard(e.collectionId),e.updateUI()),t()}),{})}));case 2:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"onReward",value:(s=Gp(Bp().mark((function t(){var e=this;return Bp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){var r={collectionId:e.collectionId};e.scene.game.events.emit("popup_open","collection_reward",(function(){e.updateUI(),t()}),r)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"onOpen",value:(o=Gp(Bp().mark((function t(){return Bp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"iconKey",get:function(){return"collection_"+this.generalData.id+"_icon"}},{key:"textStr",get:function(){var t="collection_"+this.generalData.id;return this.scene.game.localization.getText(t)}},{key:"addCards",value:function(t,e,r,i){for(var n=r,o=i,s=0,a=0;a<3;a++)for(var h=0;h<3;h++){var u=s+1,c=new bp(this.scene,t,e,n,o,this.generalData.id,u);this.container.add(c),this.cards.push(c),s++}}},{key:"addCardsOld",value:function(t,e){var r=0,n=[];this.userData.cards.forEach((function(t){t.count>0&&n.push(t)}));for(var o=0;o<3;o++)for(var s=0;s<3;s++){var a=t-203+203*s,h=e-203+203*o;if(n[r]){var u=n[r],c=new bp(this.scene,a,h,198,203,this.userData.id,u.id,this.generalData.color);this.container.add(c),this.cards.push(c),r++}else{var l=new(i().GameObjects.Sprite)(this.scene,a,h,"collection_card_empty_bg");this.container.add(l)}}}},{key:"completed",get:function(){return!!this.userData&&this.userData.completed}},{key:"received",get:function(){return!!this.userData&&this.userData.received}},{key:"destroy",value:function(){Vp(Wp(e.prototype),"destroy",this).call(this)}}],n&&Up(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s,a}(fp);function Kp(t){return Kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(t)}function Zp(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Jp(i.key),i)}}function Jp(t){var e=function(t,e){if("object"!=Kp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Kp(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kp(e)?e:e+""}function Qp(t,e,r){return e=td(e),function(t,e){if(e&&("object"==Kp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$p()?Reflect.construct(e,r||[],td(t).constructor):e.apply(t,r))}function $p(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($p=function(){return!!t})()}function td(t){return td=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},td(t)}function ed(t,e){return ed=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ed(t,e)}var rd=function(t){function e(t,r,n,o,s,a,h,u){var c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=(c=Qp(this,e,[t,r,n])).scene.cameras.main.width,f=c.scene.cameras.main.height,p=c.scene.add.graphics();c.add(p),p.fillStyle(0,.1),p.fillRect(-l/2,-f/2,l,f),p.setInteractive(new(i().Geom.Rectangle)(-l/2,-f/2,l,f),i().Geom.Rectangle.Contains),p.on("pointerdown",(function(){u()}));var d=new(i().GameObjects.Text)(c.scene,s,a,o,h);return d.setOrigin(.5),c.add(d),c.modules={clickRect:p},c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ed(t,e)}(e,t),r=e,(n=[{key:"inputEnable",value:function(){this.modules.clickRect.setInteractive()}},{key:"inputDisable",value:function(){this.modules.clickRect.disableInteractive()}}])&&Zp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function id(t){return id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},id(t)}function nd(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,od(i.key),i)}}function od(t){var e=function(t,e){if("object"!=id(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=id(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==id(e)?e:e+""}function sd(t,e,r){return e=hd(e),function(t,e){if(e&&("object"==id(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ad()?Reflect.construct(e,r||[],hd(t).constructor):e.apply(t,r))}function ad(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ad=function(){return!!t})()}function hd(t){return hd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hd(t)}function ud(t,e){return ud=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ud(t,e)}var cd=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=sd(this,e,[t,r,i])).assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ud(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,80,0,"collection_complete_icon");this.add(t);var e=new(i().GameObjects.Text)(this.scene,-100,0,this.scene.game.localization.getText("complete"),{fontFamily:_,fontSize:"30px",color:"#FFFFFF",align:"center"});e.setOrigin(0,.5),this.add(e),this.modules={icon:t,text:e}}}])&&nd(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function ld(t){return ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ld(t)}function fd(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,pd(i.key),i)}}function pd(t){var e=function(t,e){if("object"!=ld(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=ld(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ld(e)?e:e+""}function dd(t,e,r){return e=yd(e),function(t,e){if(e&&("object"==ld(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vd()?Reflect.construct(e,r||[],yd(t).constructor):e.apply(t,r))}function vd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vd=function(){return!!t})()}function yd(t){return yd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yd(t)}function gd(t,e){return gd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gd(t,e)}var md=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=dd(this,e,[t,r,i])).collectionId=n,o.assemble(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gd(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,0,0,"collection_bg");this.add(t);var e=new(i().GameObjects.Sprite)(this.scene,0,-50,this.iconKey);this.add(e);var r=new cd(this.scene,0,110);this.add(r)}},{key:"generalData",get:function(){return this.scene.game.storage.getGeneralDataCollection(this.collectionId)}},{key:"iconKey",get:function(){return"collection_"+this.collectionId+"_icon"}},{key:"textStr",get:function(){var t="collection_"+this.collectionId;return this.scene.game.localization.getText(t)}}])&&fd(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function xd(t){return xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xd(t)}function bd(){bd=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==xd(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(xd(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function wd(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Ed(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){wd(o,i,n,s,a,"next",t)}function a(t){wd(o,i,n,s,a,"throw",t)}s(void 0)}))}}function Td(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Sd(i.key),i)}}function Sd(t){var e=function(t,e){if("object"!=xd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=xd(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xd(e)?e:e+""}function _d(t,e,r){return e=Pd(e),function(t,e){if(e&&("object"==xd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Od()?Reflect.construct(e,r||[],Pd(t).constructor):e.apply(t,r))}function Od(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Od=function(){return!!t})()}function Pd(t){return Pd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pd(t)}function Md(t,e){return Md=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Md(t,e)}var Ad=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=_d(this,e,[t,r,i])).assemble(n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Md(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(t){var e=new Hi(this.scene,0,0,"collection_popup_btn_empty",Ed(bd().mark((function e(){return bd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:case"end":return e.stop()}}),e)}))));this.add(e);var r=new(i().GameObjects.Text)(this.scene,0,0,"x2",{fontFamily:_,fontSize:"40px",color:"#FFFFFF",align:"center"});r.setOrigin(.5,.5),this.add(r),this.modules={button:e,text:r}}}])&&Td(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Ld(t){return Ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ld(t)}function Cd(){Cd=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Ld(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Ld(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Rd(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function kd(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Rd(o,i,n,s,a,"next",t)}function a(t){Rd(o,i,n,s,a,"throw",t)}s(void 0)}))}}function Fd(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Id(i.key),i)}}function Id(t){var e=function(t,e){if("object"!=Ld(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Ld(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ld(e)?e:e+""}function Dd(t,e,r){return e=Bd(e),function(t,e){if(e&&("object"==Ld(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,jd()?Reflect.construct(e,r||[],Bd(t).constructor):e.apply(t,r))}function jd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(jd=function(){return!!t})()}function Bd(t){return Bd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bd(t)}function Nd(t,e){return Nd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nd(t,e)}var Gd=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Dd(this,e,[t,r,i])).assemble(n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nd(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(t){var e=new Hi(this.scene,0,0,"collection_popup_btn_empty",kd(Cd().mark((function e(){return Cd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:case"end":return e.stop()}}),e)}))));this.add(e);var r=new(i().GameObjects.Text)(this.scene,0,0,this.scene.game.localization.getText("get"),{fontFamily:_,fontSize:"40px",color:"#FFFFFF",align:"center"});r.setOrigin(.5,.5),this.add(r),this.modules={button:e,text:r}}}])&&Fd(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Ud(t){return Ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ud(t)}function Yd(){Yd=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Ud(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Ud(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function zd(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Xd(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){zd(o,i,n,s,a,"next",t)}function a(t){zd(o,i,n,s,a,"throw",t)}s(void 0)}))}}function Vd(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Wd(i.key),i)}}function Wd(t){var e=function(t,e){if("object"!=Ud(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Ud(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ud(e)?e:e+""}function Hd(t,e,r){return e=Kd(e),function(t,e){if(e&&("object"==Ud(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qd()?Reflect.construct(e,r||[],Kd(t).constructor):e.apply(t,r))}function qd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qd=function(){return!!t})()}function Kd(t){return Kd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Kd(t)}function Zd(t,e){return Zd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zd(t,e)}var Jd=function(t){function e(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Hd(this,e,[t])).collectionId=r,i.assemble(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zd(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(){var t=this,e=new(i().GameObjects.Sprite)(this.scene,0,0,"popup_bg");this.container.add(e);var r=new(i().GameObjects.Text)(this.scene,0,-410,this.scene.game.localization.getText("set_completed"),{fontFamily:_,fontSize:"40px",fontStyle:"bold",color:"#FFFFFF",align:"center"});r.setOrigin(.5,0,5),this.container.add(r);var n=new md(this.scene,0,-80,this.collectionId);this.container.add(n);var o=new(i().GameObjects.Text)(this.scene,0,160,this.scene.game.localization.getText("your_reward")+":",{fontFamily:_,fontSize:"30px",color:"#FFFFFF",align:"center"});o.setOrigin(.5,.5),this.container.add(o);var s=new Bu(this.scene,0,220,this.generalData.rewards);if(this.container.add(s),this.modules={},this.generalData.special_type){var a=new Ad(this.scene,130,350,(function(){t.onX2Click()}));this.container.add(a);var h=new Gd(this.scene,-130,350,(function(){t.onClaimClick()}));this.container.add(h)}else{var u=new rd(this.scene,0,0,this.closeTextStr,0,380,{fontFamily:_,fontSize:"30px",color:"#a6aff1",align:"center"},(function(){t.onClaimClick()}));this.container.add(u),this.modules.closeRect=u}}},{key:"onX2Click",value:(u=Xd(Yd().mark((function t(){return Yd().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getReward(!0);case 2:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"onClaimClick",value:(h=Xd(Yd().mark((function t(){return Yd().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getReward(!1);case 2:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"getReward",value:(a=Xd(Yd().mark((function t(){var e,r=arguments;return Yd().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]&&r[0],t.next=3,this.scene.game.storage.getCollectionReward(this.collectionId,e);case 3:this.scene.game.events.emit("season_update"),this.close();case 5:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"onClose",value:(s=Xd(Yd().mark((function t(){return Yd().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.scene.game.events.emit("effects_get_rewards",this.generalData.rewards);case 1:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"onOpen",value:(o=Xd(Yd().mark((function t(){return Yd().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"textStr",get:function(){return this.scene.game.localization.getText("set_completed")}},{key:"closeTextStr",get:function(){return this.scene.game.localization.getText("tap_to_claim")}},{key:"generalData",get:function(){return this.scene.game.storage.getGeneralDataCollection(this.collectionId)}},{key:"inputEnable",value:function(){this.modules.closeRect&&this.modules.closeRect.inputEnable()}},{key:"inputDisable",value:function(){this.modules.closeRect&&this.modules.closeRect.inputDisable()}}],n&&Vd(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s,a,h,u}(fp);function Qd(t){return Qd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(t)}function $d(){$d=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Qd(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Qd(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function tv(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function ev(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){tv(o,i,n,s,a,"next",t)}function a(t){tv(o,i,n,s,a,"throw",t)}s(void 0)}))}}function rv(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,iv(i.key),i)}}function iv(t){var e=function(t,e){if("object"!=Qd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Qd(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qd(e)?e:e+""}function nv(t,e,r){return e=sv(e),function(t,e){if(e&&("object"==Qd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ov()?Reflect.construct(e,r||[],sv(t).constructor):e.apply(t,r))}function ov(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ov=function(){return!!t})()}function sv(t){return sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sv(t)}function av(t,e){return av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},av(t,e)}var hv=function(t){function e(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=nv(this,e,[t])).collectionId=r.collectionId,i.assemble(),i.inputDisable(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&av(t,e)}(e,t),r=e,i=[{key:"assemble",value:function(){}},{key:"onClaimClick",value:(s=ev($d().mark((function t(){var e;return $d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Jd(this.scene,this.collectionId),this.hide(),t.next=4,e.open();case 4:this.close();case 5:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"onOpen",value:(o=ev($d().mark((function t(){return $d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.start();case 2:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"start",value:(n=ev($d().mark((function t(){var e,r,i=this;return $d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.scene.add.spine(0,300,"collection_reward_anim"),this.container.add(e),e.addAnimation(0,"start",!1,0),e.addAnimation(0,"idle",!0,0),t.next=6,a(this.scene,3e3);case 6:r=!1,e.setInteractive({useHandCursor:!0}),e.on("pointerdown",function(){var t=ev($d().mark((function t(n){var o;return $d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=2;break}return t.abrupt("return");case 2:return r=!0,o=i.scene.add.spine(0,300,"fx"),i.container.add(o),o.play("fx",!1),e.play("end",!1),t.next=9,a(i.scene,2e3);case 9:i.onClaimClick();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"closeTextStr",get:function(){return this.scene.game.localization.getText("tap_to_claim")}}],i&&rv(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,n,o,s}(fp);function uv(t){return uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uv(t)}function cv(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,lv(i.key),i)}}function lv(t){var e=function(t,e){if("object"!=uv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=uv(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==uv(e)?e:e+""}function fv(t,e,r){return e=dv(e),function(t,e){if(e&&("object"==uv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pv()?Reflect.construct(e,r||[],dv(t).constructor):e.apply(t,r))}function pv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pv=function(){return!!t})()}function dv(t){return dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dv(t)}function vv(t,e){return vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vv(t,e)}var yv=function(t){function e(t,r,i,n,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=fv(this,e,[t,r,i])).collectionId=o,s.cardId=n,s.assemble(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vv(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){console.log("this.collectionId this.cardId",this.collectionId,this.cardId);var t=this.getPosById(300,300),e=new(i().GameObjects.Sprite)(this.scene,0,0,"collection_card_bg");this.add(e);var r=new(i().GameObjects.Sprite)(this.scene,t.x,t.y,this.createPieceTexture(300,300));this.add(r)}},{key:"createPieceTexture",value:function(t,e){var r=this.scene.add.sprite(0,0,this.iconKey).setOrigin(0);r.setDisplaySize(t,e);var n=this.scene.add.sprite(0,0,this.maskKey).setOrigin(0);n.setDisplaySize(t,e);var o=n.createBitmapMask(n);r.setMask(o);var s=this.scene.add.renderTexture(0,0,t,e);s.draw(r,0,0);var a=s.saveTexture("piece_"+Date.now()+i().Math.Between(1e5,999999));return n.destroy(),r.destroy(),s.destroy(),a}},{key:"getPosById",value:function(t,e){var r=t/3,i=e/3,n=0,o=0;switch(this.cardId){case 1:n=r,o=i;break;case 2:n=0,o=i;break;case 3:n=-r,o=i;break;case 4:n=r,o=0;break;case 5:n=0,o=0;break;case 6:n=-r,o=0;break;case 7:n=r,o=-i;break;case 8:n=0,o=-i;break;case 9:n=-r,o=-i}return{x:n,y:o}}},{key:"iconKey",get:function(){return"collection_"+this.collectionId+"_icon"}},{key:"maskKey",get:function(){return"collection_mask_"+this.cardId}},{key:"nameTextStr",get:function(){return this.scene.game.localization.getText("collection_"+this.collectionId)}}])&&cv(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function gv(t){return gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gv(t)}function mv(){mv=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==gv(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(gv(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function xv(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function bv(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){xv(o,i,n,s,a,"next",t)}function a(t){xv(o,i,n,s,a,"throw",t)}s(void 0)}))}}function wv(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ev(i.key),i)}}function Ev(t){var e=function(t,e){if("object"!=gv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=gv(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gv(e)?e:e+""}function Tv(t,e,r){return e=_v(e),function(t,e){if(e&&("object"==gv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sv()?Reflect.construct(e,r||[],_v(t).constructor):e.apply(t,r))}function Sv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sv=function(){return!!t})()}function _v(t){return _v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_v(t)}function Ov(t,e){return Ov=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ov(t,e)}var Pv=function(t){function e(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Tv(this,e,[t])).boxId=r.boxId,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ov(t,e)}(e,t),r=e,n=[{key:"assemble",value:(h=bv(mv().mark((function t(){var e,r,n,o,s,a=this;return mv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.scene.game.storage.getBoxReward(this.boxId);case 2:this.resultData=t.sent,e=new(i().GameObjects.Sprite)(this.scene,0,0,"popup_bg"),this.container.add(e),r=new rd(this.scene,0,0,this.closeTextStr,0,380,{fontFamily:_,fontSize:"30px",color:"#a6aff1",align:"center"},(function(){a.close()})),this.container.add(r),(n=new(i().GameObjects.Text)(this.scene,0,-400,this.scene.game.localization.getText("your_reward"),{fontFamily:_,fontSize:"40px",fontStyle:"bold",color:"#FFFFFF",align:"center"})).setOrigin(.5,.5),this.container.add(n),(o=new(i().GameObjects.Text)(this.scene,0,-250,this.midTextStr,{fontFamily:_,fontSize:"24px",color:"#FFFFFF",align:"center"})).setOrigin(.5,.5),this.container.add(o),this.addCards(this.resultData.collection_pieces,-50),s=new Bu(this.scene,0,150,this.resultData.rewards),this.container.add(s),this.modules={closeRect:r};case 17:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"midTextStr",get:function(){return"Congratulations! You found a new collection pieces!"}},{key:"addCards",value:function(t,e){var r=this;t.forEach((function(i,n){var o=-(203*t.length/2-86.5-15)+203*n;console.log("x, y",o,e);var s=new yv(r.scene,o,e,i.piece,i.collection_id);r.container.add(s)}))}},{key:"preOpen",value:(a=bv(mv().mark((function t(){return mv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.assemble();case 2:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"onOpen",value:(s=bv(mv().mark((function t(){return mv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.scene.game.events.emit("notification_update");case 1:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"onClose",value:(o=bv(mv().mark((function t(){return mv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.scene.game.events.emit("effects_get_rewards",this.resultData.rewards);case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"userDataBox",get:function(){return this.scene.game.storage.getUserDataBox(this.boxId)}},{key:"generalDataBox",get:function(){return this.scene.game.storage.getGeneralDataBox(this.userDataBox.type_id)}},{key:"closeTextStr",get:function(){return this.scene.game.localization.getText("tap_to_claim")}},{key:"inputEnable",value:function(){this.modules.closeRect.inputEnable()}},{key:"inputDisable",value:function(){this.modules.closeRect.inputDisable()}}],n&&wv(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s,a,h}(fp);function Mv(t){return Mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mv(t)}function Av(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Lv(i.key),i)}}function Lv(t){var e=function(t,e){if("object"!=Mv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Mv(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mv(e)?e:e+""}function Cv(t,e,r){return e=kv(e),function(t,e){if(e&&("object"==Mv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Rv()?Reflect.construct(e,r||[],kv(t).constructor):e.apply(t,r))}function Rv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Rv=function(){return!!t})()}function kv(t){return kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kv(t)}function Fv(t,e){return Fv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fv(t,e)}var Iv=function(t){function e(t,r,i,n,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=Cv(this,e,[t,r,i])).assemble(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fv(t,e)}(e,t),r=e,(i=[{key:"assemble",value:function(){var t=this,e=new Hi(this.scene,0,0,"popup_xoltars_zolter_bg",(function(){t.scene.game.events.emit("play_show_xoltar"),t.scene.game.events.emit("xoltars_close")}));this.add(e)}},{key:"iconKey",get:function(){return"collection_"+this.collectionId+"_card_"+this.cardId}}])&&Av(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i}(i().GameObjects.Container);function Dv(t){return Dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dv(t)}function jv(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Bv(i.key),i)}}function Bv(t){var e=function(t,e){if("object"!=Dv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Dv(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dv(e)?e:e+""}function Nv(t,e,r){return e=Uv(e),function(t,e){if(e&&("object"==Dv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Gv()?Reflect.construct(e,r||[],Uv(t).constructor):e.apply(t,r))}function Gv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Gv=function(){return!!t})()}function Uv(t){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Uv(t)}function Yv(t,e){return Yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yv(t,e)}var zv=function(t){function e(t,r,i,n,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=Nv(this,e,[t,r,i])).assemble(n,o),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yv(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(t,e){var r=new on(this.scene,0,0,350,30,5,263699,7191363,7191363,16777215,0,t);this.add(r);var n=new(i().GameObjects.Text)(this.scene,r.x,r.y,e,{fontFamily:_,fontSize:"24px",color:"#FFFFFF",align:"center"});n.setOrigin(.5),this.add(n),this.modules={bar:r,text:n}}},{key:"updateProgress",value:function(t,e){this.modules.bar.setProgress(t),this.modules.text.setText(e)}}])&&jv(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Xv(t){return Xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xv(t)}function Vv(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Wv(i.key),i)}}function Wv(t){var e=function(t,e){if("object"!=Xv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Xv(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xv(e)?e:e+""}function Hv(t,e,r){return e=Kv(e),function(t,e){if(e&&("object"==Xv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qv()?Reflect.construct(e,r||[],Kv(t).constructor):e.apply(t,r))}function qv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qv=function(){return!!t})()}function Kv(t){return Kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Kv(t)}function Zv(t,e){return Zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zv(t,e)}var Jv=function(t){function e(t,r,i,n,o,s,a){var h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(h=Hv(this,e,[t,r,i])).boxUserData=s,h.collectionData=h.scene.game.storage.getUserDataCollection(h.boxUserData.collection_id),h.assemble(a),h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zv(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=this,e=new Hi(this.scene,0,0,"popup_xoltars_box_bg",(function(){t.scene.game.events.emit("play_show_box",t.boxUserData.id),t.scene.game.events.emit("xoltars_close")}));this.add(e);var r=new(i().GameObjects.Sprite)(this.scene,-180,0,this.iconKey);this.add(r);var n=new(i().GameObjects.Text)(this.scene,100,-20,this.textStr,{fontFamily:_,fontSize:"20px",color:"#FFFFFF",align:"center"});n.setOrigin(.5,1),this.add(n);var o=new zv(this.scene,100,20,this.currentProgress,this.currentProgressStr);this.add(o)}},{key:"currentProgress",get:function(){return this.boxUserData.points/this.generalDataBox.points*100}},{key:"currentProgressStr",get:function(){return this.boxUserData.points+"/"+this.generalDataBox.points}},{key:"generalDataBox",get:function(){return this.scene.game.storage.getGeneralDataBox(this.boxUserData.type_id)}},{key:"textStr",get:function(){return"Mystery Box"}},{key:"iconKey",get:function(){return"icon_box_type_"+this.boxUserData.type_id}}])&&Vv(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function Qv(t){return Qv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qv(t)}function $v(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ty(i.key),i)}}function ty(t){var e=function(t,e){if("object"!=Qv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Qv(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qv(e)?e:e+""}function ey(t,e,r){return e=ny(e),function(t,e){if(e&&("object"==Qv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ry()?Reflect.construct(e,r||[],ny(t).constructor):e.apply(t,r))}function ry(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ry=function(){return!!t})()}function iy(){return iy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=ny(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},iy.apply(null,arguments)}function ny(t){return ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ny(t)}function oy(t,e){return oy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oy(t,e)}var sy=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ey(this,e,[t,r,i])).elements=[],n.elementsCount=n.boxesData.length+1,n.assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oy(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){this.addElements()}},{key:"boxesData",get:function(){return this.scene.game.storage.userDataBoxes}},{key:"addElements",value:function(){for(var t=this,e=0,r=0;r<this.elementsCount;r++){var n=this.topOffset+this.elementHeight/2+r*(this.elementHeight+this.elementHDistance),o=new(i().GameObjects.Sprite)(this.scene,0,n,"popup_xoltars_elem_bg");if(this.add(o),0==r){var s=new Iv(this.scene,0,n,this.elementWidth,this.elementHeight);this.add(s)}else if(this.boxesData[e]){var a=this.boxesData[e],h=new Jv(this.scene,0,n,this.elementWidth,this.elementHeight,a,(function(){t.scene.game.events.emit("play_change_box",t.boxUserData.id),t.close}));this.add(h),e++}}}},{key:"topOffset",get:function(){return 30}},{key:"elementWDistance",get:function(){return 30}},{key:"elementHDistance",get:function(){return 30}},{key:"elementWidth",get:function(){return 619}},{key:"elementHeight",get:function(){return 198}},{key:"allWidth",get:function(){return this.elementWidth}},{key:"allHeight",get:function(){return this.topOffset+this.elementsCount*(this.elementHeight+this.elementHDistance)}},{key:"destroy",value:function(){iy(ny(e.prototype),"destroy",this).call(this)}}])&&$v(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function ay(t){return ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ay(t)}function hy(){hy=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==ay(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ay(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function uy(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function cy(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){uy(o,i,n,s,a,"next",t)}function a(t){uy(o,i,n,s,a,"throw",t)}s(void 0)}))}}function ly(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,fy(i.key),i)}}function fy(t){var e=function(t,e){if("object"!=ay(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=ay(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ay(e)?e:e+""}function py(t,e,r){return e=yy(e),function(t,e){if(e&&("object"==ay(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dy()?Reflect.construct(e,r||[],yy(t).constructor):e.apply(t,r))}function dy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dy=function(){return!!t})()}function vy(){return vy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=yy(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},vy.apply(null,arguments)}function yy(t){return yy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yy(t)}function gy(t,e){return gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gy(t,e)}var my=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=py(this,e,[t])).scroll=!1,r.xoltars=!1,r.assemble(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gy(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(){var t=this,e=new(i().GameObjects.Sprite)(this.scene,0,0,"popup_xoltars_bg");this.container.add(e);var r=new(i().GameObjects.Text)(this.scene,0,-392,this.textStr,{fontFamily:_,fontSize:"50px",color:"#FFFFFF",align:"center"});r.setOrigin(.5),this.container.add(r),this.addXoltars();var n=new Hi(this.scene,300,-475,"popup_xoltars_popup_btn_close",(function(){t.onBtnClose()}));this.container.add(n),n.setTint(8357567),this.scene.game.events.on("xoltars_close",this.onBtnClose,this)}},{key:"textStr",get:function(){return"XOLTAR"}},{key:"onBtnClose",value:(s=cy(hy().mark((function t(){return hy().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$f(this.scene,this.scroll,150);case 2:this.close();case 3:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"onOpen",value:(o=cy(hy().mark((function t(){return hy().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jf(this.scene,this.scroll,150);case 2:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"addXoltars",value:function(){this.xoltars=new sy(this.scene,0,0);var t=this.xoltars.allWidth;return this.scroll=new Rs(this.scene,0,50,this.xoltars,this.xoltars.allWidth,this.xoltars.allHeight,t,700),this.container.add(this.scroll),this.scroll.setAlpha(0),this.xoltars}},{key:"destroy",value:function(){this.scene.game.events.off("xoltars_close",this.onBtnClose,this),vy(yy(e.prototype),"destroy",this).call(this)}}],n&&ly(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}(fp);function xy(t){return xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xy(t)}function by(){by=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==xy(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(xy(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function wy(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Ey(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){wy(o,i,n,s,a,"next",t)}function a(t){wy(o,i,n,s,a,"throw",t)}s(void 0)}))}}function Ty(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Sy(i.key),i)}}function Sy(t){var e=function(t,e){if("object"!=xy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=xy(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xy(e)?e:e+""}function _y(t,e,r){return e=Py(e),function(t,e){if(e&&("object"==xy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Oy()?Reflect.construct(e,r||[],Py(t).constructor):e.apply(t,r))}function Oy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Oy=function(){return!!t})()}function Py(t){return Py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Py(t)}function My(t,e){return My=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},My(t,e)}var Ay=function(t){function e(t,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),_y(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&My(t,e)}(e,t),r=e,n=[{key:"assemble",value:(a=Ey(by().mark((function t(){var e,r,n,o,s,a,h,u=this;return by().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=1100,t.next=3,this.scene.game.storage.useTicket();case 3:r=t.sent,n=new rd(this.scene,0,0,this.closeTextStr,0,this.scene.cameras.main.height/2-100,{fontFamily:_,fontSize:"30px",color:"#888888",align:"center"},(function(){u.scene.game.events.emit("play_show_box",r.box.id),u.close()})),this.container.add(n),o=new(i().GameObjects.Sprite)(this.scene,0,0,"ticket"),this.container.add(o),s=new(i().GameObjects.Sprite)(this.scene,0,280,"Ticket_box_icon"),this.container.add(s),(a=new(i().GameObjects.Text)(this.scene,0,-e/2+110,this.topTextStr,{fontFamily:_,fontSize:"26px",fontStyle:"bold",color:"#410201",align:"center"})).setOrigin(.5,.5),this.container.add(a),(h=new(i().GameObjects.BitmapText)(this.scene,0,-25,"ticketfont",r.ticket_text,48,1)).setOrigin(.5,.5),h.setTint(16766720),h.setMaxWidth(450),this.container.add(h),this.modules={closeRect:n};case 19:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"preOpen",value:(s=Ey(by().mark((function t(){return by().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.assemble();case 2:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"onOpen",value:(o=Ey(by().mark((function t(){return by().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"closeTextStr",get:function(){return this.scene.game.localization.getText("tap_to_claim")}},{key:"topTextStr",get:function(){return"YOUR LUCK FOR TODAY!"}},{key:"centerTextStr",get:function(){}},{key:"centerStrs",get:function(){return["Your hard work will bear golden fruit. Harvest it.","This week, luck dances at your door. Invite it in.","A mysterious traveler brings fortune. Welcome them.","Under the moon, hidden wealth awaits. Seek it.","Your family’s love fuels prosperity. Nurture it.","Success shines on your next journey. Embark boldly.","A lucky charm will guide your path. Follow it.","Today’s efforts bloom into tomorrow’s wealth. Cultivate them.","An unexpected gift brings abundance. Accept it.","Fortune smiles on your loved ones. Share in it.","A golden opportunity in work arises. Seize it.","In the quiet of night, wealth whispers. Listen closely.","A friend’s advice leads to prosperity. Heed it.","Your stars align for travel and fortune. Pack your bags.","The weekend holds hidden treasures. Discover them.","A mysterious benefactor is near. Acknowledge them.","Prosperity flows from your kindness. Give generously.","Your next step unlocks riches. Take it now.","In love, luck blossoms. Cherish it.","A prosperous day awaits you. Begin it.","Wealth blooms from today’s decisions. Choose wisely.","A forgotten project brings fortune. Revive it.","Fortune hides in your next conversation. Engage deeply.","Luck rides the morning breeze. Catch it.","A new friendship sparks prosperity. Nurture it.","Wealth flows from unexpected places. Stay open.","A late-night idea leads to riches. Pursue it.","Your creativity unlocks hidden fortune. Express it.","Luck whispers in a stranger’s smile. Acknowledge it.","Prosperity awaits in a new venture. Dive in.","A lucky break comes with the next sunrise. Prepare.","Wealth follows your passion. Chase it.","An unexpected journey brings fortune. Take it.","Luck finds you in quiet moments. Embrace them.","A cherished memory unlocks riches. Reflect on it.","Prosperity comes from sharing today. Give openly.","Fortune awaits in tomorrow’s task. Begin now.","A spark of luck ignites your path. Follow it.","Wealth is in the next opportunity. Don’t miss it.","A whispered secret brings fortune. Listen closely.","A stranger’s glance holds a secret. Decode it.","Your pet senses fortune. Follow its lead.","An elderly woman’s words conceal wealth. Listen closely.","A man with glasses knows your fortune. Ask him.","In a strange place, luck hides. Explore it.","A mysterious sign points to riches. Observe it.","The woman with grey hairs holds a key. Seek her wisdom.","Your lovely pet guides you to fortune. Trust it.","An unexpected person brings luck. Stay alert.","A fleeting shadow reveals hidden wealth. Watch carefully.","In the night’s stillness, fortune whispers. Hear it.","An elderly person’s gesture hides treasure. Notice it.","A man with glasses sees your path. Follow his advice.","A grey-haired woman’s smile holds a secret. Unlock it.","In a strange place, fortune waits. Seek it out.","A mysterious mark on the wall hints at riches. Investigate.","Your pet’s behavior signals good fortune. Pay attention.","An unexpected meeting leads to wealth. Embrace it.","The woman with grey hairs shares a secret. Listen well.","A mysterious figure in the distance holds your luck. Approach.","Wealth awaits in tomorrow’s dawn. Rise early.","A hidden talent brings riches. Unleash it.","Fortune’s winds favor your travels. Set sail.","A kind word today brings wealth tomorrow. Speak it.","Luck smiles on your evening plans. Enjoy it.","An old friend holds the key to fortune. Reconnect.","Prosperity hides in the details. Pay attention.","A surprise visitor brings luck. Welcome them.","Your patience will be rewarded with gold. Wait for it.","Success blooms from today’s effort. Tend it.","Fortune’s door opens wide. Step in.","A chance meeting sparks wealth. Be ready.","This week, luck hides in your routine. Look closely.","Prosperity follows your kindness. Give freely.","A mystery call brings good news. Answer it.","Your journey leads to hidden riches. Keep going.","Fortune dances in your dreams. Pursue them.","A golden opportunity crosses your path. Take it.","Luck is woven into today’s choices. Choose wisely.","A new dawn brings unexpected wealth. Embrace it.","A forgotten dream resurfaces tonight. Its meaning is your key. Decode it.","The old clock strikes at an odd hour. Fortune ticks with it. Watch closely.","In the misty morning, a figure emerges. They carry your luck. Approach.","A flickering streetlight guides your way. Beneath its glow lies treasure.","An unfamiliar scent lingers in the air. It leads to unexpected riches. Follow it.","Your shadow moves differently today. It knows your hidden fortune. Align with it.","The ancient tree whispers your name. Its roots hide wealth. Dig deeper.","A child’s laughter echoes in the distance. Luck plays among the echoes. Seek it out.","In the depths of a forgotten drawer, a small object pulses with energy. Unlock it.","The first star tonight holds your wish. Its light guides you to fortune.","Dare to chase the shadows; they hide your fortune. Face the unknown.","A risk taken today will unlock untold riches. Are you bold enough?","Wealth teases you from the edge of danger. Will you reach for it?","A stranger’s secret tempts you. Do you dare uncover it?","The first step into darkness leads to gold. Will you take it?","Fortune flirts with those who defy the ordinary. Break the rules.","The path to wealth is shrouded in mystery. Do you have the nerve?","Luck is a game of daring. Will you play to win?","A fleeting opportunity crosses your path. Do you have the guts to seize it?","Fortune favors the brave. Are you ready to prove your courage?","A whispered challenge dares you to uncover wealth. Will you rise to it?","Your fortune waits on the edge of risk. Do you have the strength to leap?","In the heart of uncertainty, wealth pulses. Will you claim it?","A bold move today could change everything. Are you ready to risk it?","Riches tempt those who defy the odds. Will you dare to defy?","The line between luck and loss is thin. Will you walk it?","Fortune dares you to step into the unknown. Will you take the challenge?","Wealth whispers your name from the shadows. Will you answer its call?","A risky choice leads to fortune’s door. Will you knock?","Fortune is a tease, daring you to catch it. Will you play along?","A shadow crosses your path. It carries fortune. Follow it.","In the eyes of a stranger, your destiny flickers. Gaze deeper.","Your pet stares into the unseen. Fortune lies beyond.","A grey-haired woman hums a tune. Its melody leads to wealth.","The man with glasses knows your secret wish. Trust him.","In an unfamiliar alley, luck waits in silence. Seek it.","A fleeting glimpse of silver brings riches. Capture it.","Your pet’s unusual behavior signals a hidden treasure. Investigate.","A whisper in the wind carries wealth’s secret. Listen closely.","The woman with grey hairs offers wisdom. Her words are gold.","A book left open on a table holds a clue. Read it.","The man with glasses smiles knowingly. Fortune follows his gaze.","In the shadow of the old oak, a secret lies buried. Uncover it.","Your pet’s dream holds a prophecy. Watch its slumber.","A forgotten path leads to unexpected wealth. Rediscover it.","A grey-haired stranger crosses your path. Her glance hides fortune.","In the reflection of your mirror, a new opportunity shimmers. Seize it.","The man with glasses hesitates. His pause reveals a hidden truth.","A mysterious tune lingers in the air. It guides you to riches.","A letter arrives with no return address. Its words are your key."]}},{key:"inputEnable",value:function(){this.modules.closeRect.inputEnable()}},{key:"inputDisable",value:function(){this.modules.closeRect.inputDisable()}}],n&&Ty(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s,a}(fp);function Ly(t){return Ly="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ly(t)}function Cy(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ry(i.key),i)}}function Ry(t){var e=function(t,e){if("object"!=Ly(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Ly(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ly(e)?e:e+""}function ky(t,e,r){return e=Iy(e),function(t,e){if(e&&("object"==Ly(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fy()?Reflect.construct(e,r||[],Iy(t).constructor):e.apply(t,r))}function Fy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fy=function(){return!!t})()}function Iy(t){return Iy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Iy(t)}function Dy(t,e){return Dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dy(t,e)}var jy=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=ky(this,e,[t,r,i])).cost=n,o.assemble(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dy(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,-30,0,"coin_icon");this.add(t),t.setDisplaySize(35,35);var e=new(i().GameObjects.Text)(this.scene,30,0,this.cost,{fontFamily:_,fontSize:"30px",color:"#FFFFFF",align:"center"});e.setOrigin(.5,.5),this.add(e),this.modules={countText:e}}},{key:"updateCost",value:function(t){this.modules.countText.setText(t)}}])&&Cy(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function By(t){return By="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},By(t)}function Ny(){Ny=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==By(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(By(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Gy(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Uy(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Gy(o,i,n,s,a,"next",t)}function a(t){Gy(o,i,n,s,a,"throw",t)}s(void 0)}))}}function Yy(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,zy(i.key),i)}}function zy(t){var e=function(t,e){if("object"!=By(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=By(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==By(e)?e:e+""}function Xy(t,e,r){return e=Wy(e),function(t,e){if(e&&("object"==By(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Vy()?Reflect.construct(e,r||[],Wy(t).constructor):e.apply(t,r))}function Vy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Vy=function(){return!!t})()}function Wy(t){return Wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wy(t)}function Hy(t,e){return Hy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hy(t,e)}var qy=function(t){function e(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Xy(this,e,[t])).helperId=r.helperId,i.assemble(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hy(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(){var t=this,e=new(i().GameObjects.Sprite)(this.scene,0,0,"helpers_upgrade_popup_bg");this.container.add(e);var r=new(i().GameObjects.Text)(this.scene,0,-392,this.textStr,{fontFamily:_,fontSize:"40px",color:"#FFFFFF",align:"center"});r.setOrigin(.5),this.container.add(r);var n=new(i().GameObjects.Sprite)(this.scene,0,-192,this.iconKey);this.container.add(n);var o=new(i().GameObjects.Text)(this.scene,0,100,this.descriptionTextStr,{fontFamily:_,fontSize:"24px",color:"#FFFFFF",align:"center",wordWrap:{width:550,useAdvancedWrap:!0}});o.setOrigin(.5,1),this.container.add(o),o.setAlpha(.8);var s=new(i().GameObjects.Text)(this.scene,-60,220,this.rewardPerHour,{fontFamily:_,fontSize:"50px",color:"#FFFFFF",align:"center"});s.setOrigin(.5),s.setTint(16766720),this.container.add(s);var a=new(i().GameObjects.Sprite)(this.scene,-140,220,"coin_icon");this.container.add(a),a.setDisplaySize(50,50);var h=new(i().GameObjects.Text)(this.scene,-100,170,this.rewardPerHourStr,{fontFamily:_,fontSize:"24px",color:"#FFFFFF",align:"center"});h.setOrigin(.5),h.setAlpha(.6),this.container.add(h);var u=new(i().GameObjects.Text)(this.scene,100,170,this.scene.game.localization.getText("reward"),{fontFamily:_,fontSize:"24px",color:"#FFFFFF",align:"center"});u.setOrigin(.5,.5),this.container.add(u),u.setAlpha(.6);var c=new Hi(this.scene,0,350,"helpers_upgrade_popup_btn_buy",(function(){t.onBuy()}));this.container.add(c);var l=new(i().GameObjects.Text)(this.scene,c.x,c.y-20,this.scene.game.localization.getText("obtain"),{fontFamily:_,fontSize:"40px",color:"#FFFFFF",align:"center"});l.setOrigin(.5),this.container.add(l);var f=new jy(this.scene,c.x,c.y+20,this.nextLevelCost);this.container.add(f);var p=new Hi(this.scene,300,-475,"helpers_upgrade_popup_btn_close",(function(){t.close()}));this.container.add(p),p.setTint(8357567);var d=new Bu(this.scene,100,220,this.nextLevel.rewards);this.container.add(d)}},{key:"onOpen",value:(s=Uy(Ny().mark((function t(){return Ny().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"iconKey",get:function(){return"helper_"+this.helperId}},{key:"lvlStr",get:function(){return this.scene.game.localization.getText("lvl")+" "+this.userLevel}},{key:"rewardPerHourStr",get:function(){return this.scene.game.localization.getText("profit_per_hour")}},{key:"rewardPerHour",get:function(){return this.isBuyed?this.levelData.profit:"+"+this.generalData.helper_levels[0].profit}},{key:"nextLevelCost",get:function(){return this.nextLevel?this.nextLevel.cost:"Last lvl"}},{key:"nextLevel",get:function(){var t=this,e=!1;return this.generalData.helper_levels.forEach((function(r){t.userLevel+1===r.number&&(e=r)})),e}},{key:"levelData",get:function(){var t=this,e=!1;return this.generalData.helper_levels.forEach((function(r){t.userLevel===r.number&&(e=r)})),e}},{key:"userLevel",get:function(){return this.userData?this.userData.level:0}},{key:"userData",get:function(){return this.scene.game.storage.getUserDataHelper(this.helperId)}},{key:"generalData",get:function(){return this.scene.game.storage.getGeneralDataHelper(this.helperId)}},{key:"textStr",get:function(){return this.generalData.title}},{key:"descriptionTextStr",get:function(){var t="helper_"+this.generalData.id+"_description";return this.scene.game.localization.getText(t)}},{key:"onBuy",value:(o=Uy(Ny().mark((function t(){var e,r=this;return Ny().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.scene.game.storage.upgradeHelper(this.generalData.id,this.userLevel,this.nextLevelCost);case 2:e=t.sent,this.scene.game.events.emit("helpers_update"),this.scene.game.events.emit("notification_update"),this.close(!0,(function(){r.scene.game.events.emit("effects_get_rewards",e)}));case 6:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],n&&Yy(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}(fp);function Ky(t){return Ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ky(t)}function Zy(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Jy(i.key),i)}}function Jy(t){var e=function(t,e){if("object"!=Ky(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Ky(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ky(e)?e:e+""}function Qy(t,e,r){return e=tg(e),function(t,e){if(e&&("object"==Ky(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$y()?Reflect.construct(e,r||[],tg(t).constructor):e.apply(t,r))}function $y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($y=function(){return!!t})()}function tg(t){return tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tg(t)}function eg(t,e){return eg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},eg(t,e)}var rg=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Qy(this,e,[t,r,i])).id=n,o.assemble(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eg(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(t){var e=this,r=new Hi(this.scene,0,0,"popup_xoltar_game_button",(function(){e.scene.game.events.emit("xoltar_game_on_button_click",e.id)}));this.add(r);var n=new(i().GameObjects.Text)(this.scene,0,0,this.id,{fontFamily:_,fontSize:"50px",color:"#FFFFFF",align:"center"});n.setOrigin(.5),this.add(n)}}])&&Zy(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function ig(t){return ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ig(t)}function ng(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,og(i.key),i)}}function og(t){var e=function(t,e){if("object"!=ig(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=ig(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ig(e)?e:e+""}function sg(t,e,r){return e=hg(e),function(t,e){if(e&&("object"==ig(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ag()?Reflect.construct(e,r||[],hg(t).constructor):e.apply(t,r))}function ag(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ag=function(){return!!t})()}function hg(t){return hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hg(t)}function ug(t,e){return ug=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ug(t,e)}var cg=function(t){function e(t,r,i,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=sg(this,e,[t,r,i])).positionIndex=n,o.isActivated=!1,o.assemble(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ug(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,0,0,"popup_xoltar_game_lamp_passive");this.add(t),this.modules={bg:t}}},{key:"activate",value:function(){this.isActivated=!0,this.modules.bg.setTexture("popup_xoltar_game_lamp_active")}},{key:"deactivate",value:function(){this.isActivated=!1,this.modules.bg.setTexture("popup_xoltar_game_lamp_passive")}}])&&ng(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function lg(t){return lg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lg(t)}function fg(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,pg(i.key),i)}}function pg(t){var e=function(t,e){if("object"!=lg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=lg(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==lg(e)?e:e+""}function dg(t,e,r){return e=yg(e),function(t,e){if(e&&("object"==lg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vg()?Reflect.construct(e,r||[],yg(t).constructor):e.apply(t,r))}function vg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vg=function(){return!!t})()}function yg(t){return yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yg(t)}function gg(t,e){return gg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gg(t,e)}var mg=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=dg(this,e,[t,r,i])).startCount=n.currentCount,n.assemble(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gg(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=this,e=new(i().GameObjects.Text)(this.scene,0,0,this.textStr,{fontFamily:_,fontSize:"30px",color:"#FFFFFF",align:"center"});e.setOrigin(.5),this.add(e);var r=new Hi(this.scene,0,80,"popup_xoltar_game_btn_get_try",(function(){t.onGetTry()}));this.add(r),this.modules={countText:e}}},{key:"spend",value:function(){this.hasTry&&(this.scene.game.storage.spendCodeTry(),this.modules.countText.setText(this.textStr),this.scene.game.events.emit("xoltar_update"))}},{key:"onGetTry",value:function(){this.scene.game.storage.addCodeTry(),this.modules.countText.setText(this.textStr),this.scene.game.events.emit("xoltar_update")}},{key:"hasTry",get:function(){return this.currentCount>0}},{key:"currentCount",get:function(){return this.scene.game.storage.userDataCodeTrys}},{key:"textStr",get:function(){return"Attempts Left: "+this.currentCount+"\nTime until attempts are updated: 24:20"}}])&&fg(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(i().GameObjects.Container);function xg(t){return xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(t)}function bg(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,wg(i.key),i)}}function wg(t){var e=function(t,e){if("object"!=xg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=xg(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xg(e)?e:e+""}function Eg(t,e,r){return e=_g(e),function(t,e){if(e&&("object"==xg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Tg()?Reflect.construct(e,r||[],_g(t).constructor):e.apply(t,r))}function Tg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Tg=function(){return!!t})()}function Sg(){return Sg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=_g(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},Sg.apply(null,arguments)}function _g(t){return _g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_g(t)}function Og(t,e){return Og=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Og(t,e)}var Pg=function(t){function e(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Eg(this,e,[t])).setFaderShowAlpha(.4),i.buttons=[],i.lamps=[],i.pressed=[],i.assemble(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Og(t,e)}(e,t),r=e,(n=[{key:"assemble",value:function(){var t=this,e=this.addTryPanel(-this.scene.cameras.main.height/2+250),r=new(i().GameObjects.Sprite)(this.scene,0,this.scene.cameras.main.height/2-200-225,"popup_xoltar_game_panel");this.container.add(r);var n=new Hi(this.scene,300,-this.scene.cameras.main.height/2+120,"popup_xoltar_game_btn_close",(function(){t.close()}));this.container.add(n),n.setTint(8357567),this.addLamps(r.y-225+40),this.addButtons(r.y+20),this.scene.game.events.on("xoltar_game_on_button_click",this.onButtonClick,this),this.modules={trys:e}}},{key:"addTryPanel",value:function(t){var e=new(i().GameObjects.Sprite)(this.scene,0,t,"popup_xoltar_game_top_panel");this.container.add(e);var r=new(i().GameObjects.Text)(this.scene,e.x,e.y-25,this.descriptionStr,{fontFamily:_,fontSize:"28px",color:"#FFFFFF",align:"center"});r.setOrigin(.5),this.container.add(r);var n=new mg(this.scene,e.x,e.y+25);return this.container.add(n),n}},{key:"descriptionStr",get:function(){return"Seek or crack the code to claim your gifts!"}},{key:"addButtons",value:function(t){for(var e=0;e<7;e++){var r=t-65-10;e%2&&(r=t+65+10);var i=85*e-255,n=e+1;console.log("x,y",i,r);var o=new rg(this.scene,i,r,n);this.container.add(o),this.buttons.push(o)}}},{key:"onButtonClick",value:function(t){if(!this.modules.trys.hasTry)return!1;this.pressed.push(t),this.checkMatch()?this.activateNexLamp():(this.modules.trys.spend(),this.pressed=[],this.deactivateLamps()),this.isComplete&&(this.scene.game.events.emit("popup_open","get_box",(function(){}),{}),this.close())}},{key:"checkMatch",value:function(){var t=this,e=!1;return this.generalData.forEach((function(r){var i=!0;console.log("code",r),console.log("this.pressed",t.pressed),t.pressed.forEach((function(t,e){t!==r.cipher[e]&&(i=!1)})),i&&(e=!0)})),e}},{key:"isComplete",get:function(){var t=this,e=!1;return this.generalData.forEach((function(r){var i=!0;console.log("code",r),console.log("this.pressed",t.pressed),r.cipher.forEach((function(e,n){t.pressed[n]!==r.cipher[n]&&(i=!1)})),i&&(e=r)})),e}},{key:"activateNexLamp",value:function(){for(var t in this.lamps)if(!this.lamps[t].isActivated){this.lamps[t].activate();break}}},{key:"deactivateLamps",value:function(){this.lamps.forEach((function(t){t.deactivate()}))}},{key:"addLamps",value:function(t){for(var e=0;e<5;e++){var r=100*e-200,i=new cg(this.scene,r,t,e);this.container.add(i),this.lamps.push(i)}}},{key:"generalData",get:function(){return this.scene.game.storage.generalDataCodes}},{key:"destroy",value:function(){this.scene.game.events.off("xoltar_game_on_button_click",this.onButtonClick,this),Sg(_g(e.prototype),"destroy",this).call(this)}}])&&bg(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(fp);function Mg(t){return Mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mg(t)}function Ag(){Ag=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Mg(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Mg(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Lg(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Cg(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Lg(o,i,n,s,a,"next",t)}function a(t){Lg(o,i,n,s,a,"throw",t)}s(void 0)}))}}function Rg(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,kg(i.key),i)}}function kg(t){var e=function(t,e){if("object"!=Mg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Mg(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mg(e)?e:e+""}function Fg(t,e,r){return e=Dg(e),function(t,e){if(e&&("object"==Mg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ig()?Reflect.construct(e,r||[],Dg(t).constructor):e.apply(t,r))}function Ig(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ig=function(){return!!t})()}function Dg(t){return Dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dg(t)}function jg(t,e){return jg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jg(t,e)}var Bg=function(t){function e(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Fg(this,e,[t])).seasonId=r.seasonId,i.intervalId=r.intervalId,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jg(t,e)}(e,t),r=e,n=[{key:"assemble",value:(h=Cg(Ag().mark((function t(){var e,r,n,o,s,a,h=this;return Ag().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.scene.game.storage.getSeasonIntervalReward(this.seasonId,this.intervalId);case 2:this.rewardsData=t.sent,e=new(i().GameObjects.Sprite)(this.scene,0,0,"popup_bg"),this.container.add(e),(r=new(i().GameObjects.Text)(this.scene,0,-390,"SEASON REWARDS",{fontFamily:_,fontSize:"40px",fontStyle:"bold",color:"#FFFFFF",align:"center"})).setOrigin(.5,.5),this.container.add(r),n=new(i().GameObjects.Sprite)(this.scene,0,-130,"popup_season_interval_reward_icon"),this.container.add(n),(o=new(i().GameObjects.Text)(this.scene,0,150,this.scene.game.localization.getText("your_reward"),{fontFamily:_,fontSize:"35px",color:"#FFFFFF",align:"center"})).setOrigin(.5,.5),this.container.add(o),s=new Bu(this.scene,0,220,this.rewardsData),this.container.add(s),a=new rd(this.scene,0,0,this.closeTextStr,0,380,{fontFamily:_,fontSize:"30px",color:"#a6aff1",align:"center"},(function(){h.close()})),this.container.add(a),this.modules={closeRect:a};case 18:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"preOpen",value:(a=Cg(Ag().mark((function t(){return Ag().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.assemble();case 2:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"onClose",value:(s=Cg(Ag().mark((function t(){return Ag().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.scene.game.events.emit("effects_get_rewards",this.rewardsData);case 1:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"seasonGeneralData",get:function(){return this.scene.game.storage.getGeneralDataSeason(this.seasonId)}},{key:"onOpen",value:(o=Cg(Ag().mark((function t(){return Ag().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"closeTextStr",get:function(){return this.scene.game.localization.getText("tap_to_claim")}},{key:"inputEnable",value:function(){this.modules.closeRect.inputEnable()}},{key:"inputDisable",value:function(){this.modules.closeRect.inputDisable()}}],n&&Rg(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s,a,h}(fp);function Ng(t){return Ng="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(t)}function Gg(){Gg=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Ng(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Ng(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Ug(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Yg(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Ug(o,i,n,s,a,"next",t)}function a(t){Ug(o,i,n,s,a,"throw",t)}s(void 0)}))}}function zg(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Xg(i.key),i)}}function Xg(t){var e=function(t,e){if("object"!=Ng(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Ng(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ng(e)?e:e+""}function Vg(t,e,r){return e=Hg(e),function(t,e){if(e&&("object"==Ng(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wg()?Reflect.construct(e,r||[],Hg(t).constructor):e.apply(t,r))}function Wg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wg=function(){return!!t})()}function Hg(t){return Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hg(t)}function qg(t,e){return qg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qg(t,e)}var Kg=function(t){function e(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Vg(this,e,[t])).intervalId=r.intervalId,i.rewardsData=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qg(t,e)}(e,t),r=e,n=[{key:"assemble",value:(h=Yg(Gg().mark((function t(){var e,r,n,o,s,a,h=this;return Gg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.scene.game.storage.getFortunometrIntervalReward(this.intervalId);case 2:this.rewardsData=t.sent,e=new(i().GameObjects.Sprite)(this.scene,0,0,"popup_bg"),this.container.add(e),(r=new(i().GameObjects.Text)(this.scene,0,-385,"THE WINDS OF LUCK ARE AT YOUR BACK!",{fontFamily:_,fontSize:"34px",fontStyle:"bold",color:"#FFFFFF",align:"center"})).setOrigin(.5,.5),this.container.add(r),n=new(i().GameObjects.Sprite)(this.scene,0,-150,"popup_fortunometr_interval_reward_icon"),this.container.add(n),(o=new(i().GameObjects.Text)(this.scene,0,150,this.scene.game.localization.getText("your_reward"),{fontFamily:_,fontSize:"35px",color:"#FFFFFF",align:"center"})).setOrigin(.5,.5),this.container.add(o),s=new Bu(this.scene,0,220,this.rewardsData),this.container.add(s),a=new rd(this.scene,0,0,this.closeTextStr,0,380,{fontFamily:_,fontSize:"30px",color:"#a6aff1",align:"center"},(function(){h.close()})),this.container.add(a),this.modules={closeRect:a};case 18:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"generalData",get:function(){var t=this,e=!1;return this.scene.game.storage.generalDataFortunometr.forEach((function(r){r.id==t.intervalId&&(e=r)})),e}},{key:"preOpen",value:(a=Yg(Gg().mark((function t(){return Gg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.assemble();case 2:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"onOpen",value:(s=Yg(Gg().mark((function t(){return Gg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.scene.game.events.emit("fortunametr_update"),this.scene.game.events.emit("notification_update");case 2:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"onClose",value:(o=Yg(Gg().mark((function t(){return Gg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.scene.game.events.emit("effects_get_rewards",this.rewardsData);case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"closeTextStr",get:function(){return this.scene.game.localization.getText("tap_to_claim")}},{key:"inputEnable",value:function(){this.modules.closeRect.inputEnable()}},{key:"inputDisable",value:function(){this.modules.closeRect.inputDisable()}}],n&&zg(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s,a,h}(fp);function Zg(t){return Zg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zg(t)}function Jg(){Jg=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Zg(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Zg(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Qg(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function $g(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Qg(o,i,n,s,a,"next",t)}function a(t){Qg(o,i,n,s,a,"throw",t)}s(void 0)}))}}function tm(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,em(i.key),i)}}function em(t){var e=function(t,e){if("object"!=Zg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Zg(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zg(e)?e:e+""}function rm(t,e,r){return e=nm(e),function(t,e){if(e&&("object"==Zg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,im()?Reflect.construct(e,r||[],nm(t).constructor):e.apply(t,r))}function im(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(im=function(){return!!t})()}function nm(t){return nm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nm(t)}function om(t,e){return om=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},om(t,e)}var sm=function(t){function e(t,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),rm(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&om(t,e)}(e,t),r=e,n=[{key:"assemble",value:(h=$g(Jg().mark((function t(){var e,r,n,o,s,a=this;return Jg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.scene.game.storage.updateProfit();case 3:e=t.sent,r=new rd(this.scene,0,0,this.closeTextStr,0,this.scene.cameras.main.height/2-100,{fontFamily:_,fontSize:"30px",color:"#888888",align:"center"},(function(){a.onClick()})),this.container.add(r),(n=new(i().GameObjects.Text)(this.scene,0,-200,this.topTextStr,{fontFamily:_,fontSize:"60px",fontStyle:"bold",color:"#FFFFFF",align:"center"})).setOrigin(.5,.5),this.container.add(n),o={type:1,currency_count:e},this.rewardsData=[o],s=new An(this.scene,0,200,150,50,o),this.container.add(s),this.modules={closeRect:r};case 14:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"preOpen",value:(a=$g(Jg().mark((function t(){return Jg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.assemble();case 2:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"onOpen",value:(s=$g(Jg().mark((function t(){return Jg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"onClick",value:function(){this.close()}},{key:"onClose",value:(o=$g(Jg().mark((function t(){return Jg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.scene.game.events.emit("effects_get_rewards",this.rewardsData);case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"closeTextStr",get:function(){return this.scene.game.localization.getText("tap_to_claim")}},{key:"topTextStr",get:function(){return"Offline profit:"}},{key:"inputEnable",value:function(){this.modules.closeRect.inputEnable()}},{key:"inputDisable",value:function(){this.modules.closeRect.inputDisable()}}],n&&tm(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s,a,h}(fp);function am(t){return am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},am(t)}function hm(){hm=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==am(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(am(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function um(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function cm(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,lm(i.key),i)}}function lm(t){var e=function(t,e){if("object"!=am(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=am(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==am(e)?e:e+""}function fm(t,e,r){return e=dm(e),function(t,e){if(e&&("object"==am(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pm()?Reflect.construct(e,r||[],dm(t).constructor):e.apply(t,r))}function pm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pm=function(){return!!t})()}function dm(t){return dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dm(t)}function vm(t,e){return vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vm(t,e)}var ym=function(t){function e(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=fm(this,e,[t])).collectionId=r.collectionId,i.assemble(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vm(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(){var t=this,e=new(i().GameObjects.Sprite)(this.scene,0,0,"popup_bg");this.container.add(e);var r=new(i().GameObjects.Text)(this.scene,0,-392,this.textStr,{fontFamily:_,fontSize:"40px",color:"#FFFFFF",align:"center"});r.setOrigin(.5),this.container.add(r);var n=new(i().GameObjects.Sprite)(this.scene,0,-192,this.iconKey);this.container.add(n);var o=new(i().GameObjects.Text)(this.scene,0,100,this.descriptionTextStr,{fontFamily:_,fontSize:"24px",color:"#FFFFFF",align:"center",wordWrap:{width:550,useAdvancedWrap:!0}});o.setOrigin(.5,1),this.container.add(o),o.setAlpha(.8);var s=new Hi(this.scene,0,350,"popup_get_card_btn_get",(function(){t.close(!0)}));this.container.add(s);var a=new(i().GameObjects.Text)(this.scene,s.x,s.y-20,this.scene.game.localization.getText("obtain"),{fontFamily:_,fontSize:"40px",color:"#FFFFFF",align:"center"});a.setOrigin(.5),this.container.add(a);var h=new Hi(this.scene,300,-475,"popup_get_card_btn_close",(function(){t.close(!1)}));this.container.add(h),h.setTint(8357567)}},{key:"onOpen",value:(o=hm().mark((function t(){return hm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.scene.game.events.emit("notification_update");case 1:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(r,i){var n=o.apply(t,e);function s(t){um(n,r,i,s,a,"next",t)}function a(t){um(n,r,i,s,a,"throw",t)}s(void 0)}))},function(){return s.apply(this,arguments)})},{key:"onGet",value:function(){this.close(!0)}}],n&&cm(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}(fp);function gm(t){return gm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gm(t)}function mm(){mm=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==gm(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(gm(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function xm(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function bm(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,wm(i.key),i)}}function wm(t){var e=function(t,e){if("object"!=gm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=gm(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gm(e)?e:e+""}function Em(t,e,r){return e=Sm(e),function(t,e){if(e&&("object"==gm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Tm()?Reflect.construct(e,r||[],Sm(t).constructor):e.apply(t,r))}function Tm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Tm=function(){return!!t})()}function Sm(t){return Sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sm(t)}function _m(t,e){return _m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_m(t,e)}var Om=function(t){function e(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Em(this,e,[t])).collectionId=r.collectionId,i.assemble(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_m(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(){var t=this,e=new(i().GameObjects.Sprite)(this.scene,0,0,"popup_bg");this.container.add(e);var r=new(i().GameObjects.Text)(this.scene,0,-392,this.textStr,{fontFamily:_,fontSize:"40px",color:"#FFFFFF",align:"center"});r.setOrigin(.5),this.container.add(r);var n=new Hi(this.scene,300,-475,"popup_get_card_btn_close",(function(){t.close(!1)}));this.container.add(n),n.setTint(8357567)}},{key:"textStr",get:function(){return"Friends"}},{key:"onOpen",value:(o=mm().mark((function t(){return mm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})),s=function(){var t=this,e=arguments;return new Promise((function(r,i){var n=o.apply(t,e);function s(t){xm(n,r,i,s,a,"next",t)}function a(t){xm(n,r,i,s,a,"throw",t)}s(void 0)}))},function(){return s.apply(this,arguments)})}],n&&bm(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}(fp);function Pm(t){return Pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(t)}function Mm(){Mm=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Pm(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Pm(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Am(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Lm(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){Am(o,i,n,s,a,"next",t)}function a(t){Am(o,i,n,s,a,"throw",t)}s(void 0)}))}}function Cm(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Rm(i.key),i)}}function Rm(t){var e=function(t,e){if("object"!=Pm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Pm(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pm(e)?e:e+""}function km(t,e,r){return e=Im(e),function(t,e){if(e&&("object"==Pm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fm()?Reflect.construct(e,r||[],Im(t).constructor):e.apply(t,r))}function Fm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fm=function(){return!!t})()}function Im(t){return Im=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Im(t)}function Dm(t,e){return Dm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dm(t,e)}var jm=function(t){function e(t,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),km(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dm(t,e)}(e,t),r=e,n=[{key:"assemble",value:(h=Lm(Mm().mark((function t(){var e,r,n,o,s,a,h,u,c=this;return Mm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.scene.game.storage.levelUp();case 2:this.rewardsData=t.sent,e=new(i().GameObjects.Sprite)(this.scene,0,0,"popup_bg"),this.container.add(e),(r=new(i().GameObjects.Text)(this.scene,0,-380,this.scene.game.localization.getText("level_up"),{fontFamily:_,fontSize:"50px",fontStyle:"bold",color:"#FFFFFF",align:"center"})).setOrigin(.5,.5),this.container.add(r),n=new(i().GameObjects.Sprite)(this.scene,0,-180,"popup_level_up_crown"),this.container.add(n),(o=new(i().GameObjects.Text)(this.scene,n.x,n.y+120,this.scene.game.localization.getText("level")+" "+this.level,{fontFamily:_,fontSize:"40px",color:"#FFFFFF",align:"center"})).setOrigin(.5,.5),this.container.add(o),(s=new(i().GameObjects.Text)(this.scene,n.x,n.y+170,"("+this.levelTitleStr+")",{fontFamily:_,fontSize:"30px",fontStyle:"italic",color:"#FFFFFF",align:"center"})).setOrigin(.5,.5),this.container.add(s),(a=new(i().GameObjects.Text)(this.scene,0,150,this.scene.game.localization.getText("your_reward"),{fontFamily:_,fontSize:"35px",color:"#FFFFFF",align:"center"})).setOrigin(.5,.5),this.container.add(a),h=new Bu(this.scene,0,220,this.rewardsData),this.container.add(h),u=new rd(this.scene,0,0,this.closeTextStr,0,380,{fontFamily:_,fontSize:"30px",color:"#a6aff1",align:"center"},(function(){c.close()})),this.container.add(u),this.modules={closeRect:u};case 24:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"preOpen",value:(a=Lm(Mm().mark((function t(){return Mm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.assemble();case 2:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"levelTitleStr",get:function(){return this.scene.game.localization.getText("level_title_"+this.level)}},{key:"level",get:function(){return this.scene.game.storage.level}},{key:"onOpen",value:(s=Lm(Mm().mark((function t(){return Mm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"onClose",value:(o=Lm(Mm().mark((function t(){return Mm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.scene.game.events.emit("effects_get_rewards",this.rewardsData);case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"closeTextStr",get:function(){return this.scene.game.localization.getText("tap_to_claim")}},{key:"inputEnable",value:function(){this.modules.closeRect.inputEnable()}},{key:"inputDisable",value:function(){this.modules.closeRect.inputDisable()}}],n&&Cm(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s,a,h}(fp);function Bm(t){return Bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(t)}function Nm(){Nm=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Bm(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Bm(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Gm(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Um(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ym(i.key),i)}}function Ym(t){var e=function(t,e){if("object"!=Bm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Bm(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bm(e)?e:e+""}function zm(t,e,r){return e=Wm(e),function(t,e){if(e&&("object"==Bm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xm()?Reflect.construct(e,r||[],Wm(t).constructor):e.apply(t,r))}function Xm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xm=function(){return!!t})()}function Vm(){return Vm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Wm(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},Vm.apply(null,arguments)}function Wm(t){return Wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wm(t)}function Hm(t,e){return Hm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hm(t,e)}var qm=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=zm(this,e,[t,0,0])).popups=[{key:"collection",object:qp},{key:"collection_reward",object:hv},{key:"xoltars",object:my},{key:"get_box",object:Ay},{key:"get_offline_profit",object:sm},{key:"box_reward",object:Pv},{key:"helper_upgrade",object:qy},{key:"xoltar_game",object:Pg},{key:"season_interval_reward",object:Bg},{key:"level_up",object:jm},{key:"fortunometr_interval_reward",object:Kg},{key:"collection_get_card",object:ym},{key:"friends",object:Om}],r.scene.game.events.on("popup_open",r.onOpenPopup,r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hm(t,e)}(e,t),r=e,i=[{key:"onOpenPopup",value:(n=Nm().mark((function t(e){var r,i,n,o,s,a,h=arguments;return Nm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=h.length>1&&void 0!==h[1]&&h[1],i=h.length>2&&void 0!==h[2]?h[2]:{},n=h.length>3&&void 0!==h[3]?h[3]:{},t.t0=Nm().keys(this.popups);case 4:if((t.t1=t.t0()).done){t.next=14;break}if(o=t.t1.value,this.popups[o].key!==e){t.next=12;break}return s=new this.popups[o].object(this.scene,i),t.next=10,s.open(n);case 10:a=t.sent,r&&r(a);case 12:t.next=4;break;case 14:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function s(t){Gm(o,r,i,s,a,"next",t)}function a(t){Gm(o,r,i,s,a,"throw",t)}s(void 0)}))},function(t){return o.apply(this,arguments)})},{key:"destroy",value:function(){this.scene.game.events.off("popup_open",this.onOpenPopup,this),Vm(Wm(e.prototype),"destroy",this).call(this)}}],i&&Um(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,n,o}(i().GameObjects.Container);function Km(t){return Km="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(t)}function Zm(){Zm=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Km(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Km(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Jm(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Qm(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,$m(i.key),i)}}function $m(t){var e=function(t,e){if("object"!=Km(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Km(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Km(e)?e:e+""}function tx(t,e,r){return e=rx(e),function(t,e){if(e&&("object"==Km(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ex()?Reflect.construct(e,r||[],rx(t).constructor):e.apply(t,r))}function ex(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ex=function(){return!!t})()}function rx(t){return rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rx(t)}function ix(t,e){return ix=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ix(t,e)}var nx=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),tx(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ix(t,e)}(e,t),r=e,i=[{key:"preload",value:function(){}},{key:"create",value:(n=Zm().mark((function t(){var e;return Zm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("[Popup] scene create"),e=new qm(this),this.add.existing(e);case 3:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function s(t){Jm(o,r,i,s,a,"next",t)}function a(t){Jm(o,r,i,s,a,"throw",t)}s(void 0)}))},function(){return o.apply(this,arguments)})}],i&&Qm(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,n,o}(i().Scene);function ox(t){return ox="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ox(t)}function sx(){sx=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==ox(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ox(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function ax(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function hx(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function s(t){ax(o,i,n,s,a,"next",t)}function a(t){ax(o,i,n,s,a,"throw",t)}s(void 0)}))}}function ux(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,cx(i.key),i)}}function cx(t){var e=function(t,e){if("object"!=ox(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=ox(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ox(e)?e:e+""}function lx(t,e,r){return e=px(e),function(t,e){if(e&&("object"==ox(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fx()?Reflect.construct(e,r||[],px(t).constructor):e.apply(t,r))}function fx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fx=function(){return!!t})()}function px(t){return px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},px(t)}function dx(t,e){return dx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dx(t,e)}var vx=function(t){function e(t,r,i,n,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=lx(this,e,[t,r,i])).scene.add.existing(s),s.type=n,s.assemble(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dx(t,e)}(e,t),r=e,n=[{key:"assemble",value:function(){var t=new(i().GameObjects.Sprite)(this.scene,0,0,this.textureKey);this.add(t),t.setOrigin(.5,.5),t.setDisplaySize(this.originalSize,this.originalSize),this.modules={icon:t}}},{key:"startMove",value:(h=hx(sx().mark((function t(e,r){return sx().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(this.scene,r);case 2:return e.startFollow(this),e.emitting=!0,t.next=6,this.moveTo(this.toPos);case 6:e.emitting=!1;case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"moveTo",value:(s=hx(sx().mark((function t(e){var r,n,o=this,s=arguments;return sx().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:1e3,n=s.length>2&&void 0!==s[2]?s[2]:0,s.length>3&&void 0!==s[3]||i().Math.Easing.Back.InOut,t.abrupt("return",new Promise((function(t){var s={t:0,vec:new(i().Math.Vector2)},a=new(i().Math.Vector2)(o.x,o.y),h=new(i().Math.Vector2)(o.scene.cameras.main.centerX+i().Math.Between(-200,200),o.scene.cameras.main.centerY+i().Math.Between(-200,200)),u=new(i().Math.Vector2)(o.scene.cameras.main.centerX-i().Math.Between(-200,200),o.scene.cameras.main.centerY-i().Math.Between(-200,200)),c=new(i().Math.Vector2)(e.x,e.y),l=i().Math.Easing.Linear,f=new(i().Curves.CubicBezier)(a,h,u,c);o.scene.tweens.add({targets:s,t:1,duration:r,delay:n,ease:l,onUpdate:function(){var t=f.getPoint(s.t,s.vec);o.x=t.x,o.y=t.y},onComplete:function(){o.destroy(),t()}})})));case 4:case"end":return t.stop()}}),t)}))),function(t){return s.apply(this,arguments)})},{key:"originalSize",get:function(){return 50}},{key:"moveTo2",value:(o=hx(sx().mark((function t(e){var r=this;return sx().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){u(e);var n={t:0,vec:new(i().Math.Vector2)},o=new(i().Math.Vector2)(r.x,start.y),s=new(i().Math.Vector2)(start.x+i().Math.Between(-200,200),start.y+i().Math.Between(-200,200)),a=new(i().Math.Vector2)(target.x,target.y),h=i().Math.Easing.Linear,c=new(i().Curves.QuadraticBezier)(o,s,a);scene.tweens.add({targets:n,t:1,duration,delay,ease:h,onUpdate:function(){var t=c.getPoint(n.t,n.vec);start.x=t.x,start.y=t.y,start.angle+=angleChange},onComplete:function(){start.setAlpha(0),t()}})})));case 1:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})},{key:"toPos",get:function(){var t={x:0,y:0};switch(this.type){case 1:t={x:this.scene.cameras.main.width-180-150,y:60};break;case 2:t={x:40,y:60}}return t}},{key:"show",value:function(){var t=hx(sx().mark((function t(e,r){var n,o,s,a=arguments;return sx().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:250,o=a.length>3&&void 0!==a[3]?a[3]:0,s=a.length>4&&void 0!==a[4]?a[4]:i().Math.Easing.Back.Out,t.abrupt("return",new Promise((function(t){e.tweens.add({targets:r,scaleX:1,scaleY:1,duration:n,delay:o,ease:s,onComplete:function(){return t()}})})));case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"textureKey",get:function(){var t="coin_icon";switch(this.type){case 1:t="coin_icon";break;case 2:t="fortuna_icon"}return t}}],n&&ux(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s,h}(i().GameObjects.Container);function yx(t){return yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yx(t)}function gx(){gx=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==yx(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(yx(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function mx(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function xx(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,bx(i.key),i)}}function bx(t){var e=function(t,e){if("object"!=yx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=yx(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yx(e)?e:e+""}function wx(t,e,r){return e=Sx(e),function(t,e){if(e&&("object"==yx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ex()?Reflect.construct(e,r||[],Sx(t).constructor):e.apply(t,r))}function Ex(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ex=function(){return!!t})()}function Tx(){return Tx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Sx(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},Tx.apply(null,arguments)}function Sx(t){return Sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sx(t)}function _x(t,e){return _x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_x(t,e)}var Ox=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=wx(this,e,[t,0,0])).scene.game.events.on("effects_get_rewards",r.onGetReward,r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_x(t,e)}(e,t),r=e,n=[{key:"onGetReward",value:(o=gx().mark((function t(e){var r,n=this;return gx().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],e.forEach((function(t,e){var o=n.scene.cameras.main.centerX+i().Math.Between(-100,100),s=n.scene.cameras.main.centerY+i().Math.Between(-100,100),a=n.addParticle(t.type),h=new vx(n.scene,o,s,t.type,a);r.push(h.startMove(a,25*e))})),t.next=5,Promise.all(r);case 5:this.scene.game.events.emit("coins_update"),this.scene.game.events.emit("fortuna_update");case 7:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(r,i){var n=o.apply(t,e);function s(t){mx(n,r,i,s,a,"next",t)}function a(t){mx(n,r,i,s,a,"throw",t)}s(void 0)}))},function(t){return s.apply(this,arguments)})},{key:"addParticle",value:function(t){var e=this.scene.add.particles(0,0,"particle_"+t,{blendMode:"ADD",lifespan:500,quantity:1,speed:10,scale:{start:1,end:.1},emitting:!1});return this.scene.add.existing(e),e}},{key:"destroy",value:function(){this.scene.game.events.off("effects_get_rewards",this.onGetReward,this),Tx(Sx(e.prototype),"destroy",this).call(this)}}],n&&xx(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,s}(i().GameObjects.Container);function Px(t){return Px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Px(t)}function Mx(){Mx=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof g?e:g,s=Object.create(o.prototype),a=new L(i||[]);return n(s,"_invoke",{value:O(t,r,a)}),s}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function x(){}var b={};u(b,s,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(C([])));E&&E!==r&&i.call(E,s)&&(b=E);var T=x.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(n,o,s,a){var h=l(t[n],t,o);if("throw"!==h.type){var u=h.arg,c=u.value;return c&&"object"==Px(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(c).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,a)}))}a(h.arg)}var o;n(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return o=o?o.then(n,n):n()}})}function O(e,r,i){var n=f;return function(o,s){if(n===d)throw Error("Generator is already running");if(n===v){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var h=P(a,i);if(h){if(h===y)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var u=l(e,r,i);if("normal"===u.type){if(n=i.done?v:p,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function P(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Px(e)+" is not iterable")}return m.prototype=x,n(T,"constructor",{value:x,configurable:!0}),n(x,"constructor",{value:m,configurable:!0}),m.displayName=u(x,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u(t,h,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},S(_.prototype),u(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,i,n,o){void 0===o&&(o=Promise);var s=new _(c(t,r,i,n),o);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(T),u(T,h,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return a.type="throw",a.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(h&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:C(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function Ax(t,e,r,i,n,o,s){try{var a=t[o](s),h=a.value}catch(t){return void r(t)}a.done?e(h):Promise.resolve(h).then(i,n)}function Lx(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Cx(i.key),i)}}function Cx(t){var e=function(t,e){if("object"!=Px(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=Px(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Px(e)?e:e+""}function Rx(t,e,r){return e=Fx(e),function(t,e){if(e&&("object"==Px(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,kx()?Reflect.construct(e,r||[],Fx(t).constructor):e.apply(t,r))}function kx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kx=function(){return!!t})()}function Fx(t){return Fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fx(t)}function Ix(t,e){return Ix=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ix(t,e)}var Dx=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Rx(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ix(t,e)}(e,t),r=e,i=[{key:"preload",value:function(){}},{key:"create",value:(n=Mx().mark((function t(){var e;return Mx().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("[Popup] scene create"),e=new Ox(this),this.add.existing(e);case 3:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function s(t){Ax(o,r,i,s,a,"next",t)}function a(t){Ax(o,r,i,s,a,"throw",t)}s(void 0)}))},function(){return o.apply(this,arguments)})}],i&&Lx(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,n,o}(i().Scene);function jx(t){return jx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jx(t)}function Bx(t,e,r){return e=Gx(e),function(t,e){if(e&&("object"==jx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Nx()?Reflect.construct(e,r||[],Gx(t).constructor):e.apply(t,r))}function Nx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Nx=function(){return!!t})()}function Gx(t){return Gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gx(t)}function Ux(t,e){return Ux=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ux(t,e)}var Yx=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Bx(this,e,[S])).scene.add("Boot",xi),t.scene.add("Preload",ji),t.scene.add("Game",fl),t.scene.add("GUI",Of),t.scene.add("Popup",nx),t.scene.add("Effects",Dx),t.scene.start("Boot",xi),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ux(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(i().Game);window.onload=function(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){var t=window.innerWidth*window.devicePixelRatio/(window.innerHeight*window.devicePixelRatio);S.height=Math.max(900,S.width/t)}new Yx(S)}})()})();